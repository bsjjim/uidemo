//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(!nexacro._AccessibilityStyles){nexacro._AccessibilityStyles=[];}if(!nexacro._GraphicsLib){nexacro._GraphicsLib={};nexacro._GraphicsLib._ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];nexacro._GraphicsLib._toString=(Object.prototype.toString);nexacro._GraphicsLib._abscissas=[[0.5773502691896257645091488],[0,0.7745966692414833770358531],[0.3399810435848562648026658,0.8611363115940525752239465],[0,0.5384693101056830910363144,0.9061798459386639927976269],[0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],[0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],[0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],[0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],[0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],[0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],[0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],[0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],[0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],[0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],[0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]];nexacro._GraphicsLib._weights=[[1],[0.8888888888888888888888889,0.5555555555555555555555556],[0.6521451548625461426269361,0.3478548451374538573730639],[0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],[0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],[0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],[0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],[0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],[0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],[0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],[0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],[0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],[0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],[0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],[0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]];nexacro._GraphicsLib._TOLERANCE=10e-6;nexacro._GraphicsLib._EPSILON=10e-12;nexacro._GraphicsLib._KAPPA=4* (Math.sqrt(2)-1)/3;nexacro._GraphicsLib._fmtPercision=5;nexacro._GraphicsLib._fmtMultiplier=Math.pow(10,5);nexacro._GraphicsLib.isEmpty=function(_a){if(_a==null){return true;}if(nexacro._isString(_a)||nexacro._isArray(_a)){return _a.length==0?true:false;}else if(nexacro._isObject(_a)){for(var _b in _a){if(_a.hasOwnProperty(_b)){return false;}}return true;}return false;};nexacro._GraphicsLib.getUniqueId=function(_a,_b){if(nexacro._GraphicsLib.isEmpty(_a)){_a="";}if(nexacro._GraphicsLib.isEmpty(_b)){_b=45;}else{_b=_b.charCodeAt(0);}var _c=nexacro._GraphicsLib._ALPHA_CHAR_CODES,_d=Math;var _e=0;var _f;var _g=new Array(36);var _h= -1;while(_e<8){_g[ ++_h]=_c[nexacro._random()* 16|0];_e++ ;}_e=0;while(_e<3){_g[ ++_h]=_b;_f=0;while(_f<4){_g[ ++_h]=_c[nexacro._random()* 16|0];_f++ ;}_e++ ;}_g[ ++_h]=_b;var _i=(new Date()).getTime();_i=("0000000"+_i.toString(16)).substr( -8);_e=0;while(_e<8){_g[ ++_h]=_i.charCodeAt(_e);_e++ ;}_e=0;while(_e<4){_g[ ++_h]=_c[nexacro._getCryptoRandomValue(1,16)];_e++ ;}return _a+String.fromCharCode.apply(null,_g);};if(nexacro._Browser=="Runtime"){nexacro._GraphicsLib.getLines=function(_a,_b,_c,_d){var _e;if(_c=="char"){var _f;var _g=_a.size;var _h=(_f>=0?nexacro._convertPtToPx(_g):Math.abs(_g));if(_h>=_d){return _b.split("");}_f=nexacro.__getTextSize(_b,_a,"none");if(_f[0]>_d){_e=[];var _i=_b.split("\n"),_j,_k;for(var _l=0,_m=_i.length;_l<_m;_l++ ){_j=_i[_l];_k=nexacro.__getTextSize(_j,_a,"none");if(_k[0]>_d){_e=_e.concat(this.getFragmentText(_a,_j,_d));}else{_e.push(_j);}}}else{_e=_b.split("\n");}}else{_e=_b.split("\n");}return _e;};nexacro._GraphicsLib.getFragmentText=function(_a,_b,_c){var _d=_b.split(' '),_e=[],_f="",_g="",_h="",_i="",_j=0,_k,_l="";for(var _m=0,_n=_d.length;_m<_n;_m++ ){_h=_l+_d[_m]+' ';if(_m>0&&(nexacro.__getTextSize(_h,_a,"none"))[0]>_c){_f=_l.split("");for(_j=0,_k=_f.length;_j<_k;_j++ ){_i=_g+_f[_j];if(_j>0&&(nexacro.__getTextSize(_i,_a,"none"))[0]>_c){_e.push(_g);_g=_f[_j];}else{_g=_i;}}_l=_g+_d[_m]+' ';}else{_l=_h;}}if((nexacro.__getTextSize(_l,_a,"none"))[0]>_c){_f=_l.split("");_g="";for(_j=0,_k=_f.length;_j<_k;_j++ ){_i=_g+_f[_j];if(_j>0&&(nexacro.__getTextSize(_i,_a,"none"))[0]>_c){_e.push(_g);_g=_f[_j];}else{_g=_i;}}if(_g.length){_e.push(_g);}}else if(_l.length){_e.push(_l);}return _e;};nexacro._GraphicsLib.getTextSize=function(_a,_b,_c){var _d=0,_e=_b.length,_f=_c* _e;for(var _g=0;_g<_e;_g++ ){_d=Math.max(_d,(nexacro.__getTextSize(_b[_g],_a,"none"))[0]);}return [_d,_f];};}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){}else{nexacro._GraphicsLib.getDefaultCanvas=function(){var _a=nexacro._GraphicsLib._graphicsDefaultCanvas;if(!_a){var _b=nexacro._managerFrameDoc;_a=_b.createElement("canvas");_a.width=1;_a.height=1;_b.body.appendChild(_a);nexacro._GraphicsLib._graphicsDefaultCanvas=_a;}return _a;};nexacro._GraphicsLib.getLines=function(_a,_b,_c,_d){var _e=nexacro._GraphicsLib.getDefaultCanvas(),_f=_e.getContext('2d');var _g,_h,_i,_j=0;if(_c=="char"){_h=_a._size;var _k=(_h>=0?nexacro._convertPtToPx(_h):Math.abs(_h));if(_k>=_d){return _b.split("");}_f.font=_a._sysvalue;_h=_f.measureText(_b);if(_h.width>_d){_g=[];var _l=_b.split("\n"),_m,_n;_j=_l.length;for(_i=0;_i<_j;_i++ ){_m=_l[_i];_n=_f.measureText(_m);if(_n.width>_d){_g=_g.concat(nexacro._GraphicsLib.getFragmentText(_f,_m,_d));}else{_g.push(_m);}}}else{_g=_b.split("\n");}}else{_g=_b.split("\n");}return _g;};nexacro._GraphicsLib.getFragmentText=function(_a,_b,_c){var _d=_b.split(' '),_e=[],_f="",_g="",_h="",_i="",_j=0,_k=0,_l="";for(var _m=0,_n=_d.length;_m<_n;_m++ ){_g=_l+_d[_m]+' ';if(_m>0&&_a.measureText(_g).width>_c){_f=_l.split("");for(_j=0,_k=_f.length;_j<_k;_j++ ){_i=_h+_f[_j];if(_j>0&&_a.measureText(_i).width>_c){_e.push(_h);_h=_f[_j];}else{_h=_i;}}_l=_h+_d[_m]+' ';}else{_l=_g;}}if(_a.measureText(_l).width>_c){_f=_l.split("");_h="";for(_j=0,_k=_f.length;_j<_k;_j++ ){_i=_h+_f[_j];if(_j>0&&_a.measureText(_i).width>_c){_e.push(_h);_h=_f[_j];}else{_h=_i;}}if(_h.length){_e.push(_h);}}else if(_l.length){_e.push(_l);}return _e;};nexacro._GraphicsLib.getTextSize=function(_a,_b,_c){var _d=nexacro._GraphicsLib.getDefaultCanvas(),_e=_d.getContext('2d');_e.font=_a._sysvalue;var _f=0,_g=_b.length,_h=_c* _g;for(var _i=0;_i<_g;_i++ ){_f=Math.max(_f,_e.measureText(_b[_i]).width);}return [_f,_h];};}nexacro._GraphicsLib.arrForEach=function(_a,_b,_c){var _d,_e=_a.length;for(_d=0;_d<_e;_d++ ){_b.call(_c,_a[_d],_d,_a);}};nexacro._GraphicsLib.arrEach=function(_a,_b,_c,_d){var _e,_f=_a.length;if(_d!==true){for(_e=0;_e<_f;_e++ ){if(_b.call(_c||_a[_e],_a[_e],_e,_a)===false){return _e;}}}else{for(_e=_f-1;_e> -1;_e-- ){if(_b.call(_c||_a[_e],_a[_e],_e,_a)===false){return _e;}}}return true;};nexacro._GraphicsLib.arrCopy=function(_a,_b,_c,_d,_e){if(!_e){return;}var _f=_e+_b;var _g=0;var _h=0;if(_a==_c){_a=_a.slice(_b,_f);_f=_a.length;for(_h=_d;_g<_f;_g++ ,_h++ ){_c[_h]=_a[_g];}}else{for(_g=_b,_h=_d;_g<_f;_g++ ,_h++ ){_c[_h]=_a[_g];}}};nexacro._GraphicsLib.arrIndexOf=function(_a,_b,_c,_d){var _e=_a.length;if(_c==null){_c=0;}var _f=!!_d;_c=(_c<0)?Math.ceil(_c):Math.floor(_c);if(_c<0){_c+=_e;}if(_f){for(;_c<_e;_c++ ){if(_a[_c]===_b){return _c;}}}else{for(;_c<_e;_c++ ){if(_a[_c]==_b){return _c;}}}return  -1;};nexacro._GraphicsLib.arrRemoveAt=function(_a,_b){_a[_b]=null;_a.splice(_b,1);};nexacro._GraphicsLib.arrRemove=function(_a,_b){var _c=nexacro._GraphicsLib.arrIndexOf(_a,_b);if(_c!== -1){_a[_c]=null;_a.splice(_c,1);}};nexacro._GraphicsLib.arrClean=function(_a){var _b=[],_c=0,_d=_a.length,_e;for(;_c<_d;_c++ ){_e=_a[_c];if(!nexacro._GraphicsLib.isEmpty(_e)){_b.push(_e);}}return _b;};nexacro._GraphicsLib.arrFilter=function(_a,_b,_c){if(!_b||!(typeof _b==="function")){return;}var _d=[],_e=0,_f=_a.length;for(;_e<_f;_e++ ){if(_b.call(_c,_a[_e],_e,_a)){_d.push(_a[_e]);}}return _d;};nexacro._GraphicsLib.arrIndexOfProp=function(_a,_b,_c,_d,_e){var _f=_a.length,_g=Number(_d)||0,_h=_e||false,_i,_j;_g=(_g<0)?Math.ceil(_g):Math.floor(_g);if(_g<0){_g+=_f;}if(_h){for(;_g<_f;_g++ ){if(_g in _a&&_a[_g]){_i=_a[_g];_j=_i[_b];if(_j===_c){return _g;}}}}else{for(;_g<_f;_g++ ){if(_g in _a&&_a[_g]){_i=_a[_g];_j=_i[_b];if(_j==_c){return _g;}}}}return  -1;};nexacro._GraphicsLib.arrMove=function(_a,_b,_c){var _d,_e;_b=parseInt(_b,10);_c=parseInt(_c,10);if(_b!==_c&&0<=_b&&_b<=_a.length&&0<=_c&&_c<=_a.length){_e=_a[_b];if(_b<_c){for(_d=_b;_d<_c;_d++ ){_a[_d]=_a[_d+1];}}else{for(_d=_b;_d>_c;_d-- ){_a[_d]=_a[_d-1];}}_a[_c]=_e;return true;}return false;};nexacro._GraphicsLib.arrMap=function(_a,_b,_c){if(!_b||!(typeof _b==="function")){return;}var _d=[],_e=0,_f=_a.length;for(;_e<_f;_e++ ){_d[_e]=_b.call(_c,_a[_e],_e,_a);}return _d;};nexacro._GraphicsLib.arrMax=function(_a){return Math.max.apply(Math,_a);};nexacro._GraphicsLib.arrMin=function(_a){return Math.min.apply(Math,_a);};nexacro._GraphicsLib.objEach=function(_a,_b,_c){var _d,_e=_c||_a;for(_d in _a){if(_a.hasOwnProperty(_d)){if(_b.call(_e,_d,_a[_d],_a)===false){return;}}}};nexacro._GraphicsLib.objMerge=function(_a){var _b=1,_c,_d,_e=arguments.length,_f,_g,_h;if(!_a){return;}if(typeof arguments[_e-1]=="function"){_e=_e-1;_c=arguments[_e];}else if(typeof arguments[_e-2]=="function"){_e=_e-2;_c=arguments[_e];_d=arguments[_e+1]||this;}if(_c){for(;_b<_e;_b++ ){_f=arguments[_b];for(_g in _f){if(_f.hasOwnProperty(_g)){_h=_f[_g];if(_c.call(_d,_g,_h,_a)!==false){_a[_g]=_h;}}}}}else{for(;_b<_e;_b++ ){_f=arguments[_b];for(_g in _f){if(_f.hasOwnProperty(_g)){_h=_f[_g];if(!_a[_g]){_a[_g]=_h;}}}}}return _a;};nexacro._GraphicsLib.objCopyProperties=function(_a,_b){if(_a&&_b){var _c,_d;for(_c in _b){if(_b.hasOwnProperty(_c)){_d=_b[_c];_a[_c]=_d;}}}};nexacro._GraphicsLib.strCapitalize=function(_a){return _a.replace(/\b[a-z]/g,function(_b){return _b.toUpperCase();});};nexacro._GraphicsLib.mathIsZero=function(_a){return Math.abs(_a)<=this._EPSILON;};nexacro._GraphicsLib.mathIntegrate=function(_a,_b,_c,_d){var _e=this._abscissas[_d-2],_f=this._weights[_d-2],_g=0.5* (_c-_b),_h=_g+_b,_i=0,_j=(_d+1)>>1,_k=_d&1?_f[_i++ ]* _a(_h):0;while(_i<_j){var _l=_g* _e[_i];_k+=_f[_i++ ]* (_a(_h+_l)+_a(_h-_l));}return _g* _k;};nexacro._GraphicsLib.mathFindRoot=function(_a,_b,_c,_d,_e,_f,_g){for(var _k=0;_k<_f;_k++ ){var _h=_a(_c),_i=_h/_b(_c);if(Math.abs(_i)<_g){return _c;}var _j=_c-_i;if(_h>0){_e=_c;_c=_j<=_d?0.5* (_d+_e):_j;}else{_d=_c;_c=_j>=_e?0.5* (_d+_e):_j;}}};nexacro._GraphicsLib.mathSolveQuadratic=function(_a,_b,_c,_d){var _e=this._EPSILON;if(Math.abs(_a)<_e){if(Math.abs(_b)>=_e){_d[0]= -_c/_b;return 1;}return Math.abs(_c)<_e? -1:0;}var _f=_b* _b-4* _a* _c;if(_f<0){return 0;}_f=Math.sqrt(_f);_a*=2;var _g=0;_d[_g++ ]=( -_b-_f)/_a;if(_f>0){_d[_g++ ]=( -_b+_f)/_a;}return _g;};nexacro._GraphicsLib.mathSolveBezier=function(_a,_b,_c,_d,_e){var _f=this._EPSILON,_g,_h,_i,_j,_k;if(Math.abs(_a)<_f){return this.mathSolveQuadratic(_b,_c,_d,_e);}_b/=_a;_c/=_a;_d/=_a;var _l=_b* _b,_m=(_l-3* _c)/9,_n=(2* _l* _b-9* _b* _c+27* _d)/54,_o=_m* _m* _m,_p=_n* _n-_o;_b/=3;if(Math.abs(_p)<_f){if(Math.abs(_n)<_f){_e[0]= -_b;return 1;}_g=Math.sqrt(_m);_h=_n>0?1: -1;_e[0]= -_h* 2* _g-_b;_e[1]=_h* _g-_b;return 2;}if(_p<0){_g=Math.sqrt(_m);_i=Math.acos(_n/(_g* _g* _g))/3;_j= -2* _g;_k=2* Math.PI/3;_e[0]=_j* Math.cos(_i)-_b;_e[1]=_j* Math.cos(_i+_k)-_b;_e[2]=_j* Math.cos(_i-_k)-_b;return 3;}var _q=(_n>0? -1:1)* Math.pow(Math.abs(_n)+Math.sqrt(_p),1/3);_e[0]=_q+_m/_q-_b;return 1;};nexacro._GraphicsLib.toStrFormatNumber=function(_a){return (Math.round(_a* nexacro._GraphicsLib._fmtMultiplier)/nexacro._GraphicsLib._fmtMultiplier)+"";};nexacro._GraphicsLib.toStrFormatPoint=function(_a,_b){return nexacro._GraphicsLib.toStrFormatNumber(_a.x)+(_b||',')+nexacro._GraphicsLib.toStrFormatNumber(_a.y);};nexacro._GraphicsLib.toStrFormatSize=function(_a,_b){return nexacro._GraphicsLib.toStrFormatNumber(_a.width)+(_b||',')+nexacro._GraphicsLib.toStrFormatNumber(_a.height);};nexacro._GraphicsLib.toStrFormatRect=function(_a,_b){return nexacro._GraphicsClassUtils.fmtPoint(_a,_b)+(_b||',')+nexacro._GraphicsLib.toStrFormatSize(_a,_b);};}if(!nexacro._GraphicsHashMap){nexacro._GraphicsHashMap=function(){this._size=0;this._map={};};var _pGraphicsHashMap=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsHashMap);nexacro._GraphicsHashMap.prototype=_pGraphicsHashMap;nexacro._GraphicsHashMap._hashkeypool={};nexacro._GraphicsHashMap._simpleToString=function(){return this._hashKey;};nexacro._GraphicsHashMap.getHashKey=function(_a,_b){var _c;if(_b._hashKey==null){var _d=this._hashkeypool[_a];if(_d==null){_d=0;this._hashkeypool[_a]=_d;}else{_d++ ;this._hashkeypool[_a]=_d;}_c=_a+_d;_b._hashKey=_c;}else{_c=_b._hashKey;}return _c;};nexacro._GraphicsHashMap.makeHashKey=function(_a,_b){_a._hashKey=nexacro._GraphicsLib.getUniqueId();_a.toString=_b||this._simpleToString;};nexacro._GraphicsHashMap.makeHashKeyForArray=function(_a,_b){var _c=nexacro._GraphicsLib.getUniqueId,_d,_e=_a.length,_f=_b||this._simpleToString;for(_d=0;_d<_e;_d++ ){_a[_d]._hashKey=_c();_a[_d].toString=_f;}};_pGraphicsHashMap.put=function(_a,_b){if(this.containsKey(_a)){return false;}var _c=this._map;this._size++ ;return _c[_a._toHashString()]=_b;};_pGraphicsHashMap.get=function(_a){return this._map[_a._toHashString()];};_pGraphicsHashMap.remove=function(_a){if(!this.containsKey(_a)){return false;}var _b=this._map;this._size-- ;delete _b[_a._toHashString()];return true;};_pGraphicsHashMap.containsKey=function(_a){return _a._toHashString() in this._map;};_pGraphicsHashMap.getSize=function(){return this._size;};_pGraphicsHashMap.clear=function(){this._size=0;this._map={};};_pGraphicsHashMap.fromDataset=function(_a,_b,_c,_d){var _e,_f=_a.getRowCount()||0;if(_d!==false){this.clear();}if(_c){for(_e=0;_e<_f;_e++ ){this.put(_a.getColumn(_e,_b),_a.getColumn(_e,_c));}}else{for(_e=0;_e<_f;_e++ ){this.put(_a.getColumn(_e,_b),_e);}}};_pGraphicsHashMap.toArray=function(_a){var _b=[];if(_a==null){_a=0;}if(_a==0){this.forEach(function(_c){_b.push(_c);});}else if(_a==1){this.forEach(function(_c,_d){_b.push(_d);});}else{this.forEach(function(_c,_d){_b.push({key:_c,value:_d});});}return _b;};_pGraphicsHashMap.forEach=function(_a){var _b=this._map;for(var _c in _b){_a.call(this,_c,_b[_c._toHashString()]);}};_pGraphicsHashMap._debug=function(_a){if(_a){this.forEach(function(_b,_c){console.log("key: ",_b,"value: ",_c);});}else{this.forEach(function(_b,_c){trace(_b+"--->"+_c);});}};delete _pGraphicsHashMap;}if(!nexacro._GraphicsMatrix){nexacro._GraphicsMatrix=function(_a){var _b=arguments.length,_c=true;if(_b==6){this.set_scaleX( +arguments[0]);this.set_shearY( +arguments[2]);this.set_shearX( +arguments[1]);this.set_scaleY( +arguments[3]);this.set_translateX( +arguments[4]);this.set_translateY( +arguments[5]);}else if(_b==1){if(_a instanceof nexacro._GraphicsMatrix){this.set(_a._scaleX,_a._shearX,_a._shearY,_a._scaleY,_a._translateX,_a._translateY);}else if(nexacro._isArray(_a)){this.set_scaleX( +arguments[0]);this.set_shearY( +arguments[2]);this.set_shearX( +arguments[1]);this.set_scaleY(arguments[3]);this.set_translateX( +arguments[4]);this.set_translateY( +arguments[5]);}else{_c=false;}if(!_c){}}else if(_b==0){this.reset();}};var _pGraphicsMatrix=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsMatrix);nexacro._GraphicsMatrix.prototype=_pGraphicsMatrix;nexacro._GraphicsMatrix.DEGTORAD=Math.PI/180;nexacro._GraphicsMatrix.RADTODEG=180/Math.PI;_pGraphicsMatrix.scaleX=1;_pGraphicsMatrix.shearY=0;_pGraphicsMatrix.shearX=0;_pGraphicsMatrix.scaleY=1;_pGraphicsMatrix.translateX=0;_pGraphicsMatrix.translateY=0;_pGraphicsMatrix._scaleX=1;_pGraphicsMatrix._shearY=0;_pGraphicsMatrix._shearX=0;_pGraphicsMatrix._scaleY=1;_pGraphicsMatrix._translateX=0;_pGraphicsMatrix._translateY=0;_pGraphicsMatrix.set_scaleX=function(_a){if(isNumber(_a)&&this.scaleX!=_a){this.scaleX=_a;this._scaleX=this.scaleX;}};_pGraphicsMatrix.set_shearY=function(_a){if(isNumber(_a)&&this.shearY!=_a){this.shearY=_a;this._shearY=this.shearY;}};_pGraphicsMatrix.set_shearX=function(_a){if(isNumber(_a)&&this.shearX!=_a){this.shearX=_a;this._shearX=this.shearX;}};_pGraphicsMatrix.set_scaleY=function(_a){if(isNumber(_a)&&this.scaleY!=_a){this.scaleY=_a;this._scaleY=this.scaleY;}};_pGraphicsMatrix.set_translateX=function(_a){if(isNumber(_a)&&this._translateX!=_a){this.translateX=_a;this._translateX=this.translateX;}};_pGraphicsMatrix.set_translateY=function(_a){if(isNumber(_a)&&this._translateY!=_a){this.translateY=_a;this._translateY=this.translateY;}};_pGraphicsMatrix.set=function(_a,_b,_c,_d,_e,_f){this.set_scaleX(_a);this.set_shearY(_c);this.set_shearX(_b);this.set_scaleY(_d);this.set_translateX(_e);this.set_translateY(_f);return this;};_pGraphicsMatrix.clone=function(){return new nexacro._GraphicsMatrix(this);};_pGraphicsMatrix.equals=function(_a){return _a===this||_a&&this._scaleX==_a._scaleX&&this._shearX==_a._shearX&&this._shearY==_a._shearY&&this._scaleY==_a._scaleY&&this._translateX==_a._translateX&&this._translateY==_a._translateY||false;};_pGraphicsMatrix.toString=function(){var _a=[nexacro._GraphicsLib.toStrFormatNumber(this._scaleX),nexacro._GraphicsLib.toStrFormatNumber(this._shearX),nexacro._GraphicsLib.toStrFormatNumber(this._translateX)];var _b=[nexacro._GraphicsLib.toStrFormatNumber(this._shearY),nexacro._GraphicsLib.toStrFormatNumber(this._scaleY),nexacro._GraphicsLib.toStrFormatNumber(this._translateY)];return '[['+_a.join(', ')+'], ['+_b.join(', ')+']]';};_pGraphicsMatrix.reset=function(){this._scaleX=this._scaleY=1;this._shearY=this._shearX=this._translateX=this._translateY=0;return this;};_pGraphicsMatrix.scale=function(_a,_b){var _c=0;if(_a instanceof nexacro.Point){_c=1;}else{_a=new nexacro.Point( +arguments[0], +arguments[1]);_c=2;}if(arguments[_c]!=null){if(arguments[_c] instanceof nexacro.Point){_b=arguments[_c];}else{_b=new nexacro.Point( +arguments[_c], +arguments[_c+1]);}}else{_b=null;}if(_b){this.translate(_b);}this._scaleX*=_a.x;this._shearY*=_a.x;this._shearX*=_a.y;this._scaleY*=_a.y;if(_b){this.translate(_b.negate());}return this;};_pGraphicsMatrix.translate=function(_a){if(!(_a instanceof nexacro.Point)){_a=new nexacro.Point( +arguments[0], +arguments[1]);}var _b=_a.x,_c=_a.y;this._translateX+=_b* this._scaleX+_c* this._shearY;this._translateY+=_b* this._shearX+_c* this._scaleY;return this;};_pGraphicsMatrix.rotate=function(_a,_b){if(!(_b instanceof nexacro.Point)){var _c=arguments.length;if(_c==3){_b=new nexacro.Point( +arguments[1], +arguments[2]);}else{_b=new nexacro.Point();}}_a=_a* nexacro._GraphicsMatrix.DEGTORAD;var _d=_b.x,_e=_b.y,_f=Math.cos(_a),_g=Math.sin(_a),_h=_d-_d* _f+_e* _g,_i=_e-_d* _g-_e* _f,_j=this._scaleX,_k=this._shearX,_l=this._shearY,_m=this._scaleY;this._scaleX=_f* _j+_g* _k;this._shearX= -_g* _j+_f* _k;this._shearY=_f* _l+_g* _m;this._scaleY= -_g* _l+_f* _m;this._translateX+=_h* _j+_i* _k;this._translateY+=_h* _l+_i* _m;return this;};_pGraphicsMatrix.shear=function(_a,_b){var _c=0;if(_a instanceof nexacro.Point){_c=1;}else{_a=new nexacro.Point( +arguments[0], +arguments[1]);_c=2;}if(arguments[_c]!=null){if(arguments[_c] instanceof nexacro.Point){_b=arguments[_c];}else{_b=new nexacro.Point( +arguments[_c], +arguments[_c+1]);}}else{_b=null;}if(_b){this.translate(_b);}var _d=this._scaleX,_e=this._shearX;this._scaleX+=_a.y* this._shearY;this._shearX+=_a.y* this._scaleY;this._shearY+=_a.x* _d;this._scaleY+=_a.x* _e;if(_b){this.translate(_b.negate());}return this;};_pGraphicsMatrix.skew=function(_a,_b,_c,_d){_a=_a* nexacro._GraphicsMatrix.DEGTORAD;_b=_b* nexacro._GraphicsMatrix.DEGTORAD;var _e=_c-_c* Math.cos(_a)+_d* Math.sin(_a),_f=_d-_c* Math.sin(_b)-_d* Math.cos(_b),_g=this._scaleX,_h=this._shearX,_i=this._shearY,_j=this._scaleY;_e=_e* _g+_f* _h;_f=_e* _i+_f* _j;this.concatenate(new nexacro._GraphicsMatrix(Math.cos(_b), -Math.sin(_a),Math.sin(_b),Math.cos(_a),_e,_f));};_pGraphicsMatrix.isIdentity=function(){return this._scaleX==1&&this._shearY==0&&this._shearX==0&&this._scaleY==1&&this._translateX==0&&this._translateY==0;};_pGraphicsMatrix.isInvertible=function(){return !!this._getDeterminant();};_pGraphicsMatrix.isSingular=function(){return !this._getDeterminant();};_pGraphicsMatrix.concatenate=function(_a){var _b=this._scaleX,_c=this._shearX,_d=this._shearY,_e=this._scaleY;this._scaleX=_a._scaleX* _b+_a._shearY* _c;this._shearX=_a._shearX* _b+_a._scaleY* _c;this._shearY=_a._scaleX* _d+_a._shearY* _e;this._scaleY=_a._shearX* _d+_a._scaleY* _e;this._translateX+=_a._translateX* _b+_a._translateY* _c;this._translateY+=_a._translateX* _d+_a._translateY* _e;return this;};_pGraphicsMatrix.preConcatenate=function(_a){var _b=this._scaleX,_c=this._shearX,_d=this._shearY,_e=this._scaleY,_f=this._translateX,_g=this._translateY;this._scaleX=_a._scaleX* _b+_a._shearX* _d;this._shearX=_a._scaleX* _c+_a._shearX* _e;this._shearY=_a._shearY* _b+_a._scaleY* _d;this._scaleY=_a._shearY* _c+_a._scaleY* _e;this._translateX=_a._scaleX* _f+_a._shearX* _g+_a._translateX;this._translateY=_a._shearY* _f+_a._scaleY* _g+_a._translateY;return this;};_pGraphicsMatrix.transform=function(_a,_b,_c,_d,_e){if(arguments.length<5){if(!(_a instanceof nexacro.Point)){_a=new nexacro.Point(arguments[0],arguments[1]);var _f=_a.__readArgs;return this._transformPoint(_a,arguments[_f]);}else{return this._transformPoint(_a,_b);}}else{return this._transformCoordinates(_a,_b,_c,_d,_e);}};_pGraphicsMatrix._transformPoint=function(_a,_b){var _c=_a.x,_d=_a.y;if(!_b){_b=new nexacro.Point();}return _b.set(_c* this._scaleX+_d* this._shearX+this._translateX,_c* this._shearY+_d* this._scaleY+this._translateY);};_pGraphicsMatrix._transformCoordinates=function(_a,_b,_c,_d,_e){var _f=_b,_g=_d,_h=_b+2* _e,_i,_j,_k=this._scaleX,_l=this._shearX,_m=this._shearY,_n=this._scaleY;var _o=this._translateX,_p=this._translateY;while(_f<_h){_i=_a[_f++ ];_j=_a[_f++ ];_c[_g++ ]=_i* _k+_j* _l+_o;_c[_g++ ]=_i* _m+_j* _n+_p;}return _c;};_pGraphicsMatrix._transformCorners=function(_a,_b){var _c=_a.left,_d=_a.top,_e=_c+_a.width,_f=_d+_a.height,_g=[_c,_d,_e,_d,_e,_f,_c,_f,_b];return this._transformCoordinates(_g,0,_g,0,4);};_pGraphicsMatrix._transformBounds=function(_a,_b,_c){var _d=this._transformCorners(_a,_c),_e=_d.slice(0,2),_f=_d.slice(0),_g,_h;for(var _i=2;_i<8;_i++ ){_g=_d[_i];_h=_i&1;if(_g<_e[_h]){_e[_h]=_g;}else if(_g>_f[_h]){_f[_h]=_g;}}if(!_b){_b=new nexacro.Rect();}return _b.set(_e[0],_e[1],_f[0]-_e[0],_f[1]-_e[1]);};_pGraphicsMatrix.inverseTransform=function(_a){if(!(_a instanceof nexacro.Point)){_a=new nexacro.Point( +arguments[0], +arguments[1]);var _b=_a.__readArgs;return this._inverseTransform(_a,arguments[_b]);}else{return this._inverseTransform(_a,arguments[1]);}};_pGraphicsMatrix._getDeterminant=function(){var _a=this._scaleX* this._scaleY-this._shearX* this._shearY;return isFinite(_a)&&!nexacro._GraphicsLib.mathIsZero(_a)&&isFinite(this._translateX)&&isFinite(this._translateY)?_a:null;};_pGraphicsMatrix._inverseTransform=function(_a,_b){var _c=this._getDeterminant();if(!_c){return null;}var _d=_a.x-this._translateX,_e=_a.y-this._translateY;if(!_b){_b=new nexacro.Point();}return _b.set((_d* this._scaleY-_e* this._shearX)/_c,(_e* this._scaleX-_d* this._shearY)/_c);};_pGraphicsMatrix.decompose=function(){var _a=this._scaleX,_b=this._shearX,_c=this._shearY,_d=this._scaleY;if(nexacro._GraphicsLib.mathIsZero(_a* _d-_b* _c)){return null;}var _e=Math.sqrt(_a* _a+_b* _b);_a/=_e;_b/=_e;var _f=_a* _c+_b* _d;_c-=_a* _f;_d-=_b* _f;var _g=Math.sqrt(_c* _c+_d* _d);_c/=_g;_d/=_g;_f/=_g;if(_a* _d<_b* _c){_a= -_a;_b= -_b;_f= -_f;_e= -_e;}return {translation:this.getTranslation(),scaling:new nexacro.Point(_e,_g),rotation: -Math.atan2(_b,_a)* 180/Math.PI,shearing:_f};};_pGraphicsMatrix.consolidate=function(){var _a={"a":this._scaleX,"b":this._shearX,"c":this._shearY,"d":this._scaleY,"e":this._translateX,"f":this._translateY};return _a;};_pGraphicsMatrix.getValues=function(){return [this._scaleX,this._shearY,this._shearX,this._scaleY,this._translateX,this._translateY];};_pGraphicsMatrix.getTranslation=function(){return new nexacro.Point(this._translateX,this._translateY);};_pGraphicsMatrix.getScaling=function(){return (this.decompose()||{}).scaling;};_pGraphicsMatrix.getRotation=function(){return (this.decompose()||{}).rotation;};_pGraphicsMatrix.inverted=function(){var _a=this._getDeterminant();return _a&&new nexacro._GraphicsMatrix(this._scaleY/_a, -this._shearY/_a, -this._shearX/_a,this._scaleX/_a,(this._shearX* this._translateY-this._scaleY* this._translateX)/_a,(this._shearY* this._translateX-this._scaleX* this._translateY)/_a);};_pGraphicsMatrix.shiftless=function(){return new nexacro._GraphicsMatrix(this._scaleX,this._shearY,this._shearX,this._scaleY,0,0);};_pGraphicsMatrix.equalsExceptTranslate=function(_a){return _a===this||_a&&this._scaleX==_a._scaleX&&this._shearX==_a._shearX&&this._shearY==_a._shearY&&this._scaleY==_a._scaleY||false;};_pGraphicsMatrix._fixedHalflineAntiAlise=function(_a){var _b={},_c=null,_d=true,_e=true,_f,_g,_h,_i;function isFixedAntiAliesCheck(_j){if(nexacro._Browser=="Runtime"){return true;}return _j=== +_j&&_j===(_j|0);}_b.x=this._translateX;_b.y=this._translateY;if(_a&&_a._strokewidth){if(_a._segments&&_a._strokewidth==1){if(_a._segments.length>0){_c={};_c.x=_a._segments[0].point.x;_c.y=_a._segments[0].point.y;}if(_c){_f=Math.floor(_c.x);_g=Math.floor(_c.y);if(!isFixedAntiAliesCheck(_c.x)){if((_f+0.3)<_c.x&&_c.x<(_f+0.7)){_d=false;}}if(!isFixedAntiAliesCheck(_c.y)){if((_g+0.3)<_c.y&&_c.y<(_g+0.7)){_e=false;}}_h=Math.round(this._translateX);_i=Math.round(this._translateY);if(this._translateX==_h&&_d){_h+=0.5;}else{_h=this._translateX;}if(this._translateY==_i&&_e){_i+=0.5;}else{_i=this._translateY;}_b.x=_h;_b.y=_i;}else{_b.x=this._translateX;_b.y=this._translateY;}}else{if(_a._strokewidth==1){_f=Math.floor(this._translateX);_g=Math.floor(this._translateY);if(!isFixedAntiAliesCheck(this._translateX)){if((_f+0.3)<this._translateX&&this._translateX<(_f+0.7)){_d=false;}}if(!isFixedAntiAliesCheck(this._translateY)){if((_g+0.3)<this._translateY&&this._translateY<(_g+0.7)){_e=false;}}_h=Math.round(this._translateX);_i=Math.round(this._translateY);if(_a._size){_a._size.width=Math.round(_a._size.width);_a._size.height=Math.round(_a._size.height);}if(_d){_h+=0.5;}else{_h=this._translateX;}if(_e){_i+=0.5;}else{_i=this._translateY;}_b.x=_h;_b.y=_i;}else{_b.x=this._translateX;_b.y=this._translateY;}}}return _b;};_pGraphicsMatrix.applyToContext=function(_a,_b){var _c=this._fixedHalflineAntiAlise(_b);_a.transform(this._scaleX,this._shearY,this._shearX,this._scaleY,_c.x,_c.y);};delete _pGraphicsMatrix;}if(!nexacro._GraphicsQuadTree){nexacro._GraphicsQuadTree=function(_a,_b,_c,_d){this._dict=new nexacro._GraphicsHashMap();_c=Math.max(_c,_d);this._root=new nexacro._GraphicsQuadTreeNode(new nexacro.Rect(_a,_b,_c,_c));};var _pGraphicsQuadTree=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsQuadTree);nexacro._GraphicsQuadTree.prototype=_pGraphicsQuadTree;_pGraphicsQuadTree.setDebug=function(_a){this._root._topForm=_a;if(_a){this._root._debug=true;}};_pGraphicsQuadTree.query=function(_a,_b){if(nexacro._isArray(_b)){this._root.query(_a,_b);}else{return this._root.query(_a);}};_pGraphicsQuadTree.getAll=function(){return this._dict.getValues();};_pGraphicsQuadTree.getCount=function(){return this._dict.getSize();};_pGraphicsQuadTree.move=function(_a){if(this.contains(_a)){var _b=0;while(!this._checkRegion(_a)){if(_b==20){var _c=_a._getBoundRect();trace("error checkRegion (move)"+_c.left+","+_c.top+","+_c.width+","+_c.height);return false;}_b++ ;}this._root.move(_a);return true;}else{return false;}};_pGraphicsQuadTree.add=function(_a){var _b=0;while(!this._checkRegion(_a)){if(_b==20){var _c=_a._getBoundRect();trace("error checkRegion (add) "+_c.left+","+_c.top+","+_c.width+","+_c.height);return;}_b++ ;}var _d=this._root,_e=this._dict;if(nexacro._isArray(_a)){var _f=_a.length;for(_b=0;_b<_f;_b++ ){_d.insert(_a[_b]);_e.put(_a[_b],_a[_b]);}}else{_d.insert(_a);_e.put(_a,_a);}};_pGraphicsQuadTree.clear=function(){this._dict.clear();this._root.clear();};_pGraphicsQuadTree.contains=function(_a){return this._dict.containsKey(_a);};_pGraphicsQuadTree.remove=function(_a){if(this.contains(_a)){this._root.remove(_a,true);this._dict.remove(_a);return true;}else{return false;}};_pGraphicsQuadTree._checkRegion=function(_a){var _b=this._root,_c=_b._bounds,_d=_a._getBoundRect();if(!_c||_c.width==0||_c.height==0){}if(!_c.containsRect(_d)){var _e;if(_d.left<_c.left){if(_d.top<_c.top){_e=this._grow(_c.width,_c.height);}else{_e=this._grow(_c.width,0);}}else if((_d.left+_d.width)>(_c.left+_c.width)){if(_d.top<_c.top){_e=this._grow(0,_c.height);}else{_e=this._grow(0,0);}}else if(_d.top<_c.top){_e=this._grow(0,_c.height);}else if(_d.top+_d.height>_c.top+_c.height){_e=this._grow(0,0);}if(_e){this._root=_e;}return false;}return true;};_pGraphicsQuadTree._grow=function(_a,_b){var _c=this._root,_d=_c._bounds;var _e=_d.left-_a,_f=_d.top-_b,_g=nexacro._GraphicsQuadTreeNode,_h=nexacro.Rect,_i=_d.width,_j=_d.height;var _k=new _g(_e,_f,_d.width* 2,_d.height* 2);var _l=_k._childNodes;if(_a){if(_b){_l[3]=_c;_c.Parent=_k;}else{_l[2]=_c;_c.Parent=_k;}}else if(_b){_l[1]=_c;_c.Parent=_k;}else{_l[0]=_c;_c.Parent=_k;}_l[0]=_l[0]||new _g(_k,new _h(_e,_f,_i,_j));_l[1]=_l[1]||new _g(_k,new _h(_e,_f+_j,_i,_j));_l[2]=_l[2]||new _g(_k,new _h(_e+_i,_f,_i,_j));_l[3]=_l[3]||new _g(_k,new _h(_e+_i,_f+_j,_i,_j));return _k;};delete _pGraphicsQuadTree;}if(!nexacro._GraphicsQuadTreeNode){nexacro._GraphicsQuadTreeNode=function(){if(arguments.length==4){this._bounds=new nexacro.Rect(arguments[0],arguments[1],arguments[2],arguments[3]);}else if(arguments.length==2){this.Parent=arguments[0];this._bounds=arguments[1];}else if(arguments.length==1){this._bounds=arguments[0];}this._items=[];this._childNodes=[];};var _pGraphicsQuadTreeNode=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsQuadTreeNode);nexacro._GraphicsQuadTreeNode.prototype=_pGraphicsQuadTreeNode;_pGraphicsQuadTreeNode.maxItemsPerNode=2;_pGraphicsQuadTreeNode.isEmptyLeaf=function(){return this.getCount()==0&&this._childNodes.length==0;};_pGraphicsQuadTreeNode.getCount=function(){var _a=0;_a+=this._items.length;var _b=this._childNodes,_c;for(var _d=0,_e=_b.length;_d<_e;_d++ ){_c=_b[_d];_a+=_c.getCount();}return _a;};_pGraphicsQuadTreeNode.add=function(_a){_a._qOwner=this;var _b=this._items;_b.push(_a);};_pGraphicsQuadTreeNode._remove=function(_a){var _b=this._items;var _c=nexacro._GraphicsLib.arrIndexOf(_b,_a);if(_c>=0){_b[_c]=_b[_b.length-1];nexacro._GraphicsLib.arrRemoveAt(_b,_b.length-1);}};_pGraphicsQuadTreeNode.relocate=function(_a){if(this._bounds.containsRect(_a._getBoundRect())){var _b=this._childNodes;if(_b.length){var _c=this.getDestTree(_a);if(_a._qOwner!=_c){var _d=_a._qOwner;this.remove(_a,false);_c.insert(_a);if(_d){_d.cleanUpwards();}}}}else{if(this.Parent!=null){this.Parent.relocate(_a);}}};_pGraphicsQuadTreeNode.cleanUpwards=function(){var _a=this._childNodes;if(_a.length){if(_a[0].isEmptyLeaf()&&_a[1].isEmptyLeaf()&&_a[2].isEmptyLeaf()&&_a[3].isEmptyLeaf()){this._childNodes=[];if(this.Parent!=null&&this.getCount()==0){this.Parent.cleanUpwards();}}}else{if(this.Parent!=null&&this.getCount()==0){this.Parent.cleanUpwards();}}};_pGraphicsQuadTreeNode.clear=function(){var _a=this._childNodes;if(_a.length){_a[0].clear();_a[1].clear();_a[2].clear();_a[3].clear();}this._childNodes=[];var _b=this._items;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_b[_c]._qOwner=null;}this._items=[];};_pGraphicsQuadTreeNode.remove=function(_a,_b){if(_a._qOwner!=null){if(_a._qOwner==this){this._remove(_a);if(_b){this.cleanUpwards();}}else{_a._qOwner.remove(_a,_b);}}};_pGraphicsQuadTreeNode.getAll=function(_a){_a.push.apply(_a,this._items);var _b=this._childNodes;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_b[_c].getAll(_a);}};_pGraphicsQuadTreeNode.query=function(_a,_b){var _c,_d=[],_e=0;if(_b!=null&&nexacro._isArray(_b)){var _f=this._bounds;if(_a.containsRect(_f)){this.getAll(_b);}else if(_a.intersectRect(_f)){var _g=this._childNodes,_h=this._items;_e=_h.length||0;for(_c=0;_c<_e;_c++ ){if(_a.intersectRect(_h[_c]._getBoundRect())){_b.push(_h[_c]);}}_e=_g.length;for(_c=0;_c<_e;_c++ ){_g[_c].query(_a,_b);}}}else{this.query(_a,_d);return _d;}};_pGraphicsQuadTreeNode.insert=function(_a){var _b=this._bounds,_c=_a._getBoundRect();if(!_b.containsRect(_c)){return;}var _d=this._childNodes,_e=this._items;if(_e.length==0||(_d.length==0&&_e.length+1<=this.maxItemsPerNode)){this.add(_a);}else{if(_d.length==0){this._createSubNodes();}var _f=this.getDestTree(_a);if(_f==this){this.add(_a);}else{_f.insert(_a);}}};_pGraphicsQuadTreeNode._createSubNodes=function(){var _a=this._bounds;if((_a.width* _a.height)<=10){return;}var _b=_a.width/2;var _c=_a.height/2;var _d=_a.left;var _e=_a.top;var _f=this._childNodes,_g=nexacro._GraphicsQuadTreeNode,_h=nexacro.Rect;_f[0]=new _g(this,new _h(_d,_e,_b,_c));_f[1]=new _g(this,new _h(_d,_e+_c,_b,_c));_f[2]=new _g(this,new _h(_d+_b,_e,_b,_c));_f[3]=new _g(this,new _h(_d+_b,_e+_c,_b,_c));var _i=this._items,_j;for(var _k=0;_k<_i.length;_k++ ){_j=this.getDestTree(_i[_k]);if(_j!=this){_j.insert(_i[_k]);this._remove(_i[_k]);_k-- ;}}};_pGraphicsQuadTreeNode.getDestTree=function(_a){var _b=this;var _c=this._childNodes,_d,_e;for(var _f=0,_g=_c.length;_f<_g;_f++ ){_d=_c[_f];_e=_d._bounds;if(_e.containsRect(_a._getBoundRect())){_b=_d;return _b;}}return _b;};_pGraphicsQuadTreeNode.move=function(_a){if(_a._qOwner!=null){_a._qOwner.relocate(_a);}else{this.relocate(_a);}};_pGraphicsQuadTreeNode._getTopForm=function(){if(this._topForm==null){var _a=this;while(_a.Parent){_a=_a.Parent;}this._topForm=_a._topForm;}return this._topForm;};delete _pGraphicsQuadTreeNode;}if(!nexacro._GraphicsRectsManager){nexacro._GraphicsRectsManager=function(){var _a=arguments.length;if(_a>=1){var _b=arguments[0];if(nexacro._isArray(_b)){if(_a==3){this._rects=_b.slice(arguments[1],arguments[1]+arguments[2]-1);}else{this._rects=_b.slice(0);}this._rects.sort(this._compare);}else if(_b instanceof nexacro.Rect){this._rects=[_b];}else if(_b instanceof nexacro._GraphicsRectsManager){this._rects=_b._rects.slice(0);this._rects.sort(this._compare);}}else{this._rects=[];}};var _pGraphicsRectsManager=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsRectsManager);nexacro._GraphicsRectsManager.prototype=_pGraphicsRectsManager;_pGraphicsRectsManager.clear=function(){this._rects=[];this._bounds=null;};_pGraphicsRectsManager._compare=function(_a,_b){return _a.x-_b.x;};_pGraphicsRectsManager._debug=function(){var _a=this._rects,_b=_a.length;console.log("nexacro._GraphicsRectsManager: ","size: ",_b);console.log("bounds: ",this.getBoundRect());for(var _c=0;_c<_b;_c++ ){console.log(_a[_c].toString());}};_pGraphicsRectsManager.getBoundRect=function(){var _a=this._bounds;if(!_a){var _b=this._rects,_c=_b.length,_d;if(_c){_a=_b[0].clone();for(var _e=1;_e<_c;_e++ ){_d=_b[_e];if(_d.left<_a.left){_a.width=_a.left+_a.width-_d.left;_a.left=_d.left;}if(_d.top<_a.top){_a.height=_a.top+_a.height-_d.top;_a.top=_d.top;}if(_d.left+_d.width>_a.left+_a.width){_a.width=_d.left+_d.width-_a.left;}if(_d.top+_d.height>_a.top+_a.height){_a.height=_d.top+_d.height-_a.top;}}this._bounds=_a;}}return _a;};_pGraphicsRectsManager.add=function(_a){this._add(_a,0,this._rects.length-1);};_pGraphicsRectsManager._add=function(_a,_b,_c){var _d=_b,_e=this._rects,_f=_e.length;while(_b<=_c){_d=(_b+_c)>>>1;while((_e[_d]==null)&&(_d<_c)){_d++ ;}if(_e[_d]==null){_c=(_b+_c)>>>1;_d=(_b+_c)>>>1;if(_b>_c){_d=_b;}while((_e[_d]==null)&&(_d>_b)){_d-- ;}if(_e[_d]==null){_e[_d]=_a;return;}}if(_a.left==_e[_d].left){break;}if(_a.left<_e[_d].left){if(_d==0){break;}if((_e[_d-1]!=null)&&(_a.left>=_e[_d-1].left)){break;}_c=_d-1;}else{if(_d==_f-1){_d++ ;break;}if((_e[_d+1]!=null)&&(_a.left<=_e[_d+1].left)){_d++ ;break;}_b=_d+1;}}if(_d<_f){_e.splice(_d,0,_a);}else{_e[_d]=_a;}this._bounds=null;};_pGraphicsRectsManager._addOrSkipWhenInclude=function(_a,_b,_c){var _d=_b,_e=this._rects,_f=_e.length;while(_b<=_c){_d=(_b+_c)>>>1;while((_e[_d]==null)&&(_d<_c)){_d++ ;}if(_e[_d]==null){_c=(_b+_c)>>>1;_d=(_b+_c)>>>1;if(_b>_c){_d=_b;}while((_e[_d]==null)&&(_d>_b)){_d-- ;}if(_e[_d]==null){_e[_d]=_a;return;}}if(_a.left==_e[_d].left){break;}if(_a.left<_e[_d].left){if(_d==0){break;}if((_e[_d-1]!=null)&&(_a.left>=_e[_d-1].left)){break;}_c=_d-1;}else{if(_d==_f-1){_d++ ;break;}if((_e[_d+1]!=null)&&(_a.left<=_e[_d+1].left)){_d++ ;break;}_b=_d+1;}}if(_d<_f){_e.splice(_d,0,_a);}else{_e[_d]=_a;}this._bounds=null;};_pGraphicsRectsManager.contains=function(_a){var _b=0,_c=0,_d=this._rects,_e=_d.length,_f=_e-1,_g=0;while(_b<=_f){_g=(_b+_f)>>>1;if(_a.left==_d[_g].left){break;}if(_a.left<_d[_g].left){if(_g==0){break;}if(_a.left>=_d[_g-1].left){break;}_f=_g-1;}else{if(_g==_e-1){_g++ ;break;}if(_a.left<=_d[_g+1].left){_g++ ;break;}_b=_g+1;}}if(_d[_g].left!=_a.left){return false;}for(_c=_g;_c>=0;_c-- ){if(_d[_g].equals(_a)){return true;}if(_d[_g].left!=_a.left){break;}}for(_c=_g+1;_c<_e;_c++ ){if(_d[_g].equals(_a)){return true;}if(_d[_g].left!=_a.left){break;}}return false;};_pGraphicsRectsManager.containsAll=function(_a){if(!(_a instanceof nexacro._GraphicsRectsManager)){_a=new nexacro._GraphicsRectsManager(_a);}return this._containsAll(_a);};_pGraphicsRectsManager._containsAll=function(_a){var _b,_c=0,_d=this._rects,_e=_d.length,_f=_a._rects,_g=_f.length;for(var _h=0,_i=0;_h<_g;_h++ ){_i=_c;while(_d[_i].left<_f[_h].left){_i++ ;if(_i==_e){return false;}}_c=_i;_b=_d[_i].left;while(!_f[_h].equals(_d[_i])){_i++ ;if(_i==_e){return false;}if(_b!=_d[_i].left){return false;}}}return true;};_pGraphicsRectsManager.remove=function(_a){var _b=0,_c=0,_d=this._rects,_e=_d.length,_f=_e-1,_g=nexacro._GraphicsLib.arrCopy,_h=0;while(_b<=_f){_h=(_b+_f)>>>1;if(_a.left==_d[_h].left){break;}if(_a.left<_d[_h].left){if(_h==0){break;}if(_a.left>=_d[_h-1].left){break;}_f=_h-1;}else{if(_h==_e-1){_h++ ;break;}if(_a.left<=_d[_h+1].left){_h++ ;break;}_b=_h+1;}}if(_d[_h].left!=_a.left){return false;}for(_c=_h;_c>=0;_c-- ){if(_d[_h].equals(_a)){_g(_d,_h+1,_d,_h,_e-_h);_d.length=_e-1;this._bounds=null;return true;}if(_d[_h].left!=_a.left){break;}}for(_c=_h+1;_c<_e;_c++ ){if(_d[_h].equals(_a)){_g(_d,_h+1,_d,_h,_e-_h);_d.length=_e-1;this._bounds=null;return true;}if(_d[_h].left!=_a.left){break;}}return false;};_pGraphicsRectsManager.removeAll=function(_a){if(!(_a instanceof nexacro._GraphicsRectsManager)){_a=new nexacro._GraphicsRectsManager(_a);}return this._removeAll(_a);};_pGraphicsRectsManager._removeAll=function(_a){var _b,_c=0,_d=this._rects,_e=_d.length,_f=_a,_g=0,_h,_i=_f.length;var _j=false;for(_h=0;_h<_i;_h++ ){_g=_c;while((_d[_g]==null)||(_d[_g].left<_f[_h].left)){_g++ ;if(_g==_e){break;}}if(_g==_e){break;}_c=_g;_b=_d[_g].left;while(true){if(_d[_g]==null){_g++ ;if(_g==_e){break;}continue;}if(_f[_h].equals(_d[_g])){_d[_g]=null;_j=true;}_g++ ;if(_g==_e){break;}if(_b!=_d[_g].left){break;}}}if(_j){_h=0;_g=0;while(_g<_e){if(_d[_g]!=null){_d[_h++ ]=_d[_g];}_g++ ;}_d.length=_h;this._bounds=null;}return _j;};_pGraphicsRectsManager.retainAll=function(_a){if(!(_a instanceof nexacro._GraphicsRectsManager)){_a=new nexacro._GraphicsRectsManager(_a);}return this._retainAll(_a);};_pGraphicsRectsManager._retainAll=function(_a){var _b,_c=0,_d=this._rects,_e=_d.length,_f=_a._rects,_g=0,_h,_i=_f.length;var _j=false;for(_h=0;_h<_e;_h++ ){_g=_c;while(_f[_g].left<_d[_h].left){_g++ ;if(_g==_i){break;}}if(_g==_i){_j=true;for(var _k=_h;_k<_e;_k++ ){_d[_k]=null;}_e=_h;_d.length=_h;break;}_c=_g;_b=_f[_g].left;while(true){if(_d[_h].equals(_f[_g])){break;}_g++ ;if((_g==_i)||(_b!=_f[_g].left)){_d[_h]=null;_j=true;break;}}}if(_j){_h=0;_g=0;while(_g<_e){if(_d[_g]!=null){_d[_h++ ]=_d[_g];}_g++ ;}_d.length=_h;this._bounds=null;}return _j;};_pGraphicsRectsManager.append=function(_a){var _b=_a._rects,_c=_b.length;if(_c==0){return;}var _d=this._rects,_e=_d,_f=_d.length,_g=nexacro._GraphicsLib.arrCopy;if(_f==0){this._rects=_b.slice(0);this._bounds=null;return;}if(_d.length<(_f+_c)){_e=new Array(_f+_c);}var _h=_b,_i=_c,_j=_i-1;var _k=_d,_l=_f,_m=_l-1;var _n=_f+_c-1;var _o=_h[_j].left;var _p=_k[_m].left;while(_n>=0){if(_o<=_p){_e[_n]=_k[_m];if(_m==0){_g(_h,0,_e,0,_j+1);break;}_m-- ;_p=_k[_m].left;}else{_e[_n]=_h[_j];if(_j==0){_g(_k,0,_e,0,_m+1);break;}_j-- ;_o=_h[_j].left;}_n-- ;}this._rects=_e;this._bounds=null;};_pGraphicsRectsManager.mergeRects=function(_a,_b){var _c=this._rects,_d,_e=0,_f=_c.length;if(_f==0){return;}var _g,_h;var _i,_j,_k;var _l=new Array(4);for(_d=0;_d<_f;_d++ ){_g=_c[_d];if(_g==null){continue;}_i=(_a+(_g.height* _b)+(_g.height* _g.width));do{var _m=_g.left+_g.width+_a/_g.height;for(_e=_d+1;_e<_f;_e++ ){_h=_c[_e];if((_h==null)||(_h==_g)){continue;}if(_h.left>=_m){_e=_f;break;}_j=(_a+(_h.height* _b)+(_h.height* _h.width));var _n=_g.union(_h);_k=(_a+(_n.height* _b)+(_n.height* _n.width));if(_k<=_i+_j){_g=_c[_d]=_n;_c[_e]=null;_i=_k;_e= -1;break;}if(!_g.intersectRect(_h)){continue;}this.splitRect(_h,_g,_l);var _o=0;var _p=0;for(var _s=0;_s<4;_s++ ){if(_l[_s]!=null){var _q=_l[_s];if(_s<3){_l[_p++ ]=_q;}_o+=(_a+(_q.height* _b)+(_q.height* _q.width));}}if(_o>=_j){continue;}if(_p==0){_c[_e]=null;if(_l[3]!=null){this._add(_l[3],_e,_f-1);_f=_c.length;}continue;}_c[_e]=_l[0];if(_p>1){this.insertRects(_l,1,_e+1,_p-1);_f=_c.length;}if(_l[3]!=null){this._add(_l[3],_e,_f-1);_f=_c.length;}}}while(_e!=_f)}_e=0;_d=0;var _r=0;while(_d<_f){if(_c[_d]!=null){_g=_c[_d];_c[_e++ ]=_g;_r+=_a+(_g.height* _b)+(_g.height* _g.width);}_d++ ;}_c.length=_e;this._bounds=null;_g=this.getBoundRect();if(_g==null){return;}if(_a+(_g.height* _b)+(_g.height* _g.width)<_r){_c[0]=_g;_c.length=1;}};_pGraphicsRectsManager.subtract=function(_a,_b,_c){var _d,_e,_f=0,_g=0,_h;var _i;var _j=0;var _k=new Array(4);var _l=this._rects,_m=_l.length,_n=_a._rects,_o=_n.length;for(_e=0;_e<_m;_e++ ){_d=_l[_e];_i=(_b+(_d.height* _c)+(_d.height* _d.width));for(_f=_j;_f<_o;_f++ ){_h=_n[_f];if(_h.left+_h.width<_d.left){if(_f==_j){_j++ ;}continue;}if(_h.left>_d.left+_d.width){break;}if(!_d.intersectRect(_h)){continue;}this.splitRect(_d,_h,_k);var _p=0;var _q;for(_g=0;_g<4;_g++ ){_q=_k[_g];if(_q!=null){_p+=(_b+(_q.height* _c)+(_q.height* _q.width));}}if(_p>=_i){continue;}var _r=0;for(_g=0;_g<3;_g++ ){if(_k[_g]!=null){_k[_r++ ]=_k[_g];}}if(_r==0){_l[_e].width=0;if(_k[3]!=null){this._add(_k[3],_e,_m-1);_m=_l.length;}break;}_d=_k[0];_l[_e]=_d;_i=(_b+(_d.height* _c)+(_d.height* _d.width));if(_r>1){this.insertRects(_k,1,_e+1,_r-1);_m=_l.length;}if(_k[3]!=null){this._add(_k[3],_e+_r,_m-1);_m=_l.length;}}}_f=0;_e=0;while(_e<_m){if(_l[_e].width==0){_l[_e]=null;}else{_l[_f++ ]=_l[_e];}_e++ ;}_l.length=_f;this._bounds=null;};_pGraphicsRectsManager.splitRect=function(_a,_b,_c){var _d=_a.left;var _e=_d+_a.width-1;var _f=_a.top;var _g=_f+_a.height-1;var _h=_b.left;var _i=_h+_b.width-1;var _j=_b.top;var _k=_j+_b.height-1;if((_f<_j)&&(_g>=_j)){_c[0]=new nexacro.Rect(_d,_f,_a.width,_j-_f);_f=_j;}else{_c[0]=null;}if((_f<=_k)&&(_g>_k)){_c[1]=new nexacro.Rect(_d,_k+1,_a.width,_g-_k);_g=_k;}else{_c[1]=null;}if((_d<_h)&&(_e>=_h)){_c[2]=new nexacro.Rect(_d,_f,_h-_d,_g-_f+1);}else{_c[2]=null;}if((_d<=_i)&&(_e>_i)){_c[3]=new nexacro.Rect(_i+1,_f,_e-_i,_g-_f+1);}else{_c[3]=null;}};_pGraphicsRectsManager.insertRects=function(_a,_b,_c,_d){if(_d==0){return;}var _e=this._rects,_f=_e.length;_e.length=(_f+_d);for(var _g=_f-1;_g>=_c;_g-- ){_e[_g+_d]=_e[_g];}nexacro._GraphicsLib.arrCopy(_a,_b,_e,_c,_d);};_pGraphicsRectsManager.Each=function(_a,_b){var _c=this._rects,_d=_c.length;_b=_b||this;for(var _e=0;_e<_d;_e++ ){_a.call(_b,_c[_e]);}};delete _pGraphicsRectsManager;}if(!nexacro._GraphicsSize){nexacro._GraphicsSize=function(_a,_b){var _c=typeof _a;var _d=typeof _b;if(_c=='string'){_a= +_a;}if(_d=='string'){_b= +_b;}if(_c=='number'){var _e=typeof _b==='number';this.width=_a;this.height=_e?_b:_a;this.__readArgs=_e?2:1;}else if(_c=='undefined'||_a===null){this.width=this.height=0;this.__readArgs=_a===null?1:0;}else{if(nexacro._isArray(_a)){this.width=_a[0];this.height=_a.length>1?_a[1]:_a[0];this.__readArgs=1;}else if(_a.width!=null){this.width=_a.width;this.height=_a.height;this.__readArgs=1;}else if(_a.x!=null){this.width=_a.x;this.height=_a.y;this.__readArgs=1;}else{this.width=this.height=0;this.__readArgs=0;}}};var _pGraphicsSize=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsSize);nexacro._GraphicsSize.prototype=_pGraphicsSize;nexacro._GraphicsSize.min=function(){var _a=new this(arguments[0],arguments[1]);var _b=_a.__readArgs;var _c=new this(arguments[_b],arguments[_b+1]);return new this(Math.min(_a.width,_c.width),Math.min(_a.height,_c.height));};nexacro._GraphicsSize.max=function(){var _a=new this(arguments[0],arguments[1]);var _b=_a.__readArgs;var _c=new this(arguments[_b],arguments[_b+1]);return new this(Math.max(_a.width,_c.width),Math.max(_a.height,_c.height));};nexacro._GraphicsSize.random=function(){return new this(nexacro._random(),nexacro._random());};_pGraphicsSize.width=0;_pGraphicsSize.height=0;_pGraphicsSize.set_width=function(_a){if(isNumber(_a)&&this.width!=_a){this.width=_a;}};_pGraphicsSize.set_height=function(_a){if(isNumber(_a)&&this.height!=_a){this.height=_a;}};_pGraphicsSize.set=function(_a,_b){this.set_width(_a);this.set_height(_b);return this;};_pGraphicsSize.equals=function(_a){return _a===this||_a&&(this.width===_a.width&&this.height===_a.height||nexacro._isArray(_a)&&this.width===_a[0]&&this.height===_a[1])||false;};_pGraphicsSize.clone=function(){return new nexacro._GraphicsSize(this.width,this.height);};_pGraphicsSize.toString=function(){return '{ width: '+nexacro._GraphicsLib.toStrFormatNumber(this.width)+', height: '+nexacro._GraphicsLib.toStrFormatNumber(this.height)+' }';};_pGraphicsSize.add=function(_a){if(!(_a instanceof nexacro._GraphicsSize)){_a=new nexacro._GraphicsSize(arguments[0],arguments[1]);}return new nexacro._GraphicsSize(this.width+_a.width,this.height+_a.height);};_pGraphicsSize.subtract=function(_a){if(!(_a instanceof nexacro.Size)){_a=new nexacro._GraphicsSize(arguments[0],arguments[1]);}return new nexacro._GraphicsSize(this.width-_a.width,this.height-_a.height);};_pGraphicsSize.multiply=function(_a){if(!(_a instanceof nexacro._GraphicsSize)){_a=new nexacro._GraphicsSize(arguments[0],arguments[1]);}return new nexacro._GraphicsSize(this.width* _a.width,this.height* _a.height);};_pGraphicsSize.divide=function(_a){if(!(_a instanceof nexacro._GraphicsSize)){_a=new nexacro._GraphicsSize(arguments[0],arguments[1]);}return new nexacro._GraphicsSize(this.width/_a.width,this.height/_a.height);};_pGraphicsSize.modulo=function(_a){if(!(_a instanceof nexacro._GraphicsSize)){_a=new nexacro._GraphicsSize(arguments[0],arguments[1]);}return new nexacro._GraphicsSize(this.width%_a.width,this.height%_a.height);};_pGraphicsSize.negate=function(){return new nexacro._GraphicsSize( -this.width, -this.height);};_pGraphicsSize.isZero=function(){return nexacro._GraphicsLib.mathIsZero(this.width)&&nexacro._GraphicsLib.mathIsZero(this.height);};_pGraphicsSize.isNaN=function(){return isNaN(this.width)||isNaN(this.height);};_pGraphicsSize.round=function(){return new nexacro._GraphicsSize(Math.round(this.width),Math.round(this.height));};_pGraphicsSize.ceil=function(){return new nexacro._GraphicsSize(Math.ceil(this.width),Math.ceil(this.height));};_pGraphicsSize.floor=function(){return new nexacro._GraphicsSize(Math.floor(this.width),Math.floor(this.height));};_pGraphicsSize.abs=function(){return new nexacro._GraphicsSize(Math.abs(this.width),Math.abs(this.height));};delete _pGraphicsSize;}if(!nexacro._GraphicsObject){nexacro._GraphicsObject=function(_a,_b){nexacro._GraphicsHashMap.getHashKey("ge",this);this._matrix=new nexacro._GraphicsMatrix();this._drawflags=0;this._painted=0;this._style={};var _c=0,_d=arguments,_e=_d.length;var _f;if(_e>0){if(_a instanceof nexacro.Point){_c++ ;this._x= +_a.x;this._y= +_a.y;this._matrix.translate(new nexacro.Point(this._x,this._y));this._drawflags|=1;}else if(_e>=2){this._x= +_a;this._y= +_b;_f=new nexacro.Point(this._x,this._y);this._matrix.translate(_f);this._drawflags|=1;_c+=2;}}else{this._x=0;this._y=0;}this.x=this._x;this.y=this._y;this.__readArgs=_c;this._childidx_map=new nexacro.Collection();this.childlength=0;};var _pGraphicsObject=nexacro._GraphicsObject.prototype=nexacro._createPrototype(nexacro.Object,nexacro._GraphicsObject);_pGraphicsObject._type_name="_GraphicsObject";_pGraphicsObject.id="";_pGraphicsObject.strokepen="";_pGraphicsObject.fillstyle="";_pGraphicsObject.visible=true;_pGraphicsObject.opacity=1;_pGraphicsObject.strokejoin="miter";_pGraphicsObject.strokecap="";_pGraphicsObject.miterlimit=10;_pGraphicsObject._id="";_pGraphicsObject._center="";_pGraphicsObject._clipitems="";_pGraphicsObject._nextsibling=null;_pGraphicsObject._previoussibling=null;_pGraphicsObject._firstchild=null;_pGraphicsObject._isfirstchild="";_pGraphicsObject._nonscalingstroke="";_pGraphicsObject._x=0;_pGraphicsObject._y=0;_pGraphicsObject.x=0;_pGraphicsObject.y=0;_pGraphicsObject._cx=0;_pGraphicsObject._cy=0;_pGraphicsObject._opacity=null;_pGraphicsObject._miterlimit=null;_pGraphicsObject._strokecap=null;_pGraphicsObject._strokejoin=null;_pGraphicsObject.set_x=function(_a){var _b=0;if(_a!==undefined){if(isNaN(_a)){return;}}if(_a!==""&&_a!=null){_b=parseInt(_a);}if(_b!=this._x){this.translate(_b-this._x,0);this.x=_a;this._x=_b;var _c=this.on_getCenter();this._cx=_c.x;}};_pGraphicsObject.set_y=function(_a){var _b=0;if(_a!==undefined){if(isNaN(_a)){return;}}if(_a!==""&&_a!=null){_b=parseInt(_a);}if(_b!=this._y){this.translate(0,_b-this._y);this.y=_a;this._y=_b;var _c=this.on_getCenter();this._cy=_c.y;}};_pGraphicsObject.set_strokepen=function(_a){var _b=this._style,_c=this.strokepen,_d,_e;if(_c!=_a){this.strokepen=_a;_d=_b.strokepen;if(_a){if(_d==null||_d.value!=_a){_e=nexacro.BorderLineObject(_a);_b.strokepen=_e;}}else{if(_d){_b.strokepen=null;}}this._drawflags|=8;if(_e){var _f=_e._width||0;if(this._strokewidth!=_f){this._drawflags|=4;this._strokewidth=_f;if(_f==1&&_e.style=="dotted"){this._isOddStrokeWidth=true;}else{this._isOddStrokeWidth=false;}this._bounds=null;this._globalBounds=null;}}else{if(this._strokewidth!=0){this._strokewidth=0;this._isOddStrokeWidth=false;}}this._changedStrokepen=true;}};_pGraphicsObject.set_fillstyle=function(_a){var _b=this._style,_c=this.fillstyle,_d,_e;if(_c!=_a){this._isGradation=false;this.fillstyle=_a;_d=_b.fillstyle;if(_a){if(_d==null||_d.value!=_a){if(_a instanceof nexacro._CanvasFillPattern){_b.fillstyle=_a;}else{_e=nexacro.BackgroundObject(_a,this);_b.fillstyle=_e;}}}else{if(_d){_b.fillstyle=null;}}this._drawflags|=8;this._changedFillstyle=true;if(_e&&_e.gradient){_e.gradient._parseInfo(_e.value);this._isGradation=true;}}};_pGraphicsObject.set_strokejoin=function(_a){var _b=this._style,_c=this.strokejoin;var _d=["miter","bevel","round"];if(_d.indexOf(_a)== -1){return;}if(_c!=_a){this.strokejoin=_a;this._strokejoin=_a;_b.strokejoin=_a;this._drawflags|=4;this._drawflags|=8;this._bounds=null;this._globalBounds=null;this._changedStrokejoin=true;}};_pGraphicsObject.set_strokecap=function(_a){var _b=this._style,_c=this.strokecap;var _d=["butt","round","square"];if(_d.indexOf(_a)== -1){return;}if(_c!=_a){this.strokecap=_a;this._strokecap=_a;_b.strokecap=_a;this._drawflags|=4;this._drawflags|=8;this._bounds=null;this._globalBounds=null;this._changedStrokecap=true;}};_pGraphicsObject.set_miterlimit=function(_a){var _b=this._style,_c=this.miterlimit;if(_a!==undefined){if(isNaN(_a)||_a<0){return;}}if(_a!=_c){this.miterlimit=_a;this._miterlimit=_a;_b.miterlimit=_a;this._drawflags|=4;this._drawflags|=8;this._bounds=null;this._globalBounds=null;this._changedMiterlimit=true;}};_pGraphicsObject.set_visible=function(_a){if(_a==null){_a=true;}_a=nexacro._toBoolean(_a);if(_a!==this.visible){this.visible=_a;var _b=this._parent;if(_b){_b._drawflags|=4;}}};_pGraphicsObject.set_opacity=function(_a){var _b=this._style;this.opacity=_a;if(0===_a||_a){if(this._opacity==null||this._opacity.value!=_a){var _c=nexacro.OpacityObject(_a);this._opacity=_c;_b.opacity=_c;}}else{if(this._opacity){this._opacity=null;_b.opacity=null;}}};_pGraphicsObject.setClipRect=function(_a,_b,_c,_d){var _e=arguments.length;if(_e==1&&arguments[0]==null){this._clipitems=[];return;}var _f=new nexacro.Rect(_a,_b,_c,_d);this._clipitems=[];this._clipitems.push(_f);};_pGraphicsObject.getNextSibling=function(){return this._nextsibling;};_pGraphicsObject.getPreviousSibling=function(){return this._isfirstchild?null:this._previoussibling;};_pGraphicsObject.getObjects=nexacro._emptyFn;_pGraphicsObject.getFirstChild=nexacro._emptyFn;_pGraphicsObject.getLastChild=nexacro._emptyFn;_pGraphicsObject.insertChild=nexacro._emptyFn;_pGraphicsObject.addChild=nexacro._emptyFn;_pGraphicsObject.removeChild=nexacro._emptyFn;_pGraphicsObject.indexOf=nexacro._emptyFn;_pGraphicsObject.clear=nexacro._emptyFn;_pGraphicsObject.getObjectByID=nexacro._emptyFn;_pGraphicsObject._getBoundRect=function(_a,_b){var _c=this._bounds;if(_b){_c=null;}if(_c){return _c;}var _d=this.on_getRect(true,_b);if(_d){_c=this._matrix._transformBounds(_d,null,this.id);if(!_b){this._bounds=_c;}}if(_c){if(_a){return _c.clone();}else{return _c;}}};_pGraphicsObject.translate=function(_a,_b){if(arguments.length!=2){return;}var _c=new nexacro.Point( +_a, +_b);var _d=new nexacro._GraphicsMatrix();_d.translate(_c);return this._transform(_d);};_pGraphicsObject.setTransform=function(_a){if(nexacro._isString(_a)){this._toTransform(_a);}else{if(_a==null){_a=new nexacro._GraphicsMatrix();var _b=new nexacro.Point(this._x,this._y);_a.translate(_b.x,_b.y);this._matrix.reset();this._matrix.constructor(_a);this._drawflags|=1;}}};_pGraphicsObject._toTransform=function(_a){var _b={};var _c,_d;if(_a){for(var _j in _a=_a.match(/(\w+\((\-?\d+\.?\d*,?|(\s+?))+\))+/g)){if(_a[_j].match){var _e=_a[_j].match(/[\w\.\-]+/g);_b[_e.shift()]=_e;}}}var _f=new nexacro._GraphicsMatrix(),_g,_h,_i;for(var _k in _b){_g=_b[_k];switch(_k){case "translate":if(_g.length==1){_c=new nexacro.Point(parseFloat(_g[0]),0);_f.translate(_c);}else{_c=new nexacro.Point(parseFloat(_g[0]),parseFloat(_g[1]));_f.translate(_c);}break;case "rotate":if(_g.length==1){_f.rotate(parseFloat(_g[0]));}else{_c=new nexacro.Point(parseFloat(_g[1]),parseFloat(_g[2]));_f.rotate(parseFloat(_g[0]),_c);}break;case "scale":if(_g.length==2){_c=new nexacro.Point(parseFloat(_g[0]),parseFloat(_g[1]));_f.scale(_c);}else{_c=new nexacro.Point(parseFloat(_g[0]),parseFloat(_g[1]));_d=new nexacro.Point(parseFloat(_g[2]),parseFloat(_g[3]));_f.scale(_c,_d);}break;case "shear":if(_g.length==2){_c=new nexacro.Point(parseFloat(_g[0]),parseFloat(_g[1]));_f.shear(_c);}else{_c=new nexacro.Point(parseFloat(_g[0]),parseFloat(_g[1]));_d=new nexacro.Point(parseFloat(_g[2]),parseFloat(_g[3]));_f.shear(_c,_d);}break;case "matrix":_f.set(parseFloat(_g[0]),parseFloat(_g[2]),parseFloat(_g[1]),parseFloat(_g[3]),parseFloat(_g[4]),parseFloat(_g[5]));break;case "skew":if(_g.length==1){_h=_i=Math.tan(parseFloat(_g[0])* nexacro._GraphicsMatrix.DEGTORAD);}else{_h=Math.tan(parseFloat(_g[0])* nexacro._GraphicsMatrix.DEGTORAD);_i=Math.tan(parseFloat(_g[1])* nexacro._GraphicsMatrix.DEGTORAD);}break;}}if(_h!=0||_i!=0){_f.shear(_h||0,_i||0);}if(this._type){_f.translate(this._x+(this._dx||0),this._y+(this._dy||0));this._matrix.constructor(_f);this._drawflags|=1;}return _f;};_pGraphicsObject.toString=function(){return "[object "+this._type_name+"]";};_pGraphicsObject._toHashString=function(){return this._type_name+"#"+(this.id?this.id+"("+this._hashKey+")":this._hashKey);};_pGraphicsObject.getBoundRect=function(){var _a=null;var _b=this.on_getRect(true,true);if(_b){var _c=[this],_d=this._parent,_e=nexacro._GraphicsLayer,_f;while(_d){_c.unshift(_d);if(_d instanceof _e){break;}if(_d instanceof _e){_d=_d.parent;}else{_d=_d._parent;}}for(var _g=0,_h=_c.length;_g<_h;_g++ ){if(_g==0){if(_c[_g] instanceof _e){_f=(_c[_g]._matrix?(_c[_g].parent._matrix.clone()).concatenate(_c[_g]._matrix):_c[_g].parent._matrix.clone());}else{_f=_c[_g]._matrix.clone();}}else{_f=(_f.clone()).concatenate(_c[_g]._matrix);}}if(_f){_a=_f._transformBounds(_b,null,this.id);}}if(_a){return _a.clone();}};_pGraphicsObject.getOffsetBoundRect=function(){var _a=null;var _b=this.on_getRect(true,true);if(_b){_a=this._matrix._transformBounds(_b,null,this.id);}if(_a){return _a.clone();}};_pGraphicsObject.getRect=function(){var _a=null;var _b=this.on_getRect(false,true);if(_b){var _c=[this],_d=this._parent,_e=nexacro._GraphicsLayer,_f;while(_d){_c.unshift(_d);if(_d instanceof _e){break;}if(_d instanceof _e){_d=_d.parent;}else{_d=_d._parent;}}for(var _g=0,_h=_c.length;_g<_h;_g++ ){if(_g==0){if(_c[_g] instanceof _e){_f=(_c[_g]._matrix?(_c[_g].parent._matrix.clone()).concatenate(_c[_g]._matrix):_c[_g].parent._matrix.clone());}else{_f=_c[_g]._matrix.clone();}}else{_f=(_f.clone()).concatenate(_c[_g]._matrix);}}if(_f){_a=_f._transformBounds(_b,null,this.id);}}if(_a){return _a.clone();}};_pGraphicsObject.getOffsetRect=function(){var _a=null;var _b=this.on_getRect(false,true);if(_b){_a=this._matrix._transformBounds(_b,null,this.id);}if(_a){return _a.clone();}};_pGraphicsObject.getRegion=function(){var _a=this.getBoundRect();var _b=this.getRect();if(_b&&_a){var _c=_b.left-_a.left;var _d=_b.top-_a.top;var _e=_a.right-_b.right;var _f=_a.bottom-_b.bottom;return new nexacro.Rect(_b.left+_c,_b.top+_d,_b.width-(_c+_e),_b.height-(_d+_f));}else{return new nexacro.Rect();}};_pGraphicsObject.getOffsetRegion=function(){var _a=this.getOffsetBoundRect();var _b=this.getOffsetRect();if(_b&&_a){var _c=_b.left-_a.left;var _d=_b.top-_a.top;var _e=_a.right-_b.right;var _f=_a.bottom-_b.bottom;return new nexacro.Rect(_b.left+_c,_b.top+_d,_b.width-(_c+_e),_b.height-(_d+_f));}else{return new nexacro.Rect();}};_pGraphicsObject._getGlobalBoundRect=function(_a,_b){var _c=this._globalBounds;if(_b){_c=null;}if(_c){if(_a){return _c.clone();}else{return _c;}}var _d=this.on_getRect(true,_b);if(_d){if(_b){var _e=[this],_f=this._parent,_g=nexacro._GraphicsLayer,_h;while(_f){_e.unshift(_f);if(_f instanceof _g){break;}_f=_f._parent;}for(var _i=0,_j=_e.length;_i<_j;_i++ ){if(_i==0){if(_e[_i] instanceof _g){_h=(_e[_i]._matrix?(_e[_i].parent._matrix.clone()).concatenate(_e[_i]._matrix):_e[_i].parent._matrix.clone());}else{_h=_e[_i]._matrix.clone();}}else{_h=(_h.clone()).concatenate(_e[_i]._matrix);}}if(_h){_c=_h._transformBounds(_d,null,this.id);}}else{_c=(this._globalMatrix||this._matrix)._transformBounds(_d,null,this.id);this._globalBounds=_c;}}if(_c){if(_a){return _c.clone();}else{return _c;}}};_pGraphicsObject.scale=function(_a,_b,_c,_d){var _e=null;if(arguments.length==2||arguments.length==4){var _f=new nexacro._GraphicsMatrix();if(arguments.length==4){_e=new nexacro.Point( +_c, +_d);this._transform(_f.scale( +_a, +_b,_e));}else{this._transform(_f.scale( +_a, +_b));}}};_pGraphicsObject.rotate=function(_a,_b,_c){var _d=new nexacro._GraphicsMatrix();if(arguments.length==3){var _e=new nexacro.Point( +arguments[1], +arguments[2]);this._transform(_d.rotate( +_a,_e));}else{this._transform(_d.rotate( +_a));}};_pGraphicsObject.shear=function(_a,_b,_c,_d){var _e=null;if(arguments.length==2||arguments.length==4){var _f=new nexacro._GraphicsMatrix();if(arguments.length==4){_e=new nexacro.Point( +_c, +_d);this._transform(_f.shear( +_a, +_b,_e));}else{this._transform(_f.shear( +_a, +_b));}}};_pGraphicsObject.transform=function(_a,_b,_c,_d,_e,_f){var _g=this._bounds,_h=this._center;if(arguments.length==1&&_a==null){this._matrix.reset();this._matrix.set_translateX(this.x);this._matrix.set_translateY(this.y);this.setTransform("translate("+0+","+0+")");}if(arguments.length!=6){return;}var _i=new nexacro._GraphicsMatrix(_a,_b,_c,_d,_e,_f);this._matrix.preConcatenate(_i);this._drawflags|=1;if(_g&&_i.getRotation()%90===0){_i._transformBounds(_g,_g,this.id);var _j=_g.getCenterPoint();this._center=new nexacro.Point(_j.x,_j.y);}else if(_h){this._center=_i._transformPoint(_h,_h);}};_pGraphicsObject._transform=function(_a){var _b=this._bounds,_c=this._center;this._matrix.preConcatenate(_a);this._drawflags|=1;if(_b&&_a.getRotation()%90===0){_a._transformBounds(_b,_b,this.id);var _d=_b.getCenterPoint();this._center=new nexacro.Point(_d.x,_d.y);}else if(_c){this._center=_a._transformPoint(_c,_c);}};_pGraphicsObject.isHitTest=function(_a,_b){var _c=new nexacro.Point( +arguments[0], +arguments[1]);_c=this._globalMatrix._inverseTransform(_c);var _d=this.on_getRect();if(_d){return _d.containsPoint(_c);}return false;};_pGraphicsObject.on_removeParent=function(){var _a=this._parent;if(_a){var _b=_a.removeChild(this.id);if(_b!=this){return false;}delete _a._idCache;delete _a._children;delete _a._totalItems;}};_pGraphicsObject.destroy=function(){this.on_removeParent();this.id=null;this.strokepen=null;this.fillstyle=null;this.x=null;this.y=null;this._x=null;this._y=null;this._cx=null;this._cy=null;this.visible=null;this.opacity=null;this.strokejoin=null;this.cursor=null;this.strokecap=null;this.miterlimit=null;this._id=null;this._center=null;this._clipitems=null;this._nextsibling=null;this._previoussibling=null;this._firstchild=null;this._isfirstchild=null;this._nonscalingstroke=null;this._matrix=null;this._drawflags=null;this._painted=null;this._type=null;this.__readArgs=null;this._childidx_map.clear();this._childidx_map=null;nexacro.Object.prototype.destroy.call(this);return true;};_pGraphicsObject._getItemById=function(_a){var _b;if(this._firstchild){var _c=this._idCache;if(!_c||_c._childchanged!=this._childchanged){_c={};this._idCache=_c;_c._childchanged=this._childchanged;_b=this._firstchild;for(;_b;_b=_b._nextsibling){if(_b._id){_c[_b._id]=_b;}}}var _d=_c[_a];if(!_d){_b=this._firstchild;for(;_b;_b=_b._nextsibling){if(_b._firstchild){_d=_b._getItemById(_a);if(_d){break;}}}return _d;}return _d;}};_pGraphicsObject.on_insertBefore=function(_a,_b,_c){var _d= -1;var _e= -1;var _f=false;if(_b&&_b.length<=0){return  -1;}if(!_a){throw nexacro.MakeReferenceError(this,"reference_not_define",_b);}if(this._childidx_map[_b]){throw nexacro.MakeNativeError(this,"native_exist_id",_b);}if(_c&&_c._parent!=this){trace("native_notexist_parent");return  -1;}if(!_a.id){_a.id=_a._id=_a.name=_b;}else{_a.id=_a._id=_b;}if(_c!=null){_f=true;}if(_f){_e=this._childidx_map.indexOf(_c.id);}if(_a==_c){_c=_c.getNextSibling();_e=this._childidx_map.indexOf(_c.id);this.removeChild(_a.id);_d=this.insertChild(_e,_b,_a);return _d;}var _g=_a._parent;if(_g&&_g!=this){_g.removeChild(_a.id);}_a.parent=this;_a._parent=this;if(_f){_d=this._childidx_map.insert_item(_e,_b,_a);}else{_d=this._childidx_map.add_item(_b,_a);}this.childlength++ ;if(!this._firstchild){this._firstchild=_a;_a._isfirstchild=true;_a._previoussibling=_a;}else{if(!_c){var _h=this._firstchild._previoussibling;_h._nextsibling=_a;_a._previoussibling=_h;this._firstchild._previoussibling=_a;}else{var _i=this._firstchild;if(_c==_i){_i._isfirstchild=false;_a._nextsibling=_i;_a._previoussibling=_i._previoussibling;_i._previoussibling=_a;this._firstchild=_a;_a._isfirstchild=true;}else{var _j=_c._previoussibling;_a._nextsibling=_c;_j._nextsibling=_a;_c._previoussibling=_a;_a._previoussibling=_j;}}}this._childchanged++ ;_a._drawflags|=8;_a._painted=0;_a.setTransform(null);this._drawflags|=4;var _k=this.on_getOwnerLayer();if(_k){_k.on_TreeChanged();}var _l=this._childListCache;if(_l){if(_l.flength!= -1){_l.flength++ ;}if(_l.fchildindex!= -1){if(_c&&_l.fchild==_c){_l.fchild=_a;}else{_l.fchildindex= -1;}}}return _d;};_pGraphicsObject.on_removeChild=function(_a){var _b=this._childListCache;if(_b){if(_b.flength!= -1){_b.flength-- ;}if(_b.fchildindex!= -1){if(_b.fchild==_a){_b.fchildindex-- ;_b.fchild=_a.getPreviousSibling();}else{_b.fchildindex= -1;}}}if(_a==this._firstchild){_a._isfirstchild=false;this._firstchild=_a._nextsibling;var _c=this._firstchild;if(_c){_c._isfirstchild=true;_c._previoussibling=_a._previoussibling;}}else{var _d=_a._previoussibling;var _e=_a._nextsibling;_d._nextsibling=_e;if(!_e){this._firstchild._previoussibling=_d;}else{_e._previoussibling=_d;}}this._childidx_map.delete_item(_a.id);this.childlength-- ;_a._remove(true);_a.parent=null;_a._parent=null;_a._nextsibling=null;_a._previoussibling=null;this._childchanged++ ;this._drawflags|=4;var _f=this.on_getOwnerLayer();if(_f){_f.on_TreeChanged();}return _a;};_pGraphicsObject._getStrokeWidth=function(){return this._strokewidth||0;};_pGraphicsObject.on_getRect=function(_a,_b){var _c=this._firstchild;if(!_c){return new nexacro.Rect();}var _d=this._rect;if(_b){_d=null;}if(!_d){var _e=Infinity,_f= -_e,_g=_e,_h=_f;for(;_c!=null;_c=_c._nextsibling){if(_c.visible&&!_c.on_IsNotDraw()){_d=_c._getBoundRect(false,_b);_e=Math.min(_d.left,_e);_g=Math.min(_d.top,_g);_f=Math.max(_d.left+_d.width,_f);_h=Math.max(_d.top+_d.height,_h);}}_d=isFinite(_e)?new nexacro.Rect(_e,_g,_f-_e,_h-_g):new nexacro.Rect();if(!_b){this._rect=_d;}}if(_a){_d=_d.expand(this._getStrokeWidth()/2);}return _d;};_pGraphicsObject._getTransform=function(){var _a=this._matrix.clone(),_b=new nexacro._GraphicsMatrix();_b.translate( -this._x-(this._dx||0), -this._y-(this._dy||0));_a.preConcatenate(_b);if(_a.isIdentity()){return "";}var _c=nexacro._GraphicsLib.toStrFormatNumber;var _d=_a.decompose();if(_d&&!_d.shearing){var _e=[],_f=_d.rotation,_g=_d.translation,_h=_d.scaling;if(!_g.isZero()){_e.push('translate('+_c(_g.x)+","+_c(_g.y)+')');}if(!nexacro._GraphicsLib.mathIsZero(_h.x-1)||!nexacro._GraphicsLib.mathIsZero(_h.y-1)){_e.push('scale('+_c(_h.x)+","+_c(_h.y)+')');}if(_f){_e.push('rotate('+_c(_f)+')');}return _e.join(' ');}else{return 'matrix('+_a.getValues().join(',')+')';}};_pGraphicsObject._setOldGlobalBounds=function(){if((this._painted&(1|2|4))&&!this._oldGlobalBounds){this._oldGlobalBounds=this._getGlobalBoundRect(true);}};_pGraphicsObject.on_getOwnerLayer=function(){var _a=this._ownerLayer;if(!_a){var _b=this._parent,_c=nexacro._GraphicsLayer;while(_b){if(_b instanceof _c){_a=_b;break;}if(_b instanceof _c){_b=_b.parent;}else{_b=_b._parent;}}this._ownerLayer=_a;}return _a;};_pGraphicsObject.on_updateStyles=function(_a,_b){var _c=this._renderstyle;if(!_c){_c={};this._renderstyle=_c;}var _d=this._style;if(this._changedStrokepen){this._updateStrokePen(_d.strokepen,_c);this._changedStrokepen=false;}if(this._changedFillstyle||(_b&&this._isGradation)){this._updateFill(_d.fillstyle,_c,_a);this._changedFillstyle=false;}_a.setElementGlobalAlpha(this._globalAlpha);if(this._changedStrokejoin){this._updateStrokeJoin(_d.strokejoin,_c);this._changedStrokejoin=false;}if(this._changedStrokecap){this._updateStrokeCap(_d.strokecap,_c);this._changedStrokecap=false;}if(this._changedMiterlimit){_c._miterlimit=parseInt(this.miterlimit);this._changedMiterlimit=false;}};_pGraphicsObject._updateStrokePen=function(_a,_b){var _c,_d;if(nexacro._Browser=="Runtime"){if(_a){_c=_a._syscanvasval;if(!_c){_d=_a.style;_c={};if(_d=="none"){_c._width=null;_c._strokecolor=null;}else{_c._width=_a._width;_c._strokecolor=_a.color;_c._linetype=_d;}_a._syscanvasval=_c;}_b._linetype=_c._linetype;_b._width=_c._width;_b._strokecolor=_c._strokecolor;}else{_b._width=null;_b._strokecolor=null;_b._linetype="none";}}var _e=(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8);if(!_e){if(_a){_c=_a._syscanvasval;if(!_c){_d=_a.style;_c={};if(_d=="none"){_c._width=null;_c._strokecolor=null;}else{_c._width=_a._width;_c._strokecolor=_a.color;_c._linetype=_d;}_a._syscanvasval=_c;}_b._linetype=_c._linetype;_b._width=_c._width;_b._strokecolor=_c._strokecolor;}else{_b._width=null;_b._strokecolor=null;_b._linetype="none";}}};_pGraphicsObject._updateFill=function(_a,_b,_c){if(_a){var _d=_a._syscanvasval;if(!_d||this._isGradation){if(this._isGradation){var _e;_e=_a.gradient;if(_e){var _f=_e.style,_g=_e.point,_h,_i,_j;var _k=this.on_getRect();if(_f=="linear"){_h=new nexacro.Point(_k.width* _g.startX/100,_k.height* _g.startY/100);_i=new nexacro.Point(_k.width* _g.endX/100,_k.height* _g.endY/100);_h.x+=_k.left;_h.y+=_k.top;_i.x+=_k.left;_i.y+=_k.top;_j=_c.createLinearGradient(_h.x,_h.y,_i.x,_i.y);nexacro._GraphicsLib.arrForEach(_e.color_stops,function(_l,_m){_j.addColorStop(_l.percents,_l.color);});_d=_j;}else if(_f=="radial"){}else{_d=_a.color;}}}else if(_a instanceof nexacro._CanvasFillPattern){_d=_a;}else{_d=_a.color;}_a._syscanvasval=_d;}_b._fillcolor=_d;}else{_b._fillcolor=null;}};_pGraphicsObject._updateStrokeJoin=function(_a,_b){if(_a){var _c=_a;_b._strokejoin=_c;}else{_b._strokejoin=null;}};_pGraphicsObject._updateStrokeCap=function(_a,_b){if(_a){var _c=_a;if(_c=="flat"){_b._strokecap="butt";}else{_b._strokecap=_c;}}else{_b._strokecap=null;}};_pGraphicsObject._getItemsByFilter=function(_a,_b){if(this._firstchild){var _c=this._filterCache;if(!_c){_c={};this._filterCache=_c;}var _d=_a+"_"+_b,_e=_c[_d],_f,_g,_h,_i=[],_j=[],_k;if(!_e){_e={pElement:this,propertyNm:_a,value:_b,elements:null};_c[_d]=_e;}if(_e._childchanged!=this._childchanged){_j=[];_k=0;_f=this._firstchild;if(_b=="*"){for(;_f;_f=_f._nextsibling){_j[_k]=_f;_k++ ;}}else{for(;_f;_f=_f._nextsibling){if(_f[_a]==_b){_j[_k]=_f;_k++ ;}}}_e.elements=_j;_e._childchanged=this._childchanged;}_f=this._firstchild;_g=_e.elements;_h=_g.slice(0);_k=0;for(;_f;_f=_f._nextsibling){if(_f._firstchild){_k++ ;_i=_f._getItemsByFilter(_a,_b);_i.unshift(_k,0);_h.splice.apply(_h,_i);_k+=_i.length-2;}else{_k++ ;}}return _h;}else{return null;}};_pGraphicsObject._setGlobalTransforms=function(_a){this._globalMatrix=(_a?(_a.clone()).concatenate(this._matrix):this._matrix.clone());};_pGraphicsObject.on_draw=function(_a){var _b=this._renderstyle,_c,_d=this._globalMatrix;if(_d&&_b){var _e=this._type=="Image"||this._type=="Text"||this._nonscalingstroke!==true;this._painted=1;_a.save();if(_e){if(this._type!="Image"&&this._type!="Text"){_d.applyToContext(_a,this);}else{_d.applyToContext(_a);}}var _f=this._clipitems;if(this._parent&&this._parent._type=="Paths"&&!_f){_f=this._parent._clipitems;}if(_f&&_f.length){_a.beginPath();for(var _j=0,_k=_f.length;_j<_k;_j++ ){var _g=_f[_j];_a.rect(_g.left,_g.top,_g.width,_g.height);}_a.closePath();_a.clip();}this.on_apply_styles(_a,_b);this.on_drawShape(_a,(_e?null:_d));if((this._type_name!="GraphicsImage"||(this._type_name=="GraphicsImage"&&!this._imageloaded))){var _h=_b._fillcolor,_i=_b._strokecolor;if(_h){_a.fill();this._painted|=4;}if(_i){_a.stroke();this._painted|=2;}}_a.restore();}if(this._painted&(2|4)){_c=this._painted;this._painted=_c;}else{if(this.visible){if(this._drawflags&&this._drawflags&(1|2|4)){this._painted|=2;}else{this._painted=0;}}if(!this.visible){this._painting=2;}}};_pGraphicsObject.on_apply_styles=function(_a,_b){var _c=_b._width,_d=_b._strokejoin||"miter",_e=_b._strokecap||"butt",_f=_b._miterlimit||10,_g=_b._fillcolor,_h=_b._strokecolor,_i=_b._linetype,_j=_b._font;if(nexacro._Browser=="Runtime"){if(!_b){return;}if(_a){if(_c!=null){_a.setElementLineWidth(_c);}_a.setElementLineJoin(_d);_a.setElementLineCap(_e);_a.setElementMiterLimit(_f);if(_j){_a.setElementFont(_j);}if(_g){_a.setElementFillStyle(_g);}if(_h){_a.setElementStrokeStyle(_h);}if(_i){_a.setElementLineStyle(_i);}}}var _k=(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8);if(!_k){if(!_b){return;}if(_a){if(_c!=null){_a.setElementLineWidth(_c);}_a.setElementLineJoin(_d);_a.setElementLineCap(_e);_a.setElementMiterLimit(_f);if(_j){_a.setElementFont(_j);}if(_g){_a.setElementFillStyle(_g);}if(_h){_a.setElementStrokeStyle(_h);}if(_i){_a.setElementLineStyle(_i);}}}};_pGraphicsObject._getSharperOffset=function(_a,_b){var _c=[];if(this._isOddStrokeWidth){if((~~(_a))==_a){_c[0]=0;}else{_c[0]=0.5;}if((~~(_b))==_b){_c[1]=0;}else{_c[1]=0.5;}}else{if((~~(_a))==_a){_c[0]=0.5;}else{_c[0]=0;}if((~~(_b))==_b){_c[1]=0.5;}else{_c[1]=0;}}return _c;};_pGraphicsObject.on_drawShape=function(_a,_b){var _c=this.on_getRect(),_d=_c.width,_e=_c.height,_f=_c.left,_g=_c.top;var _h=0;if(this._isOddStrokeWidth){_h=0.5;}_a.beginPath();if(_b){var _i=[_f,_g,_f+_d,_g+_e];_b._transformCoordinates(_i,0,_i,0,2);_a.rect(parseInt(_i[0])+_h,parseInt(_i[1])+_h,parseInt(_i[2]-_i[0]),parseInt(_i[3]-_i[1]));}else{_a.rect(_f+_h,_g+_h,_d,_e);}_a.closePath();};_pGraphicsObject._remove=function(_a,_b){if(!_b&&this._painted&(1|2|4)){var _c=this.on_getOwnerLayer();if(_c){_c._addDirty(this._oldGlobalBounds,this);if(this._parent._quadtree){this._parent._quadtree.remove(this);}}}if(_a){var _d=this._firstchild;for(;_d;_d=_d._nextsibling){_d._remove(true,true);}}};_pGraphicsObject.on_IsNotDraw=function(){return true;};_pGraphicsObject.on_getCenter=function(){var _a,_b;if(this instanceof nexacro.GraphicsGroup){_b=this._getBoundRect().getCenterPoint();_a=this._center=new nexacro.Point(_b.x,_b.y);}else{_a=this._center;if(!_a){_b=this._getBoundRect().getCenterPoint();_a=this._center=new nexacro.Point(_b.x,_b.y);}}return _a;};delete _pGraphicsObject;}if(!nexacro._GraphicsShape){nexacro._GraphicsShape=function(){nexacro._GraphicsObject.prototype.constructor.apply(this,arguments);var _a=this.__readArgs;var _b=arguments[_a];if(_b instanceof nexacro._GraphicsSize){_a++ ;this._size=_b.clone();this._drawflags|=2;}else if(nexacro._isNumber(_b)&&nexacro._isNumber(arguments[_a+1])){this._size=new nexacro._GraphicsSize(_b,arguments[_a+1]);_a+=2;this._drawflags|=2;}if(!this._size){this._size=new nexacro._GraphicsSize(0,0);}var _c=this.on_getCenter();this._cx=_c.x;this._cy=_c.y;this.x=this._x;this.y=this._y;this.width=this._size.width;this.height=this._size.height;this.__readArgs=_a;};var _pGraphicsShape=nexacro._GraphicsShape.prototype=nexacro._createPrototype(nexacro._GraphicsObject,nexacro._GraphicsShape);_pGraphicsShape._type_name="_GraphicsShape";_pGraphicsShape.x=0;_pGraphicsShape.y=0;_pGraphicsShape.width=0;_pGraphicsShape.height=0;_pGraphicsShape._width=0;_pGraphicsShape._height=0;_pGraphicsShape.set_width=function(_a){var _b=0;if(_a!==undefined){if(isNaN(_a)){return;}}if(_a!==""&&_a!=null){_b=parseInt(_a);}if(_a!=this.width){this.width=_a;}var _c=this._size;if(_c){if(_c.width!=_b){_c.width=_b;this._drawflags|=2;}}else{this._size=new nexacro._GraphicsSize(_b,0);this._drawflags|=2;}};_pGraphicsShape.set_height=function(_a){var _b=0;if(_a!==undefined){if(isNaN(_a)){return;}}if(_a!==""&&_a!=null){_b=parseInt(_a);}if(_a!=this.height){this.height=_a;}var _c=this._size;if(_c){if(_c.height!=_b){_c.height=_b;this._drawflags|=2;}}else{this._size=new nexacro._GraphicsSize(0,_b);this._drawflags|=2;}};_pGraphicsShape.destroy=function(){this.width=null;this.height=null;this._size=null;nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsShape._getSize=function(_a){var _b=this._size;if(_a){return [_b.width,_b.height];}else{return _b;}};_pGraphicsShape.isEmptyRect=function(){return this.on_isEmptyRect();};_pGraphicsShape.on_isEmptyRect=function(){var _a=this._size;if(_a){return _a.width<=0||_a.height<=0;}return true;};_pGraphicsShape.on_IsNotDraw=function(){return this.isEmptyRect();};_pGraphicsShape.on_getRect=function(_a,_b){var _c=this._rect;if(_b){_c=null;}if(!_c){var _d=this._size;if(_d){_c=new nexacro.Rect(0,0,_d.width||0,_d.height||0);}else{_c=new nexacro.Rect();}if(!_b){this._rect=_c;}}if(_a){_c=_c.expand(this._getStrokeWidth()/2);}return _c;};delete _pGraphicsShape;}if(!nexacro.GraphicsRect){nexacro.GraphicsRect=function(){this._type="Rect";nexacro._GraphicsShape.prototype.constructor.apply(this,arguments);var _a=this.__readArgs;if(arguments[_a]>0){this.radiusx=arguments[_a];}else{this.radiusx=0;}if(arguments[_a+1]>0){this.radiusy=arguments[_a+1];}else{this.radiusy=0;}this._drawflags|=8;};var _pGraphicsRect=nexacro.GraphicsRect.prototype=nexacro._createPrototype(nexacro._GraphicsShape,nexacro.GraphicsRect);_pGraphicsRect._type_name="GraphicsRect";_pGraphicsRect.radiusx=0;_pGraphicsRect.radiusy=0;_pGraphicsRect.set_radiusx=function(_a){if(_a==null){return;}if(_a!=this.radiusx){this.radiusx=_a;this._drawflags|=8;}};_pGraphicsRect.set_radiusy=function(_a){if(_a==null){return;}if(_a!=this.radiusy){this.radiusy=_a;this._drawflags|=8;}};_pGraphicsRect.destroy=function(){this.radiusx=null;this.radiusy=null;nexacro._GraphicsShape.prototype.destroy.call(this);};_pGraphicsRect.on_drawShape=function(_a,_b){var _c=this._size,_d= +this.radiusx||0,_e= +this.radiusy||0,_f=_c.width,_g=_c.height,_h=0,_i=0,_j=_f/2,_k,_l=_g/2;if(_d>_j){_d=_j;}if(_e>_l){_e=_l;}var _m=_d!==0||_e!==0;var _n=0;if(this._isOddStrokeWidth){_n=0.5;}if(_m){_a.beginPath();if(_b){_k=[_h+_d,_i,_h+_f-_d,_i,_h+_f,_i,_h+_f,_i+_e,_h+_f,_e,_h+_f,_i+_g-_e,_h+_f,_i+_g,_h+_f-_d,_i+_g,_h+_f-_d,_i+_g,_h+_d,_i+_g,_h,_i+_g,_h,_i+_g-_e,_h,_i+_g-_e,_h,_i+_e,_h,_i,_h+_d,_i,_h+_d,_i];_b._transformCoordinates(_k,0,_k,0,_k.length/2);_a.moveTo(parseInt(_k[0])+_n,parseInt(_k[1])+_n);_a.lineTo(parseInt(_k[2])+_n,parseInt(_k[3])+_n);_a.quadraticCurveTo(parseInt(_k[4])+_n,parseInt(_k[5])+_n,parseInt(_k[6])+_n,parseInt(_k[7])+_n,parseInt(_k[8])+_n,parseInt(_k[9])+_n);_a.lineTo(parseInt(_k[10])+_n,parseInt(_k[11])+_n);_a.quadraticCurveTo(parseInt(_k[12])+_n,parseInt(_k[13])+_n,parseInt(_k[14])+_n,parseInt(_k[15])+_n,parseInt(_k[16])+_n,parseInt(_k[17])+_n);_a.lineTo(parseInt(_k[18])+_n,parseInt(_k[19])+_n);_a.quadraticCurveTo(parseInt(_k[20])+_n,parseInt(_k[21])+_n,parseInt(_k[22])+_n,parseInt(_k[23])+_n,parseInt(_k[24])+_n,parseInt(_k[25])+_n);_a.lineTo(parseInt(_k[26])+_n,parseInt(_k[27])+_n);_a.quadraticCurveTo(parseInt(_k[28])+_n,parseInt(_k[29])+_n,parseInt(_k[30])+_n,parseInt(_k[31])+_n,parseInt(_k[32])+_n,parseInt(_k[33])+_n);}else{_a.moveTo(_h+_d+_n,_i+_n);_a.lineTo(_h+_f-_d+_n,_i+_n);_a.quadraticCurveTo(_h+_f+_n,_i+_n,_h+_f+_n,_i+_e+_n,_h+_f+_n,_i+_e+_n);_a.lineTo(_h+_f+_n,_i+_g-_e+_n);_a.quadraticCurveTo(_h+_f+_n,_i+_g+_n,_h+_f-_d+_n,_i+_g+_n,_h+_f-_d+_n,_i+_g+_n);_a.lineTo(_h+_d+_n,_i+_g+_n);_a.quadraticCurveTo(_h+_n,_i+_g+_n,_h+_n,_i+_g-_e+_n,_h+_n,_i+_g-_e+_n);_a.lineTo(_h+_n,_i+_e+_n);_a.quadraticCurveTo(_h+_n,_i+_n,_h+_d+_n,_i+_n,_h+_d+_n,_i+_n);}_a.closePath();}else{_a.beginPath();if(_b){_k=[_h,_i,_h+_f,_i+_g];_b._transformCoordinates(_k,0,_k,0,2);_a.rect(parseInt(_k[0])+_n,parseInt(_k[1])+_n,parseInt(_k[2]-_k[0]),parseInt(_k[3]-_k[1]));}else{_a.rect(_h+_n,_i+_n,_f,_g);}_a.closePath();}};delete _pGraphicsRect;}if(!nexacro.GraphicsEllipse){nexacro.GraphicsEllipse=function(){this._type="Ellipse";nexacro._GraphicsShape.prototype.constructor.apply(this,arguments);};var _pGraphicsEllipse=nexacro.GraphicsEllipse.prototype=nexacro._createPrototype(nexacro._GraphicsShape,nexacro.GraphicsEllipse);_pGraphicsEllipse._type_name="GraphicsEllipse";_pGraphicsEllipse.destroy=function(){nexacro._GraphicsShape.prototype.destroy.call(this);};_pGraphicsEllipse.isHitTest=function(_a,_b){var _c=new nexacro.Point( +arguments[0], +arguments[1]);_c=this._globalMatrix._inverseTransform(_c);var _d=this._size;if(_d){return _c.divide(_d.width,_d.height).getLength()<=0.5;}return false;};_pGraphicsEllipse.on_drawShape=function(_a,_b){var _c=this._size,_d=_c.width,_e,_f=_c.height;if(_d==_f){_a.beginPath();if(_b){_e=[0,0,(_d+_f)/4,0];_b._transformCoordinates(_e,0,_e,0,_e.length/2);_a.arc(_e[0],_e[1],_e[2],_e[3],Math.PI* 2,true);}else{_a.arc(0,0,(_d+_f)/4,0,Math.PI* 2,true);}}else{_a.beginPath();var _g=_d/2,_h=_f/2,_i=nexacro._GraphicsLib._KAPPA,_j=_g* _i,_k=_h* _i;if(_b){_e=[ -_g,0, -_g, -_k, -_j, -_h,0, -_h,_j, -_h,_g, -_k,_g,0,_g,_k,_j,_h,0,_h, -_j,_h, -_g,_k, -_g,0];_b._transformCoordinates(_e,0,_e,0,_e.length/2);_a.moveTo(_e[0],_e[1]);_a.bezierCurveTo(_e[2],_e[3],_e[4],_e[5],_e[6],_e[7]);_a.bezierCurveTo(_e[8],_e[9],_e[10],_e[11],_e[12],_e[13]);_a.bezierCurveTo(_e[14],_e[15],_e[16],_e[17],_e[18],_e[19]);_a.bezierCurveTo(_e[20],_e[21],_e[22],_e[23],_e[24],_e[25]);}else{_a.moveTo( -_g,0);_a.bezierCurveTo( -_g, -_k, -_j, -_h,0, -_h);_a.bezierCurveTo(_j, -_h,_g, -_k,_g,0);_a.bezierCurveTo(_g,_k,_j,_h,0,_h);_a.bezierCurveTo( -_j,_h, -_g,_k, -_g,0);}_a.closePath();}};_pGraphicsEllipse.on_getRect=function(_a,_b){var _c=this._rect;if(_b){_c=null;}if(!_c){_c=new nexacro.Rect(0,0,this._size.width,this._size.height).setCenterPoint(0,0);if(!_b){this._rect=_c;}}if(_a){_c=_c.expand(this._getStrokeWidth()/2);}return _c;};_pGraphicsEllipse.on_getCenter=function(){return new nexacro.Point(this.x,this.y);};delete _pGraphicsEllipse;}if(!nexacro.GraphicsText){nexacro.GraphicsText=function(){this._type="Text";nexacro._GraphicsObject.prototype.constructor.apply(this,arguments);var _a=this.__readArgs;if(arguments[_a]!=null){this.set_text(arguments[_a]);}};var _pGraphicsText=nexacro.GraphicsText.prototype=nexacro._createPrototype(nexacro._GraphicsShape,nexacro.GraphicsText);_pGraphicsText._type_name="GraphicsText";_pGraphicsText.font="";_pGraphicsText.text="";_pGraphicsText.textwidth="";_pGraphicsText.color="";_pGraphicsText.dx=0;_pGraphicsText.dy=0;_pGraphicsText.textAlign="left";_pGraphicsText.verticalAlign="top";_pGraphicsText.wordWrap="none";_pGraphicsText._textwidth=0;_pGraphicsText.set_font=function(_a){var _b=this._style,_c=this.font,_d,_e;if(_c!=_a){this.font=_a;_d=_b.font;if(_a){if(_d==null||_d.value!=_a){_e=nexacro.FontObject(_a);_b.font=_e;}}else{if(_d){_b.font=null;}}this._drawflags|=(2|8);this._changedFont=true;}};_pGraphicsText.set_color=function(_a){this.color=_a;nexacro._GraphicsObject.prototype.set_fillstyle.call(this,_a);this.fillstyle=undefined;};_pGraphicsText.set_fillstyle=function(_a){return;};_pGraphicsText.set_textAlign=function(_a){if(!/^(left|center|right)$/.test(_a)){return;}if(this.textAlign!=_a){this.textAlign=_a;this._drawflags|=(1|8);this._alignChanged=true;}};_pGraphicsText.set_verticalAlign=function(_a){if(!/^(top|middle|bottom)$/.test(_a)){return;}if(this.verticalAlign!=_a){this.verticalAlign=_a;this._drawflags|=(1|8);this._alignChanged=true;}};_pGraphicsText.set_text=function(_a){if(!nexacro._isString(_a)){if(!nexacro._GraphicsLib.isEmpty(_a)){_a=_a.toString();}else{_a="";}}if(this.text!=_a){this.text=_a;this._drawflags|=4;this._textChanged=true;}};_pGraphicsText.set_wordWrap=function(_a){var _b=["none","char"];if(_b.indexOf(_a)== -1){return;}if(this.wordWrap!==_a){this.wordWrap=_a;this._drawflags|=4;this._wordwrapChanged=true;}};_pGraphicsText.set_textwidth=function(_a){var _b=0;if(_a!==undefined){if(isNaN(_a)||_a<0){return;}}if(_a!==""&&_a!=null){_b=parseInt(_a);}if(this.textwidth!=_a){this.textwidth=_a;this._textwidth=_b;this._drawflags|=2;this._widthChanged=true;}};_pGraphicsText.destroy=function(){this.font=null;this.text=null;this.width=null;this.color=null;this.dx=null;this.dy=null;this.textAlign=null;this.verticalAlign=null;this.wordWrap=null;nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsText.on_isEmptyRect=function(){var _a=this.on_getRect();if(_a.width<=0||_a.height<=0){_a=this.on_getRect(false,true);}return _a.width<=0||_a.height<=0;};_pGraphicsText.on_updateStyles=function(_a,_b){this._updateText();var _c;var _d=this._renderstyle;if(!_d){_d={};this._renderstyle=_d;}var _e=this._style;if(this._changedFillstyle||_b){_c=_e.fillstyle;if(!_c){_c=nexacro.BackgroundObject("#000000",this);}this._updateFill(_c,_d,_a);this._changedFillstyle=false;}_a.setElementGlobalAlpha(this._globalAlpha);};_pGraphicsText._updateText=function(){var _a=this._renderstyle,_b=this._style;if(!_a){_a={};this._renderstyle=_a;}if(!this._size){this._size=new nexacro._GraphicsSize(0,0);}if(this._textChanged||this._changedFont||this._wordwrapChanged||this._widthChanged){var _c=_b.font;if(_c===null||_c==='undefined'||_c===undefined){_c=nexacro.FontObject('12pt/normal Verdana');this._changedFont=true;}if(this._changedFont){this._updateFontInCanvas(_c,_a);if(_c){var _d=nexacro.getTextSize("Wj",_c);this._lineHeight=_d.ny;}else{this._lineHeight=0;}this._changedFont=false;}var _e=this.text;if(_c&&_e&&_e.length&&this._lineHeight){var _f= +this.textwidth|| +this.width;this._lines=nexacro._GraphicsLib.getLines(_c,_e,this.wordWrap,_f);this._txtSize=nexacro._GraphicsLib.getTextSize(_c,this._lines,this._lineHeight);this._size.width=this._txtSize[0];this._size.height=this._txtSize[1];}else{this._lines=null;this._txtSize=[0,0];this._size.width=0;this._size.height=0;}this._textChanged=false;this._widthChanged=false;this._wordwrapChanged=false;}else{if(!this._txtSize){this._txtSize=[0,0];this._size.width=0;this._size.height=0;}else{this._size.width=this._txtSize[0];this._size.height=this._txtSize[1];}}};_pGraphicsText._updateFontInCanvas=function(_a,_b){if(_a){_b._font=_a;}else{_b._font=null;}};_pGraphicsText.on_getRect=function(_a,_b){var _c=this._rect;if(_b){_c=null;}if(!_c||this._changedFont||this._textChanged||this._wordwrapChanged||this._widthChanged||this._alignChanged){this._updateText();var _d=this._txtSize;_c=new nexacro.Rect(0,0,_d[0],_d[1]);if(_d[0]!=0&&_d[1]!=0){switch(this.textAlign){case "left":break;case "center":_c.left= -(_d[0]/2);break;case "right":_c.left= -_d[0];break;}switch(this.verticalAlign){case "top":break;case "middle":_c.top= -(_d[1]/2);break;case "bottom":_c.top= -_d[1];break;}_c.left-=1;_c.top-=1;_c.width+=6;_c.height+=6;_c.right=_c.left+_c.width;_c.bottom=_c.top+_c.height;}if(!_b){this._rect=_c;}this._alignChanged=false;}return _c;};_pGraphicsText.on_draw=function(_a){var _b=this._renderstyle;var _c=this._globalMatrix;var _d=this._lineHeight;var _e,_f=0,_g;if(_b&&_c){this._painted|=1;_a.save();_c.applyToContext(_a);var _h=this._clipitems;if(_h&&_h.length){_a.beginPath();_f=_h.length;for(_e=0;_e<_f;_e++ ){var _i=_h[_e];var _j=this.verticalAlign;if(_j=="top"){_a.rect(_i.left,_i.top,_i.width,_i.height);}else if(_j=="middle"){_a.rect(_i.left,_i.top-(_d/2),_i.width,_i.height);}else{_a.rect(_i.left,_i.top-_d,_i.width,_i.height);}}_a.closePath();_a.clip();}this.on_apply_styles(_a,_b);var _k=_b._fillcolor;var _l=this._lines;if(_l){switch(this.textAlign){case "left":_a.setElementTextAlign("start");break;case "center":_a.setElementTextAlign("center");break;case "right":_a.setElementTextAlign("end");break;}switch(this.verticalAlign){case "top":_a.setElementTextBaseline("top");_f=_l.length;if(_k){for(_e=0;_e<_f;_e++ ){_a.fillText(_l[_e],0,_e* _d);}this._painted|=4;}break;case "middle":_a.setElementTextBaseline("middle");if(_k){_f=_l.length;_g=(_f-1)* _d/2;for(_e=0;_e<_f;_e++ ){_a.fillText(_l[_e],0,_e* _d-_g);}this._painted|=4;}break;case "bottom":_a.setElementTextBaseline("bottom");if(_k){_f=_l.length;_g=(_f-1)* _d;for(_e=0;_e<_f;_e++ ){_a.fillText(_l[_e],0,_e* _d-_g);}this._painted|=4;}break;}}_a.restore();}if(!(this._painted&(2|4))){if(this.visible){if(this._drawflags&&this._drawflags&(1|2|4)){this._painted|=2;}else{this._painted=0;}}if(!this.visible){this._painting=2;}}};delete _pGraphicsText;}if(!nexacro.GraphicsImage){nexacro.GraphicsImage=function(){this._type="Image";nexacro._GraphicsShape.prototype.constructor.apply(this,arguments);};var _pGraphicsImage=nexacro.GraphicsImage.prototype=nexacro._createPrototype(nexacro._GraphicsShape,nexacro.GraphicsImage);_pGraphicsImage._type_name="GraphicsImage";_pGraphicsImage.image="";_pGraphicsImage.imagewidth=0;_pGraphicsImage.imageheight=0;_pGraphicsImage._cacheimages=null;_pGraphicsImage._cacheimagesCapacity=null;_pGraphicsImage._cacheimagescnt=null;_pGraphicsImage._redrawparent=null;_pGraphicsImage._redrawcallback=null;_pGraphicsImage._imgobj=null;_pGraphicsImage.set_strokepen=function(_a){this.strokepen=_a;};_pGraphicsImage.set_fillstyle=function(_a){this.fillstyle=_a;};_pGraphicsImage.set_strokejoin=function(_a){this.strokejoin=_a;};_pGraphicsImage.set_strokecap=function(_a){this.strokecap=_a;};_pGraphicsImage.set_miterlimit=function(_a){this.miterlimit=_a;};_pGraphicsImage.set_image=function(_a){if(_a instanceof nexacro.Image){if(_a._base64str){_a=_a._base64str;}else{_a=_a.src;}}else{_a=_a.toString();}if(this.image!=_a){this.imagewidth=0;this.imageheight=0;this.image=_a;var _b,_c;if(_a){this._imageloaded=false;if(nexacro._Browser!="Runtime"){var _d=this._getRealImageUrl(_a);var _e=this._cacheimages,_f;if(!this._imgobj){this._imgobj={};}if(_e&&_e[_d]){_f=_e[_d];this._imgobj.handle=_f;_b=_f.naturalWidth||_f.width;_c=_f.naturalHeight||_f.height;this._doingSomethingAfterImageloaded(_b,_c);}else{_f=new Image();var _g=this,_h=function(){nexacro._stopSysObserving(this,"load","onload",_h);_g._imageload_callback(_d,0,0,_f);};var _i=nexacro._getImageSize(_d,nexacro._emptyFn,this,undefined,_f);if(_i){_b=_i.width;_c=_i.height;this.imagewidth=_b;this.imageheight=_c;}nexacro._observeSysEvent(_f,"load","onload",_h);_f.src=_d;}}else{if(!this._imgobj){this._imgobj={};}this._imgobj.src=_a;this._imgobj.handle=nexacro._getImageObject(_a,this._imageload_callback,this,"",false);}}else{this._imgobj=null;this._imageloaded=true;}this._drawflags|=4;}};_pGraphicsImage.destroy=function(){this.image=null;this._imgobj=null;this.imagewidth=null;this.imageheight=null;this._cacheimages=null;this._cacheimagesCapacity=null;this._cacheimagescnt=null;nexacro._GraphicsShape.prototype.destroy.call(this);};_pGraphicsImage.setImageLoadEventHandler=function(_a,_b){if(_b&&_a){if(typeof _a==="function"){this._redrawparent=_b;this._redrawcallback=_a;}}};_pGraphicsImage.on_isEmptyRect=function(){if(this._imgobj){var _a=this._size;var _b=this._imageloaded;if(_a){return _a.width<=0||_a.height<=0;}else if(_b){return true;}else{return false;}}return true;};_pGraphicsImage._getRealImageUrl=function(_a){if(_a.substring(0,4).toLowerCase()=="url("){_a=_a.substring(5,_a.length-2);}if(!_a||!_a.length){return null;}var _b=this.on_getOwnerLayer();var _c=_b?_b.parent._getRefFormBaseUrl():undefined;return nexacro._getImageLocation(_a,_c);};_pGraphicsImage._imageload_callback=function(_a,_b,_c,_d){if(nexacro._Browser!="Runtime"){var _e=this._cacheimages;if(this._cacheimagescnt==null){this._cacheimagescnt=0;this._cacheimagesCapacity=30;}if(!_e){_e={};this._cacheimages=_e;}var _f,_g;if('naturalHeight' in _d){if(_d.naturalHeight+_d.naturalWidth===0){return;}_f=_d.naturalWidth;_g=_d.naturalHeight;}else if(_d.width+_d.height==0){return;}else{_f=_d.width;_g=_d.height;}this._imgobj.handle=_d;_e[_a]=_d;this._cacheimagescnt++ ;if(this._cacheimagescnt>this._cacheimagesCapacity){nexacro._GraphicsLib.objEach(_e,function(_h,_i,_j){delete _j[_h];this._cacheimagescnt-- ;if(this._cacheimagescnt<this._cacheimagesCapacity){return false;}});}this.imagewidth=_f;this.imageheight=_g;this._doingSomethingAfterImageloaded(_f,_g);}else{this.imagewidth=_b;this.imageheight=_c;this._doingSomethingAfterImageloaded(_b,_c);}};_pGraphicsImage._doingSomethingAfterImageloaded=function(_a,_b){var _c=this._size,_d,_e;this._imageloaded=true;this.imagewidth=_a;this.imageheight=_b;if(_c==null){this._size=new nexacro._GraphicsSize(_a,_b);this._drawflags|=2;if(this._needRedarw){this._drawflags|=4;_d=this.on_getOwnerLayer();_e=_d.parent;_e._delayTask();this._needRedarw=false;}return;}if(this.width<=0){_c.width=_a;this._drawflags|=2;}if(this.height<=0){_c.height=_b;this._drawflags|=2;}if(this._needRedarw){this._drawflags|=4;_d=this.on_getOwnerLayer();_e=_d.parent;_e._delayTask();this._needRedarw=false;}if(this._redrawparent&&this._redrawcallback){this._redrawcallback.call(this._redrawparent);}};_pGraphicsImage.on_updateStyles=function(_a,_b){var _c=this._renderstyle;if(!_c){_c={};this._renderstyle=_c;}_a.setElementGlobalAlpha(this._globalAlpha);};_pGraphicsImage.on_drawShape=function(_a){if(!this.isEmptyRect()){if(this._imageloaded){var _b=this._size,_c=_b.width,_d=_b.height;_a.drawImage(this._imgobj,0,0,_c,_d);}else{this._needRedarw=true;}}};delete _pGraphicsImage;}if(!nexacro.GraphicsPath){nexacro.GraphicsPath=function(){this._type="Path";nexacro._GraphicsObject.prototype.constructor.apply(this,arguments);this._closed=false;this._segments=[];};var _pGraphicsPath=nexacro.GraphicsPath.prototype=nexacro._createPrototype(nexacro._GraphicsObject,nexacro.GraphicsPath);_pGraphicsPath._type_name="GraphicsPath";_pGraphicsPath._strokepadding=0;_pGraphicsPath._curvemin=0.00001;_pGraphicsPath._curvemax=1-0.00001;_pGraphicsPath.destroy=function(){this._closed=null;this._segments=null;this._strokepadding=null;this._curvemin=null;this._curvemax=null;delete this._segments;nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsPath._add=function(_a,_b){var _c=this._segments,_d=_b==null;_b=_d?_c.length:_b;if(_d){_c.push.apply(_c,_a);}else{_c.splice.apply(_c,[_b,0].concat(_a));}this._drawflags|=4;return _a;};_pGraphicsPath.hasSegments=function(){return this.on_hasSegments();};_pGraphicsPath.on_hasSegments=function(){return !(this._segments.length===0);};_pGraphicsPath.on_IsNotDraw=function(){return !this.hasSegments();};_pGraphicsPath._isClosed=function(){if(this._closed){return true;}return false;};_pGraphicsPath._setClosed=function(_a){if(this._closed!=(_a=!!_a)){this._closed=_a;this._drawflags|=4;}};_pGraphicsPath._removeSegment=function(_a){return this._removeSegments(_a,_a+1)[0]||null;};_pGraphicsPath._removeSegments=function(_a,_b){_a=(_a||0);_b=(_b==null?this._segments.length:_b);var _c=this._segments,_d=_c.splice(_a,_b-_a),_e=_d.length;if(!_e){return _d;}this._drawflags|=4;return _d;};_pGraphicsPath.quadraticCurveTo=function(_a,_b,_c,_d){var _e=arguments.length;if(_e!=4){return;}this.bezierCurveTo( +_a, +_b, +_c, +_d, +_c, +_d);};_pGraphicsPath.bezierCurveTo=function(_a,_b,_c,_d,_e,_f){var _g=arguments.length;if(_g!=6){return;}var _h=0;var _i=new nexacro.Point( +arguments[0], +arguments[1]);_h+=2;var _j=new nexacro.Point( +arguments[_h], +arguments[_h+1]);_h+=2;var _k=new nexacro.Point( +arguments[_h], +arguments[_h+1]);var _l=this._getCurrentSegment();_l.outVector=_i;var _m={point:_k.clone(),inVector:_j.clone(),nextSeg:null};this._add([_m]);};_pGraphicsPath.arcTo=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._getCurrentSegment(),_i=_h.point,_j,_k,_l,_m,_n,_o,_p=0;if(arguments.length<7){return;}_j=new nexacro.Point( +arguments[0], +arguments[1]);_p+=2;_k=new nexacro._GraphicsSize( +arguments[_p], +arguments[_p+1]);_p+=2;_e=arguments[_p];_p+=1;_f=!!arguments[_p];_p+=1;_g=!!arguments[_p];if(_k.isZero()){return this.lineTo(_j);}var _q=_i.add(_j).divide(2),_r=_i.subtract(_q).rotate( -_e),_s=_r.x,_t=_r.y,_u=Math.abs,_v=1e-11,_w=_u(_k.width),_x=_u(_k.height),_y=_w* _w,_z=_x* _x,_aa=_s* _s,_ab=_t* _t,_ac;var _ad=Math.sqrt(_aa/_y+_ab/_z);if(_ad>1){_w*=_ad;_x*=_ad;_y=_w* _w;_z=_x* _x;}_ad=(_y* _z-_y* _ab-_z* _aa)/(_y* _ab+_z* _aa);if(_u(_ad)<_v){_ad=0;}if(_ad<0){}_l=new nexacro.Point(_w* _t/_x, -_x* _s/_w);_l=_l.multiply((_g===_f? -1:1)* Math.sqrt(_ad));_l=_l.rotate(_e);_l=_l.add(_q);_o=new nexacro._GraphicsMatrix().translate(_l).rotate(_e).scale(_w,_x);_n=_o._inverseTransform(_i);if(!_n){return;}_m=_n.getDirectedAngle(_o._inverseTransform(_j));if(!_f&&_m>0){_m-=360;}else if(_f&&_m<0){_m+=360;}var _ae=Math.abs(_m),_af=_ae>=360?4:Math.ceil(_ae/90),_ag=_m/_af,_ah=_ag* Math.PI/360,_ai=4/3* Math.sin(_ah)/(1+Math.cos(_ah)),_aj=[],_ak;for(var _am=0;_am<=_af;_am++ ){_r=_j;_ac=null;if(_am<_af){_ac=_n.rotate(90).multiply(_ai);if(_o){_r=_o._transformPoint(_n);_ac=_o._transformPoint(_n.add(_ac));}else{_r=_l.add(_n);}}if(_am===0){_h.outVector=_ac;}else{var _al=_n.rotate( -90).multiply(_ai);if(_o){_al=_o._transformPoint(_n.add(_al));}_ak={point:_r.clone(),inVector:_al.clone(),outVector:_ac,nextSeg:null};_aj.push(_ak);}_n=_n.rotate(_ag);}this._add(_aj);};_pGraphicsPath.moveTo=function(_a,_b){var _c=arguments.length;var _d;var _e;if(_c==2){_d=new nexacro.Point( +arguments[0], +arguments[1]);}else{return;}if(this._segments.length===1){this._removeSegments();}if(!this._segments.length){_e={point:_d.clone(),nextSeg:null};this._add([_e]);}else{_e={point:_d.clone(),nextSeg:null};this._removeSegment(0);this._add([_e],0);}};_pGraphicsPath.moveBy=function(_a,_b){var _c;var _d=arguments.length;var _e;if(_d==2){_c=new nexacro.Point( +_a, +_b);if(this._segments.length>0){_c=this._getFirstSegment().point.add(_c);if(this._segments.length===1){this._removeSegments();}if(!this._segments.length){_e={point:_c.clone(),nextSeg:null};this._add([_e]);}else{_e={point:_c.clone(),nextSeg:null};this._removeSegment(0);this._add([_e],0);}}else{this.moveTo(_a,_b);}}else{return;}};_pGraphicsPath.lineTo=function(_a,_b){var _c=arguments.length;var _d;if(_c==2){_d=new nexacro.Point( +arguments[0], +arguments[1]);}else{return;}var _e={point:_d.clone(),nextSeg:null};this._add([_e]);};_pGraphicsPath.closePath=function(){var _a=this._getFirstSegment(),_b=this._getLastSegment();if(_a&&_b){if(_a.point.equals(_b.point)){_a.inVector=_b.inVector;this._removeSegment(this._segments.length-1);}}this._setClosed(true);};_pGraphicsPath._getFirstSegment=function(){return this._segments[0];};_pGraphicsPath._getLastSegment=function(){return this._segments[this._segments.length-1];};_pGraphicsPath.getPathData=function(){var _a=this._segments,_b=[];if(_a.length===0){return '';}var _c=_a[0].point,_d=nexacro._GraphicsLib.toStrFormatNumber;_b.push('M'+_d(_c.x)+','+_d(_c.y));for(var _e=0,_f=_a.length-1;_e<_f;_e++ ){this._getSegPathData(_b,_a[_e],_a[_e+1],false);}if(this._closed){this._getSegPathData(_b,_a[_a.length-1],_a[0],true);_b.push('Z');}return _b.join('');};_pGraphicsPath.clear=function(){this._removeSegments();this._setClosed(false);};_pGraphicsPath.setPathData=function(_a){var _b=nexacro.Point;var _c=_a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),_d,_e=false,_f,_g,_h,_i=0,_j=0,_k,_l=new nexacro.Point();function getCoord(_r,_q,_s){var _t=parseFloat(_d[_r]);if(_e){_t+=_l[_q];}if(_s){_l[_q]=_t;}return _t;}function getPoint(_r,_s){return new _b(getCoord(_r,'x',_s),getCoord(_r+1,'y',_s));}this._removeSegments();for(_k=0,_i=_c.length;_k<_i;_k++ ){var _m=_c[_k],_n=_m[0],_o=_n.toLowerCase();_d=_m.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);_e=_n===_o;var _p=_d&&_d.length;switch(_o){case 'm':case 'l':for(_j=0;_j<_p;_j+=2){_f=getPoint(_j,true);this[_j===0&&_o==='m'?'moveTo':'lineTo'](_f.x,_f.y);}break;case 'h':case 'v':var _q=_o=='h'?'x':'y';for(_j=0;_j<_p;_j++ ){getCoord(_j,_q,true);this.lineTo(_l.x,_l.y);}break;case 'c':for(_j=0;_j<_p;_j+=6){_f=getPoint(_j);_g=getPoint(_j+2);_h=getPoint(_j+4,true);this.bezierCurveTo( +_f.x, +_f.y, +_g.x, +_g.y, +_h.x, +_h.y);}break;case 's':for(_j=0;_j<_p;_j+=4){_f=_l.multiply(2).subtract(_g);_g=getPoint(_j);_h=getPoint(_j+2,true);this.bezierCurveTo( +_f.x, +_f.y, +_g.x, +_g.y, +_h.x, +_h.y);}break;case 'q':for(_j=0;_j<_p;_j+=4){_g=getPoint(_j);_h=getPoint(_j+2,true);this.quadraticCurveTo( +_g.x, +_g.y, +_h.x, +_h.y);}break;case 't':for(_j=0;_j<_p;_j+=2){_g=_l.multiply(2).subtract(_g);_h=getPoint(_j,true);this.quadraticCurveTo( +_g.x, +_g.y, +_h.x, +_h.y);}break;case 'a':for(_j=0;_j<_p;_j+=7){_l=getPoint(_j+5);this.arcTo( +_l.x, +_l.y, +_d[0], +_d[1], +_d[2], +_d[4], +_d[3]);}break;case 'z':this.closePath();break;}}};_pGraphicsPath.isHitTest=function(_a,_b){var _c=new nexacro.Point( +arguments[0], +arguments[1]);_c=this._globalMatrix._inverseTransform(_c);if(this._isClosed()){return this._contains(_c);}else{var _d=2;var _e=this._strokewidth/2;return this._getStrokeCross(Math.max(_d,_e),_c);}};_pGraphicsPath.isPointInPath=function(_a,_b,_c){var _d=new nexacro.Point( +arguments[0], +arguments[1]);if(!nexacro._isNumber( +_c)){return this._contains(_d);}else{return this._getStrokeCross( +_c,_d);}};_pGraphicsPath._contains=function(_a){var _b=_a.x,_c=_a.y;var _d=this._segments,_e=0,_f=new Array(3),_g,_h;if(_d.length<2){return false;}_g=this._getValues(_d[_d.length-1],_d[0]);_h=_g;var _i,_j,_k;for(var _l=0,_m=_d.length-1;_l<_m;_l++ ){_i=this._getValues(_d[_l],_d[_l+1]);_j=_i[0];_k=_i[1];if(!(_j===_i[2]&&_k===_i[3]&&_j===_i[4]&&_k===_i[5]&&_j===_i[6]&&_k===_i[7])){_e+=this._getCrossings(_i,_h,_b,_c,_f);_h=_i;}}_e+=this._getCrossings(_g,_h,_b,_c,_f);return (_e&1)===1;};_pGraphicsPath._getStrokeCross=function(_a,_b){var _c=this._segments,_d=0,_e=0,_f=_a/2;if(_c.length===0){return null;}var _g=new nexacro.Rect(_b.x-_f,_b.y-_f,_a,_a);var _h=_c[0].point.clone(),_i=[],_j,_k,_l,_m,_n;var _o=new nexacro.Point(_g.left,_g.top),_p=new nexacro.Point(_g.getRight(),_g.getBottom());while(_d<4){_i[_d]=new nexacro.Point();_d++ ;}_i[0].x=_h.x;_i[0].y=_h.y;for(_d=0,_e=_c.length-1;_d<_e;_d++ ){_m=_c[_d];_n=_c[_d+1];_j=_n.point;_k=_m.outVector;_l=_n.inVector;if(!(_k&&_l)||(_k.isZero()&&_l.isZero())){_i[1].x=_j.x;_i[1].y=_j.y;if(this._intersectLineRectangle(_i[0],_i[1],_o,_p)){return true;}_i[0].x=_j.x;_i[0].y=_j.y;}else{_i[1].x=_k.x;_i[1].y=_k.y;_i[2].x=_l.x;_i[2].y=_l.y;_i[3].x=_j.x;_i[3].y=_j.y;if(this._intersectBezier3Rectangle(_i[0],_i[1],_i[2],_i[3],_o,_p)){return true;}_i[0].x=_j.x;_i[0].y=_j.y;}}if(this._closed){_m=_c[_c.length-1];_n=_c[0];_j=_n.point;_k=_m.outVector;_l=_n.inVector;if(!(_k&&_l)||(_k.isZero()&&_l.isZero())){_i[1].x=_j.x;_i[1].y=_j.y;if(this._intersectLineRectangle(_i[0],_i[1],_o,_p)){return true;}_i[0].x=_j.x;_i[0].y=_j.y;}else{_i[1].x=_k.x;_i[1].y=_k.y;_i[2].x=_l.x;_i[2].y=_l.y;_i[3].x=_j.x;_i[3].y=_j.y;if(this._intersectBezier3Rectangle(_i[0],_i[1],_i[2],_i[3],_o,_p)){return true;}_i[0].x=_j.x;_i[0].y=_j.y;}}return false;};_pGraphicsPath.on_getRect=function(_a,_b){var _c=this._rect;var _d=this._strokecap||"butt";var _e=this._strokejoin||"miter";var _f=this._segments;var _g=false;var _h=false;var _i=false;var _j=0;var _k=0;function getAngle(_as,_w,_at){var _au=Math.sqrt(Math.pow(_as.x-_at.x,2)+Math.pow(_as.y-_at.y,2));var _av=Math.sqrt(Math.pow(_as.x-_w.x,2)+Math.pow(_as.y-_w.y,2));var _aw=Math.sqrt(Math.pow(_w.x-_at.x,2)+Math.pow(_w.y-_at.y,2));var _ax=(Math.pow(_av,2)+Math.pow(_aw,2)-Math.pow(_au,2))/(2* _av* _aw);var _ay=Math.acos(_ax);_ay=_ay* (180/Math.PI);return _ay;}function getDistance(_as,_at,_au,_av){var _aw=Math.sqrt((_au-_as)* (_au-_as)+(_av-_at)* (_av-_at));return _aw;}function getUnitVector(_as,_af){var _v={x:0,y:0};if(_as.x-_af.x==0&&_as.y-_af.y==0){return _v;}var _at=_as.x-_af.x;var _au=_as.y-_af.y;var _av=getDistance(_as.x,_as.y,_af.x,_af.y);_v.x=_at/_av;_v.y=_au/_av;return _v;}if(_b){_c=null;}if(!_c){var _l;var _m;var _n;var _o=1;var _p=1;var _q;var _r;var _s=false;for(_j=0,_k=_f.length;_j<_k;_j++ ){_q=_f[_j].outVector;_r=_f[_j].inVector;if(!(_q&&_r)||(_q.isZero()&&_r.isZero())){_s=true;}if(_j>0){if(_s){if(_f[_j].point.x==_f[0].point.x){_o++ ;}if(_f[_j].point.y==_f[0].point.y){_p++ ;}}}if(_j==0){if(this._closed){_l=_f[_f.length-1].point;_m=_f[_j].point;if(_f[_j+1]){_n=_f[_j+1].point;}else{_n=_f[_f.length-1].point;}}else{_f[_j]._miterval=0;_f[_j]._miterval=this._getStrokeWidth()/2;_f[_j]._miterval+=1;continue;}}else if(_j==_f.length-1){if(this._closed){_l=_f[_j-1].point;_m=_f[_j].point;_n=_f[0].point;}else{_f[_j]._miterval=0;_f[_j]._miterval=this._getStrokeWidth()/2;_f[_j]._miterval+=1;continue;}}else{_l=_f[_j-1].point;_m=_f[_j].point;_n=_f[_j+1].point;}var _t=getAngle(_l,_m,_n);if((_t>(this._miterlimit||10))&&_e=="miter"){var _u=(this._getStrokeWidth()/Math.sin(_t* Math.PI/360));_f[_j]._miterval=_u/2;_f[_j]._miterval+=1;}else{_f[_j]._miterval=this._getStrokeWidth()/2;_f[_j]._miterval+=1;}}if(_o==_f.length){_h=true;}if(_p==_f.length){_i=true;}if(_h||_i){_g=true;}if(_g){_a=true;}if(_f.length===0){_c=new nexacro.Rect();this._rect=_c;return _c;}var _v=_f[0].point,_w,_x,_y,_z,_aa,_ab,_ac;var _ad=_v.x;var _ae=_v.y;for(_j=0,_k=_f.length-1;_j<_k;_j++ ){_z=_f[_j];_aa=_f[_j+1];_w=_aa.point;_x=_z.outVector;_y=_aa.inVector;if(!(_x&&_y)||(_x.isZero()&&_y.isZero())){_ab=_w.x;_ac=_w.y;if(!_c){_c=new nexacro.Rect(Math.min(_ad,_ab),Math.min(_ae,_ac),Math.max(_ad,_ab)-Math.min(_ad,_ab),Math.max(_ae,_ac)-Math.min(_ae,_ac));}else{this._unionRect(_c,Math.min(_ad,_ab),Math.min(_ae,_ac),Math.max(_ad,_ab),Math.max(_ae,_ac));}_ad=_ab;_ae=_ac;}else{_c=this._getCurveBounds(_ad,_ae,_x.x,_x.y,_y.x,_y.y,_w.x,_w.y,_c);_ad=_w.x;_ae=_w.y;}}if(this._closed){_z=_f[_f.length-1];_aa=_f[0];_w=_aa.point;_x=_z.outVector;_y=_aa.inVector;if(!(_x&&_y)||(_x.isZero()&&_y.isZero())){_ab=_w.x;_ac=_w.y;if(!_c){_c=new nexacro.Rect(Math.min(_ad,_ab),Math.min(_ae,_ac),Math.max(_ad,_ab)-Math.min(_ad,_ab),Math.max(_ae,_ac)-Math.min(_ae,_ac));}else{this._unionRect(_c,Math.min(_ad,_ab),Math.min(_ae,_ac),Math.max(_ad,_ab),Math.max(_ae,_ac));}}else{_c=this._getCurveBounds(_ad,_ae,_x.x,_x.y,_y.x,_y.y,_w.x,_w.y,_c);}}if(!_c){_c=new nexacro.Rect();this._rect=_c;if(_a){_c=_c.expand(this._getStrokeWidth()/2);}return _c;}if(!_b){this._rect=_c;}}if(_a){var _af={x:0,y:0};var _ag={x:_c.getCenterPoint().x,y:_c.getCenterPoint().y};var _ah;var _ai=_c.left;var _aj=_c.top;var _ak=_c.right;var _al=_c.bottom;var _am;var _an;for(_j=0,_k=_f.length;_j<_k;_j++ ){var _ao=_f[_j];_af.x=_ao.point.x;_af.y=_ao.point.y;_ah=getUnitVector(_af,_ag);var _ap=Math.abs(_ah.x);var _aq=Math.abs(_ah.y);_ah.x=Math.max(_ap,_aq);_ah.y=Math.max(_ap,_aq);var _ar;if(_c.left==_ao.point.x){_ar=_ao._miterval;if(_d=="butt"&&_i){_ar=1;}_am=_af.x+_ah.x* _ar;_am=_am-_c.left;_ai=_c.left-Math.abs(_am);}if(_c.top==_ao.point.y){_ar=_ao._miterval;if(_d=="butt"&&_h){_ar=1;}_an=_af.y+_ah.y* _ar;_an=_an-_c.top;_aj=_c.top-Math.abs(_an);}if(_c.right==_ao.point.x){_ar=_ao._miterval;if(_d=="butt"&&_i){_ar=1;}_am=_af.x+_ah.x* _ar;_am=_am-_c.right;_ak=_c.right+Math.abs(_am);}if(_c.bottom==_ao.point.y){_ar=_ao._miterval;if(_d=="butt"&&_h){_ar=1;}_an=_af.y+_ah.y* _ar;_an=_an-_c.bottom;_al=_c.bottom+Math.abs(_an);}}_c.set(_ai,_aj,_ak-_ai,_al-_aj);}return _c;};_pGraphicsPath._unionRect=function(_a,_b,_c,_d,_e){var _f=Math.min(_a.left,_b);var _g=Math.min(_a.top,_c);var _h=Math.max(_a.getRight(),_d);var _i=Math.max(_a.getBottom(),_e);_a.left=_f;_a.top=_g;_a.right=_h;_a.bottom=_i;_a.width=_h-_f;_a.height=_i-_g;};_pGraphicsPath._adjustSegments=function(){if(this._pathDataChanged){var _a=this._countSegs(),_b=this._segments,_c;for(var _d=0;_d<_a;_d++ ){_c=_b[_d];_c.nextSeg=_b[_d+1]||_b[0];}}};_pGraphicsPath._countSegs=function(){var _a=this._segments.length;return !this._closed&&_a>0?_a-1:_a;};_pGraphicsPath.on_drawShape=function(_a,_b){var _c=this._segments,_d=_c[0].point,_e,_f,_g=0;if(_c.length===0){return;}var _h=0;if(this._isOddStrokeWidth){_h=0.5;}function drawSegment_strokeMatrix(_i,_j,_k){var _l=_j.point,_m=_i.outVector,_n=_j.inVector;var _o=2,_p=2;_e[0]=_l.x;_e[1]=_l.y;if(_n&&!_n.isZero()){_e[_o++ ]=_n.x;_e[_o++ ]=_n.y;_p-=1;}if(_m&&!_m.isZero()){_e[_o++ ]=_m.x;_e[_o++ ]=_m.y;_p-=1;}_b._transformCoordinates(_e,0,_e,0,_o/2);if(_p!=0){if(!_k){_a.lineTo(parseInt(_e[0])+_h,parseInt(_e[1])+_h);}}else{_a.bezierCurveTo(parseInt(_e[4])+_h,parseInt(_e[5])+_h,parseInt(_e[2])+_h,parseInt(_e[3])+_h,parseInt(_e[0])+_h,parseInt(_e[1])+_h);}}function drawSegment(_i,_j,_k){var _l=_j.point,_m=_i.outVector,_n=_j.inVector;if(!(_m&&_n)||(_m.isZero()&&_n.isZero())){if(!_k){_a.lineTo(_l.x+_h,_l.y+_h);}}else{_a.bezierCurveTo(_m.x+_h,_m.y+_h,_n.x+_h,_n.y+_h,_l.x+_h,_l.y+_h);}}_a.beginPath();if(_b){_e=new Array(6);_e[0]=_d.x;_e[1]=_d.y;_b._transformCoordinates(_e,0,_e,0,1);_a.moveTo(parseInt(_e[0])+_h,parseInt(_e[1])+_h);for(_f=0,_g=_c.length-1;_f<_g;_f++ ){drawSegment_strokeMatrix(_c[_f],_c[_f+1],false);}if(this._closed){drawSegment_strokeMatrix(_c[_c.length-1],_c[0],true);_a.closePath();}}else{_a.moveTo(_d.x+_h,_d.y+_h);for(_f=0,_g=_c.length-1;_f<_g;_f++ ){drawSegment(_c[_f],_c[_f+1],false);}if(this._closed){drawSegment(_c[_c.length-1],_c[0],true);_a.closePath();}}};_pGraphicsPath._getSegPathData=function(_a,_b,_c,_d){var _e=_c.point,_f=_b.outVector,_g=_c.inVector,_h=nexacro._GraphicsLib.toStrFormatNumber;if(!(_f&&_g)||(_f.isZero()&&_g.isZero())){if(!_d){_a.push('L'+_h(_e.x)+','+_h(_e.y));}}else{_a.push('C'+_h(_f.x)+','+_h(_f.y)+' '+_h(_g.x)+','+_h(_g.y)+' '+_h(_e.x)+','+_h(_e.y));}};_pGraphicsPath._getCurrentSegment=function(_a){var _b=this._segments;if(_b.length==0){}return _b[_b.length-1];};_pGraphicsPath._getCurveBounds=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j,_k=[_a,_b,0,0,_c,_d],_l=[_a,_b],_m=[_a,_b],_n=new Array(2),_o=this._strokepadding;_j=[_g,_h,_e,_f,0,0];for(var _p=0;_p<2;_p++ ){this._calcCurve(_k[_p],_k[_p+4],_j[_p+2],_j[_p],_p,_o,_l,_m,_n);}if(!_i){_i=new nexacro.Rect(_l[0],_l[1],_m[0]-_l[0],_m[1]-_l[1]);}else{this._unionRect(_i,_l[0],_l[1],_m[0],_m[1]);}return _i;};_pGraphicsPath._calcCurve=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=3* (_b-_c)-_a+_d,_k=2* (_a+_c)-4* _b,_l=_b-_a,_m=nexacro._GraphicsLib.mathSolveQuadratic(_j,_k,_l,_i),_n=this._curvemin,_o=this._curvemax,_p,_q;this._calcCurveMinMax(_d,0,_e,_g,_h);for(var _r=0;_r<_m;_r++ ){_q=_i[_r];_p=1-_q;if(_n<_q&&_q<_o){this._calcCurveMinMax(_p* _p* _p* _a+3* _p* _p* _q* _b+3* _p* _q* _q* _c+_q* _q* _q* _d,_f,_e,_g,_h);}}};_pGraphicsPath._calcCurveMinMax=function(_a,_b,_c,_d,_e){var _f=_a-_b,_g=_a+_b;if(_f<_d[_c]){_d[_c]=_f;}if(_g>_e[_c]){_e[_c]=_g;}};_pGraphicsPath._intersectLineLine=function(_a,_b,_c,_d,_e){var _f=_d.x-_c.x,_g=_d.y-_c.y,_h=_b.x-_a.x,_i=_b.y-_a.y,_j=_f* (_a.y-_c.y)-_g* (_a.x-_c.x),_k=_h* (_a.y-_c.y)-_i* (_a.x-_c.x),_l=_g* _h-_f* _i;if(!nexacro._GraphicsLib.mathIsZero(_l)){var _m=_j/_l;var _n=_k/_l;if(0<=_m&&_m<=1&&0<=_n&&_n<=1){_e.x=_a.x+_m* (_b.x-_a.x);_e.y=_a.y+_m* (_b.y-_a.y);return true;}}return false;};_pGraphicsPath._intersectLineRectangle=function(_a,_b,_c,_d){var _e=nexacro.Point;var _f=_e.min(_c,_d);var _g=_e.max(_c,_d);var _h=new _e(_g.x,_f.y);var _i=new _e(_f.x,_g.y);var _j=new _e(),_k=new _e(),_l=new _e(),_m=new _e();var _n=this._intersectLineLine(_f,_h,_a,_b,_j);var _o=[];if(_n){_o.push(_j);}_n=this._intersectLineLine(_h,_g,_a,_b,_k);if(_n){_o.push(_k);}_n=this._intersectLineLine(_g,_i,_a,_b,_l);if(_n){_o.push(_l);}_n=this._intersectLineLine(_i,_f,_a,_b,_m);if(_n){_o.push(_m);}if(_o.length){return _o;}};_pGraphicsPath._intersectBezier3Line=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Point;var _i,_j,_k,_l;var _m,_n,_o,_p;var _q;var _r;var _s=_h.min(_e,_f);var _t=_h.max(_e,_f);_i=_a.multiply( -1);_j=_b.multiply(3);_k=_c.multiply( -3);_l=_i.add(_j.add(_k.add(_d)));_m=new _h(_l.x,_l.y);_i=_a.multiply(3);_j=_b.multiply( -6);_k=_c.multiply(3);_l=_i.add(_j.add(_k));_n=new _h(_l.x,_l.y);_i=_a.multiply( -3);_j=_b.multiply(3);_k=_i.add(_j);_o=new _h(_k.x,_k.y);_p=new _h(_a.x,_a.y);_r=new _h(_e.y-_f.y,_f.x-_e.x);_q=_e.x* _f.y-_f.x* _e.y;var _u=[];nexacro._GraphicsLib.mathSolveBezier(_r.dot(_m),_r.dot(_n),_r.dot(_o),_r.dot(_p)+_q,_u);for(var _ac=0;_ac<_u.length;_ac++ ){var _v=_u[_ac];if(0<=_v&&_v<=1){var _w=_a.lerp(_b,_v);var _x=_b.lerp(_c,_v);var _y=_c.lerp(_d,_v);var _z=_w.lerp(_x,_v);var _aa=_x.lerp(_y,_v);var _ab=_z.lerp(_aa,_v);if(_e.x==_f.x){if(_s.y<=_ab.y&&_ab.y<=_t.y){_g.push(_ab);}}else if(_e.y==_f.y){if(_s.x<=_ab.x&&_ab.x<=_t.x){_g.push(_ab);}}else if(_ab.gte(_s)&&_ab.lte(_t)){_g.push(_ab);}}}if(_g.length){return true;}return false;};_pGraphicsPath._intersectBezier3Rectangle=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Point;var _h=_g.min(_e,_f);var _i=_g.max(_e,_f);var _j=new _g(_i.x,_h.y);var _k=new _g(_h.x,_i.y);var _l=[],_m=[],_n=[],_o=[];var _p=this._intersectBezier3Line(_a,_b,_c,_d,_h,_j,_l);var _q=[];if(_p){_q=_q.concat(_l);}_p=this._intersectBezier3Line(_a,_b,_c,_d,_j,_i,_m);if(_p){_q=_q.concat(_m);}_p=this._intersectBezier3Line(_a,_b,_c,_d,_i,_k,_n);if(_p){_q=_q.concat(_n);}_p=this._intersectBezier3Line(_a,_b,_c,_d,_k,_h,_o);if(_p){_q=_q.concat(_o);}if(_q.length){return _q;}};_pGraphicsPath._getValues=function(_a,_b){var _c=_a.point;var _d=_b.point;var _e=_a.outVector;var _f=_b.inVector;if(!(_e&&_f)||(_e.isZero()&&_f.isZero())){return [_c.x,_c.y,_c.x,_c.y,_d.x,_d.y,_d.x,_d.y];}else{return [_c.x,_c.y,_e.x,_e.y,_f.x,_f.y,_d.x,_d.y];}};_pGraphicsPath._evaluate=function(_a,_b,_c){var _d=_a[0],_e=_a[1],_f=_a[2],_g=_a[3],_h=_a[4],_i=_a[5],_j=_a[6],_k=_a[7],_l,_m;if(_c===0&&(_b===0||_b===1)){_l=_b===0?_d:_j;_m=_b===0?_e:_k;}else{var _n=3* (_f-_d),_o=3* (_h-_f)-_n,_p=_j-_d-_n-_o,_q=3* (_g-_e),_r=3* (_i-_g)-_q,_s=_k-_e-_q-_r;if(_c===0){_l=((_p* _b+_o)* _b+_n)* _b+_d;_m=((_s* _b+_r)* _b+_q)* _b+_e;}else{var _t=this._curvemin;if(_b<_t&&_f==_d&&_g==_e||_b>1-_t&&_h==_j&&_i==_k){_l=_h-_f;_m=_i-_g;}else{_l=(3* _p* _b+2* _o)* _b+_n;_m=(3* _s* _b+2* _r)* _b+_q;}if(_c===3){var _u=6* _p* _b+2* _o,_v=6* _s* _b+2* _r;return (_l* _v-_m* _u)/Math.pow(_l* _l+_m* _m,3/2);}}}return _c==2?new nexacro.Point(_m, -_l):new nexacro.Point(_l,_m);};_pGraphicsPath._solveBezier=function(_a,_b,_c,_d){var _e=_a[_b],_f=_a[_b+2],_g=_a[_b+4],_h=_a[_b+6],_i=3* (_f-_e),_j=3* (_g-_f)-_i,_k=_h-_e-_i-_j;return nexacro._GraphicsLib.mathSolveBezier(_k,_j,_i,_e-_c,_d);};_pGraphicsPath._getParameterOf=function(_a,_b,_c){var _d=this._curvemin;if(Math.abs(_a[0]-_b)<_d&&Math.abs(_a[1]-_c)<_d){return 0;}if(Math.abs(_a[6]-_b)<_d&&Math.abs(_a[7]-_c)<_d){return 1;}var _e=[],_f=[],_g=this._solveBezier(_a,0,_b,_e),_h=this._solveBezier(_a,1,_c,_f),_i,_j;for(var _k=0;_g== -1||_k<_g;){if(_g== -1||(_i=_e[_k++ ])>=0&&_i<=1){for(var _l=0;_h== -1||_l<_h;){if(_h== -1||(_j=_f[_l++ ])>=0&&_j<=1){if(_g== -1){_i=_j;}else if(_h== -1){_j=_i;}if(Math.abs(_i-_j)<_d){return (_i+_j)* 0.5;}}}if(_g== -1){break;}}}return null;};_pGraphicsPath._changesOrientation=function(_a,_b){return this._evaluate(_b,1,1).y* _a.y>0;};_pGraphicsPath._getAngle=function(_a){return this._getAngleInRadians.apply(this,arguments)* 180/Math.PI;};_pGraphicsPath._getAngleInRadians=function(_a){if(arguments.length==1){return Math.atan2(_a.y,_a.x);}else{var _b=arguments[1];if(!(_b instanceof nexacro.Point)){_b=new nexacro.Point( +arguments[1], +arguments[2]);}var _c=this.getLength()* _b.getLength();if(_c===0){return NaN;}else{return Math.acos(this.dot(_b)/_c);}}};_pGraphicsPath._getCrossings=function(_a,_b,_c,_d,_e){var _f=this._solveBezier(_a,1,_d,_e),_g=0,_h=this._curvemin;if(_f=== -1){_e[0]=this._getParameterOf(_a,_c,_d);_f=_e[0]!==null?1:0;}for(var _m=0;_m<_f;_m++ ){var _i=_e[_m];if(_i> -_h&&_i<1-_h){var _j=this._evaluate(_a,_i,0);if(_c<_j.x+_h){var _k=this._evaluate(_a,_i,1);if(Math.abs(_j.x-_c)<_h){var _l=this._getAngle(_k);if(_l> -180&&_l<0&&(_i>_h||this._changesOrientation(_k,_b))){continue;}}else{if(Math.abs(_k.y)<_h||_i<_h&&!this._changesOrientation(_k,_b)){continue;}}_g++ ;}}}return _g;};delete _pGraphicsPath;}if(!nexacro.GraphicsLine){nexacro.GraphicsLine=function(){nexacro._GraphicsObject.prototype.constructor.apply(this,arguments);this._type="Line";var _a=[];var _b={};_b={point:new nexacro.Point(0,0),nextSeg:null};_a.push(_b);_b={point:new nexacro.Point(0,0),nextSeg:null};_a.push(_b);this._segments=[];this._add(_a);};var _pGraphicsLine=nexacro.GraphicsLine.prototype=nexacro._createPrototype(nexacro._GraphicsObject,nexacro.GraphicsLine);_pGraphicsLine._type_name="GraphicsLine";_pGraphicsLine.x1=0;_pGraphicsLine.y1=0;_pGraphicsLine.x2=0;_pGraphicsLine.y2=0;_pGraphicsLine._strokepadding=0;_pGraphicsLine._closed=false;_pGraphicsLine.set_x1=function(_a){if(!nexacro._isNumber(_a)){return;}var _b=this._segments;if(_b[0].point.x!=_a){_b[0].point.x=_a;this.x1=_a;this._drawflags|=4;}};_pGraphicsLine.set_y1=function(_a){if(!nexacro._isNumber(_a)){return;}var _b=this._segments;if(_b[0].point.y!=_a){_b[0].point.y=_a;this.y1=_a;this._drawflags|=4;}};_pGraphicsLine.set_x2=function(_a){if(!nexacro._isNumber(_a)){return;}var _b=this._segments;if(_b[1].point.x!=_a){_b[1].point.x=_a;this.x2=_a;this._drawflags|=4;}};_pGraphicsLine.set_y2=function(_a){if(!nexacro._isNumber(_a)){return;}var _b=this._segments;if(_b[1].point.y!=_a){_b[1].point.y=_a;this.y2=_a;this._drawflags|=4;}};_pGraphicsLine.destroy=function(){this.x1=null;this.x1=null;this.x2=null;this.y2=null;delete this._segments;this._segments=null;this._strokepadding=null;this._strokejoin=null;this._closed=null;nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsLine.on_apply_Segments=function(){};_pGraphicsLine.on_drawShape=function(_a,_b){var _c=this._segments,_d=_c[0].point,_e,_f,_g=0;if(_c.length===0){return;}var _h=0;if(this._isOddStrokeWidth){_h=0.5;}function drawSegment_strokeMatrix(_i,_j,_k){var _l=_j.point;var _m=2;_e[0]=_l.x;_e[1]=_l.y;_b._transformCoordinates(_e,0,_e,0,_m/2);if(!_k){_a.lineTo(parseInt(_e[0])+_h,parseInt(_e[1])+_h);}}function drawSegment(_i,_j,_k){var _l=_j.point;if(!_k){_a.lineTo(_l.x+_h,_l.y+_h);}}_a.beginPath();if(_b){_e=new Array(6);_e[0]=_d.x;_e[1]=_d.y;_b._transformCoordinates(_e,0,_e,0,1);_a.moveTo(parseInt(_e[0])+_h,parseInt(_e[1])+_h);for(_f=0,_g=_c.length-1;_f<_g;_f++ ){drawSegment_strokeMatrix(_c[_f],_c[_f+1],false);}}else{_a.moveTo(_d.x+_h,_d.y+_h);for(_f=0,_g=_c.length-1;_f<_g;_f++ ){drawSegment(_c[_f],_c[_f+1],false);}}};_pGraphicsLine.isHitTest=function(_a,_b){var _c=new nexacro.Point( +arguments[0], +arguments[1]);_c=this._globalMatrix._inverseTransform(_c);var _d=2;var _e=this._strokewidth/2;return this._getStrokeCross(Math.max(_d,_e),_c);};_pGraphicsLine.isPointInPath=function(_a,_b,_c){var _d=new nexacro.Point( +arguments[0], +arguments[1]);if(!nexacro._isNumber(_c)){return this.isHitTest(_d);}else{return this._getStrokeCross(_c,_d);}};_pGraphicsLine.hasSegments=function(){return this.on_hasSegments();};_pGraphicsLine.on_hasSegments=function(){return !(this._segments.length===0);};_pGraphicsLine.on_IsNotDraw=function(){return !this.hasSegments();};_pGraphicsLine._getStrokeCross=function(_a,_b){var _c=this._segments,_d,_e=0,_f=_a/2;if(_c.length===0){return null;}var _g=new nexacro.Rect(_b.x-_f,_b.y-_f,_a,_a);var _h=_c[0].point.clone(),_i=[],_j,_k;var _l=new nexacro.Point(_g.left,_g.top),_m=new nexacro.Point(_g.getRight(),_g.getBottom());while(_d<4){_i[_d]=new nexacro.Point();_d++ ;}_i[0].x=_h.x;_i[0].y=_h.y;for(_d=0,_e=_c.length-1;_d<_e;_d++ ){_k=_c[_d+1];_j=_k.point;_i[1].x=_j.x;_i[1].y=_j.y;if(this._intersectLineRectangle(_i[0],_i[1],_l,_m)){return true;}}return false;};_pGraphicsLine._intersectLineLine=function(_a,_b,_c,_d,_e){var _f=_d.x-_c.x,_g=_d.y-_c.y,_h=_b.x-_a.x,_i=_b.y-_a.y,_j=_f* (_a.y-_c.y)-_g* (_a.x-_c.x),_k=_h* (_a.y-_c.y)-_i* (_a.x-_c.x),_l=_g* _h-_f* _i;if(!nexacro._GraphicsLib.mathIsZero(_l)){var _m=_j/_l;var _n=_k/_l;if(0<=_m&&_m<=1&&0<=_n&&_n<=1){_e.x=_a.x+_m* (_b.x-_a.x);_e.y=_a.y+_m* (_b.y-_a.y);return true;}}return false;};_pGraphicsLine._intersectLineRectangle=function(_a,_b,_c,_d){var _e=nexacro.Point;var _f=_e.min(_c,_d);var _g=_e.max(_c,_d);var _h=new _e(_g.x,_f.y);var _i=new _e(_f.x,_g.y);var _j=new _e(),_k=new _e(),_l=new _e(),_m=new _e();var _n=this._intersectLineLine(_f,_h,_a,_b,_j);var _o=[];if(_n){_o.push(_j);}_n=this._intersectLineLine(_h,_g,_a,_b,_k);if(_n){_o.push(_k);}_n=this._intersectLineLine(_g,_i,_a,_b,_l);if(_n){_o.push(_l);}_n=this._intersectLineLine(_i,_f,_a,_b,_m);if(_n){_o.push(_m);}if(_o.length){return _o;}};_pGraphicsLine._add=function(_a,_b){var _c=this._segments,_d=_b==null;_b=_d?_c.length:_b;if(_d){_c.push.apply(_c,_a);}else{_c.splice.apply(_c,[_b,0].concat(_a));}this._drawflags|=4;return _a;};_pGraphicsLine.on_getRect=function(_a,_b){var _c=this._rect;var _d=this._strokecap||"butt";var _e=this._segments;var _f=false;var _g=false;var _h=false;var _i=0;var _j=0;function getDistance(_ae,_af,_ag,_ah){var _ai=Math.sqrt((_ag-_ae)* (_ag-_ae)+(_ah-_af)* (_ah-_af));return _ai;}function getUnitVector(_ae,_r){var _k={x:0,y:0};if(_ae.x-_r.x==0&&_ae.y-_r.y==0){return _k;}var _af=_ae.x-_r.x;var _ag=_ae.y-_r.y;var _ah=getDistance(_ae.x,_ae.y,_r.x,_r.y);_k.x=_af/_ah;_k.y=_ag/_ah;return _k;}if((this.x1==this.x2)||(this.y1==this.y2)){_f=true;if(_f){if(this.x1==this.x2){_g=true;}if(this.y1==this.y2){_h=true;}_a=true;}}if(_b){_c=null;}if(!_c){for(_i=0,_j=_e.length;_i<_j;_i++ ){if(_i==0||_i==_e.length-1){_e[_i]._miterval=0;_e[_i]._miterval=this._getStrokeWidth()/2;_e[_i]._miterval+=1;continue;}}if(_e.length===0){_c=new nexacro.Rect();this._rect=_c;return _c;}var _k=_e[0].point,_l,_m,_n,_o;var _p=_k.x;var _q=_k.y;for(_i=0,_j=_e.length-1;_i<_j;_i++ ){_m=_e[_i+1];_l=_m.point;_n=_l.x;_o=_l.y;if(!_c){_c=new nexacro.Rect(Math.min(_p,_n),Math.min(_q,_o),Math.max(_p,_n)-Math.min(_p,_n),Math.max(_q,_o)-Math.min(_q,_o));}else{this._unionRect(_c,Math.min(_p,_n),Math.min(_q,_o),Math.max(_p,_n),Math.max(_q,_o));}_p=_n;_q=_o;}if(!_c){_c=new nexacro.Rect();this._rect=_c;if(_a){_c=_c.expand(this._getStrokeWidth()/2);}return _c;}if(!_b){this._rect=_c;}}if(_a){var _r={x:0,y:0};var _s={x:_c.getCenterPoint().x,y:_c.getCenterPoint().y};var _t;var _u=_c.left;var _v=_c.top;var _w=_c.right;var _x=_c.bottom;var _y;var _z;for(_i=0,_j=_e.length;_i<_j;_i++ ){var _aa=_e[_i];_r.x=_aa.point.x;_r.y=_aa.point.y;_t=getUnitVector(_r,_s);var _ab=Math.abs(_t.x);var _ac=Math.abs(_t.y);_t.x=Math.max(_ab,_ac);_t.y=Math.max(_ab,_ac);var _ad;if(_c.left==_aa.point.x){_ad=_aa._miterval;if(_d=="butt"&&_h){_ad=1;}_y=_r.x+_t.x* _ad;_y=_y-_c.left;_u=_c.left-Math.abs(_y);}if(_c.top==_aa.point.y){_ad=_aa._miterval;if(_d=="butt"&&_g){_ad=1;}_z=_r.y+_t.y* _ad;_z=_z-_c.top;_v=_c.top-Math.abs(_z);}if(_c.right==_aa.point.x){_ad=_aa._miterval;if(_d=="butt"&&_h){_ad=1;}_y=_r.x+_t.x* _ad;_y=_y-_c.right;_w=_c.right+Math.abs(_y);}if(_c.bottom==_aa.point.y){_ad=_aa._miterval;if(_d=="butt"&&_g){_ad=1;}_z=_r.y+_t.y* _ad;_z=_z-_c.bottom;_x=_c.bottom+Math.abs(_z);}}_c.set(_u,_v,_w-_u,_x-_v);}return _c;};_pGraphicsLine._unionRect=function(_a,_b,_c,_d,_e){var _f=Math.min(_a.left,_b);var _g=Math.min(_a.top,_c);var _h=Math.max(_a.getRight(),_d);var _i=Math.max(_a.getBottom(),_e);_a.left=_f;_a.top=_g;_a.width=_h-_f;_a.height=_i-_g;};_pGraphicsLine._countSegs=function(){var _a=this._segments.length;return !this._closed&&_a>0?_a-1:_a;};delete _pGraphicsLine;}if(!nexacro.GraphicsGroup){nexacro.GraphicsGroup=function(){this._childchanged=0;nexacro._GraphicsObject.prototype.constructor.apply(this,arguments);};var _pGraphicsGroup=nexacro.GraphicsGroup.prototype=nexacro._createPrototype(nexacro._GraphicsObject,nexacro.GraphicsGroup);_pGraphicsGroup._type="Group";_pGraphicsGroup._type_name="GraphicsGroup";_pGraphicsGroup.destroy=function(){this.clear();this._childchanged=null;nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsGroup.clear=function(){var _a=this._firstchild,_b=false,_c=[];for(;_a;_a=_a._nextsibling){_c[_c.length]=_a;}for(var _f=0,_g=_c.length;_f<_g;_f++ ){_a=_c[_f];_a._remove(true);_a.parent=null;_a._parent=null;_a._nextsibling=null;_a._previoussibling=null;_b=true;}this._childidx_map.clear();this.childlength=0;if(_b){this._firstchild._isfirstchild=false;this._firstchild=null;this._childchanged++ ;this._drawflags|=4;var _d=this.on_getOwnerLayer();if(_d){_d.on_TreeChanged();}var _e=this._childListCache;if(_e){_e.fchild=null;_e.fchildindex= -1;_e.flength= -1;}}};_pGraphicsGroup.getObjectByID=function(_a){if(!_a){return null;}return this._getItemById(_a);};_pGraphicsGroup.getObjects=function(){if(this._firstchild){var _a=this._children;if(!_a||(_a._changed!=this._childchanged)){_a=[];var _b=this._firstchild,_c=0;for(;_b!=null;_b=_b._nextsibling){_a[_c]=_b;_c++ ;}this._children=_a;_a._changed=this._childchanged;}return _a;}};_pGraphicsGroup.getFirstChild=function(){return this._firstchild;};_pGraphicsGroup.getLastChild=function(){var _a=this._firstchild;return _a?_a._previoussibling:null;};_pGraphicsGroup.insertChild=function(_a,_b,_c){var _d=null;_d=this._childidx_map.getItem(_a);if(_d!==undefined&&_d!==null){return this.on_insertBefore(_c,_b,_d);}else{return this.on_insertBefore(_c,_b,null);}};_pGraphicsGroup.addChild=function(_a,_b){return this.on_insertBefore(_b,_a,null);};_pGraphicsGroup.removeChild=function(_a){var _b=this.getObjectByID(_a);if(_b){return this.on_removeChild(_b);}else{return null;}};_pGraphicsGroup.indexOf=function(_a){var _b=this.getObjectByID(_a);if(_b){if(this._childidx_map&&this._childidx_map.length>0){return this._childidx_map.indexOf(_a);}}else{return  -1;}};_pGraphicsGroup.hasChild=function(){return this.on_hasChild();};_pGraphicsGroup.on_hasChild=function(){return (this._firstchild!=null);};_pGraphicsGroup.on_IsNotDraw=function(){return !this.hasChild();};_pGraphicsGroup.on_draw=function(_a){this._painted=1;};_pGraphicsGroup.on_getRect=function(_a,_b){var _c=this._firstchild;if(!_c){return new nexacro.Rect();}var _d=this._rect;if(_b){_d=null;}if(!_d){var _e=Infinity,_f= -_e,_g=_e,_h=_f;for(;_c!=null;_c=_c._nextsibling){if(_c.visible&&!_c.on_IsNotDraw()){_d=_c._getBoundRect(false,_b);_e=Math.min(_d.left,_e);_g=Math.min(_d.top,_g);_f=Math.max(_d.left+_d.width,_f);_h=Math.max(_d.top+_d.height,_h);}}_d=isFinite(_e)?new nexacro.Rect(_e,_g,_f-_e,_h-_g):new nexacro.Rect();if(!_b){this._rect=_d;}}return _d;};delete _pGraphicsGroup;}if(!nexacro.GraphicsPaths){nexacro.GraphicsPaths=function(){nexacro.GraphicsGroup.prototype.constructor.apply(this,arguments);var _a=arguments[this.__readArgs];this._childchanged=0;if(nexacro._isArray(_a)){this._addChildren(_a);}};var _pGraphicsPaths=nexacro.GraphicsPaths.prototype=nexacro._createPrototype(nexacro.GraphicsGroup,nexacro.GraphicsPaths);_pGraphicsPaths._type_name="GraphicsPaths";_pGraphicsPaths._type="Paths";_pGraphicsPaths.strokepen="";_pGraphicsPaths.fillstyle="";_pGraphicsPaths.fillgradation="";_pGraphicsPaths.strokejoin="miter";_pGraphicsPaths.strokecap="";_pGraphicsPaths.miterlimit=10;_pGraphicsPaths.opacity=1;_pGraphicsPaths.set_strokepen=function(_a){nexacro._GraphicsObject.prototype.set_strokepen.call(this,_a);var _b=this._firstchild;for(;_b;_b=_b._nextsibling){if(!_b._style.strokepen){_b._strokewidth=this._strokewidth;_b._isOddStrokeWidth=this._isOddStrokeWidth;_b._bounds=null;_b._globalBounds=null;}}};_pGraphicsPaths.set_fillstyle=function(_a){nexacro._GraphicsObject.prototype.set_fillstyle.call(this,_a);};_pGraphicsPaths.set_strokejoin=function(_a){nexacro._GraphicsObject.prototype.set_strokejoin.call(this,_a);if(this._strokeloin){var _b=this._firstchild;for(;_b;_b=_b._nextsibling){if(!_b._style.strokejoin){_b._strokejoin=this._strokejoin;_b._bounds=null;_b._globalBounds=null;_b._drawflags|=8;_b._drawflags|=4;}}}};_pGraphicsPaths.set_strokecap=function(_a){nexacro._GraphicsObject.prototype.set_strokecap.call(this,_a);if(this._strokecap){var _b=this._firstchild;for(;_b;_b=_b._nextsibling){if(!_b._style.strokecap){_b._strokecap=this._strokecap;_b._bounds=null;_b._globalBounds=null;_b._drawflags|=8;_b._drawflags|=4;}}}};_pGraphicsPaths.set_miterlimit=function(_a){nexacro._GraphicsObject.prototype.set_miterlimit.call(this,_a);if(this._miterlimit){var _b=this._firstchild;for(;_b;_b=_b._nextsibling){if(!_b._style.miterlimit){_b._miterlimit=this._miterlimit;_b._bounds=null;_b._globalBounds=null;_b._drawflags|=8;_b._drawflags|=4;}}}};_pGraphicsPaths.set_opacity=function(_a){nexacro._GraphicsObject.prototype.set_opacity.call(this,_a);var _b=this._firstchild;for(;_b;_b=_b._nextsibling){if(!_b._style.opacity){_b._opacity=this._opacity;_b._drawflags|=8;_b._drawflags|=4;}}};_pGraphicsPaths.destroy=function(){this.clear();nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsPaths.insertChild=function(_a,_b,_c){var _d=null;if(_c&&_c._type=="Path"){_d=this._childidx_map.getItem(_a);if(_d!==undefined&&_d!==null){return this.on_insertBefore(_c,_b,_d);}else{return this.on_insertBefore(_c,_b,null);}}else{return  -1;}};_pGraphicsPaths.addChild=function(_a,_b){if(_b&&_b._type=="Path"){return this.on_insertBefore(_b,_a,null);}else{return  -1;}};_pGraphicsPaths._getFirstSegment=function(){var _a=this.getFirstChild();return _a&&_a._getFirstSegment();};_pGraphicsPaths._getLastSegment=function(){var _a=this.getLastChild();return _a&&_a._getLastSegment();};_pGraphicsPaths._moveTo=function(){var _a=new nexacro.GraphicsPath();var _b=this.id+"_path"+this.childlength;this.addChild(_b,_a);_a.moveTo.apply(_a,arguments);};_pGraphicsPaths._lineTo=function(){var _a=this._getCurrentPath();_a.lineTo.apply(_a,arguments);};_pGraphicsPaths._quadraticCurveTo=function(){var _a=this._getCurrentPath();_a.quadraticCurveTo.apply(_a,arguments);};_pGraphicsPaths._bezierCurveTo=function(){var _a=this._getCurrentPath();_a.bezierCurveTo.apply(_a,arguments);};_pGraphicsPaths._arcTo=function(){var _a=this._getCurrentPath();_a.arcTo.apply(_a,arguments);};_pGraphicsPaths.closePath=function(){if(this._getCurrentPath()){this._getCurrentPath().closePath();}};_pGraphicsPaths.getPathData=function(){var _a=this._firstchild,_b=[];for(;_a;_a=_a._nextsibling){_b.push(_a.getPathData());}return _b.join(' ');};_pGraphicsPaths.setPathData=function(_a){var _b=nexacro.Point;var _c=_a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),_d,_e,_f=false,_g,_h,_i=new nexacro.Point();function getCoord(_p,_o,_q){var _r=parseFloat(_d[_p]);if(_f){_r+=_i[_o];}if(_q){_i[_o]=_r;}return _r;}function getPoint(_p,_q){return new _b(getCoord(_p,'x',_q),getCoord(_p+1,'y',_q));}this.clear();if(!_c){return;}for(var _p=0,_q=_c.length;_p<_q;_p++ ){var _j=_c[_p],_k=_j[0],_l,_m=_k.toLowerCase();_d=_j.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);_f=_k===_m;var _n=_d&&_d.length;switch(_m){case 'm':case 'l':for(_l=0;_l<_n;_l+=2){_e=getPoint(_l,true);this[_l===0&&_m==='m'?'_moveTo':'_lineTo'](_e.x,_e.y);}break;case 'h':case 'v':var _o=_m=='h'?'x':'y';for(_l=0;_l<_n;_l++ ){getCoord(_l,_o,true);this._lineTo(_i.x,_i.y);}break;case 'c':for(_l=0;_l<_n;_l+=6){_e=getPoint(_l);_g=getPoint(_l+2);_h=getPoint(_l+4,true);this._bezierCurveTo( +_e.x, +_e.y, +_g.x, +_g.y, +_h.x, +_h.y);}break;case 's':for(_l=0;_l<_n;_l+=4){_e=_i.multiply(2).subtract(_g);_g=getPoint(_l);_h=getPoint(_l+2,true);this._bezierCurveTo( +_e.x, +_e.y, +_g.x, +_g.y, +_h.x, +_h.y);}break;case 'q':for(_l=0;_l<_n;_l+=4){_g=getPoint(_l);_h=getPoint(_l+2,true);this._quadraticCurveTo( +_g.x, +_g.y, +_h.x, +_h.y);}break;case 't':for(_l=0;_l<_n;_l+=2){_g=_i.multiply(2).subtract(_g);_h=getPoint(_l,true);this._quadraticCurveTo( +_g.x, +_g.y, +_h.x, +_h.y);}break;case 'a':for(_l=0;_l<_n;_l+=7){_i=getPoint(_l+5);this._arcTo( +_i.x, +_i.y, +_d[0], +_d[1], +_d[2], +_d[4], +_d[3]);}break;case 'z':this.closePath();break;}}};_pGraphicsPaths.on_draw=function(_a){this._painted=1;};_pGraphicsPaths._addChildren=function(_a){if(!nexacro._isArray(_a)||!_a.length){return false;}var _b,_c=_a.length-1;if(!this._firstchild){this._firstchild=_a[0];_a[0]._isfirstchild=true;this._childidx_map.add_item(_a[0].id,_a[0]);for(_b=0;_b<_c;_b++ ){_a[_b]._nextsibling=_a[_b+1];_a[_b+1]._previoussibling=_a[_b];this._childidx_map.add_item(_a[_b+1].id,_a[_b+1]);}_a[0]._previoussibling=_a[_a.length-1];}else{var _d=this._firstchild._previoussibling;_d._nextsibling=_a[0];_a[0]._previoussibling=_d;this._childidx_map.add_item(_a[0].id,_a[0]);for(_b=0;_b<_c;_b++ ){_a[_b]._nextsibling=_a[_b+1];_a[_b+1]._previoussibling=_a[_b];this._childidx_map.add_item(_a[_b+1].id,_a[_b+1]);}this._firstchild._previoussibling=_a[_a.length-1];}this.childlength+=_a.length;this._childchanged++ ;this._drawflags|=4;var _e=this.on_getOwnerLayer();if(_e){_e.on_TreeChanged();}var _f=this._childListCache;if(_f){if(_f.flength!= -1){_f.flength+=_a.length;}if(_f.fchildindex!= -1){_f.fchildindex= -1;}}};_pGraphicsPaths.on_updateStyles=function(_a,_b){var _c=this._firstchild;var _d=this._style;var _e=null;for(;_c;_c=_c._nextsibling){_e=_c._renderstyle;if(!_e){_e={};_c._renderstyle=_e;}if(this._style.strokepen&&!_c._style.strokepen){_c._updateStrokePen(_d.strokepen,_e);}if((this._style.fillstyle||(_b&&this._isGradation))&&!_c._style.fillstyle){_c._updateFill(_d.fillstyle,_e,_a);}if(!_c._style.strokejoin){_c._updateStrokeJoin(_d.strokejoin,_e);}if(this._style.strokecap&&!_c._style.strokecap){_c._updateStrokeCap(_d.strokecap,_e);}if(!_c._style.miterlimit){_e._miterlimit=parseInt(this.miterlimit||10);}}_a.setElementGlobalAlpha(this._globalAlpha);this._changedStrokepen=false;this._changedFillstyle=false;this._changedStrokejoin=false;this._changedStrokecap=false;this._changedMiterlimit=false;};_pGraphicsPaths.removeChild=function(_a){var _b=this.getObjectByID(_a);if(_b){_b=this.on_removeChild(_b);if(_b){_b._drawflags|=8;_b._renderstyle=null;var _c=this._style;if(_c.strokepen){_b._changedStrokepen=true;}if(_c.fillstyle){_b._changedFillstyle=true;}if(_c.strokejoin){_b._changedStrokejoin=true;}if(_c.strokecap){this._changedStrokecap=true;}if(_c.miterlimit){this._changedMiterlimit=true;}}return _b;}else{return null;}};_pGraphicsPaths.on_insertBefore=function(_a,_b,_c){var _d=nexacro._GraphicsObject.prototype.on_insertBefore.apply(this,[_a,_b,_c]);if(_d>=0){this._drawflags|=8;if(this._style.strokepen&&!_a._style.strokepen){_a._strokewidth=this._strokewidth;}if(!_a._style.miterlimit){_a._miterlimit=this._miterlimit||10;}if(!_a._style.strokecap){_a._strokecap=this._strokecap||"butt";}if(!_a._style.strokejoin){_a._strokejoin=this._strokejoin||"miter";}if(this._style.opacity&&!_a._style.opacity){_a._opacity=nexacro.OpacityObject(this._opacity.value);}}return _d;};_pGraphicsPaths._getCurrentPath=function(){var _a=this._getLength();if(!_a){trace("getCurrentPath error length = 0. Use a moveTo() command first");return;}return this.getChildByIndex(_a-1);};_pGraphicsPaths.getChildByIndex=function(_a){if(this._firstchild){var _b=this._children;if(_b&&(_b._changed==this._childchanged)){return _b[_a];}return this._getChildByIndex(_a);}};_pGraphicsPaths._getLength=function(){if(this._firstchild){var _a=this._children;if(_a&&(_a._changed==this._childchanged)){return _a.length;}return this._getChildrenLength();}return 0;};_pGraphicsPaths._getChildrenLength=function(){var _a=this._childListCache;if(!_a){var _b=this._firstchild;if(!_b){return 0;}if(_b==this.getLastChild()){return 1;}_a={flength: -1,fchildindex: -1,fchild:null,fowner:this};this._childListCache=_a;}if(_a.flength== -1){var _c,_d;if(_a.fchildindex!= -1&&_a.fchild!=null){_c=_a.fchildindex;_d=_a.fchild;}else{_d=this._firstchild;_c=0;}while(_d){_c++ ;_d=_d._nextsibling;}_a.flength=_c;}return _a.flength;};_pGraphicsPaths._getChildByIndex=function(_a){var _b=this._childListCache;if(!_b){if(this._firstchild==this.getLastChild()){return _a==0?this._firstchild:null;}_b={flength: -1,fchildindex: -1,fchild:null,fowner:this};this._childListCache=_b;}var _c=_b.fchildindex;var _d=_b.fchild;var _e=true;if(_c!= -1&&_d!=null){_e=false;if(_c<_a){while(_c<_a&&_d){_c++ ;_d=_d._nextsibling;}}else if(_c>_a){while(_c>_a&&_d){_c-- ;_d=_d.getPreviousSibling();}}}else{if(_a<0){return null;}_d=this._firstchild;for(_c=0;_c<_a&&_d;_c++ ){_d=_d._nextsibling;}}if(!_e&&(_d==this._firstchild||_d==this.getLastChild())){_b.fchildindex= -1;_b.fchild=null;}else{_b.fchildindex=_c;_b.fchild=_d;}return _d;};delete _pGraphicsPaths;}if(!nexacro._GraphicsLayer){nexacro._GraphicsLayer=function(){nexacro._GraphicsHashMap.getHashKey("ge",this);this._dirtyRectsMgr=new nexacro._GraphicsRectsManager();this._totalItems=[];this._childidx_map=new nexacro.Collection();};var _pGraphicsLayer=nexacro._GraphicsLayer.prototype=nexacro._createPrototype(nexacro.GraphicsGroup,nexacro._GraphicsLayer);_pGraphicsLayer._type_name="_GraphicsLayer";_pGraphicsLayer.childlength=0;_pGraphicsLayer._type="Layer";_pGraphicsLayer._renderHint="all";_pGraphicsLayer._level=0;_pGraphicsLayer._treechange=0;_pGraphicsLayer._childchanged=0;_pGraphicsLayer.getAllObjects=function(){var _a=this._totalItems;if(!_a||!_a.length||(this._treechange!=_a._treechange)){var _b=0;var _c=this._firstchild;_a=[];for(;_c;_c=_c._nextsibling){_c._index=_b;this._getAllObjects(_a,_c,1);_b++ ;}this._totalItems=_a;_a._treechange=this._treechange;}return _a;};_pGraphicsLayer.on_removeParent=function(){};_pGraphicsLayer.destroy=function(){this.clear();var _a,_b;var _c=this.getAllObjects();for(_a=0;_a<_c.length;_a++ ){_b=_c[_a];if(_b){_b.destroy();}}this._dirtyRectsMgr=null;this._totalItems=null;this._quadtree=null;if(this._canvas){this._canvas.destroy();this._canvas=null;}nexacro._GraphicsObject.prototype.destroy.call(this);};_pGraphicsLayer.hitTest=function(_a){var _b=new nexacro.Rect(_a.x-1,_a.y-1,3,3);var _c=this._hitTestItems(this,_a,_b);if(this!=_c){return _c;}return null;};_pGraphicsLayer.hitTestAll=function(_a){var _b=[];var _c=new nexacro.Rect(_a.x-1,_a.y-1,3,3);this._hitTestAllItems(this,_a,_c,_b);return _b;};_pGraphicsLayer._beforePaint=function(){if(this._renderHint=="all"){this._beforeDrawAll(this._totalItems);}else{this._beforeDrawDirty(this._totalItems);}};_pGraphicsLayer._paint=function(){var _a=this.getAllObjects();if(this._renderHint=="all"){this._drawAll(_a);}else{this._drawDirty(_a);}this._setQuadTree(_a);};_pGraphicsLayer._beforeDrawAll=function(_a){var _b,_c;for(var _e=_a.length-1;_e> -1;_e-- ){_b=_a[_e];if(_b._painting&1){_c=_b._jobDrawflags;if(_c&(1|2|4)){if(_c&1){_b._bounds=null;_b._globalBounds=null;}if(_c&(2|4)){_b._bounds=null;_b._globalBounds=null;_b._rect=null;}var _d=_b._parent;if(_d&&!(_d._jobDrawflags&4)){if(_d==this){_d._rect=null;}else{_d._jobDrawflags|=4;}}_b._sizeChanged=true;}}}};_pGraphicsLayer._drawAll=function(_a){var _b=this.parent._drawflags;var _c=this._canvas;if(!_c.handle){_c.create();}else if(!(_b&2)){_c.clearRect(0,0,_c.width,_c.height);}_c.save();if(this._matrix){var _d=this._getCanvasRect();_c.translate( -_d.left, -_d.top);}var _e;for(var _f=0,_g=_a.length;_f<_g;_f++ ){_e=_a[_f];if(_e._painting&1){if(_e._jobDrawflags&8){_e.on_updateStyles(_c,_e._sizeChanged);_e._sizeChanged=false;}_e.on_draw(_c);}else{_e._painted=0;}}_c.restore();this._dirtyRectsMgr.clear();};_pGraphicsLayer._beforeDrawDirty=function(_a){var _b,_c,_d,_e,_f;var _g,_h;for(var _j=_a.length-1;_j> -1;_j-- ){_b=_a[_j];_f=_b._parent;if(_b._painting&1){_d=false;_e=false;_c=_b._jobDrawflags;if(_c&(1|2|4)){if(_c&1){_b._bounds=null;_b._globalBounds=null;_e=true;}if(_c&(2|4)){_b._bounds=null;_b._globalBounds=null;_b._rect=null;_d=true;}if(_e){_g=_b._oldGlobalBounds;_h=_b._getGlobalBoundRect();if(_g){this._addDirty(_g,_b);}this._addDirty(_h,_b);}else if(_d){if(_b._type=="Group"||_b._type=="Paths"){if(_b._painted&(2|4)){_g=_b._oldGlobalBounds;if(_g){this._addDirty(_g,_b);}}var _i=_b._style;if(_i&&(_i._fillcolor||_i._strokecolor)){_h=_b._getGlobalBoundRect();this._addDirty(_h,_b);}}else{_g=_b._oldGlobalBounds;_h=_b._getGlobalBoundRect();if(_g){this._addDirty(_g,_b);}this._addDirty(_h,_b);}}if(_f&&!(_f._jobDrawflags&4)){if(_f==this){_f._rect=null;}else{_f._jobDrawflags|=4;}}_b._sizeChanged=_d;_b._painting|=4;}else if((_c&8)||_b._newDraw){_b._painting|=4;this._addDirty(_b._getGlobalBoundRect(),_b);}}else if(_b._painting&2){if(_b._painted&(2|4)){this._addDirty(_b._oldGlobalBounds,_b);}}}};_pGraphicsLayer._drawDirty=function(_a){if(this._applyRendering){return;}this._applyRendering=true;var _b=this._dirtyRectsMgr;var _c=this;var _d=this._canvas;if(!_d.handle){_d.create();}_b.mergeRects(10000,10);_d.save();_d.beginPath();var _e=_b._bounds;if(nexacro._Browser=="Runtime"){if(_e){_d.clearRect(_e.left,_e.top,_e.width,_e.height);_c._setItemsInDirtyRect(_c,_e);_d.rect(_e.left,_e.top,_e.width,_e.height);}}else{_b.Each(function(_g){_d.clearRect(_g.left,_g.top,_g.width,_g.height);_c._setItemsInDirtyRect(_c,_g);_d.rect(_g.left,_g.top,_g.width,_g.height);});}_d.clip();var _f;for(var _g=0,_h=_a.length;_g<_h;_g++ ){_f=_a[_g];_d.setElementGlobalAlpha(_f._globalAlpha);if(_f._jobDrawflags&8||_f._jobDrawflags&2){_f.on_updateStyles(_d,_f._sizeChanged);_f._sizeChanged=false;}if(_f._painting&4){if(_f._painting&2){_f._painted=0;}else{_f.on_draw(_d);}}else if(_f._painting&2){_f._painted=0;}}_b.clear();_d.restore();this._applyRendering=false;};_pGraphicsLayer._addDirty=function(_a,_b){var _c=_a;if(_c){var _d=_c.left;var _e=_c.top;var _f=_c.width;var _g=_c.height;var _h=new nexacro.Rect(_d,_e,_f,_g);var _i=this._canvas;if(_h.right<=0||_h.bottom<=0||_h.left>=_i.width||_h.top>=_i.height){return;}if(_h.width<=0||_h.height<=0){return;}_h.obj_id=_b.id;this._dirtyRectsMgr.add(_h);}};_pGraphicsLayer._hitTestItems=function(_a,_b,_c){var _d=_a._quadtree;if(_d){var _e,_f;var _g,_h,_i;var _j=_d.query(_c);_j.sort(function(_k,_l){return _l._index-_k._index;});for(_e=0,_f=_j.length;_e<_f;_e++ ){_g=_j[_e];_i=_g._globalMatrix._inverseTransform(_b);if(_g.isHitTest(_i.x,_i.y)){if(_g._firstchild){_c.left=_i.x-1;_c.top=_i.y-1;_h=this._hitTestItems(_g,_b,_c);if(_g._type=="Paths"){if(_h!=_g){return _g;}}else{return _h;}}else{return _g;}}}}return _a;};_pGraphicsLayer._hitTestAllItems=function(_a,_b,_c,_d){var _e=_a._quadtree;if(_e){var _f,_g;var _h=_e.query(_c);_h.sort(function(_i,_j){return _j._index-_i._index;});for(var _i=0,_j=_h.length;_i<_j;_i++ ){_f=_h[_i];_g=_f._globalMatrix._inverseTransform(_b);if(_f.isHitTest(_b.x,_b.y)){if(_f._firstchild){_c.left=_g.x-1;_c.top=_g.y-1;this._hitTestAllItems(_f,_b,_c,_d);}else{if(_f._parent&&_f._parent._type=="Paths"){_d.push(_f._parent);}else{_d.push(_f);}}}}}};_pGraphicsLayer.on_TreeChanged=function(){this._treechange++ ;};_pGraphicsLayer._getAllObjects=function(_a,_b,_c){_b._level=_c;_a[_a.length]=_b;if(_b=_b._firstchild){_c++ ;var _d=0;for(;_b;_b=_b._nextsibling){_b._index=_d;this._getAllObjects(_a,_b,_c);_d++ ;}}};_pGraphicsLayer.on_getOwnerLayer=function(){return this;};_pGraphicsLayer._getCanvasRect=function(){var _a=this.parent;if(_a){return new nexacro.Rect(0,0,_a._size.width,_a._size.height);}return new nexacro.Rect(0,0,0,0);};_pGraphicsLayer._getItemsInRect=function(_a,_b,_c){var _d=_a._quadtree;if(_d){var _e=_a._globalMatrix||_a._matrix;var _f=_e.inverted()||_e;var _g=_f._transformBounds(_b,null,_b.obj_id);var _h,_i,_j;var _k=_d.query(_g);_k.sort(function(_l,_m){return _m._index-_l._index;});for(_h=0,_i=_k.length;_h<_i;_h++ ){_j=_k[_h];_c[_c.length]=_j;if(_j._firstchild){this._getItemsInRect(_j,_b,_c);}}}};_pGraphicsLayer._setItemsInDirtyRect=function(_a,_b){var _c=_a._quadtree;if(_c){var _d=_a._globalMatrix||_a._matrix;var _e=_d.inverted()||_d;var _f=_e._transformBounds(_b,null,_b.obj_id);var _g;var _h=_c.query(_f);for(var _i=0,_j=_h.length;_i<_j;_i++ ){_g=_h[_i];_g._painting|=4;if(_g._firstchild){this._setItemsInDirtyRect(_g,_b);}}}};_pGraphicsLayer._setGlobalTransforms=function(){var _a=this.getAllObjects();var _b=this.parent._drawflags;var _c=this.parent._matrix;if(this._matrix){_b|=this._drawflags;this._globalMatrix=(_c?(_c.clone()).concatenate(this._matrix):this._matrix.clone());}else{this._globalMatrix=_c.clone();}_c=this._globalMatrix;var _d=[_c];var _e=[(_b&1)];var _f=[true];var _g=[1];var _h,_i,_j,_k;var _l=1;for(var _m=0,_n=_a.length;_m<_n;_m++ ){_h=_a[_m];_j=_h._level;_k=_j-1;if(_h._opacity){_l=_h._opacity.value;}else{_l=1;}_i=_l* _g[_k];if(!_f[_k]||!_h.visible||_h.on_IsNotDraw()||!_i){_f[_j]=false;if(_h._painted&(1|2|4)){_h._painting=2;}else{_h._painting=0;}}else{_h._jobDrawflags=_h._drawflags;if(_h._globalAlpha!=_i){_h._globalAlpha=_i;_h._jobDrawflags|=8;}_h._painting=1;if(_h._painted==0){_h._newDraw=true;}if(_e[_k]||(_h._jobDrawflags&1)||!_h._globalMatrix){_h._setGlobalTransforms(_d[_k]);_e[_j]=true;_h._jobDrawflags|=1;}else{_e[_j]=false;}_f[_j]=true;}if(_h._firstchild){_d[_j]=_h._globalMatrix;_g[_j]=_h._globalAlpha* _g[_k];}}};_pGraphicsLayer._setQuadTree=function(_a,_b){var _c;var _d=nexacro._GraphicsQuadTree;var _e=this._quadtree;if(!_e||_b){var _f=this._getCanvasRect();_e=this._quadtree=new _d(_f.left,_f.top,_f.width,_f.height);}var _g=[_e];var _h,_i,_j;for(var _l=0,_m=_a.length;_l<_m;_l++ ){_c=_a[_l];if(_c._painting&1){_h=_c._level;_i=_h-1;if((_c._jobDrawflags&(1|2|4))||_c._newDraw||_b){_j=_g[_i];if(!_j.move(_c)||_b){_j.add(_c);}}if(_c._firstchild){_e=_c._quadtree;if(!_e||_b){var _k=_c.on_getRect();_e=_c._quadtree=new _d(_k.left,_k.top,_k.width,_k.height);}else if(_c._jobDrawflags&(1|2|4)){_c._quadtree._root._bounds=_c.on_getRect();}_g[_h]=_e;}_c._oldGlobalBounds=null;_c._setOldGlobalBounds();_c._drawflags=0;delete _c._newDraw;}else if(!_b&&_c._painting&2){_h=_c._level;_i=_h-1;_j=_g[_i];if(_j){_j.remove(_c);}_c._oldGlobalBounds=null;}}if(_a.length>0&&!(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8)){this._renderHint="dirty";}if(this._drawflags!=null){this._drawflags=0;}};_pGraphicsLayer._refreshQuadTree=function(){this._setQuadTree(this.getAllObjects(),true);};delete _pGraphicsLayer;}if(!nexacro.Graphics){nexacro.Graphics=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._matrix=new nexacro._GraphicsMatrix();};var _pGraphicsControl=nexacro._createPrototype(nexacro.Component,nexacro.Graphics);nexacro.Graphics.prototype=_pGraphicsControl;_pGraphicsControl._type_name="Graphics";_pGraphicsControl._is_subcontrol=true;_pGraphicsControl._layer=null;_pGraphicsControl._drawflags=1;_pGraphicsControl._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pGraphicsControl.on_create_contents=function(){var _a=this.getElement();if(_a){this._setSize(this._adjust_width,this._adjust_height);var _b=this._layer;if(!_b){var _c=new nexacro.CanvasElement(_a);_b=this._layer=new nexacro._GraphicsLayer();_b.id=this.id+"_layer";_b.parent=this;_b._canvas=_c;_c.setElementPosition(0,0);_c.setElementSize(this._adjust_width,this._adjust_height);}}};_pGraphicsControl.on_created_contents=function(_a){var _b=this._layer;if(_b){_b._canvas.create(_a);if(nexacro._AccessibilityStyles.length==0&&nexacro._enableaccessibility){this._createAccessibilityStyles();_b._canvas.setElementPosition(0,0);_b._canvas.setElementSize(this._adjust_width,this._adjust_height);}_b._paint();}this._drawflags=0;};_pGraphicsControl.on_create_contents_command=function(){return "";};_pGraphicsControl.on_attach_contents_handle=function(_a){var _b=this._layer;if(_b){_b._canvas.create(_a);_b._paint();}this._drawflags=0;};_pGraphicsControl.on_destroy_contents=function(){if(this._layer){this._layer.destroy();this._layer=null;}};_pGraphicsControl.on_change_containerRect=function(_a,_b){if(this._is_created_contents){this._setSize(_a,_b);var _c=this._layer;if(_c){_c._refreshQuadTree();}}};_pGraphicsControl.on_change_containerPos=function(_a,_b){};_pGraphicsControl.getAccessibilityStyles=function(){if(nexacro._AccessibilityStyles.length>0){var _a=nexacro._AccessibilityStyles.slice(0);return _a;}return null;};_pGraphicsControl._createAccessibilityStyles=function(){var _a={};for(var _b=0;_b<20;_b++ ){_a.fillstyle=this.on_apply_accessibilitypattern(_b,false);_a.linestyle=this.on_apply_accessibilityline(_b,false);_a.normallinestyle="1px solid #000000";_a.selectlinestyle=this.on_apply_accessibilityline(_b,true);_a.selectfillstyle=this.on_apply_accessibilitypattern(_b,true);_a.highlightfillstyle="";_a.highlightlinestyle="5px solid #000000";nexacro._AccessibilityStyles.push(_a);_a={};}};_pGraphicsControl.on_apply_accessibilityline=function(_a,_b){if(_a==0){if(_b){return "1px solid #999999";}else{return "1px solid #000000";}}else if(_a==1){if(_b){return "1px dotted #999999";}else{return "1px dotted #555555";}}else if(_a==2){if(_b){return "1px dashed #999999";}else{return "1px dashed #000000";}}else if(_a==3){if(_b){return "2px solid #999999";}else{return "2px solid #555555";}}else if(_a==4){if(_b){return "2px dotted #999999";}else{return "2px dotted #000000";}}else if(_a==5){if(_b){return "2px dashed #999999";}else{return "2px dashed #555555";}}else if(_a==6){if(_b){return "3px solid #999999";}else{return "3px solid #000000";}}else if(_a==7){if(_b){return "3px dotted #999999";}else{return "3px dotted #555555";}}else if(_a==8){if(_b){return "3px dashed #999999";}else{return "3px dashed #000000";}}else if(_a==9){if(_b){return "1px solid #999999";}else{return "1px solid #555555";}}else if(_a==10){if(_b){return "1px dotted #999999";}else{return "1px dotted #000000";}}else if(_a==11){if(_b){return "1px dashed #999999";}else{return "1px dashed #555555";}}else if(_a==12){if(_b){return "2px solid #999999";}else{return "2px solid #000000";}}else if(_a==13){if(_b){return "2px dotted #999999";}else{return "2px dotted #555555";}}else if(_a==14){if(_b){return "2px dashed #999999";}else{return "2px dashed #000000";}}else if(_a==15){if(_b){return "3px solid #999999";}else{return "3px solid #555555";}}else if(_a==16){if(_b){return "3px dotted #999999";}else{return "3px dotted #000000";}}else if(_a==17){if(_b){return "3px dashed #999999";}else{return "3px dashed #555555";}}else if(_a==18){if(_b){return "4px solid #999999";}else{return "4px solid #000000";}}else if(_a==19){if(_b){return "4px dotted #999999";}else{return "4px dotted #555555";}}};_pGraphicsControl.on_apply_accessibilitypattern=function(_a,_b){var _c=this._layer._canvas;var _d="#000000";_c.setElementPosition( -20, -20);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_c.setElementLineWidth(2);var _e,_f,_g,_h,_i,_j,_k;if(_a==0){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f= -1;_h=_c.width+1;_g= -1;_i=_c.height+1;_e=2;_c.beginPath();_c.moveTo(_f,_g);_c.lineTo(_h,_i);_c.moveTo(_h-_e,_g);_c.lineTo(_h,_g+_e);_c.moveTo(_f,_i-_e);_c.lineTo(_f+_e,_i);_c.stroke();}else if(_a==1){_c.setElementSize(12,12);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_c.width/2,_e);_c.lineTo(_e,_c.height-_e);_c.lineTo(_c.width-_e,_c.height-_e);_c.closePath();_c.stroke();}else if(_a==2){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_c.beginPath();_c.moveTo(2,0);_c.lineTo(2,2);_c.lineTo(6,2);_c.lineTo(6,6);_c.lineTo(2,6);_c.lineTo(2,8);_c.stroke();}else if(_a==3){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_e,_c.height/2);_c.lineTo(_c.width-_e,_c.height/2);_c.moveTo(_c.width/2,_e);_c.lineTo(_c.width/2,_c.height-_e);_c.stroke();}else if(_a==4){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_g= -1;_i=_c.height+1;_j=_c.width/2;_c.beginPath();_c.moveTo(_j,_g);_c.lineTo(_j,_i);_c.stroke();}else if(_a==5){_c.setElementSize(12,12);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=2;_h=_c.width-_f;_g=2;_i=_c.height-_g;_c.beginPath();_c.moveTo(_f,_g);_c.lineTo(_f,_i);_c.lineTo(_h,_i);_c.lineTo(_h,_g);_c.closePath();_c.stroke();}else if(_a==6){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=0;_h=_c.width;_g=0;_i=_c.height;_e=3;_c.beginPath();_c.moveTo(_f+_e,_g);_c.lineTo(_h/2+_e,_i/2);_c.lineTo(_f+_e,_i);_c.stroke();}else if(_a==7){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_c.beginPath();_c.moveTo(5,1);_c.lineTo(3,5);_c.lineTo(7,5);_c.lineTo(5,9);_c.stroke();}else if(_a==8){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=_c.width+1;_h= -1;_g=_c.height+1;_i= -1;_e=2;_c.beginPath();_c.moveTo(_f,_i);_c.lineTo(_h,_g);_c.moveTo(_h+_e,_i);_c.lineTo(_h,_i+_e);_c.moveTo(_f,_g-_e);_c.lineTo(_f-_e,_g);_c.stroke();}else if(_a==9){_c.setElementSize(12,12);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_c.width/2,_e);_c.lineTo(_e,_c.height/2);_c.lineTo(_c.width/2,_c.height-_e);_c.lineTo(_c.width-_e,_c.height/2);_c.closePath();_c.stroke();}else if(_a==10){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f= -1;_h=_c.width+1;_g= -1;_i=_c.height+1;_j=_c.width/2;_k=_c.height/2;_c.beginPath();_c.moveTo(_f,_k);_c.lineTo(_h,_k);_c.moveTo(_j,_g);_c.lineTo(_j,_i);_c.stroke();}else if(_a==11){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_c.width/2,_e);_c.lineTo(_e,_c.height-_e);_c.lineTo(_c.width-_e,_c.height-_e);_c.closePath();_c.stroke();}else if(_a==12){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_c.beginPath();_c.moveTo(0,6);_c.lineTo(2,6);_c.lineTo(2,2);_c.lineTo(6,2);_c.lineTo(6,6);_c.lineTo(8,6);_c.stroke();}else if(_a==13){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_e,_e);_c.lineTo(_c.width-_e,_c.height-_e);_c.moveTo(_c.width-_e,_e);_c.lineTo(_e,_c.height-_e);_c.stroke();}else if(_a==14){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f= -1;_h=_c.width+1;_k=_c.height/2;_c.beginPath();_c.moveTo(_f,_k);_c.lineTo(_h,_k);_c.stroke();}else if(_a==15){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=2;_h=_c.width-_f;_g=2;_i=_c.height-_g;_c.beginPath();_c.moveTo(_f,_g);_c.lineTo(_f,_i);_c.lineTo(_h,_i);_c.lineTo(_h,_g);_c.closePath();_c.stroke();}else if(_a==16){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=0;_h=_c.width;_g=0;_i=_c.height;_e=3;_c.beginPath();_c.moveTo(_f,_g+_e);_c.lineTo(_h/2,_i/2+_e);_c.lineTo(_h,_g+_e);_c.stroke();}else if(_a==17){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=2;_g=2;_e=2;_c.beginPath();_c.moveTo(_f,_g);_c.lineTo(_c.width/2,_c.height-_e);_c.lineTo(_c.width-2,_g);_c.stroke();}else if(_a==18){_c.setElementSize(10,10);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_f=_c.width+1;_h= -1;_g=_c.height+1;_i= -1;_e=2;_c.beginPath();_c.moveTo(_f,_g);_c.lineTo(_h,_i);_c.moveTo(_h-_e,_g);_c.lineTo(_h,_g+_e);_c.moveTo(_f,_i-_e);_c.lineTo(_f+_e,_i);_c.moveTo(_f,_i);_c.lineTo(_h,_g);_c.moveTo(_h+_e,_i);_c.lineTo(_h,_i+_e);_c.moveTo(_f,_g-_e);_c.lineTo(_f-_e,_g);_c.stroke();}else if(_a==19){_c.setElementSize(8,8);_c.setElementLineWidth(2);_c.setElementStrokeStyle(nexacro.ColorObject(_d));_e=2;_c.beginPath();_c.moveTo(_c.width/2,_e);_c.lineTo(_e,_c.height/2);_c.lineTo(_c.width/2,_c.height-_e);_c.lineTo(_c.width-_e,_c.height/2);_c.closePath();_c.stroke();}if(_b){_c.rect(0,0,_c.width,_c.height);_c.setElementFillStyle("gray");_c.setElementGlobalAlpha(0.4);_c.fill();}var _l=this._layer._canvas.createPattern(_c,'repeat');_c.clearRect(0,0,_c.width,_c.height);_c.setElementGlobalAlpha(1);return _l;};_pGraphicsControl.redraw=function(){this._paint();if(this._repaint){this._repaint=false;var _a=this;var _b=this._getWindowHandle();if(this._timeId!=null){nexacro._clearSystemTimer(_b,this._timeId);this._timeId=null;}this._timeId=nexacro._setSystemTimer(_b,function(){nexacro._clearSystemTimer(_b,_a._timeId);_a._timeId=null;_a._paint();},10);}};_pGraphicsControl.hitTest=function(_a,_b){var _c;var _d=this._layer;if(_d){_c=_d.hitTest(new nexacro.Point( +_a, +_b));}return _c;};_pGraphicsControl.hitTestAll=function(_a,_b){var _c;_c=this._getGraphicsObjectAll(_a,_b);return _c;};_pGraphicsControl.getAllObjects=function(){var _a=[];var _b=this._layer;if(_b){_a=_b.getAllObjects();}return _a;};_pGraphicsControl.getFirstChild=function(){var _a;var _b=this._layer;if(_b){_a=_b.getFirstChild();}return _a;};_pGraphicsControl.getLastChild=function(){var _a;var _b=this._layer;if(_b){_a=_b.getLastChild();}return _a;};_pGraphicsControl.removeChild=function(_a){var _b;var _c=this._layer;if(_c){_b=_c.removeChild(_a);}return _b;};_pGraphicsControl.addChild=function(_a,_b){var _c= -1;var _d=this._layer;if(_d){_c=_d.addChild(_a,_b);if(_c> -1){_b.parent=this;}}return _c;};_pGraphicsControl.insertChild=function(_a,_b,_c){var _d= -1;var _e=this._layer;if(_e){_d=_e.insertChild(_a,_b,_c);if(_d> -1){_c.parent=this;}}return _d;};_pGraphicsControl.getObjectByID=function(_a){var _b;var _c=this._layer;if(_c&&_a){_b=_c.getObjectByID(_a);}return _b;};_pGraphicsControl.indexOf=function(_a){var _b= -1;var _c=this._layer;if(_c&&_a){_b=_c.indexOf(_a);}return _b;};_pGraphicsControl.getNextObject=function(_a){var _b=this.getObjectByID(_a);if(_b){return _b.getNextSibling();}else{return null;}};_pGraphicsControl.getPrevObject=function(_a){var _b=this.getObjectByID(_a);if(_b){return _b.getPreviousSibling();}else{return null;}};_pGraphicsControl.clear=function(){var _a=this._layer;if(_a){_a.clear();}};_pGraphicsControl._delayTask=function(){if(this._painting){this._repaint=true;}else{this._paint();}};_pGraphicsControl._paint=function(){var _a=this.getElement();if(_a){if(this._painting){return;}this._painting=true;var _b=this._layer;if(_b){var _c=_b._canvas;var _d=_b._getCanvasRect();_b._setGlobalTransforms();_b._beforePaint();if(_a.handle){if(!_c){_c=_b._canvas=new nexacro.CanvasElement(_a);_c.setElementPosition(_d.left,_d.top);_c.setElementSize(_d.width,_d.height);}else if(this._drawflags&2){_c.setElementPosition(_d.left,_d.top);_c.setElementSize(_d.width,_d.height);}_b._paint();}this._drawflags=0;this._painting=false;}}};_pGraphicsControl._setSize=function(_a,_b){var _c=new nexacro._GraphicsSize(_a,_b);var _d=this._size;if(_d){if(!_c.equals(_d)){this._size=_c;this._drawflags|=2;}}else{this._size=_c;this._drawflags|=2;}};_pGraphicsControl._getGraphicsObjectAll=function(_a,_b){var _c;var _d=this._layer;if(_d){_c=_d.hitTestAll(new nexacro.Point( +_a, +_b));}return _c;};delete _pGraphicsControl;}