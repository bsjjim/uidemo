//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(!nexacro.GridFormat){nexacro.GridCellInfo=function(_a,_b,_c,_d,_e){nexacro.CellInfo.call(this,_a,_b,_c,_d,_e);this._grid=this._view;this._imgWidthTemp={};this._imgHeightTemp={};this._suppress_infos=[];this._virtualmerge_infos=[];this._cur1font_size=null;this._cur1selectfont_size=null;this._curfont=undefined;this._curselfont=undefined;this._curborder=undefined;this._curpadding=undefined;this._stylecache={};};var _pGridCellInfo=nexacro._createPrototype(nexacro.CellInfo,nexacro.GridCellInfo);nexacro.GridCellInfo.prototype=_pGridCellInfo;_pGridCellInfo._type_name="GridCellInfo";_pGridCellInfo._addPropertyMap("_pGridCellInfo",[["suppress",null,true,0,false,0],["suppressalign",null,false,"first",false,2,["last","middle","first,over","middle,over","last,over"]],["suppressedit",null,false,false,false,1],["suppresshorzcell",null,false,false,false,1]]);_pGridCellInfo.destroy=function(){nexacro.CellInfo.prototype.destroy.call(this);this._grid=null;this._imgWidthTemp=null;this._imgHeightTemp=null;this._suppress_infos=null;this._virtualmerge_infos=null;this._cur1font_size=null;this._cur1selectfont_size=null;this._curfont=null;this._curselfont=null;this._curborder=null;this._curpadding=null;this._stylecache=null;};_pGridCellInfo._setStyleCache=function(_a,_b,_c,_d){if(this.cssclass._bindtype>0){this._stylecache[_a+_b+_c]=_d;}else{this._stylecache[_a+_c]=_d;}};_pGridCellInfo._getStyleCache=function(_a,_b,_c){if(this.cssclass._bindtype>0){return this._stylecache[_a+_b+_c];}else{return this._stylecache[_a+_c];}};_pGridCellInfo._changedStyle=function(_a){this._stylecache={};};_pGridCellInfo._clearStyle=function(){this._stylecache={};};_pGridCellInfo._getSuppressInfo=function(_a,_b){if(_a==undefined){return this._suppress_infos;}if(_a<0){_a=0;}if(_b&&!this._suppress_infos[_a]){var _c={text_proc:0,border_proc:0,horz_border_proc:0,horz_text_proc:0,first:false,middle:false,last:true,horzlast:true};this._suppress_infos[_a]=_c;}return this._suppress_infos[_a];};_pGridCellInfo._clearSuppressInfo=function(){this._suppress_infos=[];};_pGridCellInfo._initVirtualMergeInfo=function(){this._virtualmerge_infos=[];};_pGridCellInfo._setVirtualMergeInfo=function(_a,_b){this._virtualmerge_infos[_a]=_b;};_pGridCellInfo._getVirtualMergeInfo=function(_a){if(!this._hasVirtualMergeInfo()){return null;}return this._virtualmerge_infos[_a];};_pGridCellInfo._hasVirtualMergeInfo=function(){if(this._virtualmerge_infos&&this._virtualmerge_infos.length>0){return true;}return false;};_pGridCellInfo._query_status_align=function(_a,_b,_c){return this._grid._getCellStyleInfo(this._cellidx,"align",_a,_c=="selected");};_pGridCellInfo._query_status_background=function(_a,_b,_c){return this._grid._getCellStyleInfo(this._cellidx,"background",_a,_b=="selected",null,null,_c);};_pGridCellInfo._getExportCurrentStyleBorder=function(_a){var _b=_a._control_element;if(_b){var _c=_b.border?_b.border:_b._border_info;if(_b.borderLeftNone||_b.borderRightNone||_b.borderTopNone||_b.borderBottomNone){if(_c){var _d=[_c.top.value,_c.right.value,_c.bottom.value,_c.left.value];if(_a._refinfo._col>0){if(_b.borderLeftNone){_d[3]="0px solid transparent";}}if((_a._rowidx== -1&&_a._refinfo._row==0)==false){if(_b.borderTopNone){_d[0]="0px solid transparent";}}if(_b.borderRightNone){_d[1]="0px solid transparent";}if(_b.borderBottomNone){_d[2]="0px solid transparent";}_d=_d.join(",");return nexacro.BorderObject(_d);}}return _c;}return undefined;};_pGridCellInfo._query_status_border=function(_a,_b){var _c=this._grid._getCellinfos(_a);if(!_c){return;}var _d=this._cellidx;var _e=_c[_d];var _f=this._grid._getGridRow(_a);var _g=false;var _h=true;var _i=_b=="selected";var _j=["top","right","bottom","left"];this._grid._createTempCell(this._cellidx,_a,null);var _k=this._grid._getTempCell(_d,_a,null);var _l=_k.cell;var _m=this._getExportCurrentStyleBorder(_l);if(this._grid&&this._grid._checkVirtualMerge(_e,_a)&&_l._control_element){var _n=this._grid._checkVirtualMerge(_e,_a);var _o=_n.remove;var _p,_q,_r,_s;if(_o.indexOf("right")>=0){_p=_l._control_element.borderRightNone;_l._control_element.borderRightNone=false;}else if(_o.indexOf("left")>=0){_q=_l._control_element.borderLeftNone;_l._control_element.borderLeftNone=false;}if(_o.indexOf("bottom")>=0){_r=_l._control_element.borderBottomNone;_l._control_element.borderBottomNone=false;}else if(_o.indexOf("top")>=0){_s=_l._control_element.borderTopNone;_l._control_element.borderTopNone=false;}_m=_l._getCurrentStyleBorder();if(_p){_l._control_element.borderRightNone=_p;}else if(_q){_l._control_element.borderLeftNone=_q;}if(_r){_l._control_element.borderBottomNone=_r;}else if(_s){_l._control_element.borderTopNone=_s;}}_l._changeUserStatus("selected",!!_i);var _t=_l._getCurrentStyleInheritValue("color","enabled");var _u=_e._getStyleCache("border",_f,_i);if(!_u){var _v;var _w;var _x=[];while(_j.length){var _y=_j[0];if(_y){_v=_m[_y];_w=_v.value;if(_v.style=="none"){_w="0px solid transparent";}else{if(_v.color==""){_g=true;_w+=" "+_t;}}}_x.push(_w);_j.shift();}if(_g){_m=nexacro.BorderObject(_x.join(","));}if(_e._getSuppress(_a)>0){_h=false;}if(_h){_e._setStyleCache("border",_a,_i,_m.value);}}else{_m=nexacro.BorderObject(_u);}return _m;};_pGridCellInfo._query_status_color=function(_a,_b){return this._grid._getCellStyleInfo(this._cellidx,"color",_a,_b=="selected");};_pGridCellInfo._query_status_font=function(_a,_b){return this._grid._getCellStyleInfo(this._cellidx,"font",_a,_b=="selected");};_pGridCellInfo._query_status_treecontrol=function(_a,_b,_c){var _d="";var _e;if(_b=="treecollapseimage"){_d=this._getTreeCollapseImage(_a);_e="treestatusicon";}else if(_b=="treeexpandimage"){_d=this._getTreeExpandImage(_a);_e="treestatusicon";}else if(_b=="treeitemimage"){_d=this._getTreeItemImage(_a);_e="treestatusicon";}else if(_b=="treeopenbuttonimage"){_e="treebuttonicon";}else if(_b=="treeclosebuttonimage"){_e="treebuttonicon";}if(!_d&&_e){_d=this._grid._getCellStyleInfo(this._cellidx,_e,_a,_c=="selected");}return _d;};_pGridCellInfo._findDataset=function(_a){return this.parent.parent._findDataset(_a);};_pGridCellInfo._afterProcBindTypeProp=function(){this._grid._clearBindTypeFlag();};_pGridCellInfo.set_treecheck=function(_a){if(_a!=this.treecheck._value){this.treecheck._set(_a);this._grid._clearBindTypeFlag();this._grid._initTreeStates();if(!this._loadingxml){if(this._grid._bodyBand){this._grid._bodyBand._recreate_contents();}}}};_pGridCellInfo.set_treelevel=function(_a){if(_a!=this.treelevel._value){this.treelevel._set(_a);this._grid._clearBindTypeFlag();this._grid._initTreeStates();if(!this._loadingxml){if(this._grid._bodyBand){this._grid._bodyBand._recreate_contents();}}}};_pGridCellInfo.set_treestartlevel=function(_a){if(_a!=this.treestartlevel._value){this.treestartlevel._set_intval(_a);this._grid._clearBindTypeFlag();this._grid._rootlevel=Math.max(this.treestartlevel._value,this._grid._rootlevel);if(!this._loadingxml){if(this._grid._bodyBand){this._grid._bodyBand._recreate_contents();}}}};_pGridCellInfo.set_treestate=function(_a){if(_a!=this.treestate._value){this.treestate._set(_a);}this._grid._clearBindTypeFlag();this._grid._initTreeStates();var _b=this._grid._getDataRow(this._grid.currentrow);if(!this._loadingxml){if(this._getEdittype(_b)=="tree"){if(this._grid._bodyBand){this._grid._bodyBand._recreate_contents();}}else{this._grid._refreshBody();}}};_pGridCellInfo._getTooltipText=function(_a){var _b=this._getAttrValue(this.tooltiptext,_a);if(_b===null||_b===undefined){_b=this.parent._getTooltipText(_a);}return _b;};_pGridCellInfo._getSuppress=function(_a){return this._getAttrValue(this.suppress,_a);};delete _pGridCellInfo;nexacro.GridBandInfo=function(_a,_b,_c,_d){this.id=this.name=_a;this.parent=_c;var _e=this._property_map=[["cssclass",true,"",true],["tooltiptext",true,undefined,false],["tooltiptype",false,"default",false],["accessibilityaction",false,null,false],["accessibilitydesclevel",false,"all",false],["accessibilitydescription",false,null,false],["accessibilityenable",false,true,false],["accessibilitylabel",false,null,false],["accessibilityrole",false,"gridcell",false],["color",false,null,true],["font",false,null,true],["wordSpacing",false,null,true],["letterSpacing",false,null,true],["textDecoration",false,null,true],["wordWrap",true,"none",true],["borderRadius",false,null,true],["border",false,null,true],["background",false,null,true],["edge",false,null,true],["cursor",false,null,true],["opacity",false,null,true],["boxShadow",false,null,true],["margin",false,null,true],["padding",false,null,true],["textAlign",false,null,true],["verticalAlign",false,null,true]];var _f,_g,_h;for(var _i=0;_i<_e.length;_i++ ){_f=_e[_i][0];_g=_e[_i][1];_h=_e[_i][2];if(_g){this[_f]=new nexacro.BindableValue(_h);}else{this[_f]=_h;}}this._type=_b;this._grid=_d;this._bandctrl=null;this._noborder=false;};var _pGridBandInfo=nexacro._createPrototype(nexacro.Object,nexacro.GridBandInfo);nexacro.GridBandInfo.prototype=_pGridBandInfo;_pGridBandInfo._type_name="GridBandInfo";_pGridBandInfo.destroy=function(){this.parent=null;this._grid=null;this._bandctrl=null;var _a=this._property_map;var _b;for(var _c=0;_c<_a.length;_c++ ){_b=_a[_c][0];this[_b]=null;}this._property_map=null;};_pGridBandInfo.set_accessibilityaction=function(_a){this.accessibilityaction=_a;};_pGridBandInfo.set_accessibilitydesclevel=function(_a){this.accessibilitydesclevel=_a;};_pGridBandInfo.set_accessibilitydescription=function(_a){this.accessibilitydescription=_a;};_pGridBandInfo.set_accessibilityenable=function(_a){this.accessibilityenable=_a;};_pGridBandInfo.set_accessibilitylabel=function(_a){this.accessibilitylabel=_a;};_pGridBandInfo.set_accessibilityrole=function(_a){this.accessibilityrole=_a;};_pGridBandInfo.set_background=function(_a){this.background=_a;if(this._bandctrl){this._bandctrl.set_background(_a);}};_pGridBandInfo.set_color=function(_a){this.color=_a;if(this._bandctrl){this._bandctrl.set_color(_a);}};_pGridBandInfo.set_font=function(_a){this.font=_a;if(this._bandctrl){this._bandctrl.set_font(_a);}};_pGridBandInfo.set_wordSpacing=function(_a){this.wordSpacing=_a;if(this._bandctrl){this._bandctrl.set_wordSpacing(_a);}};_pGridBandInfo.set_letterSpacing=function(_a){this.letterSpacing=_a;if(this._bandctrl){this._bandctrl.set_letterSpacing(_a);}};_pGridBandInfo.set_textDecoration=function(_a){this.textDecoration=_a;if(this._bandctrl){this._bandctrl.set_textDecoration(_a);}};_pGridBandInfo.set_wordWrap=function(_a){this.wordWrap._set(_a);if(this._bandctrl){this._bandctrl.set_wordWrap(_a);}};_pGridBandInfo.set_borderRadius=function(_a){this.borderRadius=_a;if(this._bandctrl){this._bandctrl.set_borderRadius(_a);}};_pGridBandInfo.set_edge=function(_a){this.edge=_a;if(this._bandctrl){this._bandctrl.set_edge(_a);}};_pGridBandInfo.set_border=function(_a){this.border=_a;if(this._bandctrl){this._bandctrl.set_border(_a);}};_pGridBandInfo.set_opacity=function(_a){this.opacity=_a;if(this._bandctrl){this._bandctrl.set_opacity(_a);}};_pGridBandInfo.set_cursor=function(_a){this.cursor=_a;if(this._bandctrl){this._bandctrl.set_cursor(_a);}};_pGridBandInfo.set_boxShadow=function(_a){this.boxShadow=_a;if(this._bandctrl){this._bandctrl.set_boxShadow(_a);}};_pGridBandInfo.set_margin=function(_a){this.margin=_a;if(this._bandctrl){this._bandctrl.set_margin(_a);}};_pGridBandInfo.set_padding=function(_a){this.padding=_a;if(this._bandctrl){this._bandctrl.set_padding(_a);}};_pGridBandInfo.set_textAlign=function(_a){this.textAlign=_a;if(this._bandctrl){this._bandctrl.set_textAlign(_a);}};_pGridBandInfo.set_verticalAlign=function(_a){this.verticalAlign=_a;if(this._bandctrl){this._bandctrl.set_verticalAlign(_a);}};_pGridBandInfo._set_backgroundimage=function(_a,_b){_b=_b.toString();if(_b.length>=5){if(_b.substring(0,3).toLowerCase()=="url"){var _c=_b.substr(4,1);if(_c=='\''||_c=='\"'){_b=_b.substring(5,_b.length-2);}else{_b=_b.substring(4,_b.length-1);}}else if(_b.substring(0,5).toLowerCase()!="theme"){var _d=nexacro._transImageBase64StringFormat(_b);if(_d){_b=_d.alldata;}}}if(_b!=_a.image){_a.set_image(_b);}return _a;};_pGridBandInfo.set_id=function(_a){};_pGridBandInfo.set_cssclass=function(_a){if(_a!=this.cssclass._value){this.cssclass._set(_a);if(this._bandctrl){this._bandctrl.set_cssclass(_a);this._grid._clearBindTypeFlag();}}};_pGridBandInfo.set_tooltiptype=function(_a){if(_a!=this.tooltiptype){this.tooltiptype=_a;this._grid._clearBindTypeFlag();}};_pGridBandInfo.set_tooltiptext=function(_a){if(_a!=this.tooltiptext._value){this.tooltiptext._set(_a);this._grid._clearBindTypeFlag();if(this._bandctrl){this._bandctrl.on_apply_prop_tooltip();}}};_pGridBandInfo._getTooltipText=function(_a){var _b=this._getAttrValue(this.tooltiptext,_a);if(_b===null||_b===undefined){_b=this._grid.tooltiptext;}return _b;};_pGridBandInfo._getAttrValue=function(_a,_b,_c){if(_a==undefined){return undefined;}if(_a._bindtype==undefined){return _a;}else if(_a._bindtype==0){return _a._value;}else{var _d=this._grid;var _e=_d._binddataset;if(_e==null){return undefined;}if(_a._bindtype==1){return _e.getColumn(_b,_a._bindexpr);}else{var _f=_a._bindexpr;var _g=_a._value;var _h=_g.toLowerCase().indexOf("bind:");if(_h>=0){_f=_f.substring(_h,_f.length);_f=_e.getColumn(_b,_f);}var _i=_d._exprcache[_f];if(_i==null){_i=_e._createExprFunc(_f);_d._exprcache[_f]=_i;}if((typeof _i)=="function"){if(_c){_c.col=_c._col;_c.row=_c._row;return _i.call(_c,_b,_b,_d,_e,_e._viewRecords,_e._viewRecords[_b],[]);}else{return _i.call(this,_b,_b,_d,_e,_e._viewRecords,_e._viewRecords[_b],[]);}}}}return undefined;};_pGridBandInfo._setAttrValue=function(_a,_b,_c){if(_a._bindtype==1){var _d=this._grid;var _e=_d._binddataset;if(_e){_e.setColumn(_b,_a._bindexpr,_c);}}};delete _pGridBandInfo;nexacro.GridFormat=function(_a,_b){this.id=_a;this._grid=this.parent=_b;this._cols=[];this._headrows=null;this._bodyrows=null;this._summrows=null;this._headband=null;this._summband=null;this._bodyband=null;this._headcells=null;this._summcells=null;this._bodycells=null;this.leftWidth=0;this.rightWidth=0;this.bodyWidth=0;this._orgleftWidth=0;this._orgrightWidth=0;this._orgbodyWidth=0;this.endbodycol=0;this.startrightcol= -1;this.headHeight=0;this.summHeight=0;this.bodyHeight=0;this._innerdatasets={};this._innerdatasets_name=[];};var _pGridFormat=nexacro._createPrototype(nexacro.Object,nexacro.GridFormat);nexacro.GridFormat.prototype=_pGridFormat;_pGridFormat._type_name="GridFormat";_pGridFormat._findDataset=function(_a){if(this._innerdatasets[_a]){if(this._innerdatasets[_a].parent!=null){return this._innerdatasets[_a];}else{this._innerdatasets[_a]=null;for(var _d=0;_d<this._innerdatasets_name.length;_d++ ){var _b=this._innerdatasets_name[_d];if(_b==_a){this._innerdatasets_name.splice(_d,1);_d-- ;}}}}var _c=this._grid._findDataset(_a);if(_c){_c._setEventHandler("onvaluechanged",this._on_updateInnerDs,this);_c._setEventHandler("onrowsetchanged",this._on_updateInnerDs,this);_c._setEventHandler("onrowsetchanged",this._on_updateInnerDs,this);this._innerdatasets[_a]=_c;this._innerdatasets_name.push(_a);}return _c;};_pGridFormat._on_updateInnerDs=function(_a,_b){if(this._grid){this._grid._on_useInnerDsCells(_a,_b);}};_pGridFormat.destroy=function(){if(this._headband){this._headband.destroy();this._headband=null;}if(this._summband){this._summband.destroy();this._summband=null;}if(this._bodyband){this._bodyband.destroy();this._bodyband=null;}var _a,_b,_c;if(this._headcells){_a=this._headcells;_b=_a.length;for(_c=0;_c<_b;_c++ ){_a[_c].destroy();}this._headcells=null;}if(this._summcells){_a=this._summcells;_b=_a.length;for(_c=0;_c<_b;_c++ ){_a[_c].destroy();}this._summcells=null;}if(this._bodycells){_a=this._bodycells;_b=_a.length;for(_c=0;_c<_b;_c++ ){_a[_c].destroy();}this._bodycells=null;}this._headrows=null;this._bodyrows=null;this._summrows=null;this._cols=null;this._grid=null;this.parent=null;for(_c=0;_c<this._innerdatasets_name.length;_c++ ){var _d=this._innerdatasets_name[_c];var _e=this._innerdatasets[_d];_e._removeEventHandler("onvaluechanged",this._on_updateInnerDs,this);_e._removeEventHandler("onrowsetchanged",this._on_updateInnerDs,this);_e._removeEventHandler("onrowsetchanged",this._on_updateInnerDs,this);this._innerdatasets[_d]=null;}this._innerdatasets_name=null;this._innerdatasets=null;};_pGridFormat._resetOrgColSize=function(_a,_b,_c){var _d,_e,_f;if(this._cols){var _g=this._cols;var _h=this._cols.length;var _i;_d=_e=_f=0;if(!_b.length){for(_i=0;_i<_h;_i++ ){_g[_i].size=_g[_i].orgsize;_g[_i].left=_g[_i].orgleft;_g[_i].right=_g[_i].orgright;_g[_i].tempsize=undefined;if(_g[_i]._area=="left"){_d+=_g[_i].size;}else if(_g[_i]._area=="right"){_f+=_g[_i].size;}else{_e+=_g[_i].size;}}}else{var _j=0;for(_i=0;_i<_h;_i++ ){_g[_i].tempsize=undefined;if(_g[_i]._area=="left"){_d+=_g[_i].size;continue;}else if(_g[_i]._area=="right"){_f+=_g[_i].size;continue;}_g[_i].size=Math.round(_b[_i]* _c);_g[_i].left=_j;_g[_i].right=_j+_g[_i].size;_j=_g[_i].right;_e+=_g[_i].size;}}}if(_a){this.leftWidth=_d;this.rightWidth=_f;this._bodyWidth=this.bodyWidth=_e;}else{this.leftWidth=this._orgleftWidth;this.rightWidth=this._orgrightWidth;this._bodyWidth=this.bodyWidth=this._orgbodyWidth;}};_pGridFormat._rearrangeCols=function(){var _a=this._cols;var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].orgidx=_c;}};_pGridFormat._addLeftColumn=function(_a){var _b=this.leftWidth+_a;var _c=this._orgleftWidth+_a;var _d={size:_a,left:this.leftWidth,right:_b,_area:"left",orgsize:_a,orgleft:this._orgleftWidth,orgright:_c};var _e=this._getColFixCnt("left");this._cols.splice(_e,0,_d);this.leftWidth=_b;this._orgleftWidth=_c;return _d;};_pGridFormat._addRightColumn=function(_a){var _b=this.rightWidth+_a;var _c=this._orgrightWidth+_a;var _d={size:_a,left:this.rightWidth,right:_b,_area:"right",orgsize:_a,orgleft:this._orgrightWidth,orgright:_c};this._cols.push(_d);this.rightWidth=_b;this._orgrightWidth=_c;return _d;};_pGridFormat._addBodyColumn=function(_a){var _b=this.bodyWidth+_a;var _c=this._orgbodyWidth+_a;var _d={size:_a,left:this.bodyWidth,right:_b,_area:"body",orgsize:_a,orgleft:this._orgbodyWidth,orgright:_c};var _e=this._getColFixCnt("left");var _f=this._getColFixCnt("body");this._cols.splice(_e+_f,0,_d);this.endbodycol=this._cols.length;this._bodyWidth=this.bodyWidth=_b;this._orgbodyWidth=_c;return _d;};_pGridFormat._insertLeftColumn=function(_a,_b){if(_b>=this._cols.length){return this._addLeftColumn(_a);}var _c=this._cols[_b];var _d=0;var _e=0;if(_c){_d=_c.left;_e=_c.orgleft;}var _f=_d+_a;var _g=_e+_a;var _h={size:_a,left:_d,right:_f,_area:"left",orgsize:_a,orgleft:_e,orgright:_g};this._cols.splice(_b,0,_h);this._adjustFormatColOrgSize();this._adjustFormatColSize();return _h;};_pGridFormat._insertRightColumn=function(_a,_b){if(_b>=this._cols.length){return this._addRightColumn(_a);}var _c=this._cols[_b];var _d=0;var _e=0;if(_c){_d=_c.left;_e=_c.orgleft;}var _f=_d+_a;var _g=_e+_a;var _h={size:_a,left:_d,right:_f,_area:"right",orgsize:_a,orgleft:_e,orgright:_g};this._cols.splice(_b,0,_h);this._adjustFormatColOrgSize();this._adjustFormatColSize();return _h;};_pGridFormat._insertBodyColumn=function(_a,_b){if(_b>=this._cols.length){return this._addBodyColumn(_a);}var _c=this._cols[_b];var _d=0;var _e=0;if(_c){_d=_c.left;_e=_c.orgleft;}var _f=_d+_a;var _g=_e+_a;var _h={size:_a,left:_d,right:_f,_area:"body",orgsize:_a,orgleft:_e,orgright:_g};this._cols.splice(_b,0,_h);this.endbodycol=this._cols.length;this._adjustFormatColOrgSize();this._adjustFormatColSize();return _h;};_pGridFormat._moveColumn=function(_a,_b,_c,_d,_e){var _f=this._cols[_a];var _g=_f.left;var _h=_f.right;if(!_f||_a==_b){return false;}if(_a<_b){_b+=(_d-1);}var _i=this._cols[_b];switch(_e){case "col":break;case "col,band":if(_f._area!=_i._area){return false;}break;case "col,merge":case "col,line":default:return false;}_f._area=_i._area;this._cols.splice(_a,1);this._cols.splice(_b,0,_f);var _j;if(_a>_b){for(_j=_b;_j<_a;_j++ ){this._cols[_j].left=this._cols[_j].orgleft=this._cols[_j+1].left;this._cols[_j].right=this._cols[_j].orgright=this._cols[_j+1].right;}}else{for(_j=_b;_j>_a;_j-- ){this._cols[_j].left=this._cols[_j].orgleft=this._cols[_j-1].left;this._cols[_j].right=this._cols[_j].orgright=this._cols[_j-1].right;}}this._cols[_a].left=this._cols[_a].orgleft=_g;this._cols[_a].right=this._cols[_a].orgright=_h;this._adjustFormatColSize();this._moveContentsCol("body",this._bodycells,_a,_b);this._moveContentsCol("head",this._headcells,_a,_b);this._moveContentsCol("summ",this._summcells,_a,_b);this._bodycells=this._reIndexCells(this._bodycells,this._bodyrows);this._headcells=this._reIndexCells(this._headcells,this._headrows);this._summcells=this._reIndexCells(this._summcells,this._summrows);this._updateFormatStr();return true;};_pGridFormat._addHeadRow=function(_a){if(this._headrows==null){this._headrows=[];}var _b=this.headHeight+_a;var _c={size:_a,top:this.headHeight,bottom:_b,_area:"head",orgsize:_a,orgtop:this.headHeight,orgbottom:_b};this._headrows.push(_c);this.headHeight=_b;return _c;};_pGridFormat._addSummRow=function(_a){if(this._summrows==null){this._summrows=[];}var _b=this.summHeight+_a;var _c={size:_a,top:this.summHeight,bottom:_b,_area:"summ",orgsize:_a,orgtop:this.summHeight,orgbottom:_b};this._summrows.push(_c);this.summHeight=_b;return _c;};_pGridFormat._addBodyRow=function(_a){if(this._bodyrows==null){this._bodyrows=[];}var _b=this.bodyHeight+_a;var _c={size:_a,top:this.bodyHeight,bottom:_b,_area:"body",orgsize:_a,orgtop:this.bodyHeight,orgbottom:_b};this._bodyrows.push(_c);this._body_height=this.bodyHeight=_b;return _c;};_pGridFormat._insertHeadRow=function(_a,_b){var _c={size:_b,top:0,bottom:_b,_area:"head",orgsize:_b,orgtop:0,orgbottom:_b};if(this._headrows==null||this._headrows.length==0){this._headrows=[];this._headrows.push(_c);}else{if(_a>0){if(this._headrows.length<_a){_a=this._headrows.length;}_c.top=this._headrows[_a-1].bottom;_c.bottom=_c.top+_b;}this._headrows.splice(_a,0,_c);}this.headHeight+=_b;this._adjustFormatRowSize(this._headrows);return _c;};_pGridFormat._insertSummRow=function(_a,_b){var _c={size:_b,top:0,bottom:_b,_area:"summ",orgsize:_b,orgtop:0,orgbottom:_b};if(this._summrows==null||this._summrows.length==0){this._summrows=[];this._summrows.push(_c);}else{if(_a>0){if(this._summrows.length<_a){_a=this._summrows.length;}_c.top=this._summrows[_a-1].bottom;_c.bottom=_c.top+_b;}this._summrows.splice(_a,0,_c);}this.summHeight+=_b;this._adjustFormatRowSize(this._summrows);return _c;};_pGridFormat._insertBodyRow=function(_a,_b){var _c={size:_b,top:0,bottom:_b,_area:"body",orgsize:_b,orgtop:0,orgbottom:_b};if(this._bodyrows==null||this._bodyrows.length==0){this._bodyrows=[];this._bodyrows.push(_c);}else{if(_a>0){if(this._bodyrows.length<_a){_a=this._bodyrows.length;}_c.top=this._bodyrows[_a-1].bottom;_c.bottom=_c.top+_b;}else{_a=0;}this._bodyrows.splice(_a,0,_c);}this.bodyHeight+=_b;this._body_height=this.bodyHeight;this._adjustFormatRowSize(this._bodyrows);return _c;};_pGridFormat._addHeadCell=function(_a){if(this._headcells==null){this._headcells=[];}return this._addCell(this._headcells,_a);};_pGridFormat._addSummCell=function(_a){if(this._summcells==null){this._summcells=[];}return this._addCell(this._summcells,_a);};_pGridFormat._addBodyCell=function(_a){if(this._bodycells==null){this._bodycells=[];}return this._addCell(this._bodycells,_a);};_pGridFormat._addCell=function(_a,_b){var _c=this._cols[_b._col];if(_c){_b._area=_c._area;_a.push(_b);return _b;}return undefined;};_pGridFormat._insertHeadCell=function(_a,_b,_c){if(this._headcells==null){this._headcells=[];}return this._insertCell(this._headcells,_a,_b,_c);};_pGridFormat._insertSummCell=function(_a,_b,_c){if(this._summcells==null){this._summcells=[];}return this._insertCell(this._summcells,_a,_b,_c);};_pGridFormat._insertBodyCell=function(_a,_b,_c){if(this._bodycells==null){this._bodycells=[];}return this._insertCell(this._bodycells,_a,_b,_c);};_pGridFormat._insertCell=function(_a,_b,_c,_d){var _e=this._cols[_b._col];if(_e){var _f=_a.length;var _g;var _h;for(var _i=0;_i<_f;_i++ ){_g=_a[_i];if(_h==undefined&&_g._col>=_c&&_g._row>=_d){_h=_i;}if(_g._col>=_c&&_g._row==_d){_g._col++ ;}}if(_h==undefined){_h=_f;}_b._area=_e._area;_a.splice(_h,0,_b);return _b;}return undefined;};_pGridFormat._arrayCopy=function(_a){function cloneObj(_c){var _d={};for(var _e in _c){if(_c.hasOwnProperty(_e)){_d[_e]=_c[_e];}}return _d;}var _b=[];for(var _c=0;_c<_a.length;_c++ ){_b[_c]=cloneObj(_a[_c]);}return _b;};_pGridFormat._getFormatStr=function(){return this._getCurrFormatStr();};_pGridFormat._getOrgFormatStr=function(){return this._getOrgnFormatStr();};_pGridFormat._updateFormatStr=function(){if(!this._grid.enableredraw){return;}};_pGridFormat._getCurrFormatStr=function(){var _a;var _b=0;var _c=this._cols;var _d=this._headrows;var _e=this._bodyrows;var _f=this._summrows;var _g=this._headcells;var _h=this._bodycells;var _i=this._summcells;var _j=this._headband;var _k=this._bodyband;var _l=this._summband;if(_c&&_c.length){_b=_c.length;}var _m;if(_b>0){_m="<Format id=\""+this.id+"\">\n";_m+="<Columns>\n";{for(_a=0;_a<_b;_a++ ){if(_c[_a]._area!="body"){_m+="<Column size=\""+_c[_a].size+"\" band=\""+_c[_a]._area+"\"/>\n";}else{_m+="<Column size=\""+_c[_a].size+"\"/>\n";}}}_m+="</Columns>\n";_m+="<Rows>\n";{if(_d){var _n=_d.length;for(_a=0;_a<_n;_a++ ){_m+="<Row band=\"head\" size=\""+_d[_a].size+"\"/>\n";}}if(_e){var _o=_e.length;for(_a=0;_a<_o;_a++ ){_m+="<Row band=\"body\" size=\""+_e[_a].size+"\"/>\n";}}if(_f){var _p=_f.length;for(_a=0;_a<_p;_a++ ){_m+="<Row band=\"summ\" size=\""+_f[_a].size+"\"/>\n";}}}_m+="</Rows>\n";function _makeBandPropstr(_q){var _r="";var _s=_q._property_map;var _t,_u,_v;for(var _a=0;_a<_s.length;_a++ ){_t=_s[_a][0];_u=_s[_a][1];_v=_s[_a][2];if(_u){if(_q[_t]._value!=_v){_r+="\" "+_t+"=\""+(typeof (_q[_t]._value)=="string"?nexacro._encodeXml(_q[_t]._value):_q[_t]._value);}}else{if(_q[_t]!=_v){_r+="\" "+_t+"=\""+(typeof (_q[_t])=="string"?nexacro._encodeXml(_q[_t]):_q[_t]);}}}return _r;}function _makeCellstr(_q){var _r=_q.length;for(var _a=0;_a<_r;_a++ ){_m+=_q[_a]._getXmlString();}}if(_d){_m+="<Band id=\"head"+_makeBandPropstr(_j)+"\">\n";_makeCellstr(_g);_m+="</Band>\n";}if(_e){_m+="<Band id=\"body"+_makeBandPropstr(_k)+"\">\n";_makeCellstr(_h);_m+="</Band>\n";}if(_f){_m+="<Band id=\"summary"+_makeBandPropstr(_l)+"\">\n";_makeCellstr(_i);_m+="</Band>\n";}_m+="</Format>\n";}else{_m="<Format id=\""+this.id+"\"></Format>\n";}return _m;};_pGridFormat._getOrgnFormatStr=function(){var _a="";var _b=this._grid.formats;var _c=nexacro._parseXMLDocument(_b);var _d=_c.getElementsByTagName("Format");var _e=_d?_d.length:0;for(var _h=0;_h<_e;_h++ ){var _f=_d[_h];var _g=_f.getAttribute("id");if(_g==null||_g==""){_g="default";}if(_g==this.id){_a=nexacro._documentToXml(_f);break;}}return _a;};_pGridFormat._loadFromDOM=function(_a){var _b,_c,_d,_e,_f,_g,_h;var _i;var _j,_k,_l,_m;var _n=_a.getElementsByTagName("Column");_d=_n.length;if(_d==0){_n=_a.getElementsByTagName("Col");_d=_n.length;}var _o=0;for(_b=0;_b<_d;_b++ ){var _p=_n[_b];_f=_p.getAttribute("band");_g=_p.getAttribute("size");if(_o==0&&_f=="left"){this._addLeftColumn(parseInt(_g,10));}else if(_o==2||_f=="right"){this._addRightColumn(parseInt(_g,10));_o=2;}else{this._addBodyColumn(parseInt(_g,10));_o=1;}}this._bodyWidth=this.bodyWidth;this._rearrangeCols();var _q=_a.getElementsByTagName("Row");_d=_q.length;for(_b=0;_b<_d;_b++ ){var _r=_q[_b];_f=_r.getAttribute("band");_g=_r.getAttribute("size");if(_f=="head"){this._addHeadRow((parseInt(_g)|0));}else if(_f=="summ"||_f=="summary"){this._addSummRow((parseInt(_g)|0));}else{this._addBodyRow((parseInt(_g)|0));}}this._body_height=this.bodyHeight;var _s=_a.getElementsByTagName("Band");_d=_s.length;function _setProp(_x,_y){var _z=_x._property_map;var _aa;for(var _ab=0;_ab<_z.length;_ab++ ){_aa=_z[_ab][0];_i=_y.getAttribute(_aa);if(_i!==null&&_i!==undefined){_x["set_"+_aa](_i);}}}for(_b=0;_b<_d;_b++ ){_l=_s[_b];_h=_l.getAttribute("id");if(_h=="head"){if(this._headband==null){this._headband=new nexacro.GridBandInfo("head","head",this,this.parent);}_j=this._headband;}else if(_h=="summary"){if(this._summband==null){this._summband=new nexacro.GridBandInfo("summary","summ",this,this.parent);}_j=this._summband;}else{_h="body";if(this._bodyband==null){this._bodyband=new nexacro.GridBandInfo("body","body",this,this.parent);}_j=this._bodyband;}_setProp(_j,_l);var _t=_l.getElementsByTagName("Cell");_e=_t.length;var _u=0;var _v= -1;for(_c=0;_c<_e;_c++ ){if(_u>0){_u-- ;continue;}else{_v++ ;_k=new nexacro.GridCellInfo(_h+_v,_j,this.parent,_h,_v);}_m=_t[_c];_k._loadXmlElement(_m,nexacro.GridCellInfo);var _w=_m.getElementsByTagName("Cell");_u=_w.length;if(_h=="head"){this._addHeadCell(_k);}else if(_h=="summary"){this._addSummCell(_k);}else{this._addBodyCell(_k);}}}this._bodycells=this._sortCellIdx(this._bodycells,this._bodyrows);this._headcells=this._sortCellIdx(this._headcells,this._headrows);this._summcells=this._sortCellIdx(this._summcells,this._summrows);};_pGridFormat._sortCellIdx=function(_a,_b){if(!_a||!_b){return null;}var _c=[];var _d=_a.length;var _e=_b.length;var _f=0;for(var _g=0;_g<_e;_g++ ){for(var _h=0;_h<_d;_h++ ){if(_a[_h]._row==_g){_a[_h]._cellidx=_f++ ;_c.push(_a[_h]);}}}return _c;};_pGridFormat._getFormatCellSize=function(_a,_b,_c,_d,_e,_f){var _g=this._cols;var _h=this._bodyrows;var _i=0,_j=0;var _k=_a+_c;var _l=_b+_d;if(_e== -1){_h=this._headrows;}else if(_e== -2){_h=this._summrows;}var _m;for(_m=_a;_m<_k;_m++ ){_i+=_g[_m].orgsize;}for(_m=_b;_m<_l;_m++ ){_j+=_h[_m].orgsize;}return [_i,_j];};_pGridFormat._adjustColSizing=function(_a,_b){if(_b!=0){var _c=this._cols.length;if(_c==0&&!this._cols[_a]){return false;}var _d=this._cols[_a]._area;if(_d=="body"){this.bodyWidth=this._bodyWidth=this._bodyWidth+_b;}else if(_d=="left"){this.leftWidth+=_b;}else{this.rightWidth+=_b;}var _e;for(var _f=0;_f<_c;_f++ ){if(_f<_a){continue;}else if(_f==_a){_e=this._cols[_f];if(_e._area!=_d){continue;}_e.right+=_b;_e.size+=_b;}else{_e=this._cols[_f];if(_e._area!=_d){continue;}_e.left+=_b;_e.right+=_b;}}this._updateFormatStr();return true;}return false;};_pGridFormat._adjustColWidth=function(_a,_b){if(_a<=0){return false;}var _c=false;if(this._bodyWidth!=_a){_c=true;}this._bodyWidth=_a;var _d=_a/this.bodyWidth;this.bodyWidth=this._bodyWidth;var _e=this._cols.length;var _f,_g= -1;var _h=0;var _i=0;var _j;if(!_b.length){for(_j=0;_j<_e;_j++ ){_f=this._cols[_j];if(_f._area!="body"){continue;}_f.left=_h;if(_f.tempsize!=undefined){_f.size=_f.tempsize;_f.tempsize=undefined;}_f.size*=_d;_b[_j]=_f.size/_a;if(_f.size>=0.5){_f.size=Math.round(_f.size);}_i+=_f.size;_h=_h+_f.size;_f.right=_h;if(_f.size>0){_g=_f;}}}else{for(_j=0;_j<_e;_j++ ){_f=this._cols[_j];if(_f._area!="body"){continue;}_f.left=_h;_f.size=_a* _b[_j];if(_f.size>=0.5){_f.size=Math.round(_f.size);}_i+=_f.size;_h=_h+_f.size;_f.right=_h;_g=_f;}}if(_g&&_g.size>0){_g.tempsize=_g.size;_g.size+=(_a-_i);_g.right+=(_a-_i);if(_g.size<=0){_g.size=1;_g.right=_g.left+_g.size;}}return _c;};_pGridFormat._adjustRowHeight=function(_a){if(_a==0){_a=0.1;}if(this._body_height!=_a){this._body_height=_a;var _b=_a/this.bodyHeight;this.bodyHeight=this._body_height;if(!this._rows){return true;}var _c=this._rows.length;var _d;var _e=0;for(var _f=0;_f<_c;_f++ ){_d=this._rows[_f];if(_d._area!="body"){continue;}_d.top=_e;_d.size=(_d.size* _b);_e=_e+_d.size;_d.bottom=_e;}return true;}return false;};_pGridFormat._defaultColSize=40;_pGridFormat._appendContentsCol=function(_a,_b,_c,_d,_e,_f){var _g=(_c)?_c.length:0;var _h=(_d)?_d.length:0;var _i=null;var _j;for(_j=0;_j<_g;_j++ ){_c[_j]._endcol=false;if(_c[_j]._col>=_f){_c[_j]._col++ ;}}for(_j=0;_j<_h;_j++ ){_i=new nexacro.GridCellInfo(_a+_g,_b,this.parent,_a,_g);_i.celltype=_a;_i._col=_f;_i._colspan=1;_i._row=_j;_i._rowspan=1;this[_e](_i);_g++ ;}_c[_c.length-1]._endcol=true;this._arrangeCellIdx(_a);this._updateFormatStr();};_pGridFormat._arrangeCellIdx2=function(_a,_b){var _c=0;var _d;var _e=[];for(var _f=0;_f<_b;_f++ ){for(var _g=0;_g<_a.length;_g++ ){_d=_a[_g];if(_f==_d._row){_d._cellidx=_c;_e[_c++ ]=_d;_a.splice(_g,1);_g-- ;}}}return _e;};_pGridFormat._arrangeCellIdx=function(_a){var _b=this._bodycells;var _c=this._bodyrows;if(_a=="body"){_b=this._bodycells;_c=this._bodyrows;}else if(_a=="summ"||_a=="summary"){_b=this._summcells;_c=this._summrows;}else if(_a=="head"){_b=this._headcells;_c=this._headrows;}var _d=(_c)?_c.length:0;var _e=this._arrangeCellIdx2(_b,_d);if(_a=="body"){this._bodycells=_e;}else if(_a=="summ"||_a=="summary"){this._summcells=_e;}else if(_a=="head"){this._headcells=_e;}};_pGridFormat.appendContentsCol=function(_a,_b){var _c="body";if(_b==undefined){_b=true;}_b=nexacro._toBoolean(_b);if(_b==false){var _d=this._getColFixCnt("right");if(_d){_c="right";}else{_c="body";}}else{if(_a){var _e=parseInt(_a,10);if(isFinite(_e)){if(_e== -1){_c="left";}else if(_e== -2){_c="right";}else{_c="body";}}else if(_a.length){_c=_a.toLowerCase();}}}var _f= -1;var _g;var _h=this._defaultColSize;if(_c=="left"){_g=this._getColFixCnt("left");this._addLeftColumn(_h);}else if(_c=="right"){_g=this._cols.length;this._addRightColumn(_h);}else{_g=this._getColFixCnt("left");_g+=this._getColFixCnt("body");this._addBodyColumn(_h);this.endbodycol=this._cols.length;}var _i,_j,_k,_l,_m;if(this._bodyband&&this._bodyrows&&this._bodyrows.length>0){_f=_g;_i="body";_j=this._bodyband;_k=this._bodycells;_l=this._bodyrows;_m="_addBodyCell";this._appendContentsCol(_i,_j,_k,_l,_m,_g);}if(this._headband&&this._headrows&&this._headrows.length>0){_f=_g;_i="head";_j=this._headband;_k=this._headcells;_l=this._headrows;_m="_addHeadCell";this._appendContentsCol(_i,_j,_k,_l,_m,_g);}if(this._summband&&this._summrows&&this._summrows.length>0){_f=_g;_i="summary";_j=this._summband;_k=this._summcells;_l=this._summrows;_m="_addSummCell";this._appendContentsCol(_i,_j,_k,_l,_m,_g);}this._rearrangeCols();return _f;};_pGridFormat._moveContentsCol=function(_a,_b,_c,_d,_e,_f){if(!_b){return;}var _g=_b.length;var _h=(this._cols)?(this._cols.length-1): -1;var _i,_j;var _k={};var _l;var _m;for(_m=0;_m<_g;_m++ ){_i=_b[_m];_l=_i._col;_k[_l]=_i._area;}for(_m=0;_m<_g;_m++ ){_i=_b[_m];_j=_i._col;if(_i._orgcol==undefined){_i._orgcol=_j;}if(_j==_c){_i._area=_k[_d];_i._col=_d;}else{if(_c<_d){if(_j>_c&&_j<=_d){_i._col-- ;}}else{if(_j<_c&&_j>=_d){_i._col++ ;}}}if(_i._col==_h){_i._endcol=true;}else{_i._endcol=false;}}this._arrangeCellIdx(_a);};_pGridFormat._reIndexCells=function(_a,_b){if(!_a||!_b){return;}var _c=_b.length;var _d=_a.length;var _e,_f=0,_g=0;var _h=[],_i=[];for(_e=0;_e<_c;_e++ ){_h=[];_g=0;for(_f=0;_f<_d;_f++ ){if(_a[_f]._row==_e){_h[_g++ ]=_a[_f];}}_h.sort(function(_j,_k){return _j._col-_k._col;});_i=_i.concat(_h);}for(_e=0;_e<_d;_e++ ){_i[_e]._cellidx=_e;}return _i;};_pGridFormat._insertContentsCol=function(_a,_b,_c,_d,_e,_f){var _g=_f;var _h=_c.length;var _i=_d.length;var _j=null;var _k=[];var _l,_m;for(_l=0;_l<_h;_l++ ){_j=_c[_l];if(_j._col<_f&&(_j._col+_j._colspan-1)>=_f){_k.push(_j);}}var _n;if(_k.length>0){for(_l=0;_l<_k.length;_l++ ){_n=_k[_l];_n._colspan++ ;if(_n._subcells.length>0){var _o=_g-_n._col;_j=new nexacro.GridCellInfo(_a+_h+"_sub"+_o,_b,this.parent,_a,_n._subcells.length);_j.celltype=_a;_j._col=_o;_j._colspan=1;_j._row=0;_j._rowspan=1;_j._isSubCell=true;this._insertCell(_n._subcells,_j,_o,0);}for(_m=0;_m<_h;_m++ ){_j=_c[_m];if(_j._col>=_f&&_j._row==_n._row){_j._col++ ;}}}}for(_l=0;_l<_i;_l++ ){for(_m=0;_m<_k.length;_m++ ){_n=_k[_m];if(_n._row==_l){break;}}if(_n&&_n._row==_l){continue;}_j=new nexacro.GridCellInfo(_a+_h,_b,this.parent,_a,_h);_j.celltype=_a;_j._col=_g;_j._colspan=1;_j._row=_l;_j._rowspan=1;this[_e](_j,_g,_l);_h++ ;}var _p=(this._cols)?(this._cols.length-1): -1;_h=_c.length;for(_l=0;_l<_h;_l++ ){_j=_c[_l];if(_j._col==_p){_j._endcol=true;}else{_j._endcol=false;}}this._arrangeCellIdx(_a);this._updateFormatStr();};_pGridFormat.insertContentsCol=function(_a,_b,_c){var _d="body";if(_c==undefined){_c=true;}_c=nexacro._toBoolean(_c);var _e=this._getColFixCnt("left");var _f=this._getColFixCnt("body");var _g=this._getColFixCnt("right");if(_a!=undefined){var _h=parseInt(_a,10);if(isFinite(_h)){if(_b!=undefined){if(_h== -1){_d="left";}else if(_h== -2){_d="right";}else{_d="body";}if(_b<0){_b=0;}if(_c){if(_d=="body"){_b+=_e;}else if(_d=="right"){_b+=_e;_b+=_f;}if(_d=="left"){if(_b>_e){_b=_e;}}else if(_d=="body"){if(_b>_e+_f){_b=_e+_f;}}else{if(_b>_e+_f+_g){_b=_e+_f+_g;}}}else{if(_b>this._cols.length){_b=this._cols.length;}if(_b<_e){_d="left";}else if(_b>=_e+_f&&_b<_e+_f+_g){_d="right";}else{_d="body";}}}else{if(_h<0){_h=0;}else if(_h>this._cols.length){_h=this._cols.length;}_b=_h;}}else if(_a.length){_d=_a.toLowerCase();if(_b==undefined){return  -1;}else if(_b<0){_b=0;}if(_c){if(_d=="body"){_b+=_e;}else if(_d=="right"){_b+=_e;_b+=_f;}if(_d=="left"){if(_b>_e){_b=_e;}}else if(_d=="body"){if(_b>_e+_f){_b=_e+_f;}}else{if(_b>_e+_f+_g){_b=_e+_f+_g;}}}else{if(_b>this._cols.length){_b=this._cols.length;}if(_b<_e){_d="left";}else if(_b>=_e+_f&&_b<_e+_f+_g){_d="right";}else{_d="body";}}}}var _i= -1;var _j=this._defaultColSize;if(_d=="left"){this._insertLeftColumn(_j,_b);}else if(_d=="right"){this._insertRightColumn(_j,_b);}else{this._insertBodyColumn(_j,_b);this.endbodycol=this._cols.length;}var _k,_l,_m,_n,_o;if(this._bodyband){_i=_b;_k="body";_l=this._bodyband;_m=this._bodycells;_n=this._bodyrows;_o="_insertBodyCell";this._insertContentsCol(_k,_l,_m,_n,_o,_b);}if(this._headband){_i=_b;_k="head";_l=this._headband;_m=this._headcells;_n=this._headrows;_o="_insertHeadCell";this._insertContentsCol(_k,_l,_m,_n,_o,_b);}if(this._summband){_i=_b;_k="summary";_l=this._summband;_m=this._summcells;_n=this._summrows;_o="_insertSummCell";this._insertContentsCol(_k,_l,_m,_n,_o,_b);}this._rearrangeCols();return _i;};_pGridFormat._defaultRowSize=24;_pGridFormat._appendContentsRow=function(_a,_b,_c,_d,_e,_f){var _g=(_d)?_d.length:0;var _h=this._defaultRowSize;this[_e](_h);var _i=(_c)?_c.length:0;var _j=this._cols.length;var _k=null;if(_j==0){this._addBodyColumn(this._defaultColSize);_j=this._cols.length;}for(var _l=0;_l<_j;_l++ ){_k=new nexacro.GridCellInfo(_a+_i,_b,this.parent,_a,_i);_k.celltype=_a;_k._col=_l;_k._colspan=1;_k._row=_g;_k._rowspan=1;_k._endcol=((_l+1)==this.endbodycol);this[_f](_k);_i++ ;}this._updateFormatStr();return _g;};_pGridFormat.appendContentsRow=function(_a,_b){var _c="";if(_a!=undefined){var _d=parseInt(_a,10);if(isFinite(_d)){if(_d== -1){_c="head";}else if(_d== -2){_c="summ";}else if(_d>=0){_c="body";}}else if(_a.length){_c=_a.toLowerCase();}if(_c==""){return  -1;}}var _e= -1;var _f,_g,_h,_i,_j;if(_c=="head"){if(this._headband==null){this._headband=new nexacro.GridBandInfo("head","head",this,this.parent);}_f=this._headband;_g=this._headcells;_h=this._headrows;_i="_addHeadRow";_j="_addHeadCell";_e=this._appendContentsRow("head",_f,_g,_h,_i,_j);}else if(_c=="summ"||_c=="summary"){if(this._summband==null){this._summband=new nexacro.GridBandInfo("summary","summ",this,this.parent);}_f=this._summband;_g=this._summcells;_h=this._summrows;_i="_addSummRow";_j="_addSummCell";_e=this._appendContentsRow("summary",_f,_g,_h,_i,_j);}else if(_c=="body"){if(this._bodyband==null){this._bodyband=new nexacro.GridBandInfo("body","body",this,this.parent);}_f=this._bodyband;_g=this._bodycells;_h=this._bodyrows;_i="_addBodyRow";_j="_addBodyCell";_e=this._appendContentsRow("body",_f,_g,_h,_i,_j);}return _e;};_pGridFormat._deleteRowCell=function(_a,_b){var _c=this._bodycells;if(_a=="summary"){_a="summ";}if(_a=="head"){_c=this._headcells;}else if(_a=="summ"){_c=this._summcells;}if(_c==null||_c.length==0){return undefined;}var _d;var _e,_f;var _g,_h;for(var _i=0;_i<_c.length;_i++ ){if(_c[_i]._row==_b){_d=_c[_i]._rowspan;if(_d==1){delete _c[_i];_c.splice(_i,1);_i-- ;}else{_e=_c[_i]._subcells;for(_g=0;_g<_e.length;_g++ ){_f=_e[_g];if(_f._row+_c[_i]._row==_b){_e.splice(_g,1);for(_h=_g;_h<_e.length;_h++ ){_e[_h]._cellidx-- ;}_g-- ;}else if(_f._row+_c[_i]._row>_b){_f._row-- ;}else if(_f._row+_c[_i]._row<_b&&(_f._row+_c[_i]._row+_f._rowspan-1)>=_b){_f._rowspan-- ;}}_c[_i]._rowspan-- ;}}else if(_c[_i]._row>_b){_c[_i]._row-- ;}else{if((_c[_i]._row+_c[_i]._rowspan-1)>=_b){_e=_c[_i]._subcells;for(_g=0;_g<_e.length;_g++ ){_f=_e[_g];if(_f._row+_c[_i]._row==_b){_e.splice(_g,1);for(_h=_g;_h<_e.length;_h++ ){_e[_h]._cellidx-- ;}_g-- ;}else if(_f._row+_c[_i]._row>_b){_f._row-- ;}else if(_f._row+_c[_i]._row<_b&&(_f._row+_c[_i]._row+_f._rowspan-1)>=_b){_f._rowspan-- ;}}_c[_i]._rowspan-- ;}}}this._arrangeCellIdx(_a);this._updateFormatStr();};_pGridFormat._deleteRow=function(_a,_b){_a=_a.toLowerCase();if(_a=="summary"){_a="summ";}this._deleteRowCell(_a,_b);var _c=this._bodyrows;if(_a=="head"){_c=this._headrows;}else if(_a=="summ"){_c=this._summrows;}if(_c==null||_c.length==0||_c.length<=_b){return  -1;}var _d=_c[_b].size;_c.splice(_b,1);var _e=_c.length;for(var _f=_b;_f<_e;_f++ ){_c[_f].top-=_d;_c[_f].bottom-=_d;}if(_a=="head"){this.headHeight-=_d;}else if(_a=="summ"){this.summHeight-=_d;}else{this._body_height=this.bodyHeight-=_d;}return _b;};_pGridFormat.deleteContentsRow=function(_a,_b,_c){var _d="";if(_c==undefined){_c=true;}if(_a!=undefined){var _e=parseInt(_a,10);if(isFinite(_e)){if(_e== -1){_d="head";}else if(_e== -2){_d="summ";}else if(_e>=0){_d="body";}}else if(_a.length){_d=_a.toLowerCase();}if(_d==""){return  -1;}}var _f=this._deleteRow(_d,_b);if(_f!= -1){if(this._grid.getFormatRowCount()==0){var _g=this._cols;_g.splice(0,_g.length);this.leftWidth=0;this.rightWidth=0;this.bodyWidth=0;this._bodyWidth=0;this.endbodycol=0;_g=null;}this._updateFormatStr(_d.toLowerCase());}return _f;};_pGridFormat._insertContentsRow=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._defaultRowSize;this[_e](_g,_h);var _i=(_c)?_c.length:0;var _j=this._cols.length;var _k=null;if(_j==0){this._addBodyColumn(this._defaultColSize);_j=this._cols.length;}var _l=[];var _m,_n;for(_m=0;_m<_i;_m++ ){_k=_c[_m];if(_k._row<_g){if((_k._row+_k._rowspan-1)>=_g){_l.push(_k);}}else{_k._row++ ;}}if(_l.length>0){var _o,_p;var _q=[];for(_m=0;_m<_l.length;_m++ ){_o=_l[_m];_p=_o._subcells;_o._rowspan++ ;_q.push(_o._col);if(_p.length){for(_n=0;_n<_p.length;_n++ ){if(_p[_n]._row>=_g-_o._row){_p[_n]._row++ ;}}for(_n=_o._col;_n<_o._col+_o._colspan;_n++ ){_k=new nexacro.GridCellInfo(_a+_o._cellidx+"_sub"+_p.length,_b,this.parent,_a,_p.length);_k.celltype=_a;_k._col=_n-_o._col;_k._colspan=1;_k._row=_g-_o._row;_k._rowspan=1;_k._endcol=((_n+1)==this.endbodycol);this._addCell(_p,_k);}_o._subcells=this._arrangeCellIdx2(_p,_o._rowspan);}}if(_o){for(_m=0;_m<_j;_m++ ){if(_q[0]==_m){_q.splice(0,1);continue;}_k=new nexacro.GridCellInfo(_a+_i,_b,this.parent,_a,_i);_k.celltype=_a;_k._col=_m;_k._colspan=1;_k._row=_g;_k._rowspan=1;_k._endcol=((_m+1)==this.endbodycol);this[_f](_k);_i++ ;}}}else{for(_m=0;_m<_j;_m++ ){_k=new nexacro.GridCellInfo(_a+_i,_b,this.parent,_a,_i);_k.celltype=_a;_k._col=_m;_k._colspan=1;_k._row=_g;_k._rowspan=1;_k._endcol=((_m+1)==this.endbodycol);this[_f](_k);_i++ ;}}this._arrangeCellIdx(_a);this._updateFormatStr();return _g;};_pGridFormat.insertContentsRow=function(_a,_b,_c){var _d="";if(_c==undefined){_c=true;}if(_a!=undefined){var _e=parseInt(_a,10);if(isFinite(_e)){if(_e== -1){_d="head";}else if(_e== -2){_d="summ";}else if(_e>=0){_d="body";}}else if(_a.length){_d=_a.toLowerCase();}if(_d==""){return  -1;}}var _f= -1;if(_b<0){return  -1;}var _g,_h,_i,_j,_k;if(_d=="head"){if(this._headband==null){this._headband=new nexacro.GridBandInfo("head","head",this,this.parent);}_g=this._headband;_h=this._headcells;_i=this._headrows;_j="_insertHeadRow";_k="_addHeadCell";if(_i&&_b>_i.length){_b=_i.length;}_f=this._insertContentsRow("head",_g,_h,_i,_j,_k,_b);}else if(_d=="summ"||_d=="summary"){if(this._summband==null){this._summband=new nexacro.GridBandInfo("summary","summ",this,this.parent);}_g=this._summband;_h=this._summcells;_i=this._summrows;_j="_insertSummRow";_k="_addSummCell";if(_i&&_b>_i.length){_b=_i.length;}_f=this._insertContentsRow("summary",_g,_h,_i,_j,_k,_b);}else{if(this._bodyband==null){this._bodyband=new nexacro.GridBandInfo("body","body",this,this.parent);}_g=this._bodyband;_h=this._bodycells;_i=this._bodyrows;_j="_insertBodyRow";_k="_addBodyCell";if(_i&&_b>_i.length){_b=_i.length;}_f=this._insertContentsRow("body",_g,_h,_i,_j,_k,_b);}return _f;};_pGridFormat._deleteColCell=function(_a){var _b=this._headcells;var _c=this._summcells;var _d=this._bodycells;var _e=(this._cols)?(this._cols.length-1): -1;if(!_b&&!_c&&!_d){return undefined;}var _f=function(_g,_a){if(!_g){return;}for(var _j=0;_j<_g.length;_j++ ){if(_g[_j]._col==_e){_g[_j]._endcol=true;}else{_g[_j]._endcol=false;}if(_g[_j]._col==_a){var _h=_g[_j]._colspan;if(_h==1){delete _g[_j];_g.splice(_j,1);for(var _k=_j;_k<_g.length;_k++ ){_g[_k]._cellidx-- ;}_j-- ;}else{_a=_g[_j]._col;_g[_j]._colspan-- ;_f(_g[_j]._subcells,0);}}else if(_g[_j]._col>_a){_g[_j]._col-- ;}else{if((_g[_j]._col+_g[_j]._colspan-1)>=_a){_g[_j]._colspan-- ;var _i=_a-_g[_j]._col;_f(_g[_j]._subcells,_i);}}}};_f(_b,_a);_f(_c,_a);_f(_d,_a);};_pGridFormat._deleteColumn=function(_a,_b){var _c=this._cols;if(_c==null||_c.length==0||_c.length<=_b){return  -1;}if(_c[_b]._area!=_a){return  -1;}this._deleteColCell(_b);var _d=_c[_b].size;_c.splice(_b,1);var _e=_c.length;var _f;if(_a=="left"){for(_f=_b;_f<_e;_f++ ){if(_c[_f]._area=="left"){_c[_f].left-=_d;_c[_f].right-=_d;}}this.leftWidth-=_d;}else if(_a=="right"){for(_f=_b;_f<_e;_f++ ){if(_c[_f]._area=="right"){_c[_f].left-=_d;_c[_f].right-=_d;}}this.rightWidth-=_d;}else{for(_f=_b;_f<_e;_f++ ){if(_c[_f]._area=="body"){_c[_f].left-=_d;_c[_f].right-=_d;}}this.bodyWidth-=_d;this._bodyWidth=this.bodyWidth;this.endbodycol=this._cols.length;}return _b;};_pGridFormat._getColFixCnt=function(_a){var _b=0;var _c=0;var _d=0;var _e=this._cols;var _f=_e.length;for(var _g=0;_g<_f;_g++ ){if(_e[_g]._area=="left"){_b++ ;}else if(_e[_g]._area=="body"){_c++ ;}else if(_e[_g]._area=="right"){_d++ ;}}if(_a=="left"){return _b;}else if(_a=="right"){return _d;}else{return _c;}};_pGridFormat.deleteContentsCol=function(_a,_b,_c){if(_c==undefined){_c=false;}var _d="body";if(_a!=undefined){var _e=parseInt(_a,10);if(isFinite(_e)){if(_b!=undefined){if(_e== -1){_d="left";}else if(_e== -2){_d="right";}else{_d="body";}if(_b<0){return  -1;}else if(_b>this._cols.length){return  -1;}}else{if(_e<0){return  -1;}else if(_e>this._cols.length){return  -1;}_b=_e;}}else if(_a.length){_d=_a.toLowerCase();if(_b==undefined){return  -1;}}}if(_c==true){if(_d=="body"){_b+=this._getColFixCnt("left");}else if(_d=="right"){_b+=this._getColFixCnt("left");_b+=this._getColFixCnt("body");}}else{var _f=this._getColFixCnt("left");var _g=this._getColFixCnt("body");var _h=this._getColFixCnt("right");if(_b<_f){_d="left";}else if(_b>=_f+_g&&_b<_f+_g+_h){_d="right";}else{_d="body";}}if(this._cols.length<=_b||_b<0){return  -1;}var _i=this._deleteColumn(_d,_b);if(_i!= -1){if(this._grid.getFormatColCount()==0){if(this._headrows){this._headrows.splice(0,this._headrows.length);this.headHeight=0;}if(this._summrows){this._summrows.splice(0,this._summrows.length);this.summHeight=0;}if(this._bodyrows){this._bodyrows.splice(0,this._bodyrows.length);this._body_height=0;this.bodyHeight=0;}}this._updateFormatStr();this._rearrangeCols();}return _i;};_pGridFormat.mergeContentsCell=function(_a,_b,_c,_d,_e,_f,_g){var _h=_a.toLowerCase();if(_h!="head"&&_h!="summ"){if(_h=="summary"){_h="summ";}else{_h="body";}}var _i=parseInt(_b,10);var _j=parseInt(_c,10);var _k=parseInt(_d,10);var _l=parseInt(_e,10);var _m=parseInt(_f,10);if(!isFinite(_i)||!isFinite(_j)||!isFinite(_k)||!isFinite(_l)){return  -1;}if(_j>_l||_i>_k){return  -1;}var _n=this._cols.length;if(_j<0||_j>=_n||_l<0||_l>=_n){return  -1;}var _o=null;var _p=null;if(_h=="head"){_o=this._headrows;_p=this._headcells;}else if(_h=="summ"){_o=this._summrows;_p=this._summcells;}else{_o=this._bodyrows;_p=this._bodycells;}var _q=(_p)?_p.length:0;var _r=(_o)?_o.length:0;if(_q==0){return  -1;}if(_i<0||_i>=_r||_k<0||_k>=_r){return  -1;}var _s;var _t= -1;var _u=[];var _v;var _w;for(_v=0;_v<_q;_v++ ){_w=_p[_v];if((_w._row>=_i&&_w._row<=_k)&&(_w._col>=_j&&_w._col<=_l)){if(_s&&_s!=_p[_v]._area){return  -1;}else{_s=_p[_v]._area;}_u[_v]=true;if(_w._rowspan>1||_w._colspan>1){_t=_v;}}else{_u[_v]=false;}}if(_t>=0&&_p[_t]._rowspan>_k&&_p[_t]._colspan>_l){return  -1;}if(!_m||_m<0){_m=0;}var _x= -1;var _y=_p[_m];var _z=[];if(!_g&&!_y){return  -1;}for(_v=_q-1;_v>=0;_v-- ){if(_u[_v]){if(_g){if(_p[_v]._col==_j&&_p[_v]._row==_i){var _aa=new nexacro.GridCellInfo(_p[_v].id,_p[_v].parent,_p[_v]._grid,_p[_v].celltype,_p[_v]._cellidx);_aa._row=_p[_v]._row;_aa._rowspan=(_k-_i)+1;_aa._col=_p[_v]._col;_aa._colspan=(_l-_j)+1;_aa._isSubCell=false;_aa._area=_p[_v]._area;_aa._endcol=_p[_v]._endcol;_z.unshift(_p[_v]);for(var _ac=0;_ac<_z.length;_ac++ ){_z[_ac]._col-=_aa._col;_z[_ac]._row-=_aa._row;_z[_ac]._cellidx=_ac;_z[_ac]._isSubCell=true;_z[_ac]._id=_z[_ac].name=_p[_v].id+"_sub"+_ac;}_aa._subcells=_z;_p[_v]=_aa;_z=[];_x=_v;}else{_z.unshift(_p[_v]);_p.splice(_v,1);}}else{if(_y._row<_i||_y._row>_k||_y._col<_j||_y._col>_l){return  -1;}if(_p[_v]._col==_j&&_p[_v]._row==_i){_x=_p[_v]._cellidx;_y._row=_p[_v]._row;_y._col=_p[_v]._col;_y._rowspan=(_k-_i)+1;_y._colspan=(_l-_j)+1;_p[_v]=_y;}else{_p.splice(_v,1);}}}}var _ab=_p.length;for(_v=0;_v<_ab;_v++ ){_p[_v]._cellidx=_v;}this._updateFormatStr();return _x;};_pGridFormat.splitContentsCell=function(_a,_b,_c,_d,_e,_f){var _g=null;var _h=null;var _i=this._cols;var _j=_a.toLowerCase();if(_j=="head"){_g=this._headrows;_h=this._headcells;}else if(_j=="summ"||_j=="summary"){_g=this._summrows;_h=this._summcells;}else{_g=this._bodyrows;_h=this._bodycells;}var _k=(_g)?_g.length:0;var _l=(_i)?_i.length:0;if(_k>0&&_l>0){if(_b<0||_d>=_k){if(_b<0){_b=0;}else{_d=_k-1;}}if(_c<0||_e>=_l){if(_c<0){_c=0;}else{_e=_l-1;}}var _m=[];var _n=0;var _o=0;var _p=null;var _q=null;var _r=null;var _s;if(_h){for(_s=0;_s<_h.length;_s++ ){var _t=_h[_s]._row;var _u=_h[_s]._col;var _v=_h[_s]._area;_h[_s]._cellidx=_u+(_l* _t);_p=_h[_s]._subcells;_q=(_h[_s]._colspan+_h[_s]._col)-1;_r=(_h[_s]._rowspan+_h[_s]._row)-1;var _w;if(_p.length>0){if((_q>=_c&&_q<=_e)&&(_r>=_b&&_r<=_d)){for(_w=0;_w<_p.length;_w++ ){_o++ ;_p[_w]._row=_t;_p[_w]._col=_u;_p[_w]._area=_v;_p[_w]._isSubCell=false;if(_h[_s+1]&&_h[_s]._col<_p[_w]._col&&_p[_w]._col<_h[_s+1]._col){_p[_w]._cellidx=_u+1+(_l* _t);}else{_p[_w]._cellidx=_u+(_l* _t);}var _x=_p[_w]._rowspan;var _y=_p[_w]._colspan;_u=_u+_y;if(_h[_s]._col+(_h[_s]._colspan-1)<_u){_t=_t+_x;_u=_h[_s]._col;}_m.push(_p[_w]);}_h[_s]._subcells=[];_h[_s].destroy();}else{_h[_s]._cellidx=_h[_s]._col+(_h[_s]._row* _l);_m.push(_h[_s]);}}else{if(_f){if((_q>=_c&&_q<=_e)&&(_r>=_b&&_r<=_d)){if((_h[_s]._rowspan* _h[_s]._colspan)>1){var _z=null;_m.push(_h[_s]);for(_w=0;_w<(_h[_s]._rowspan* _h[_s]._colspan)-1;_w++ ){_o++ ;_z=new nexacro.GridCellInfo(_j+_n,_h[_s].parent,_h[_s]._grid,_h[_s].celltype,_n++ );_z._area=_v;_z._rowspan=1;_z._colspan=1;_z._isSubCell=false;_z.text._set(_h[_s].text._value);if(_u<_h[_s]._col+(_h[_s]._colspan-1)){_u++ ;}else{_t++ ;_u=_h[_s]._col;}_z._cellidx=_u+(_l* _t);_z._row=_t;_z._col=_u;_m.push(_z);}_h[_s]._colspan=1;_h[_s]._rowspan=1;}else{_m.push(_h[_s]);}}else{_m.push(_h[_s]);}}else{_m.push(_h[_s]);}}}}if(_o>0){_m.sort(function(_aa,_ab){return _aa._cellidx-_ab._cellidx;});for(_s=0;_s<_m.length;_s++ ){_m[_s]._cellidx=_s;}if(_j=="head"){this._headcells=_m;}else if(_j=="summ"||_j=="summary"){this._summcells=_m;}else{this._bodycells=_m;}this._updateFormatStr();return _o;}}return  -1;};_pGridFormat.setBandProperty=function(_a,_b,_c){var _d=null;var _e=_a.toLowerCase();if(_e=="head"){_d=this._headband;}else if(_e=="summ"||_e=="summary"){_d=this._summband;}else{_d=this._bodyband;}if(_d){if(_d["set_"+_b]){_d["set_"+_b](_c);}this._updateFormatStr();return _d;}return undefined;};_pGridFormat.setSubCellProperty=function(_a,_b,_c,_d,_e){var _f=null;var _g=_a.toLowerCase();if(_g=="head"){if(this._headband){_f=this._headcells[_b];}}else if(_g=="summ"||_g=="summary"){if(this._summband){_f=this._summcells[_b];}}else{if(this._bodyband){_f=this._bodycells[_b];}}if(_f){if(_f._subcells.length>_c&&_c>=0){_f=_f._subcells[_c];if(_f){if(_f["set_"+_d]){_f["set_"+_d](_e);}this._updateFormatStr();return _f;}}}};_pGridFormat.setCellProperty=function(_a,_b,_c,_d){var _e=null;var _f=_a.toLowerCase();if(_f=="head"){if(this._headband){_e=this._headcells[_b];}}else if(_f=="summ"||_f=="summary"){if(this._summband){_e=this._summcells[_b];}}else{if(this._bodyband){_e=this._bodycells[_b];}}if(_e){if(_e["set_"+_c]){_e["set_"+_c](_d);}this._updateFormatStr();return _e;}};_pGridFormat.getSubCellProperty=function(_a,_b,_c,_d){var _e=null;var _f=_a.toLowerCase();if(_f=="head"){if(this._headband){_e=this._headcells[_b];}}else if(_f=="summ"||_f=="summary"){if(this._summband){_e=this._summcells[_b];}}else{if(this._bodyband){_e=this._bodycells[_b];}}if(_e){if(_e._subcells.length>_c&&_c>=0){_e=_e._subcells[_c];if(_e){var _g=_e[_d];if(_g==undefined){_g=_e["_"+_d];}if(_g!=undefined){var _h=typeof (_g);if(_h=="number"||_h=="string"){return _g;}else{var _i;if(_d=="expr"){_i=_g._bindexpr;}else{if(_g._bindtype==2){_i=_g._bindexpr;if(_i.toLowerCase().indexOf("expr:")<0){_i="expr:"+_i;}}else{_i=_g._value;}}if(_i){return _i;}else{return _g;}}}}}}return undefined;};_pGridFormat.getCellProperty=function(_a,_b,_c){var _d=null;var _e=_a.toLowerCase();if(_e=="head"){if(this._headband){_d=this._headcells[_b];}}else if(_e=="summ"||_e=="summary"){if(this._summband){_d=this._summcells[_b];}}else{if(this._bodyband){_d=this._bodycells[_b];}}if(_d){if(_c=="subcell"){return _d._subcells.length;}var _f=_d[_c];if(_f==undefined){_f=_d["_"+_c];}if(_f!=undefined){var _g=typeof (_f);if(_g=="number"||_g=="string"){return _f;}else{var _h;if(_f instanceof nexacro.BindableValue){if(_c=="expr"){_h=_f._bindexpr;}else{if(_f._bindtype==2){_h=_f._bindexpr;if(_h.toLowerCase().indexOf("expr:")<0){_h="expr:"+_h;}}else{_h=_f._value;}}}else{_h=_f;}return _h;}}}return null;};_pGridFormat.getSubCellPropertyValue=function(_a,_b,_c,_d){var _e=null;if(_a== -1){if(this._headband){_e=this._headcells[_b];}}else if(_a== -2){if(this._summband){_e=this._summcells[_b];}}else if(_a>=0){if(this._bodyband){_e=this._bodycells[_b];}}if(_e){if(_e._subcells.length>_c&&_c>=0){_e=_e._subcells[_c];if(_e){var _f=_e[_d];if(_f==undefined){_f=_e["_"+_d];}if(_f!=undefined){var _g;if(_f._bindtype>0){_g=_e._getAttrValue(_f,_a);}else{_g=_f;}return _g;}}}}return undefined;};_pGridFormat.getCellPropertyValue=function(_a,_b,_c){var _d=null;if(_a== -1){if(this._headband){_d=this._headcells[_b];}}else if(_a== -2){if(this._summband){_d=this._summcells[_b];}}else if(_a>=0){if(this._bodyband){_d=this._bodycells[_b];}}if(_d){if(_c=="subcell"){return _d._subcells.length;}var _e=_d[_c];if(_e==undefined){_e=_d["_"+_c];}if(_e!=undefined){var _f;if(_e._bindtype>=0){_f=_d._getAttrValue(_e,_a);}else{_f=_e;}return _f;}}return null;};_pGridFormat.getBandProperty=function(_a,_b){var _c=null;var _d=_a.toLowerCase();if(_d=="head"){_c=this._headband;}else if(_d=="summ"||_d=="summary"){_c=this._summband;}else{_c=this._bodyband;}if(_c){var _e=_c[_b];if(_e==undefined){_e=_c["_"+_b];}if(_e!=undefined){var _f=typeof (_e);if(_f=="number"||_f=="string"){return _e;}else{var _g;if(_b=="expr"){_g=_e._bindexpr;}else{_g=_e._value;}if(_g){return _g;}else{return _e;}}}}return null;};_pGridFormat._adjustFormatColSize=function(_a,_b){var _c=this._cols.length;var _d=0;var _e=0;var _f=0;var _g=null;for(var _h=0;_h<_c;_h++ ){_g=this._cols[_h];if(_g._area=="left"){_g.left=_d;_d+=_g.size;_g.right=_d;}else if(_g._area=="right"){_g.left=_f;_f+=_g.size;_g.right=_f;}else{_g.left=_e;_e+=_g.size;_g.right=_e;}if(_a){_g.orgleft=_g.left;_g.orgright=_g.right;}}this.leftWidth=_d;this._bodyWidth=this.bodyWidth=_e;this.rightWidth=_f;if(!_b){this._updateFormatStr();}};_pGridFormat._adjustFormatColOrgSize=function(){var _a=this._cols.length;var _b=0;var _c=0;var _d=0;var _e=null;for(var _f=0;_f<_a;_f++ ){_e=this._cols[_f];if(_e._area=="left"){_e.orgleft=_b;_b+=_e.orgsize;_e.orgright=_b;}else if(_e._area=="right"){_e.orgleft=_d;_d+=_e.orgsize;_e.orgright=_d;}else{_e.orgleft=_c;_c+=_e.orgsize;_e.orgright=_c;}}this._orgleftWidth=_b;this._orgrightWidth=_d;this._orgbodyWidth=_c;};_pGridFormat._setColSize=function(_a,_b,_c){if(this._cols){var _d=this._cols[_a];var _e=parseFloat(_b,10);if(_d&&isFinite(_e)){var _f=_d.size;if(_e!=_f){_d.size=_e;this._adjustFormatColSize(false,_c);return true;}return false;}}};_pGridFormat._getColSizeRange=function(_a,_b){if(this._cols){var _c=0;for(var _e=_a;_e<=_b;_e++ ){var _d=this._cols[_e];_c+=_d.size;}return _c;}return 0;};_pGridFormat.setFormatColProperty=function(_a,_b,_c){if(this._cols){var _d;if(_b=="size"){var _e=this._cols[_a];var _f=parseInt(_c,10);if(_e&&isFinite(_f)){var _g=_e.size;if(_f!=_g){_e.size=_e.orgsize=_f;_e.orgright=_e.orgleft+_f;var _h=this._cols;var _i=_h.length;var _j=_e._area;var _k=_e.orgright;for(_d=_a+1;_d<_i;_d++ ){if(_j==_h[_d]._area){_h[_d].orgleft=_k;_h[_d].orgright=_k+_h[_d].orgsize;_k=_h[_d].orgright;}}this._adjustFormatColSize();this._adjustFormatColOrgSize();return true;}return false;}}else if(_b=="band"){var _l=_c.toLowerCase();var _m=this._cols;var _n,_o=false;function isChangeAble(_q){if(!_q){return true;}var _r=_q.length;for(var _d=0;_d<_r;_d++ ){var _s=_q[_d];if(_s._col<=_a&&(_s._col+_s._colspan-1)>_a){return false;}}return true;}var _p=isChangeAble(this._headcells)&&isChangeAble(this._bodycells)&&isChangeAble(this._summcells);if(!_p){return false;}for(_d=0;_d<this._cols.length;_d++ ){_n=_m[_d];if(_l=="left"){if(_d<=_a&&_n._area!="left"){_n._area="left";_o=true;}}else if(_l=="right"){if(_d>=_a&&_n._area!="right"){_n._area="right";_o=true;}}else{if((_d>=_a&&_n._area=="left")||(_d<=_a&&_n._area=="right")){_n._area="body";_o=true;}}}function _apply_area(_q){if(_q){var _r=_q.length;var _s;for(var _d=0;_d<_r;_d++ ){_s=_q[_d];if(_l=="left"){if(_s._col<=_a){_s._area="left";}}else if(_l=="right"){if(_s._col>=_a){_s._area="right";}}else{if((_s._col>=_a&&_s._area=="left")||(_s._col<=_a&&_s._area=="right")){_s._area="body";}}}}}if(_o){_apply_area(this._headcells);_apply_area(this._bodycells);_apply_area(this._summcells);this._adjustFormatColSize(true);}return _o;}}return false;};_pGridFormat.getFormatColProperty=function(_a,_b){if(this._cols){var _c;if(_b=="size"){_c=this._cols[_a];if(_c){return _c.orgsize;}}else if(_b=="band"){_c=this._cols[_a];if(_c){return _c._area;}}else if(_b=="fix"){_c=this._cols[_a];if(_c){if(_c._area=="left"||_c._area=="right"){return "fixed";}else{return "";}}}}return null;};_pGridFormat._adjustFormatRowSize=function(_a){var _b=_a.length;var _c=0;var _d=null;for(var _e=0;_e<_b;_e++ ){_d=_a[_e];_d.top=_c;_c+=_d.size;_d.bottom=_c;}return _c;};_pGridFormat.setFormatRowProperty=function(_a,_b,_c){if(_b=="size"){var _d=parseInt(_c,10);if(isFinite(_d)){var _e=_a;var _f=(this._headrows)?this._headrows.length:0;var _g;if(_e<_f){this._headrows[_e].size=_d;_g=this.headHeight;this.headHeight=this._adjustFormatRowSize(this._headrows);if(this.headHeight!=_g){return true;}return false;}else{_e-=_f;}var _h=(this._bodyrows)?this._bodyrows.length:0;if(_e<_h){this._bodyrows[_e].size=_d;_g=this.bodyHeight;this._body_height=this.bodyHeight=this._adjustFormatRowSize(this._bodyrows);if(this.bodyHeight!=_g){return true;}return false;}else{_e-=_h;}var _i=(this._summrows)?this._summrows.length:0;if(_e<_i){this._summrows[_e].size=_d;_g=this.summHeight;this.summHeight=this._adjustFormatRowSize(this._summrows);if(this.summHeight!=_g){return true;}return false;}}}else if(_b=="band"){return false;}return false;};_pGridFormat.getFormatRowProperty=function(_a,_b){var _c,_d,_e,_f;if(_b=="size"){_c=_a;_d=(this._headrows)?this._headrows.length:0;if(_c<_d){return this._headrows[_c].orgsize;}else{_c-=_d;}_e=(this._bodyrows)?this._bodyrows.length:0;if(_c<_e){return this._bodyrows[_c].orgsize;}else{_c-=_e;}_f=(this._summrows)?this._summrows.length:0;if(_c<_f){return this._summrows[_c].orgsize;}}else if(_b=="band"){_c=_a;_d=(this._headrows)?this._headrows.length:0;if(_c<_d){return "head";}else{_c-=_d;}_e=(this._bodyrows)?this._bodyrows.length:0;if(_c<_e){return "body";}else{_c-=_e;}_f=(this._summrows)?this._summrows.length:0;if(_c<_f){return "summ";}}return null;};delete _pGridFormat;}if(!nexacro.Grid){nexacro.GridLongPressEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.LongPressEventInfo.call(this,_a,_b,_c,_d,_e);this.cell=_f;this.col=_g;this.row=_h;this.subrow=_i;this.pivotindex=_j;this.mergecell=_k;this.mergecol=_l;this.mergerow=_m;};var _pGridLongPressEventInfo=nexacro._createPrototype(nexacro.LongPressEventInfo,nexacro.GridLongPressEventInfo);nexacro.GridLongPressEventInfo.prototype=_pGridLongPressEventInfo;_pGridLongPressEventInfo._type_name="GridLongPressEventInfo";delete _pGridLongPressEventInfo;nexacro.GridDragEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_ab,_ac){nexacro.DragEventInfo.call(this,_a,_b||"ongriddrag",_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_ac);this.cell=_u;this.col=_v;this.row=_aa;this.subrow=_ab;this.pivotindex=_z;this.mergecell=_w;this.mergecol=_x;this.mergerow=_y;};var _pGridDragEventInfo=nexacro._createPrototype(nexacro.DragEventInfo,nexacro.GridDragEventInfo);nexacro.GridDragEventInfo.prototype=_pGridDragEventInfo;_pGridDragEventInfo._type_name="GridDragEventInfo";delete _pGridDragEventInfo;nexacro.GridClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y){nexacro.ClickEventInfo.call(this,_a,_b||"ongridclick",_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y);this.cell=_h;this.col=_i;this.row=_j;this.subrow=_k;this.pivotindex=_l;this.oldcell=_c;this.oldcol=_d;this.oldrow=_e;this.oldsubrow=_f;this.oldpivotindex=_g;};var _pGridClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.GridClickEventInfo);nexacro.GridClickEventInfo.prototype=_pGridClickEventInfo;_pGridClickEventInfo._type_name="GridClickEventInfo";_pGridClickEventInfo._is_event=true;delete _pGridClickEventInfo;nexacro.GridEditEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"ongridedit";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.row=_f;this.subrow=_g;this.pivotindex=_e;this.value=_h;};var _pGridEditEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridEditEventInfo);nexacro.GridEditEventInfo.prototype=_pGridEditEventInfo;_pGridEditEventInfo._type_name="GridEditEventInfo";delete _pGridEditEventInfo;nexacro.GridKeyEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this.id=this.eventid=_b||"ongridkeyevent";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.row=_f;this.subrow=_g;this.pivotindex=_e;this.altkey=_h;this.ctrlkey=_i;this.shiftkey=_j;this.metakey=_l;this.keycode=_k;};var _pGridKeyEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridKeyEventInfo);nexacro.GridKeyEventInfo.prototype=_pGridKeyEventInfo;_pGridKeyEventInfo._type_name="GridKeyEventInfo";nexacro.GridInputEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_g||"oninput";this.fromobject=this.fromreferenceobject=_a;this.cell=_b;this.col=_c;this.row=_d;this.subrow=_e;this.pivotindex=_f;};var _pGridInputEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridInputEventInfo);nexacro.GridInputEventInfo.prototype=_pGridInputEventInfo;_pGridInputEventInfo._type_name="GridInputEventInfo";delete _pGridInputEventInfo;nexacro.GridFormatChangedEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"ongridformatchanged";this.fromobject=this.fromreferenceobject=_a;this.newvalue=_c;this.oldvalue=_d;this.reason=_e;};var _pGridFormatChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridFormatChangedEventInfo);nexacro.GridFormatChangedEventInfo.prototype=_pGridFormatChangedEventInfo;_pGridFormatChangedEventInfo._type_name="GridFormatChangedEventInfo";delete _pGridFormatChangedEventInfo;nexacro.GridSelectEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t){this.id=this.eventid=_b||"ongridselect";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.row=_e;this.subrow=_f;this.pivotindex=_g;this.oldcell=_h;this.oldcol=_i;this.oldrow=_j;this.oldpivotindex=_l;this.oldsubrow=_k;this.selectendcol=_m;this.selectendpivot=_n;this.selectendrow=_o;this.selectendsubrow=_p;this.selectstartcol=_q;this.selectstartpivot=_r;this.selectstartrow=_s;this.selectstartsubrow=_t;};var _pGridSelectEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridSelectEventInfo);nexacro.GridSelectEventInfo.prototype=_pGridSelectEventInfo;_pGridSelectEventInfo._type_name="GridSelectEventInfo";delete _pGridSelectEventInfo;nexacro.GridTreeStatusEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"ongridtreestatus";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.realrow=_d;this.row=_e;this.reason=_f;};var _pGridTreeStatusEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridTreeStatusEventInfo);nexacro.GridTreeStatusEventInfo.prototype=_pGridTreeStatusEventInfo;_pGridTreeStatusEventInfo._type_name="GridTreeStatusEventInfo";delete _pGridTreeStatusEventInfo;nexacro.GridMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w){nexacro.MouseEventInfo.call(this,_a,_b||"ongridmouse",_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w);this.cell=_c;this.col=_d;this.mergecell=_e;this.mergecol=_f;this.mergerow=_g;this.pivotindex=_h;this.row=_i;this.subrow=_j;};var _pGridMouseEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.GridMouseEventInfo);nexacro.GridMouseEventInfo.prototype=_pGridMouseEventInfo;_pGridMouseEventInfo._type_name="GridMouseEventInfo";delete _pGridMouseEventInfo;nexacro.GridContextMenuEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w){nexacro.ContextMenuEventInfo.call(this,_a,_b,_u,_v,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_w);this.cell=_c;this.col=_d;this.mergecell=_e;this.mergecol=_f;this.mergerow=_g;this.pivotindex=_h;this.row=_i;this.subrow=_j;};var _pGridContextMenuEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.GridContextMenuEventInfo);nexacro.GridContextMenuEventInfo.prototype=_pGridContextMenuEventInfo;_pGridContextMenuEventInfo._type_name="GridContextMenuEventInfo";delete _pGridContextMenuEventInfo;nexacro.GridSizeChangedEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"ongridsizechanged";this.fromobject=this.fromreferenceobject=_a;this.eventid=_b;this.formatindex=_c;this.index=_d;this.newvalue=_e;this.oldvalue=_f;this.reason=_g;this.subindex=_h;};var _pGridSizeChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridSizeChangedEventInfo);nexacro.GridSizeChangedEventInfo.prototype=_pGridSizeChangedEventInfo;_pGridSizeChangedEventInfo._type_name="GridSizeChangedEventInfo";delete _pGridSizeChangedEventInfo;nexacro._GridCellControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._grid=_i?_i._grid:null;nexacro._CellControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,this._grid,_j);if(_h){this._band=_h._band;}else{this._band=null;}this._clickcall=false;this._is_clickproc=false;this._refresh_display=false;this._cellExpandObj="_GridExpandControl";this._cellButtonObj="_GridButtonControl";this._cellCheckBoxObj="_GridCheckboxControl";this._cellImageObj="_GridImageControl";this._cellComboObj="_GridComboControl";this._cellCalendarObj="_GridCalendarControl";this._cellEditObj="_GridEditControl";this._cellTextAreaObj="_GridTextAreaControl";this._cellProgressBarObj="_GridProgressBarControl";this._cellMaskEditObj="_GridMaskEditControl";this._cellTreeObj="_CellTreeItemControl";if(nexacro._enableaccessibility&&_i){var _l=_i._getDisplaytype(_j);if(_l=="treeitemcontrol"){this._skip_mobile_tabfocus=true;}}};var _pGridCell=nexacro._createPrototype(nexacro._CellControl,nexacro._GridCellControl);nexacro._GridCellControl.prototype=_pGridCell;_pGridCell._is_subcontrol=true;_pGridCell._type_name="GridCellControl";_pGridCell._getDataRow=function(){var _a=this._grid;if(_a){var _b=_a._getDataRow(this._rowidx);return _b;}else{return this._rowidx;}};_pGridCell._isFakeCell=function(){var _a=this._grid;return _a._isFakeCell(this._rowidx);};_pGridCell.destroy=function(){if(this._grid){if(this._tree_lbuttondown&&this._grid){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){this._control_element.destroy();}this._grid._lbuttondown_treecell=this;nexacro._OnceCallbackTimer.callonce(this._grid,function(){if(this._lbuttondown_treecell){this._lbuttondown_treecell.destroy();}},10);return;}if(this._grid._lbuttondown_treecell==this){this._grid._lbuttondown_treecell=null;}}nexacro.Component.prototype.destroy.call(this);this._virtualmerge=null;this._grid=null;this._band=null;};_pGridCell.on_destroy_contents=function(){if(this._editor){if(this._editor==this._grid._currentCellEditor){this._grid._hideEditor();}}nexacro._CellControl.prototype.on_destroy_contents.call(this);};_pGridCell._on_apply_status=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype._on_apply_status.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);var _j=this._grid;var _k=_j._getDataRow(this._rowidx);if(_j._isFakeCell(_k)){this._changeStatus("mouseover",false);this._changeStatus("focused",false);return;}};_pGridCell._on_focus=function(_a,_b,_c,_d,_e,_f){this._grid._focused_row=this._getDataRow();this._grid._focused_cell=this._cellidx;nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);};_pGridCell.on_changeStatus=function(_a,_b,_c,_d,_e){if(this._getRowControl()._floating){return "enabled";}return _c;};_pGridCell.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(this._getRowControl()._floating){return "";}if(_a=="blinked"&&_b){return _a;}return _c;};_pGridCell.on_apply_status=function(_a,_b,_c,_d){if(!this._rowstatuschange){if(_c=="mouseover"||_c=="focused"){this._grid._on_apply_cell_status(this,_c,_d);}}};_pGridCell._getClassCSSSelector=function(){var _a;if(this._getRowControl()._floating){_a=nexacro.Component.prototype._getClassCSSSelector.call(this);}else{_a=nexacro._CellControl.prototype._getClassCSSSelector.call(this);}return _a;};_pGridCell._apply_setfocus=function(_a,_b){nexacro._CellControl.prototype._apply_setfocus.call(this,_a,_b);var _c=this._control_element;if(_a=="lbuttondown"){this._grid._focus_proc=_c;}if(nexacro._enableaccessibility){this._grid.currentcell=this._cellidx;this._grid._currentBand=this._band.id;}};_pGridCell._on_last_lbuttonup=function(){if(this.parent){this.parent._on_last_lbuttonup();}};_pGridCell._on_last_keyup=function(){if(this.parent){var _a=this._grid;var _b=_a._find_lastFocused();var _c=true;if(_a){_c=(_b==_a)?true:false;if(_c&&!_a._showEditing&&_a._is_data_enter_apply){this._setFocus(false);}}this.parent._on_last_keyup();}};_pGridCell._on_killfocus=function(){this._setAccessibilityStatFlag(this._status,this._pseudo);if(nexacro._enableaccessibility){if(nexacro._OS=="Android"&&nexacro._Browser!="Runtime"){this._setAccessibilityStatLive(false);}}};_pGridCell._getTreeStatus=function(){return this._grid.getTreeStatus(this._rowidx);};_pGridCell.__getAccessibilityMakeAddLabelMiddleClass=function(){var _a="",_b=this._grid,_c=this._refinfo,_d,_e;if(_c._type=="body"||_c._type=="summary"){var _f=_b._headBand;var _g="",_h=null,_i=null,_j="",_k="";if(this.parentcell){_h=this.parentcell.parent._cells;}else{_h=this.parent._cells;}for(_d=0,_e=_h.length;_d<_e;_d++ ){_i=_h[_d]._refinfo;if(_i._area=="left"){_g=_h[_d]._getAccessibilityLabel(true);if(_i._row<=_c._row&&_c._row<=(_i._row+_i._rowspan-1)){if(_j){_j+=" "+_g;}else{_j=_g;}}}else{break;}}if(_f){var _l=_f._get_rows();var _m=_l.length;if(_l&&_m){_h=_l[0]._cells;for(_d=0,_e=_h.length;_d<_e;_d++ ){_i=_h[_d]._refinfo;var _n=_m==1?true:_i._row==_c._row?true:false;if(_n&&_i._col<=_c._col&&_c._col<=(_i._colspan+_i._col-1)){_g=_h[_d]._getAccessibilityLabel(true);if(_k){_k=_k+" "+_g;}else{_k=_g;}}}}}if(_c._area=="left"){if(_k){_a+=" "+_k;}}else{if(_b.accessibilityreadbandlabel){_a+=" "+_j+" "+_k;}else{if(_j&&_b._beforegridrowpos!=_b.currentrow){_a+=" "+_j;}if(_b._beforegridcolpos!=_b.currentcol||(_b._is_first_bodycell&&(_b.currentcell==0||_b.currentrow==_b.rowcount-1))){if(_k){if(_a){_a=_a+" "+_k;}else{_a=_k;}}}}}}return _a;};_pGridCell._getAccessibilityRoleParentType=function(){var _a=this._refinfo;var _b;if(_a._type=="head"){_b="columnheader";}else if(_a._type=="body"&&_a._area=="left"){_b="rowheader";}return _b;};_pGridCell._resetScrollPos=function(_a,_b,_c,_d,_e,_f){var _g=this._grid;if(_g){if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5&&_g._scrollbars==0){var _h=this.parent;if(_h){_h._showfull(this);_c=_h._adjust_top;}_e=_c+this._adjust_height;nexacro.Component.prototype._resetScrollPos.call(this,_a,_b,_c,_d,_e,_f);}}};_pGridCell._common_lbuttonup=function(_a,_b,_c,_d,_e){if(_a){var _f=nexacro._getFirstTouchInfo(_a);if(_f){_b=_f._elem;_c=_f.canvasx;_d=_f.canvasy;_e=_b;}}if(_b!=_e){var _g=this._is_real_upelem=_e;var _h=this._grid;var _i=false;while(_g){if(_g._type_name=="GridCellControl"){_h._lastmouseentercell=_g;}if(_g instanceof nexacro.Grid){_i=true;break;}_g=_g.parent;}if(!_g){this._is_real_upelem=_g;}if(!_i){if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){if(_h._showEditing&&_c>=0&&_c<this._adjust_width&&_d>=0&&_d<this._adjust_height){_h._lastmouseentercell=this;this._clickcall=true;}}}}return true;};_pGridCell._on_touchend=function(_a,_b,_c){if(this._common_lbuttonup(_c,null,null,null,null)){nexacro.Component.prototype._on_touchend.call(this,_a,_b,_c);}};_pGridCell._on_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){if(this._common_lbuttonup(null,_a,_f,_g,_j)){nexacro.Component.prototype._on_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);}return true;};_pGridCell._common_mouseenter=function(_a){if(!this._is_alive){return false;}var _b=this._grid;var _c=_b._getDataRow(this._rowidx);if(_b._isFakeCell(_c)){return false;}if(_a!=this){if(this.parentcell){_b._mouseovercell={row:this.parentcell._rowidx,cell:this.parentcell._cellidx};_b._lastmouseentercell=this.parentcell;}else{_b._mouseovercell={row:this._rowidx,cell:this._cellidx};_b._lastmouseentercell=this;}return true;}return true;};_pGridCell._on_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){if(this._isSubCell){return nexacro.Component.prototype._on_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);}else if(this._common_mouseenter(_b)){return nexacro.Component.prototype._on_mouseenter.call(this._grid._lastmouseentercell,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);}};_pGridCell._common_mouseleave=function(_a){if(!this._is_alive){return false;}var _b=this._grid;var _c=_b._getDataRow(this._rowidx);_b._setGlobalCursor(null,this,this);if(_b._isFakeCell(_c)){return false;}if(_a!=this){_b._mouseovercell=null;return true;}return false;};_pGridCell._on_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){if(this._isSubCell){return nexacro.Component.prototype._on_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);}else if(this._common_mouseleave(_b)){if(!this._grid._lastmouseentercell){this._grid._lastmouseentercell=this;}return nexacro.Component.prototype._on_mouseleave.call(this._grid._lastmouseentercell,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);}};_pGridCell._common_fire_lbuttondown=function(_a){var _b=this._grid;var _c=_b._getDataRow(this._rowidx);this._is_clickproc=false;this._clickcall=false;_b._lastmouseentercell=this;if(!_b||_b._isFakeCell(_c)){return false;}if(this._refinfo._isSubCell){return this.parent._common_fire_lbuttondown(_a);}if(!this._is_mergetemp){if(this._band.id=="body"){var _d=false;if((_c!=_b._selectinfo.curdsrow)||(this._cellidx!=_b._selectinfo.curcell)){if(_b.autoenter=="select"){_d=true;}}else{if(!_b._showEditing){_d=true;}}if(_d){_b._showEditorCell=true;_b._showEditRowIdx=_c;_b._showEditCellIdx=this._cellidx;}}else{if((_c!=_b._selectinfo.curdsrow)||(this._cellidx!=_b._selectinfo.curcell)){if(_b._showEditing){_b._hideEditor();}}}}};_pGridCell.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._common_fire_lbuttondown(_c);var _e=this._grid.parent;var _f=nexacro._getFirstTouchInfo(_b);var _g=_d;while(_g&&_g instanceof nexacro.Component){if(_g instanceof nexacro._GridCellControl){break;}var _h=_g._getRecalcCanvasXY(_d._control_element,_f.canvasx,_f.canvasy);_f.canvasx=_h[0];_f.canvasy=_h[1];if(this._subComp==_g){break;}_g=_g.parent;}if(this._isSubCell){_f.canvasx+=this._adjust_left;_f.canvasy+=this._adjust_top;_f.clientx+=this._adjust_left;_f.clienty+=this._adjust_top;}if(this._subComp==_c){var _i=this._getCurrentStylePadding();if(_i){_f.canvasx+=_i.left;_f.canvasy+=_i.top;_f.clientx+=_i.left;_f.clienty+=_i.top;}}var _j=this._grid.on_fire_user_ontouchstart(_a,_b,_c,_d,true);var _k=this._grid._getRecalcCanvasXY(_d._control_element,_f.canvasx,_f.canvasy);_f.canvasx=_k[0];_f.canvasy=_k[1];var _l=this._getClientXY(_f.clientx,_f.clienty);_f.clientx=_l[0];_f.clienty=_l[1];if(!_j){while(_e){if(_e.on_fire_user_ontouchstart){_j=_e.on_fire_user_ontouchstart(_a,_b,_c,_d);if(_j){break;}}_e=_e.parent;}}return true;};_pGridCell.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;while(_n&&_n instanceof nexacro.Component){if(_n instanceof nexacro._GridCellControl){break;}var _o=_n._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_o[0];_h=_o[1];if(this._subComp==_n){break;}_n=_n.parent;}this._common_fire_lbuttondown(_k);var _p=this._grid.parent;if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}var _r=this._grid.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,true);var _s=this._grid._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_s[0];_h=_s[1];var _t=this._getClientXY(_g,_j);_i=_t[0];_j=_t[1];if(!_r){while(_p){if(_p.on_fire_user_onlbuttondown){_r=_p.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);if(_r){break;}}_p=_p.parent;}}return true;};_pGridCell._common_fire_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){var _q=false;var _r=this._getWindow();var _s=this;if(this._is_real_upelem){_s=_r.findComponent(this._is_real_upelem);}var _t=_n;while(_t&&_t instanceof nexacro.Component){if(_t instanceof nexacro._GridCellControl||_t instanceof nexacro.Grid){break;}var _u=_t._getRecalcCanvasXY(_n._control_element,_i,_j);_i=_u[0];_j=_u[1];if(this._subComp==_t){break;}_t=_t.parent;}var _v,_w;var _x;var _y;var _z=_i;var _aa=_j;var _ab=_k;var _ac=_l;var _ad=this._grid;if(_b){var _ae=nexacro._getFirstTouchInfo(_b);if(!_ae){return false;}if(this._isSubCell){_ae.canvasx+=this._adjust_left;_ae.canvasy+=this._adjust_top;_ae.clientx+=this._adjust_left;_ae.clienty+=this._adjust_top;}if(this._subComp==_m){_v=this._getCurrentStylePadding();if(_v){_ae.canvasx+=_v.left;_ae.canvasy+=_v.top;_ae.clientx+=_v.left;_ae.clienty+=_v.top;}}_w=_ad.parent;_q=_ad.on_fire_user_ontouchend(_a,_b,_s,_s,true);_x=_ad._getRecalcCanvasXY(_n._control_element,_ae.canvasx,_ae.canvasy);_ae.canvasx=_x[0];_ae.canvasy=_x[1];_y=this._getClientXY(_ae.clientx,_ae.clienty);_ae.clientx=_y[0];_ae.clienty=_y[1];if(!_q){while(_w){if(_w.on_fire_user_ontouchend){_q=_w.on_fire_user_ontouchend(_a,_b,_m,_n);if(_q){break;}}_w=_w.parent;}}}else{if(this._isSubCell){_i+=this._adjust_left;_j+=this._adjust_top;_k+=this._adjust_left;_l+=this._adjust_top;}if(this._subComp==_m){_v=this._getCurrentStylePadding();if(_v){_i+=_v.left;_j+=_v.top;_k+=_v.left;_l+=_v.top;}}_w=_ad.parent;_q=_ad.on_fire_user_onlbuttonup(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_s,_s,_o,_p,true);_z=_i;_aa=_j;_x=_ad._getRecalcCanvasXY(_n._control_element,_i,_j);_i=_x[0];_j=_x[1];_ab=_k;_ac=_l;_y=this._getClientXY(_i,_l);_k=_y[0];_l=_y[1];if(!_q){while(_w){if(_w.on_fire_user_onlbuttonup){_q=_w.on_fire_user_onlbuttonup(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);if(_q){break;}}_w=_w.parent;}}}if(!this._is_alive){return true;}var _af=_ad._getDataRow(this._rowidx);var _ag=this._is_real_upelem;var _ah=this._is_clickproc;var _ai=this._clickcall;this._is_real_upelem=null;this._is_clickproc=false;this._clickcall=false;if(_ad._isFakeCell(_af)){return false;}var _aj=(this.parentcell)?this.parentcell:this;var _ak,_al;if(!_ah){if(_ad._lastmouseentercell==_aj){if((_af==_ad._selectinfo.curdsrow)&&(_aj._cellidx==_ad._selectinfo.curcell)){if(_ad._showEditing){var _am=_ad._currentCellEditor;if(_am){if(_ag instanceof nexacro.InputElement){_ag.setElementFocus();if(_am.getCaretPos){var _an=_am.getSelect();if(_an[0]==_an[1]){var _ao=_am.getCaretPos();_am._setFocus(false);if(_am.setCaretPos){_am.setCaretPos(_ao);}}}else{_am._setFocus(false);}}else{_am._setFocus(false);}}if(_ag){_al=false;_ak=_ag;while(_ak){if(_ak._cellobj==_m){_al=true;break;}_ak=_ak.parent;}if(!_al){_al=_ai;}if(_al){_aj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_z,_aa,_ab,_ac,_m,_n,_p,"control",true);}}}else{if(_ag){var _ap=(_m.parentcell)?_m.parentcell:_m;_al=false;_ak=_ag;while(_ak){if(_ak==_ap){_al=true;break;}_ak=_ak.parent;}if(_al){_aj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_z,_aa,_ab,_ac,_m,_n,_p,"control",true);}}}}}}};_pGridCell.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._common_fire_lbuttonup(_a,_b,"",false,false,false, -1, -1, -1, -1, -1, -1,_c,_d,null);return true;};_pGridCell.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){this._common_fire_lbuttonup(null,null,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridCell.on_fire_oninput=function(){return this._grid.on_fire_oninput();};_pGridCell.on_fire_ondropdown=function(_a){return this._grid.on_fire_ondropdown(_a);};_pGridCell.on_fire_oncloseup=function(_a,_b,_c,_d,_e){var _f=this._cellidx;var _g=this._refinfo._col;var _h= -9;var _i=this._getDataRow();var _j=this._refinfo._row;this._changeStatus("mouseover",false);return this._grid.on_fire_oncloseup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);};_pGridCell.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!_o){var _p=_l;while(_p&&_p instanceof nexacro.Component){if(_p instanceof nexacro._GridCellControl){break;}var _q=_p._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_q[0];_h=_q[1];if(this._subComp==_p){break;}_p=_p.parent;}}if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){var _r=this._getCurrentStylePadding();if(_r){_g+=_r.left;_h+=_r.top;_i+=_r.left;_j+=_r.top;}}if(this._band){this._is_clickproc=true;if(_n==undefined){_n="";}if(this._grid._isflingend){return true;}if(this._grid._scrollpixel=="all"){this._showfull(this);}else{this.parent._showfull(this);}if(this._band.id=="body"){this._grid.on_fire_cellclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}else if(this._band.id=="head"){this._grid.on_fire_headclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}else if(this._band.id=="summary"){this._grid.on_fire_summaryclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}this._needToggle("onclick",_k);}return true;};_pGridCell.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro._GridCellControl){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o.parent;}if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}if(this._band){nexacro._fireBeforeDblclick(_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);if(_n==undefined){_n="";}if(this._band.id=="body"){return this._grid.on_fire_celldblclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}else if(this._band.id=="head"){return this._grid.on_fire_headdblclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}else if(this._band.id=="summary"){return this._grid.on_fire_summarydblclick(this,_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}if(!this._is_alive){return;}}return true;};_pGridCell._getFormatSize=function(){var _a=this._refinfo;var _b=_a._col;var _c=_a._colspan;var _d=_a._row;var _e=_a._rowspan;var _f=this._grid._curFormat;return _f._getFormatCellSize(_b,_d,_c,_e,this._rowidx,true);};_pGridCell.__showExpand=function(_a){if(!this._expandCtrl){return;}if(this._fakecell||this._virtualmerge){this._expandCtrl.set_visible(false);return;}var _b=this._grid;var _c=this._refinfo;var _d=_b._getDataRow(this._rowidx);var _e=_c._getAttrValue(_c.expandshow,_d);if(_e=="show"){if(_a==false){if(_c.suppressalign.indexOf("over")>=0){this._expandCtrl.set_visible(true);}else{this._expandCtrl.set_visible(this.selected);}}else{this._expandCtrl.set_visible(true);}}else{this._expandCtrl.set_visible(false);}this._updateAvailableArea();};_pGridCell._isUpdateArea=function(){if(this._isSubCell||this.id=="tempcell"){return true;}var _a=this._grid;var _b=_a._curFormat;var _c=this._getRowControl(),_d=_c.getElement(),_e=_d.scroll_left,_f=_e+_a._adjust_width-_b.leftWidth-_b.rightWidth;var _g=this._refinfo;if(_g._area!="body"||(_e<=this.getOffsetRight()&&_f>=this._adjust_left)){return true;}return false;};_pGridCell._getRemoveLine=function(){var _a=this._grid;var _b=this._refinfo;var _c,_d,_e,_f;if(this._isSubCell){_c=true;_d=true;_e=true;_f=true;}else if(this._band.id=="summary"&&(_a.summarytype!="top"&&_a.summarytype!="lefttop")){if(_b._area=="right"){_c=false;_d=false;_e=true;_f=true;}else{_c=true;_d=false;_e=false;_f=true;}}else{if(_b._area=="right"){_c=false;_d=true;_e=true;_f=false;}else{_c=true;_d=true;_e=false;_f=false;}}return [_c,_d,_e,_f];};_pGridCell._updateAll=function(_a,_b,_c){if(this.__update(_a,_b,_c)){var _d=this.getElement();if(_d){var _e=this._getRemoveLine();var _f,_g,_h,_i;var _j=this._grid;_f=_e[0];_g=_e[1];_h=_e[2];_i=_e[3];var _k=this._getDataRow();if(!this._isSubCell){var _l=this._subComp;if(_j._focused_row==_k){if(_j._isSelectRowType()||_j._focused_cell==this._cellidx){if(_j._isFocused()){this._changeStatus("focused",true);if(_l&&_l._focusedstatus){_l._focusedstatus=undefined;_l._changeStatus("focused",true);}}}}else{this._changeStatus("focused",false);if(_l&&_l._statusmap["focused"]){_l._focusedstatus=_l._statusmap["focused"];_l._changeStatus("focused",false);}}if(_j._mouseovercell&&_j._mouseovercell.row!=_k){this._changeStatus("mouseover",false);}}var _m=this._refinfo;var _n=false;if(this.subcells.length>0){for(var _u=0,_v=this.subcells.length;_u<_v;_u++ ){this.subcells[_u]._updateAll();}}else{if(this._isCellSuppress(_m,_k)&&(_m._getSuppress(_k)!=0||_j._supphorztype>0)){if(this._band.id=="body"&&_m.suppressalign.indexOf("over")>=0){this._hideInnerElement();}else{if(this._disp_show){var _o=this._getSuppressInfo();if(_o){var _p=_o.border_proc;if(this._getDisplayRowIdx()==this._grid._getDispRowCnt()-1){_p=0;}if(_p>0){_i=true;}if(_o.horz_border_proc==1){if(_m._area=="left"){_h=true;}else if(_m._area=="right"){_f=true;}}if(_o.text_proc!=0||_o.horz_text_proc!=0){this._hideInnerElement();}else{this._showInnerElement();}_n=true;}else{if(this._disp_show&&this._hideInner){this._showInnerElement();}}}}}else{if(this._disp_show&&this._hideInner){this._showInnerElement();}}}if(!_b){this._control_element.setElementBorderNone(_f,_g,_h,_i);}if(_d._mode=="text"){this._changeClientmode("text");}if(_j._isFakeCell(_k)==false&&!_n){var _q=this._virtualmerge=_j._checkVirtualMerge(_m,_k);if(_q){var _r=this._isSelectedColor();var _s;if(this.id!="tempcell"){_s=_j._getCellStyleInfo(_q.targetcell,"background",_q.targetrow,_r);this.set_background(_s);}var _t=_q.remove;if(_t.indexOf("right")>=0){_h=true;}else if(_t.indexOf("left")>=0){_f=true;}if(_t.indexOf("bottom")>=0){_i=true;}else if(_t.indexOf("top")>=0){_g=true;}this._control_element.setElementBorderNone(_f,_g,_h,_i);this._hideInnerElement();}else{this._showInnerElement();}}}}};_pGridCell._isCellSuppress=function(_a,_b){if(!this._grid._is_use_suppress&&!this._grid._supphorztype){return false;}if(!_b){_b=this._grid._getDataRow(this._rowidx);}if(!_a){_a=this._refinfo;}var _c=_a._getDisplaytype(_b);return (_c!="treeitemcontrol");};_pGridCell._getSuppressInfo=function(){var _a=this._grid;var _b;if(_a._fixed_rowcnt>0){if(_a._fixed_endrow>=this._rowidx){_b=_a._fixed_startrow;}else{_b=_a._toprowpos[0]-(_a._fixed_rowcnt-_a._fixed_startrow);}}else{_b=_a._toprowpos[0];}var _c=this._rowidx-_b;if(this._rowidx>=0&&_c<0){return null;}return this._refinfo._getSuppressInfo(_c);};_pGridCell._getDisplayRowIdx=function(){return this._rowidx-this._grid._getBodyBegRowPos(this._rowidx);};_pGridCell._setDisplayText=function(){if(!this._is_alive){return;}this._displaytext=this._getDisplayText();this.on_apply_text();};_pGridCell._showfull=function(_a){if(!this._is_alive){return;}if(this._isSubCell){return this.parent._showfull();}var _b=this._band;var _c=this._grid._getScrollLeft();var _d=this._grid._getScrollTop();var _e=this.parent._adjust_top;var _f=this._adjust_left;var _g=this._adjust_top+_e;var _h=this._adjust_width;var _i=this._adjust_height;var _j=_f+_h;var _k=_g+_i;_f-=_c;_j-=_c;_g-=_d;_k-=_d;var _l=this._grid;var _m=this._getRowControl();var _n=_l._hscrollmng;var _o=_l._vscrollmng;var _p=this._refinfo;var _q=_m._getAreaRect(_p._area);if(_n&&_p._area=="body"){if(_h<_q.width){if(_f<0){_n.setPos(_n.pos+_f);}else if(_j>_q.width){var _r=_j-_q.width;_n.setPos(_n.pos+_r);}}}if(_b.id=="body"){if(_o&&_a&&!_m._fixed){if(_i<_b._getClientHeight()){if(_g<0){_o.setPixelPos(_o._pos+_g);}else if(_k>_b._getClientHeight()){var _s=_k-_b._getClientHeight();_o.setPixelPos(_o._pos+_s);}}}}};_pGridCell._needToggle=function(_a,_b){if(!this._is_alive){return;}var _c=this._grid;var _d=_c._getDataRow(this._rowidx);var _e=this._refinfo._getEdittype(_d);if(_c.selectchangetype=="down"&&_a=="onclick"){return;}else if(_c.selectchangetype=="up"&&_a=="onlbuttondown"){return;}if(_e=="checkbox"&&nexacro._toBoolean(_c.readonly)==false){if(this._curDisplayType!="checkboxcontrol"){_c._toggleVal(_d,this._refinfo);}else{if(_a=="onclick"||_a=="onlbuttondown"){if(this._grid.cellclickbound=="cell"&&_b==this){if(this._subComp&&this._subComp._toggleCheck){this._subComp._toggleCheck();}}}else{if(this._subComp&&this._subComp._toggleCheck){this._subComp._toggleCheck();}}}}};_pGridCell._getRowControl=function(){return (this._isSubCell)?this.parent.parent:this.parent;};_pGridCell._setPositionInGrid=function(_a,_b,_c,_d){if(!this._is_alive){return {left:0,top:0,right:0,bottom:0,width:0,height:0,orgt:0,orgl:0};}var _e=this._getRowControl();var _f=this._band;var _g=this._grid;var _h=this._refinfo;var _i=_e._getAreaRect(_h._area);var _j=_i.left;var _k=_i.left+_i.width;var _l=(_f.id=="body"&&_e._fixed);var _m=_f._adjust_top+((_f.id=="body"&&_l==false)?_g._fixed_height:0);var _n=_f.getOffsetBottom();var _o=this._adjust_left+_j;var _p=_e._adjust_top+this._adjust_top+_m;var _q;if(_f._refinfo._noborder==true&&_h._row==0&&this._getDisplayRowIdx()<=0){_q=this._getCurrentStyleBorder();_p+=_q?_q.bottom._width:0;}else if(this._rowidx== -2){if(_g.summarytype!="top"&&_g.summarytype!="lefttop"){_q=this._getCurrentStyleBorder();_p+=_q?_q.top._width:0;}}var _r=this._getAvailableRect();var _s;if(!_c){_s=this._getCurrentStylePadding();_o+=(_s)?_s.left:0;_p+=(_s)?_s.top:0;}else{_s=this._getCurrentStylePadding();_r.width+=(_s)?(_s.left+_s.right):0;_r.height+=(_s)?(_s.top+_s.bottom):0;}if(_d){_d.left=_o;_d.right=_o+_r.width;_d.top=_p;_d.bottom=_p+_r.height;}if(!_b){var _t=(_l)?0:_g._getScrollTop();var _u=_g._getScrollLeft();if(_h._area=="body"){_o-=(_u>=0)?_u:0;}if(_f.id=="body"){_p-=(_t>=0)?_t:0;}}var _v=_o+_r.width;var _w=_p+_r.height;var _x=_p,_y=_o;if(_p<_m){_p=_m;}if(_w>_n){_w=_n;}if(_o<_j){_o=_j;}if(_v>_k){_v=_k;}var _z=_v-_o;var _aa=_w-_p;if(_z<0){_z=0;}if(_aa<0){_aa=0;}if(_a){if(_z==0||_aa==0){_a.move(0, -10,0,0);}else{_a.move(_o,_p,_z,_aa);}}return {left:_o,top:_p,right:_v,bottom:_w,width:_z,height:_aa,orgt:_x,orgl:_y};};_pGridCell._setCompPositionInGrid=function(_a,_b,_c,_d){if(!this._is_alive){return {left:0,top:0,right:0,bottom:0,width:0,height:0,orgt:0,orgl:0};}var _e=this._getRowControl();var _f=this._band;var _g=this._grid;var _h=this._refinfo;var _i=_e._getAreaRect(_h._area);var _j=_i.left;var _k=_i.left+_i.width;var _l=(_f.id=="body"&&_e._fixed);var _m=_f._adjust_top+((_f.id=="body"&&_l==false)?_g._fixed_height:0);var _n=_f.getOffsetBottom();var _o=this._adjust_left+_a._adjust_left+_j;var _p=_e._adjust_top+this._adjust_top+_a._adjust_top+_m;var _q;if(_f._refinfo._noborder==true&&_h._row==0&&this._getDisplayRowIdx()<=0){_q=this._getCurrentStyleBorder();_p+=_q?_q.bottom._width:0;}else if(this._rowidx== -2){if(_g.summarytype!="top"&&_g.summarytype!="lefttop"){_q=this._getCurrentStyleBorder();_p+=_q?_q.top._width:0;}}var _r=this._getAvailableRect();var _s=this._getControlRect();_r.left=Math.max(_r.left,_s.left);_r.top=Math.max(_r.top,_s.top);_r.right=Math.min(_r.right,_s.right);_r.bottom=Math.min(_r.bottom,_s.bottom);_r.width=_r.right-_r.left;_r.height=_r.bottom-_r.top;if(_d){_d.left=_o;_d.right=_o+_r.width;_d.top=_p;_d.bottom=_p+_r.height;}if(!_b){var _t=(_l)?0:_g._getScrollTop();var _u=_g._getScrollLeft();if(_h._area=="body"){_o-=(_u>=0)?_u:0;}if(_f.id=="body"){_p-=(_t>=0)?_t:0;}}var _v=_o+_r.width;var _w=_p+_r.height;var _x=_p,_y=_o;if(_p<_m){_p=_m;}if(_w>_n){_w=_n;}if(_o<_j){_o=_j;}if(_v>_k){_v=_k;}var _z=_v-_o;var _aa=_w-_p;if(_z<0){_z=0;}if(_aa<0){_aa=0;}return {left:_o,top:_p,right:_v,bottom:_w,width:_z,height:_aa,orgt:_x,orgl:_y};};_pGridCell._getCompPositionInBand=function(_a){if(!this._is_alive){return {left:0,top:0,right:0,bottom:0,width:0,height:0,orgt:0,orgl:0,orgr:0,orgb:0};}var _b=this._getRowControl();var _c=this._band;var _d=this._grid;var _e=this._refinfo;var _f=_b._getAreaRect(_e._area);var _g=_f.left;var _h=_f.left+_f.width;var _i=(_c.id=="body"&&_b._fixed);var _j=(_c.id=="body"&&_i==false)?_d._fixed_height:0;var _k=_c._adjust_height;var _l=this._adjust_left+_a._adjust_left+_g;var _m=_b._adjust_top+this._adjust_top+_a._adjust_top+_j;var _n=this._getAvailableRect();var _o=this._getControlRect();_n.left=Math.max(_n.left,_o.left);_n.top=Math.max(_n.top,_o.top);_n.right=Math.min(_n.right,_o.right);_n.bottom=Math.min(_n.bottom,_o.bottom);_n.width=_n.right-_n.left;_n.height=_n.bottom-_n.top;var _p=(_i)?0:_d._getScrollTop();var _q=_d._getScrollLeft();if(_e._area=="body"){_l-=(_q>=0)?_q:0;}if(_c.id=="body"){_m-=(_p>=0)?_p:0;}var _r=_l+_n.width;var _s=_m+_n.height;var _t=_m,_u=_l,_v=_r,_w=_s;if(_m<_j){_m=_j;}if(_s>_k){_s=_k;}if(_l<_g){_l=_g;}if(_r>_h){_r=_h;}var _x=_r-_l;var _y=_s-_m;if(_x<0){_x=0;}if(_y<0){_y=0;}return {left:_l,top:_m,right:_r,bottom:_s,width:_x,height:_y,orgt:_t,orgl:_u,orgr:_v,orgb:_w};};_pGridCell._getPositionInBand=function(){if(!this._is_alive){return {left:0,top:0,right:0,bottom:0,width:0,height:0,orgt:0,orgl:0,orgr:0,orgb:0};}var _a=this._getRowControl();var _b=this._band;var _c=this._grid;var _d=this._refinfo;var _e=_a._getAreaRect(_d._area);var _f=_e.left;var _g=_e.left+_e.width;var _h=(_b.id=="body"&&_a._fixed);var _i=(_b.id=="body"&&_h==false)?_c._fixed_height:0;var _j=_b._adjust_height;var _k=this._adjust_left+_f;var _l=_a._adjust_top+this._adjust_top+_i;var _m=(_h)?0:_c._getScrollTop();var _n=_c._getScrollLeft();if(_d._area=="body"){_k-=(_n>=0)?_n:0;}if(_b.id=="body"){_l-=(_m>=0)?_m:0;}var _o=_k+this._adjust_width;var _p=_l+this._adjust_height;var _q=_l,_r=_k,_s=_o,_t=_p;if(_l<_i){_l=_i;}if(_p>_j){_p=_j;}if(_k<_f){_k=_f;}if(_o>_g){_o=_g;}var _u=_o-_k;var _v=_p-_l;if(_u<0){_u=0;}if(_v<0){_v=0;}return {left:_k,top:_l,right:_o,bottom:_p,width:_u,height:_v,orgt:_q,orgl:_r,orgr:_s,orgb:_t};};_pGridCell._isConditionEditor=function(){var _a=this._grid;var _b=_a._getDataRow(this._rowidx);return (_a._currentCellCell==this._cellidx&&_a._currentCellRow==_b);};_pGridCell._showEditor=function(_a,_b){var _c=this._text_elem;var _d=this._refinfo;var _e=this._grid;var _f=_e._getDataRow(this._rowidx);var _g;var _h;if(nexacro._isTouchInteraction){_h="touch";}if(_b){this._showfull();}if(this._grid._showEditing){this._grid._hideEditor();}_e._currentCellCell=this._cellidx;_e._currentCellRow=_f;if(_c){_c.setElementVisible(false);}if(this._subComp){this._subComp.set_visible(false);this._subComp._changeStatus("mouseover",false);}_e._currentCellEditor=_g=this._createEditor();_g._EditUpdateAll(_d,this);_g.set_visible(true);if(_a||nexacro._isTouchInteraction||_e.selectchangetype=="up"){_g._apply_setfocus(_h);}if(_e.autoenter=="select"&&_e._lbuttondown_proc){_g._user_push=true;_g._changeStatus("focused",true);_g._is_pushed_area=true;_g._is_push=true;}else{_g._changeStatus("focused",true);}if(nexacro._enableaccessibility){_g._setFocus(false);}this._editor=_g;if(_g.setCaretPos){if(!_g.autoselect){_g.setCaretPos(0);}else if(_e._keydown_keycode==37||_e._keydown_keycode==39){nexacro._OnceCallbackTimer.callonce(this,function(){_g.setSelect(0, -1);});}}else if(_g.comboedit&&_g.comboedit.setCaretPos){if(!_g.comboedit.autoselect){_g.comboedit.setCaretPos(0);}else if(_e._keydown_keycode==37||_e._keydown_keycode==39){nexacro._OnceCallbackTimer.callonce(this,function(){_g.comboedit.setSelect(0, -1);});}}_e._has_inputElement=true;};_pGridCell._hideEditor=function(){var _a=this._text_elem;if(!this._hideInner){if(_a){_a.setElementVisible(true);}if(this._subComp){this._subComp.set_visible(true);this._subComp._changeStatus("mouseover",false);}}this._destroyEditor();this._grid._currentCellCell= -1;this._grid._currentCellRow= -1;this._grid._has_inputElement=false;};_pGridCell._getPositionInRootComponent=function(_a){var _b=this._setCompPositionInGrid(_a);var _c=this._getCompPositionInBand(_a);return [_b,_c];};delete _pGridCell;nexacro._GridSubCellControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro._GridCellControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._isSubCell=true;};var _pSubGridCell=nexacro._createPrototype(nexacro._GridCellControl,nexacro._GridSubCellControl);nexacro._GridSubCellControl.prototype=_pSubGridCell;_pSubGridCell._is_subcontrol=true;_pSubGridCell._type_name="GridSubCellControl";_pSubGridCell.on_getIDCSSSelector=function(){return "subcell";};nexacro._GridExpandControl=function(_a,_b,_c,_d,_e,_f){nexacro._CellExpandControl.call(this,_a,_b,_c,_d,_e,_f);if(_a._refinfo){this._grid=_a._grid;this._cellobj=_a;this._cellinfo=_a._refinfo;}else{this._grid=_a;}};var _pGridExpand=nexacro._createPrototype(nexacro._CellExpandControl,nexacro._GridExpandControl);nexacro._GridExpandControl.prototype=_pGridExpand;_pGridExpand.on_destroy_contents=function(){nexacro._CellExpandControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridExpand._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Button.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridExpand._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Button.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridExpand.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_b);if(_e){this._grid.on_fire_onexpanddown("",false,false,false,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e.clientx,_e.clienty,_c,_d);}return true;};_pGridExpand.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._grid.on_fire_onexpanddown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridExpand.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_b);if(_e){this._grid.on_fire_onexpandup("",false,false,false,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e.clientx,_e.clienty,_c,_d);}return true;};_pGridExpand.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._grid.on_fire_onexpandup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridExpand._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridExpand._on_last_keyup=function(){this._cellobj._on_last_keyup();};delete _pGridExpand;nexacro._GridButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellButtonControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;this._cellinfo=null;this._cellobj=null;}};var _pGridButton=nexacro._createPrototype(nexacro._CellButtonControl,nexacro._GridButtonControl);nexacro._GridButtonControl.prototype=_pGridButton;_pGridButton.on_destroy_contents=function(){nexacro._CellButtonControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridButton.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_user_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);if(_a==13||_a==32){this.click();}return _h;};_pGridButton._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.Button.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridButton._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.Button.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridButton._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Button.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridButton._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Button.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridButton.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.Button.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridButton.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Button.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridButton.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.Button.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridButton.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Button.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridButton._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridButton._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridButton._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}var _l=false;if(nexacro._isTouchInteraction){if(!_k&&this._grid._showEditing){_l=true;}}if((_l||_k)&&this._isEnable()&&this.enableevent){var _m=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j);}};_pGridButton._setDataset=function(){};delete _pGridButton;nexacro._GridProgressBarControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._CellProgressBarControl.call(this,_a,_b,_c,_d,_e,_f,_g);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridBar=nexacro._GridProgressBarControl.prototype=nexacro._createPrototype(nexacro._CellProgressBarControl,nexacro._GridProgressBarControl);_pGridBar.on_destroy_contents=function(){nexacro._CellProgressBarControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridBar._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.ProgressBar.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridBar._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.ProgressBar.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridBar._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridBar._on_last_keyup=function(){this._cellobj._on_last_keyup();};delete _pGridBar;nexacro._GridEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellEditControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridEdit=nexacro._createPrototype(nexacro._CellEditControl,nexacro._GridEditControl);nexacro._GridEditControl.prototype=_pGridEdit;_pGridEdit.on_destroy_contents=function(){nexacro._CellEditControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridEdit.on_apply_autoskip=function(){this._grid._moveToCell("next",true);};_pGridEdit._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.Edit.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridEdit._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.Edit.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridEdit._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Edit.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridEdit._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Edit.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridEdit.on_fire_onkillfocus=function(_a,_b){return this._cellobj.on_fire_onkillfocus(_a,_b);};_pGridEdit.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.Edit.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridEdit.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Edit.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridEdit.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.Edit.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridEdit.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Edit.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.Edit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);return true;};if(nexacro._Browser=="Gecko"||nexacro._Browser=="Opera"){_pGridEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}else{_pGridEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}_pGridEdit._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridEdit._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridEdit._setDataset=function(_a,_b){var _c=this._cellinfo;var _d=this._grid;var _e=this._update_datarow;if(_b!=undefined){_e=_b;}var _f=true;if(this._input_element&&_d._hide_applydata){if(this._input_element.isComposing()){this._input_element.on_complete_composition_value();if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){this.value=this._input_element.value;}}else{if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9&&this._input_element._composer&&this._input_element._composer.status==nexacro._CompositionState.END){this.value=this._input_element.value;}}}if(_c.text._bindtype==1){_d._is_async_recreate=_a;_d._dsEventOccured=true;var _g={status:""};_d._binddataset.setColumn(_e,_c.text._bindexpr,this.value,_g);if(_g.status=="cancolumnchange"){_f=false;}_d._is_async_recreate=false;_d._dsEventOccured=false;}return _f;};delete _pGridEdit;nexacro._GridTextAreaControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellTextAreaControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridTextArea=nexacro._createPrototype(nexacro._CellTextAreaControl,nexacro._GridTextAreaControl);nexacro._GridTextAreaControl.prototype=_pGridTextArea;_pGridTextArea.on_destroy_contents=function(){nexacro._CellTextAreaControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridTextArea._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.TextArea.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridTextArea._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.TextArea.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridTextArea._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.TextArea.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridTextArea._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.TextArea.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridTextArea.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.TextArea.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridTextArea.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.TextArea.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridTextArea.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.TextArea.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridTextArea.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.TextArea.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridTextArea.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.TextArea.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);return true;};if(nexacro._Browser=="Gecko"||nexacro._Browser=="Opera"){_pGridTextArea._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}else{_pGridTextArea._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}_pGridTextArea._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridTextArea._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridTextArea._setDataset=function(_a,_b){var _c=this._cellinfo;var _d=this._grid;var _e=this._update_datarow;if(_b!=undefined){_e=_b;}var _f=true;if(this._input_element&&_d._hide_applydata){if(this._input_element.isComposing()){this._input_element.on_complete_composition_value();}else{if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9&&this._input_element._composer&&this._input_element._composer.status==nexacro._CompositionState.END){this.value=this._input_element.value;}}}if(_c.text._bindtype==1&&!this.readonly){_d._is_async_recreate=_a;_d._dsEventOccured=true;var _g={status:""};_d._binddataset.setColumn(_e,_c.text._bindexpr,this.value,_g);if(_g.status=="cancolumnchange"){_f=false;}_d._is_async_recreate=false;_d._dsEventOccured=false;}return _f;};delete _pGridTextArea;nexacro._GridMaskEditControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._CellMaskEditControl.call(this,_a,_b,_c,_d,_e,_f,_g);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridMaskEdit=nexacro._createPrototype(nexacro._CellMaskEditControl,nexacro._GridMaskEditControl);nexacro._GridMaskEditControl.prototype=_pGridMaskEdit;_pGridMaskEdit.on_destroy_contents=function(){nexacro._CellMaskEditControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridMaskEdit.on_apply_autoskip=function(){this._grid._moveToCell("next",true);};_pGridMaskEdit._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.MaskEdit.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridMaskEdit._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.MaskEdit.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridMaskEdit._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.MaskEdit.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridMaskEdit._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.MaskEdit.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridMaskEdit.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.MaskEdit.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridMaskEdit.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.MaskEdit.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridMaskEdit.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.MaskEdit.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridMaskEdit.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEdit.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridMaskEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.MaskEdit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);return true;};if(nexacro._Browser=="Gecko"||nexacro._Browser=="Opera"){_pGridMaskEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}else{_pGridMaskEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this.getCaretPos();var _m=this._getClientXY(_f,_g);this.on_fire_onclick(this,_l,_b,_c,_d,_e,_h,_i,_f,_g,_m[0],_m[1],this,this,_j,"control");}};}_pGridMaskEdit._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridMaskEdit._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridMaskEdit._setDataset=function(_a,_b){var _c=this._cellinfo;var _d=this._grid;var _e=this._update_datarow;if(_b!=undefined){_e=_b;}var _f=true;if(_c.text._bindtype==1){_d._is_async_recreate=_a;_d._dsEventOccured=true;var _g={status:""};_d._binddataset.setColumn(_e,_c.text._bindexpr,this.value,_g);if(_g.status=="cancolumnchange"){_f=false;}_d._is_async_recreate=false;_d._dsEventOccured=false;}return _f;};delete _pGridMaskEdit;nexacro._GridCalendarControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellCalendarControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridCalendar=nexacro._createPrototype(nexacro._CellCalendarControl,nexacro._GridCalendarControl);nexacro._GridCalendarControl.prototype=_pGridCalendar;_pGridCalendar.on_destroy_contents=function(){nexacro._CellCalendarControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridCalendar.set_innerdataset=function(_a){var _b=nexacro._CellCalendarControl.prototype.set_innerdataset.call(this,_a);if(this._controlmode){var _c=this._grid;if(_c){for(var _d=0,_e=_c.getCellCount("body");_d<_e;_d++ ){_c.setCellProperty("body",_d,"calendarinnerdataset",_a);}if(_c._currentCellEditor&&_c._currentCellEditor instanceof nexacro._GridCalendarControl){_c._currentCellEditor.set_innerdataset(_a);}}}return _b;};_pGridCalendar.set_backgroundcolumn=function(_a){nexacro._CellCalendarControl.prototype.set_backgroundcolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0,_d=_b.getCellCount("body");_c<_d;_c++ ){_b.setCellProperty("body",_c,"calendarbackgroundcolumn",_a);}}}};_pGridCalendar.set_bordercolumn=function(_a){nexacro._CellCalendarControl.prototype.set_bordercolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0,_d=_b.getCellCount("body");_c<_d;_c++ ){_b.setCellProperty("body",_c,"calendarbordercolumn",_a);}}}};_pGridCalendar.set_datecolumn=function(_a){nexacro._CellCalendarControl.prototype.set_datecolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0,_d=_b.getCellCount("body");_c<_d;_c++ ){_b.setCellProperty("body",_c,"calendardatecolumn",_a);}}}};_pGridCalendar.set_textcolorcolumn=function(_a){nexacro._CellCalendarControl.prototype.set_textcolorcolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0,_d=_b.getCellCount("body");_c<_d;_c++ ){_b.setCellProperty("body",_c,"calendartextcolorcolumn",_a);}}}};_pGridCalendar._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.Calendar.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridCalendar._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.Calendar.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCalendar._on_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this._isPopupVisible()){var _o=this._cellobj;if(_o){var _p=_o._grid;_p._lastmouseentercell=null;}}return nexacro.Component.prototype._on_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pGridCalendar._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Calendar.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCalendar._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Calendar.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCalendar.on_notify_onkeydown=function(_a,_b){var _c=this._grid;if(_b.keycode==nexacro.Event.KEY_DOWN&&_b.altkey){_c._is_editor_keyaction=false;}if(!_a._displaymode){return (nexacro.Calendar.prototype.on_notify_onkeydown.call(this,_a,_b));}};_pGridCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(!_a._displaymode){if(this._grid.autoupdatetype=="dateselect"||this._grid.autoupdatetype=="itemselect"){this._setDataset(true,undefined,false,_d,_e,_c);}return (nexacro.Calendar.prototype.on_fire_onchanged.call(this,_a,_b,_c,_d,_e));}};_pGridCalendar.on_fire_user_ontouchend=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell){_e.canvasx-=_d._adjust_left;_e.canvasy-=_d._adjust_top;_e.clientx-=_d._adjust_left;_e.clienty-=_d._adjust_top;}nexacro.Calendar.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCalendar.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.Calendar.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridCalendar.on_fire_user_ontouchstart=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell){_e.canvasx-=_d._adjust_left;_e.canvasy-=_d._adjust_top;_e.clientx-=_d._adjust_left;_e.clienty-=_d._adjust_top;}nexacro.Calendar.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridCalendar.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.Calendar.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCalendar._on_edit_oneditclick=function(_a,_b){var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);var _g=this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");if(this._type=="system"){var _h=this.getElement();if(_h){var _i=this._cellobj._editor;if(!_i){_i=this;}_i.calendaredit._prevent_clickevent=false;var _j=this._cellobj.on_fire_ondropdown(_a);if(_j){nexacro._openSystemCalendar(_i,this.value,"_on_notify_mobile_valuechanged");}_i.calendaredit._prevent_clickevent=true;}}return _g;};_pGridCalendar._on_drop_onclick=function(_a,_b){nexacro.Calendar.prototype._on_drop_onclick.call(this,_a,_b);var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCalendar._on_drop_mobile_onclick=function(_a,_b){nexacro.Calendar.prototype._on_drop_mobile_onclick.call(this,_a,_b);var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCalendar._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_l[0],_l[1],this,this,_j,"control");}};_pGridCalendar._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCalendar._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridCalendar._setDataset=function(_a,_b,_c,_d,_e,_f){var _g=this._cellinfo;var _h=this._grid;var _i=this._update_datarow;if(_c==undefined){_c=true;}this._setValueCtrl(_c,_d,_e);if(_b!=undefined){_i=_b;}var _j=true;if(_g.text._bindtype==1&&this._is_value_changed){_h._is_async_recreate=_a;_h._dsEventOccured=true;var _k={status:""};_h._binddataset.setColumn(_i,_g.text._bindexpr,this.value,_k);if(_k.status=="cancolumnchange"){this._setValue(_f);_j=false;}_h._is_async_recreate=false;_h._dsEventOccured=false;}return _j;};delete _pGridCalendar;nexacro._GridComboControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellComboControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}else{this._grid=_f;}};var _pGridCombo=nexacro._createPrototype(nexacro._CellComboControl,nexacro._GridComboControl);nexacro._GridComboControl.prototype=_pGridCombo;_pGridCombo.on_destroy_contents=function(){nexacro._CellComboControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridCombo._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.Combo.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridCombo._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_p){nexacro.Combo.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCombo._on_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this._isPopupVisible()){var _o=this._cellobj;if(_o){var _p=_o._grid;_p._lastmouseentercell=null;}}return nexacro.Component.prototype._on_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pGridCombo._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Combo.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCombo._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Combo.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCombo.on_fire_user_ontouchend=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell){_e.canvasx-=_d._adjust_left;_e.canvasy-=_d._adjust_top;_e.clientx-=_d._adjust_left;_e.clienty-=_d._adjust_top;}nexacro.Combo.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCombo.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.Combo.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridCombo.on_fire_user_ontouchstart=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell){_e.canvasx-=_d._adjust_left;_e.canvasy-=_d._adjust_top;_e.clientx-=_d._adjust_left;_e.clienty-=_d._adjust_top;}nexacro.Combo.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridCombo.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.Combo.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!_a._displaymode){if(this._grid.autoupdatetype=="comboselect"||this._grid.autoupdatetype=="itemselect"){this._setDataset(true,undefined,_d);}return (nexacro.Combo.prototype.on_fire_onitemchanged.call(this,_a,_b,_c,_d,_e,_f,_g));}};_pGridCombo._on_edit_oneditclick=function(_a,_b){var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCombo._on_edit_mobile_oneditclick=function(_a,_b){nexacro.Combo.prototype._on_edit_mobile_oneditclick.call(this,_a,_b);var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCombo._on_drop_mobile_onclick=function(_a,_b){nexacro.Combo.prototype._on_drop_mobile_onclick.call(this,_a,_b);var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCombo._on_drop_onclick=function(_a,_b){nexacro.Combo.prototype._on_drop_onclick.call(this,_a,_b);var _c=this._getCurrentStylePadding();var _d=_b.canvasx+(_c?_c.left:0);var _e=_b.canvasy+(_c?_c.top:0);var _f=this._getClientXY(_d,_e);return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_d,_e,_f[0],_f[1],_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");};_pGridCombo._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}var _k=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_k=true;}if(_k&&this._isEnable()&&this.enableevent){var _l=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_l[0],_l[1],this,this,_j);}};_pGridCombo._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCombo._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridCombo._setDataset=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=this._update_datarow;if(_b!=undefined){_f=_b;}var _g=true;if(_d.text._bindtype==1){_e._is_async_recreate=_a;_e._dsEventOccured=true;var _h={status:""};_e._binddataset.setColumn(_f,_d.text._bindexpr,this.value,_h);if(_h.status=="cancolumnchange"){this.set_value(_c);_g=false;}_e._is_async_recreate=false;_e._dsEventOccured=false;}return _g;};delete _pGridCombo;nexacro._GridCellControlCheckbox=function(_a,_b,_c,_d,_e,_f){nexacro._CellCheckboxControlBase.call(this,_a,_b,_c,_d,_e,_f);};var _pGridCellCheckbox=nexacro._createPrototype(nexacro._CellCheckboxControlBase,nexacro._GridCellControlCheckbox);nexacro._GridCellControlCheckbox.prototype=_pGridCellCheckbox;_pGridCellCheckbox.on_notify_checkbox_onkeydown=function(){};_pGridCellCheckbox._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCellCheckbox._on_last_keyup=function(){this._cellobj._on_last_keyup();};delete _pGridCellCheckbox;nexacro._GridCheckboxControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._GridCellControlCheckbox.call(this,_a,_b,_c,_d,_e,_f);this._controlmode=(_g)?true:false;this._grid=this._view;};var _pGridCheckbox=nexacro._createPrototype(nexacro._GridCellControlCheckbox,nexacro._GridCheckboxControl);nexacro._GridCheckboxControl.prototype=_pGridCheckbox;_pGridCheckbox._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro._GridCellControlCheckbox.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCheckbox._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro._GridCellControlCheckbox.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridCheckbox._common_fire_lbuttondown=function(){var _a=this._grid;if(_a){var _b=_a._getDataRow(this._cellobj._rowidx);if(_a._isFakeCell(_b)){return false;}}};_pGridCheckbox.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._common_fire_lbuttondown();return this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);};_pGridCheckbox.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._common_fire_lbuttondown();return this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pGridCheckbox.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro._GridCellControlCheckbox.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCheckbox.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro._GridCellControlCheckbox.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return true;};_pGridCheckbox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=this._grid;if(_n){var _o=_n._getDataRow(this._cellobj._rowidx);if(_n._isFakeCell(_o)){return false;}}if(_n.selectchangetype!="down"){if(nexacro._toBoolean(_n.readonly)==false){this._toggleCheck();}}if(!this._is_alive){return;}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pGridCheckbox.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=this._grid;if(_n){var _o=_n._getDataRow(this._cellobj._rowidx);if(_n._isFakeCell(_o)){return false;}}return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pGridCheckbox._toggleCheck=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=this._grid;var _d=_c._getDataRow(_a._rowidx);var _e=_b._getEdittype(_d);if(_e=="checkbox"){var _f=this._isChecked(this.value);if(_f){_f=nexacro._isNull(this.falsevalue)?0:this.falsevalue;}else{_f=nexacro._isNull(this.truevalue)?1:this.truevalue;}if(_b.text._bindtype==1){_c._dsEventOccured=true;if(_b._grid._binddataset.setColumn(_d,_b.text._bindexpr,_f)){_f=this._getDisplayText();this.set_value(_f);}if(_c){_c._dsEventOccured=false;}}}};_pGridCheckbox._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};delete _pGridCheckbox;nexacro._GridImageControl=function(_a,_b,_c,_d,_e,_f){nexacro._CellImageControl.call(this,_a,_b,_c,_d,_e,_f);if(_f._refinfo){this._grid=_f._refinfo._grid;this._cellinfo=_f._refinfo;this._cellobj=_f;}};var _pGridImage=nexacro._createPrototype(nexacro._CellImageControl,nexacro._GridImageControl);nexacro._GridImageControl.prototype=_pGridImage;_pGridImage.on_destroy_contents=function(){nexacro._CellImageControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridImage._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Component.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridImage._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Component.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridImage.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"image");};_pGridImage.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m);};_pGridImage.on_fire_user_ontouchend=function(_a,_b,_c,_d){return this.parent.on_fire_user_ontouchend(_a,_b,this,_d);};_pGridImage.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this.parent.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,_n);};_pGridImage.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return this.parent.on_fire_user_onkeydown(_a,_b,_c,_d,this,_f,_g);};_pGridImage.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){return this.parent.on_fire_user_onkeyup(_a,_b,_c,_d,this,_f,_g);};_pGridImage._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridImage._on_last_keyup=function(){this._cellobj._on_last_keyup();};delete _pGridImage;nexacro._GridSelectorButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_i);this._real_parent=_h;this._band=_h._band;this._grid=_i;this._idx=_j;this._point={x:0,y:0,w:0,h:0};this._minibox=null;this._minibox_size=8;this._minibox_wgap=0;this._minibox_hgap=0;this._minibox_backcolor="black";this._is_track=true;this._setControl();};var _pGridSelectorButtonControl=nexacro._GridSelectorButtonControl.prototype=nexacro._createPrototype(nexacro.Button,nexacro._GridSelectorButtonControl);_pGridSelectorButtonControl._is_subcontrol=true;_pGridSelectorButtonControl._updateMiniBox=function(){if(!this.image||!this._image_width||!this._image_height){var _a=(this._adjust_height-this._minibox_size)/2;this._minibox_wgap=_a;this._minibox_hgap=_a;if(!this._minibox){this._minibox=new nexacro.Component("minibox",_a,_a,this._minibox_size,this._minibox_size,null,null,null,null,null,null,this);this._minibox._is_simple_control=true;this._minibox._is_track=true;this._minibox.set_background(this._minibox_backcolor);this._minibox._on_starttrack=function(){return this.parent._on_starttrack();};this._minibox._on_movetrack=function(_a,_b,_c){return this.parent._on_movetrack(_a,_b,_c);};this._minibox._on_endtrack=function(_a,_b,_c){return this.parent._on_endtrack(_a,_b,_c);};this._minibox.createComponent();}else{this._minibox.move(_a,_a,this._minibox_size,this._minibox_size);}}else{if(this._minibox){this._minibox.destroy();this._minibox=null;}if(this._img_elem){this._minibox_wgap=(this._adjust_width-this._image_width)/2;this._minibox_hgap=(this._adjust_height-this._image_height)/2;if(this._minibox_wgap<0){this._minibox_wgap=0;}if(this._minibox_hgap<0){this._minibox_hgap=0;}}}};_pGridSelectorButtonControl.on_fire_onsize=function(){this._updateMiniBox();};_pGridSelectorButtonControl.on_create_contents=function(){nexacro.Button.prototype.on_create_contents.call(this);this._updateMiniBox();};_pGridSelectorButtonControl.on_created_contents=function(_a){nexacro.Button.prototype.on_created_contents.call(this,_a);if(this._minibox){this._minibox.on_created();}};_pGridSelectorButtonControl.on_destroy_contents=function(){this._band=null;this._grid=null;this._minibox=null;this._real_parent=null;nexacro.Button.prototype.on_destroy_contents.call(this);};_pGridSelectorButtonControl._on_starttrack=function(){var _a=this._real_parent;_a._is_tracking=true;_a._track_reset_scroll=false;_a._track_up_scroll=false;var _b=this._grid._getScrollTop();var _c=this._grid._getScrollLeft();this._point.hgap=0;this._point.wgap=0;this._point.scrolltop=_b;this._point.scrollleft=_c;this._point.x=_a._area_pos.l;this._point.y=_a._area_pos.t;this._point.w=_a._area_pos.w;this._point.h=_a._area_pos.h;var _d= -1,_e= -1;var _f=this._grid._selectinfo.area;if(_f.length>0){var _g=_f[_f.length-1];_d=_g.begrow;_e=_g.endrow;if(this._idx!=_a._pre_idx){var _h=this._grid._selectinfo.areainfo;var _i=this._grid._selectinfo.ctrlpoint;var _j;if(_h){var _k=this._grid._curFormat;var _l=_k._bodyrows.length;if(this._idx==0){_j=_k._bodycells[_h.ecell];_i._set(_j,_h.erow,_l);}else if(this._idx==1){_j=_k._bodycells[_h.scell];_i._set(_j,_h.srow,_l);}else if(this._idx==2){_j=_k._bodycells[_h.ecell];_i._set(_j,_h.srow,_l);}else if(this._idx==3){_j=_k._bodycells[_h.scell];_i._set(_j,_h.erow,_l);}}}}if(this._grid._fixed_rowcnt>0){if(_d>=this._grid._fixed_startrow&&_d<=this._grid._fixed_endrow){this._point.y=_a._area_pos.t+=this._point.scrolltop;if(_e>this._grid._fixed_endrow&&_b>0){if(_a._end_scroll_top>=0){this._point.h=_a._area_pos.h-=_b;}}}}_a.set_visible(true);_a._trackbar[0].set_visible(false);_a._trackbar[1].set_visible(false);_a._trackbar[2].set_visible(false);_a._trackbar[3].set_visible(false);_a._start_begarea=this._grid._selectinfo.arearect.barea;_a._start_endarea=this._grid._selectinfo.arearect.earea;if(this._idx==0){this._area=_a._start_begarea;}else{this._area=_a._start_endarea;}this._grid._track_mode="areaselect";_a._callback_start.call(this._grid,_a._area_pos,this._idx);};_pGridSelectorButtonControl._on_movetrack=function(_a,_b){var _c=this._real_parent;var _d=this._grid._getScrollTop();var _e=this._grid._getScrollLeft();var _f=0,_g=0;if(_c._start_scroll_top>=0){_f=_c._start_scroll_top-_d;}if(_c._start_scroll_left>=0){_g=_c._start_scroll_left-_e;}var _h=this._grid._selectinfo.ctrlpoint.row;var _i=true;if(this._grid._fixed_rowcnt>0&&_h>=this._grid._fixed_startrow&&_h<=this._grid._fixed_endrow){_i=false;}var _j,_k,_l,_m;if(this._idx==0){_j=this._point.x+_a;_k=this._point.y+_b;_l=this._point.w-_a+_g;_m=this._point.h-_b+(_i?_f:0);}else if(this._idx==1){_j=this._point.x+_g;_k=this._point.y+(_i?_f:0);_l=this._point.w+_a-_g;_m=this._point.h+_b-(_i?_f:0);}else if(this._idx==2){_j=this._point.x+_a;_k=this._point.y;_l=this._point.w-_a;_m=this._point.h+_b;}else if(this._idx==3){_j=this._point.x;_k=this._point.y+_b;_l=this._point.w+_a;_m=this._point.h-_b;}var _n=this._grid._selectinfo.area;if(this._grid._fixed_rowcnt>0&&_n.length){var _o=this._grid._getCurrentStyleBorder();var _p=(_o)?parseInt(_o.right._width,10):0;var _q=this._grid._getHeadHeight();var _r=this._grid._fixed_height;var _s=_q+_r+_p;var _t=_n[_n.length-1];var _u=_t.begrow;var _v=_t.endrow;var _w=this._grid._selectinfo.ctrlpoint;var _x=this._grid._fixed_endrow;var _y=this._grid._vscrollmng;if((_k+_m)<_s){_c._track_reset_scroll=true;}if(_v>_x){_c._track_up_scroll=true;}if(_c._track_reset_scroll&&_u<=_x&&_d>0&&(_k+_m)>=_s){_y.setPos(0);_c._track_reset_scroll=false;}else if(_c._track_up_scroll&&_w.row<=_x&&_d>0&&(_k+_m)<=(_s)){_y.setPos(_y.pos-1);}else if(_w.row>_x&&_d>0&&_k<=_s){_y.setPos(_y.pos-1);}}var _z=_c._setAreaPos(_j,_k,_l,_m,true,this._idx);_c._adjust_scroll=false;if(_z[0]!=""||_z[1]!=""){var _aa=null;if(_c._onlyarea){_aa=_c._curarea;}var _ab=_c._area_pos.l;var _ac=_c._area_pos.t;var _ad=_c._area_pos.w;var _ae=_c._area_pos.h;_c._callback_scroll.call(this._grid,_z,_aa);_c._area_pos.l=_ab;_c._area_pos.t=_ac;_c._area_pos.w=_ad;_c._area_pos.h=_ae;}_c._callback.call(this._grid,_c._area_pos,this._idx,true);};_pGridSelectorButtonControl._on_endtrack=function(_a,_b){var _c=this._real_parent;_c._is_tracking=false;_c._adjust_scroll=true;_c.set_visible(false);_c._trackbar[0].set_visible(true);_c._trackbar[1].set_visible(true);_c._start_begarea=this._grid._selectinfo.arearect.barea;_c._start_endarea=this._grid._selectinfo.arearect.earea;if(this._idx==0){this._area=_c._start_begarea;}else{this._area=_c._start_endarea;}_c._end_scroll_top=this._grid._getScrollTop();_c._end_scroll_left=this._grid._getScrollLeft();_c._pre_idx=this._idx;var _d=this._grid._selectinfo.area;if(this._grid._fixed_rowcnt>0&&_d.length){var _e=_d[_d.length-1];var _f=_e.endrow;var _g=this._grid._fixed_endrow;if(_f>_g){_c._track_up_scroll=true;}else{_c._track_up_scroll=false;}}this._grid._track_mode="";this._grid._updateSelector();};delete _pGridSelectorButtonControl;nexacro._GridSelector=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this._is_subcontrol=true;this._is_simple_control=true;this._callback_start=null;this._callback=null;this._callback_scroll=null;this._trackbar=[];this._grid=_h;this._band=_h._bodyBand;this._area_pos={l:0,t:0,w:0,h:0,empty:true};this._curarea="";this._onlyarea=false;this._start_begarea="";this._start_endarea="";this._start_scroll_top= -1;this._start_scroll_left= -1;this._end_scroll_top= -1;this._end_scroll_left= -1;this._pre_idx= -1;};var _pGridSelector=nexacro._createPrototype(nexacro.Component,nexacro._GridSelector);nexacro._GridSelector.prototype=_pGridSelector;_pGridSelector._is_subcontrol=true;_pGridSelector._type_name="GridSelectorControl";_pGridSelector._trackbar_size=22;_pGridSelector.on_create_contents=function(){};_pGridSelector.on_created_contents=function(){if(this._trackbar[0]){this._trackbar[0].on_created();this._trackbar[1].on_created();this._trackbar[2].on_created();this._trackbar[3].on_created();}};_pGridSelector.on_destroy_contents=function(){this._trackbar[0].destroy();this._trackbar[1].destroy();this._trackbar[0]=null;this._trackbar[1]=null;this._trackbar[2]=null;this._trackbar[3]=null;this._trackbar=null;this._band=null;this._grid=null;};_pGridSelector._createButton=function(){if(!this._trackbar[0]){this._trackbar[0]=new nexacro._GridSelectorButtonControl("selectortrackbar1",0,0,0,0,null,null,this,this.parent,0);this._trackbar[0].createComponent();this._trackbar[1]=new nexacro._GridSelectorButtonControl("selectortrackbar2",0,0,0,0,null,null,this,this.parent,1);this._trackbar[1].createComponent();this._trackbar[2]=new nexacro._GridSelectorButtonControl("selectortrackbar3",0,0,0,0,null,null,this,this.parent,2);this._trackbar[2].createComponent();this._trackbar[3]=new nexacro._GridSelectorButtonControl("selectortrackbar4",0,0,0,0,null,null,this,this.parent,3);this._trackbar[3].createComponent();this._trackbar[0]._no_slide_scroll=true;this._trackbar[1]._no_slide_scroll=true;this._trackbar[2]._no_slide_scroll=true;this._trackbar[3]._no_slide_scroll=true;this._recalcarea();}};_pGridSelector._updateAll=function(){};_pGridSelector._recalcarea=function(_a){if(!this._trackbar[0]){return;}if(this._area_pos.empty){this._trackbar[0].set_visible(false);this._trackbar[1].set_visible(false);this._trackbar[2].set_visible(false);this._trackbar[3].set_visible(false);return;}if(_a!="hscroll"&&_a!="vscroll"){this.__showbutton(false);}var _b=this._trackbar_size;var _c=_b/2;var _d=this._grid;var _e=_d._curFormat;var _f=_e.leftWidth;var _g=_d._getClientWidth()-_e.rightWidth;var _h,_i,_j,_k;var _l,_m,_n,_o;var _p;_j=this._band._adjust_top;_k=this._band.getOffsetBottom();_h=[];_i=[];if(this._start_begarea=="left"){_h[0]=0;_i[0]=_f;}else if(this._start_begarea=="right"){_h[0]=_g;_i[0]=_d._getClientWidth();}else{_h[0]=_f;_i[0]=_g;}if(this._start_endarea=="left"){_h[1]=0;_i[1]=_f;}else if(this._start_endarea=="right"){_h[1]=_g;_i[1]=_d._getClientWidth();}else{_h[1]=_f;_i[1]=_g;}var _q=this._grid._fixed_height;var _r=this._grid._fixed_startrow;var _s=this._grid._fixed_rowcnt;var _t=[false,false,false,false];var _u=this._grid._scroll_top;if(_s){var _v=this._grid._selectinfo.area;var _w,_x;if(_v.length>0){_w=_v[_v.length-1].begrow;_x=_v[_v.length-1].endrow;if(_w<=(_r+_s)){_t[0]=_t[3]=true;}if(_x<=(_r+_s)){_t[1]=_t[2]=true;}}}_p=_t[0]?_u:0;_l=this._area_pos.l-_c;_m=this._area_pos.t-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[0].move(_l,_m,_b,_b);var _y=this._trackbar[0]._minibox_wgap;var _z=this._trackbar[0]._minibox_hgap;var _aa=_d._find_lastFocused();if(_aa==_d){if(_n-_y<_h[0]||_o-_z<_j||_l+_y>_i[0]||_m+_z>_k||_m+_z<_q){this._trackbar[0].visible=_t[0]||false;}else{this._trackbar[0].visible=true;}}else{this._trackbar[0].visible=false;}_p=_t[1]?_u:0;_l=this._area_pos.l+this._area_pos.w-_c;_m=this._area_pos.t+this._area_pos.h-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[1].move(_l,_m,_b,_b);if(_aa==_d){if(_n-_y<_h[1]||_o-_z<_j||_l+_y>_i[1]||_m+_z>_k||_m+_z<_q){this._trackbar[1].visible=_t[1]||false;}else{this._trackbar[1].visible=true;}}else{this._trackbar[1].visible=false;}_p=_t[2]?_u:0;_l=this._area_pos.l-_c;_m=this._area_pos.t+this._area_pos.h-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[2].move(_l,_m,_b,_b);if(_aa==_d){if(_n-_y<_h[0]||_o-_z<_j||_l+_y>_i[0]||_m+_z>_k||_m+_z<_q){this._trackbar[2].visible=false;}}_p=_t[3]?_u:0;_l=this._area_pos.l+this._area_pos.w-_c;_m=this._area_pos.t-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[3].move(_l,_m,_b,_b);if(_aa==_d){if(_n-_y<_h[1]||_o-_z<_j||_l+_y>_i[1]||_m+_z>_k||_m+_z<_q){this._trackbar[3].visible=false;}}this.__showbutton(true);};if(nexacro._OS=="Android"&&(nexacro._Browser=="Safari"||nexacro._Browser=="MobileSafari")){_pGridSelector.__showbutton=function(_a){if(this._trackbar[0]){if(!_a){this._trackbar[0]._control_element.setElementVisible(false);this._trackbar[1]._control_element.setElementVisible(false);this._trackbar[2]._control_element.setElementVisible(false);this._trackbar[3]._control_element.setElementVisible(false);}else{nexacro._OnceCallbackTimer.callonce(this,function(){this._trackbar[0]._control_element.setElementVisible(this._trackbar[0].visible);this._trackbar[1]._control_element.setElementVisible(this._trackbar[1].visible);},10);}}};}else{_pGridSelector.__showbutton=function(_a){if(this._trackbar[0]){if(!_a){this._trackbar[0]._control_element.setElementVisible(false);this._trackbar[1]._control_element.setElementVisible(false);this._trackbar[2]._control_element.setElementVisible(false);this._trackbar[3]._control_element.setElementVisible(false);}else{this._trackbar[0]._control_element.setElementVisible(this._trackbar[0].visible);this._trackbar[1]._control_element.setElementVisible(this._trackbar[1].visible);}}};}_pGridSelector._trackingHScroll=function(_a,_b,_c,_d,_e,_f,_g){if(!this._adjust_scroll&&(this._grid.scrolltype=="none"||this._grid.scrolltype=="vertical")){return [0,0];}return this._grid._trackingHScroll(_a,_b,_c,this._start_begarea,this._start_endarea,_d,_e,_f,_g);};_pGridSelector._setAreaPos=function(_a,_b,_c,_d,_e,_f){var _g=["",""];var _h=this._grid;this._curarea=_h._selectinfo.ctrlpoint.area;if(_e){var _i=this._grid._getTrackType(this,_a,_b,_c,_d,_f,this._onlyarea);_a=_i.adjust_l;_b=_i.adjust_t;_c=_i.adjust_w;_d=_i.adjust_h;_g[0]=_i.type[0];_g[1]=_i.type[1];}var _j=(_h._selectinfo.area.length>0)?false:true;if(_c<=0){_c=1;}if(_d<=0){_d=1;}this._area_pos.l=_a;this._area_pos.t=_b;this._area_pos.w=_c;this._area_pos.h=_d;this._area_pos.area=this._curarea;this._area_pos.empty=_j;if(_e){this._area_pos.scrolltop=_h._getScrollTop();}return _g;};_pGridSelector.move=function(_a,_b,_c,_d,_e){if(!this._is_tracking){if(_a>this._grid._getClientWidth()){return;}this._start_begarea=this._grid._selectinfo.arearect.barea;this._start_endarea=this._grid._selectinfo.arearect.earea;this._setAreaPos(_a,_b,_c,_d);this._recalcarea(_e);}else{this._setAreaPos(_a,_b,_c,_d);}return nexacro.Component.prototype.move.call(this,_a,_b,_c,_d,undefined,undefined);};_pGridSelector._setCallbackFn=function(_a,_b,_c){this._callback_start=_a;this._callback=_b;this._callback_scroll=_c;};_pGridSelector._initTrackInfo=function(){this._start_scroll_top= -1;this._start_scroll_left= -1;this._end_scroll_top= -1;this._end_scroll_left= -1;this._pre_idx= -1;};delete _pGridSelector;nexacro._OverlayControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.Component.call(this,((_m)?_m:"overlaycontrol"),_a,_b,_c,_d,_e,_f,null,null,null,null,_g);this._org_left=_h;this._org_top=_i;this._org_width=_j;this._org_height=_k;this._use_event=_n;this._is_subcontrol=true;this._skip_mobile_tabfocus=true;this._is_left=_o;this._is_headsumm=_p;if(!_l){this._ctrl=new nexacro.Static("ctrl",0,0,this._org_width,this._org_height,null,null,null,null,null,null,this);}};var _pOverlayControl=nexacro._createPrototype(nexacro.Component,nexacro._OverlayControl);nexacro._OverlayControl.prototype=_pOverlayControl;_pOverlayControl._is_subcontrol=true;_pOverlayControl._type_name="OverlayControl";_pOverlayControl.on_create_contents=function(){nexacro.Component.prototype.on_create_contents.call(this);if(!this._use_event){this._control_element.setElementPointerEvents("none");}this._ctrl.createComponent(true);var ctrl=this._ctrl;for(var attr in ctrl){if(attr.indexOf("set_")>=0){var str="this."+attr+" = function(v)\n";str+="{";str+="    this._ctrl."+attr+"(v);";str+="}";eval(str);}}};_pOverlayControl.on_created_contents=function(){nexacro.Component.prototype.on_created_contents.call(this);if(!this._use_event){this._control_element.setElementPointerEvents("none");}this._ctrl.on_created();if(!this._use_event){this._ctrl._control_element.setElementPointerEvents("none");}};_pOverlayControl.on_attach_contents_handle=function(_a){nexacro.Component.on_attach_contents_handle(this,_a);this._ctrl.attachHandle(_a);if(!this._use_event){this._ctrl._control_element.setElementPointerEvents("none");}};_pOverlayControl.setControlElemPosition=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;var _h=this._org_left-((this._is_left)?0:_g._getScrollLeft());var _i=this._org_top-((this._is_headsumm||_e)?0:_g._getScrollTop());var _j=_g._curFormat;var _k=(this._is_left)?0:_j.leftWidth;var _l=(this._padding)?this._padding.top:0;if(_h<_k){this._ctrl.move(_h-_k,this._ctrl.top);}else{this._ctrl.move(0,this._ctrl.top);}if(_i<0){this._ctrl.move(this._ctrl.left,_i+_l);}else{this._ctrl.move(this._ctrl.left,0);}if(_f){this._ctrl.set_width(_c);}this._control_element.setElementPosition(_a,_b);this._control_element.setElementSize(_c,_d);};_pOverlayControl._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};_pOverlayControl._on_last_keyup=function(){this.parent._on_last_keyup();};_pOverlayControl.move=nexacro._emptyFn;delete _pOverlayControl;nexacro._GridSelectionControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,((_h)?_h:"selection"),_a,_b,_c,_d,_e,_f,null,null,null,null,_g);};var _GridSelectionControl=nexacro._createPrototype(nexacro.Component,nexacro._GridSelectionControl);nexacro._GridSelectionControl.prototype=_GridSelectionControl;_GridSelectionControl._is_subcontrol=true;_GridSelectionControl._is_nc_control=true;_GridSelectionControl._is_simple_control=true;_GridSelectionControl._type_name="GridSelectionControl";_GridSelectionControl.on_create_contents=function(){nexacro.Component.prototype.on_create_contents.call(this);if(!this._use_event){this._control_element.setElementPointerEvents("none");}};_GridSelectionControl.on_created_contents=function(){nexacro.Component.prototype.on_created_contents.call(this);if(!this._use_event){this._control_element.setElementPointerEvents("none");}};delete _GridSelectionControl;nexacro._GridResizerControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this._is_simple_control=true;this._is_track=true;this._callback=null;this._index= -1;this._direction="";this._tracksize= -1;this._is_range=false;this._movedPos=0;this._is_tracking=false;this._no_slide_scroll=true;};var _pGridResizer=nexacro._createPrototype(nexacro.Component,nexacro._GridResizerControl);nexacro._GridResizerControl.prototype=_pGridResizer;_pGridResizer._is_subcontrol=true;_pGridResizer._type_name="GridControlResizerControl";_pGridResizer.on_create_contents=function(){};_pGridResizer.on_created_contents=function(){this.set_visible(false);this._on_apply_tracksize();this.set_background("gray");var _a=this._direction;var _b;if(_a=="horizon"){_b=nexacro.CursorObject("col-resize");}else{_b=nexacro.CursorObject("row-resize");}this._control_element.setElementCursor(_b);};_pGridResizer._setCallbackFn=function(_a){this._callback=_a;};_pGridResizer._setIndex=function(_a){this._index=_a;};_pGridResizer._setDirection=function(_a){if(this._direction!=_a){this._direction=_a;this._on_apply_direction();}};_pGridResizer._on_apply_direction=function(){var _a=this.getElement();if(_a){this._on_apply_tracksize();var _b=this._direction;var _c;if(_b=="horizon"){_c=nexacro.CursorObject("col-resize");}else{_c=nexacro.CursorObject("row-resize");}this.on_apply_cursor(_c);}};_pGridResizer._setTracksize=function(_a){if(this._tracksize!=_a){this._tracksize=_a;this._on_apply_tracksize();}};_pGridResizer._on_apply_tracksize=function(){var _a=this.getElement();if(_a){var _b=this._tracksize;var _c=this._direction;if(_c=="horizon"){this.resize(1,_b);}else if(_c=="vertical"){this.resize(_b,1);}var _d=false,_e=false,_f=false,_g=false;if(_c=="horizon"){_e=true;_f=true;_g=true;}else{_d=true;_f=true;_g=true;}_a.setElementBorderNone(_d,_e,_f,_g);}};_pGridResizer._moveLeftTo=function(_a){this.left=_a=_a||0;this.move(_a,this.top);};_pGridResizer._moveTopTo=function(_a){this.top=_a=_a||0;this.move(this.left,_a);};_pGridResizer._on_starttrack=function(){if(!this._is_alive){return;}this._movedPos=0;this._is_tracking=true;};_pGridResizer._on_movetrack=function(_a,_b){if(!this._is_alive){return;}var _c=this.parent;if(_c.ondrag&&_c.ondrag.defaultprevented==true){return;}if(_c.ondragmove&&_c.ondragmove.defaultprevented==true){return;}if(!this.visible){this.set_visible(true);}if(this._direction=="horizon"){var _d=_a-this._movedPos;this._moveLeftTo(this.left+_d);this._movedPos=_a;}else if(this._direction=="vertical"){var _e=_b-this._movedPos;this._moveTopTo(this.top+_e);this._movedPos=_b;}};_pGridResizer._on_endtrack=function(_a,_b){if(!this._is_alive){return;}var _c=this.getElement();if(_c){nexacro._initDragInfo();if(this.visible){this.set_visible(false);}var _d=this.parent;if((_d.ondrag&&_d.ondrag.defaultprevented==true)||(_d.ondragmove&&_d.ondragmove.defaultprevented==true)){}else{if(this._callback&&this._movedPos!=0){if(this._direction=="horizon"){this._callback.call(this.parent,_a,this._index);}else if(this._direction=="vertical"){this._callback.call(this.parent,_b,this._index);}}}}this._is_tracking=false;};_pGridResizer._applyElementVisible=function(_a){if(this._control_element){this._control_element.setElementDisplay(_a?"":"none");}};delete _pGridResizer;nexacro._CellTreeItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._CellTreeControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._grid=this._view;this._checkboxObj="_GridCellControlCheckbox";};var _pGridTree=nexacro._createPrototype(nexacro._CellTreeControl,nexacro._CellTreeItemControl);nexacro._CellTreeItemControl.prototype=_pGridTree;_pGridTree.on_destroy_contents=function(){nexacro._CellTreeControl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridTree._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseenter();}if(_p){nexacro.Component.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridTree._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=true;if(_n){_p=this._cellobj._common_mouseleave();}if(_p){nexacro.Component.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}return true;};_pGridTree._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridTree._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridTree._common_fire_lbuttondown=function(_a,_b,_c){if(this._isEditTypeTree()&&this._btnimg_ctrl&&this._grid.treeusebutton!="noclick"){var _d=false;if(this._btnimg_ctrl.visible){if((_c instanceof nexacro._TreeItemIconControl)&&this._is_elem_area(this._btnimg_ctrl._control_element,_a,_b)){_d=true;}}else{if(this._is_elem_area(this._btnimg_ctrl._control_element,_a,_b)){_d=true;}}if(_d){var _e=this._grid;var _f=this._cellobj;_f._tree_lbuttondown=true;_e._toggleTreeState(_f._rowidx,true);if(this._is_alive){_f._tree_lbuttondown=false;}}}};_pGridTree.on_fire_user_ontouchstart=function(_a,_b){var _c=nexacro._getFirstTouchInfo(_b);if(_c){this._common_fire_lbuttondown(_c.canvasx,_c.canvasy);}};_pGridTree.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._common_fire_lbuttondown(_g,_h,_l);};_pGridTree._common_fire_lbuttonup=function(){if(this._cellobj._tree_lbuttondown){this._cellobj._tree_lbuttondown=false;}};_pGridTree.on_fire_user_ontouchend=function(){this._common_fire_lbuttonup();};_pGridTree.on_fire_user_onlbuttonup=function(){this._common_fire_lbuttonup();};_pGridTree._on_treecheckboxclick=function(_a,_b){var _c=this._grid;if(!this._is_alive||_c.readonly){return;}if(_a==this._chk_ctrl){var _d=this._cellobj;var _e=this._cellinfo;var _f=_c._getDataRow(_d._rowidx);var _g=_d._getDisplayRowIdx();if(_e.treecheck._bindtype==1){var _h=_c._treeChecked[_f];var _i=_e.treecheck._bindexpr;var _j=(_h==0)?1:0;_c._binddataset.setColumn(_f,_i,_j);}else{if(_c._toggleTreeChecked(_d._rowidx)){_c._refreshBodyRow(_g);}}}};_pGridTree.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this._is_alive){return;}var _o=_l;while(_o){if(_o._type_name=="CheckBoxControl"){break;}_o=_o.parent;}if(this._isEditTypeTree()){this._on_treecheckboxclick(_o);}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pGridTree._is_elem_area=function(_a,_b,_c){var _d=this._getCumulativeZoomFactor()/100.0;var _e=_a.left;var _f=_a.top;var _g=_a.width* _d;var _h=_a.height* _d;if(_b>=_e&&_b<=(_e+_g)){return (_c>=_f&&_c<=(_f+_h));}else{return false;}};_pGridTree._lineUpdate=function(_a,_b){if(this._grid.treeuseline!=this._treeuseline){this._createLines();if(this._rightline_ctrl){this._rightline_ctrl.set_visible(this._grid.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(this._grid.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(this._grid.treeuseline);}this._treeuseline=this._grid.treeuseline;}var _c=this._grid;var _d=this._cellinfo._getTreeStartLevel(_a);var _e=(_c._hasSameNextNode[_a])?_c._hasSameNextNode[_a][1]:false;var _f=(_d>=_b)?true:false;this._createLeftLine(_a);var _g;if(this._rightline_ctrl){_g=this._rightline_ctrl;_g._set_line(false,true);}if(this._upline_ctrl){_g=this._upline_ctrl;_g._set_line(!_f,false);}if(this._downline_ctrl&&!_f&&_e){_g=this._downline_ctrl;_g._set_line(true,false);}else if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}this._treeline_visible(!this._cellobj._hideInner);};_pGridTree._getRowParentLevel=function(_a,_b){var _c;var _d=this._cellinfo;for(var _e=_b;_e>=0;_e-- ){_c=_d._getTreeLevel(_e);if(_c==_a){return _e;}else if(_c<_a){break;}}return  -9;};_pGridTree.__isNextSameLevelInSameParent=function(_a,_b){var _c=this._grid._rowcount;var _d=this._cellinfo;var _e;var _f=this._getRowParentLevel(_a,_b);if(_f>=0){var _g=this._grid._hasSameNextNode[_f];return _g[1];}else{for(var _h=_b;_h<_c;_h++ ){_e=_d._getTreeLevel(_h);if(_e<_a){break;}else if(_e==_a){return true;}}}return false;};_pGridTree._createLeftLine=function(_a){var _b=this._grid;var _c,_d;if(!_b.treeuseline){for(_c=0,_d=this._leftline_ctrls.length;_c<_d;_c++ ){this._leftline_ctrls[_c].destroy();}this._leftline_ctrls=[];return;}var _e=this._cellinfo._getTreeLevel(_a);var _f=_e-1;var _g;_c=0;var _h=this._leftline_ctrls;while(_b._rootlevel<_f){_g=this.__isNextSameLevelInSameParent(_f,_a);if(_g){var _i=this._getLineHeight();var _j=_h[_c];if(!_j){_j=new nexacro._CellTreeLineControl("treeleftline",0,0,1,_i,null,null,this.parent);_j.createComponent();this._leftline_ctrls[_c]=_j;}else{_j.set_height(_i);}_j._set_line(true,false);_j._depth=_f;_c++ ;}_f-- ;}while(_h.length>_c){_h[_h.length-1].destroy();_h.splice(_h.length-1,1);}};delete _pGridTree;nexacro._GridCoverControl=function(_a,_b){nexacro.Component.call(this,"gridblur",0,0,0,0,0,0,null,null,null,null,_a);this._grid=_b;};var _pGridCoverControl=nexacro._createPrototype(nexacro.Component,nexacro._GridCoverControl);nexacro._GridCoverControl.prototype=_pGridCoverControl;_pGridCoverControl._type_name="GridCoverControl";_pGridCoverControl._is_subcontrol=true;_pGridCoverControl._is_scrollable=false;_pGridCoverControl._is_nc_control=true;_pGridCoverControl._is_simple_control=true;_pGridCoverControl.on_create_contents=function(){this.set_visible(false);this.set_background("#ffffff");this.set_opacity("0.8");};_pGridCoverControl.on_destroy_contents=function(){this._grid=null;};_pGridCoverControl._coverOn=function(_a,_b){var _c=this._grid;var _d=_c._bodyrowheight;var _e=this.parent;var _f=_e._getClientTop()+_c._fixed_height;var _g=_e._getClientLeft();var _h=_e._getClientWidth();var _i=_e._getClientHeight();var _j=_a* _d;if(_b!=undefined){var _k=_b* _d;_i=_k-_j;}else{_i-=_j;}this.move(_g,_f+_j,_h,_i);this.set_visible(true);};_pGridCoverControl._coverOff=function(){if(this.visible){this.set_visible(false);return true;}return false;};delete _pGridCoverControl;nexacro._GridRowControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){nexacro.Component.call(this,"gridrow_"+_f,_b,_c,_d,_e,_i,_j,null,null,null,null,_a);this._grid=_a.parent;this._band=_a;this._cells=[];this._rowidx=_f;this._row_sizes=[];this._row_tops=[];this._row_bottoms=[];this._format_rows=[];this._format_cols=[];this._format_cells=[];this._noupdate_remain_cells=[];this.accessibilityrole="none";this._fixed=false;this._is_temp=!!_g;this._use_translate_move=true;this._use_translate_scroll=true;this._is_nc_control=this._floating=!!_h;this._colsubrowscells=[];};var _pGridRow=nexacro._createPrototype(nexacro.Component,nexacro._GridRowControl);nexacro._GridRowControl.prototype=_pGridRow;_pGridRow._is_subcontrol=true;_pGridRow._is_scrollable=false;_pGridRow._type_name="GridRowControl";_pGridRow._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridRow.createCommand=function(){var _a="";if(!this._is_loading){var _b=this._isEnable();if((this._real_enable==null&&_b==false)||(this._real_enable&&this._real_enable!=_b)){this._real_enable=_b;this._changeStatus("disabled",!_b);this.on_apply_prop_enable(_b);}else{this._real_enable=_b;}var _c=this._control_element;if(_c){_a=_c.createCommandStart();_a+=_c.createCommandAreaStart("left");_a+=this.on_create_contents_command("left");_a+=_c.createCommandAreaEnd("left");_a+=_c.createCommandAreaStart("body");_a+=this.on_create_contents_command("body");_a+=_c.createCommandAreaEnd("body");_a+=_c.createCommandAreaStart("right");_a+=this.on_create_contents_command("right");_a+=_c.createCommandAreaEnd("right");_a+=_c.createCommandEnd();}if(!this._is_subcontrol){this._registerHotkey();}this._is_create_commandstr=true;}return _a;};_pGridRow.on_create_contents=function(){if(this._is_temp){return;}this._init(this._grid._curFormat);if(this._grid._async_create){this._createCellComponents_async();}else{this._createCellComponents();}};_pGridRow.on_created_contents=function(_a){if(this._is_temp){return;}var _b=this._grid._curFormat;var _c=_b.bodyWidth;var _d=this._control_element;_d._setContainerMaxWidth(_c);_d.setElementHScrollPos(this._grid._getScrollLeft());if(_d.setInnerHTML&&this._grid._use_innerhtml&&!this._is_nc_control){this._is_create_commandstr=true;var _e="";_e+=_d.createCommandAreaStart("left");_e+=this._createCellElements(0,true,"left");_e+=_d.createCommandAreaEnd("left");_e+=_d.createCommandAreaStart("body");_e+=this._createCellElements(0,true,"body");_e+=_d.createCommandAreaEnd("body");_e+=_d.createCommandAreaStart("right");_e+=this._createCellElements(0,true,"right");_e+=_d.createCommandAreaEnd("right");_d.setInnerHTML(_e);this.attachHandle(_a);}else{if(this._grid._async_create){this._createCellElements_async(false);}else{this._createCellElements(0,false);}}};_pGridRow.on_create_contents_command=function(_a){if(this._grid._async_create){return "";}var _b=this._createCellElements(0,true,_a);return _b;};_pGridRow.on_attach_contents_handle=function(_a){if(this._grid._async_create){nexacro._GridRowControl.prototype.on_created_contents.call(this);return;}var _b=this._cells;var _c=_b.length;if(_c==0){return;}var _d,_e;for(var _f=0;_f<_c;_f++ ){_b[_f].attachHandle(_a);_d=_b[_f].subcells;_e=_d.length;for(var _g=0;_g<_e;_g++ ){_d[_g].attachHandle(_a);}}};_pGridRow.on_destroy_contents=function(){var _a=this._cells,_b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();}this._colsubrowscells=this._grid=this._cells=this._format=this._band=this._cells=this._row_sizes=this._row_tops=this._row_bottoms=this._format_rows=this._format_cols=this._format_cells=this._noupdate_remain_cells=this._hide_hscroll_cells=this._hide_hscroll_cell_indexes=null;};_pGridRow._on_changeStatus=function(_a,_b){if(!this._is_alive){return;}this._oldstatus=this._status;var _c="enabled";this._statusmap[_a]=_b;var _d=this._statusmap;if(_d.disabled){_c="disabled";}this._status=this.on_changeStatus(_a,_b,_c,this._status,this._userstatus);if(this._oldstatus!=this._status){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus,undefined,_a,_b);}if(nexacro._enableaccessibility){this._setAccessibilityStatFlag(this._status,this._userstatus);}};_pGridRow._last_scroll_left=0;_pGridRow._callback_func_onscroll=function(_a,_b){if(this._last_scroll_left!=_a){var _c=this._last_scroll_left-_a;this._last_scroll_left=_a;var _d=(_c>0? -1:(_c<0?1:0));var _e=this._getColScrollInfo(_d);this._grid._adjustGridScrollCols_callback_onscroll_after(_d,_a,_e[0],_e[1]);}};_pGridRow._callback_func_onscroll_node_acivate=function(_a){this._grid._hscrollmng.setPos(_a);};_pGridRow.on_change_containerRect=function(_a,_b){var _c=this._grid;if(_c._rtl&&nexacro._Browser=="Runtime"){var _d=this._cells;var _e=_d.length;var _f=0;for(;_f<_e;_f++ ){_d[_f]._update_position(true);}}nexacro.Component.prototype.on_change_containerRect.call(this,_a,_b);};_pGridRow.on_getIDCSSSelector=function(){return "row";};_pGridRow.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._is_temp){return;}if(nexacro._isTouchInteraction){this._grid._hideEditor();}if(this._band){this._band.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}};_pGridRow.on_create_control_element=function(_a){var _b;var _c=0;if(this._floating){var _d=this._border;_c=this._grid._floating_gap+((_d)?_d.left._width:0);}if(!this._is_temp){_b=new nexacro.GridRowControlElement(_a,_c);}else{_b=new nexacro.ControlElement(_a);}var _e=this._grid._curFormat;_b.setLinkedControl(this);_b._left_width=_e.leftWidth;_b._right_width=_e.rightWidth;if(!this._is_temp){_b._setContainerMaxWidth(this._band._scrollWidth);}this._control_element=_b;return _b;};_pGridRow._apply_setfocus=function(_a,_b){if(_b){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pGridRow._getAccessibilityLabel=function(){var _a="";var _b=this._grid;if(_b._isSelectRowType()){var _c="";var _d=this._cells;for(var _e=0,_f=_d.length;_e<_f;_e++ ){_c=_d[_e]._getAccessibilityLabel(true);if(_a){if(_c){_a+=" "+_c;}}else{_a=_c;}}}return _a;};_pGridRow._init=function(_a){var _b=this._grid,_c=this._control_element;_c.setArea(_a.leftWidth,_a.rightWidth);if(this._rowidx== -1){this._format_rows=_a._headrows;this._format_cells=_a._headcells;}else if(this._rowidx== -2){this._format_rows=_a._summrows;this._format_cells=_a._summcells;}else{this._format_rows=_a._bodyrows;this._format_cells=_a._bodycells;}this._format_cols=_a._cols;if(!this._format_cols){this._format_cols=[];}if(!this._format_rows){this._format_rows=[];}if(!this._format_cells){this._format_cells=[];}var _d,_e=0;if(this._rowidx== -1){_d=_b._rowHeadListSub;}else if(this._rowidx== -2){_d=_b._rowSummListSub;}else{_e=_b._getDataRow(this._rowidx);_d=_b._rowSizeListSub;}var _f=this._format_rows,_g=_f.length,_h=0,_i=0,_j;this._row_tops=[];this._row_sizes=[];this._row_bottoms=[];if(_e>=0){var _k=_e* _g;if(!this._floating){for(_j=0;_j<_g;_j++ ){this._row_tops.push(_i);_h=(_d.length>0)?_d[_k+_j]:_f[_j].size;this._row_sizes.push(_h);_i+=_h;this._row_bottoms.push(_i);}}else{for(_j=0;_j<_g;_j++ ){this._row_tops.push(_i);_h=_f[_j].size;this._row_sizes.push(_h);_i+=_h;this._row_bottoms.push(_i);}}}else{for(_j=0;_j<_g;_j++ ){this._row_tops.push(_i);_h=(_d.length>0)?_d[_j]:_f[_j].size;this._row_sizes.push(_h);_i+=_h;this._row_bottoms.push(_i);}}};_pGridRow._setTempCursor=function(_a){var _b=this._cells;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_a){_b[_c]._temp_cursor=_b[_c].cursor;}else{_a=_b[_c]._temp_cursor;}_b[_c]._updateCursor(_a);}this._updateCursor(_a);};_pGridRow._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};_pGridRow._on_last_keyup=function(){this.parent._on_last_keyup();};_pGridRow._updateAll=function(_a,_b,_c,_d,_e,_f){var _g=this._grid;var _h=_b?this._noupdate_remain_cells:this._cells;var _i=_h.length;var _j;var _k;var _l=_d?_g._getUseBindExprProp("body"):[];var _m=_g._getDataRow(this._rowidx);var _n,_o;var _p;if(!_l){_l=[];}this._noupdate_remain_cells=[];var _q,_r;var _s=0;for(_q=0;_q<_i;_q++ ){_n=_h[_q];_o=_n._refinfo;if(_f&&_f==_n){continue;}if(_e){if((_o._col+_o._colspan-1)<_e){continue;}}if(_o._area!="body"||(_n._is_created&&_n._isUpdateArea())){if(_g._isSelectRowType()){if(_p==undefined){_p=_g._isSelectedCell(_n._cellidx,_m);}}else{_p=_g._isSelectedCell(_n._cellidx,_m);}_j=_n.subcells;_k=_j.length;for(_r=0;_r<_k;_r++ ){_j[_r].selected=_p;}if(_n.selected!=_p){_n.selected=_p;_n._updateAll(_a,false);if(_l[_s]==_n._cellidx){_s++ ;}}else{if(_d){if(_l[_s]==_n._cellidx){_n._updateAll(_a,_c);_s++ ;}}else{_n._updateAll(_a,_c);}}}else{if(_g._is_performance_scroll&&_d&&_o._area=="body"){if(_g._isSelectRowType()){if(_p==undefined){_p=_g._isSelectedCell(_n._cellidx,_m);}}else{_p=_g._isSelectedCell(_n._cellidx,_m);}_n.selected=_p;_n._changeUserStatus("selected",_n._isSelectedColor());}this._noupdate_remain_cells.push(_n);}}};_pGridRow._getAreaRect=function(_a){var _b={left:0,top:0,width:0,height:0};if(!this._is_alive){return _b;}var _c=this._grid._curFormat;_b.top=this._getClientTop();_b.height=this._getClientHeight();if(_a=="left"){_b.left=this._getClientLeft();_b.width=_c.leftWidth;}else if(_a=="right"){_b.left=this._getClientWidth()-_c.rightWidth;_b.width=_c.rightWidth;}else{_b.left=_c.leftWidth;_b.width=this._getClientWidth()-_c.leftWidth-_c.rightWidth;}return _b;};_pGridRow._changeRow=function(_a,_b){if(this._rowidx==_a){return false;}this._rowidx=_a;if(_b){this._init(this._grid._curFormat);}return true;};_pGridRow._hideArea=function(){if(this._fixed){return "";}var _a=this._band;var _b=this._grid;var _c=_b._getScrollTop();var _d=this._adjust_top;var _e=this._adjust_height;var _f=_d+_e;_d-=_c;_f-=_c;var _g=_b._getAvailableRect(_a);var _h=_a._getCurrentStyleBorder();_f-=_h?_h.top._width:0;_f-=_h?_h.bottom._width:0;if(_f<=0){return "top";}else if(_d>=_g.bottom){return "bottom";}return "";};_pGridRow._showfull=function(_a){if(!this._fixed){var _b=this._band;var _c=this._grid;var _d=_c._getScrollTop();var _e=this._adjust_top;var _f=this._adjust_height;var _g=_e+_f;_e-=_d;_g-=_d;var _h=_c._vscrollmng;var _i=_c._getAvailableRect(_b);var _j=_b._getCurrentStyleBorder();_g-=_j?_j.top._width:0;_g-=_j?_j.bottom._width:0;if(_h){if(_f<_i.height){if(_e<0){_h.setRowPos(_c._toprowpos[0]);}else if(_g>_i.bottom){_h.setRowPos(_c._toprowpos[0]+1);}}}}if(_a&&_a._is_alive){_a._showfull(false);}};_pGridRow._createCellElements_async=function(_a){nexacro._OnceCallbackTimer.callonce(this,function(){this._createCellElements(0,_a);});};_pGridRow._createCellComponents=function(){var _a=this._format_cols,_b=this._format_rows,_c=this._format_cells,_d=this._row_tops,_e=this._row_bottoms,_f=(_c)?_c.length:0,_g,_h=0,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u=this._grid,_v=_u._getDataRow(this._rowidx);var _w=_b.length;var _x=this._colsubrowscells=[];for(var _z=0;_z<_w;_z++ ){_x.push([]);}for(_z=0;_z<_f;_z++ ){_g=_c[_z];_i=_a[_g._col].left;_h=_d[_g._row];_j=_a[_g._col+_g._colspan-1].right-_i;_k=_e[_g._row+_g._rowspan-1]-_h;if(_u._isSelectRowType()){if(_s==undefined){_s=_u._isSelectedCell(_g._cellidx,_v);}}else{_s=_u._isSelectedCell(_g._cellidx,_v);}_m="cell_"+this._rowidx+"_"+_g._cellidx;_l=new nexacro._GridCellControl(_m,_i,_h,_j,_k,null,null,this,_g,this._rowidx,_g._cellidx);_l.selected=_s;_x[_g._row][_g._col]=_l;var _y=0;switch(_g._area){case "left":_y=1;break;case "right":_y=2;break;}_l.set_positionstep(_y);_l.createComponent(true);if(_l._text_elem){_l._text_elem.setElementPointerEvents();}this._cells[_z]=_l;_n=_g._subcells;_o=_n.length;for(var _aa=0;_aa<_o;_aa++ ){_t=_n[_aa];_p=_g._col+_t._col;_q=_g._row+_t._row;_i=_a[_p].left;_h=_d[_q];_j=_a[_p+_t._colspan-1].right-_i;_k=_e[_q+_t._rowspan-1]-_h;_i-=_a[_g._col].left;_h-=_d[_g._row];_m="subcell_"+this._rowidx+"_"+_g._cellidx+"_"+_t._cellidx;_r=new nexacro._GridSubCellControl(_m,_i,_h,_j,_k,null,null,_l,_t,this._rowidx,_t._cellidx);_r.selected=_s;_r.parentcell=_l;_r.createComponent(true);_l.subcells[_aa]=_r;}}};_pGridRow._createCellElements=function(_a,_b,_c,_d,_e){var _f=this._cells;var _g=_f.length;if(_g==0){return "";}var _h="";var _i=this._grid,_j=false,_k=_i._getDataRow(this._rowidx),_l,_m;if(this._rowidx<0||_i._is_created==true){_j=true;}var _n=_i._use_recycle_colscroll;var _o,_p;if(_d){_o=_d.s;_p=_d.e;}var _q,_r;var _s= -1,_t= -1,_u= -1;var _v=(_e<0)?_v=_g-1:0;if(!_e){this._clearHideColumnCell();}var _w=false;while(true){_m=_f[_v]._refinfo;while(true){if(_a){if((_m._col+_m._colspan-1)<_a){break;}}if(_c&&_m._area!=_c){break;}if(_m._area=="body"){if(this._rowidx>=0&&_o!=undefined){if(((_m._col+_m._colspan-1)<_o)||(_m._col>_p)){break;}}if(_f[_v]._isUpdateArea()||this._floating){if(_i._isSelectRowType()){if(_l==undefined){_l=_i._isSelectedCell(_f[_v]._cellidx,_k);}}else{_l=_i._isSelectedCell(_f[_v]._cellidx,_k);}_w=true;if(_q==undefined){_q=_m._col;}_r=_m._col;if(_f[_v]._is_created){if(_f[_v]._refresh_display==true){if(_j){_f[_v].selected=_l;_f[_v]._updateAll();}_f[_v]._refresh_display=false;}}else{if(_b){if(_j){_f[_v].selected=_l;_f[_v]._updateAll();}_h+=_f[_v].createCommand();}else if(_n){var _x=_f[_v];var _y=this._popHideColumnCell(_m);if(_y){_f[_y._cellidx]=_x;_y._changeCell(_x);_f[_v]=_y;if(_j){_f[_v].selected=_l;_f[_v]._updateAll();}}else{if(_j){_f[_v].selected=_l;_f[_v]._updateAll();}_f[_v].on_created();}}else{if(_j){_f[_v].selected=_l;_f[_v]._updateAll();}_f[_v].on_created();}}}else{if(_s== -1){_s=_m._col;}if(_q==undefined){if(_s== -1){_s=_m._col;}_t=_m._col+_m._colspan-1;}else{if(_s== -1){_u=_m._col;}}if(_f[_v]._is_created){if(_n&&!_w){this._pushHideColumnCell(_f[_v]);}if(_f[_v]._refresh_display==false){_f[_v]._refresh_display=true;}}}}else{if(_f[_v]._is_created){break;}if(_j){_f[_v]._updateAll();}if(_b){_h+=_f[_v].createCommand();}else{_f[_v].on_created();}}break;}if(_e<0){_v-- ;if(_v>=0){continue;}}else{_v++ ;if(_v<_g){continue;}}break;}if(_d){_d.s=_q;_d.e=_r;}this._update_scol=_q;this._update_ecol=_r;this._hidel_ecol=_t;this._hider_scol=_u;return _h;};_pGridRow._createsHorzCells=function(_a,_b,_c,_d){var _e=this._colsubrowscells;var _f=_e.length;if(_f==0){return false;}var _g=this._grid,_h=_g._getDataRow(this._rowidx),_i,_j,_k;var _l=this._cells;var _m=_g._use_recycle_colscroll;for(var _n=0;_n<_f;_n++ ){_j=_e[_n][_a];if(!_j){continue;}_k=_j._refinfo;if(_k._area=="body"){if(_j._isUpdateArea()){if(_g._isSelectRowType()){if(_i==undefined){_i=_g._isSelectedCell(_j._cellidx,_h);}}else{_i=_g._isSelectedCell(_j._cellidx,_h);}_d=true;_j.selected=_i;_j._updateAll();if(_j._is_created){if(_b){if(_j._refresh_display==true){_j._refresh_display=false;_j._setDisplay(true);}}}else{_j.selected=_i;_j._updateAll();_j.on_created();}}else{if(_j._is_created){if(_m&&!_d){this._pushHideColumnCell(_j);}if(_b){if(_j._refresh_display==false){_j._setDisplay(false);_j._refresh_display=true;}}}}}else{_j._updateAll();if(!_j._is_created){_j.on_created();}}}return _d;};_pGridRow._hideHorzCells=function(_a){if(_a<0){return;}var _b=this._grid;var _c=this._colsubrowscells;var _d=_c.length;if(_d==0){return false;}var _e=_b._getDataRow(this._rowidx),_f;for(var _g=0;_g<_d;_g++ ){_f=_c[_g][_a];if(!_f){continue;}if(_f._is_created){this._pushHideColumnCell(_f);}}};_pGridRow._scrollHorzCells=function(_a){var _b=this._colsubrowscells;var _c=_b.length;if(_c==0){return "";}var _d=this._grid,_e=_d._getDataRow(this._rowidx),_f,_g,_h;var _i=false;for(var _j=0;_j<_c;_j++ ){_g=_b[_j][_a];if(!_g){continue;}_h=_g._refinfo;if(_h._area=="body"){if(_d._isSelectRowType()){if(_f==undefined){_f=_d._isSelectedCell(_g._cellidx,_e);}}else{_f=_d._isSelectedCell(_g._cellidx,_e);}_g.selected=_f;_g._updateAll();if(!_g._is_created){_g.on_created();_i=true;}else if(_g._refresh_display==true){_g._refresh_display=false;}}else{_g._updateAll();if(!_g._is_created){_g.on_created();_i=true;}}}return _i;};_pGridRow._isUseHideCell=function(_a,_b){if(_a._colspan>1||_a._rowspan>1){return false;}if(_a.expandshow._value!="hide"){return false;}return true;};_pGridRow._clearHideColumnCell=function(){this._hide_hscroll_cells=null;this._hide_hscroll_cell_indexes=null;};_pGridRow._pushHideColumnCell=function(_a){var _b=_a._refinfo;var _c=this._grid;var _d=_c._getDataRow(this._rowidx);if(!this._isUseHideCell(_b,_d)){return false;}if(_a._editor){return false;}var _e=_b._getDisplaytype(_d);var _f=this._hide_hscroll_cells;var _g=this._hide_hscroll_cell_indexes;var _h,_i;if(!_f){_f=this._hide_hscroll_cells={};_g=this._hide_hscroll_cell_indexes={};}if(!_f[_e]){_f[_e]=[];_g[_e]=new Array(this._cells.length);}_h=_f[_e];_i=_g[_e];if(!_i[_a._cellidx]){_i[_a._cellidx]=true;_h.push(_a);}return true;};_pGridRow._popHideColumnCell=function(_a){var _b=this._grid;var _c=_b._getDataRow(this._rowidx);if(!this._isUseHideCell(_a,_c)){return null;}var _d=_a._getDisplaytype(_c);var _e=this._hide_hscroll_cells;var _f=this._hide_hscroll_cell_indexes;var _g=null;var _h,_i;if(_e&&_e[_d]){_h=_e[_d];_i=_f[_d];_g=_h.pop();if(_g){_i[_g._cellidx]=undefined;}}return _g;};_pGridRow._update_scol=undefined;_pGridRow._update_ecol=undefined;_pGridRow._hidel_ecol=undefined;_pGridRow._hider_scol=undefined;_pGridRow._getUpdateColRange=function(_a){var _b=this._cells;var _c=_b.length;var _d,_e,_f,_g,_h;var _i=false,_j=false;var _k=this._hidel_ecol;var _l=this._hider_scol;for(var _n=0;_n<_c;_n++ ){_d=_b[_n]._refinfo;if(_d._area!="body"){continue;}var _m=_b[_n]._isUpdateArea();if(_m==false){if(!_i){this._hidel_ecol=_d._col;}else{if(!_j){_j=true;this._hider_scol=_d._col;}}}else{_i=true;}if(_a>0){if(_d._col<=this._update_ecol){continue;}}if(_a<0){if(_d._col>=this._update_scol){continue;}}if(_d._area=="body"&&_m){if(_e==undefined){_e=_d._col;}_f=_d._col+_d._colspan-1;}else if(_e!=undefined){break;}}if(_a>0){if(_e==undefined){_e=this._update_ecol;}if(_f==undefined){_f=_e;}_g=_k;_h=this._hidel_ecol;}else if(_a<0){if(_f==undefined){_f=this._update_scol;}if(_e==undefined){_e=_f;}_g=this._hider_scol;_h=_l;}else{if(_e==undefined){_e=this._update_scol;}if(_f==undefined){_f=this._update_ecol;}this._hide_scol=this._hide_ecol=undefined;_g= -1;_h= -1;}this._update_scol=_e;this._update_ecol=_f;return [[_e,_f],[_g,_h]];};_pGridRow._getColScrollInfo=function(_a){var _b=this.getElement();var _c=_b.scroll_left;var _d=_c+this._grid._adjust_width;var _e=this._cells;var _f=_e.length;var _g;var _h,_i;for(var _k=0;_k<_f;_k++ ){_g=_e[_k]._refinfo;if(_c<=_e[_k].getOffsetRight()&&_d>=_e[_k]._adjust_left){_h=(_h!=undefined?Math.min(_h,_g._col):_g._col);if(_g._area=="body"){var _j=_g._col+_g._colspan-1;_i=(_i!=undefined?Math.max(_i,_j):_j);}else{_i=(_i!=undefined?Math.max(_i,_g._col):_g._col);}}}return [_h|0,_i|0];};_pGridRow._adjustCellDisplay=function(_a,_b){var _c=this._colsubrowscells;var _d=_c.length;var _e=this._cells;var _f=_e.length;var _g,_h;for(var _i=0;_i<_f;_i++ ){for(var _j=0;_j<_d;_j++ ){_h=_c[_j][_i];if(!_h){continue;}_g=_h._refinfo;if(_g._area=="body"){if(_h._is_created&&(_g._col<_a||_g._col>_b)){if(_h._refresh_display==false){_h._refresh_display=true;}}}}}};_pGridRow._createCellComponents_async=function(){nexacro._OnceCallbackTimer.callonce(this,function(){this._createCellComponents();});};_pGridRow._resetCellsSize=function(_a,_b,_c){var _d=this._format_cols,_e=_d?_d.length:0,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s;if(_c){this._init(_a);}this._control_element.setArea(_a.leftWidth,_a.rightWidth);_f=this._cells;_g=_f.length;var _t=this._row_tops,_u=this._row_bottoms;for(var _y=0;_y<_g;_y++ ){_h=_f[_y];_i=_h._refinfo;if(_b){if((_i._col+_i._colspan-1)<_b){continue;}}if(_i._col>=_e){continue;}_n=_d[_i._col].left;_p=_t[_i._row];_o=_d[_i._col+_i._colspan-1].right-_n;_q=_u[_i._row+_i._rowspan-1]-_p;_h.move(_n,_p,_o,_q);var _v=_h._expandCtrl;if(_v){var _w=_h._getCurrentStyleBorder();var _x=_h._getCurrentStylePadding();_n=_o-_v.width-((_w)?_w.right._width:0)-((_x)?_x.right:0);_v.set_left(_n);}_j=_h.subcells;_k=_j.length;for(var _z=0;_z<_k;_z++ ){_l=_j[_z];_m=_l._refinfo;_r=_i._col+_m._col;_s=_i._row+_m._row;_n=_d[_r].left;_p=_t[_s];_o=_d[_r+_m._colspan-1].right-_n;_q=_u[_s+_m._rowspan-1]-_p;_n-=_d[_i._col].left;_p-=_t[_i._row];_l.move(_n,_p,_o,_q);_v=_l._expandCtrl;if(_v){_n=_o-_v.width;_p=_v.top;_o=_v.width;_q=_v.height;_v.move(_n,_p,_o,_q);}}}};_pGridRow._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridRow._get_cells=function(){return this._cells;};delete _pGridRow;nexacro._GridMatrixManager=function(_a,_b){this._width=0;this._height=0;this._grid=_a;this._isBody=_b._isBody;this._rows=[];this._band=_b;this._fixed_rows=[];};var _pGridMatrixManager=nexacro._createPrototype(nexacro.Object,nexacro._GridMatrixManager);nexacro._GridMatrixManager.prototype=_pGridMatrixManager;_pGridMatrixManager._is_subcontrol=true;_pGridMatrixManager.destroy=function(){this._deleteAllRow();this._grid=this._band=this._rows=this._fixed_rows=null;};_pGridMatrixManager._init=function(){this._deleteAllRow();};_pGridMatrixManager._getBodyRowTopPos=function(_a){if(_a<0){return 0;}var _b=this._grid,_c=0;var _d,_e;if(_b._fixed_endrow>=0&&_a>=_b._fixed_startrow&&_a<=_b._fixed_endrow){if(_b._is_variable_bodyrowsize==false){_c=_b._bodyrowheight* (_a-_b._fixed_startrow);}else{_d=_b._fixed_rowcnt;for(_e=0;_e<_d;_e++ ){if(_b._fixed_startrow+_e==_a){break;}_c+=_b._getRowSize(_b._fixed_startrow+_e);}}}else if(_a<_b._fixed_startrow){_d=_b._getGridRowCount();for(_e=0;_e<_d;_e++ ){if(_e==_b._fixed_startrow){break;}_c+=_b._getRowSize(_e);}_c= -_c;}else{if(_b._is_variable_bodyrowsize==false){_c=_b._bodyrowheight* _a;}else{_d=_b._getGridRowCount();for(_e=0;_e<_d;_e++ ){if(_e==_a){break;}_c+=_b._getRowSize(_e);}}_c-=_b._fixedrow_height;}return _c;};_pGridMatrixManager._getAllRows=function(){var _a;if(this._isBody&&this._fixed_rows.length){_a=[];_a=_a.concat(this._fixed_rows);_a=_a.concat(this._rows);}else{_a=this._rows;}return _a;};_pGridMatrixManager._getPhysicalRow=function(_a,_b){var _c=_a.length;for(var _d=0;_d<_c;_d++ ){if(_a[_d]._rowidx==_b){return _d;}}return null;};_pGridMatrixManager._adjustTreeDisplay=function(_a,_b){var _c=[],_d=this._grid,_e=this._band,_f=this._rows,_g=_f.length,_h=0,_i=this._getPhysicalRow(this._rows,_a),_j=_f[_i],_k=false,_l;if(!_j){_j=_f[0];_i=0;}if(_j){if(_b){for(_l=_g-1;_l>=_i;_l-- ){if(_j._rowidx<_f[_l]._rowidx){this._subtractRow();_k=true;}else{_c[0]=_f[_l];}}}else{for(_l=_i;_l<_g;_l++ ){if(_i==_l){_c[0]=_f[_l];}else{this._subtractRow();_k=true;}}}}if(_k){_d._setHscrollElement();_d._absolutelyResetScrollPos(true);_d._control_element.setElementHScrollPos(_d._scroll_left);_d._absolutelyResetScrollPos(false);}var _m=this._adjustRowsDisplay();_g=_f.length;_e._update_rows=_c;if(_g){_h=_f[0]._rowidx;}for(_l=0;_l<_g;_l++ ){_f[_l]._rowidx=_h+_l;}var _n=(_d._vscrollmng)?_d._vscrollmng._pos:0;var _o=_d._resetColSizeList();if(_o||_m){this._adjustColsDisplay(true);if(_d._is_variable_bodyrowsize){_e._clearScrollDisplayRows();}}else{_d._resetScrollMax();}var _p=(_d._vscrollmng)?_d._vscrollmng._pos:0;var _q=_d._control_element.vscroll_limit;if(_p<0){_p=0;}else if(_p>_q){_p=_q;}if(_n!=_p){_d._toprowpos=_d._getScreenTopRowPos(_p);_d._bottomrowpos=_d._getScreenBottomRowPos(_p);}_e._on_refresh_rows();return _o;};_pGridMatrixManager._adjustRowsDisplay=function(_a,_b){var _c=this._grid,_d=false,_e=false,_f=this._rows,_g=_f.length,_h,_i,_j,_k,_l;var _m,_n,_o,_p,_q,_r;if(this._isBody){if(_a){_r=_c._getGridRowCount();for(_i=0;_i<_f.length;_i++ ){_m=_f[_i];if(_m._rowidx>=_r){_m.destroy();_f[_i]=null;_f.splice(_i,1);_i-- ;_e=true;}else{_n=_m._adjust_left;_o=this._getBodyRowTopPos(_m._rowidx);_p=this._band._getClientWidth();_q=_c._getRowSize(_m._rowidx);_f[_i].move(_n,_o,_p,_q);}}_g=_f.length;var _s=this._fixed_rows;for(_i=0,_j=_s.length;_i<_j;_i++ ){_m=_s[_i];_n=_m._adjust_left;_o=this._getBodyRowTopPos(_m._rowidx);_p=this._band._getClientWidth();_q=_c._getRowSize(_m._rowidx);_s[_i].move(_n,_o,_p,_q);}}if(_c._fixed_endrow>=0&&this._fixed_rows.length==0){var _t=_c._fixed_startrow;var _u=_c._fixed_endrow;_l=0;for(_i=_t;_i<=_u;_i++ ){_k=_c._getRowSize(_i);if(_k<0){break;}this._addRow(_l,_k,_i,false,true);_l+=_k;}}_c._resetDisplayInfo(_a);var _v=0;if(_c._disprowcnt>0){_h=(_c._disprowcnt%2)?1:2;_v=_c._disprowcnt+_h;}var _w=_c._getGridRowCount();var _x=_c._is_variable_bodyrowsize;if(_v<0){_v=0;}if(_w<_g){for(_i=_g-1;_i>=_w;_i-- ){this._subtractRow();_e=true;}_g=_f.length;}if(_v<_g){if(_g%2==0){for(_i=_g-1;_i>=_v;_i-- ){if(!_x){this._subtractRow();_e=true;}}}}else if(_v>_g){var _y=0,_z=_w-1;if(_g>0){_y=_f[0]._rowidx;}else{_y=_c._toprowpos[0];}var _aa=_y;var _ab,_ac=false;for(_i=_g;_i<_v;_i++ ){if(_w<=_i){break;}_ab=_y+_i;if(_z<_ab){_ab= --_aa;_ac=true;}_l=this._getBodyRowTopPos(_ab);_k=_c._getRowSize(_ab);if(_ab<=_z&&_ab>=_c._getFixRowCnt()&&_k>0){this._addRow(_l,_k,_ab,_b);_d=true;}}if(_ac&&_d){_f.sort(function(_ad,_ae){return _ad._rowidx-_ae._rowidx;});}}_g=_f.length;if(_c.fillareatype!="none"&&_v>_g){_l=0;_k=this._band._datarowsheight;if(_g){_l=_f[_g-1].getOffsetBottom();}for(_i=_g;_i<_v;_i++ ){this._addRow(_l,_k,_i,_b);_l+=_k;_d=true;}}if(_f.length>0){_c._begrowpos=_f[0]._rowidx;_c._endrowpos=_f[_f.length-1]._rowidx;}else{_c._begrowpos=0;_c._endrowpos=0;}}else{if(_a){for(_i=0;_i<_f.length;_i++ ){_m=_f[_i];_n=_m._adjust_left;_o=_m._adjust_top;_p=this._band._getClientWidth();_q=this._band._getClientHeight();_m.move(_n,_o,_p,_q);}}if(_g==0){if(this._band.id=="head"){_k=_c._getRowSize( -1);this._addRow(0,_k, -1);_d=true;}else if(this._band.id=="summary"){_k=_c._getRowSize( -2);this._addRow(0,_k, -2);_d=true;}}}if(_d||_e||_f.length==0){_c._setHscrollElement();_c._absolutelyResetScrollPos(true);_c._control_element.setElementHScrollPos(_c._scroll_left);_c._absolutelyResetScrollPos(false);if(_c._is_variable_bodyrowsize){this._band._clearScrollDisplayRows();}}return _d;};_pGridMatrixManager._adjustColsDisplay=function(_a,_b,_c,_d){if(!_b){this._grid._resetScrollMax();}var _e=this._getAllRows(),_f=_e.length;var _g;if(_a){var _h=this._grid._curFormat;for(_g=0;_g<_f;_g++ ){_e[_g]._init(_h);_e[_g].set_width(_e[_g].parent._getClientWidth());_e[_g]._resetCellsSize(_h,_c);if(!_b){_e[_g]._updateAll(null,false,undefined,undefined,_c);}_e[_g]._createCellElements(_c,undefined,undefined,undefined,_d);}}else{for(_g=0;_g<_f;_g++ ){if(!_b){_e[_g]._updateAll(null,true,undefined,undefined,_c);}_e[_g]._createCellElements(_c,undefined,undefined,undefined,_d);}}};_pGridMatrixManager._adjustColsScrollEnd=function(_a,_b){var _c=this._getAllRows(),_d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._adjustCellDisplay(_a,_b);}};_pGridMatrixManager._adjustColsDisplay2=function(_a){var _b=this._getAllRows(),_c,_d,_e=_b.length;var _f=this._grid;var _g=_f._is_performance_scroll;for(var _k=0;_k<_e;_k++ ){if(!_c){var _h=_b[_k]._getUpdateColRange(_a);_c=_h[0];_d=_h[1];}var _i;var _j;if(_a<0){_j=false;for(_i=_c[1];_i>=_c[0];_i-- ){_j=_b[_k]._createsHorzCells(_i,_g,_a,_j);}}else{_j=false;for(_i=_c[0];_i<=_c[1];_i++ ){_j=_b[_k]._createsHorzCells(_i,_g,_a,_j);}}}};_pGridMatrixManager._adjustColsScroll=function(_a,_b,_c,_d){var _e=this._getAllRows(),_f=_e.length;var _g=false;var _h;var _i;if(_a<0){for(_h=_c;_h>=_b;_h-- ){for(_i=0;_i<_f;_i++ ){_g|=_e[_i]._scrollHorzCells(_h);}if(_g){_d-- ;}if(_d==0){return _h;}_g=false;}}else if(_a>0){for(_h=_b;_h<=_c;_h++ ){for(_i=0;_i<_f;_i++ ){_g|=_e[_i]._scrollHorzCells(_h);}if(_g){_d-- ;}if(_d==0){return _h;}_g=false;}}return _c;};_pGridMatrixManager._addRow=function(_a,_b,_c,_d,_e){var _f=this._grid._getAvailableRect(this._band),_g=new nexacro._GridRowControl(this._band,_f.left,_a,_f.width,_b,_c);_g._fixed=!!_e;_g.createComponent();if(!_d){this._band._create_rows.push(_g);}if(_e){this._fixed_rows.push(_g);}else{this._rows.push(_g);}};_pGridMatrixManager._subtractRow=function(){if(this._rows.length>0){var _a=this._rows.length-1,_b=this._rows[_a],_c=this._band._create_rows,_d=_c.length;for(var _e=0;_e<_d;_e++ ){if(_c[_e]==_b){_c.splice(_e,1);break;}}_b.destroy();this._rows.splice(_a,1);}};_pGridMatrixManager._deleteAllRow=function(){var _a=this._rows;for(var _d=0,_e=_a.length;_d<_e;_d++ ){_a[_d].destroy();}var _b=this._fixed_rows;for(_d=0,_e=_b.length;_d<_e;_d++ ){_b[_d].destroy();}var _c=this._band._create_rows;for(_d=0,_e=_c.length;_d<_e;_d++ ){_c[_d].destroy();}this._band._create_rows=[];this._rows=[];this._fixed_rows=[];this._grid._setHscrollElement();this._grid._is_over_scroll=0;this._grid._destroyResizer();};_pGridMatrixManager._isShowScreenRow=function(_a,_b,_c){if(_a._rowidx<0){return true;}var _d=_b,_e=_d+_c;if(_d<_a.getOffsetBottom()&&_e>_a._adjust_top){return true;}return false;};_pGridMatrixManager._getScrollRowsInfo=function(_a,_b,_c){var _d=this._grid,_e=this._rows,_f=_e.length,_g=_d._last_scroll_top;var _h=_c||{};var _i=_d._toprowpos;var _j=_d._bottomrowpos;var _k=_h.dir;var _l;var _m,_n;_h.timestamp=(performance?performance.now():(new Date()));_h.starttime=_h.timestamp;_h.scrollmode=_b;_h.framecnt=(_b?_b:_f);_h.skipped=0;_h.toprow=_d._getScreenTopRowPos(_a);_h.bottomrow=_d._getScreenBottomRowPos(_a);_h.bottomrowex=[_h.bottomrow,0];_h.usehidden=true;if(!_h.display_rows){_h.display_rows=_l=[];for(_m=0,_n=_f;_m<_n;_m++ ){_l.push(_e[_m]);}if(_d._is_variable_bodyrowsize){_l.sort(function(_t,_u){return _t._rowidx-_u._rowidx;});}}else{_l=_h.display_rows;}var _o,_p;var _q;var _r;var _s;if(_a>_g){_o=_h.toprow[0];_p=_h.bottomrow;_h.dir=1;_h.curidx=0;if(_p<0){_h.bottomrowex=_d._getScreenBottomRowPosEx(_a);}_q=Math.max(_j+1,_o);if(_q>_o){if(_k<0&&_p>0){_r=(_p-_o+1);for(_m=0,_n=(_f-_r);_m<_n;_m++ ){_l.push(_l.shift());}}_s=(_o-_i[0]);for(_m=0,_n=_s;_m<_n;_m++ ){_l.push(_l.shift());}}}else if(_a<_g){_o=_h.toprow[0];_p=_h.bottomrow;_h.dir= -1;_h.curidx=_f-1;_q=Math.min(_i[0]-1,_p);if(_q<_p){if(_k>0&&_o>0){_r=(_p-_o+1);for(_m=0,_n=(_f-_r);_m<_n;_m++ ){_l.unshift(_l.pop());}}_s=(_i[0]-_o);for(_m=0,_n=_s;_m<_n;_m++ ){_l.unshift(_l.pop());}}}return _h;};_pGridMatrixManager._adjustScrollRows=function(_a,_b,_c,_d,_e){var _f=this._grid,_g=_f._getGridRowCount(),_h=this._rows,_i=_f._getFixRowCnt(),_j=_g-1,_k=[],_l,_m,_n,_o,_p,_q,_r=this._band,_s=_f._is_variable_bodyrowsize,_t=0,_u=0,_v=0,_w,_x=_f._last_scroll_top,_y=false,_z=false,_aa=_f._currentCellEditor,_ab=(_aa)?_aa.parent.parent:null,_ac=null,_ad=_f._getGridRow(_f._currentCellRow);if(_aa&&_aa.parent._is_mergetemp){_ab=null;_ad= -1;}var _ae=_r._rowscroll_info;var _af=(_ae)?_ae.usehidden:false;if(_a>_x){_u=1;}else if(_a<_x){_u= -1;}if(!_c){_c=_h.length;}var _ag,_ah;var _ai;if(_u>0){for(_ag=0,_ah=_h.length;_ag<_ah;_ag++ ){if(this._isShowScreenRow(_h[_ag],_a,_r._getClientHeight())==true){break;}if(_c>_k.length){_k.push(_h[_ag]);}_v++ ;}_t=_k.length;_ai=null;if(_t>0){if(_h.length==_v){_w=_f._toprowpos[0];if(_w%2!=_k[0]._rowidx%2){_k.push(_k.shift());_h.push(_h.shift());}for(_ag=0;_ag<_t;_ag++ ){_l=_k[_ag];if(_ag==0&&_l._overrow){break;}_l._overrow=false;_m=_w++ ;if(_m>=_f.rowcount){if(_ai==null){_ai=_f._toprowpos[0]-1;}_m=_ai-- ;_l._overrow=true;if(_m<0){break;}}if(_m==_ad){_ac=_l;}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_f._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_f._curFormat,undefined,_e);}}}else{_w=_h[_h.length-1]._rowidx+1;for(_ag=0;_ag<_t;_ag++ ){_l=_k[_ag];_l._overrow=false;_m=_w++ ;if(_m>_j){if(!_s){_k.splice(_ag-- ,1);_t=_k.length;}continue;}if(_m==_ad){_ac=_l;}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_f._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_f._curFormat,undefined,_e);}}_y=true;}if(_ai!=null){_y=true;}}if(_s){_z=true;}}else if(_u<0){for(_ag=_h.length-1;_ag>=0;_ag-- ){if(this._isShowScreenRow(_h[_ag],_a,_r._getClientHeight())==true){break;}if(_c>_k.length){_k.push(_h[_ag]);}_v++ ;}_t=_k.length;if(_t>0){if(_h.length==_v){_w=_f._toprowpos[0];if(_w%2!=_k[_t-1]._rowidx%2){_k.push(_k.shift());_h.unshift(_h.pop());}for(_ag=_t-1;_ag>=0;_ag-- ){_l=_k[_ag];_l._overrow=false;_m=_w++ ;if(_m==_ad){_ac=_l;}_l._changeRow(_m,_s);if(_s){_l._resetCellsSize(_f._curFormat,undefined,_e);}}for(_ag=0;_ag<_t;_ag++ ){_l=_k[_ag];_m=_l._rowidx;_n=_l._adjust_left;_o=_l._adjust_width;_p=_f._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);}}else{_w=_h[0]._rowidx-1;for(_ag=0;_ag<_t;_ag++ ){_l=_k[_ag];_l._overrow=false;_m=_w-- ;if(_m<_i){continue;}if(_m==_ad){_ac=_l;}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_f._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_f._curFormat,undefined,_e);}}if(_e){for(_ag=0;_ag<_h.length;_ag++ ){_p=_f._getRowSize(_h[_ag]._rowidx);_q=this._getBodyRowTopPos(_h[_ag]._rowidx);_h[_ag].move(_h[_ag]._adjust_left,_q,_h[_ag]._adjust_width,_p);_h[_ag]._resetCellsSize(_f._curFormat,undefined,_e);}}_y=true;}if(_s){_z=true;}}}else{if(_b){_ai=null;_w=_f._toprowpos[0];var _aj,_ak=_h,_al=_h.length;if(_al&&_w%2!=_ak[0]._rowidx%2){var _am=_ak.shift();_ak.push(_am);}for(_ag=0;_ag<_al;_ag++ ){_aj=_ak[_ag];_aj._overrow=false;_m=_w++ ;if(_m>=_f.rowcount){if(_ai==null){_ai=_f._toprowpos[0]-1;}_m=_ai-- ;_aj._overrow=true;if(_m<0){break;}}var _an=_aj._changeRow(_m,_s);if(_m==_ad){_ac=_aj;}_n=_aj._adjust_left;_o=_aj._adjust_width;_p=_f._getRowSize(_m);_q=this._getBodyRowTopPos(_m);if(_p<0){continue;}_aj.move(_n,_q,_o,_p);if(_af){_aj._control_element.setElementDisplay("");}if(_s){_aj._resetCellsSize(_f._curFormat,undefined,_e);}if(_an){_k.push(_aj);}}if(_ai!=null){_y=true;}if(_s){_z=true;}}}if(_h.length>0){if(_ab&&_ac&&(_ab!=_ac)){var _ao=_ab._rowidx;var _ap=_ab._adjust_left;var _aq=_ab._adjust_top;var _ar=_ab._adjust_width;var _as=_ab._adjust_height;_ab._changeRow(_ac._rowidx,_s);_ab.move(_ac._adjust_left,_ac._adjust_top,_ac._adjust_width,_ac._adjust_height);_ac._changeRow(_ao,_s);_ac.move(_ap,_aq,_ar,_as);if(_s){_ab._resetCellsSize(_f._curFormat,undefined,_e);_ac._resetCellsSize(_f._curFormat,undefined,_e);}if(_k.length!=_h.length){_k.push(_ab);}_y=true;}if(_y){_h.sort(function(_at,_au){return _at._rowidx-_au._rowidx;});}if(_z){this._adjustRowsDisplay(false,true);}_f._begrowpos=_h[0]._rowidx;_f._endrowpos=_h[_h.length-1]._rowidx;}return _k;};_pGridMatrixManager._adjustScrollRows2=function(_a,_b,_c){var _d=this._grid,_e=_d._getGridRowCount(),_f=_d._getFixRowCnt(),_g=_e-1,_h=this._band,_i=this._rows,_j=_d._is_variable_bodyrowsize,_k=false,_l=_d._currentCellEditor,_m=(_l)?_l.parent.parent:null,_n=null,_o=_d._getGridRow(_d._currentCellRow);if(_l&&_l.parent._is_mergetemp){_m=null;_o= -1;}var _p=_h._rowscroll_info;if(!_p){_h._update_rows=this._adjustScrollRows(_a,_b,_c);return (_h._update_rows.length>0);}if(!this._use_enhance_performance_scrolling){_h._update_rows=[];}if(!_c){_c=_p.framecnt;}var _q=_p.dir;var _r=_p.scrollmode;var _s=_p.skipped|0;var _t=(_r==0?_c:_c* (1+_s));var _u=_p.toprow[0];var _v=_p.bottomrow;var _w=_p.usehidden;var _x=_p.display_rows;var _y=_x?_x.length:0;var _z=_p.curidx;var _aa= -1;var _ab= -1;var _ac=false;var _ad;var _ae,_af,_ag,_ah,_ai,_aj,_ak;if(_q>0){for(_ad=_z;_ad<_y;_ad++ ){_ae=_x[_ad];_af=_ae._rowidx;_ag=_u+_ad;if(_m&&_m==_ae){_aa=_ad;}if(_t>0){if(_w){_ae._control_element.setElementDisplay("");}if(_ag!=_af){if(!_j&&_ag>_g){continue;}if(_ag==_o){_n=_ae;_ab=_ad;}_ae._changeRow(_ag,_j);_ah=_ae._adjust_left;_ai=_ae._adjust_width;_aj=_d._getRowSize(_ag);_ak=this._getBodyRowTopPos(_ag);_ae.move(_ah,_ak,_ai,_aj);_h._update_rows.push(_ae);if(_j){_ae._resetCellsSize(_d._curFormat);}-- _t;}_p.curidx++ ;}else if(_w){_ae._control_element.setElementDisplay(_ag!=_af?"none":"");}if(!_w&&_t<=0){break;}}if(_j){_k=true;}_ac=(_p.curidx<_y);}else if(_q<0){if(_j){this._adjustRowsDisplay(false,true);}var _al=_y-1;for(_ad=_z;_ad>=0;_ad-- ){_ae=_x[_ad];_af=_ae._rowidx;_ag=_v-(_al-_ad);if(_m&&_m==_ae){_aa=_ad;}var _am=_ae._control_element;if(_t>0){if(_w){_am.setElementDisplay("");}if(_ag!=_af){if(_ag<_f){continue;}if(_ag==_o){_n=_ae;_ab=_ad;}_ae._changeRow(_ag,_j);_ah=_ae._adjust_left;_ai=_ae._adjust_width;_aj=_d._getRowSize(_ag);_ak=this._getBodyRowTopPos(_ag);_ae.move(_ah,_ak,_ai,_aj);_h._update_rows.push(_ae);if(_j){_ae._resetCellsSize(_d._curFormat);}-- _t;}_p.curidx-- ;}else if(_w){_am.setElementDisplay(_ag!=_af?"none":"");}if(!_w&&_t<=0){break;}}_ac=(_p.curidx>=0);}if(_i.length>0){if(_m&&_n&&(_m!=_n)){var _an=_m._rowidx;var _ao=_m._adjust_left;var _ap=_m._adjust_top;var _aq=_m._adjust_width;var _ar=_m._adjust_height;_m._changeRow(_n._rowidx,_j);_m.move(_n._adjust_left,_n._adjust_top,_n._adjust_width,_n._adjust_height);_n._changeRow(_an,_j);_n.move(_ao,_ap,_aq,_ar);if(_j){_m._resetCellsSize(_d._curFormat);_n._resetCellsSize(_d._curFormat);}_x[_ab]=_m;_x[_aa]=_n;_h._update_rows.push(_m);}_i.sort(function(_as,_at){return _as._rowidx-_at._rowidx;});if(_k){this._adjustRowsDisplay(false,true);}_d._begrowpos=_i[0]._rowidx;_d._endrowpos=_i[_i.length-1]._rowidx;}return _ac;};delete _pGridMatrixManager;nexacro._GridBandControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this._isBody=(_a=="body");this._refinfo=_i;this._grid=_h;this._rowsizesperdatarow=null;this._datarowsheight= -1;this._colinfos=null;this._rowinfos=null;this._cellsinfo=null;this._update_rows=[];this._create_rows=[];this._text_elem=null;this._use_translate_scroll=true;this._use_readonly_status=true;if(_i){_i._bandctrl=this;}this._matrix=new nexacro._GridMatrixManager(this._grid,this);this._scrollWidth=0;this._scrollHeight=0;this._recreating=false;this.accessibilityrole="none";this.selectborder="";};var _pGridBand=nexacro._createPrototype(nexacro.Component,nexacro._GridBandControl);nexacro._GridBandControl.prototype=_pGridBand;_pGridBand._is_subcontrol=true;_pGridBand._type_name="GridBandControl";_pGridBand._apply_normalstyleFromInfo=function(){var _a=this._refinfo;var _b=_a._property_map;var _c,_d,_e=this._grid._currentDSrow;for(var _f=0,_g=_b.length;_f<_g;_f++ ){if((_b[_f][3]==true)||(_b[_f][0].substring(0,13)=="accessibility")){_c=_b[_f][0];if(_b[_f][1]==true){_d=_a._getAttrValue(_a[_c],_e);}else{_d=_a[_c];}this["set_"+_c](_d);}}};_pGridBand._getClassCSSSelector=function(){var _a=this.cssclass||this._cssclass_expr;if(_a){if(typeof _a=="object"){_a=_a.toString();}return _a.trim().split(",");}return "";};_pGridBand._getElementClassCSSSelector=function(){var _a=this._getClassCSSSelector();if(_a){_a.push("dummy");}return _a;};_pGridBand.on_create_contents=function(){var _a=this.getElement();var _b=this._grid._curFormat;if(_a&&_b){this._recreate_contents(true);if(this._isBody){var _c=this._text_elem=new nexacro.TextBoxElement(_a);_c.setElementSize(this._getClientWidth(),this._getClientHeight());_c.setElementVisible(false);_c.setElementTextAlign("center");_c.setElementVerticalAlign("middle");if(this._get_rows().length==0){var _d=this.parent.nodatatext;_c.setElementText(_d);}}}};_pGridBand.on_created_contents=function(_a){var _b=this.getElement();var _c=this._grid._curFormat;if(_b&&_c){var _d=this._text_elem;if(_d){_d.create(_a);}var _e=this._grid;if(_e._is_created==false&&(_e._img_preload_cnt>0||_e.autosizingtype!="none")){}else{this._on_refresh_rows();var _f=_e._getScrollLeft();var _g=_e._getScrollTop();if(_f>0){this._matrix._adjustColsDisplay();_e._absolutelyResetScrollPos(true);_e._control_element.setElementHScrollPos(_f);_e._absolutelyResetScrollPos(false);}if(_g>0){_e._absolutelyResetScrollPos(true);_e._control_element.setElementVScrollPos(_g);_e._absolutelyResetScrollPos(false);}}if(nexacro._enableaccessibility&&!_e._accept_focus){if(this.accessibilityenable){_e._accept_focus=true;}}this.on_apply_prop_tooltip();this._apply_normalstyleFromInfo();}};_pGridBand._on_apply_status=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=this._grid;if(_b=="mouseover"||_b=="focused"){if(_j.mouseovertype=="cell"||_j.mouseovertype=="row"){_b=_a;}}nexacro.Component.prototype._on_apply_status.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this._isBody){var _k=_j._getGridRowCount();if(this.getElement()&&_k==0){if(_j.nodataimage){var _l="transparent "+_j.nodataimage+" center center no-repeat";var _m=nexacro.BackgroundObject(_l,this);this._control_element.setElementBackground(_m);}else{this.on_apply_background(this._background);}}else{this.on_apply_background(this._background);}}};_pGridBand.on_create_contents_command=function(){var _a="";var _b=this.getElement();var _c=this._grid._curFormat;if(_b&&_c){var _d=this._text_elem;if(_d){_a+=_d.createCommand();}if(this._update_rows.length>0||this._create_rows.length>0){var _e=this._update_rows;var _f=this._create_rows;this._on_refresh_rows_physical(_e,_f,false,false,false);for(var _g=0,_h=_f.length;_g<_h;_g++ ){_a+=_f[_g].createCommand();}this._update_rows=[];}}return _a;};_pGridBand.on_attach_contents_handle=function(_a){var _b=this._text_elem;if(_b){_b.attachHandle(_a);}for(var _f=0,_g=this._create_rows.length;_f<_g;_f++ ){if(this._create_rows[_f]._is_alive){this._create_rows[_f].attachHandle(_a);}}this._create_rows=[];this.on_apply_text();var _c=this._grid;if(this.id=="head"){_c._applyResizer();}var _d=_c._getScrollLeft();var _e=_c._getScrollTop();if(_d>0){this._matrix._adjustColsDisplay();_c._absolutelyResetScrollPos(true);_c._control_element.setElementHScrollPos(_d);_c._absolutelyResetScrollPos(false);}if(_e>0){_c._absolutelyResetScrollPos(true);_c._control_element.setElementVScrollPos(_e);_c._absolutelyResetScrollPos(false);}if(nexacro._enableaccessibility&&!_c._accept_focus){if(this.accessibilityenable){_c._accept_focus=true;}}this.on_apply_prop_tooltip();this._apply_normalstyleFromInfo();};_pGridBand.on_destroy_contents=function(){if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}if(this._refinfo){this._refinfo._bandctrl=null;this._refinfo=null;}this._rows=null;this._grid=null;this._matrix.destroy();this._matrix=null;this._colinfos=null;this._rowinfos=null;this._cellsinfo=null;this._update_rows=null;this._create_rows=null;this._rowsizesperdatarow=null;this._scroll_rect_queue=null;};_pGridBand._update_rect_useaniframe=false;_pGridBand.on_change_containerRect=function(_a,_b){if(this._recreating){return;}if(this._text_elem){var _c=this._grid._getAvailableRect(this);this._text_elem.setElementPosition(_c.left,_c.top);this._text_elem.setElementSize(_c.width,_c.height);}var _d=this._grid;if(_d._is_contents_recreating){return;}if(_d._is_changingRect){if(_d._colautofit){if(_d.autosizingtype=="row"||_d.autosizingtype=="both"){if(_d._is_body_wordwrap||_d._is_head_wordwrap||_d._is_summ_wordwrap){_d._resetRowSizeList();_d._resetColSizeList();}}}}if(this._is_created||this._update_size_contents){if(this._update_rect_useaniframe){var _e=this;if(!this._aniframe_clientrect){this._scroll_rect_queue=[];this._aniframe_clientrect=new nexacro.AnimationFrame(this,function(){_e._callback_update_rect();});}var _f=this._scroll_rect_queue.push(1);if(_f==1){this._aniframe_clientrect.start();}}else{this._callback_update_rect(true);}}};_pGridBand._callback_update_rect=function(_a){if(this._adjust_width==0||this._adjust_height==0){return;}var _b=this._grid;if(this._isBody){var _c=_b._getScrollTop();if(_c<0){_c=0;}_b._last_scroll_top=_c;_b._toprowpos=_b._getScreenTopRowPos(_c);_b._bottomrowpos=_b._getScreenBottomRowPos(_c);if(_b._needUpdateExtinner(true)){_b._recreate_contents_all(false,false,true);}else{this._matrix._adjustRowsDisplay(true);this._matrix._adjustColsDisplay();this._update_rows=this._matrix._adjustScrollRows(_c,true);}this._clearScrollDisplayRows();_b._updateHighlightrowPos();}else{this._matrix._adjustRowsDisplay(true);this._matrix._adjustColsDisplay();}this._on_refresh_rows();if(!_a){this._scroll_rect_queue.pop();if(this._scroll_rect_queue.length>0){this._aniframe_clientrect.start();}}};_pGridBand._clearScrollDisplayRows=function(){if(this._isBody&&this._rowscroll_info){this._rowscroll_info.display_rows=null;}};_pGridBand.on_create_control_element=function(_a){var _b=new nexacro.GridBandControlElement(_a,this.id);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pGridBand._apply_setfocus=function(_a,_b){if(_b||nexacro._enableaccessibility){nexacro.Component.prototype._apply_setfocus.call(this,_a);}if(nexacro._enableaccessibility){this._grid._currentBand=this.id;if(this.id=="head"){this._grid._currentDSrow= -1;}else if(this.id=="summary"){this._grid._currentDSrow= -2;}else{this._grid._currentDSrow=0;}}};_pGridBand.on_get_accessibility_label=function(){return this.id;};_pGridBand._setAccessibilityStatFocus=function(_a){var _b=this._getAccessibilityLabel();if(this._isBody){if(this._grid.rowcount<=0){_b+=(this._grid.nodatatext)?this._grid.nodatatext:"";}this._setAccessibilityLabel(_b);}nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);};_pGridBand.on_apply_wordWrap=function(){this._refresh_contents();};_pGridBand.on_apply_prop_tooltip=function(){var _a=this.getElement();this.tooltiptext=this._refinfo._getTooltipText();this.tooltiptype=this._refinfo.tooltiptype;nexacro.Component.prototype.on_apply_prop_tooltip.call(this);if(_a){var _b=this._get_rows();var _c;for(var _d=0,_e=_b.length;_d<_e;_d++ ){_c=_b[_d]._cells;for(var _f=0,_g=_c.length;_f<_g;_f++ ){_c[_f].on_apply_prop_tooltip();}}}};_pGridBand.on_apply_text=function(){if(this._text_elem){if(this._isBody&&this._get_rows().length==0){var _a=this.parent.nodatatext;this._text_elem.setElementVisible(_a?true:false);this._text_elem.setElementText(_a);this._grid._text_elem.setElementVisible(false);}else{this._text_elem.setElementVisible(false);}}};_pGridBand.on_getIDCSSSelector=function(){return this.id;};_pGridBand.on_apply_prop_enable=function(_a){var _b=this.getElement();nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(_b){var _c=this._get_rows();var _d;for(var _e=0,_f=_c.length;_e<_f;_e++ ){_c[_e]._setEnable(_a);_d=_c[_e]._cells;for(var _g=0,_h=_d.length;_g<_h;_g++ ){_d[_g]._setEnable(_a);}}}};_pGridBand.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=this._grid;if(nexacro._isTouchInteraction){_n._hideEditor();}if(_n.onnodataareaclick&&_n.onnodataareaclick._has_handlers){return _n.on_fire_onnodataareaclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_n,this,_m);}return false;};_pGridBand.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.parent.onnodataareadblclick&&this.parent.onnodataareadblclick._has_handlers){return this.parent.on_fire_onnodataareadblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k.parent,_l,_m);}return false;};_pGridBand._on_refresh_rows=function(_a,_b,_c,_d){var _e=this._grid;if(this._control_element.handle){var _f=this._update_rows;var _g=this._create_rows;this._on_refresh_rows_physical(_f,_g,_a,_b,true);this._update_rows=[];this._create_rows=[];this.on_apply_text();if(!_c){_e._applyResizer();}if(!_a){_e._adjustOverlayControls(!!_d);}}};_pGridBand._on_refresh_rows_physical=function(_a,_b,_c,_d,_e){var _f=_a.length;var _g,_h=_b.length;if(this._isBody){var _i=this._grid;if(_i._is_created==true){var _j=this._get_rows();var _k=_j.length;if(!_d){_i._suppressUpdate();}for(_g=0;_g<_h;_g++ ){var _l=_b[_g];if(_l._is_alive){_l._updateAll();}}var _m=false;if(_k!=_f){_m=(!_i._isUseBindExprStyle("body")&&!_i._is_variable_bodyrowsize&&!_i._hasVirtualMergeCell());}for(_g=0;_g<_f;_g++ ){if(_a[_g]._is_alive){_a[_g]._updateAll(undefined,undefined,_m);}}if(_i._is_use_suppress||_i._supphorztype){var _n=_i._curFormat._bodycells,_o=_n.length;var _p,_q,_r;for(var _s=0;_s<_k;_s++ ){_p=_j[_s]._rowidx;_q=(_i._hasTree)?_i._treeIndexes[_p]:_p;_r=false;if(_i._mouseovercell&&_i._mouseovercell.row==_p){_r=true;}for(_g=0;_g<_o;_g++ ){if(_r||_n[_g].suppress!=0){this._refreshRowCell(_s,_g,_i._isSelectedCell(_g,_q));}else if((_i._supphorztype==1||_i._supphorztype==3)&&_n[_g]._area=="left"){this._refreshRowCell(_s,_g,_i._isSelectedCell(_g,_q));}else if((_i._supphorztype==2||_i._supphorztype==3)&&_n[_g]._area=="right"){this._refreshRowCell(_s,_g,_i._isSelectedCell(_g,_q));}}}}}}else{for(_g=0;_g<_h;_g++ ){_b[_g]._updateAll();}for(_g=0;_g<_f;_g++ ){_a[_g]._updateAll();}}if(_e){for(_g=0;_g<_h;_g++ ){_b[_g].on_created();}}};_pGridBand._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};_pGridBand._on_last_keyup=function(){this.parent._on_last_keyup();};_pGridBand._refreshRowCell=function(_a,_b,_c,_d,_e,_f){var _g=this._get_rows();var _h=_g[_a]._cells;var _i=_h[_b];if(!_i){return;}_i.selected=_c;var _j=_i.subcells;var _k=_j.length;for(var _l=0;_l<_k;_l++ ){_j[_l].selected=_c;}_i._updateAll(_d,_e,_f);};_pGridBand._refreshRow=function(_a,_b,_c,_d){var _e=this._get_rows();var _f=_e[_a];_f._updateAll(_b,false,undefined,_c,null,_d);};_pGridBand._refreshCelltype=function(_a,_b){var _c=this.parent._curFormat;function checktype(_d,_a){var _e=_d.length;for(var _f=0;_f<_e;_f++ ){if(_d[_f].celltype==_a){return true;}}return false;}if(_a=="head"){if(_c._bodycells){if(checktype(_c._bodycells,_a)){this.parent._refreshBody(_b);}}if(_c._summcells){if(checktype(_c._summcells,_a)){this.parent._refreshSumm(_b);}}}else if(_a=="summary"){if(_c._bodycells){if(checktype(_c._bodycells,_a)){this.parent._refreshBody(_b);}}if(_c._headcells){if(checktype(_c._headcells,_a)){this.parent._refreshHead(_b);}}}else{if(_c._summcells){if(checktype(_c._summcells,_a)){this.parent._refreshSumm(_b);}}if(_c._headcells){if(checktype(_c._headcells,_a)){this.parent._refreshHead(_b);}}}};_pGridBand._refresh_contents=function(_a){if(this.id=="head"){this.parent._refreshHead(_a);this._refreshCelltype("head",_a);}else if(this.id=="summary"){this.parent._refreshSumm(_a);this._refreshCelltype("summary",_a);}else{this.parent._refreshBody(_a);this._refreshCelltype("body",_a);}};_pGridBand._isEnable=function(){if(this._grid){return this._grid._isEnable();}return true;};_pGridBand._get_cols=function(_a){var _b=_a._cols,_c=_b.length,_d,_e=[],_f=[],_g=[];for(var _h=0;_h<_c;_h++ ){_d=_b[_h];if(_d._area=="left"){_e.push(_d.size);}else if(_d._area=="right"){_f.push(_d.size);}else{_g.push(_d.size);}}this._colinfos=_b;return [_g,_e,_f];};_pGridBand._recreate_contents=function(_a,_b,_c,_d){var _e=this._grid,_f=_e._curFormat,_g;this._matrix._init();if(!_f){return;}this._create_rows=[];this._update_rows=[];this._rowsizesperdatarow=[];this._recreating=true;if(this.id=="head"){if(_e._focused_row== -1){this._grid._focused_row=undefined;this._grid._focused_cell=undefined;}_g=_f._headrows;this._datarowsheight=_f.headHeight;}else if(this.id=="summary"){if(_e._focused_row== -2){this._grid._focused_row=undefined;this._grid._focused_cell=undefined;}_g=_f._summrows;this._datarowsheight=_f.summHeight;}else{if(_e._focused_row>=0){this._grid._focused_row=undefined;this._grid._focused_cell=undefined;}_g=_f._bodyrows;_e._rowheight=this._datarowsheight=_f._body_height;}var _h=_g?_g.length:0;for(var _n=0;_n<_h;_n++ ){this._rowsizesperdatarow.push(_g[_n].size);}var _i=(_e._hscrollmng)?_e._hscrollmng.pos:0,_j=(_e._vscrollmng)?_e._vscrollmng._pos:0;if(this._isBody){this._control_element._setFixArea(_e._fixed_height);if(!_b&&!_c){_e._hideEditor();}_e._resetScrollMax(this);this._control_element._resetExtendContainer(this._scrollHeight);var _k=_e._control_element.vscroll_limit;if(_j<0){_j=0;}else if(_j>_k){_j=_k;}_e._toprowpos=_e._getScreenTopRowPos(_j);_e._bottomrowpos=_e._getScreenBottomRowPos(_j);this._matrix._adjustRowsDisplay();if(!_e._headBand&&!_e._summBand){_e._setScrollMaxSize(this._scrollWidth,this._scrollHeight,this._band_scroll_tops);}if(_e._is_created&&!_e._autofiting){this._on_refresh_rows(false,_d,undefined,true);_e._applyAutofittype(true);}}else{this._scrollWidth=_f.bodyWidth;this._matrix._adjustRowsDisplay();_e._setScrollMaxSize(this._scrollWidth);if(_e._is_created&&!_e._autofiting){this._on_refresh_rows(false,_d,undefined,true);}}var _l=_e._find_lastFocused();if(_l==_e){_e._control_element.setElementFocus();}var _m=_e._control_element.hscroll_limit;if(_i<0){_i=0;}else if(_i>_m){_i=_m;}if(this._isBody){if(_i>0){if(_a){_e._hscrollmng.setPos(0);_e._control_element.setElementHScrollPos(0);}else{if(_e._control_element._target_hscroll_elements){this._matrix._adjustColsDisplay();_e._absolutelyResetScrollPos(true);_e._control_element.setElementHScrollPos(_i);_e._absolutelyResetScrollPos(false);}}}if(_j>0){if(_a){_e._vscrollmng.setPos(0);this._control_element.setElementVScrollPos(0);this._is_over_scroll=0;}else{_e._absolutelyResetScrollPos(true);_e._control_element.setElementVScrollPos(_j);_e._absolutelyResetScrollPos(false);}}}else{if(_i>0){if(_a){_e._hscrollmng.setPos(0);_e._control_element.setElementHScrollPos(0);}else{this._matrix._adjustColsDisplay();_e._absolutelyResetScrollPos(true);_e._control_element.setElementHScrollPos(_i);_e._absolutelyResetScrollPos(false);}}}this._recreating=false;};_pGridBand._get_rows=function(){return this._matrix._getAllRows();};_pGridBand._get_row=function(_a){var _b=this._get_rows();var _c=(_b)?_b.length:0;var _d=this._grid;var _e;for(var _f=0;_f<_c;_f++ ){_e=_d._getDataRow(_b[_f]._rowidx);if(_a==_e){return _b[_f];}}return null;};_pGridBand._updateAll=function(_a){if(this.getElement()){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};delete _pGridBand;nexacro._GridHScrollManager=function(_a){this.max=0;this.min=0;this.pos=0;this.line=0;this.page=0;this.view=0;this._pos=0;this._min=0;this._max=0;this._orgmax=0;this._grid=_a;};var _pGridHScrollManager=nexacro._GridHScrollManager.prototype=nexacro._createPrototype(nexacro.Object,nexacro._GridHScrollManager);_pGridHScrollManager.setPos=function(_a,_b,_c){if(_a<this.min){_a=this.min;}if(_a>this.max){_a=this.max;}if(this.pos!=_a){this.pos=_a;this._pos=this._scroll_convert_pixel(_a);}if(!_c){this._grid._scrollTo(this._pos,this._grid._vscroll_pos,undefined,true,undefined,_b);}};_pGridHScrollManager.destroy=function(){this._grid=null;};_pGridHScrollManager._scroll_convert_pixel=function(_a){return _a;};_pGridHScrollManager._scroll_reverse_convert=function(_a){return [_a,_a];};_pGridHScrollManager._setInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=this._scroll_reverse_convert(_e);this.min=_k[0];this._min=_k[1];_k=this._scroll_reverse_convert(_f,false,true);this.max=_k[0];this._max=_k[1];this._orgmax=_f;this.line=_g;this.page=_h;this.view=_i;_k=this._scroll_reverse_convert(_j);this.pos=_k[0];this._pos=_k[1];if(this._pos<this._min){this.pos=this.min;this._pos=this._min;}if(this._pos>this._max){this.pos=this.max;this._pos=this._max;}};delete _pGridHScrollManager;nexacro._GridVScrollManager=function(_a){this.max=0;this.min=0;this.pos=0;this.line=0;this.page=0;this.view=0;this._pos=0;this._min=0;this._max=0;this._orgmax=0;this._grid=_a;};var _pGridVScrollManager=nexacro._GridVScrollManager.prototype=nexacro._createPrototype(nexacro.Object,nexacro._GridVScrollManager);_pGridVScrollManager.setPos=function(_a,_b){if(_a<this.min){_a=this.min;}if(_a>this.max){_a=this.max;}if(this.pos!=_a){this.pos=_a;this._pos=this._scroll_convert_pixel(_a);}this._grid._scrollTo(this._grid._hscroll_pos,this._pos,undefined,true,undefined,_b);};_pGridVScrollManager.setPixelPos=function(_a,_b,_c,_d){if(_a<this._min){_a=this._min;}if(_a>this._max){_a=this._max;}this._no_set_scrollinfo=true;if(this._pos!=_a){if(_c){var _e=this._scroll_reverse_convert(_a);this.pos=_e[0];this._pos=_e[1];}else{this.pos=this._scroll_reverse_convert(_a)[0];this._pos=_a;}}if(!_d){this._grid._scrollTo(this._grid._hscroll_pos,this._pos,undefined,true,undefined,_b);}};_pGridVScrollManager.setRowPos=function(_a,_b){var _c=this._grid;_a-=_c._getFixRowCnt();if(_c._scrollpixel=="all"){_a=this._scroll_convert_pixel(_a,true);}this.setPos(_a,_b);};_pGridVScrollManager._setInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=this._scroll_reverse_convert(_e);this.min=_k[0];this._min=_k[1];_k=this._scroll_reverse_convert(_f,false,true);this.max=_k[0];this._max=_k[1];this._orgmax=_f;this.line=_g;this.page=_h;this.view=_i;_k=this._scroll_reverse_convert(_j);this.pos=_k[0];this._pos=_k[1];if(this._pos<this._min){this.pos=this.min;this._pos=this._min;}if(this._pos>this._max){this.pos=this.max;this._pos=this._max;this._grid._scrollTo(this._grid._hscroll_pos,this.l_pos,undefined,true,undefined,"");}};_pGridVScrollManager._scroll_convert_pixel=function(_a,_b){var _c=this._grid;var _d=_c._bodyBand;if(_c._scrollpixel!="all"||_b){if(_d){var _e=_c._getFixRowCnt();var _f=_a+_e;if(_c._is_variable_bodyrowsize){var _g=0,_h;for(var _i=_e;_i<_f;_i++ ){_h=_c._getDataRow(_i);_g+=_c._rowSizeList[_h];}_a=_g;}else{_a=(_f-_e)* _d._datarowsheight;}}}return _a;};_pGridVScrollManager._scroll_reverse_convert=function(_a,_b,_c){var _d=this._grid;var _e=_d._bodyBand;var _f=_a;var _g,_h,_i;if(_d._scrollpixel!="all"||_b){if(_e){if(_d._is_variable_bodyrowsize){var _j=_d._getFixRowCnt();var _k=_d._getGridRowCount();_g=0;_h=0;if(_c){for(_i=_j;_i<_k;_i++ ){_h=_d._getDataRow(_i);if(_a<=_g){_h=_i;_f=_g;break;}_g+=_d._rowSizeList[_h];}}else{for(_i=_j;_i<_k;_i++ ){_h=_d._getDataRow(_i);if(_a<_g){_h=_i-1;if(_d._rowSizeList[_h]>_e._getClientHeight()){if(_g-_a<_e._getClientHeight()){if(_a<this._orgmax){_f=_g-_e._getClientHeight();}}}else{if(_a<this._orgmax){_f=_g-_d._rowSizeList[_h];}}break;}_g+=_d._rowSizeList[_h];}}_a=_h;_a-=_j;}else{_h=0;if(_c){if(_a>0){_h=Math.ceil(_a/_e._datarowsheight);}_f=_h* _e._datarowsheight;}else{if(_a==this._orgmax){_h=Math.ceil(_a/_e._datarowsheight);}else if(_a>0){_h=Math.floor(_a/_e._datarowsheight);}_g=_e._datarowsheight* (_h+1);if(_e._datarowsheight>_e._getClientHeight()){if(_g-_a<_e._getClientHeight()){_f=_g-_e._getClientHeight();}}else{_f=_h* _e._datarowsheight;}}_a=_h;}}}return [_a,_f];};_pGridVScrollManager._checkoverscroll=function(_a){var _b=this._grid;if(_b._scrollpixel!="all"){_b._is_over_scroll=0;if(this._pos>this._orgmax){_b._is_over_scroll=this._pos-this._orgmax;}}};_pGridVScrollManager.destroy=function(){this._grid=null;};delete _pGridVScrollManager;nexacro.Grid=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"ongesture":1,"onvscrolllastover":1,"onvscroll":1,"onhscroll":1,"onvtracklast":1,"oncellclick":1,"onheadclick":1,"onsummaryclick":1,"oncelldblclick":1,"onheaddblclick":1,"onsummarydblclick":1,"onnodataareaclick":1,"onnodataareadblclick":1,"onselectchanged":1,"oncellposchanged":1,"onenteredit":1,"onenterdown":1,"cantreestatuschange":1,"ontreestatuschanged":1,"onsubselectchanged":1,"oncolresizing":1,"onrowresizing":1,"ondropdown":1,"oncloseup":1,"onitemchanged":1,"onexpanddown":1,"oninput":1,"oncellimeaction":1,"onexpandup":1,"oncolresized":1,"onrowresized":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};this._hscrollmng=new nexacro._GridHScrollManager(this);this._vscrollmng=new nexacro._GridVScrollManager(this);this._use_readonly_status=true;this._use_translate_scroll=false;this._is_scrollable=true;this._is_locale_control=true;this._formats={};this._curFormat=null;this._headBand=null;this._summBand=null;this._bodyBand=null;this._exprcache={};this._selectstartrow=[];this._selectstartcol=[];this._selectstartsubrow=[];this._selectstartpvt=[];this._selectendrow=[];this._selectendcol=[];this._selectendsubrow=[];this._selectendpvt=[];this._resizerCols=[];this._resizerRows=[];this._imgsize_cache={};this._rowSizeListSub=[];this._rowSizeList=[];this._rowHeadListSub=[];this._rowHeadList=[];this._rowSummListSub=[];this._lazy_load_rowsize=[];this._rowSummList=[];this._begrowpos=0;this._endrowpos=0;this._toprowpos=[0,0];this._bottomrowpos= -1;this._isflingend=undefined;this._selectinfo={rows:[],selects:[],ctrlpoint:{"cell": -1,"col": -1,"subrow": -1,"row": -9,"colspan": -1,"rowspan": -1,"_init":function(){this.cell= -1;this.col= -1;this.subrow= -1;this.row= -9;this.colspan= -1;this.rowspan= -1;this.subrowslen=0;this.area="";},"_set":function(_m,_n,_o){this.cell=_m._cellidx;this.col=_m._col;this.subrow=_m._row;this.row=_n;this.colspan=_m._colspan;this.rowspan=_m._rowspan;this.subrowslen=_o;this.area=_m._area;}},area:[],"curcell": -1,"curcol": -1,"curpvt": -9,"cursubrow": -1,"curdsrow": -1,"currow": -9,"getSelectCells":function(_m){return this.selects[_m+2];},arearect:{left:0,top:0,width:0,height:0,barea:"",earea:""}};this._text_elem=null;this._is_use_suppress=false;this._is_head_wordwrap=false;this._is_body_wordwrap=false;this._is_summ_wordwrap=false;this._recreate_contents_proc=[];this._keydown_elem=null;this._tree_load_all=null;this._image_load_all=null;this._is_editor_keyaction=true;this._focus_proc=null;this._after_recreate_contents_all=null;this._after_recreate=false;this._is_async_recreate=false;this._is_after_recreate=false;this.accessibilityrole="grid";this._accept_arrow=false;this._accept_focus=false;this._is_first_focus=false;this._is_first_bodycell=false;this._is_band_focus=false;this._beforegridrowpos= -1;this._beforegridcolpos= -1;this.accessibilityreadbandlabel=true;this._aniframe_rowscroll=null;this._aniframe_rowscroll_float=null;this._aniframe_colscroll=null;this._aniframe_rowscroll_end=null;this._aniframe_colscroll_end=null;this._aniframe_clientrect=null;this._use_bind_expr_cells={body:null,head:null,summ:null};this._is_use_bind_expr_style={body:null,head:null,summ:null};this._expr_allrow_update_prop=false;this._expr_allrow_update_style=false;this._is_data_enter_apply=false;this._select_ctrl=null;this._format_str=null;this._track_point={x: -1,y: -1};this._track_idx= -1;this._track_start_info=null;this._track_mode="";this._overlay_controls=[];this._selections=[];this._func_queue=[];this._recalcXY_info=null;this._virtual_mergecell_arr=[];this._enable_redraw_history={};this._autofitcol_rate=[];this._org_treeStates=[];this._scroll_vpos_queue=[];this._style_tempband={};this._blinktask=null;this._tempmergeeditor=null;};var _pGrid=nexacro._createPrototype(nexacro.Component,nexacro.Grid);nexacro.Grid.prototype=_pGrid;_pGrid._type_name="Grid";_pGrid._rowheight=24;_pGrid._rowcount=0;_pGrid._rowposition= -1;_pGrid._beforeheadcellpos= -1;_pGrid._beforeheadrowpos= -1;_pGrid._beforeheadcolpos= -1;_pGrid._beforeheadsubrowpos= -1;_pGrid._beforebodycellpos= -1;_pGrid._beforebodyrowpos= -1;_pGrid._beforebodycolpos= -1;_pGrid._beforebodysubrowpos= -1;_pGrid._beforepvt= -9;_pGrid._beforesummcellpos= -1;_pGrid._beforesummrowpos= -1;_pGrid._beforesummcolpos= -1;_pGrid._beforesummsubrowpos= -1;_pGrid._multiselect="none";_pGrid._bodyrowheight=0;_pGrid._mouseRowPos= -9;_pGrid._mouseovercell=null;_pGrid._mouseCellPos= -1;_pGrid._dsEventOccured=false;_pGrid._bPivotGrid=false;_pGrid._showEditorCell=false;_pGrid._showEditRowIdx= -1;_pGrid._showEditCellIdx= -1;_pGrid._dbclickPreCell= -1;_pGrid._dbclickPreCol= -1;_pGrid._dbclickPreRow= -9;_pGrid._dbclickPreSubrow= -1;_pGrid._dbclickPrePvt= -9;_pGrid._lbuttondown_proc=false;_pGrid._bDragArea=false;_pGrid._nDragRow= -1;_pGrid._nDragCell= -1;_pGrid._nDragPivot= -9;_pGrid._nDragEndRow= -1;_pGrid._nDragEndCell= -1;_pGrid._nDragEndCol= -9;_pGrid._nDragBand= -1;_pGrid._bShiftClick=false;_pGrid._selectClear=false;_pGrid._acceptstab=true;_pGrid.body=null;_pGrid.head=null;_pGrid.summ=null;_pGrid.summary=null;_pGrid.currentcell= -1;_pGrid.currentcol= -1;_pGrid.currentpivot= -9;_pGrid.currentsubrow= -1;_pGrid.currentrow= -9;_pGrid._currentDSrow= -1;_pGrid._currentBand="body";_pGrid.selectcount=0;_pGrid.selectstartrow= -9;_pGrid.selectstartcol= -1;_pGrid.selectstartsubrow= -1;_pGrid.selectstartpivot= -9;_pGrid.selectendrow= -9;_pGrid.selectendcol= -1;_pGrid.selectendsubrow= -1;_pGrid.selectendpivot= -9;_pGrid.pagerowcount=0;_pGrid._pagerowcnt=0;_pGrid.rowcount=0;_pGrid.pivotcount=0;_pGrid._disprowcnt=0;_pGrid._displaycalendarctrl=null;_pGrid.fillareatype="none";_pGrid._resetfillarea=false;_pGrid.scrollpixel="default";_pGrid._scrollpixel=(nexacro._isTouchInteraction)?"all":"none";_pGrid._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";_pGrid.dragscrolltype="both";_pGrid.hideendline="none";_pGrid.userdata="";_pGrid.nodataimage="";_pGrid.nodatatext="";_pGrid.summarytype="default";_pGrid.suppresslevel="sameskip";_pGrid.useselcolor=true;_pGrid.showselection=false;_pGrid.autoupdatetype="none";_pGrid.cellclickbound="control";_pGrid.cellmovingtype="none";_pGrid.cellsizebandtype="body";_pGrid.cellsizingtype="none";_pGrid.extendsizetype="none";_pGrid.readonly=false;_pGrid.selectbandtype="default";_pGrid.selectchangetype="down";_pGrid.selecttype="row";_pGrid.wheelscrollrow=2;_pGrid.usecontrolkey=true;_pGrid.treeusebutton="use";_pGrid.treeuseline=true;_pGrid.treeusecheckbox=true;_pGrid.treeuseimage=true;_pGrid.treeuseexpandkey=false;_pGrid.treeasynctoggle=false;_pGrid.treeinitstatus="collapse,null";_pGrid.treepathdelimiter=".";_pGrid.useinputpanel=false;_pGrid.usesoftkeyboard=true;_pGrid.suppresshorzcell="none";_pGrid._enable=true;_pGrid._changeDisplayer=false;_pGrid._autoSizeRowProc=false;_pGrid._iskey_movetocell=false;_pGrid.binddataset="";_pGrid._binddataset=null;_pGrid._userRowposChange=false;_pGrid._create_selection=null;_pGrid.formatid="";_pGrid.formats="";_pGrid.locale="";_pGrid.areaselecttype="limitband";_pGrid.autoenter="none";_pGrid.autofitbandtype="body";_pGrid.autofitminheight=100;_pGrid.autofitminwidth=100;_pGrid.autofittype="none";_pGrid.autosizingtype="none";_pGrid.autosizebandtype="body";_pGrid.selectscrollmode="default";_pGrid._colautofit=false;_pGrid._rowautofit=false;_pGrid._autofiting=false;_pGrid._bodyAutoSize=true;_pGrid._headAutoSize=false;_pGrid._summAutoSize=false;_pGrid._AutoSizeLcol=false;_pGrid._AutoSizeRcol=false;_pGrid._rowSizeEx=false;_pGrid._noInternalvscroll=false;_pGrid._is_variable_bodyrowsize=false;_pGrid._bGridCtrlLdown=false;_pGrid._locale="";_pGrid._fixed_startrow= -9;_pGrid._fixed_endrow= -9;_pGrid._fixed_height=0;_pGrid._fixedrow_height=0;_pGrid._fixed_rowcnt=0;_pGrid._fixed_row_scrolling=false;_pGrid.createcellasync=false;_pGrid.cellcombobuttonsize=undefined;_pGrid.cellcalendarbuttonsize=undefined;_pGrid.cellcomboscrollbarsize=undefined;_pGrid.celltextareascrollbarsize=undefined;_pGrid.cellcalendarpopuptype=undefined;_pGrid.cellcombopopuptype=undefined;_pGrid.cellcheckboxsize=undefined;_pGrid.cellcalendarpopupsize=undefined;_pGrid.cellcombopopupsize=undefined;_pGrid.mouseovertype="default";_pGrid.fastvscrolltype="alldisplay";_pGrid.cellexprupdatecondition="all";_pGrid.scrolldisplaymode="normal";_pGrid._is_listtype=true;_pGrid._use_innerhtml=false;_pGrid._use_recycle_colscroll=(nexacro._Browser!="Runtime");_pGrid._accessibility_row= -1;_pGrid._accessibility_cellidx= -1;_pGrid._skip_mobile_tabfocus=true;_pGrid.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._text_elem=new nexacro.TextBoxElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementVisible(false);_b.setElementTextAlign("center");_b.setElementVerticalAlign("middle");if(this.binddataset&&!this._binddataset){var _c=this._findDataset(this.binddataset);if(_c){this.setBindDataset(_c);}}this._createBandsAndAreas(true);}};_pGrid.on_created_contents=function(_a){var _b=this._text_elem;if(_b){_b.create(_a);}var _c=this._headBand;if(_c){_c.on_created();}var _d=this._bodyBand;if(_d){_d.on_created();}var _e=this._summBand;if(_e){_e.on_created();}var _f=this._select_ctrl;if(_f){_f.on_created();}if(this._covercontrol){this._covercontrol.on_created();}if(this._highlight_row_main){this._highlight_row_main.on_created();}if(this._highlight_row_sublast){this._highlight_row_sublast.on_created();}if(this._highlight_row_subcenter){this._highlight_row_subcenter.on_created();}this._onResetScrollBar();if(_d||_c||_e){this._applyAutofittype(true);}if(this._create_selection!=null){var _g=this._create_selection;this._resetSelect(_g.row,_g.cell,_g.col,_g.subrow,_g.pivot);}this._create_selection=null;this._is_created=true;var _h=false;if(this._useexprtree){_h=true;}if(this.autosizingtype!="none"){if(this._img_preload_cnt==0){_h=true;}}if(_h){this._recreate_contents_all(true,true);}else{this._refreshBody();}if(nexacro._enableaccessibility&&!this._accept_focus){if(this.accessibilityenable){this._accept_focus=true;}}this.on_apply_nodatatext();this.on_apply_nodataimage();this.on_apply_readonly();this._applyResizer();this.on_apply_prop_rtl();if(this._after_resizeband){this._resizeBand();}this._adjustOverlayControls(true);if(!this._isMultiSelect()&&!this._isAreaSelect()){this._initSelect(this._rowposition);}};_pGrid._on_apply_status=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(_b=="mouseover"){if(this.mouseovertype=="cell"||this.mouseovertype=="row"){_b=_a;}}nexacro.Component.prototype._on_apply_status.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);var _j=this._getGridRowCount();if(this.getElement()&&_j==0&&this._bodyBand==null&&this._is_created){if(this.nodataimage){var _k="transparent "+this.nodataimage+" center center no-repeat";var _l=nexacro.BackgroundObject(_k,this);this._control_element.setElementBackground(_l);}else{this.on_apply_background(this._background);}}else{this.on_apply_background(this._background);}};_pGrid.on_create_contents_command=function(){var _a="";var _b=this._text_elem;if(_b){_a+=_b.createCommand();}var _c=this._headBand;if(_c){_a+=_c.createCommand();}var _d=this._bodyBand;if(_d){_a+=_d.createCommand();}var _e=this._summBand;if(_e){_a+=_e.createCommand();}return _a;};_pGrid.on_attach_contents_handle=function(_a){var _b=this._text_elem;if(_b){_b.attachHandle(_a);}var _c=this._headBand;if(_c){_c._control_element._cur_border=_c._border||_c._getCSSStyleValue("border",_c._status);_c.attachHandle(_a);}var _d=this._bodyBand;if(_d){_d._control_element._cur_border=_d._border||_d._getCSSStyleValue("border",_d._status);_d.attachHandle(_a);}var _e=this._summBand;if(_e){_e._control_element._cur_border=_e._border||_e._getCSSStyleValue("border",_e._status);_e.attachHandle(_a);}var _f=this._select_ctrl;if(_f){_f.attachHandle(_a);}this._onResetScrollBar();if(_d||_c||_e){this._applyAutofittype(true);}if(this._create_selection!=null){var _g=this._create_selection;this._resetSelect(_g.row,_g.cell,_g.col,_g.subrow,_g.pivot);}this._create_selection=null;this._is_created=true;var _h=false;if(this._useexprtree){_h=true;}if(this.autosizingtype!="none"){if(this._img_preload_cnt==0){_h=true;}}if(_h){this._recreate_contents_all(true,true);}else{this._refreshBody();}if(nexacro._enableaccessibility&&!this._accept_focus){if(this.accessibilityenable){this._accept_focus=true;}}this.on_apply_nodatatext();this.on_apply_nodataimage();this.on_apply_readonly();this._applyResizer();this.on_apply_prop_rtl();if(this._control_element){if(this._control_element._arrangeBandOrder){this._control_element._arrangeBandOrder();}}if(this._after_resizeband){this._resizeBand();}if(this._select_ctrl){this._select_ctrl.on_created(_a);}if(this._covercontrol){this._covercontrol.on_created();}if(this._highlight_row_main){this._highlight_row_main.on_created();}if(this._highlight_row_sublast){this._highlight_row_sublast.on_created();}if(this._highlight_row_subcenter){this._highlight_row_subcenter.on_created();}this._adjustOverlayControls(true);if(!this._isMultiSelect()&&!this._isAreaSelect()){this._initSelect(this._rowposition);}};_pGrid._destroyFormats=function(){var _a=this._formats;if(_a){for(var _c in _a){var _b=_a[_c];if(_b&&_b.destroy){_b.destroy();_a[_c]=null;}}this._formats={};}};_pGrid.on_destroy_contents=function(){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(this._aniframe_rowscroll){this._aniframe_rowscroll.destroy();}if(this._aniframe_rowscroll_float){this._aniframe_rowscroll_float.destroy();}if(this._aniframe_colscroll){this._aniframe_colscroll.destroy();}if(this._aniframe_rowscroll_end){this._aniframe_rowscroll_end.destroy();}if(this._aniframe_colscroll_end){this._aniframe_colscroll_end.destroy();}if(this._aniframe_clientrect){this._aniframe_clientrect.destroy();}this._aniframe_rowscroll=null;this._aniframe_rowscroll_float=null;this._aniframe_colscroll=null;this._aniframe_rowscroll_end=null;this._aniframe_colscroll_end=null;this._aniframe_clientrect=null;this._scroll_vpos_queue=null;this._destroyHighlightRow();var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}this._destroyBands(true);this._destroyFormats();this._select_ctrl=null;this._currentCellEditor=null;if(this._displaycalendarctrl){delete this._displaycalendarctrl;this._displaycalendarctrl=null;}this._binddataset=null;if(this._resizer_colctrl){this._resizer_colctrl.destroy();}if(this._resizer_rowctrl){this._resizer_rowctrl.destroy();}if(this._extratrack_timer){this._extratrack_timer._handle.stop();this._extratrack_timer._handle=null;this._extratrack_timer=null;}this._clearTreeStates();this._clearTempBand(true);this._blinktask=null;if(this._tempmergeeditor){this._tempmergeeditor.destroy();this._tempmergeeditor=null;}this._destroyOverlayControls();this._destroySelectionControls();this._hscrollmng.destroy();this._hscrollmng=null;this._vscrollmng.destroy();this._vscrollmng=null;this._curFormat=null;this._formats=null;this._mouseovercell=null;this._lastmouseentercell=null;this._prevAreaCellObj=null;this._selectstartrow=null;this._selectstartcol=null;this._selectstartsubrow=null;this._selectstartpvt=null;this._selectendrow=null;this._selectendcol=null;this._selectendsubrow=null;this._selectendpvt=null;this._resizerCols=null;this._resizerRows=null;this._imgsize_cache=null;this._rowSizeListSub=null;this._rowSizeList=null;this._rowHeadListSub=null;this._rowHeadList=null;this._rowSummListSub=null;this._rowSummList=null;this._lazy_load_rowsize=null;this._toprowpos=null;this._selectinfo=null;this._recreate_contents_proc=null;this._keydown_elem=null;this._tree_load_all=null;this._image_load_all=null;this._focus_proc=null;this._after_recreate_contents_all=null;this._band_scroll_tops=null;this._format_str=null;this._exprcache=null;this._use_bind_expr_cells=null;this._is_use_bind_expr_style=null;this._setdataobj=null;this._resizer_colctrl=null;this._resizer_rowctrl=null;this.selectstartrow=null;this.selectstartcol=null;this.selectstartsubrow=null;this.selectstartpivot=null;this.selectendrow=null;this.selectendcol=null;this.selectendsubrow=null;this.selectendpivot=null;this.formats=null;this._overlay_controls=null;this._selections=null;this._recalcXY_info=null;this._virtual_mergecell_arr=null;this._enable_redraw_history=null;this._autofitcol_rate=null;this._org_treeStates=null;this._treeCellinfo=null;this._band_resizing_no_autofit=null;this._global_cursor_obj=null;this._global_cursor=null;this._start_perftime=null;this._end_perftime=null;if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}if(this._applytask){this._applytask.destroy();this._applytask=null;}this._arrtextsizeCache=null;};_pGrid._clearTempBand=function(_a){if(this._style_tempband["head"]){this._style_tempband["head"].destroy();this._style_tempband["head"]=null;}if(this._style_tempband["body"]){this._style_tempband["body"].destroy();this._style_tempband["body"]=null;}if(this._style_tempband["summary"]){this._style_tempband["summary"].destroy();this._style_tempband["summary"]=null;}if(_a){this._style_tempband=null;}};_pGrid._is_changingRect=false;_pGrid.on_change_containerRect=function(_a,_b){if(!this._is_changingRect){nexacro.Component.prototype.on_change_containerRect.call(this,_a,_b);}if(this._is_created_contents){var _c=this._text_elem;_c.setElementSize(_a,_b);}this._is_changingRect=true;this._resizeBand();this._adjustOverlayControls(false);this._is_changingRect=false;};_pGrid.on_create_control_element=function(_a){var _b=new nexacro.GridScrollableControlElement(_a);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pGrid._on_deactivate=function(){if(!this._isSelected()){this._changeStatus("enabled",true);}};_pGrid.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);if(this._currentCellEditor&&this._currentCellEditor._isPopupVisible()){this._currentCellEditor.on_update_position(_a,_b,_c);}};_pGrid.applyto_bindSource=function(_a,_b){if(this._currentCellEditor){this._currentCellEditor._setDataset();}};_pGrid._getAccessibilityRole=function(_a){var _b=nexacro.Component.prototype._getAccessibilityRole.call(this);if(this._hasTree){_b="treegrid";}return _b;};_pGrid._isAccessibilityEnable=function(){return this._accept_focus;};_pGrid.on_get_accessibility_label=function(){return this.id;};_pGrid.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=(nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5);var _e=(this._currentBand=="body"&&this._accessibility_row== -1&&this._accessibility_cellidx== -1);if(_d){if(_a===undefined){return false;}if(_e){this._accessibility_row=0;this._accessibility_cellidx=0;}}var _f=false;var _g=this._curFormat;if(_g){var _h=(_g._headcells)?_g._headcells.length:0;var _i=(_g._bodycells)?_g._bodycells.length:0;var _j=(_g._summcells)?_g._summcells.length:0;if(this._currentBand=="grid"&&this._accessibility_cellidx<0&&this._accessibility_row<0){if(_h==0&&_i==0&&_j==0){var _k=this._getForm();var _l=_k._getTabOrderNext(this,(_a>0)?_a: -1,true);if(_l&&(!this.nodatatext||this.nodatatext.length<=0)){_l._setAccessibilityNotifyEvent(_a);}}if(_a){this._currentBand="head";this._accessibility_row=0;this._accessibility_cellidx= -1;}else{this._currentBand="summary";this._accessibility_row=0;this._accessibility_cellidx=_j;}}var _m=null;while(true){if(_a){this._accessibility_cellidx++ ;}else{this._accessibility_cellidx-- ;}if(this._currentBand=="head"){if(_a){if(!this._headBand||this._accessibility_cellidx>=_h){this._currentBand="body";this._accessibility_row=0;this._accessibility_cellidx=0;if(this.rowcount<=0&&this.nodatatext){this._bodyBand._setAccessibilityNotifyEvent();_f=true;break;}}}else{if(!this._headBand||this._accessibility_cellidx<0){this._accessibility_row= -1;this._accessibility_cellidx= -1;break;}}}else if(this._currentBand=="summary"){if(_a){if(!this._summBand||this._accessibility_cellidx>=_j){this._accessibility_row= -1;this._accessibility_cellidx= -1;break;}}else{if(!this._summBand||this._accessibility_cellidx<0){this._currentBand="body";this._accessibility_row=this._rowcount-1;this._accessibility_cellidx=_i-1;if(this.rowcount<=0&&this.nodatatext){this._bodyBand._setAccessibilityNotifyEvent();_f=true;break;}}}}else{if(_a){if(this._accessibility_cellidx>=_i){this._accessibility_row++ ;this._accessibility_cellidx=0;}if(this._rowcount<=0||this._accessibility_row>=this._rowcount){this._currentBand="summary";this._accessibility_row=0;this._accessibility_cellidx=0;}}else{if(this._accessibility_cellidx<0){this._accessibility_row-- ;this._accessibility_cellidx=_i-1;}if(this._rowcount<=0||this._accessibility_row<0){this._currentBand="head";this._accessibility_row=0;this._accessibility_cellidx=_h-1;}}}_m=this._getAccessibilityCurrentCell(this._accessibility_row,this._accessibility_cellidx);if(_m){_m._setAccessibilityNotifyEvent();_f=true;break;}}}return _f;};_pGrid._setAccessibilityNotifyEvent=function(_a){this._resetScrollPos(this,this._adjust_left,this._adjust_top,this._adjust_left+this._adjust_width,this._adjust_top+this._adjust_height,(_a&&_a>0)?0:1);this._accessibility_row= -1;this._accessibility_cellidx= -1;this._currentBand="grid";this.on_fire_sys_onaccessibilitygesture(_a);};_pGrid._setAccessibilityInfoByHover=function(_a){var _b=false;if(_a){if(_a._cellobj){_a=_a._cellobj;}if(_a instanceof nexacro._GridCellControl){this._currentBand=_a._band.id;this._accessibility_cellidx=_a._cellidx;this._accessibility_row=this._getDataRow(_a._rowidx);this._first_focus=true;}else{this._first_focus=false;}_b=_a._setAccessibilityInfoByHover();}return _b;};_pGrid.set_fillareatype=function(_a){switch(_a){case "none":case "linerow":case "datarow":case "controlrow":case "allrow":if(_a!=this.fillareatype){this.fillareatype=_a;this.on_apply_fillareatype();}break;}};_pGrid.on_apply_fillareatype=function(){this._resetfillarea=true;if(this._bodyBand){this._bodyBand._matrix._adjustRowsDisplay();this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows(false,false);}this._resetfillarea=false;};_pGrid.set_selectscrollmode=function(_a){switch(_a){case "select":case "scroll":this._selectscrollmode=this.selectscrollmode=_a;break;case "default":this.selectscrollmode=_a;this._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";break;}};_pGrid.set_scrollpixel=function(_a){if(_a!=this.scrollpixel){switch(_a){case "none":case "all":this.scrollpixel=this._scrollpixel=_a;this.on_apply_scrollpixel();break;case "default":this.scrollpixel=_a;this._scrollpixel=(nexacro._isTouchInteraction)?"all":"none";this.on_apply_scrollpixel();break;}}};_pGrid.on_apply_scrollpixel=function(){this._updateScrollInfo();};_pGrid.set_mouseovertype=function(_a){if(_a!=this.mouseovertype){switch(_a){case "cell":case "row":this.mouseovertype=_a;break;default:this.mouseovertype="default";break;}}};_pGrid._updateScrollInfo=function(){if(this._control_element){this._control_element._updateClientRect();}};_pGrid.set_hideendline=function(_a){switch(_a){case "none":case "row":case "col":case "both":if(_a!=this.hideendline){this.hideendline=_a;this.on_apply_hideendline();}break;}};_pGrid.on_apply_hideendline=function(){this._refreshAll();};_pGrid.set_userdata=function(_a){if(this.userdata!=_a){this.userdata=_a;}};_pGrid.set_nodataimage=function(_a){if(_a&&_a.substring(0,4).toLowerCase()!="url("){_a="URL("+_a+")";}this.nodataimage=_a;this.on_apply_nodataimage();};_pGrid.on_apply_nodataimage=function(){if(this.getElement()){var _a=this._bodyBand;if(_a){_a._updateAll(true);}else{this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}}};_pGrid.set_nodatatext=function(_a){this.nodatatext=_a;this.on_apply_nodatatext();};_pGrid.on_apply_nodatatext=function(){var _a=this._getGridRowCount();if(this.getElement()&&_a==0){var _b=this._bodyBand;if(_b){if(this._text_elem){this._text_elem.setElementVisible(false);}_b.on_apply_text();}else{if(this._text_elem){var _c=this.nodatatext;this._text_elem.setElementVisible(true);this._text_elem.setElementText(_c);}}}else{if(this._text_elem){this._text_elem.setElementVisible(false);}}};_pGrid.set_summarytype=function(_a){switch(_a){case "default":case "top":case "left":case "lefttop":if(_a!=this.summarytype){this.summarytype=_a;this.on_apply_summarytype();}break;}};_pGrid.on_apply_summarytype=function(){if(this.getElement()&&this._curFormat!=null&&this._curFormat.summHeight>0){this._recreate();}};_pGrid.set_suppresslevel=function(_a){switch(_a){case "sameskip":case "allskip":case "allcompare":if(_a!=this.suppresslevel){this.suppresslevel=_a;this.on_apply_suppresslevel();}break;}};_pGrid.on_apply_suppresslevel=function(){if(this.getElement()&&this._curFormat!=null){this._refreshBody();}};_pGrid.set_showselection=function(_a){if(_a!=undefined){_a=nexacro._toBoolean(_a);this.showselection=_a;this.on_apply_showselection();}};_pGrid.on_apply_showselection=function(){this._applySelection();};_pGrid.set_useselcolor=function(_a){if(_a!=undefined){_a=nexacro._toBoolean(_a);this.useselcolor=_a;this.on_apply_useselcolor();}};_pGrid.on_apply_useselcolor=function(){this._refreshBody();};_pGrid.setBindDataset=function(_a){if(_a instanceof nexacro.Dataset){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(!_a){this._binddataset=null;this.binddataset="";}else{this._binddataset=_a;this.binddataset=_a.id;}this.on_apply_prop_binddataset();}};_pGrid.getBindDataset=function(){return this._binddataset;};_pGrid.set_binddataset=function(_a){if(_a&&typeof _a!="string"){this.setBindDataset(_a);return;}if(_a!=this.binddataset||this.binddataset&&!this._binddataset){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(!_a){this._binddataset=null;this.binddataset="";}else{_a=_a.replace("@","");this._binddataset=this._findDataset(_a);this.binddataset=_a;}this.on_apply_prop_binddataset();}return this.binddataset;};_pGrid.on_apply_prop_binddataset=function(){var _a=this._binddataset;this._isUserChangeHeadRowSize=false;this._isUserChangeBodyRowSize=false;this._isUserChangeSummRowSize=false;if(this._is_down_act&&!this._isDownActionKeyMouse()){this._is_down_act=false;}if(_a){this.binddataset=_a.id;this.rowcount=this._rowcount=_a.rowcount;this._rowposition=_a.rowposition;this._exprcache={};this._initTreeStates();this._recreate_contents_all(true,true);this._initSelect(this._rowposition);this._setDSEventHandlers(_a);}else{this.rowcount=this._rowcount=0;this._rowposition= -1;this._exprcache={};this._initTreeStates();this._recreate_contents_all(true,true);this._initSelect(this._rowposition);}};_pGrid.set_formatid=function(_a){if(this.formatid!=_a){this.formatid=_a;this.on_apply_formatid();}};_pGrid.on_apply_formatid=function(){var _a=this.formatid;if(_a==""||!_a){_a=this._default_formatid;}this._curFormat=this._formats[_a];this._autofitcol_rate=[];this._clearBindTypeFlag();this._clearTempBand();this._initVirtualMerge();this._recreate();this._resetSelect(this._rowposition);};_pGrid.set_formats=function(_a){this.formats=_a;this.on_apply_formats();};_pGrid.on_apply_formats=function(){this._destroyFormats();this._setContents(this.formats);this._initVirtualMerge();this._recreate();this._resetSelect(this._rowposition);};_pGrid.set_locale=function(_a){if(_a!=this.locale){this.locale=_a;this._locale=_a;this.on_apply_locale(_a);}};_pGrid.on_apply_locale=function(_a){this._recreate();};_pGrid.set_areaselecttype=function(_a){if(this.areaselecttype!=_a){switch(_a){case "overband":case "limitband":this.areaselecttype=_a;break;}}};_pGrid.set_autoenter=function(_a){if(this.autoenter!=_a){switch(_a){case "select":case "key":case "none":this.autoenter=_a;break;}}};_pGrid.set_autofitbandtype=function(_a){if(this.autofitbandtype!=_a){switch(_a){case "body":case "allband":case "nohead":case "noleft":case "nohead,noleft":this.autofitbandtype=_a;break;}}};_pGrid.set_autofitminheight=function(_a){if(this.autofitminheight!=_a){this.autofitminheight=(isNaN(_a)?100:parseInt(_a,10));}};_pGrid.set_autofitminwidth=function(_a){if(this.autofitminwidth!=_a){this.autofitminwidth=(isNaN(_a)?100:parseInt(_a,10));}};_pGrid.set_autofittype=function(_a){if(this.autofittype!=_a){switch(_a){case "none":case "col":case "row":case "both":case "allpivot":case "allrow":case "allboth":case "col,allrow":case "row,allpivot":this.autofittype=_a;this.on_apply_prop_autofittype();break;}}};_pGrid.on_apply_prop_autofittype=function(){if(this._curFormat){if(!this._isUserChangeColSize){this._autofitcol_rate=[];}var _a;var _b=this._getBodyClientSize();var _c=this.getElement();_a=_b[0];if(_c){if(!this._is_created&&_a<=0){_a=_c.client_width;}this._curFormat._resetOrgColSize(true,this._autofitcol_rate,_a);}}this._applyAutofittype(true,true);};_pGrid.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);if(this.visible!=_a){nexacro.Component.prototype.set_visible.call(this,_a);if(_a&&this._is_created){this._refreshAll();if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){if(this._vscrollmng){this._absolutelyResetScrollPos(true);var _b=this._control_element.vscroll_limit;var _c=this._vscrollmng._pos;if(_c>=_b){_c=_b;this._control_element.setElementVScrollPos(_c-1);}else{this._control_element.setElementVScrollPos(_c+1);}this._control_element.setElementVScrollPos(_c);this._absolutelyResetScrollPos(false);}}}}};_pGrid.set_autosizebandtype=function(_a){if(this.autosizebandtype!=_a){var _b=false;switch(_a){case "body":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=false;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "head":this._bodyAutoSize=false;this._headAutoSize=true;this._summAutoSize=false;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "summary":this._bodyAutoSize=false;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "allband":this._bodyAutoSize=true;this._headAutoSize=true;this._summAutoSize=true;this._AutoSizeLcol=true;this._AutoSizeRcol=true;break;case "nohead":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "noleft":this._bodyAutoSize=true;this._headAutoSize=true;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=true;break;case "nohead,noleft":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=true;break;default:_b=true;break;}if(!_b){this.autosizebandtype=_a;this.on_apply_autosizebandtype();}}};_pGrid.on_apply_autosizebandtype=function(){if(this.getElement()){this._recreate_contents_all(true,true);}};_pGrid.set_autosizingtype=function(_a){if(this.autosizingtype!=_a){var _b=false;if(this.extendsizetype=="row"||this.extendsizetype=="both"){_b=true;}switch(_a){case "none":case "col":this._rowSizeEx=_b;break;case "row":case "both":this._rowSizeEx=true;break;}if(_a=="row"||_a=="none"||!_a){if(this._curFormat){var _c;var _d=this._getBodyClientSize();var _e=this.getElement();_c=_d[0];if(_e){if(!this._is_created&&_c<=0){_c=_e.client_width;}this._curFormat._resetOrgColSize(true,this._autofitcol_rate,_c);}}}this.autosizingtype=_a;}this.on_apply_autosizingtype();};_pGrid.on_apply_autosizingtype=function(){if(this.getElement()){this._isUserChangeHeadRowSize=false;this._isUserChangeBodyRowSize=false;this._isUserChangeSummRowSize=false;this._recreate_contents_all(true,true);this._resetFixSize();}};_pGrid.set_readonly=function(_a){if(_a!=null){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}}};_pGrid.on_apply_readonly=function(){var _a=this.readonly;this._changeStatus("readonly",_a);if(this._headBand){this._headBand._changeStatus("readonly",_a);}if(this._bodyBand){this._bodyBand._changeStatus("readonly",_a);}if(this._summBand){this._summBand._changeStatus("readonly",_a);}this._refreshAll();};_pGrid.set_selectbandtype=function(_a){if(this.selectbandtype!=_a){switch(_a){case "default":case "allband":case "body":case "nohead":case "noleft":this.selectbandtype=_a;this.on_apply_selectbandtype();break;}}};_pGrid.on_apply_selectbandtype=function(){};_pGrid.set_selectchangetype=function(_a){if(this.selectchangetype!=_a){switch(_a){case "up":case "down":this.selectchangetype=_a;break;}}};_pGrid.set_selecttype=function(_a){if(this.selecttype!=_a){var _b=this._isSelectRowType();var _c;switch(_a){case "row":case "cell":case "area":case "multirow":case "multicell":case "multiarea":case "treecell":case "multitreecell":this.selecttype=_a;_c=this._isSelectRowType();this.on_apply_selecttype(_b&&!_c);break;default:if(this.selecttype!="row"){this.selecttype="row";_c=true;this.on_apply_selecttype(_b&&!_c);}break;}}};_pGrid.on_apply_selecttype=function(_a){this._resetSelect();this._refreshBody();if(_a&&this._mouseovercell){var _b=this._getCurrentBodyCell(this._mouseovercell.row,this._mouseovercell.cell);if(_b){this._on_apply_cell_status(_b,"mouseover",false,true);this._on_apply_cell_status(_b,"mouseover",true);}}this._updateSelector();};_pGrid._applySelectorScroll=function(_a,_b){var _c,_d,_e;var _f=false;var _g=this._toprowpos[0];var _h=this._selectinfo.area.length>1&&this.selecttype=="multirow";if(_a[0]=="leftover0"){this._multiselect=_h?"ctrl":"shift";this._moveToCell("prev",false,true,_b,null);_f=true;}else if(_a[0]=="rightover0"){this._multiselect=_h?"ctrl":"shift";this._moveToCell("next",false,true,_b,this._selectinfo.ctrlpoint.col);_f=true;}else if(_a[0]=="leftover1"){this._multiselect=_h?"ctrl":"shift";this._moveToCell("prev",false,true,_b,this._selectinfo.ctrlpoint.col);_f=true;}else if(_a[0]=="rightover1"){this._multiselect=_h?"ctrl":"shift";this._moveToCell("next",false,true,_b,null);_f=true;}if(_a[1]=="topover0"||_a[1]=="topover1"){_d=this._selectinfo.currow-1;_c=this._begrowpos;if(_g!=_d){_e=this._jumpCurrentRow(_d);}_f=(_c!=_e);}else if(_a[1]=="bottomover0"||_a[1]=="bottomover1"){_d=this._selectinfo.currow+1;_c=this._begrowpos;_e=this._jumpCurrentRow(_d);_f=(_c!=_e);}return _f;};_pGrid._startAreaSizing=function(_a,_b){var _c=this._curFormat;var _d=_c._bodyrows.length;var _e=this._getAreaInfoWithPos(_a,_b);var _f;if(_b==0){_f=_c._bodycells[_e.ecell];if(_f){this._selectinfo.ctrlpoint._set(_f,_e.erow,_d);}}else if(_b==1){_f=_c._bodycells[_e.scell];if(_f){this._selectinfo.ctrlpoint._set(_f,_e.srow,_d);}}else if(_b==2){_f=_c._bodycells[_e.ecell];if(_f){this._selectinfo.ctrlpoint._set(_f,_e.srow,_d);}}else if(_b==3){_f=_c._bodycells[_e.scell];if(_f){this._selectinfo.ctrlpoint._set(_f,_e.erow,_d);}}};_pGrid._applyAreaSizing=function(_a,_b,_c){var _d=this._selectinfo.curcell;var _e=this._selectinfo.curcol;var _f=this._selectinfo.curdsrow;var _g=this._selectinfo.cursubrow;var _h=this._selectinfo.curpvt;var _i,_j,_k,_l,_m=this._selectinfo.curpvt;var _n=this._getAreaInfoWithPos(_a,_b);if(_b==0){this._setSelectedInfo(_n.scell,_n.scol,_n.srow,_n.ssubrow,null,_n);_i=_n.scell;_j=_n.scol;_k=_n.srow;_l=_n.ssubrow;}else if(_b==1){this._setSelectedInfo(_n.ecell,_n.ecol,_n.erow,_n.esubrow,null,_n);_i=_n.ecell;_j=_n.ecol;_k=_n.erow;_l=_n.esubrow;}else if(_b==2){this._setSelectedInfo(_n.scell,_n.scol,_n.erow,_n.esubrow,null,_n);_i=_n.scell;_j=_n.scol;_k=_n.erow;_l=_n.esubrow;}else if(_b==3){this._setSelectedInfo(_n.ecell,_n.ecol,_n.erow,_n.esubrow,null,_n);_i=_n.ecell;_j=_n.ecol;_k=_n.srow;_l=_n.ssubrow;}var _o;if(_c){_o="selectorsizing";}else if(_c===false){_o="selector";}if(this._selectinfo.area.length>1&&this.selecttype=="multirow"){this._multiselect="ctrl";}else{this._multiselect="shift";}this._ChangeSelect(_i,_j,_k,_l,_m,false,_d,_e,_f,_g,_h,"body",_o);};_pGrid._getAreaInfoWithPos=function(_a,_b){var _c=this._getScrollLeft();var _d=this._getScrollTop();var _e=this._getScollMaxLeft();var _f=this._select_ctrl;var _g=this._getCumulativeZoomFactor()/100.0;var _h=nexacro._getDevicePixelRatio(this.getElement());_g=_g* _h;var _i=_a.l/_g;var _j=_i+_a.w/_g;var _k=_a.t/_g;var _l=_k+_a.h/_g;var _m=this._curFormat;var _n=this._getGridRowCount();var _o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y;var _z,_aa,_ab,_ac;var _ad;var _ae,_af;if(_f){_ae=_f._start_begarea;_af=_f._start_endarea;}else{_ae=this._selectinfo.arearect.barea;_af=this._selectinfo.arearect.earea;}var _ag=parseInt(this._fixed_rowcnt);var _ah=_ag>0?parseInt(this._fixed_startrow):0;var _ai=parseInt(this._fixed_endrow);if(_ag>0){_ad=this._getHeadHeight();}else{_ad=this._getHeadHeight()-_d;}if(this.summarytype=="top"||this.summarytype=="lefttop"){_ad+=this._getSummHeight();}var _aj,_ak;var _al=_m._bodycells;var _am=_al.length;var _an,_ao;var _ap;var _aq;_p= -1;_aj=_ad;for(var _as=_ah;_as<_n;_as++ ){if(_ag>0&&_as==(_ai+1)){_aj-=_d;}_ak=_aj+this._getRowSize(_as);if(this._track_mode=="areaselect"){_ap=(_k<_ak);if(_as==0&&_k<_aj){_ap=true;}}else{_ap=(_aj<=_k&&_k<_ak);}var _ar;if(_p<0&&_ap){_p=this._getDataRow(_as);for(_ar=0;_ar<_am;_ar++ ){_ao=_al[_ar]._area;_an=_al[_ar]._col;_o=_al[_ar]._row;_aq=this._getSubCellRect(_as,_ar, -1, -1,false);_z=_aq.left;_ab=_aq.right;_ac=_aq.bottom;if(_ag>0&&_as<=_ai){_ac+=_d;}if(this._track_mode=="areaselect"){_ap=(_z<=_i&&_i<_ab&&_k<_ac);if(_ar==0&&_i<_z){_ap=true;}}else{_ap=(_z<=_i&&_i<_ab&&_k<_ac);}if(_ap){if(_af!=_ae||(_ae=="body"&&_af=="body")){if(_ae!="left"&&_c>0&&_ao=="left"){continue;}if(_ae!="right"&&_c<_e&&_ao=="right"){continue;}if(_af!="right"&&_ao=="right"){continue;}}_r=_ar;_t=_an;_v=_o;if(_a.area!="right"){break;}else if(_al[_ar]._area=="right"){break;}}}}if(this._track_mode=="areaselect"){_ap=_l<_ak;if((_as+1)==_n&&_l>=_ak){_ap=true;}}else{_ap=_aj<_l&&_l<=_ak;}if(_p>=0&&_ap){_q=this._getDataRow(_as);for(_ar=0;_ar<_am;_ar++ ){_an=_al[_ar]._col;_o=_al[_ar]._row;_aq=this._getSubCellRect(_as,_ar, -1, -1,false);_aa=_aq.top;if(_ag>0&&_as<=_ai){_aa+=_d;}if(_al[_ar]._area=="right"){_z=_aq.left-_c;_ab=_aq.right-_c;}else{_z=_aq.left;_ab=_aq.right;}if(this._track_mode=="areaselect"){_ap=_z<_j&&_j<=_ab;if((_ar+1)==_am&&_j>=_ab){_ap=true;}}else{_ap=_z<_j&&_j<=_ab&&_aa<_l;}if(_ap){if(_af!=_ae||(_ae=="body"&&_af=="body")){if(_af!="right"&&_c<_e&&_al[_ar]._area=="right"){continue;}if(_af!="left"&&_c>0&&_al[_ar]._area=="left"){continue;}if(_ae!="left"&&_al[_ar]._area=="left"){continue;}}_s=_ar;_u=_an;_w=_o;if(_a.area!="right"){break;}else if(_al[_ar]._area=="right"){break;}}}break;}_aj=_ak;}_x=_y=this._selectinfo.curpvt;return {srow:_p,erow:_q,scell:_r,ecell:_s,scol:_t,ecol:_u,ssubrow:_v,esubrow:_w,spvt:_x,epvt:_y};};_pGrid._getSelectRect=function(_a,_b){if(!this._selectinfo){return null;}var _c=this._selectinfo.arearect;var _d=this._selectinfo.area;_c.left=0;_c.top=0;_c.width=0;_c.height=0;_c.barea="";_c.earea="";var _e=this._getScrollLeft();var _f=this._getScrollTop();while(_d.length){var _g=_d[_d.length-1];var _h=this._curFormat;var _i=_h._cols;var _j=_h._bodyrows;var _k=this._rowSizeListSub;var _l=_g.begcol;var _m=_g.endcol;var _n=_h.leftWidth;var _o=this._getClientWidth()-_h.rightWidth;var _p=this._fixed_startrow;if(_g.begrow<0){break;}if(!this._isAreaSelect()){_l=0;_m=_i.length-1;}if(_l>=0&&_m>=0){if(_a&&_i[_l]._area!=_i[_m]._area){break;}_c.barea=_i[_l]._area;_c.earea=_i[_m]._area;if(_c.barea=="right"){_c.left=_o+_i[_l].left;_c.width=_i[_m].right-_i[_l].left;}else{if(_c.barea=="left"){_c.left=_i[_l].left;}else{_c.left=_n+_i[_l].left-_e;}if(_c.earea=="left"){_c.width=_i[_m].right-_c.left;}else if(_c.earea=="body"){_c.width=(_n+_i[_m].right-_e)-_c.left;}else{_c.width=(_o+_i[_m].right)-_c.left;}}}else{_c.left=this._getClientLeft();_c.width=this._getClientWidth();}var _q=_g.begrow;var _r=_g.endrow;var _s;for(var _v=0;_v<=_r;_v++ ){var _t=0,_u=_j.length-1;if(this._hasTree){if(this._getGridRow(_v)< -2){continue;}}if(_v<_q){if(_b&&_v<_p){continue;}for(_s=_t;_s<=_u;_s++ ){_c.top+=_k[_v* _j.length+_s];}}else{if(_v==_q){_t=_g.begsubrow[0];}if(_v==_r){_u=_g.endsubrow[_v-_q];}for(_s=0;_s<=_u;_s++ ){if(_s<_t){_c.top+=_k[_v* _j.length+_s];}else{_c.height+=_k[_v* _j.length+_s];}}}}_c.top+=this._bodyBand._adjust_top-_f;break;}this._selectinfo.arearect=_c;return _c;};_pGrid._updateSelector=function(_a,_b){var _c=this._isAreaSelect()&&nexacro._isTouchInteraction;if(this._control_element){var _d,_e,_f,_g,_h;var _i=this._select_ctrl;if(_c){if(!_i){_i=new nexacro._GridSelector("gridselector",0,0,0,0,null,null,this);_i._setCallbackFn(this._startAreaSizing,this._applyAreaSizing,this._applySelectorScroll);_i.createComponent();_i._createButton();this._select_ctrl=_i;}if((_a=="vscroll"||_a=="hscroll")&&!_i._is_tracking){_d=this._selectinfo.arearect;if(_a=="hscroll"){if(_d.barea=="left"){if(_d.earea=="body"){_d.width-=_b;}}else if(_d.barea=="body"){_d.left-=_b;if(_d.earea=="right"){_d.width+=_b;}}}if(_a=="vscroll"){_d.top-=_b;}_e=_d.left;_f=_d.top;_g=_d.width;_h=_d.height;if(_f+_h<=this._bodyBand._adjust_top){_c=false;}}else{_d=this._getSelectRect(_i._onlyarea,true);_e=_d.left;_f=_d.top;_g=_d.width;_h=_d.height;}if(!_e&&!_f&&!_g&&!_h){_c=false;}_i.move(_e,_f,_g,_h,_a);if(_c){if(!_i._is_tracking){_i.set_visible(false);}}else{_i.set_visible(false);}}}else{if(this._select_ctrl){this._select_ctrl.destroy();this._select_ctrl=null;}}};_pGrid.set_autoupdatetype=function(_a){if(this.autoupdatetype!=_a){switch(_a){case "none":case "comboselect":case "dateselect":case "itemselect":this.autoupdatetype=_a;break;}}};_pGrid.set_cellclickbound=function(_a){if(this.cellclickbound!=_a){switch(_a){case "control":case "cell":this.cellclickbound=_a;break;}}};_pGrid.set_cellmovingtype=function(_a){if(this.cellmovingtype!=_a){switch(_a){case "none":case "col":case "col,band":case "col,merge":case "col,line":this.cellmovingtype=_a;break;}}};_pGrid.set_cellsizebandtype=function(_a){if(this.cellsizebandtype!=_a){switch(_a){case "body":case "allband":case "nohead":case "noleft":case "nohead,noleft":this.cellsizebandtype=_a;this.on_apply_cellsizebandtype();break;}}};_pGrid.on_apply_cellsizebandtype=function(){};_pGrid.set_cellsizingtype=function(_a){if(this.cellsizingtype!=_a){switch(_a){case "none":case "col":case "row":case "both":this.cellsizingtype=_a;this.on_apply_cellsizingtype();break;}}};_pGrid.on_apply_cellsizingtype=function(){this._applyResizer();};_pGrid.set_extendsizetype=function(_a){if(this.extendsizetype!=_a){var _b=false;if(this.autosizingtype=="row"||this.autosizingtype=="both"){_b=true;}var _c=false;switch(_a){case "none":case "col":this._rowSizeEx=_b;break;case "row":case "both":this._rowSizeEx=true;break;default:_c=true;break;}if(!_c){this.extendsizetype=_a;this.on_apply_extendsizetype();}}};_pGrid.on_apply_extendsizetype=function(){if(this.getElement()){this._recreate_contents_all(true,true);}};_pGrid.set_wheelscrollrow=function(_a){if(this.wheelscrollrow!=_a){this.wheelscrollrow=(isNaN(_a)?2:parseInt(_a,10));}};_pGrid.set_usecontrolkey=function(_a){if(this.usecontrolkey!=_a){this.usecontrolkey=_a;}};_pGrid.set_treeusebutton=function(_a){if(this.treeusebutton!=_a){switch(_a){case "use":case "no":case "noclick":this.treeusebutton=_a;this.on_apply_treeusebutton();break;}}};_pGrid.set_dragscrolltype=function(_a){nexacro.Form.prototype.set_dragscrolltype.call(this,_a);};_pGrid.on_apply_treeusebutton=function(){this._refreshBody();};_pGrid.set_treeuseline=function(_a){if(_a!=null&&this.treeuseline!=_a){_a=nexacro._toBoolean(_a);this.treeuseline=_a;this.on_apply_treeuseline();}};_pGrid.on_apply_treeuseline=function(){this._refreshBody();};_pGrid.set_treeusecheckbox=function(_a){if(_a!=null&&this.treeusecheckbox!=_a){_a=nexacro._toBoolean(_a);this.treeusecheckbox=_a;this.on_apply_treeusecheckbox();}};_pGrid.on_apply_treeusecheckbox=function(){this._refreshBody();};_pGrid.set_treeuseimage=function(_a){if(_a!=null&&this.treeuseimage!=_a){_a=nexacro._toBoolean(_a);this.treeuseimage=_a;this.on_apply_treeuseimage();}};_pGrid.on_apply_treeuseimage=function(){this._refreshBody();};_pGrid.set_treeuseexpandkey=function(_a){if(_a!=null&&this.treeuseexpandkey!=_a){_a=nexacro._toBoolean(_a);this.treeuseexpandkey=_a;}};_pGrid.set_treeinitstatus=function(_a){this.treeinitstatus=_a;var _b,_c;var _d=false;switch(_a){case "collapse,null":_b=false;_c=false;break;case "expand,null":_b=true;_c=false;break;case "collapse,all":_b=false;_c=true;break;case "expand,all":_b=true;_c=true;break;default:_d=true;break;}if(!_d){this.on_apply_treeinitstatus(_b,_c);}};_pGrid.on_apply_treeinitstatus=function(_a,_b){if(!this._hasTree){return;}var _c=this._curFormat;if(!_c){return;}var _d=_c._bodycells;var _e=_d.length;var _f=this._treeIndexes;var _g=this._treeStates;if(!_f||!_g){return;}this._org_treeStates=[];var _h,_i,_j;var _k,_l;if(!_b){_h=false;var _m;for(_k=_f.length-1;_k>=0;_k-- ){var _n,_o;_m=this.getDatasetRow(_k);for(_l=0;_l<_e;_l++ ){_n=_d[_l];_o=_n._getEdittype(_m);if(_o=="tree"){break;}}if(_n){if(_n.treestate._bindtype!=0){_j=_n._getAttrValue(_n.treestate,_m);}if(!_j&&_j!==0){_i=_f.length;if(_a){if(this._setTreeState(_k,1,false,"null")>0){_k+=(_f.length-_i+1);_h=true;}}else{if(this._setTreeState(_k,0,false,"null")>0){_h=true;}}}else{_i=_f.length;var _p=this._setTreeState(_k,_j,false,"null_value");if(_p==2){if((_f.length-_i)>0){_k+=(_f.length-_i+1);}_h=true;}else if(_p==1){_h=true;}}}}if(_h==true){this._recreate_contents_all(false,false,true);}}else{_h=false;if(!_a){for(_k=_f.length-1;_k>=0;_k-- ){if(this._setTreeState(_k,0,false,"all")>0){_h=true;}}for(_k=_g.length-1;_k>=0;_k-- ){_j=this._getOrgTreeStates(_k);if(_j==2){_g[_k]=2;}}}else{for(_k=0;_k<_f.length;_k++ ){if(this._setTreeState(_k,1,false,"all")>0){_h=true;}}}if(_h==true){if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,false);}else{this._recreate_contents_all(false,false,true);}}}};_pGrid.set_treepathdelimiter=function(_a){if(this.treepathdelimiter!=_a){this.treepathdelimiter=_a;}};_pGrid.set_useinputpanel=function(_a){if(this.useinputpanel!=_a){this.useinputpanel=_a;}};_pGrid.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard){this.usesoftkeyboard=_a;}};_pGrid.on_apply_prop_enable=function(_a){this._enable=_a;nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._is_created){var _b=this._headBand;if(_b){_b._setEnable(_a);}_b=this._bodyBand;if(_b){_b._setEnable(_a);}_b=this._summBand;if(_b){_b._setEnable(_a);}}};_pGrid.on_apply_prop_rtl=function(){nexacro.Component.prototype.on_apply_prop_rtl.call(this);this._refreshAll();};_pGrid.createFormat=function(){var _a=this._binddataset;var _b;var _c=0;if(_a){_c=_a.getColCount();this.rowcount=this._rowcount=_a.rowcount;this._rowposition=_a.rowposition;}var _d;if(_c>0){_d="<Formats>\n";_d+="<Format id=\"default\">\n";_d+="<Columns>\n";{for(_b=0;_b<_c;_b++ ){_d+="<Column size=\"";_d+="80";_d+="\"/>\n";}}_d+="</Columns>\n";_d+="<Rows>\n";{_d+="<Row band=\"head\" size=\"";_d+="24";_d+="\"/>\n";_d+="<Row band=\"body\" size=\"";_d+="24";_d+="\"/>\n";}_d+="</Rows>\n";_d+="<Band id=\"head\">\n";{for(_b=0;_b<_c;_b++ ){_d+="<Cell col=\"";_d+=_b.toString();_d+="\" displaytype=\"normal\" text=\"";_d+=_a.getColID(_b);_d+="\"/>\n";}}_d+="</Band>\n";_d+="<Band id=\"body\">\n";{for(_b=0;_b<_c;_b++ ){_d+="<Cell col=\"";_d+=_b.toString();_d+="\" displaytype=\"normal\" text=\"bind:";_d+=_a.getColID(_b);_d+="\"/>\n";}}_d+="</Band>\n";_d+="</Format>\n";_d+="</Formats>\n";}else{_d="<Formats>\n";_d+="<Format id=\"default\">\n";_d+="</Format>\n";_d+="</Formats>\n";}this.set_formats(_d);return 0;};_pGrid.setFormat=function(_a){var _b=this._formats[_a];if(_b){if(_b!=this._curFormat){this.set_formatid(_a);return true;}}else{this.formatid="";this._curFormat=null;this._clearTempBand();this._clearBindTypeFlag();this._destroyBands();}return false;};_pGrid.getFormatString=function(){return this.formats;};_pGrid.getCurFormatString=function(_a){if(this._curFormat){if(_a){return this._curFormat._getOrgFormatStr();}else{return this._curFormat._getFormatStr();}}else{return this.formats;}};_pGrid.getFormatIdList=function(){if(!this._format_str){return [];}var _a=[];_a=_a.concat(this._format_str);return _a;};_pGrid.getCellPos=function(){return this._selectinfo.curcell;};_pGrid.setCellPos=function(_a,_b){if(_b>=0){return this._moveToPosCell(_b,_a);}else{return this._moveToPosCell(this._selectinfo.curdsrow,_a);}};_pGrid.getCellCount=function(_a){if(!this._curFormat){return 0;}_a=_a.toLowerCase();var _b;if(_a=="head"){_b=this._curFormat._headcells;}else if(_a=="summ"||_a=="summary"){_b=this._curFormat._summcells;}else{_b=this._curFormat._bodycells;}if(_b){return _b.length;}return 0;};_pGrid.getCellRect=function(_a,_b,_c){return this.getSubCellRect(_a,_b, -1,_c);};_pGrid.getSubCellRect=function(_a,_b,_c,_d){return this._getSubCellRect(_a,_b,_c,_d,true);};_pGrid._getSubCellRect=function(_a,_b,_c,_d,_e){var _f={"left":0,"top":0,"right":0,"bottom":0,"width":0,"height":0};_f.left=0;_f.top=0;_f.right=0;_f.bottom=0;_f.width=0;_f.height=0;var _g;var _h,_i,_j;var _k;var _l;var _m;var _n;var _o;var _p;var _q;var _r;var _s;var _t;if(_a>=0&&_a<this._rowcount){if(this._curFormat&&this._curFormat._bodycells){var _u=null;_g=this._curFormat._bodycells[_b];if(_g&&_c>=0){_u=_g;_g=_g._subcells[_c];}if(_g){_o=this._getHeadHeight();_p=this._curFormat._cols;if(this.summarytype=="top"||this.summarytype=="lefttop"){_o+=this._getSummHeight();}var _v=this._curFormat._bodyrows;var _w=_v.length;var _x=this._getGridRowCount();_q=(_u)?_u._row+_g._row:_g._row;_r=(_u)?_u._col+_g._col:_g._col;_s=_g._rowspan;_t=_g._colspan;var _y=this._rowSizeListSub;var _z;for(_i=0;_i<_x;_i++ ){_z=_i;if(this._hasTree){_z=this._treeIndexes[_z];}var _aa=_z* _w;if(_z==_a){for(_h=0;_h<_q;_h++ ){_o+=_y[_aa++ ];}_l=_o;for(_j=0;_j<_s;_j++ ){_o+=_y[_aa++ ];}break;}else{for(var _ad=0;_ad<_w;_ad++ ){_o+=_y[_aa+_ad];}}}_k=0;for(_i=0;_i<_r;_i++ ){_k+=_p[_i].size;}_m=_k;_k=0;for(_i=0;_i<_r+_t;_i++ ){_k+=_p[_i].size;}_n=_k;if(_g._area=="body"||_g._area==""){_m-=this._getScrollLeft();_n-=this._getScrollLeft();}_l-=this._getScrollTop();_o-=this._getScrollTop();if(_e){if(_m<0){_m=0;}if(_n<0){_n=0;}if(_l<0){_l=0;}if(_o<0){_o=0;}}_f.left=_m;_f.right=_n;_f.top=_l;_f.bottom=_o;_f.width=_n-_m;_f.height=_o-_l;}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){_g=this._curFormat._headcells[_b];if(_g&&_c>=0){_g=_g._subcells[_c];}if(_g){_o=0;_p=this._curFormat._cols;var _ab=this._curFormat._headrows;_q=_g._row;_r=_g._col;_s=_g._rowspan;_t=_g._colspan;for(_h=0;_h<_q;_h++ ){_o+=_ab[_h].size;}_l=_o;for(_h=0;_h<_s;_h++ ){_o+=_ab[_h+_q].size;}_k=0;for(_i=0;_i<_r;_i++ ){_k+=_p[_i].size;}_m=_k;_k=0;for(_i=0;_i<_r+_t;_i++ ){_k+=_p[_i].size;}_n=_k;if(_g._area=="body"||_g._area==""){_m-=this._getScrollLeft();_n-=this._getScrollLeft();}if(_e){if(_m<0){_m=0;}if(_n<0){_n=0;}}_f.left=_m;_f.right=_n;_f.top=_l;_f.bottom=_o;_f.width=_n-_m;_f.height=_o-_l;}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){_g=this._curFormat._summcells[_b];if(_g&&_c>=0){_g=_g._subcells[_c];}if(_g){_o=0;_p=this._curFormat._cols;if(this.summarytype=="top"||this.summarytype=="lefttop"){_o+=this._getHeadHeight();}else{_o=this._getClientTop()+this._getClientHeight()-this._getSummHeight();}var _ac=this._curFormat._summrows;_q=_g._row;_r=_g._col;_s=_g._rowspan;_t=_g._colspan;for(_h=0;_h<_q;_h++ ){_o+=_ac[_h].size;}_l=_o;for(_h=0;_h<_s;_h++ ){_o+=_ac[_h+_q].size;}_k=0;for(_i=0;_i<_r;_i++ ){_k+=_p[_i].size;}_m=_k;_k=0;for(_i=0;_i<_r+_t;_i++ ){_k+=_p[_i].size;}_n=_k;if(_g._area=="body"||_g._area==""){_m-=this._getScrollLeft();_n-=this._getScrollLeft();}if(_e){if(_m<0){_m=0;}if(_n<0){_n=0;}}_f.left=_m;_f.right=_n;_f.top=_l;_f.bottom=_o;_f.width=_n-_m;_f.height=_o-_l;}}}return _f;};_pGrid.getCellText=function(_a,_b,_c){var _d;if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){_d=this._curFormat._bodycells[_b];if(_d){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _d._getDisplayText(_a);}}else{if(_a<this._rowcount){return _d._getDisplayText(_a);}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){_d=this._curFormat._headcells[_b];if(_d){return _d._getDisplayText(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){_d=this._curFormat._summcells[_b];if(_d){return _d._getDisplayText(this._currentDSrow);}}}};_pGrid.getCellValue=function(_a,_b,_c){if(_c==undefined){_c=0;}var _d;if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){_d=this._curFormat._bodycells[_b];if(_d){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _d._getValue(_a,true);}}else{if(_a<this._rowcount){return _d._getValue(_a,true);}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){_d=this._curFormat._headcells[_b];if(_d){return _d._getValue(this._currentDSrow,true);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){_d=this._curFormat._summcells[_b];if(_d){return _d._getValue(this._currentDSrow,true);}}}};_pGrid.getSubCellCount=function(_a,_b){var _c=this._curFormat;_a=_a.toLowerCase();if(_c){var _d;if(_a=="head"){_d=_c._headcells;}else if(_a=="summ"||_a=="summary"){_d=_c._summcells;}else{_d=_c._bodycells;}if(_d&&_d.length>_b&&_b>=0){var _e=_d[_b];return _e._subcells.length;}}return 0;};_pGrid.getSubCellProperty=function(_a,_b,_c,_d){var _e=this._curFormat;if(!_e){return undefined;}return _e.getSubCellProperty(_a,_b,_c,_d);};_pGrid.getSubCellText=function(_a,_b,_c,_d){var _e;if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){if(_b>=0&&_b<this._curFormat._bodycells.length){_e=this._curFormat._bodycells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _e._subcells[_c]._getDisplayText(_a);}}else{if(_a<this._rowcount){return _e._subcells[_c]._getDisplayText(_a);}}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){_e=this._curFormat._headcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getDisplayText(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){_e=this._curFormat._summcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getDisplayText(this._currentDSrow);}}}};_pGrid.getSubCellValue=function(_a,_b,_c,_d){var _e;if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){if(_b>=0&&_b<this._curFormat._bodycells.length){_e=this._curFormat._bodycells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _e._subcells[_c]._getValue(_a);}}else{if(_a<this._rowcount){return _e._subcells[_c]._getValue(_a);}}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){_e=this._curFormat._headcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getValue(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){_e=this._curFormat._summcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getValue(this._currentDSrow);}}}};_pGrid.setSubCellProperty=function(_a,_b,_c,_d,_e){var _f=this._curFormat;if(!_f){return false;}var _g=_f.setSubCellProperty(_a,_b,_c,_d,_e);if(_g){this._refreshCell(_a,_b, -1,_d,_c);}return (_g!=null);};_pGrid.setFormatColProperty=function(_a,_b,_c){if(_b&&this._curFormat){_b=_b.toLowerCase();if(this._curFormat.setFormatColProperty(_a,_b,_c)){this._clearBindTypeFlag();if(_b=="band"){this._autofitcol_rate=[];this._recreate();}else if(_b=="size"){if(this.enableredraw){this._updateColSize(_a);}else{this._autofitcol_rate=[];if(!this._enable_redraw_history.updatecolsize){this._enable_redraw_history.updatecolsize=[];}this._enable_redraw_history.updatecolsize.push(_a);}}else{this._recreate_contents_all(false,false);}return true;}}return false;};_pGrid.setFormatRowProperty=function(_a,_b,_c){if(_b&&this._curFormat){_b=_b.toLowerCase();if(this._curFormat.setFormatRowProperty(_a,_b,_c)){this._clearBindTypeFlag();if(_b=="band"||_b=="size"){this._isUserChangeHeadRowSize=false;this._isUserChangeSummRowSize=false;this._isUserChangeBodyRowSize=false;this._recreate();}else{this._recreate_contents_all(false,false);}return true;}}return false;};_pGrid.getFormatColProperty=function(_a,_b){if(this._curFormat){return this._curFormat.getFormatColProperty(_a,_b);}return null;};_pGrid.getFormatRowProperty=function(_a,_b){if(this._curFormat){return this._curFormat.getFormatRowProperty(_a,_b);}return null;};_pGrid.getFormatColCount=function(){if(this._curFormat){return this._curFormat._cols.length;}return 0;};_pGrid.getFormatRowCount=function(){if(this._curFormat){var _a=this._curFormat;var _b=0;if(_a._headrows){_b+=_a._headrows.length;}if(_a._bodyrows){_b+=_a._bodyrows.length;}if(_a._summrows){_b+=_a._summrows.length;}return _b;}return 0;};_pGrid.getFormatColSize=function(_a){if(this._curFormat){if(this._curFormat._cols.length>0&&this._curFormat._cols.length>_a){var _b=this._curFormat._cols[_a];if(_b){return _b.orgsize;}}}return  -1;};_pGrid.getFormatRowSize=function(_a){if(this._curFormat){if(_a<0){return  -1;}var _b=0;var _c=this._curFormat._headrows;var _d;if(_c){if(_c.length>_a){_d=_c[_a];return _d.orgsize;}_b+=_c.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){_c=this._curFormat._summrows;if(_c){if(_c.length+_b>_a){_d=_c[_a-_b];return _d.orgsize;}_b+=_c.length;}_c=this._curFormat._bodyrows;if(_c){if(_c.length+_b>_a){_d=_c[_a-_b];return _d.orgsize;}}}else{_c=this._curFormat._bodyrows;if(_c){if(_c.length+_b>_a){_d=_c[_a-_b];return _d.orgsize;}_b+=_c.length;}_c=this._curFormat._summrows;if(_c){if(_c.length+_b>_a){_d=_c[_a-_b];return _d.orgsize;}}}}return  -1;};_pGrid._isUserChangeHeadRowSize=false;_pGrid._isUserChangeBodyRowSize=false;_pGrid._isUserChangeSummRowSize=false;_pGrid._isUserChangeColSize=false;_pGrid.setRealColSize=function(_a,_b,_c,_d){this._isUserChangeColSize=true;if(_a&&_d){return this._setColSize(_a,_b,_c,true,true);}else{return this._setColSize( -9,_b,_c,false,true);}};_pGrid.setRealRowSize=function(_a,_b,_c,_d){var _e=this._curFormat;if(_d==undefined){_d=true;}var _f="none";if(_d){if(_a>=0){_f="body";}else if(_a== -1){_f="head";}else if(_a== -2){_f="summ";}}else{if(_e._headrows){if(_a<_e._headrows.length){_f="head";}else{_a-=_e._headrows.length;}}if(_f=="none"){if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_e._summrows){if(_a<_e._summrows.length){_f="summ";}else{_a-=_e._headrows.length;}}if(_f=="none"){_f="body";}}else{if(_e._bodyrows){var _g=(this._hasTree)?this._treeIndexes.length:this._rowcount;if(_a<_g){_f="body";}else{_a-=_g;}}if(_f=="none"){if(_e._summrows){if(_a<_e._summrows.length){_f="summ";}}}}}}var _h=false;var _i,_j,_k;var _l;var _m;var _n;var _o;var _p;if(_f=="body"){if(_e&&_e._bodyrows){var _q=_a;if(this._hasTree){if(_q>=this._treeIndexes.length){return false;}_q=this._treeIndexes[_q];}else{if(_q>=this._rowcount){return false;}}_l=_e._bodyrows;_m=_l.length;_n=this._rowSizeList;_o=this._rowSizeListSub;if(_c>=0){if(_c<_m){this._is_variable_bodyrowsize=true;_i=(_q* _m)+_c;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[_q]+=(_k-_j);_h=true;this._updateRowSizeExtendEx(_e._bodyrows,_n,_o,_q,true);if(this.enableredraw){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){if(this._isDownActionKeyMouse()){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._bodyBand){this._bodyBand._recreate_contents();}});}else{if(this._bodyBand){this._bodyBand._recreate_contents();}}}else{this._updateRowSize(_a,_c);}}else{if(this.extendsizetype!="row"&&this.extendsizetype!="both"){this._enable_redraw_history.recreate_body=true;}else{if(!this._enable_redraw_history.updaterowsize){this._enable_redraw_history.updaterowsize=[];}this._enable_redraw_history.updaterowsize.push([_a,_c]);}}this._isUserChangeBodyRowSize=true;}}else{return false;}}else{if(_q<_n.length){this._is_variable_bodyrowsize=true;for(_p=0;_p<_m;_p++ ){_i=(_q* _m)+_p;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[_q]+=(_k-_j);_h=true;}}if(_h){this._updateRowSizeExtendEx(_e._bodyrows,_n,_o,_q,true);if(this.enableredraw){if(this._isDownActionKeyMouse()){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._bodyBand){this._bodyBand._recreate_contents();}});}else{if(this._bodyBand){this._bodyBand._recreate_contents();}}}else{this._enable_redraw_history.recreate_body=true;}this._isUserChangeBodyRowSize=true;}}else{return false;}}}}else if(_f=="head"){if(_e&&_e._headrows){_l=_e._headrows;_m=_l.length;_n=this._rowHeadList;_o=this._rowHeadListSub;if(_c>=0){if(_c<_m){_i=_c;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[0]+=(_k-_j);_h=true;this._updateRowSizeExtendEx(_e._headrows,_n,_o,0);}}else{return false;}}else{for(_p=0;_p<_m;_p++ ){_i=_p;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[0]+=(_k-_j);_h=true;}}if(_h==true){this._updateRowSizeExtendEx(_e._headrows,_n,_o,0);}}if(_h){if(this.enableredraw){if(this._isDownActionKeyMouse()){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._headBand){this._headBand._recreate_contents();}this._resizeBand();});}else{if(this._headBand){this._headBand._recreate_contents();}this._resizeBand();}}else{this._enable_redraw_history.recreate_head=true;this._enable_redraw_history.resize_band=true;}this._isUserChangeHeadRowSize=true;}}}else if(_f=="summ"){if(_e&&_e._summrows){_l=_e._summrows;_m=_l.length;_n=this._rowSummList;_o=this._rowSummListSub;if(_c>=0){if(_c<_m){_i=_c;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[0]+=(_k-_j);_h=true;this._updateRowSizeExtendEx(_e._summrows,_n,_o,0);}}else{return false;}}else{for(_p=0;_p<_m;_p++ ){_i=_p;_j=_o[_i];_k=_b;if(_j!=_k){_o[_i]=_k;_n[0]+=(_k-_j);_h=true;}}if(_h==true){this._updateRowSizeExtendEx(_e._summrows,_n,_o,0);}}if(_h==true){if(this.enableredraw){if(this._isDownActionKeyMouse()){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._summBand){this._summBand._recreate_contents();}this._resizeBand();});}else{if(this._summBand){this._summBand._recreate_contents();}this._resizeBand();}}else{this._enable_redraw_history.recreate_summ=true;this._enable_redraw_history.resize_band=true;}this._isUserChangeSummRowSize=true;}}}if(_h){this._resetScrollMax();}return _h;};_pGrid.getRealColSize=function(_a,_b){var _c=this._curFormat;var _d=this._getColFixCnt("left");var _e=this._getColFixCnt("body");var _f=_c._cols;var _g=_f.length;if(_b==true){if(_a>=0){_a+=_d;}else if(_a== -2){_a+=_d;_a+=_e;}if(_g<=_a){return  -1;}}return _f[_a].size;};_pGrid.getRealRowSize=function(_a,_b,_c){var _d=this._curFormat;if(_c==undefined){_c=true;}var _e;var _f="none";if(_c){if(_a>=0){_f="body";}else if(_a== -1){_f="head";}else if(_a== -2){_f="summ";}}else{if(_d._headrows){if(_a<_d._headrows.length){_f="head";}else{_a-=_d._headrows.length;}}if(_f=="none"){if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_d._summrows){if(_a<_d._summrows.length){_f="summ";}else{_a-=_d._headrows.length;}}if(_f=="none"){_f="body";}}else{if(_d._bodyrows){var _g=(this._hasTree)?this._treeIndexes.length:this._rowcount;if(_a<_g){_f="body";}else{_a-=_g;}}if(_f=="none"){if(_d._summrows){if(_a<_d._summrows.length){_f="summ";}}}}}}if(_f=="body"){if(_d&&_d._bodyrows){var _h=_a;if(this._hasTree){if(_h>=this._treeIndexes.length){return 0;}_h=this._treeIndexes[_h];}else{if(_h>=this._rowcount){return 0;}}_e=_d._bodyrows;if(_b>=0){if(_b<_e.length){return this._rowSizeListSub[_h* _e.length+_b];}else{return 0;}}else{if(_h<this._rowSizeList.length){return this._rowSizeList[_h];}else{return 0;}}}}else if(_f=="head"){if(_d&&_d._headrows){_e=_d._headrows;if(_b>=0){if(_b<_e.length){return this._rowHeadListSub[_b];}else{return 0;}}else{return this._rowHeadList[0];}}}else if(_f=="summ"){if(_d&&_d._summrows){_e=_d._summrows;if(_b>=0){if(_b<_e.length){return this._rowSummListSub[_b];}else{return 0;}}else{return this._rowSummList[0];}}}return 0;};_pGrid.getRealColFullSize=function(_a){var _b,_c,_d=0;var _e;var _f;if(!_a){_c=this._getColFixCnt("left");for(_b=0;_b<_c;_b++ ){_d+=this.getRealColSize(_b);}_e=this._getColFixCnt("body");for(_b=0;_b<_e;_b++ ){_d+=this.getRealColSize(_c+_b);}_f=this._getColFixCnt("right");for(_b=0;_b<_f;_b++ ){_d+=this.getRealColSize(_c+_e+_b);}}else{_a=_a.toLowerCase();if(_a=="left"){_c=this._getColFixCnt("left");for(_b=0;_b<_c;_b++ ){_d+=this.getRealColSize(_b);}}else if(_a=="body"){_c=this._getColFixCnt("left");_e=this._getColFixCnt("body");for(_b=0;_b<_e;_b++ ){_d+=this.getRealColSize(_c+_b);}}else if(_a=="right"){_c=this._getColFixCnt("left");_e=this._getColFixCnt("body");_f=this._getColFixCnt("right");for(_b=0;_b<_f;_b++ ){_d+=this.getRealColSize(_c+_e+_b);}}}return _d;};_pGrid.getRealRowFullSize=function(_a){var _b;var _c;var _d;if(!_a){_b=(this._hasTree)?this._treeIndexes.length:this._rowcount;_d=0;for(_c=0;_c<_b;_c++ ){_d+=this.getRealRowSize(_c);}_d+=this.getRealRowSize( -1);_d+=this.getRealRowSize( -2);return _d;}else{_a=_a.toLowerCase();if(_a=="body"){_b=(this._hasTree)?this._treeIndexes.length:this._rowcount;_d=0;for(_c=0;_c<_b;_c++ ){_d+=this.getRealRowSize(_c);}return _d;}else if(_a=="head"){return this.getRealRowSize( -1);}else if(_a=="summ"||_a=="summary"){return this.getRealRowSize( -2);}}return 0;};_pGrid.__createDefualtColFormat=function(_a){var _b;_b="<Formats>\n";_b+="<Format id=\"default\">\n";_b+="<Columns>\n";_b+="<Column size=\"40\"/>\n";_b+="</Columns>\n";if(_a=="head"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"head\"/>";_b+="</Rows>\n";_b+="<Band id=\"head\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}else if(_a=="summ"||_a=="summary"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"summ\"/>";_b+="</Rows>\n";_b+="<Band id=\"summary\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}else if(_a=="body"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"body\"/>";_b+="</Rows>\n";_b+="<Band id=\"body\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}_b+="</Format>\n";_b+="</Formats>\n";this.set_formats(_b);return 0;};_pGrid.appendContentsRow=function(_a,_b){if(!_a){_a="body";}if(typeof (_a)=="number"){if(_a== -1){_a="head";}else if(_a== -2){_a="summ";}else if(_a>=0){_a="body";}}_a=_a.toLowerCase();if(!this._curFormat){return this.__createDefualtColFormat(_a);}if(_b==undefined){_b=true;}if(_b==false){_a=this._getLastRowBand();}var _c=this._curFormat.appendContentsRow(_a,_b);var _d;if(_c>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();this._initSelect();if(_a=="body"||_a>=0){if(_d=this._curFormat._headrows){_c+=_d.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_d=this._curFormat._summrows){_c+=_d.length;}}}else if(_a=="summ"||_a=="summary"||_a== -2){if(_d=this._curFormat._headrows){_c+=_d.length;}if(this.summarytype!="top"&&this.summarytype!="lefttop"){if(_d=this._curFormat._bodyrows){_c+=_d.length;}}}}return _c;};_pGrid.appendContentsCol=function(_a,_b){if(!this._curFormat||(!isNaN(parseInt(_a))&&_a< -2)||this.getFormatRowCount()==0){return  -1;}this._autofitcol_rate=[];var _c=this._curFormat.appendContentsCol(_a,_b);if(_c>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _c;};_pGrid.insertContentsRow=function(_a,_b,_c){if(!this._curFormat){return  -1;}if(arguments.length==1){_b=_a;_a="body";}var _d=this._curFormat.insertContentsRow(_a,_b,_c);var _e;if(_d>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();if(_a=="body"||_a>=0){if(_e=this._curFormat._headrows){_d+=_e.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_e=this._curFormat._summrows){_d+=_e.length;}}}else if(_a=="summ"||_a=="summary"||_a== -2){if(_e=this._curFormat._headrows){_d+=_e.length;}if(this.summarytype!="top"&&this.summarytype!="lefttop"){if(_e=this._curFormat._bodyrows){_d+=_e.length;}}}}return _d;};_pGrid.insertContentsCol=function(_a,_b,_c){if(!this._curFormat){return  -1;}this._autofitcol_rate=[];var _d=this._curFormat.insertContentsCol(_a,_b,_c);if(_d>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _d;};_pGrid.deleteContentsRow=function(_a,_b,_c){if(!this._curFormat){return  -1;}if(arguments.length==1){_b=_a;_a="body";}var _d=this._curFormat.deleteContentsRow(_a,_b,_c);if(_d>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _d;};_pGrid.deleteContentsCol=function(_a,_b,_c){if(!this._curFormat){return  -1;}this._autofitcol_rate=[];var _d=this._curFormat.deleteContentsCol(_a,_b,_c);if(_d>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _d;};_pGrid.mergeContentsCell=function(_a,_b,_c,_d,_e,_f,_g){if(!this._curFormat){return  -1;}_g=nexacro._toBoolean(_g);var _h=this._curFormat.mergeContentsCell(_a,_b,_c,_d,_e,_f,_g);if(_h>=0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _h;};_pGrid.splitContentsCell=function(_a,_b,_c,_d,_e,_f){if(!this._curFormat){return  -1;}else{_f=nexacro._toBoolean(_f);var _g=this._curFormat.splitContentsCell(_a,_b,_c,_d,_e,_f);if(_g>0){this._clearTempBand();this._clearBindTypeFlag();this._recreate();}return _g;}};_pGrid.setBandProperty=function(_a,_b,_c){var _d=this._curFormat;if(!_d){return false;}_a=_a.toLowerCase();var _e=_d.setBandProperty(_a,_b,_c);if(_e){_a=_a.toLowerCase();var _f=_b.substr(0,13).toLowerCase();var _g;if(_f=="accessibility"){if(_a=="body"){_g=this._bodyBand;_g["set_"+_b](_c);}else if(_a=="head"){_g=this._headBand;_g["set_"+_b](_c);}else{_g=this._summBand;_g["set_"+_b](_c);}}else{if(_a=="body"){this._refreshBody(true);}else if(_a=="head"){this._refreshHead(true);}else{this._refreshSumm(true);}}}return (_e!=null);};_pGrid.getBandProperty=function(_a,_b){var _c=this._curFormat;if(!_c){return null;}_a=_a.toLowerCase();return _c.getBandProperty(_a,_b);};_pGrid.setCellProperty=function(_a,_b,_c,_d){var _e=this._curFormat;if(!_e){return false;}_a=_a.toLowerCase();var _f,_g,_h;var _i=_e.setCellProperty(_a,_b,_c,_d);if(_i){if(_c=="displaytype"&&_d=="treeitemcontrol"){this._setTreeCellinfo(_i);this._setTree(true);}else if(_c=="autosizecol"||_c=="autosizerow"){this._recreate_contents_all(true,false);}else if(_c=="text"||_c=="expr"){if(_a=="head"&&this._headAutoSize){this._recreate_contents_all(true,false);}else if(_a=="body"&&this._bodyAutoSize){this._recreate_contents_all(true,false);}else if((_a=="summ"||_a=="summary")&&this._summAutoSize){this._recreate_contents_all(true,false);}else{this._refreshCell(_a,_b, -1);}}else if(_c=="suppress"){if(_d!=0){this._is_use_suppress=true;}else{_i._clearSuppressInfo();_f=this._curFormat._bodycells;_g=_f?_f.length:0;this._is_use_suppress=false;for(var _j=0;_j<_g;_j++ ){_h=_f[_j];if(_h.suppress!=0){this._is_use_suppress=true;break;}}}this._refreshBody();}else if(_c=="suppressalign"&&this._is_use_suppress){this._destroyOverlayControls();this._destroySelectionControls();this._refreshBody();}else{if(_c=="displaytype"){this._changeDisplayer=true;}else if(_c=="wordwrap"){if(_d!="none"){if(_a=="head"){this._is_head_wordwrap=true;}if(_a=="body"){this._is_body_wordwrap=true;}if((_a=="summ"||_a=="summary")){this._is_head_wordwrap=true;}}else{if(_a=="body"){_f=this._curFormat._bodycells;_g=_f?_f.length:0;this._is_body_wordwrap=false;for(var _k=0;_k<_g;_k++ ){_h=_f[_k];if(_h.wordwrap!="none"){this._is_body_wordwrap=true;break;}}}if(_a=="head"){_f=this._curFormat._headcells;_g=_f?_f.length:0;this._is_head_wordwrap=false;for(var _l=0;_l<_g;_l++ ){_h=_f[_l];if(_h.wordwrap!="none"){this._is_head_wordwrap=true;break;}}}if((_a=="summ"||_a=="summary")){_f=this._curFormat._summcells;_g=_f?_f.length:0;this._is_summ_wordwrap=false;for(var _m=0;_m<_g;_m++ ){_h=_f[_m];if(_h.wordwrap!="none"){this._is_summ_wordwrap=true;break;}}}}}this._refreshCell(_a,_b, -1,_c);if(this._currentCellEditor){this._currentCellEditor._setProperty(true);}this._changeDisplayer=false;}}return (_i!=null);};_pGrid.getCellProperty=function(_a,_b,_c){var _d=this._curFormat;if(!_d){return null;}_a=_a.toLowerCase();return _d.getCellProperty(_a,_b,_c);};_pGrid.getCellPropertyValue=function(_a,_b,_c){var _d=this._curFormat;if(!_d){return undefined;}return _d.getCellPropertyValue(_a,_b,_c);};_pGrid.getSubCellPropertyValue=function(_a,_b,_c,_d){var _e=this._curFormat;if(!_e){return undefined;}return _e.getSubCellPropertyValue(_a,_b,_c,_d);};_pGrid.autoFitRow=function(_a){};_pGrid.autoFitCol=function(){var _a=this.autofittype;this.autofittype="col";if(this._curFormat){var _b;var _c=this._getBodyClientSize();var _d=this.getElement();_b=_c[0];if(_d){if(!this._is_created&&_b<=0){_b=_d.client_width;}this._curFormat._resetOrgColSize(true,this._autofitcol_rate,_b);}}var _e=this._applyAutofittype(true);this.autofittype=_a;return _e;};_pGrid.autoSizeRow=function(_a,_b,_c){if(!this._binddataset||!this._curFormat||_a==undefined){return false;}if(_c==undefined||_c==true){_a=this._getDataRow(_a);}var _d=false;var _e=false;var _f;var _g;var _h;var _i;var _j;var _k;this._autoSizeRowProc=true;if(_a>=0){this._is_variable_bodyrowsize=true;_i=this._curFormat._bodyrows;_j=_i.length;if(_b>=0){_f=(_a* _i.length)+_b;_g=this._rowSizeListSub[_f];_h=this._getMaxSubRowSize(_a,_b);if(_g!=_h){this._rowSizeListSub[_f]=_h;this._rowSizeList[_a]+=(_h-_g);_e=true;}}else{for(_k=0;_k<_j;_k++ ){_f=(_a* _i.length)+_k;_g=this._rowSizeListSub[_f];_h=this._getMaxSubRowSize(_a,_k);if(_g!=_h){this._rowSizeListSub[_f]=_h;this._rowSizeList[_a]+=(_h-_g);_e=true;}}}if(_e==true){this._updateRowSizeExtend();}this._recreate_contents_all(false,false);_d=true;}else if(_a== -1){_i=this._curFormat._headrows;_j=_i.length;if(_b>=0){_f=_b;_g=this._rowHeadListSub[_f];_h=this._getMaxSubRowSize(_a,_b);if(_g!=_h){this._rowHeadListSub[_f]=_h;this._rowHeadList[0]+=(_h-_g);_e=true;}}else{for(_k=0;_k<_j;_k++ ){_f=_k;_g=this._rowHeadListSub[_f];_h=this._getMaxSubRowSize(_a,_k);if(_g!=_h){this._rowHeadListSub[_f]=_h;this._rowHeadList[0]+=(_h-_g);_e=true;}}}if(_e==true){this._updateRowSizeExtend();}this._resizeBand();this._recreate_contents_all(false,false);_d=true;}else if(_a== -2){_i=this._curFormat._summrows;_j=_i.length;if(_b>=0){_f=_b;_g=this._rowSummListSub[_f];_h=this._getMaxSubRowSize(_a,_b);if(_g!=_h){this._rowSummListSub[_f]=_h;this._rowSummList[0]+=(_h-_g);_e=true;}}else{for(_k=0;_k<_j;_k++ ){_f=_k;_g=this._rowSummListSub[_f];_h=this._getMaxSubRowSize(_a,_k);if(_g!=_h){this._rowSummListSub[_f]=_h;this._rowSummList[0]+=(_h-_g);_e=true;}}}if(_e==true){this._updateRowSizeExtend();}this._resizeBand();this._recreate_contents_all(false,false);_d=true;}this._autoSizeRowProc=false;return _d;};_pGrid.autoSizeCol=function(_a,_b,_c){var _d;if(_c==undefined){_c=false;}if(_b== -1){var _e=this._curFormat._cols;var _f=_e.length;for(var _j=0;_j<_f;_j++ ){_d=this._getMaxColDataSizeBand(_j);if(_d>=0){this._setColSize(_a,_j,_d,false,true,true,(_j!=_f-1));}}}else if(_b>=0){if(_c){var _g=this._getColFixCnt("left");var _h=this._getColFixCnt("body");var _i=this._getColFixCnt("right");if(_a=="left"){if(_b>=_g){return;}}if(_a=="body"&&_b>=0){if(_b>=_h){return;}_b+=_g;}else if(_a=="right"){if(_b>=_i){return;}_b+=_g;_b+=_h;}}_d=this._getMaxColDataSizeBand(_b);if(_d>=0){this._setColSize(_a,_b,_d,false,true,true);}}};_pGrid.isDropdownCalendar=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="CalendarControl"){return this._currentCellEditor.isDropdown();}return false;};_pGrid.isDropdownCombo=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="ComboControl"){return this._currentCellEditor.isDropdown();}return false;};_pGrid.moveToNextCell=function(){return this._moveToCell("next",true,false,undefined,undefined,true);};_pGrid.moveToPrevCell=function(){return this._moveToCell("prev",true,false,undefined,undefined,true);};_pGrid.showEditor=function(_a){if(this._hide_applydata){nexacro._OnceCallbackTimer.callonce(this,function(){this.showEditor(_a);},50);return true;}var _b;if(_a===undefined){_a=true;}_a=nexacro._toBoolean(_a);if(this._showEditing==_a){return false;}if(_a){this.setFocus(false);_b=this._showEditor();}else{_b=this._hideEditor();}return _b;};_pGrid.dropdownCombo=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="ComboControl"){this._currentCellEditor.dropdown();return true;}return false;};_pGrid.dropdownCalendar=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="CalendarControl"){this._currentCellEditor.dropdown();return true;}return false;};_pGrid.getCurEditType=function(){var _a=this._getBodyCellInfo(this._selectinfo.curcell);if(_a){return _a._getAttrValue(_a.edittype,this._selectinfo.curdsrow);}return "";};_pGrid.getEditCaret=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a&&_a.getCaretPos){return _a.getCaretPos();}}return  -1;};_pGrid.getEditSelect=function(){var _a=this._currentCellEditor;if(_a&&_a.getSelect){return _a.getSelect();}};_pGrid.getEditSelectedText=function(){var _a=this._currentCellEditor;if(_a&&_a.getSelectedText){return _a.getSelectedText();}return "";};_pGrid.getEditText=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){return _a.text;}}};_pGrid.getEditingText=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){return _a._getEditingText();}}};_pGrid.getEditValue=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){return _a.value;}}};_pGrid.getEditingValue=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){return _a._getEditingValue();}}};_pGrid.setEditValue=function(_a){if(this._showEditing){var _b=this._currentCellEditor;if(_b){return _b.set_value(_a);}}};_pGrid.setEditingValue=function(_a){if(this._showEditing){var _b=this._currentCellEditor;if(_b){return _b._setEditingValue(_a);}}};_pGrid.setEditText=_pGrid.setEditValue;_pGrid.setEditCaret=function(_a){};_pGrid.setEditSelect=function(_a,_b){var _c=this._currentCellEditor;if(!_c){return false;}if(_a== -1){_c.setSelect(0,0);return true;}else{if(_c.setSelect){return _c.setSelect(_a,_b);}}return false;};_pGrid.setEditSelectedText=function(_a){};_pGrid.updateToDataset=function(){if(this._dsEventOccured){return false;}if(this._showEditing){var _a=this._currentCellEditor;if(_a){_a._setDataset(false,this._currentCellRow);return true;}return false;}return false;};_pGrid.setTreeStatus=function(_a,_b){if(!this._hasTree){return false;}_b=nexacro._toBoolean(_b);var _c=this._treeIndexes;var _d=_c.length;var _e=this._bodyBand._get_rows();if(_d<=_a||!_e||_e.length==0){return false;}var _f;if(_b){_f=this._setTreeState(_a,1,true);}else{_f=this._setTreeState(_a,0,true);}if(_f>0){return true;}return false;};_pGrid.getTreeStatus=function(_a){if(!this._hasTree){return  -1;}var _b=this._treeIndexes;var _c=_b.length;var _d=this._bodyBand._get_rows();if(_c<=_a||!_d||_d.length==0){return  -1;}var _e=_b[_a];var _f=this._treeStates[_e];var _g=this._treeCellinfo;var _h=_g._getEdittype(_e);if(_h=="tree"){if(_g.treestate._bindtype==1){var _i=_g.treestate._bindexpr;var _j=this._binddataset.getColumn(_e,_i);if(_j>1){_f=_j;}}}if(_f==2){_f++ ;}return _f;};_pGrid.getTreeChildCount=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return 0;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f,_g= -1;var _h=0;for(var _i=_c+1,_j=this._rowcount;_i<_j;_i++ ){_f=_d._getTreeLevel(_i);if(_e>=_f){break;}if(_g>=0){if(_g>=_f){if(_g>_f){_g=_f;}_h++ ;}}else{_h++ ;_g=_f;}}return _h;}return 0;};_pGrid.getTreeChildRow=function(_a,_b,_c){if(this._hasTree){var _d=_a;if(_c==undefined){_c=true;}else{_c=nexacro._toBoolean(_c);}if(_c===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return  -1;}var _e=this._treeCellinfo;var _f=_e._getTreeLevel(_d);var _g,_h= -1;var _i= -1;var _j=0;for(var _k=_d+1,_l=this._rowcount;_k<_l;_k++ ){_g=_e._getTreeLevel(_k);if(_f>=_g){break;}if(_h>=0){if(_h>=_g){if(_h>_g){_h=_g;}_j++ ;if(_b==_j){return _k;}_i=_k;}}else{_h=_g;if(_b==0){return _k;}_i=_k;}}if(_b== -1){return _i;}}return  -1;};_pGrid.getTreeParentRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return  -1;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f;for(var _g=_c-1;_g>=0;_g-- ){_f=_d._getTreeLevel(_g);if(_e>_f){return _g;}}}return  -1;};_pGrid.getTreeSiblingRow=function(_a,_b,_c){if(this._hasTree){var _d=_a;if(_b===undefined){_b=1;}if(_c==undefined){_c=true;}else{_c=nexacro._toBoolean(_c);}if(_c===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return  -1;}var _e=this._treeCellinfo;var _f=_e._getTreeLevel(_d);var _g;var _h=0;var _i,_j;if(_b<0){for(_i=_d-1;_i>=0;_i-- ){_g=_e._getTreeLevel(_i);if(_f>_g){break;}else if(_f==_g){_h-- ;if(_b==_h){return _i;}}}}else if(_b>0){for(_i=_d+1,_j=this._rowcount;_i<_j;_i++ ){_g=_e._getTreeLevel(_i);if(_f>_g){break;}else if(_f==_g){_h++ ;if(_b==_h){return _i;}}}}else{return _d;}}return  -1;};_pGrid.getTreePath=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return "";}var _d=this._treeCellinfo;var _e=[];var _f=0;while(_c>=0){_e[_f]=_d._getValue(_c);_c=this.getTreeParentRow(_c);_f++ ;}var _g="";for(_f=_e.length-1;_f>=0;_f-- ){_g+=_e[_f];if(_f>0){_g+=this.treepathdelimiter;}}return _g;}return "";};_pGrid.getTreeRow=function(_a){if(this._hasTree){if(typeof (_a)=="string"){var _b=_a;var _c=this._rowcount;var _d;_a= -1;for(var _g=0;_g<_c;_g++ ){_d=this.getTreePath(_g,true);if(_d==_b){_a=_g;break;}}}if(_a>=0){var _e=this._treeIndexes;var _f=_e.length;for(var _h=0;_h<_f;_h++ ){if(_e[_h]==_a){return _h;}}}}return  -1;};_pGrid.getDatasetRow=function(_a){if(_a>=0){if(this._hasTree){if(this._treeIndexes.length>_a){return this._treeIndexes[_a];}}else{if(this._rowcount>_a){return _a;}}}return  -1;};_pGrid.isTreeLeafRow=function(_a,_b){if(this._hasTree){var _c=this.getTreeChildCount(_a,_b);if(_c==0){if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}var _d=_a;if(_b===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return false;}return true;}}return false;};_pGrid.isTreeRootRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f=_d._getTreeStartLevel(_c);if(_f==_e){return true;}}return false;};_pGrid.isTreeExpandedRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}while(_c>=0){_c=this.getTreeParentRow(_c);if(_c<0){break;}var _d=this._treeIndexes;var _e=_d.length;if(_c>=0&&_e>0){var _f=this._treeStates[_c];if(_f==0){return false;}}}return true;}return false;};_pGrid.isTreeCollapsedRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}while(_c>=0){_c=this.getTreeParentRow(_c);if(_c<0){break;}var _d=this._treeIndexes;var _e=_d.length;if(_c>=0&&_e>0){var _f=this._treeStates[_c];if(_f==0){return true;}}}}return false;};_pGrid.getCsvData=function(){};_pGrid.getHeadValue=function(_a){var _b=this._curFormat;if(_b&&_b._headcells&&_a>=0&&_b._headcells.length>_a){var _c=this._curFormat._headcells[_a];if(_c){return _c._getValue(this._currentDSrow);}}return null;};_pGrid.getSummValue=function(_a){var _b=this._curFormat;if(_b&&_b._summcells&&_a>=0&&_b._summcells.length>_a){var _c=this._curFormat._summcells[_a];if(_c){return _c._getValue(this._currentDSrow);}}return null;};_pGrid.getBindCellIndex=function(_a,_b){var _c=this._curFormat;if(!_c){return  -1;}_a=_a.toLowerCase();var _d;var _e;if(_b){if(_a=="head"&&_c._headcells){var _f=_c._headcells;var _g=_f.length;for(_e=0;_e<_g;_e++ ){_d=_f[_e];if(_d.text._bindexpr==_b){return _e;}}}else if(_a=="body"&&_c._bodycells){var _h=_c._bodycells;var _i=_h.length;for(_e=0;_e<_i;_e++ ){_d=_h[_e];if(_d.text._bindexpr==_b){return _e;}}}else if((_a=="summ"||_a=="summary")&&_c._summcells){var _j=_c._summcells;var _k=_j.length;for(_e=0;_e<_k;_e++ ){_d=_j[_e];if(_d.text._bindexpr==_b){return _e;}}}}return  -1;};_pGrid.isAboveSelected=function(){};_pGrid.mergeCell=function(_a,_b,_c,_d,_e,_f){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<11){return false;}return this._setVirtualMerge(_a,_c,_e,_b,_d,_f,false);};_pGrid.splitCell=function(_a,_b,_c,_d,_e,_f){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<11){return false;}return this._setVirtualMerge(_a,_c,_e,_b,_d,_f,true);};_pGrid._absolutelyResetScrollPos=function(_a){var _b=this._headBand;var _c=this._bodyBand;var _d=this._summBand;if(this._control_element){this._control_element._reset_scrollpos=_a;}if(_b&&_b._control_element){_b._control_element._reset_scrollpos=_a;}if(_c&&_c._control_element){_c._control_element._reset_scrollpos=_a;}if(_d&&_d._control_element){_d._control_element._reset_scrollpos=_a;}};_pGrid._no_use_onscroll_callback_after=false;_pGrid._moverow_frame_df=0;_pGrid._moverow_frame=_pGrid._moverow_frame_df;_pGrid._float_updown=false;_pGrid._float_center=false;_pGrid._float_move=false;_pGrid._floating_row_addsize=2;_pGrid._floating_row_border="1px solid gray";_pGrid._floating_row_shadow="1px 1px 12px gray";_pGrid._floating_gap=3;_pGrid._createHighlightRow=function(){if(!this._use_blindscroll){return;}var _a=this._bodyBand;if(!_a){return;}if(!this._covercontrol){this._covercontrol=new nexacro._GridCoverControl(this._bodyBand,this);this._covercontrol.createComponent();}var _b;if(!this._highlight_row_main){_b=(this._float_center&&!this._float_updown)?((_a._getClientHeight()-(this._bodyrowheight+this._floating_row_addsize))/2):this._floating_gap;var _c=this._highlight_row_main=new nexacro._GridRowControl(_a,this._floating_gap,_b+this._fixed_height,null,this._bodyrowheight+this._floating_row_addsize,0,false,true,this._floating_gap);_c.set_border(this._floating_row_border);_c.set_boxShadow(this._floating_row_shadow);_c.set_visible(false);_c._updateAll();_c.createComponent();}if(!this._float_move){if(this._float_updown){if(!this._highlight_row_sublast){var _d=this._highlight_row_sublast=new nexacro._GridRowControl(_a,this._floating_gap,null,null,this._bodyrowheight+this._floating_row_addsize,0,false,true,this._floating_gap,this._floating_gap-this._fixed_height);_d.set_border(this._floating_row_border);_d.set_boxShadow(this._floating_row_shadow);_d.set_visible(false);_d._updateAll();_d.createComponent();}if(this._float_center){if(!this._highlight_row_subcenter){_b=((_a._getClientHeight()-(this._bodyrowheight+this._floating_row_addsize))/2);var _e=this._highlight_row_subcenter=new nexacro._GridRowControl(_a,this._floating_gap,_b+this._fixed_height,null,this._bodyrowheight+this._floating_row_addsize,0,false,true,this._floating_gap);_e.set_border(this._floating_row_border);_e.set_boxShadow(this._floating_row_shadow);_e.set_visible(false);_e._updateAll();_e.createComponent();}}}}};_pGrid._updateHighlightrowPos=function(){if(!this._bodyBand){return;}if(!this._float_move){var _a;if(this._highlight_row_main){_a=(this._float_center&&!this._float_updown)?((this._bodyBand._getClientHeight()-(this._bodyrowheight+this._floating_row_addsize))/2):this._floating_gap;this._highlight_row_main._setTop(_a+this._fixed_height);this._highlight_row_main._update_position();}if(this._highlight_row_sublast){this._highlight_row_sublast._setBottom(this._floating_gap-this._fixed_height);this._highlight_row_sublast._update_position();}if(this._highlight_row_subcenter){_a=(this._bodyBand._getClientHeight()-(this._bodyrowheight+this._floating_row_addsize))/2+this._fixed_height;this._highlight_row_subcenter._setTop(_a);this._highlight_row_subcenter._update_position();}}};_pGrid._destroyHighlightRow=function(){if(this._highlight_row_main){this._highlight_row_main.destroy();}if(this._highlight_row_sublast){this._highlight_row_sublast.destroy();}if(this._highlight_row_subcenter){this._highlight_row_subcenter.destroy();}if(this._covercontrol){this._covercontrol.destroy();}this._covercontrol=null;this._highlight_row_main=null;this._highlight_row_sublast=null;this._highlight_row_subcenter=null;};_pGrid._setBlindBody=function(_a){var _b=this._bodyBand;if(this._covercontrol&&_b){if(_a){this._covercontrol._coverOn(0);}else{this._covercontrol._coverOff(0);}}};_pGrid._getRowIdxInClient=function(_a){var _b=this.rowcount-1;var _c=this._toprowpos[0];var _d=this._toprowpos[1];var _e=this._disprowcnt;var _f=this._bodyrowheight,_g;var _h;if(!this._is_variable_bodyrowsize){_g=_d-_f+this._fixed_height;for(_h=0;_h<_e;_h++ ){_g+=_f;if(_a<_g){_c+=_h;break;}}}else{var _i=_c;var _j=this._rowSizeList;var _k;_g=_d-_j[this._getDataRow(_i)]+this._fixed_height;for(_h=0;_h<_e;_h++ ){_k=_j[this._getDataRow(_i+_h)];_g+=_k;if(_a<_g){_c+=_h;break;}}}if(_c>_b){_c=_b;}return _c;};_pGrid._floatingScrollRows_callback=function(_a){var _b=this._control_element;var _c=_b.vscroll_limit;var _d=this._vscrollmng._pos;var _e=this._bodyBand;if(_d>_c){_d=_c;}this._last_scroll_top=_b.scroll_top;this._toprowpos=this._getScreenTopRowPos(_d);this._bottomrowpos=this._getScreenBottomRowPos(_d);this._setBlindBody(true);var _f;var _g=this._disprowcnt;var _h=this._highlight_row_main;var _i;if(this._float_move){var _j=(_d)?this._vscrollmng._pos/this._vscrollmng._max:0;var _k=this._bodyrowheight;var _l=_e._getClientHeight();if(_d<_c){_i=((_l-(_k+this._floating_row_addsize))* _j)+this._fixed_height;_f=this._getRowIdxInClient(_i);}else{_i=_l-(_k+this._floating_row_addsize)+this._fixed_height;_f=this.rowcount-1;}_h._changeRow(_f);_h._updateAll(undefined,undefined,true);_h.set_top(_i);_h._control_element.setElementHScrollPos(this._getScrollLeft());_h.set_visible(true);}else{var _m=0;_f=this._toprowpos[0];if(this._float_center){_i=(_e._getClientHeight()-(this._bodyrowheight+this._floating_row_addsize))/2+this._fixed_height;_m=this._getRowIdxInClient(_i)-_f;}if(this._float_updown){_h._changeRow(_f);_h._updateAll(undefined,undefined,true);_h._control_element.setElementHScrollPos(this._getScrollLeft());_h.set_visible(true);var _n=this._highlight_row_sublast;_n._changeRow(_f+_g-1);_n._updateAll(undefined,undefined,true);_n._control_element.setElementHScrollPos(this._getScrollLeft());_n.set_visible(true);if(this._float_center){var _o=this._highlight_row_subcenter;_o._changeRow(_f+_m);_o._updateAll(undefined,undefined,true);_o._control_element.setElementHScrollPos(this._getScrollLeft());_o.set_visible(true);}}else{_h._changeRow(_f+_m);_h._updateAll(undefined,undefined,true);_h._control_element.setElementHScrollPos(this._getScrollLeft());_h.set_visible(true);}}if(!_a){this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll_float.start();}}else{this._aniframe_rowscroll.stop();this._scroll_vpos_queue=[];}};_pGrid._adjustGridScrollRows_callback_end=function(_a){if(this._aniframe_rowscroll_end._skipscrolltask&&this._isflingend){this._aniframe_rowscroll_end._skipscrolltask=undefined;return;}var _b=this._control_element;var _c=_b.vscroll_limit;var _d=this._vscrollmng._pos;var _e=this._bodyBand;if(_d>_c){_d=_c;}if(this._aniframe_rowscroll_float){this._aniframe_rowscroll_float.stop();}this._aniframe_rowscroll_end.stop();if(!_a&&this._applytask){this._applytask.destroy();this._applytask=null;}this._last_scroll_top=_b.scroll_top;this._toprowpos=this._getScreenTopRowPos(_d);this._bottomrowpos=this._getScreenBottomRowPos(_d);this._scroll_vpos_queue=[];if(this._isLazyAutoVscroll()){this._resetRowSizeListBodyDisplay();_e._update_rows=_e._matrix._adjustScrollRows(_d,true,undefined,undefined,true);}else{_e._update_rows=_e._matrix._adjustScrollRows(_d,true);}if(this._use_blindscroll){this._setBlindBody(false);if(this._highlight_row_main){this._highlight_row_main.set_visible(false);}if(this._highlight_row_sublast){this._highlight_row_sublast.set_visible(false);}if(this._highlight_row_subcenter){this._highlight_row_subcenter.set_visible(false);}}_e._on_refresh_rows(true,undefined,false);this._no_use_onscroll_callback_after=true;if(this._is_performance_scroll){this._absolutelyResetScrollPos(true);_b.setElementVScrollPos(_d);this._absolutelyResetScrollPos(false);}else{_b.setElementVScrollPos(_d);}if(this._isLazyAutoVscroll()){this._resetScrollMax();}this._updateSelector("vscroll",_d-this._last_scroll_top);this._adjustOverlayControls(false);if(this._is_variable_bodyrowsize){_e._clearScrollDisplayRows();}if(this._isflingend){nexacro._OnceCallbackTimer.callonce(this,function(){this._isflingend=undefined;},200);}};_pGrid._adjustGridScrollRows_callback=function(_a){var _b=this._control_element;var _c=_b.vscroll_limit;var _d=this._vscrollmng._pos;var _e=this._bodyBand;if(_d>_c){_d=_c;}this._last_scroll_top=_b.scroll_top;this._toprowpos=this._getScreenTopRowPos(_d);this._bottomrowpos=this._getScreenBottomRowPos(_d);if(!_a){if(this._moverow_frame>0){if(_e._update_rows.length>0){this._aniframe_rowscroll.start();}else{this._scroll_vpos_queue=[];}}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}}else{this._aniframe_rowscroll.stop();this._scroll_vpos_queue=[];}_e._update_rows=_e._matrix._adjustScrollRows(_d,false,this._moverow_frame);_e._on_refresh_rows(true,undefined,true);this._no_use_onscroll_callback_after=true;_b.setElementVScrollPos(_d);this._updateSelector("vscroll",_d-this._last_scroll_top);this._adjustOverlayControls(false);};_pGrid._scroll_interval=0;_pGrid._scroll_threshold=1000;_pGrid._scroll_end_divider=3;_pGrid._use_enhance_performance_scrolling=false;_pGrid._scroll_frame_interval=10;_pGrid._is_vscroll_frame_ticking=false;_pGrid._adjustGridScrollRows_callback_onscroll_after2=function(_a){var _b=this._bodyBand;var _c=this._control_element;var _d=_c.vscroll_limit;var _e=this._vscrollmng._pos;if(_e>_d){_e=_d;}if(_a!==undefined){_b._rowscroll_info=_b._matrix._getScrollRowsInfo(_e,this._moverow_frame,_b._rowscroll_info);this._toprowpos=_b._rowscroll_info.toprow;this._bottomrowpos=_b._rowscroll_info.bottomrow;}var _f=_b._matrix._rows.length;var _g=_b._rowscroll_info;var _h=_g.scrollmode;var _i=(_h==0?_f:_g.framecnt* (1+(_g.skipped|0)));var _j=_g.starttime;var _k=_g.timestamp;var _l=(performance?performance.now():(new Date()));if(_a==undefined){if(_h>0&&_j!=_k&&(_l-_k)<this._scroll_interval){_g.skipped=(_g.skipped|0)+1;this._aniframe_rowscroll.start();return;}_k=_l;this._is_vscroll_frame_ticking=false;}var _m=false;if(!this._is_vscroll_frame_ticking){_m=_b._matrix._adjustScrollRows2(_e,true,_i);_b._on_refresh_rows(true,undefined,true);}_l=(performance?performance.now():(new Date()));if(this._use_enhance_performance_scrolling){var _n=_l,_o=0;while(_m&&(_l-_k+_o)<=this._scroll_frame_interval){_m=_b._matrix._adjustScrollRows2(_e,true,_i);_b._on_refresh_rows(true,undefined,true);_n=(performance?performance.now():(new Date()));_o=_n-_l;_l=_n;}}_g.timestamp=_l;if(_m){if(!this._is_vscroll_frame_ticking){this._aniframe_rowscroll.start();this._is_vscroll_frame_ticking=true;}}this._adjustOverlayControls(false);};_pGrid._adjustGridScrollRows_callback_onscroll_after=function(_a){if(this._no_use_onscroll_callback_after==true){if(this._is_performance_scroll){this._aniframe_rowscroll.stop();}this._is_vscroll_frame_ticking=false;this._no_use_onscroll_callback_after=false;return;}if(this._use_eachscroll){return this._adjustGridScrollRows_callback_onscroll_after2(_a);}if(_a==undefined){var _b=this._bodyBand;_a=this._vscrollmng._pos;var _c=this._control_element;var _d=_c.vscroll_limit;if(_a>_d){_a=_d;}_b._update_rows=_b._matrix._adjustScrollRows(_a,true,this._moverow_frame);if(this._moverow_frame>0&&_b._update_rows.length>0){this._aniframe_rowscroll.start();}_b._on_refresh_rows(true,undefined,true);this._adjustOverlayControls(false);this._is_vscroll_frame_ticking=false;}else{var _b=this._bodyBand;_a=this._vscrollmng._pos;var _c=this._control_element;var _d=_c.vscroll_limit;if(_a>_d){_a=_d;}this._toprowpos=this._getScreenTopRowPos(_a);this._bottomrowpos=this._getScreenBottomRowPos(_a);if(!this._is_vscroll_frame_ticking){this._aniframe_rowscroll.start();this._is_vscroll_frame_ticking=true;}}};_pGrid._adjustGridScrollRows_callback_onscroll=function(){this._no_use_onscroll_callback_after=false;var _a=this._vscrollmng._pos;var _b=this._control_element;var _c=_b.vscroll_limit;if(_a>_c){_a=_c;}this._last_scroll_top=_b.scroll_top;_b.setElementVScrollPos(_a);this._updateSelector("vscroll",_a-this._last_scroll_top);};_pGrid._callback_onvscroll=_pGrid._adjustGridScrollRows_callback_onscroll_after;_pGrid._applytask=null;_pGrid._startApplyTimer=function(_a,_b){var _c=this;if(this._applytask){this._applytask.destroy();this._applytask=null;}this._applytask=new nexacro._CallbackTimer(this,function(_d){return _c._callbackApplyTimer(_a);},_b);this._applytask.start();};_pGrid._callbackApplyTimer=function(_a){if(_a=="v"){this._adjustGridScrollRows_callback_end(true);}else if(_a=="h"){this._adjustGridScrollCols_callback_end(true);}this._applytask.destroy();this._applytask=null;};_pGrid._is_over_scroll=0;_pGrid._on_beforescroll=function(_a,_b,_c,_d,_e,_f){var _g=Math.abs(_a-_c);var _h=Math.abs(_b-_d);if(_g<_h){if(_b>_d||(_b<_d&&this._vscrollmng._orgmax!=_b)){this._vscrollmng.setPixelPos(_d,_f,true,true);this.on_vscroll(_d,_e,_f);if(this._use_eachscroll||this._isLazyAutoVscroll()){this._startApplyTimer("v",(nexacro._Browser=="IE")?1000:500);}}}else if(_g>_h){if(_a>_c||(_a<_c&&this._hscrollmng._orgmax!=_a)){this._hscrollmng.setPos(_c,_f,true);this.on_hscroll(_c,_e,_f);if(nexacro._Browser=="IE"){if(this._use_eachscroll){this._startApplyTimer("h",1000);}}else{if(this._is_performance_scroll){this._startApplyTimer("h",10);}}}}else if(_e=="trackend"||_e=="trackstart"){if(_f=="vertical"){this.on_vscroll(_d,_e,_f);}else if(_f=="horizontal"){this.on_hscroll(_c,_e,_f);}}};_pGrid.on_vscroll=function(_a,_b,_c){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return;}this._is_over_scroll=0;var _d=this._vscrollmng;if(!_d){return;}if(this._scrollpixel!="all"){if(_d._pos>_d._orgmax){this._is_over_scroll=_d._pos-_d._orgmax;}}var _e=this._control_element;if(!_e||!this._bodyBand||_b=="trackstart"||_b=="tracklastover"||_b=="trackfirstover"){return;}if(_b=="trackend"||_b=="first"||_b=="last"){this._procRefreshDOM=true;}this._aniframe_rowscroll_end._skipscrolltask=true;this._aniframe_rowscroll_end.stop();var _f;var _g;if(this._is_performance_scroll&&(!this._use_blindscroll||(_c!="fling"&&_b!="track"&&_b!="trackfirst"&&_b!="tracklast"))){if(_b=="trackend"){this._adjustGridScrollRows_callback_end();}else{this._adjustGridScrollRows_callback_onscroll();}}else if(nexacro._isTouchInteraction&&nexacro._Browser!="Runtime"){if(_c=="mousewheel_v"){this._aniframe_rowscroll_end.start();}else if(this._use_blindscroll&&_c=="fling"){_g=(this._bodyrowheight+this._floating_row_addsize)+this._floating_gap* 2;_f=this._scroll_vpos_queue.push(_a);if(_f==1){if(this._bodyBand._getClientHeight()<_g){this._aniframe_rowscroll_end.start();}else{this._aniframe_rowscroll_float.start();}}}else{if(this._use_blindscroll||!_c){this._aniframe_rowscroll_end.start();}else{this._adjustGridScrollRows_callback_onscroll();}}}else{if(_b=="track"||_b=="trackfirst"||_b=="tracklast"){_f=this._scroll_vpos_queue.push(_a);if(_f==1){if(this._use_blindscroll){_g=(this._bodyrowheight+this._floating_row_addsize)+this._floating_gap* 2;if(this._bodyBand._getClientHeight()<_g){this._aniframe_rowscroll.start();}else{this._aniframe_rowscroll_float.start();}}else{this._aniframe_rowscroll.start();}}}else if(_c=="fling"){if(this._use_blindscroll){_g=(this._bodyrowheight+this._floating_row_addsize)+this._floating_gap* 2;if(this._bodyBand._getClientHeight()<_g){this._adjustGridScrollRows_callback(true);}else{this._floatingScrollRows_callback(true);}}else{this._adjustGridScrollRows_callback(true);}}else if(_b!="trackstart"){this._adjustGridScrollRows_callback_end();}}this._procRefreshDOM=undefined;return true;};_pGrid._adjustGridScrollCols_callback=function(){var _a=this._control_element;var _b=this._hscrollmng._pos;var _c=_a.hscroll_limit;if(_b>_c){_b=_c;}this._scroll_hpos_queue.pop();if(this._scroll_hpos_queue.length>0){this._aniframe_colscroll.start();}if(!nexacro._isTouchInteraction){this._last_scroll_left=_a.scroll_left;this._control_element.setElementHScrollPos(_b);this._updateSelector("hscroll",_b-this._last_scroll_left);}var _d=_b-this._last_scroll_left;if(this._bodyBand){this._bodyBand._matrix._adjustColsDisplay(false,true,undefined,_d);}if(this._headBand){this._headBand._matrix._adjustColsDisplay(false,true,undefined,_d);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(false,true,undefined,_d);}this._adjustOverlayControls(false);};_pGrid._adjustGridScrollCols_callback2=function(_a){if(this._headBand){this._headBand._matrix._adjustColsDisplay2(_a);}if(this._bodyBand){this._bodyBand._matrix._adjustColsDisplay2(_a);}if(this._summBand){this._summBand._matrix._adjustColsDisplay2(_a);}this._adjustOverlayControls(false);};_pGrid._adjustGridScrollCols_callback3=function(_a,_b,_c,_d,_e){var _f=(performance?performance.now():(new Date()));var _g,_h=1;if(this._is_performance_scroll){if(_e<0){this._bodyBand._matrix._adjustColsScrollEnd(_b,_c);return;}var _i=_f-_d;if(_i>this._scroll_threshold){_h=(_c-_b)/this._scroll_end_divider;}var _j,_k;if(_a>0){_j=_e;_k=_c;}else if(_a<0){_j=_b;_k=_e;}if(this._headBand){_g=this._headBand._matrix._adjustColsScroll(_a,_j,_k,_h);}if(this._summBand){_g=this._summBand._matrix._adjustColsScroll(_a,_j,_k,_h);}if(this._bodyBand){_g=this._bodyBand._matrix._adjustColsScroll(_a,_j,_k,_h);}var _l=false;if(_a>0){_g+=1;_l=(_g<=_c);}else if(_a<0){_g-=1;_l=(_g>=_b);}if(_l){this._aniframe_colscroll.start();}else{if(this._bodyBand){_g= -1;this._aniframe_colscroll.start();}}}else{if(this._headBand){this._headBand._matrix._adjustColsDisplay2(_a);}if(this._bodyBand){this._bodyBand._matrix._adjustColsDisplay2(_a);}if(this._summBand){this._summBand._matrix._adjustColsDisplay2(_a);}}this._adjustOverlayControls(false);return _g;};_pGrid._adjustGridScrollCols_callback_end=function(){var _a=this._hscrollmng._pos;var _b=this._control_element;var _c=_b.hscroll_limit;if(_a>_c){_a=_c;}this._scroll_hpos_queue=[];this._aniframe_colscroll_end.stop();var _d=_a-this._last_scroll_left;this._last_scroll_left=this._control_element.scroll_left;this._control_element.setElementHScrollPos(_a);this._updateSelector("hscroll",_a-this._last_scroll_left);if(this._bodyBand){this._bodyBand._matrix._adjustColsDisplay(false,true,undefined,_d);}if(this._headBand){this._headBand._matrix._adjustColsDisplay(false,true,undefined,_d);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(false,true,undefined,_d);}this._adjustOverlayControls(false);};_pGrid._each_adjustGridScrollCols_callback=function(_a,_b,_c,_d){var _e=(performance?performance.now():(new Date()));var _f=(_b>0?_c:(_b<0?_d:_c));return function(){_f=_a._adjustGridScrollCols_callback3(_b,_c,_d,_e,_f);};};_pGrid._adjustGridScrollCols_callback_onscroll_after=function(_a,_b,_c,_d){if(!this._is_performance_scroll){return;}if(this._last_scroll_left!=_b){this._last_scroll_left=_b;if(this._use_eachscroll){this._aniframe_colscroll=new nexacro.AnimationFrame(this,this._each_adjustGridScrollCols_callback(this,_a,_c,_d));this._aniframe_colscroll.start();}else{this._aniframe_colscroll=new nexacro.AnimationFrame(this,this._adjustGridScrollCols_callback2(_a));this._aniframe_colscroll.start();}}};_pGrid._adjustGridScrollCols_callback_onscroll=function(){var _a=this._control_element;this._no_use_onscroll_callback_after=false;var _b=_a.hscroll_limit;var _c=this._hscrollmng._pos;if(_c>_b){_c=_b;}this._last_scroll_left=_a.scroll_left;_a.setElementHScrollPos(_c);this._updateSelector("hscroll",_c-this._last_scroll_left);};_pGrid.on_hscroll=function(_a,_b,_c){if(this.scrolltype=="none"||this.scrolltype=="vertical"){return;}var _d=this._control_element;if(!_d||_b=="tracklastover"||_b=="trackfirstover"){return;}if(_b=="trackend"||_b=="first"||_b=="last"){this._procRefreshDOM=true;}if(!this._aniframe_colscroll){var _e=this;this._scroll_hpos_queue=[];this._aniframe_colscroll=new nexacro.AnimationFrame(this,function(){_e._adjustGridScrollCols_callback();});this._aniframe_colscroll_end=new nexacro.AnimationFrame(this,function(){_e._adjustGridScrollCols_callback_end();});}else{this._aniframe_colscroll_end.stop();}if(this._is_performance_scroll){this._aniframe_colscroll.stop();if(_b=="trackend"){this._adjustGridScrollCols_callback_end();}else{this._adjustGridScrollCols_callback_onscroll();}}else{if(_b=="track"||_b=="trackfirst"||_b=="tracklast"){var _f=this._scroll_hpos_queue.push(_a);if(_f==1){this._aniframe_colscroll.start();}}else if(_b!="trackstart"){this._adjustGridScrollCols_callback_end();}}this._procRefreshDOM=undefined;return true;};_pGrid._use_blindscroll=false;_pGrid.set_fastvscrolltype=function(_a){if(this.fastvscrolltype!=_a){switch(_a){case "default":this._float_updown=false;this._float_center=false;this._use_blindscroll=false;this._float_move=false;break;case "centerdisplay":this._float_updown=false;this._float_center=true;this._use_blindscroll=true;this._float_move=false;break;case "topdisplay":this._float_updown=false;this._float_center=false;this._use_blindscroll=true;this._float_move=false;break;case "topbottomdisplay":this._float_updown=true;this._float_center=false;this._use_blindscroll=true;this._float_move=false;break;case "topcenterbottomdisplay":this._float_updown=true;this._float_center=true;this._use_blindscroll=true;this._float_move=false;break;case "trackbarfollow":this._float_updown=false;this._float_center=false;this._use_blindscroll=true;this._float_move=true;break;default:return;}this.fastvscrolltype=_a;this.on_apply_fastvscrolltype();}};_pGrid.on_apply_fastvscrolltype=function(){this._destroyHighlightRow();this._createHighlightRow();if(!this._bodyBand){return;}var _a=this;if(this._use_blindscroll&&!this._aniframe_rowscroll_float){this._aniframe_rowscroll_float=new nexacro.AnimationFrame(this,function(){_a._floatingScrollRows_callback();});}};_pGrid._is_performance_scroll=false;_pGrid._use_eachscroll=false;_pGrid.set_scrolldisplaymode=function(_a){if(this.scrolldisplaymode!=_a){switch(_a){case "normal":case "page":case "line":this.scrolldisplaymode=_a;this.on_apply_scrolldisplaymode();break;}}};_pGrid.on_apply_scrolldisplaymode=function(){if(nexacro._Browser!="Runtime"){switch(this.scrolldisplaymode){case "normal":this._use_eachscroll=false;this._moverow_frame=this._moverow_frame_df;this._is_performance_scroll=false;this._use_enhance_performance_scrolling=false;break;case "page":this._use_eachscroll=false;this._moverow_frame=this._moverow_frame_df;this._is_performance_scroll=true;this._use_enhance_performance_scrolling=false;break;case "line":this._use_eachscroll=true;this._moverow_frame=1;this._is_performance_scroll=true;this._use_enhance_performance_scrolling=true;break;default:return;}}if(this._aniframe_rowscroll){this._aniframe_rowscroll.destroy();this._aniframe_rowscroll=null;}if(this._aniframe_colscroll){this._aniframe_colscroll.destroy();this._aniframe_colscroll=null;}var _a=this;if(!this._aniframe_rowscroll_end){this._aniframe_rowscroll_end=new nexacro.AnimationFrame(this,function(){_a._adjustGridScrollRows_callback_end();});}if(this._is_performance_scroll||(nexacro._isTouchInteraction&&nexacro._Browser!="Runtime")){if(this._bodyBand){this._bodyBand._control_element._setOnScrollCallbackTarget(this);}this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_a._adjustGridScrollRows_callback_onscroll_after();});}else{this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_a._adjustGridScrollRows_callback();});}};_pGrid._isWheelScrollable=function(_a){var _b=this._control_element;if(!_b){return false;}var _c=_b.scroll_top;var _d=_b.container_maxheight;var _e=this._getBodyClientSize()[1];if((_c+_e>=_d&&_a<0)||(_c==0&&_a>0)){return false;}return true;};_pGrid._wheel_delta=120;_pGrid._setVScrollDefaultAction=function(_a){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}var _b=Math.abs(_a);var _c,_d;var _e=this._vscrollmng;var _f=_e.pos;var _g=Math.floor(_b/this._wheel_delta);if(_g==0){_g=1;}var _h=(this.wheelscrollrow* _g);if(this._scrollpixel!="all"){if(_a<0){if(_e.max>_e.pos){_c=_e.pos+_h;}else{_e.setPixelPos(_e._pos-_a,"mousewheel_v");if(_f!=_e.pos){return true;}return false;}}else{if(_e.min<_e.pos){_c=_e.pos-_h;}else{_e.setPixelPos(_e._pos-_a,"mousewheel_v");if(_f!=_e.pos){return true;}return false;}}}else{if(_a<0){_c=_e._scroll_reverse_convert(_e.pos,true)[0];_d=_e._scroll_reverse_convert(_e.max,true)[0];if(_d>_c){_c+=_h;}else{_e.setPixelPos(_e._pos-_a,"mousewheel_v");if(_f!=_e.pos){return true;}return false;}}else{_c=_e._scroll_reverse_convert(_e.pos,true)[0];_c-=_h;}}_e.setRowPos(_c+this._getFixRowCnt(),"mousewheel_v");if(_f!=_e.pos){return true;}return false;};_pGrid._makeEventInfo=function(_a,_b,_c){var _d={cell: -1,col: -1,row: -9,subrow: -1,mergecell: -1,mergecol: -1,mergerow: -1,pivotindex: -9};if(_a&&_a._type_name=="GridCellControl"){_d.cell=_a._cellidx;_d.col=_a._refinfo._col;_d.row=this._getDataRow(_a._rowidx);_d.subrow=_a._refinfo._row;if(_b){_d.col+=_b._refinfo._col;_d.mergecell=_b._cellidx;_d.mergecol=_b._refinfo._col;_d.mergerow=_b._refinfo._row;}}else{var _e=this._findBandObj(_c);if(_e){if(_e.id=="head"){_d.row= -1;}else if(_e.id=="summary"){_d.row= -2;}}}return _d;};_pGrid.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(this._aniframe_colscroll_end){this._aniframe_colscroll_end.start();}if(this._aniframe_rowscroll_end){this._aniframe_rowscroll_end.start();}this._applyResizer();return nexacro.Component.prototype.on_fire_sys_onslideend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pGrid.on_fire_sys_onflingend=function(){if(this._aniframe_colscroll_end){this._aniframe_colscroll_end.start();}if(this._aniframe_rowscroll_end){this._aniframe_rowscroll_end._skipscrolltask=undefined;this._aniframe_rowscroll_end.start();}this._isflingend=true;return true;};_pGrid._on_nodataareaclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}if(this.enable){this.on_fire_onnodataareaclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}return true;};_pGrid.on_fire_onnodataareaclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onnodataareaclick&&this.onnodataareaclick._has_handlers){var _n=new nexacro.MouseEventInfo(_k,"onnodataareaclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onnodataareaclick._fireEvent(this,_n);}return true;};_pGrid._on_nodataareadblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}if(this.enable){this.on_fire_onnodataareadblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}return true;};_pGrid.on_fire_onnodataareadblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onnodataareadblclick&&this.onnodataareadblclick._has_handlers){var _n=new nexacro.MouseEventInfo(_k,"onnodataareadblclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onnodataareadblclick._fireEvent(this,_n);}return true;};_pGrid.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this._noFireDragFlag==true||(_a&&_a._selectscrollmode&&(_a._selectscrollmode=="scroll"))){return true;}var _t=_r;_t=this._findCellObj(_t);if(_t){if(_t.parentcell){_t=_t.parentcell;}}var _u=this._recalcXY(_t,_m,_n,false,_r);_m=_u.canvasX;_n=_u.canvasY;_o=_u.clientX;_p=_u.clientY;return nexacro.Component.prototype.on_fire_user_ondragenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s);};_pGrid.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this._noFireDragFlag==true||(_a&&_a._selectscrollmode&&(_a._selectscrollmode=="scroll"))){return true;}var _t=_r;_t=this._findCellObj(_t);if(_t){if(_t.parentcell){_t=_t.parentcell;}}var _u=this._recalcXY(_t,_m,_n,false,_r);_m=_u.canvasX;_n=_u.canvasY;_o=_u.clientX;_p=_u.clientY;return nexacro.Component.prototype.on_fire_user_ondragleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s);};_pGrid.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){var _t=nexacro._cur_track_info;if(this._noFireDragFlag==true){if(_t&&_t.target&&_t.target._is_tracking==true&&(this._resizer_rowctrl==_t.target||this._resizer_colctrl==_t.target)){_t.target._on_movetrack(_t.distX,_t.distY);}return true;}var _u=false;var _v=_r;_v=this._findCellObj(_v);var _w;if(_v){if(_v.parentcell){_w=_v;_v=_v.parentcell;}}var _x=this._recalcXY(_v,_m,_n,false,_r);_m=_x.canvasX;_n=_x.canvasY;_o=_x.clientX;_p=_x.clientY;if(!_a||!_a._selectscrollmode||_a._selectscrollmode&&(_a._selectscrollmode!=="scroll")){if(this.ondragmove&&this.ondragmove._has_handlers){var _y=this._makeEventInfo(_v,_w,_r);var _z=_y.cell;var _aa=_y.col;var _ab=_y.mergecell;var _ac=_y.mergecol;var _ad=_y.mergerow;var _ae=_y.pivotindex;var _af=_y.row;var _ag=_y.subrow;var _ah=new nexacro.GridDragEventInfo(this,"ondragmove",_c,_d,_e,_f,_a,_b,_q,_r,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_z,_aa,_ab,_ac,_ad,_ae,_af,_ag,_s);_u=this.ondragmove._fireUserEvent(this,_ah);}}if(_t&&_t.target&&_t.target._is_tracking==true&&(this._resizer_rowctrl==_t.target||this._resizer_colctrl==_t.target)){_t.target._on_movetrack(_t.distX,_t.distY);}return _u;};_pGrid.on_fire_sys_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u){if(this._selectscrollmode=="select"){if(!this._is_drag_sameselect){return this._areaselectMove(_r,_m,_n);}else{this._is_drag_selecting=true;}}else{return nexacro.Component.prototype.on_fire_sys_ondragmove.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u);}};_pGrid._noFireDragFlag=false;_pGrid.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;_o=this._findCellObj(_o);var _p;if(_o){if(_o.parentcell){_p=_o;_o=_o.parentcell;}}this._noFireDragFlag=false;var _q=null;var _r=null;var _s=this._getDragData();var _t=null;if(this.ondrag&&this.ondrag._has_handlers){var _u=this._recalcXY(_o,_g,_h,false,_l);_g=_u.canvasX;_h=_u.canvasY;_i=_u.clientX;_j=_u.clientY;var _v=this._makeEventInfo(_o,_p,_l);var _w=_v.cell;var _x=_v.col;var _y=_v.mergecell;var _z=_v.mergecol;var _aa=_v.mergerow;var _ab=_v.pivotindex;var _ac=_v.row;var _ad=_v.subrow;_q=new nexacro.GridDragEventInfo(this,"ondrag",this._getDragData(),null,"text",null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_w,_x,_y,_z,_aa,_ab,_ac,_ad,_n);}if(this._selectscrollmode!=="scroll"){if(_q){if(this.ondrag._fireUserEvent(this,_q)==true){_t=[true,this,_m,_q.dragdata,_q.userdata];}else if(this.ondrag.defaultprevented==true){_t=[false,this,_m,_q.dragdata,_q.userdata];}}}else{this._noFireDragFlag=true;}var _ae;var _af=false;if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking==true){_ae=nexacro.CursorObject("row-resize");this._setGlobalCursor(_ae,_o,_o);_af=true;}else if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking==true){_ae=nexacro.CursorObject("col-resize");this._setGlobalCursor(_ae,_o,_o);_af=true;}else if(_o&&_o._type_name=="GridCellControl"&&_o._rowidx== -1){if(this.cellmovingtype!="none"&&this._selectscrollmode!=="scroll"){var _ag=_o._refinfo._col;var _ah=this._getColMergeInfo("head",_ag);var _ai=this._getColMergeInfo("body",_ag);var _aj=this._getColMergeInfo("summ",_ag);var _ak=nexacro.CursorObject("move");if(_ah[1]==1&&(_ai==null||_ai[1]==1)&&(_aj==null||_aj[1]==1)){this._movingcell=_o;_o.parent._setTempCursor(_ak);}}else{this._movingcell=null;}if(this._movingcell!=null){if(_t){this._noFireDragFlag=!_t[0];_t[0]=true;}else{this._noFireDragFlag=true;_t=[true,this,_m,_s,_r];}}else{if(this._selectscrollmode=="scroll"){_t=[this._noFireDragFlag,this,_m,_s,_r];}}}else if(this._selectscrollmode=="scroll"){_t=[this._noFireDragFlag,this,_m,_s,_r];}if(!_t){_t=[false];}if(this._noFireDragFlag==true){var _al=nexacro._cur_drag_info;if(_al){_al.isSelfAction=true;}}return _t;};_pGrid._on_bubble_drag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}var _n,_o;var _p;var _q=false;var _r;var _s=false;if(_j===undefined){var _t;if(!_l){_l=this;}_p=this._getFromComponent(this);if(this._is_subcontrol){_t=true;}else{if(this.visible&&this._isEnable()){_t=false;_n=this._getClientXY(_f,_g);_j=this.on_fire_user_ondrag(_b,_c,_d,_e,_h,_i,_f,_g,_n[0],_n[1],this,_l,_l,_m);_q=(_j[0]==true&&this._noFireDragFlag==true&&this._selectscrollmode!="scroll");if(!_j||_j[0]!==true){if(!this.ondrag||(_p&&(_p.ondrag&&!_p.ondrag.defaultprevented))){this.on_fire_sys_ondrag(_b,_c,_d,_e,_h,_i,_f,_g,_n[0],_n[1],this,_l,_l,_m);}}}}if(!_j||_j[0]!==true||_q){if(_p&&(!_p.ondrag||(_p.ondrag&&!_p.ondrag.stoppropagation))&&!this._window&&this.parent&&!this.parent._is_application){_o=this._getRecalcCanvasXY(_a,_f,_g);_f=_o[0];_g=_o[1];if(_t){_r=this.parent._on_bubble_drag(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m);}else{_r=this.parent._on_bubble_drag(_a,_b,_c,_d,_e,_f,_g,_h,_i,false,this,_l,_m);}_s=true;}}if(!_q&&!this._noFireDragFlag==true&&_s==true){return _r;}return _j;}else{if((!_j||_j[0]!==true||(_j[0]==true&&this._noFireDragFlag==true))&&this.parent&&!this.parent._is_application){_n=this._getClientXY(_f,_g);if(this.visible&&this._isEnable()){_j=this.on_fire_user_ondrag(_b,_c,_d,_e,_h,_i,_f,_g,_n[0],_n[1],this,_l,this,_m);_q=(_j[0]==true&&this._noFireDragFlag==true&&this._selectscrollmode!="scroll");}if(!_j||_j[0]!==true||_q){_p=this._getFromComponent(this);if(this.visible&&this._isEnable()){if(_p&&(!_p.ondrag||(_p.ondrag&&!_p.ondrag.defaultprevented))){this.on_fire_sys_ondrag(_b,_c,_d,_e,_h,_i,_f,_g,_n[0],_n[1],this,_l,this,_m);}}if(_p&&(!_p.ondrag||(_p.ondrag&&!_p.ondrag.stoppropagation))&&!this._window&&this.parent&&!this.parent._is_application){_o=this._getRecalcCanvasXY(_a,_f,_g);_f=_o[0];_g=_o[1];_r=this.parent._on_bubble_drag(_a,_b,_c,_d,_e,_f,_g,_h,_i,false,_k,_l,_m);_s=true;}}}if(!_q&&!this._noFireDragFlag==true&&_s==true){return _r;}return _j;}};_pGrid.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){var _t=_r;_t=this._findCellObj(_t);var _u;if(_t){if(_t.parentcell){_u=_t;_t=_t.parentcell;}}var _v=this._recalcXY(_t,_m,_n,false,_r);_m=_v.canvasX;_n=_v.canvasY;_o=_v.clientX;_p=_v.clientY;if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking==true){this._setGlobalCursor(null,_t,_t);}else if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking==true){this._setGlobalCursor(null,_t,_t);}else if(this.cellmovingtype!="none"&&this._movingcell){var _w=this._movingcell;var _x=this._curFormat;_w.parent._setTempCursor(null);if(_w&&_w._is_alive&&_w!=_t&&_t._rowidx== -1){var _y=_w._refinfo._col;var _z=_t._refinfo._col;var _aa=_w._refinfo._colspan;var _ab=this._getColMergeInfo("head",_z);_z=_ab[0];var _ac=_ab[1];this._autofitcol_rate=[];_x._moveColumn(_y,_z,_aa,_ac,this.cellmovingtype);this._addRefreshContents("cellmoving",this._headBand);this._addRefreshContents("cellmoving",this._bodyBand);this._addRefreshContents("cellmoving",this._summBand);}this._movingcell=null;}if(this._noFireDragFlag==true||(_a&&_a._selectscrollmode&&(_a._selectscrollmode=="scroll"))){if(_a&&_a._noFireDragFlag){_a._noFireDragFlag=false;}this._noFireDragFlag=false;return true;}if(this.ondrop&&this.ondrop._has_handlers){var _ad=this._makeEventInfo(_t,_u,_r);var _ae=_ad.cell;var _af=_ad.col;var _ag=_ad.mergecell;var _ah=_ad.mergecol;var _ai=_ad.mergerow;var _aj=_ad.pivotindex;var _ak=_ad.row;var _al=_ad.subrow;var _am=new nexacro.GridDragEventInfo(this,"ondrop",_c,_d,_e,_f,_a,_b,_q,_r,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_ae,_af,_ag,_ah,_ai,_aj,_ak,_al,_s);return this.ondrop._fireUserEvent(this,_am);}return false;};_pGrid._isDownUpScroll=function(){if((this._down_scroll_top>=0&&this._down_scroll_top!=this._last_scroll_top)||this._isflingend){return true;}return false;};_pGrid._mouseSelection=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=this._currentCellEditor;var _k=_g;var _l=true;if(_k._editor&&_k._editor==_j){_k=_k._editor;}while(_k){if(_k==_j||_k instanceof nexacro.ScrollBarControl){_l=false;break;}_k=_k.parent;}this._select_cancel=true;if(_l&&_j){this._hideEditor();}var _m=this._select_cancel;this._select_cancel=undefined;if(!_m){return;}if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking){return;}if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking){return;}if(this._isDownUpScroll()){return;}if(_a&&_a._type_name=="GridCellControl"){this._lbuttondown_proc=true;var _n=_a._band.id;var _o=this._on_grid_lbuttondown(_a,_n,_b,_c,_h,_i);if(!_a._is_alive||_h){return;}var _p;if(this._showEditorCell){if(nexacro._toBoolean(this.readonly)==false){if(_o){var _q=this._selectinfo.currow;var _r=this._selectinfo.curcell;if(this._beforeEditRowIdx!=_q||this._beforeEditCellIdx!=_r){var _s=_a;if(_s._virtualmerge){this._showEditorMergeCell(_s,true);}else if(_s._hasEditor()){_s._showEditor(true);_p=this._getDataRow(_s._rowidx);this._beforeEditRowIdx=_p;this._beforeEditCellIdx=_s._cellidx;this._showEditing=true;}else{_s._setSubControlFocus(true);}}}else{this._onceTime_focus=true;this._showEditor();this._onceTime_focus=false;}}this._showEditorCell=false;this._showEditRowIdx= -1;this._showEditCellIdx= -1;}if(this.selectchangetype=="down"&&nexacro._toBoolean(this.readonly)==false){_p=this._getDataRow(_a._rowidx);var _t=_a._refinfo._getDisplaytype(_p);if(_t=="checkboxcontrol"){if(this.cellclickbound=="cell"){_a._needToggle("onlbuttondown",_a);}else{if(_a!=_g&&_a._subComp&&_a._subComp._toggleCheck){if(_a.selected){_a._subComp._toggleCheck();}}}}else{_a._needToggle("onlbuttondown",_a);}}this._lbuttondown_proc=false;}};_pGrid._common_fire_sys_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h){if(!this._is_alive){return;}if(this.selectchangetype=="up"){if(this._isAreaSelect()&&this._selectscrollmode=="select"){this._mouseSelection(_a,_b,_c,_d,_e,_f,_g,_h);}else if(this.selecttype=="multirow"){this._mouseSelection(_a,_b,_c,_d,_e,_f,_g,true,_h);}var _i=this._getWindow();if(!_i._cur_ldown_elem){this._setdataobj=null;}}else{this._mouseSelection(_a,_b,_c,_d,_e,_f,_g,_h);}if(this._is_down_act){this._on_last_lbuttonup(true);}};_pGrid._common_fire_user_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h){if(!this._is_alive){return;}this._resizerStart(_d,_e,_a,"down",_g);var _i=this._resizer_colctrl;var _j=this._resizer_rowctrl;var _k=this._getClientXY(_d,_e);var _l=this._getWindow();if(_i&&_i._is_range){_i._setTracksize(this._getClientHeight());if(_i._direction=="horizon"){_i.move(_k[0],this._getClientTop(),1,_i._tracksize);}nexacro._setTrackInfo(_l,_i,_l._curWindowX,_l._curWindowY);}else if(_j&&_j._is_range){_j._setTracksize(this._getClientWidth());if(_j._direction=="vertical"){_j.move(this._getClientLeft(),_k[1],_j._tracksize,1);}nexacro._setTrackInfo(_l,_j,_l._curWindowX,_l._curWindowY);}if(this._select_ctrl){this._select_ctrl._initTrackInfo();}};_pGrid._recalcTouchInfosXY=function(_a,_b,_c,_d){var _e,_f;for(var _g=0,_h=_b.length;_g<_h;_g++ ){if(_e=_b[_g]){_f=this._recalcXY(_a,_e.canvasx,_e.canvasy,_c,_d);_e.canvasx=_f.canvasX;_e.canvasy=_f.canvasY;_e.clientx=_f.clientX;_e.clienty=_f.clientY;}}};_pGrid._getRecalcCanvasXY=function(_a,_b,_c){if(this._recalcXY_info){_b=this._recalcXY_info[0]+this._adjust_left;_c=this._recalcXY_info[1]+this._adjust_top;this._recalcXY_info=null;}else{_b+=this._adjust_left-this._scroll_left||0;_c+=this._adjust_top-this._scroll_top||0;}return [_b,_c];};_pGrid._recalcXY=function(_a,_b,_c,_d,_e){var _f=_b;var _g=_c;var _h;if(_a._type_name=="GridCellControl"){if(_d){_h=_a._setPositionInGrid(null,false,true);_f=_b+_h.orgl;_g=_c+_h.orgt;}else{var _i=_a._refinfo._area;var _j=_a._band.id;if(_i=="body"){_f=_b+this._curFormat.leftWidth;_f-=this._getScrollLeft();}else if(_i=="right"){var _k=_a._getRowControl();_h=_k._getAreaRect(_i);var _l=_h.left;_f=_b+_l;}if(_j=="body"&&!_a.parent._fixed){_g-=this._getScrollTop();_g+=this._fixed_height;}}}if(!(_e instanceof nexacro.Grid)){if(_e._type_name=="GridRowControl"){_g-=this._getScrollTop();}var _m=this._border||this._getCSSStyleValue("border",this._status);if(_m){_f+=_m.left._width;_g+=_m.top._width;}}this._recalcXY_info=[_f,_g];var _n=this._getClientXY(_f,_g);return {canvasX:_f,canvasY:_g,clientX:_n[0],clientY:_n[1]};};_pGrid.on_fire_user_ontouchstart=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchstart(_a,_b,_c,_d,true,_e);};_pGrid.on_fire_sys_ontouchstart=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchstart(_a,_b,_c,_d,false,_e);};_pGrid._down_scroll_top= -1;_pGrid.on_fire_ontouchstart=function(_a,_b,_c,_d,_e,_f){var _g=_d;_g=this._findCellObj(_g);this._recalcTouchInfosXY(_g,_b,_f,_d);var _h=nexacro._getFirstTouchInfo(_b);if(_g){if(_g.parentcell){_g=_g.parentcell;}}var _i=false;if(this.ontouchstart&&this.ontouchstart._has_handlers){var _j=new nexacro.TouchEventInfo(this,"ontouchstart",_a,_b,_c,_d);if(_e){_i=this.ontouchstart._fireUserEvent(this,_j);}else{_i=this.ontouchstart._fireSysEvent(this,_j);}}this._down_scroll_top=this._last_scroll_top;if(_h){if(_e){this._common_fire_user_lbuttondown(_g,false,false,_h.canvasx,_h.canvasy,_c,_d);}else{if(this._selectscrollmode=="select"){if(_g._band&&_g._band.id=="body"){if(this._isAreaSelect()){this._common_fire_sys_lbuttondown(_g,false,false,_h.canvasx,_h.canvasy,_c,_d);}}}}}return _i;};_pGrid.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this.on_fire_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true,_n,_m);};_pGrid.on_fire_sys_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this.on_fire_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_n,_m);};_pGrid.on_touch_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=nexacro.Component.prototype.on_touch_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);var _n=_k;_n=this._findCellObj(_n);if(_n){if(_n.parentcell){_n=_n.parentcell;}}var _o=this._recalcXY(_n,_f,_g,false,_k);_f=_o.canvasX;_g=_o.canvasY;this._lastmouseentercell=_n;this._down_scroll_top=this._last_scroll_top;this._common_fire_user_lbuttondown(_n,_d,_e,_f,_g,_j,_k,_l);if(this._selectscrollmode=="select"){if(_n._band&&_n._band.id=="body"){if(this._isAreaSelect()){this._common_fire_sys_lbuttondown(_n,_d,_e,_f,_g,_j,_k,_l);}}}return _m;};_pGrid.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=_l;_p=this._findCellObj(_p);var _q;if(_p){if(_p.parentcell){_q=_p;_p=_p.parentcell;}}var _r=this._recalcXY(_p,_g,_h,_n,_l);_g=_r.canvasX;_h=_r.canvasY;_i=_r.clientX;_j=_r.clientY;var _s=false;if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _t=this._makeEventInfo(_p,_q,_l);var _u=this._getRootComponent(_k);var _v=_t.cell;var _w=_t.col;var _x=_t.mergecell;var _y=_t.mergecol;var _z=_t.mergerow;var _aa=_t.pivotindex;var _ab=_t.row;var _ac=_t.subrow;var _ad=new nexacro.GridMouseEventInfo(_u,"onlbuttondown",_v,_w,_x,_y,_z,_aa,_ab,_ac,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_o);if(_m){_s=this.onlbuttondown._fireUserEvent(this,_ad);}else{_s=this.onlbuttondown._fireSysEvent(this,_ad);}}if(!nexacro._isTouchInteraction&&_a!="touch"){if(_m){this._common_fire_user_lbuttondown(_p,_c,_d,_g,_h,_k,_l,_o);}else{this._common_fire_sys_lbuttondown(_p,_c,_d,_g,_h,_k,_l,_o);}}return _s;};_pGrid.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;_n=this._findCellObj(_n);var _o;if(_n){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _q=this._makeEventInfo(_n,_o,_l);var _r=this._getRootComponent(_l);var _s=_q.cell;var _t=_q.col;var _u=_q.mergecell;var _v=_q.mergecol;var _w=_q.mergerow;var _x=_q.pivotindex;var _y=_q.row;var _z=_q.subrow;var _aa=new nexacro.GridMouseEventInfo(_r,"onrbuttondown",_s,_t,_u,_v,_w,_x,_y,_z,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onrbuttondown._fireUserEvent(this,_aa);}return false;};_pGrid.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.on_fire_onmousedown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true,_m);};_pGrid.on_fire_sys_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.on_fire_onmousedown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_m);};_pGrid.on_fire_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;_o=this._findCellObj(_o);var _p;if(_o){if(_o.parentcell){_p=_o;_o=_o.parentcell;}}var _q=this._recalcXY(_o,_g,_h,false,_l);_g=_q.canvasX;_h=_q.canvasY;_i=_q.clientX;_j=_q.clientY;var _r=false;if(this.onmousedown&&this.onmousedown._has_handlers){var _s=this._makeEventInfo(_o,_p,_l);var _t=this._getRootComponent(_k);var _u=_s.cell;var _v=_s.col;var _w=_s.mergecell;var _x=_s.mergecol;var _y=_s.mergerow;var _z=_s.pivotindex;var _aa=_s.row;var _ab=_s.subrow;var _ac=new nexacro.GridMouseEventInfo(_t,"onmousedown",_u,_v,_w,_x,_y,_z,_aa,_ab,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);if(_m){_r=this.onmousedown._fireUserEvent(this,_ac);}else{_r=this.onmousedown._fireSysEvent(this,_ac);}}return _r;};_pGrid._resetFixSize=function(){var _a=this._rowSizeList;var _b=0,_c=0;var _d=this._fixed_startrow;var _e=this._fixed_endrow;if(_d<0){return;}for(var _f=0,_g=_a.length;_f<_g;_f++ ){_b+=_a[_f];if(_d>_f){continue;}_c+=_a[_f];if(_e==_f){break;}}this._fixed_height=_c;this._fixedrow_height=_b;this._updateHighlightrowPos();};_pGrid.setFixedRow=function(_a){this._setFixedRow(_a,undefined);};_pGrid._setFixedRow=function(_a,_b){if(this._hasTree){return;}var _c=(_a<0)?false:true;var _d,_e=this._endrowpos;_d=this._fixed_startrow;if(_d<0){_d=this._toprowpos[0];}if(_a>=0&&(_a<_d||_a>_e)){return;}if(_c){if(this._fixed_height){this._setFixedRow( -1);return;}}if(_c){var _f=this._getGridRowCount();var _g=this._toprowpos[0];var _h=0,_i=0;var _j=false;var _k=0;for(var _l=0;_l<_f;_l++ ){this._fixed_rowcnt++ ;_k=this._getRowSize(_l);_i+=_k;if(_l>=_g){if(this._fixed_startrow<0){this._fixed_startrow=_l;}_h+=_k;_j=true;}if(_l>=_a){break;}}if(_j){this._fixedrow_height=_i;this._fixed_endrow=_a;this._fixed_height=_h;if(!_b){this._recreate_contents_all(false,true,true);}}else{this._fixed_startrow= -9;this._fixed_endrow= -9;this._fixed_height=0;this._fixedrow_height=0;this._fixed_rowcnt=0;}}else{_d=this._fixed_startrow;this._fixed_endrow= -9;this._fixed_height=0;this._fixedrow_height=0;this._fixed_rowcnt=0;this._fixed_startrow= -9;if(!_b){this._recreate_contents_all(false,false,true);if(_d>=0){this._vscrollmng.setRowPos(_d);}}}this._destroyHighlightRow();this._createHighlightRow();};_pGrid._getFixRowCnt=function(){return (this._bodyBand)?this._fixed_rowcnt:0;};_pGrid._on_last_lbuttonup=function(_a){if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}if(this._movingcell){this._movingcell.parent._setTempCursor(null);this._movingcell=null;}this._is_down_act=false;this._setdataobj=null;var _b=this._after_recreate_contents_all;if(_b!=null){if(!this._after_recreate){this._is_after_recreate=true;this._recreate_contents_all(_b[0],_b[1],_b[2],_b[3]);this._after_recreate_contents_all=null;this._is_after_recreate=false;this._moveCellAfterFocus();}}if(this._after_recreate){this._is_after_recreate=true;this._recreate();this._after_recreate=false;this._is_after_recreate=false;this._after_recreate_contents_all=null;}if(this._currentCellEditor&&this._currentCellEditor._user_push){this._currentCellEditor._user_push=false;this._currentCellEditor._changeStatus("focused",true);this._currentCellEditor._is_pushed_area=false;this._currentCellEditor._is_push=false;}if(this._after_hideeditor){this._hideEditorMergeCell(this._after_hideeditor);}};_pGrid._on_last_keyup=function(_a){if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}this._is_down_act=false;this._setdataobj=null;var _b=this._after_recreate_contents_all;if(_b!=null){if(!this._after_recreate){this._is_after_recreate=true;this._recreate_contents_all(_b[0],_b[1],_b[2],_b[3]);this._after_recreate_contents_all=null;this._is_after_recreate=false;this._moveCellAfterFocus();}}if(this._after_recreate){this._is_after_recreate=true;this._recreate();this._after_recreate=false;this._is_after_recreate=false;this._after_recreate_contents_all=null;}if(this._after_hideeditor){this._hideEditorMergeCell(this._after_hideeditor);}};_pGrid._common_fire_sys_lbuttonup=function(_a,_b,_c,_d,_e){if(!this._is_alive){return;}if(!this.enable){return true;}if(_a&&_a._type_name=="GridCellControl"){var _f=this._getDataRow(_a._rowidx);if(this._isFakeCell(_f)){this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_drag_sameselect=false;return true;}if(_c==false&&_d==false&&this._is_drag_selecting==false&&_f>=0){if(this._isMultiSelected()){if(this._isIncludeSelectpos(_a._cellidx,_f)){this._clrMultiSelect();this._refreshAll(true);this._ChangeSelect(this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.curdsrow,this._selectinfo.cursubrow,this._selectinfo.curpvt,false,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.curdsrow,this._selectinfo.cursubrow,this._selectinfo.curpvt,"body","lbuttonup");}}}}this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_drag_sameselect=false;this._execRefreshContents("colsizing",false,true);this._execRefreshContents("rowsizing",false,false);this._execRefreshContents("cellmoving",true);this._exeFuncQueue("colsizing");this._exeFuncQueue("rowsizing");};_pGrid._is_down_act=false;_pGrid._cancelEvent=function(_a){this._endExtraTrack();this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_drag_sameselect=false;this._is_down_act=this._isDownActionKeyMouse();this._setdataobj=null;this._focus_proc=null;if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}if(this._select_cancel){this._select_cancel=false;}};_pGrid.on_fire_user_ontouchend=function(_a,_b,_c,_d,_e){this._is_up_act=true;var _f=this.on_fire_ontouchend(_a,_b,_c,_d,true,_e);this._is_up_act=false;return _f;};_pGrid.on_fire_sys_ontouchend=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchend(_a,_b,_c,_d,false,_e);};_pGrid.on_fire_ontouchend=function(_a,_b,_c,_d,_e,_f){var _g=_d;_g=this._findCellObj(_g);this._recalcTouchInfosXY(_g,_b,_f,_d);if(_g){if(_g.parentcell){_g=_g.parentcell;}}var _h=false;if(this.ontouchend&&this.ontouchend._has_handlers){var _i=new nexacro.TouchEventInfo(this,"ontouchend",_a,_b,_c,_d);if(_e){_h=this.ontouchend._fireUserEvent(this,_i);}else{_h=this.ontouchend._fireSysEvent(this,_i);}}if(!_e){this._common_fire_sys_lbuttonup(_g,false,false,false);}return _h;};_pGrid._isCheckAlive=function(_a){var _b=_a;while(_b!=this){if(!_b||_b._is_alive==false){return false;}_b=_b.parent;}return true;};_pGrid._on_afterHideWaitComp=function(_a){if(this._currentCellEditor){this._currentCellEditor._setFocus(false);}};_pGrid.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){this._is_up_act=true;var _p=this.on_fire_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,true,_o,_n);this._is_up_act=false;return _p;};_pGrid.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){return this.on_fire_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,false,_o,_n);};_pGrid.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){var _q=this._find_lastFocused();if(_q instanceof nexacro.Div){_q=_q._getLastFocused();}if(_q==this){if(this._focus_proc){if(!this._showEditing){if(this._isCheckAlive(this._focus_proc.parent)){var _r=false;if(this._scrollpixel=="all"){_r=true;}if(!this._isDownUpScroll()){this._focus_proc.parent._showfull(_r);}this._focus_proc.parent._setFocus(false);}}else if(this._currentCellEditor&&this._currentCellEditor.setCaretPos&&!this._currentCellEditor.parent._is_mergetemp){if(this._currentCellEditor.autoselect){this._currentCellEditor.setSelect(0, -1);}else{this._currentCellEditor.setCaretPos(0);}}this._focus_proc=null;}}var _s=_l;_s=this._findCellObj(_s);var _t;if(_s){if(_s.parentcell){_t=_s;_s=_s.parentcell;}}var _u=this._recalcXY(_s,_g,_h,_o,_l);_g=_u.canvasX;_h=_u.canvasY;_i=_u.clientX;_j=_u.clientY;var _v=false;if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _w=this._makeEventInfo(_s,_t,_l);var _x=this._getRootComponent(_l);var _y=_w.cell;var _z=_w.col;var _aa=_w.mergecell;var _ab=_w.mergecol;var _ac=_w.mergerow;var _ad=_w.pivotindex;var _ae=_w.row;var _af=_w.subrow;var _ag=new nexacro.GridMouseEventInfo(_x,"onlbuttonup",_y,_z,_aa,_ab,_ac,_ad,_ae,_af,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_p);if(_n){_v=this.onlbuttonup._fireUserEvent(this,_ag);}else{_v=this.onlbuttonup._fireSysEvent(this,_ag);}}if(!_n){if(_s){if(this.selectchangetype=="up"){if(this.selecttype!="area"&&this.selecttype!="multiarea"){if(!this._is_drag_selecting){this._mouseSelection(_s,_c,_d,_g,_h,_k,_l,_p);this._endExtraTrack();}}}}this._common_fire_sys_lbuttonup(_s,_b,_c,_d,_p);this._resizerStart(_g,_h,_s,"up",_l);}return _v;};_pGrid.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;_o=this._findCellObj(_o);var _p;if(_o){if(_o.parentcell){_p=_o;_o=_o.parentcell;}}var _q=this._recalcXY(_o,_g,_h,false,_l);_g=_q.canvasX;_h=_q.canvasY;_i=_q.clientX;_j=_q.clientY;if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _r=this._makeEventInfo(_o,_p,_l);var _s=this._getRootComponent(_l);var _t=_r.cell;var _u=_r.col;var _v=_r.mergecell;var _w=_r.mergecol;var _x=_r.mergerow;var _y=_r.pivotindex;var _z=_r.row;var _aa=_r.subrow;var _ab=new nexacro.GridMouseEventInfo(_s,"onrbuttonup",_t,_u,_v,_w,_x,_y,_z,_aa,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);this._is_up_act=true;var _ac=this.onrbuttonup._fireUserEvent(this,_ab);this._is_up_act=false;return _ac;}return false;};_pGrid.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_b;_n=this._findCellObj(_n);var _o;if(_n){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_d,_e,false,_b);_d=_p.canvasX;_e=_p.canvasY;_f=_p.clientX;_g=_p.clientY;if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _q=this._makeEventInfo(_n,_o,_b);var _r=this._getRootComponent(_b);var _s=_q.cell;var _t=_q.col;var _u=_q.mergecell;var _v=_q.mergecol;var _w=_q.mergerow;var _x=_q.pivotindex;var _y=_q.row;var _z=_q.subrow;var _aa=new nexacro.GridContextMenuEventInfo(_r,"oncontextmenu",_s,_t,_u,_v,_w,_x,_y,_z,_c,_h,_i,_j,_k,_l,_d,_e,_f,_g,_a,_b,_m);var _ab=this.oncontextmenu._fireEvent(this,_aa);return _ab;}return false;};_pGrid.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._is_up_act=true;var _n=this.on_fire_onmouseup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true,_m);this._is_up_act=false;return _n;};_pGrid.on_fire_sys_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.on_fire_onmouseup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_m);};_pGrid.on_fire_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;_o=this._findCellObj(_o);var _p;if(_o){if(_o.parentcell){_p=_o;_o=_o.parentcell;}}var _q=this._recalcXY(_o,_g,_h,false,_l);_g=_q.canvasX;_h=_q.canvasY;_i=_q.clientX;_j=_q.clientY;var _r=false;if(this.onmouseup&&this.onmouseup._has_handlers){var _s=this._makeEventInfo(_o,_p,_l);var _t=this._getRootComponent(_k);var _u=_s.cell;var _v=_s.col;var _w=_s.mergecell;var _x=_s.mergecol;var _y=_s.mergerow;var _z=_s.pivotindex;var _aa=_s.row;var _ab=_s.subrow;var _ac=new nexacro.GridMouseEventInfo(_t,"onmouseup",_u,_v,_w,_x,_y,_z,_aa,_ab,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);if(_m){_r=this.onmouseup._fireUserEvent(this,_ac);}else{_r=this.onmouseup._fireSysEvent(this,_ac);}}return _r;};_pGrid._resizerStart=function(_a,_b,_c,_d,_e){if(this._movingcell){return;}var _f=this._resizer_colctrl;var _g=this._resizer_rowctrl;if((_f&&_f._is_tracking)||(_g&&_g._is_tracking)){return;}var _h=_a;var _i=_b;var _j=_c._rowidx;var _k=_c._cellidx;if(_c._is_alive==false){if(_j== -1){_c=this._getCurrentHeadCell(_k,true);}else{_c=this._getCurrentBodyCell(_j,_k);}}if(!_c){return;}var _l=(_c._refinfo)?_c._refinfo._area:"";var _m=(_c._band)?_c._band.id:"";if(_m=="summary"){_m="summ";}if(_l=="body"){_h+=this._getScrollLeft();}if(_m=="body"){if(!_c.parent._fixed){_i+=this._getScrollTop();}}var _n=false;var _o;var _p;var _q;var _r;var _s;if(_f&&!_f._is_tracking){_o=nexacro.CursorObject("col-resize");_p=this._resizerColRange;_q=_p.length;if(_q>0){_f._is_range=false;for(_r=0;_r<_q;_r++ ){_s=_p[_r];if(_h>=(_s.left-2)&&_h<=(_s.right+2)){if(_l!=_s.area){continue;}if(_i>=_s.top&&_i<=_s.bottom){this.a=_h;_f._is_range=true;_f._setIndex(_s.index);this._setGlobalCursor(_o,_c,_c);_n=true;break;}}}}if(!_f._is_range&&!_f._is_tracking&&(!_g||!_g._is_tracking)){if(_c._type_name!="GridCellControl"){this._setGlobalCursor(null,_e,_e);}else{this._setGlobalCursor(null,_c,_c);}_n=false;}else if(_f._is_tracking){this._setGlobalCursor(_o,_c,_c);_n=true;}}if(_n){return;}if(_g&&!_g._is_tracking){_o=nexacro.CursorObject("row-resize");_p=this._resizerRowRange;_q=_p.length;if(_q>0){_g._is_range=false;for(_r=0;_r<_q;_r++ ){_s=_p[_r];if(_i>=_s.top&&_i<=_s.bottom){if(_m!=_s.area){continue;}if(_h>=_s.left&&_h<=_s.right){_g._is_range=true;_g._setIndex(_s.index);this._setGlobalCursor(_o,_c,_c);break;}}}}if(!_g._is_range&&!_g._is_tracking&&(!_f||!_f._is_tracking)){if(_c._type_name!="GridCellControl"){this._setGlobalCursor(null,_e,_e);}else{this._setGlobalCursor(null,_c,_c);}}else if(_g._is_tracking){this._setGlobalCursor(_o,_c,_c);}}};_pGrid.on_fire_user_ontouchmove=function(_a,_b,_c,_d){var _e=_d;_e=this._findCellObj(_e);this._recalcTouchInfosXY(_e,_b,false,_d);var _f=false;if(this.ontouchmove&&this.ontouchmove._has_handlers){var _g=new nexacro.TouchEventInfo(this,"ontouchmove",_a,_b,_c,_d);_f=this.ontouchmove._fireUserEvent(this,_g);}return _f;};_pGrid.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!_l._is_alive){return;}var _n=_l;_n=this._findCellObj(_n);var _o;if(_n){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;var _q=false;if(this.onmousemove&&this.onmousemove._has_handlers){var _r=this._makeEventInfo(_n,_o,_l);var _s=this._getRootComponent(_l);var _t=_r.cell;var _u=_r.col;var _v=_r.mergecell;var _w=_r.mergecol;var _x=_r.mergerow;var _y=_r.pivotindex;var _z=_r.row;var _aa=_r.subrow;var _ab=new nexacro.GridMouseEventInfo(_s,"onmousemove",_t,_u,_v,_w,_x,_y,_z,_aa,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);_q=this.onmousemove._fireUserEvent(this,_ab);}if(!nexacro._isTouchInteraction){this._resizerStart(_g,_h,_n,"move",_l);}return _q;};_pGrid._prevAreaCellObj=null;_pGrid._areaselectMove=function(_a,_b,_c){if(this._is_drag_selectstart&&!this._showEditing&&this._selectscrollmode=="select"){var _d=_a;_d=this._findCellObj(_d);var _e;var _f,_g;var _h;var _i;var _j;var _k;var _l;if(_d&&(_d._type_name=="GridCellControl"||_d._type_name=="GridSubCellControl")){if(_d.parentcell){_e=_d;_d=_d.parentcell;}var _m=this._recalcXY(_d,_b,_c,false,_a);_b=_m.canvasX;_c=_m.canvasY;if((this._prevAreaCellObj==_d)&&!this._fixed_row_scrolling){return;}var _n=this._getDataRow(_d._rowidx);if(_n==undefined){_n=0;}if(this._isFakeCell(_n)||_n<0){return true;}var _o=this._beforebodycellpos=this._selectinfo.curcell;var _p=this._beforebodycolpos=this._selectinfo.curcol;var _q=this._beforebodyrowpos=this._selectinfo.curdsrow;var _r=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _s=this._beforepvt=this._selectinfo.curpvt;var _t=_d._cellidx;var _u=_d._refinfo._col;var _v=_n;var _w=_d._refinfo._row;var _x= -9;if(_e){_u+=_e._refinfo._col;}if(this._fixed_rowcnt>0){_f=this._fixed_endrow;_g=this._selectinfo;if(_g.area.length>0){_h=_g.area[_g.area.length-1];_i=_h.begrow;_j=_h.endrow;_k=this._vscrollmng.pos;if(_v<_q){_l="up";}else if(_v>_q){_l="down";}else{_l="keep";}if(_l=="up"){this._fixed_row_scrolling=true;if(_j>_v&&_v<=_f&&_j>_f){this._vscrollmng.setPos(_k-1);}else{this._fixed_row_scrolling=false;}}else if(_l=="down"){if(_i<=this._fixed_endrow&&_j<=this._fixed_endrow){this._fixed_row_scroll_zeroset=true;}else{this._fixed_row_scroll_zeroset=false;}if(this._fixed_row_scroll_zeroset&&_v&&(_v<=0||(_v<=this._fixed_endrow&&_j>this._fixed_endrow)||(_v>this._fixed_endrow&&_i<=this._fixed_endrow))){if(_k>0){this._vscrollmng.setPos(0);this._fixed_row_scroll_zeroset=false;return;}}}else{if(_k==0){this._fixed_row_scrolling=false;}else if(this._fixed_row_scrolling){this._vscrollmng.setPos(_k-1);}}}}if(this._fixed_rowcnt>0){_f=this._fixed_endrow;_g=this._selectinfo;if(_g.area.length>0){_h=_g.area[_g.area.length-1];_i=_h.begrow;_j=_h.endrow;_k=this._vscrollmng.pos;if(_v<_q){_l="up";}else if(_v>_q){_l="down";}else{_l="keep";}if(_l=="up"){this._fixed_row_scrolling=true;if(_j>_v&&_v<=_f&&_j>_f){this._vscrollmng.setPos(_k-1);}else{this._fixed_row_scrolling=false;}}else if(_l=="down"){if(_i<=this._fixed_endrow&&_j<=this._fixed_endrow){this._fixed_row_scroll_zeroset=true;}else{this._fixed_row_scroll_zeroset=false;}if(this._fixed_row_scroll_zeroset&&_v&&(_v<=0||(_v<=this._fixed_endrow&&_j>this._fixed_endrow)||(_v>this._fixed_endrow&&_i<=this._fixed_endrow))){if(_k>0){this._vscrollmng.setPos(0);this._fixed_row_scroll_zeroset=false;return;}}}else{if(_k==0){this._fixed_row_scrolling=false;}else if(this._fixed_row_scrolling){this._vscrollmng.setPos(_k-1);}}}}while(true){if(this.selecttype=="multirow"&&_v==_q){break;}this._setSelectedInfo(_t,_u,_v,_w,_x);this._ChangeSelect(_t,_u,_v,_w,_x,false,_o,_p,_q,_r,_s,_d._band.id,"mousemove");break;}this._prevAreaCellObj=_d;}}};_pGrid._on_start_extratrack=function(_a,_b,_c,_d,_e){if(!this._lastmouseentercell){return;}var _f=this._getScrollLeft();var _g=this._getScrollTop();this._track_point.x=_c;this._track_point.y=_d;this._track_point.w=0;this._track_point.h=0;this._track_point.cur_rect={l:0,t:0,w:0,h:0};this._track_start_info={};this._track_start_info.target=this._lastmouseentercell;this._track_start_info.cell_screenX=nexacro.System.clientToScreenX(this._lastmouseentercell,0);this._track_start_info.cell_screenY=nexacro.System.clientToScreenY(this._lastmouseentercell,0);var _h=this._getOwnerFrame();if(_h&&(_h._window_type==1||_h._window_type==4||_h._window_type==5)){var _i=this._lastmouseentercell._adjust_left;var _j=this._lastmouseentercell._adjust_top;var _k=this._lastmouseentercell.parent;while(_k){if(_k._is_frame){break;}_i+=_k._adjust_left;_j+=_k._adjust_top;_k=_k.parent;}var _l=nexacro.System.clientToScreenX(_h,0);if(_l==0&&_h._adjust_left<0){_l=_h._adjust_left;}this._track_start_info.cell_screenX=_l+_i;}this._track_start_info.start_screenX=_c;this._track_start_info.start_screenY=_d;this._track_start_info.scrollLeft=_f;this._track_start_info.scrollTop=_g;this._track_start_info._start_begarea=this._selectinfo.arearect.barea;this._track_start_info._start_endarea=this._selectinfo.arearect.earea;var _m=this._getExtraTrackSelectRect(_c,_d,0,0,true);if(!_e){this._startAreaSizing(_m,_m.idx);}this._track_mode="areaselect";};_pGrid._on_move_extratrack=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._getRootComponent(_a);if(!_a||(this._showEditing==false&&(_h!=this||(_h==this&&_a instanceof nexacro._GridCellControl&&(_a._band.id=="head"||_a._band.id=="summary"))||(_h==this&&_a instanceof nexacro._GridRowControl&&_a._band.id=="body")||(_h==this&&_a.id=="body")))){var _i=this._getExtraTrackSelectRect(_f,_g,_d,_e,false);var _j=_i.idx;var _k=this._getTrackType(this._track_start_info,_i.l,_i.t,_i.w,_i.h,_j,false);var _l=this._selectinfo.area;if(this._fixed_rowcnt>0&&_l.length){var _m=_l[_l.length-1];var _n=_m.begrow;var _o=_m.endrow;var _p=this._selectinfo.ctrlpoint;var _q=this._getCurrentStyleBorder();var _r=(_q)?parseInt(_q.right._width,10):0;var _s=this._getHeadHeight();var _t=this._fixed_height;var _u=_s+_t+_r;var _v=this._fixed_endrow;var _w=_i.t;var _x=_i.h;var _y=this._getScrollTop();var _z=this._vscrollmng;if(_n<=_v&&_o<=_v&&_y>0&&(_w+_x)>_u){_z.setPos(0);}else if(_n<=_v&&_o>=_v&&_y>0&&(_w+_x)<=_u){_z.setPos(_z.pos-1);}else if(_p.row>_v&&_y>0&&_w<=_u){_z.setPos(_z.pos-1);}}this._applySelectorScroll(_k.type);this._applyAreaSizing(_i,_j);this._extratrack_typeinfo=_k;this._extratrack_rectinfo=_i;this._extratrack_idx=_j;var _aa=500;var _ab=10;function getTimerInterval(_a){var _ad=_aa;var _ae=nexacro.System.clientToScreenX(_a,0);var _af=nexacro.System.clientToScreenY(_a,0);var _ag=_a._getOwnerFrame();if(_ag&&(_ag._window_type==1||_ag._window_type==4)){var _ah=_a._adjust_left;var _ai=_a._adjust_top;var _aj=_a.parent;while(_aj){if(_aj._is_frame){break;}_ah+=_aj._adjust_left;_ai+=_aj._adjust_top;_aj=_aj.parent;}var _ak=nexacro.System.clientToScreenX(_ag,0);if(_ak==0&&_ag._adjust_left<0){_ak=_ag._adjust_left;}_ae=_ak+_ah;}var _al=_ae+parseInt(_a._adjust_width);var _am=_af+parseInt(_a._adjust_height);var _an=(_f<_ae)?(_ae-_f):(_f-_al);var _ao=(_g<_af)?(_af-_g):(_g-_am);if(_an>=0){_ad=_ad-(_an* 10);return _ad>0?_ad:1;}if(_ao>=0){_ad=_ad-(_ao* 10);return _ad>0?_ad:1;}return  -1;}var _ac=getTimerInterval(this);if(_ac>0&&_ac<_ab){_ac=_ab;}if(_ac>0){if(!this._extratrack_timer){this._extratrack_timer={};this._extratrack_timer._handle=null;this._extratrack_timer._interval=_ac;this._extratrack_timer._handle=new nexacro._CallbackTimer(this,function(){this._applySelectorScroll(this._extratrack_idx,this._extratrack_typeinfo.type);this._applyAreaSizing(this._extratrack_rectinfo,this._extratrack_idx);},_ac);this._extratrack_timer._handle.start();}else{if(this._extratrack_timer&&this._extratrack_timer._interval!=_ac){if(_ac>0){this._extratrack_timer._interval=_ac;this._extratrack_timer._handle.setInterval(_ac);this._extratrack_timer._handle.start();}else{this._extratrack_timer._handle.stop();}}}}}else{if(this._extratrack_timer){this._extratrack_timer._handle.stop();}}};_pGrid._on_end_extratrack=function(_a,_b,_c){this._track_start_info=null;this._track_idx= -1;this._track_mode="";if(this._extratrack_timer){this._extratrack_timer._handle.stop();this._extratrack_timer._handle=null;this._extratrack_timer=null;}this._getSelectRect(false,true);};_pGrid._endExtraTrack=function(){this._on_end_extratrack();nexacro._cur_extra_track_info=null;};_pGrid._trackingHScroll=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=[0,0];if(this.scrolltype=="none"||this.scrolltype=="vertical"){return _j;}var _k=this._hscrollmng;if(_a==0||_a==2){if(_d=="right"){if(_b<_g&&_b>_f){_k.setPos(_i);}}else if(_d=="left"){if(_b>_f&&_b<_g){_k.setPos(0);_j[1]=_h;}}}else{if(_e=="left"){if(_c>_f&&_c<_g){_k.setPos(0);}}else if(_e=="right"){if(_c<_g&&_c>_f){_k.setPos(_i);_j[0]=_h-_i;_j[1]=_i-_h;}}}return _j;};_pGrid._getTrackType=function(_a,_b,_c,_d,_e,_f,_g){var _h,_i,_j,_k;var _l=this;var _m=_l._curFormat;var _n=["",""];var _o=_l._selectinfo.ctrlpoint.area;var _p=_m.leftWidth;var _q=_l._getClientWidth()-_m.rightWidth;var _r=_m.leftWidth+_m.bodyWidth;var _s=_l._getScrollLeft();var _t=_l._getScollMaxLeft();var _u=_b+_d;var _v=_l._getHeadHeight();var _w=_l._fixed_height;var _x=_v+_w;if(_g){if(_o=="left"){_h=0;_i=_p;}else if(_o=="right"){_h=_q;_i=_l._getClientWidth();}else{_h=_p;_i=(_r<_q)?_r:_q;}}else{var _y=this._trackingHScroll(_f,_b,_u,_p,_a._start_begarea,_a._start_endarea,_q,_s,_t);_b+=_y[0];_d+=_y[1];if(_o=="left"){_h=0;if(_s==_t){_i=(_r<_l._getClientWidth())?_r:_l._getClientWidth();}else{_i=(_r<_q)?_r:_q;}}else if(_o=="right"){if(_s==0){_h=0;}else{_h=_p;}_i=_l._getClientWidth();}else{if(_s==0){_h=0;}else{_h=_p;}if(_s==_t){_i=(_r<_l._getClientWidth())?_r:_l._getClientWidth();}else{_i=(_r<_q)?_r:_q;}}}_j=this._bodyBand._adjust_top;_k=this._bodyBand.getOffsetBottom();var _z,_aa;if(_f==0){if(_b<_h){_d-=(_h-_b);_b=_h;if(this._start_begarea!="left"){_n[0]="leftover0";}}else if(_b>_i||(_s<_t&&_b>_q)){_n[0]="rightover0";}if(_l._fixed_rowcnt>0){if(_c<(_w+_v)){_n[1]="topover0";}else if(_c>_k){_n[1]="bottomover0";}}else{if(_c<_j){_e-=(_j-_c);_c=_j;_n[1]="topover0";}else if(_c>_k){_n[1]="bottomover0";}}if(_d<=0){_b+=_d-1;}if(_e<=0){_c+=_e-1;}}else if(_f==1){_aa=_b+_d;_z=_c+_e;if(_aa<_h||(_s>0&&_aa<_p)){_n[0]="leftover1";}else if(_aa>_i){_d=_i-_b;if(this._start_endarea!="right"){_n[0]="rightover1";}}if(_z<_j){_n[1]="topover1";}else if(_z>_k){_e=_k-_c;_n[1]="bottomover1";}}else if(_f==2){_z=_c+_e;if(_b<_h){_d-=(_h-_b);_b=_h;if(this._start_begarea!="left"){_n[0]="leftover0";}}else if(_b>_i||(_s<_t&&_b>_q)){_n[0]="rightover0";}if(_z<_j||_z>_x){_n[1]="topover1";}else if(_z>_k){_e=_k-_c;_n[1]="bottomover1";}}else if(_f==3){_aa=_b+_d;if(_aa<_h||(_s>0&&_aa<_p)){_n[0]="leftover1";}else if(_aa>_i){_d=_i-_b;if(this._start_endarea!="right"){_n[0]="rightover1";}}if(_c<_j){_n[1]="topover1";}else if(_c>_k){_e=_k-_c;_n[1]="bottomover1";}}return {type:_n,adjust_l:_b,adjust_t:_c,adjust_w:_d,adjust_h:_e};};_pGrid._getExtraTrackSelectRect=function(_a,_b,_c,_d,_e){var _f=1;var _g=this._track_start_info;var _h=_g.start_screenX;var _i=_g.start_screenY;var _j=_g.scrollLeft;var _k=_g.scrollTop;var _l=_g.target._rowidx;var _m=this._getScrollLeft();var _n=this._getScrollTop();var _o=_m-_j;var _p=_n-_k;var _q=_p;var _r=nexacro.System.clientToScreenX(this,0);var _s=nexacro.System.clientToScreenY(this,0);var _t=this._getOwnerFrame();if(_t&&(_t._window_type==1||_t._window_type==4||_t._window_type==5)){var _u=this._adjust_left;var _v=this._adjust_top;var _w=this.parent;while(_w){if(_w._is_frame){break;}_u+=_w._adjust_left;_v+=_w._adjust_top;_w=_w.parent;}var _x=nexacro.System.clientToScreenX(_t,0);if(_x==0&&_t._adjust_left<0){_x=_t._adjust_left;}_r=_x+_u;}var _y=true;if(this._fixed_rowcnt>0&&_l>=this._fixed_startrow&&_l<=this._fixed_endrow){_y=false;}if(!_y){_q=0;}if(_a<(_h-_o)&&_b<(_i-_q)){_f=0;}else if(_a>(_h-_o)&&_b>(_i-_q)){_f=1;}else if(_a<(_h-_o)&&_b>(_i-_q)){_f=2;}else if(_a>(_h-_o)&&_b<(_i-_q)){_f=3;}var _z=_c;var _aa=_d;var _ab,_ac,_ad,_ae;if(_f==0){_ab=this._track_point.x-_r+_z;_ac=this._track_point.y-_s+_aa;_ad= -(_z);_ae= -(_aa)-(_y?_p:0);}else if(_f==1){_ab=this._track_point.x-_r-_o;_ac=this._track_point.y-_s-(_y?_p:0);_ad=_z+_o;_ae=_aa+(_y?_p:0);}else if(_f==2){_ab=this._track_point.x-_r+_z;_ac=this._track_point.y-_s-(_y?_p:0);_ad= -(_z)-_o;_ae=_aa+(_y?_p:0);}else if(_f==3){_ab=this._track_point.x-_r-_o;_ac=this._track_point.y-_s+_aa;_ad=_z+_o;_ae= -(_aa)-(_y?_p:0);}return {idx:_f,l:_ab,t:_ac,w:_ad,h:_ae};};_pGrid.on_fire_sys_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this.enable){return true;}var _n=this._getWindow();if(_n&&_n._cur_ldown_elem){return this._areaselectMove(_l,_g,_h);}};_pGrid._setSelectedInfo=function(_a,_b,_c,_d,_e,_f){if(this._currentBand!="body"){return;}if(_a!==null){this._selectinfo.curcell=this.currentcell=_a;}if(_b!==null){this._selectinfo.curcol=this.currentcol=_b;}if(_c!==null){this._selectinfo.curdsrow=this._currentDSrow=_c;this._selectinfo.currow=this.currentrow=(_c<0)?_c:this._getTreeRowPosition(_c);}if(_d!==null){this._selectinfo.cursubrow=this.currentsubrow=_d;}if(_e!==null){this._selectinfo.curpvt=this.currentpivot=_e;}if(_f){this._selectinfo.areainfo=null;this._selectinfo.areainfo={srow:_f.srow,erow:_f.erow,scell:_f.scell,ecell:_f.ecell,scol:_f.scol,ecol:_f.ecol,ssubrow:_f.ssubrow,esubrow:_f.esubrow,spvt:_f.spvt,epvt:_f.epvt};}};_pGrid._is_drag_selecting=false;_pGrid._on_grid_lbuttondown=function(_a,_b,_c,_d,_e,_f){if(!this._is_alive){return;}if(!this.enable){return true;}var _g=this._getDataRow(_a._rowidx);if(_g==undefined){_g=0;}if(this._isFakeCell(_g)||_g<0){return true;}var _h=this._beforebodycellpos=this._selectinfo.curcell;var _i=this._beforebodycolpos=this._selectinfo.curcol;var _j=this._beforebodyrowpos=this._selectinfo.curdsrow;var _k=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _l=this._beforepvt=this._selectinfo.curpvt;var _m=_a._cellidx;var _n=_a._refinfo._col;var _o=_g;var _p=_a._refinfo._row;var _q= -9;var _r=_a.parentcell;this._prevAreaCellObj=_a;if(_r){_m=_r._cellidx;_n+=_r._refinfo._col;this._prevAreaCellObj=_r;}if(!_e){this._setSelectedInfo(_m,_n,_o,_p,_q);}if(_c==true){if(this._isMultiSelect()){this._multiselect="ctrl";}else{this._multiselect="none";}}else if(_d==true){if(this._isMultiSelect()||this._isAreaSelect()){this._multiselect="shift";}else{this._multiselect="none";}}else{if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}if((this._isAreaSelect()||this._isMultiSelect())&&!nexacro._isTouchInteraction){this._is_drag_selectstart=true;}var _s=false;if(!_e){_s=this._ChangeSelect(_m,_n,_o,_p,_q,false,_h,_i,_j,_k,_l,_b,"lbuttondown");}var _t=this._getWindow();if(_t&&(!nexacro._enabletouchevent&&!_t._cur_ldown_elem)){return;}if(this._selectscrollmode!="select"){return _s;}this._is_drag_sameselect=_s?false:true;if(!nexacro._isTouchInteraction&&(this._isAreaSelect()||this.selecttype=="multirow")){if(nexacro._Browser=="Runtime"){var _u=this._getOwnerFrame();if(_u._window_type!=2&&_u._window_type!=5){_u=nexacro.getApplication().mainframe;}var _v=_t._curWindowX-((_u._adjust_left>=0)?_u._adjust_left:0);var _w=_t._curWindowY-((_u._adjust_top>=0)?_u._adjust_top:0);_v=_v* nexacro._getDevicePixelRatio(this.getElement());_w=_w* nexacro._getDevicePixelRatio(this.getElement());var _x=nexacro.System.clientToScreenX(_u,0)+_v;var _y=nexacro.System.clientToScreenY(_u,0)+_w;nexacro._setExtraTrackInfo(_t,this,_t._curWindowX,_t._curWindowY,_x,_y,_d||_e);}else{nexacro._setExtraTrackInfo(_t,this,_t._curWindowX,_t._curWindowY,_t._cur_screen_pos.x,_t._cur_screen_pos.y,_d||_e);}}return _s;};_pGrid.on_fire_onselectchanged=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.onselectchanged&&this.onselectchanged._has_handlers){var _t=new nexacro.GridSelectEventInfo(_a,"onselectchanged",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s);return this.onselectchanged._fireEvent(this,_t);}return true;};_pGrid.on_fire_oncellposchanged=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.oncellposchanged&&this.oncellposchanged._has_handlers){var _t=new nexacro.GridSelectEventInfo(_a,"oncellposchanged",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s);return this.oncellposchanged._fireEvent(this,_t);}return true;};_pGrid.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){if(!this.enable){return true;}if(_d==false&&_c==false){if(_a!=nexacro.Event.KEY_SHIFT&&_a!=nexacro.Event.KEY_CTRL){this._multiselect="none";}}if(this._iskey_movetocell){this._moveCellAfterFocus();}this._iskey_movetocell=false;this._keydown_elem=null;this._keydown_keycode=undefined;this._is_up_act=true;var _h=nexacro.Component.prototype.on_fire_user_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);this._is_up_act=false;if(!this._is_alive){return _h;}if(_a==nexacro.Event.KEY_RIGHT&&_b){var _i=this._curFormat;if(_i){var _j=_i._bodycells;if(_j&&_j.length){var _k=this._getBodyCellInfo(this._selectinfo.curcell);if(_k){var _l=_k._getAttrValue(_k.expandshow,this._selectinfo.curdsrow);if(_l=="show"){if(this.onkeyup&&this.onkeyup.defaultprevented==true){}else{this.on_fire_onexpandup("none",_b,_c,_d, -1, -1, -1, -1, -1, -1,_e,_f,_g);}}}}}}return _h;};_pGrid.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(this._is_down_act){this._on_last_keyup(true);}};_pGrid._accessibilityHotkeyAction=function(_a,_b,_c,_d,_e){var _f=nexacro._AccessibilityUtil.checkComponentHotkey(this,_a,_b,_c,_d,_e);if(_f){this._hideEditor();var _g=this.currentrow;switch(_f){case nexacro._AccessibilityUtil.Hotkey.FIRSTCELL:this.currentcell=0;this._currentBand="grid";if(this._vscrollmng){this._vscrollmng.setPos(0);}this._setAccessibilityBandFocus("next",false,true);break;case nexacro._AccessibilityUtil.Hotkey.LASTCELL:this.currentcell=this._getAccessibilityCellIndex()-1;this._currentBand="grid";if(this._vscrollmng){this._vscrollmng.setPos(this._vscrollmng._max);}this._setAccessibilityBandFocus("prev",false,true);break;case nexacro._AccessibilityUtil.Hotkey.FIRSTCELLINROW:this.currentcol=0;if(nexacro._enableaccessibility){this._moveToPosAccessibilityCell(_g,0);}else{this._moveToPosCell(_g,0);}break;case nexacro._AccessibilityUtil.Hotkey.LASTCELLINROW:this.currentcol=this._curFormat._cols.length-1;if(nexacro._enableaccessibility){this._moveToPosAccessibilityCell(_g,this.currentcol);}else{this._moveToPosCell(_g,this.currentcol);}break;case nexacro._AccessibilityUtil.Hotkey.FIRSTCELLINCOLUMN:this._currentBand="grid";if(this._vscrollmng){this._vscrollmng.setPos(0);}if(nexacro._enableaccessibility){this._setAccessibilityBandFocus("next",false,true);}else{this._moveToPosCell(0,this.currentcol);}break;case nexacro._AccessibilityUtil.Hotkey.LASTCELLINCOLUMN:this._currentBand="grid";if(this._vscrollmng){this._vscrollmng.setPos(this._vscrollmng._max);}if(nexacro._enableaccessibility){this._setAccessibilityBandFocus("prev",false,true);}else{this._moveToPosCell(this._rowcount-1,this.currentcol);}break;}return true;}return false;};_pGrid.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(nexacro._enableaccessibility&&this._accessibilityHotkeyAction(_a,_b,_c,_d,_g)){return true;}if(!this.enable){return true;}var _h=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if((this.onkeydown&&this.onkeydown.defaultprevented==true)||!this._is_alive){return _h;}this._keydown_elem=this._getWindow()._keydown_element;if(!this._keydown_elem){return false;}this._keydown_keycode=_a;var _i=_f;var _j=false;if(_a!=nexacro.Event.KEY_TAB){if(_f instanceof nexacro._GridCalendarControl||_f.parent instanceof nexacro._GridCalendarControl||_f instanceof nexacro._GridComboControl||_f.parent instanceof nexacro._GridComboControl){while(_i&&_i!=this){if(_i._isPopupVisible()){_j=true;break;}_i=_i.parent;}if(_j){if(_a==nexacro.Event.KEY_ENTER&&this._showEditing){this._need_confirm_control_value=true;this.on_fire_onenterdown(_a,_b,_c,_d,_e,_f,"",_g);this._need_confirm_control_value=false;}return _h;}}}var _k=false;if(this._isAreaSelect()){_k=true;}if(_d==true){if(_a==nexacro.Event.KEY_SHIFT){return _h;}if(this._isMultiSelect()||this._isAreaSelect()){this._multiselect="shift";}else{this._multiselect="none";}}else if(_c==true){if(_a==nexacro.Event.KEY_CTRL){return _h;}if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}else{if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}var _l=false;var _m=true;this._is_data_enter_apply=false;if(this.autoenter=="key"){if(_c==false&&_b==false){if(this._isChar(_a)||_a==25||(_a==229&&nexacro._Browser=="Runtime"&&nexacro._OS=="Windows")){if(!this._showEditing){this._showEditor();if(_a==nexacro.Event.KEY_ENTER){_l=true;}else{if(this._currentCellEditor&&this._currentCellEditor._cellobj._writable){this._currentCellEditor.set_value("");}}}}}}if(!_l&&_a==nexacro.Event.KEY_ENTER&&this._showEditing){var _n=this._currentCellEditor;var _o=_n._cellinfo._getEdittype(this._getDataRow(_n._cellobj._rowidx));var _p=_n._cellinfo._getAttrValue(_n._cellinfo.textareaacceptsenter,this._selectinfo.curdsrow);_p=nexacro._toBoolean(_p);if(_o=="textarea"&&((!_p&&(_b||_c||_d))||(_p&&!_b&&!_c&&!_d))){}else if(_o=="text"||_o=="mask"||_o=="date"||_o=="combo"||_o=="textarea"){_l=true;_m=false;var _i=_f;var _j=false;while(_i&&_i!=this){if(_i._isPopupVisible()){_j=true;break;}_i=_i.parent;}if(_j){}else{this._hideEditor();if(this._setdataobj&&this._setdataobj.succ==false){_m=true;}else{if(this.autoenter=="select"){var _q=this._findCellObj(_f);if(_q){if(_q.parentcell){_q=_q.parentcell;}if(!_q._virtualmerge&&(_q._rowidx!=this.currentrow||_q._cellidx!=this.currentcell)){_m=true;}else{this._is_data_enter_apply=true;}}else{this._is_data_enter_apply=true;}}}}}}var _r=_f;var _s="";var _t;var _u;var _v=this._curFormat;var _w;var _x;if(_a==nexacro.Event.KEY_UP){if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d,_g)==false){if(_c){if(this._scrollpixel=="all"){_t=this._vscrollmng.pos-25;}else{_t=this._vscrollmng.pos-1;}if(_t<0){_t=0;}this._vscrollmng.setPos(_t);}else{if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("up",false);}else{this._moveToCell("up");}}}}else if(_a==nexacro.Event.KEY_DOWN){if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d,_g)==false){if(_c){if(this._scrollpixel=="all"){_t=this._vscrollmng.pos+25;}else{_t=this._vscrollmng.pos+1;}if(_t>this._vscrollmng.max){_t=this._vscrollmng.max;}this._vscrollmng.setPos(_t);}else{if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("down",false);}else{this._moveToCell("down");}}}}else if(_a==nexacro.Event.KEY_SPACE){if(!nexacro._enableaccessibility||nexacro._enableaccessibility&&this._currentBand=="body"){if(_v){_w=_v._bodycells;if(_w&&_w.length){_x=_w[this._selectinfo.curcell];if(_x){_u=_x._getEdittype(this._selectinfo.curdsrow);if(_u=="checkbox"&&nexacro._toBoolean(this.readonly)==false){if(this._toggleVal(this._selectinfo.curdsrow,_x)){this._jumpCurrentRow(this._selectinfo.currow);}}}}}}}else if(_a==nexacro.Event.KEY_ENTER){if(!nexacro._enableaccessibility||nexacro._enableaccessibility&&this._currentBand=="body"){{_u="";if(_f._type_name=="GridCellControl"){_u=_f._refinfo._getEdittype(this._getDataRow(_f._rowidx));_s=_f._refinfo._getValue(this._getDataRow(_f._rowidx));}else if(_f instanceof nexacro._GridCheckboxControl){_s=_f._cellinfo._getValue(this._getDataRow(_f._cellobj._rowidx));}else if(_f.parent instanceof nexacro._GridCheckboxControl){_s=_f.parent._cellinfo._getValue(this._getDataRow(_f.parent._cellobj._rowidx));}if(_f instanceof nexacro._GridEditControl||_f instanceof nexacro._GridTextAreaControl||_f instanceof nexacro._GridMaskEditControl||_f instanceof nexacro._GridCheckboxControl||_f.parent instanceof nexacro._GridCheckboxControl||_u=="checkbox"||_f instanceof nexacro._GridCalendarControl||_f.parent instanceof nexacro._GridCalendarControl||_f instanceof nexacro._GridComboControl||_f.parent instanceof nexacro._GridComboControl){if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){if(_f instanceof nexacro._GridComboControl){_r=_f.comboedit;}}if(this._showEditing||_u=="checkbox"){if(!_b&&!_c&&!_d){_l=true;}}else if(_m){if(this._find_lastFocused()==this){if(!this._getWindow()._modal_frame_stack.length){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._find_lastFocused()==this){if(!this._getWindow()._modal_frame_stack.length){this._showEditor();}}});}}}}else{if(!this._showEditing){nexacro._OnceCallbackTimer.callonce(this,function(){this._showEditor();});}}}}}else if(_a==nexacro.Event.KEY_LEFT){if(_v){_w=_v._bodycells;if(_w&&_w.length){_x=this._getBodyCellInfo(this._selectinfo.curcell);if(_x){_u=_x._getEdittype(this._selectinfo.curdsrow);if(this._hasTree&&_u=="tree"&&(this.treeuseexpandkey||_b)){this._is_editor_keyaction=false;this._treeStateKeyAction(this._selectinfo.currow,0);}else if(_u=="combo"&&_x._getAttrValue(_x.combotype,this._selectinfo.curdsrow)=="dropdown"){this._is_editor_keyaction=false;if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("prev",false,undefined,_k);}else{this._moveToCell("prev",false,_k,undefined,undefined,true);}}}}if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d,_g)==false){if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("prev",false,undefined,_k);}else{this._moveToCell("prev",false,_k,undefined,undefined,true);}}}}else if(_a==nexacro.Event.KEY_RIGHT){if(_v){_w=_v._bodycells;if(_w&&_w.length){_x=this._getBodyCellInfo(this._selectinfo.curcell);if(_x){_u=_x._getEdittype(this._selectinfo.curdsrow);if(this._hasTree&&_u=="tree"&&(this.treeuseexpandkey||_b)){this._is_editor_keyaction=false;this._treeStateKeyAction(this._selectinfo.currow,1);}else if(_u=="combo"&&_x._getAttrValue(_x.combotype,this._selectinfo.curdsrow)=="dropdown"){this._is_editor_keyaction=false;if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("next",false,undefined,_k);this._keydown_elem._event_stop=true;}else{this._moveToCell("next",false,_k,undefined,undefined,true);}}else{var _y=_x._getAttrValue(_x.expandshow,this._selectinfo.curdsrow);if(_y=="show"&&_b){this._is_editor_keyaction=false;this.on_fire_onexpanddown("none",_b,_c,_d, -1, -1, -1, -1, -1, -1,_e,_f,_g);}}}}if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d,_g)==false){if(nexacro._enableaccessibility){_h=this._moveToAccessibilityCell("next",false,undefined,_k);}else{this._moveToCell("next",false,_k,undefined,undefined,true);}if(nexacro._enableaccessibility){this._keydown_elem._event_stop=true;}}}}else if(_a==nexacro.Event.KEY_PAGE_UP){if(this._vscrollmng){_t=this._vscrollmng._pos-this._vscrollmng.page;if(this._scrollpixel!="all"){_t=this._vscrollmng._scroll_reverse_convert(_t)[0];}if(_t<0){_t=0;}this._vscrollmng.setPos(_t,"page_v");}}else if(_a==nexacro.Event.KEY_PAGE_DOWN){if(this._vscrollmng){_t=this._vscrollmng._pos+this._vscrollmng.page;if(this._scrollpixel!="all"){_t=this._vscrollmng._scroll_reverse_convert(_t)[0];}if(_t>this._vscrollmng.max){_t=this._vscrollmng.max;}this._vscrollmng.setPos(_t,"page_v");}}else if(_a==nexacro.Event.KEY_TAB){var _z=this._multiselect;if(nexacro._enableaccessibility){if(_d){this._multiselect="none";this._acceptstab=this._moveToAccessibilityCell("prev",true);this._multiselect=_z;}else{this._acceptstab=this._moveToAccessibilityCell("next",true);}}else{if(_d==true){this._multiselect="none";this._acceptstab=this._moveToCell("prev",true,false,undefined,undefined,true);this._multiselect=_z;}else{this._acceptstab=this._moveToCell("next",true,false,undefined,undefined,true);}}if(this._acceptstab&&this._iskey_movetocell){this._moveCellAfterFocus();this._iskey_movetocell=false;}this._keydown_elem._event_stop=true;return this._acceptstab;}else{if(this.autoenter=="key"){if(_c==false&&_b==false){if(this._isChar(_a)||_a==25||(_a==229&&nexacro._Browser=="Runtime"&&nexacro._OS=="Windows")){if(!this._showEditing){this._showEditor();}}}}}if(_l){this.on_fire_onenterdown(_a,_b,_c,_d,_e,_r,_s,_g);}return _h;};_pGrid.on_fire_allclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z){if((this.onlbuttondown&&this.onlbuttondown.defaultprevented==true)||(this.onlbuttonup&&this.onlbuttonup.defaultprevented==true)){return;}if(this._isDownUpScroll()){return;}var _aa=this[_b];if(_aa&&_aa._has_handlers&&this.enableevent){var _ab=new nexacro.GridClickEventInfo(_a,_b,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z);_ab.clickitem=_c;return _aa._fireEvent(this,_ab);}return true;};_pGrid._getByteLength_UTF8=function(_a,_b,_c,_d){for(_b=_c=0;_d=_a.charCodeAt(_c++ );_b+=_d>>11?3:_d>>7?2:1){}return _b;};_pGrid.on_fire_cellclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this._is_alive){return;}if(!this.enable){return true;}var _p=this._getDataRow(_a._rowidx);if(this._isFakeCell(_p)){return true;}var _q;if(_a.parentcell){_q=_a;_a=_a.parentcell;}var _r=this._recalcXY(_a,_i,_j,true,_n);_i=_r.canvasX;_j=_r.canvasY;_k=_r.clientX;_l=_r.clientY;if(nexacro._isTouchInteraction||(_c=="touch")){if(_a._band.id=="body"){if(!(this._selectscrollmode=="select"&&this._isAreaSelect())){this._mouseSelection(_a,_e,_f,_i,_j,_m,_n,_o);}}if(((_q&&_q._editor)||(_a._editor))&&!_b){_b="control";}}var _s=this._beforebodycellpos;var _t=this._beforebodycolpos;var _u=this._beforebodyrowpos;var _v=this._beforebodysubrowpos;var _w=this._beforepvt;var _x=_a._cellidx;var _y=_a._refinfo._col;var _z=_p;var _aa=_a._refinfo._row;var _ab= -9;if(_c=="none"){_s=_x;_t=_y;_u=_z;_v=_aa;_w= -9;}if(_q){_y+=_q._refinfo._col;}var _ac=_n;var _ad=false;while(_ac&&!(_ac instanceof nexacro.Grid)){if(_ac._displaymode==false&&!_ac._clickevt_able){_ad=true;}_ac=_ac.parent;}if(!_ad){this.on_fire_allclick(this,"oncellclick",_b,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_ab,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}};_pGrid.on_fire_headclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this.enable||!this._is_alive){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;var _r=this._beforeheadcellpos;var _s=this._beforeheadcolpos;var _t=this._beforeheadrowpos;var _u=this._beforeheadsubrowpos;var _v=this._beforepvt;var _w=this._beforeheadcellpos=_a._cellidx;var _x=this._beforeheadcolpos=_a._refinfo._col;var _y=this._beforeheadrowpos=this._getDataRow(_a._rowidx);var _z=this._beforeheadsubrowpos=_a._refinfo._row;var _aa= -9;if(_p){_x+=_p._refinfo._col;}this.on_fire_allclick(this,"onheadclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pGrid.on_fire_summaryclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this.enable||!this._is_alive){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;var _r=this._beforesummcellpos;var _s=this._beforesummcolpos;var _t=this._beforesummrowpos;var _u=this._beforesummsubrowpos;var _v=this._beforepvt;var _w=this._beforesummcellpos=_a._cellidx;var _x=this._beforesummcolpos=_a._refinfo._col;var _y=this._beforesummrowpos=this._getDataRow(_a._rowidx);var _z=this._beforesummsubrowpos=_a._refinfo._row;var _aa= -9;if(_p){_x+=_p._refinfo._col;}this.on_fire_allclick(this,"onsummaryclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pGrid.on_fire_celldblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this.enable||!this._is_alive){return true;}var _p=this._getDataRow(_a._rowidx);if(this._isFakeCell(_p)){return true;}var _q;if(_a.parentcell){_q=_a;_a=_a.parentcell;}var _r=this._recalcXY(_a,_i,_j,true,_n);_i=_r.canvasX;_j=_r.canvasY;_k=_r.clientX;_l=_r.clientY;var _s=this._dbclickPreCell;var _t=this._dbclickPreCol;var _u=this._dbclickPreRow;var _v=this._dbclickPreSubrow;var _w=this._dbclickPrePvt;var _x=_a._cellidx;var _y=_a._refinfo._col;var _z=_p;var _aa=_a._refinfo._row;var _ab= -9;if(_q){_y+=_q._refinfo._col;}this._dbclickPreCell=_x;this._dbclickPreCol=_y;this._dbclickPreRow=_z;this._dbclickPreSubrow=_aa;this._dbclickPrePvt=_ab;this.on_fire_allclick(this,"oncelldblclick",_b,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_ab,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pGrid.on_fire_headdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this.enable||!this._is_alive){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;var _r=this._dbclickPreCell;var _s=this._dbclickPreCol;var _t=this._dbclickPreRow;var _u=this._dbclickPreSubrow;var _v=this._dbclickPrePvt;var _w=_a._cellidx;var _x=_a._refinfo._col;var _y=this._getDataRow(_a._rowidx);var _z=_a._refinfo._row;var _aa= -9;if(_p){_x+=_p._refinfo._col;}this._dbclickPreCell=_w;this._dbclickPreCol=_x;this._dbclickPreRow=_y;this._dbclickPreSubrow=_z;this._dbclickPrePvt=_aa;this.on_fire_allclick(this,"onheaddblclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pGrid.on_fire_summarydblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this.enable||!this._is_alive){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;var _r=this._dbclickPreCell;var _s=this._dbclickPreCol;var _t=this._dbclickPreRow;var _u=this._dbclickPreSubrow;var _v=this._dbclickPrePvt;var _w=_a._cellidx;var _x=_a._refinfo._col;var _y=this._getDataRow(_a._rowidx);var _z=_a._refinfo._row;var _aa= -9;if(_p){_x+=_p._refinfo._col;}this._dbclickPreCell=_w;this._dbclickPreCol=_x;this._dbclickPreRow=_y;this._dbclickPreSubrow=_z;this._dbclickPrePvt=_aa;this.on_fire_allclick(this,"onsummarydblclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pGrid.on_dsnotify_onrowposchanged=function(_a,_b){var _c=this._rowposition;var _d=parseInt(_a.rowposition,10);this._rowposition=_d;if(this.getElement()&&this._userRowposChange==false){var _e= -1;var _f= -1;var _g=this;if(this._hasTree){_e=this._getTreeRowPosition(_c);_f=this._getTreeRowPosition(_d);}else{_e=_c;_f=_d;}var _h;var _i;var _j;var _k;var _l;var _m;var _n;var _o;var _p;var _q= -9;if(_f<0){_m=(this._selectinfo.curcell<0)?0:this._selectinfo.curcell;_n=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;_o=_d;_p=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;function proc1(){_g._hideEditor();_h=_g._beforebodycellpos=_g._selectinfo.curcell;_i=_g._beforebodycolpos=_g._selectinfo.curcol;_j=_g._beforebodyrowpos=_g._selectinfo.curdsrow;_k=_g._beforebodysubrowpos=_g._selectinfo.cursubrow;_l=_g._beforepvt=_g._selectinfo.curpvt;_g._setSelectedInfo(_m,_n,_o,_p,_q);_g._ChangeSelect(_m,_n,_o,_p,_q,true,_h,_i,_j,_k,_l,"body");_g._moveCellAfterFocus();}if(this._is_async_recreate){nexacro._OnceCallbackTimer.callonce(this,proc1,100);}else{proc1();}}else if(_e==_f){}else{_m=(this._selectinfo.curcell<0)?0:this._selectinfo.curcell;_n=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;_o=_d;_p=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;if(_o>=0&&(this._isMultiSelect()||this._isAreaSelect())){if(_a._bWorkingstatus==true){this._hideEditor();_h=this._beforebodycellpos=this._selectinfo.curcell;_i=this._beforebodycolpos=this._selectinfo.curcol;_j=this._beforebodyrowpos=this._selectinfo.curdsrow;_k=this._beforebodysubrowpos=this._selectinfo.cursubrow;_l=this._beforepvt=this._selectinfo.curpvt;this._beforebodycellpos= -1;this._beforebodycolpos= -1;this._beforebodyrowpos= -1;this._beforebodysubrowpos= -1;this._setSelectedInfo( -1, -1, -1, -1,null);this._ChangeSelect( -1, -1, -1, -1,_q,true,_h,_i,_j,_k,_l,"body");this._moveCellAfterFocus();}else{if(this._getUseBindExprProp("body")||this._isUseBindExprStyle("body")){this._refreshBody(true);}if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}var _r=this._dsRowToDispRow(_o);function proc2(){_g._jumpCurrentRow(_r);_g._moveCellAfterFocus();}if(this._is_async_recreate){nexacro._OnceCallbackTimer.callonce(this,proc2,100);}else{proc2();}}}else{function proc3(){_g._hideEditor();_h=_g._beforebodycellpos=_g._selectinfo.curcell;_i=_g._beforebodycolpos=_g._selectinfo.curcol;_j=_g._beforebodyrowpos=_g._selectinfo.curdsrow;_k=_g._beforebodysubrowpos=_g._selectinfo.cursubrow;_l=_g._beforepvt=_g._selectinfo.curpvt;_g._setSelectedInfo(_m,_n,_o,_p,_q);_g._ChangeSelect(_m,_n,_o,_p,_q,true,_h,_i,_j,_k,_l,"body");_g._moveCellAfterFocus();}if(this._is_async_recreate){nexacro._OnceCallbackTimer.callonce(this,proc3,100);}else{proc3();}}}}};_pGrid.on_dsnotify_oncolumnchanged=function(_a,_b,_c){if(this._is_async_recreate){if(!_c){var _d=this._getWindow();_d._postMessage(this,"oncolumnchanged",this._callbackPostmsg,[_a,_b]);}return;}if(_a._bWorkingstatus==true){this._recreate_contents_all(true,false);return;}var _e=[];var _f;this._clearCellStyleCache(this._curFormat);if(this._isTreeStateChanged(_b,this._dsEventOccured)==true){this._updateTreeStates();var _g=this._getTreeRowPosition(_b.row);var _h=this._treeStates[_b.row];if(this._bodyBand){if(_g== -1){this._recreate_contents_all(true,false,true);}else{if(this._treeCellinfo.treelevel._bindexpr==_b.columnid){this._refreshBody();}else{if(_h==0){this._bodyBand._matrix._adjustTreeDisplay(_g,true);}else{this._bodyBand._matrix._adjustTreeDisplay(_g,false);}var _i=this.getTreeParentRow(_g,true);_i=this._dsRowToDispRow(_i,true);this._refreshBodyRow(_i);}}}}else if((this.autosizingtype=="row"||this.autosizingtype=="both")&&this._isChangeBodyRowSizeList(_b.row)==true){this._recreate_contents_all(true,false);}else if((this.autosizingtype=="col"||this.autosizingtype=="both")&&this._isChangeBodyColSizeList(_b.columnid,_e,_b.row)==true){this._autofitcol_rate=[];if(_e.length>1){if(this.autosizingtype=="both"){this._recreate_contents_all(true,false);}else{this._recreate_contents_all(false,false);}}else if(_e.length==1){if(this.enableredraw){this._updateColSize(_e[0]);}else{if(!this._enable_redraw_history.updatecolsize){this._enable_redraw_history.updatecolsize=[];}this._enable_redraw_history.updatecolsize.push(_e[0]);}}}else{if(_b.row>=0){if(this._hasTree&&this._treeCellinfo.treecheck._bindexpr==_b.columnid){this._treeChecked=this._createTreeChecked();}var _j=this._dsRowToDispRow(_b.row,true);if(_j>=0){var _k=this._getBindTextCellInfo(_b.columnid);var _l=false;var _m=false;if(_k){var _n=_k[0];var _o=_k[1];var _p=_n.length,_q;var _r;if(this._is_use_suppress){for(_r=0;_r<_p;_r++ ){_q=_n[_r]._getSuppress(_b.row);if(_q!=0){this._suppressUpdate();break;}}}var _s=false;for(_r=0;_r<_p;_r++ ){if(_n[_r]._type=="head"){_l=true;}else if(_n[_r]._type=="summary"){_m=true;}else{if(_b.col== -1&&_b.colidx== -1){if(_b.newvalue!=undefined){if(!_s){if(this._hasTree){this._initTreeStates(true,true);this._recreate_contents_all(false,false,true);}else{this._refreshBodyRow(_j);}_s=true;}if(this._currentCellEditor&&_n[_r]._col==this._currentCellEditor._cellinfo._col&&_n[_r]._row==this._currentCellEditor._cellinfo._row&&_b.row==this._currentCellRow){this._currentCellEditor._setProperty();}}}else{{var _t=false;_q=_n[_r]._getSuppress(_b.row);if(_q>0){var _u=this._curFormat._bodycells;_t=true;for(var _w=0,_x=_u.length;_w<_x;_w++ ){if(_u[_w]._getSuppress(_b.row)>=_q){this._refreshCell("body",_w);}}}else if(_q<0){if(!_s){this._refreshBodyRow(_j);_s=true;_t=true;}}else{if(!_s){_f=this._binddataset;if(_f.keystring&&_f._keycols.length>0){this._refreshBody();}else{this._refreshBodyRow(_j);_t=true;}_s=true;}}if(_t){var _v=null;if((_v=this._getUseBindExprProp("body"))){if(this._expr_allrow_update_prop||this._expr_allrow_update_style){for(var _y=0;_y<_v.length;_y++ ){this._refreshCell("body",_v[_y],undefined);}}}}if(_o&&this._currentCellEditor&&_n[_r]._col==this._currentCellEditor._cellinfo._col&&_n[_r]._row==this._currentCellEditor._cellinfo._row&&_b.row==this._currentCellRow){this._currentCellEditor._setProperty();}}}_m=true;}}}if(_l||this._getUseBindExprProp("head")){this._refreshHead();}if(_m||this._getUseBindExprProp("summ")){this._refreshSumm();}}else{if(this._hasTree){if(_b.columnid==""){this._initTreeStates(true);this._recreate_contents_all(false,false,true);}else{_f=this._binddataset;if(_f.keystring&&_f._keycols.length>0){this._refreshBody();}}}}}else{this._refreshHead();this._refreshSumm();if(_a._isConstColumn(_b.col)==true){this._refreshBody();}}}};_pGrid.on_dsnotify_onload=function(_a,_b){if(!this._is_created&&this._rowcount==_a.rowcount){return;}var _c=this._rowcount;var _d=_b.reason;this.rowcount=this._rowcount=_a.rowcount;this._rowposition=_a.rowposition;if(_d!=91){this._initSelect(this._rowposition);}if(this._is_down_act&&!this._isDownActionKeyMouse()){this._is_down_act=false;}this._exprcache={};this._initTreeStates();var _e=_b.errorcode;if(_e<0){return;}if(_d==0||_d==1||_d==2||_d==3){if(_d==1||(_d==0&&_b.progressload)){if(this.autosizingtype!="none"){if(this._async_create==true){this._recreate_contents_all_async(true,false,false,undefined,_c);}else{this._recreate_contents_all(true,false,false,undefined,_c);}}else{this._updateBodyClient("progressload",undefined,_c);}}else{if(this.autosizingtype!="none"){if(this._async_create==true){this._recreate_contents_all_async(true,true,false);}else{this._recreate_contents_all(true,true,false);}}else{this._updateBodyClient("load");}}}else if(_d==91){this._recreate_contents_all(true,true);this._binddataset=null;}else if(_d==12){var _f=this._bodyBand;if(!_f){return;}var _g=_c-1;var _h=_f._matrix._getBodyRowTopPos(_g+1)-this._getScrollTop();var _i=this._getAvailableRect(_f);var _j=_c;var _k=_f._matrix._rows.length;var _l=_g+1;if(_h>=_i.height&&_g<_l&&(_k%2!=1)){if(this._isUserChangeHeadRowSize||this._isUserChangeBodyRowSize||this._isUserChangeSummRowSize){this._recreate_contents_all(true,false,true);}else{this._resetRowSizeList(_j);this._resetColSizeList(_j);this._resetScrollMax();}}else{if(this._hasTree){this._initTreeStates(true);this._recreate_contents_all(true,false,true);}else if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,false);}else{this._updateBodyClient("appenddata");}}}};_pGrid.on_dsnotify_onrowsetchanged=function(_a,_b){var _c=this._binddataset;var _d=(this._rowcount!=_c.rowcount);var _e=this._rowcount;this.rowcount=this._rowcount=_c.rowcount;var _f=false;if(this._rowposition!=_c.rowposition){_f=true;}if(this._is_down_act&&!this._isDownActionKeyMouse()){this._is_down_act=false;}this._rowposition=_c.rowposition;if(this._curFormat){var _g=this._rowcount-1;var _h;switch(_b.reason){case 10:_h="assign";break;case 11:_h="copydata";break;case 12:if(_b.row== -1){_h="appenddata";}else if(_b.row==_g){_h="addrow";}else if(_b.row<_g){_h="insertrow";}break;case 20:if(_b.row== -1){_h="deletemultirows";}else{_h="deleterow";}break;case 22:_h="deleteall";break;case 23:_h="cleardata";break;case 24:_h="clear";break;case 30:_h="keystring";break;case 31:if(_b.row== -1){_h="filter";}else{_h="filterrow";}break;case 32:_h="moverow";break;case 33:_h="exchangerow";break;case 34:_h="addcolumn";break;case 41:_h="enableevent";break;case 40:_h="rowtype";break;default:break;}if(_h=="copydata"||_h=="addcolumn"||_h=="assign"||_h=="filter"){this._exprcache={};this._resetSelect(this._rowposition);}else if(_h=="enableevent"||_h=="appenddata"){this._exprcache={};}else if(_h=="deleterow"||_h=="filterrow"){this._updateTreeStates(_b.row,false);this._delOverSelectInfo();}else if(_h=="deletemultirows"){var _i=_a._deleteRows;for(var _k=_i.length-1;_k>=0;_k-- ){this._updateTreeStates(_i[_k],false);}this._delOverSelectInfo();}else if(_h=="deleteall"||_h=="cleardata"||_h=="clear"){this._clrMultiSelect();this._setSelectedInfo( -1, -1, -1, -1,null);this._destroyOverlayControls();this._destroySelectionControls();}else if(_h=="copydata"){this._setSelectedInfo(null,null,this._rowposition,0,null);}else if(_h=="addrow"||_h=="insertrow"||_h=="appendrow"){this._updateTreeStates(_b.row,true);}if(_h!="addrow"){this._clearCellStyleCache(this._curFormat);}if(this._is_async_recreate){var _j=this._getWindow();_j._postMessage(this,"afterrowset",this._callbackPostmsg,[_h,_f,_b.row,_d,_e]);}else{this._afterRowsetChanged(_h,_f,_b.row,_d,_e);}}};_pGrid._clearCellStyleCache=function(_a){if(!_a){return;}var _b,_c;for(var _d= -2;_d<1;_d++ ){if(_d== -2){_b=_a._summcells;}else if(_d== -1){_b=_a._headcells;}else if(_d>=0){_b=_a._bodycells;}if(_b){_c=_b.length;for(var _e=0;_e<_c;_e++ ){_b[_e]._clearStyle();}}}};_pGrid._callbackPostmsg=function(_a){var _b=_a.data;if(_a.id=="afterrowset"){this._afterRowsetChanged(_b[0],_b[1],_b[2],_b[3],_b[4]);}else if(_a.id=="oncolumnchanged"){this.on_dsnotify_oncolumnchanged(_b[0],_b[1],true);}};_pGrid._afterRowsetChanged=function(_a,_b,_c,_d,_e){if(this.getElement()){var _f=this._bodyBand;this._hideEditor(true);if(_a=="copydata"||_a=="assign"){this._initTreeStates();if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate_contents_all(true,true);}else if(_a=="addcolumn"){this._initTreeStates(true);if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate_contents_all(true,false);}else if(_a=="keystring"){this._initTreeStates();if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,false);}else{this._recreate_contents_all(true,false,true);}this._resetSelect(this._rowposition,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.cursubrow,this._selectinfo.curpvt);}else if(_a=="enableevent"){this._initTreeStates(true);if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}if(_d||this.autosizingtype!="none"){this._recreate_contents_all(true,false);}else{if(this._hasTree){if(_f){_f._matrix._adjustRowsDisplay(true);_f._matrix._adjustColsDisplay();_f._on_refresh_rows();}}this._refreshAll();}if(_b==false){this._select_noscroll=true;}if(!this._isMultiSelect()&&!this._isAreaSelect()){this._resetSelect(this._rowposition,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.cursubrow,this._selectinfo.curpvt);}this._select_noscroll=false;if(!this._is_created){this._create_selection={cell:this._selectinfo.curcell,col:this._selectinfo.curcol,row:this._selectinfo.curdsrow,subrow:this._selectinfo.cursubrow,pvt:this._selectinfo.curpvt};}}else if(_a=="addrow"||_a=="appenddata"||_a=="deleterow"||_a=="filterrow"||_a=="insertrow"||_a=="deletemultirows"||_a=="filter"){if(_f){var _g;if(_a=="addrow"||_a=="appenddata"){_g=_e;}if(_c<=this._fixed_endrow){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._resetRowSizeList(_g);this._resetColSizeList(_g);this._setFixedRow( -1);}else{var _h=this._getDataRow(this._endrowpos);var _i=_f._matrix._getBodyRowTopPos(_h+1)-this._getScrollTop();var _j=this._getAvailableRect(_f);var _k=_f._matrix._rows.length;if(_i>=_j.height&&_h<_c&&(_k%2!=1)&&this._vscrollmng.max>0){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}if(this._isUserChangeHeadRowSize||this._isUserChangeBodyRowSize||this._isUserChangeSummRowSize){this._recreate_contents_all(true,false,true,undefined,_g);}else{this._resetRowSizeList(_g);this._resetColSizeList(_g);this._resetScrollMax();}if(_a=="deleterow"){var _l=this._dsRowToDispRow(_c);this._jumpCurrentRow(_l);}else{}}else{if(_a=="insertrow"){}else{if(this._hasTree){this._initTreeStates((_a=="addrow"||_a=="appenddata"||_a=="deleterow"));}}if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,false,false,undefined,_g);}else if(this.autosizingtype=="row"){this._recreate_contents_all(true,false,false,undefined,_g);}else{if(this._hasTree){this._recreate_contents_all(true,false,false,undefined,_g);}else{this._updateBodyClient(_a,_c,_g);}}}}}else{if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate_contents_all(true,false);}}else if(_a=="exchangerow"||_a=="moverow"){if(this.autosizingtype!="none"||this._hasTree){this._initTreeStates(true);if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate_contents_all(false,false,true);}else{this._refreshBody();}}else if(_a=="rowtype"){if(!this.enableredraw){this._enable_redraw_history.refreshall=true;return;}this._refreshAll();}else{this._initTreeStates();if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate_contents_all(true,false);}this._moveCellAfterFocus();}};_pGrid._getDisplayRowCount=function(){var _a=this._bodyBand;if(_a){return _a._get_rows().length;}return 0;};_pGrid._needUpdateExtinner=function(_a){var _b=(this.vscrollbar)?this.vscrollbar._pos:0;var _c=this._bodyBand;var _d=_c._control_element._getExtendContainerCount();if(_d>0&&(_a||_b>(this._div_max_height-(this._getClientWidth()* 2)))){return true;}return false;};_pGrid._updateBodyClient=function(_a,_b,_c){var _d=this._bodyBand;if(!_d){return;}var _e=this._fixed_height;this._resetRowSizeList(_c);this._resetColSizeList(_c);if((_e!=this._fixed_height)&&this._bodyBand){this._bodyBand._control_element._setFixArea(this._fixed_height);}this._resetScrollMax();this._applyAutofittype(true);var _f=this._getDisplayRowCount();var _g;var _h;var _i;var _j;var _k;var _l;var _m;if(_a=="insertrow"){if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,true);}else{_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();_g=_d._get_rows();_h=_g.length;for(_k=0;_k<_h;_k++ ){_j=this._getDataRow(_g[_k]._rowidx);if(_b>_j){continue;}_d._update_rows.push(_g[_k]);}_d._on_refresh_rows();}_i=this._dsRowToDispRow(_b);this._jumpCurrentRow(_i);}else if(_a=="deleterow"){_m=(this._vscrollmng)?this._vscrollmng._pos:0;_m-=this._is_over_scroll;if(_m<0){_m=0;}if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,true);}else{this._toprowpos=this._getScreenTopRowPos(_m);this._bottomrowpos=this._getScreenBottomRowPos(_m);_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();_g=_d._get_rows();_h=_g.length;for(_k=0;_k<_h;_k++ ){_j=this._getDataRow(_g[_k]._rowidx);if(_b>_j){continue;}_d._update_rows.push(_g[_k]);}_d._on_refresh_rows();}_b=this._binddataset.rowposition;_i=this._dsRowToDispRow(_b);this._jumpCurrentRow(_i);_l=this._last_scroll_top;if(_l!=_m){_d._update_rows=_d._matrix._adjustScrollRows(_m);}_d._on_refresh_rows();if(this._is_over_scroll>0){this._vscrollmng.setPos(this._vscrollmng.pos-1);}}else if(_a=="load"){if(this._needUpdateExtinner()){this._recreate_contents_all(false,true,true);}else{this._toprowpos=this._getScreenTopRowPos(0);this._bottomrowpos=this._getScreenBottomRowPos(0);_d._update_rows=_d._matrix._adjustScrollRows(0,true);_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();_d._on_refresh_rows();this._vscrollmng.setPos(0);}}else if(_a=="progressload"){if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,true);}}else{_m=(this._vscrollmng)?this._vscrollmng._pos:0;_m-=this._is_over_scroll;if(_m<0){_m=0;}this._toprowpos=this._getScreenTopRowPos(_m);this._bottomrowpos=this._getScreenBottomRowPos(_m);if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,true);}else{if(_a=="filterrow"||_a=="deletemultirows"||_a=="filter"){_d._matrix._init();}_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();}_l=this._last_scroll_top;if(_l!=_m){_d._update_rows=_d._matrix._adjustScrollRows(_m);}_d._on_refresh_rows();if(this._is_over_scroll>0){this._vscrollmng.setPos(this._vscrollmng.pos-1);}}var _n=this._getDisplayRowCount();if(this.fillareatype!="none"||_a=="load"){this._refreshBody();}this._updateNodata(_f,_n);if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}};_pGrid.set_enableredraw=function(_a){if(_a!=null&&this.enableredraw!=_a){_a=nexacro._toBoolean(_a);this.enableredraw=_a;if(_a){if(this._curFormat){this._curFormat._updateFormatStr();}this.on_apply_enableredraw();}}return _a;};_pGrid.on_apply_enableredraw=function(){nexacro.Component.prototype.on_apply_enableredraw.call(this);if(this._enable_redraw_history.recreate){this.redraw();this._enable_redraw_history={};return;}var _a=this._binddataset;if(_a&&_a.oncolumnchanged&&_a.oncolumnchanged._firestat){this._recreate_contents_all(true,false);this._enable_redraw_history={};return;}if(this._enable_redraw_history.recreate_body){this._resetRowSizeList();this._resetColSizeList();if(this._bodyBand){this._bodyBand._recreate_contents();}}else if(this._enable_redraw_history.refresh_body&&!this._enable_redraw_history.refreshall){this._refreshBody(true);}if(this._enable_redraw_history.recreate_head){this._resetRowSizeList();this._resetColSizeList();if(this._headBand){this._headBand._recreate_contents();}}else if(this._enable_redraw_history.refresh_head&&!this._enable_redraw_history.refreshall){this._refreshHead(true);}if(this._enable_redraw_history.recreate_summ){this._resetRowSizeList();this._resetColSizeList();if(this._summBand){this._summBand._recreate_contents();}}else if(this._enable_redraw_history.refresh_summ&&!this._enable_redraw_history.refreshall){this._refreshSumm(true);}if(this._enable_redraw_history.refreshall){this._refreshAll(true);}if(this._enable_redraw_history.resize_band){this._resizeBand();}var _b;var _c;var _d;if(this._enable_redraw_history.updatecolsize){_b=this._enable_redraw_history.updatecolsize;_c=_b.length;var _e=_b[0];for(_d=1;_d<_c;_d++ ){_e=Math.min(_b[_d],_e);}this._updateColSize(_e);}if(this._enable_redraw_history.updaterowsize){_b=this._enable_redraw_history.updaterowsize;_c=_b.length;for(_d=0;_d<_c;_d++ ){this._updateRowSize(_b[_d][0],_b[_d][1],(_d<_c-1));}}if(this._enable_redraw_history.autofit){var _f=this._enable_redraw_history.autofit;this._applyAutofittype(_f[0],_f[1]);}this._enable_redraw_history={};};_pGrid._isSelectedCell=function(_a,_b){var _c=this._selectinfo.getSelectCells(_b);if(!this._isSelectRowType()){if(_c&&_c[_a]){return true;}}else{if(_c){return true;}}return false;};_pGrid.isSelectedCell=function(_a,_b,_c,_d){if(arguments.length==0){return false;}else if(arguments.length==1){_b="body";_c=0;}else if(arguments.length==2){if(_b){_b=_b.toLowerCase();}if(_b=="body"){_c=0;}else if((_b=="summ"||_b=="summary")){_c= -2;}else{_c= -1;}}else if(arguments.length==3){if(_b){_b=_b.toLowerCase();}if((_b=="summ"||_b=="summary")){_c= -2;}else if(_b=="head"){_c= -1;}}return this._isSelectedCell(_a,_c);};_pGrid.getSelectedRows=function(){var _a=[].concat(this._selectinfo.rows);var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=this._getTreeRowPosition(_a[_c]);}return _b;};_pGrid.getSelectedDatasetRows=function(){var _a=[].concat(this._selectinfo.rows);for(var _b=0;_b<_a.length;_b++ ){if(_a[_b]<0){_a.splice(_b,1);_b-- ;}}if(_a.length==0){_a= -9;}return _a;};_pGrid.clearSelect=function(){this._selectinfo.area=[];this._resetSelect( -1, -1, -1, -1, -9);return true;};_pGrid.selectRow=function(_a,_b){if(!this._isSelectRowType()){return false;}if(_b==undefined){_b=true;}_a=this._getDataRow(_a);return this._selectRow(_a,_b);};_pGrid.selectCell=function(_a,_b,_c){if(this.selecttype!="multicell"&&this.selecttype!="cell"){return false;}if(_c==undefined){_c=true;}return this._selectRow(_a,_c,false,_b);};_pGrid.selectArea=function(_a,_b,_c,_d){if(!this._isAreaSelect()){return false;}var _e,_f,_g,_h;var _i,_j,_k;var _l,_m,_n,_o,_p;var _q=this._selectinfo.curcell;var _r=this._selectinfo.curcol;var _s=this._selectinfo.curdsrow;var _t=this._selectinfo.cursubrow;var _u=this._selectinfo.curpvt;var _v=this._curFormat;var _w=function(_z,_aa){for(_f=0,_h=_z.length;_f<_h;_f++ ){if(_z[_f]._cellidx==_aa){_i=_z[_f];break;}}return _i;};if(_a>_c){_j=_a;_a=_c;_c=_j;}if(_b>_d){_j=_b;_b=_d;_d=_j;}var _x=[_a,_c];var _y=[_b,_d];for(_e=0,_g=_x.length;_e<_g;_e++ ){switch(_x[_e]){case  -1:_l="head";_m=_w(_v._headcells,_y[_e]);break;case  -2:_l="summ";_m=_w(_v._summcells,_y[_e]);break;default:_l="body";_m=_w(_v._bodycells,_y[_e]);break;}if(_m){_n=_m._cellidx;_o=_m._col;_p=_m._row;this._setSelectedInfo(_n,_o,_x[_e],_p,null);if(_e==0){_k="func_area1";if(this._isMultiSelect()){this._multiselect="ctrl";}else{this._clrMultiSelect();this._multiselect="none";}}else if(_e==1){_k="func_area2";this._multiselect="shift";}_i=this._ChangeSelect(_n,_o,_x[_e],_p,this._selectinfo.curpvt,false,_q,_r,_s,_t,_u,_l,_k);}}return _i;};_pGrid._selectRow=function(_a,_b,_c,_d,_e){var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curdsrow;var _i=this._selectinfo.cursubrow;var _j=this._selectinfo.curpvt;var _k="body";if(_a== -1){_k="head";}else if(_a== -2){_k="summ";}this._setSelectedInfo(null,null,_a,0,null);if(_k!="body"&&_d==undefined){_d=0;}if(_d!=undefined){var _l;if(_k=="head"){_l=this._curFormat._headcells;}else if(_k=="summ"){_l=this._curFormat._summcells;}else{_l=this._curFormat._bodycells;}if(!_l||!_l.length){return false;}var _m=_l[_d]._col;var _n=_l[_d]._row;this._setSelectedInfo(_d,_m,null,_n,null);}var _o=false;if(!_e){_e=false;}var _p=(_d!=undefined)?_d:((this._selectinfo.curcell<0)?0:this._selectinfo.curcell);var _q=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;var _r=_a;var _s=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;var _t=this._selectinfo.curpvt;var _u=this.isSelectedCell((_d==undefined?0:_d),_k,_a);if(_b!=_u){if(this._isMultiSelect()){this._multiselect="ctrl";_o=this._ChangeSelect(_p,_q,_r,_s,_t,_e,_f,_g,_h,_i,_j,_k,"func_selectrow");}else{this._clrMultiSelect();_o=true;if(_b){_o=this._ChangeSelect(_p,_q,_r,_s,_t,false,_f,_g,_h,_i,_j,_k,"func_selectrow");}}this._moveCellAfterFocus();}else{this._setSelectedInfo(null,null,_h,0,null);if(_d!=undefined){this._setSelectedInfo(_f,null,null,null,null);}}if(!_c){this._refreshBody();if(_k=="head"){this._refreshHead();}else if(_k=="summ"){this._refreshSumm();}}return _o;};_pGrid._on_killfocus=function(_a,_b){if(!this._is_alive){return;}if(this._binddataset&&this._binddataset.cancolumnchange&&this._binddataset.cancolumnchange._firestat){this._hideEditor(true,true);}else{this._hideEditor(false,true);}this._focusSelectorPoint(false);if(nexacro._enableaccessibility){this._accept_arrow=false;this._acceptstab=false;}this._is_async_recreate=false;};_pGrid._focusSelectorPoint=function(_a){if(this._isAreaSelect()){if(this._select_ctrl){this._select_ctrl._trackbar[0].set_visible(_a);this._select_ctrl._trackbar[1].set_visible(_a);this._select_ctrl._trackbar[2].set_visible(_a);this._select_ctrl._trackbar[3].set_visible(_a);}}};_pGrid._on_focus=function(_a,_b,_c,_d,_e,_f){this._acceptstab=true;if(this._showEditorFocus){return;}var _g=false;if(!_a){this._focusSelectorPoint(true);}if(_b=="tabkey"||_b=="shifttabkey"){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._bodyBand&&(_a==false||nexacro._enableaccessibility)){var _h=this._bodyBand._get_rows();if(_h.length>0){if(_h[0]._cells&&_h[0]._cells.length>0){var _i=null;this._showEditorFocus=true;if(_b=="shifttabkey"){_i=this._getLastEditableCell();if(_i.row!==null){if(this._vscrollmng){this._vscrollmng.setPos(this._vscrollmng.max);}_g=this._moveToPosCell(_i.row,_i.cell);}}else{_i=this._getFirstEditableCell();if(_i.row!==null){if(this._vscrollmng){this._vscrollmng.setPos(0);}_g=this._moveToPosCell(_i.row,_i.cell);}}if(nexacro._enableaccessibility&&_i.row!==null){this._currentBand="body";var _j=this._getAccessibilityCurrentCell();if(_j){if(_b=="tabkey"){this._is_first_focus=true;this._is_first_bodycell=true;}this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}this._showEditorFocus=false;}}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(nexacro._enableaccessibility){this._accept_arrow=true;this._acceptstab=true;_g=false;if((nexacro._accessibilitytype==4||nexacro._accessibilitytype==5)&&_b===undefined){this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}else{if(_a==false){if(_b=="lbuttondown"&&_f&&_f._type_name=="GridCellControl"){}else if(this.autoenter=="select"){if(nexacro._Browser=="IE"||nexacro._Browser=="Opera"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){this._onceTime_focus=true;}var _j=this._findCellObj(_f);if(_j&&_j._type_name!="GridCellControl"){_j=null;}this._showEditorFocus=true;this._showEditor(_j);this._showEditorFocus=false;this._onceTime_focus=false;}}}}if(nexacro._enableaccessibility){this._is_first_focus=false;}return _g;};_pGrid.on_fire_oninput=function(){var _a=this._selectinfo.curcell;var _b=this._selectinfo.curcol;var _c=this._selectinfo.curpvt;var _d=this._selectinfo.curdsrow;var _e=this._selectinfo.cursubrow;if(this.oninput&&this.oninput._has_handlers){var _f=new nexacro.GridInputEventInfo(this,_a,_b,_d,_e,_c,"oninput");return this.oninput._fireEvent(this,_f);}return true;};_pGrid.on_fire_cantreestatuschange=function(_a,_b,_c){var _d=this._selectinfo.curcell;if(this.cantreestatuschange&&this.cantreestatuschange._has_handlers){var _e=new nexacro.GridTreeStatusEventInfo(this,"cantreestatuschange",_d,_b,_a,_c);return this.cantreestatuschange._fireEvent(this,_e);}return true;};_pGrid.on_fire_ontreestatuschanged=function(_a,_b,_c){var _d=this._selectinfo.curcell;if(this.ontreestatuschanged&&this.ontreestatuschanged._has_handlers){var _e=new nexacro.GridTreeStatusEventInfo(this,"ontreestatuschanged",_d,_b,_a,_c);return this.ontreestatuschanged._fireEvent(this,_e);}return true;};_pGrid.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(this.oncloseup&&this.oncloseup._has_handlers){var _k=this._evtvalue(_a,_e);var _l=new nexacro.GridEditEventInfo(this,"oncloseup",_f,_g,_h,_i,_j,_k);this._is_up_act=true;var _m=this.oncloseup._fireEvent(this,_l);this._is_up_act=false;return _m;}return true;};_pGrid.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=this._selectinfo.curcell;var _c=this._selectinfo.curcol;var _d=this._selectinfo.curpvt;var _e=this._selectinfo.curdsrow;var _f=this._selectinfo.cursubrow;var _g=this._evtvalue(_a);var _h=new nexacro.GridEditEventInfo(this,"ondropdown",_b,_c,_d,_e,_f,_g);return this.ondropdown._fireCheckEvent(this,_h);}return true;};_pGrid.on_fire_onenterdown=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this.readonly){return;}if(this.onenterdown&&this.onenterdown._has_handlers){var _i=this._selectinfo.curcell;var _j=this._selectinfo.curcol;var _k=this._selectinfo.curpvt;var _l=this._selectinfo.curdsrow;var _m=this._selectinfo.cursubrow;var _n=this._evtvalue(_f,_g,true);var _o=new nexacro.GridEditEventInfo(this,"onenterdown",_i,_j,_k,_l,_m,_n);return this.onenterdown._fireEvent(this,_o);}return true;};_pGrid.on_fire_onexpanddown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.readonly){return;}var _n=_k;_n=this._findCellObj(_n);var _o;if(_n){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;if(this.onexpanddown&&this.onexpanddown._has_handlers){var _q=this._makeEventInfo(_n,_o,_l);var _r=this._getRootComponent(_l);var _s=_q.cell;var _t=_q.col;var _u=_q.mergecell;var _v=_q.mergecol;var _w=_q.mergerow;var _x=_q.pivotindex;var _y=_q.row;var _z=_q.subrow;var _aa=new nexacro.GridMouseEventInfo(_r,"onexpanddown",_s,_t,_u,_v,_w,_x,_y,_z,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onexpanddown._fireEvent(this,_aa);}return false;};_pGrid.on_fire_onexpandup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.readonly){return;}var _n=_k;_n=this._findCellObj(_n);var _o;if(_n){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;if(this.onexpandup&&this.onexpandup._has_handlers){var _q=this._makeEventInfo(_n,_o,_l);var _r=this._getRootComponent(_k);var _s=_q.cell;var _t=_q.col;var _u=_q.mergecell;var _v=_q.mergecol;var _w=_q.mergerow;var _x=_q.pivotindex;var _y=_q.row;var _z=_q.subrow;var _aa=new nexacro.GridMouseEventInfo(_r,"onexpandup",_s,_t,_u,_v,_w,_x,_y,_z,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._is_up_act=true;var _ab=this.onexpandup._fireEvent(this,_aa);this._is_up_act=false;return _ab;}return false;};_pGrid.on_fire_oncolresized=function(_a){if(this.oncolresized&&this.oncolresized._has_handlers){var _b=_a[0];var _c=_a[1];var _d=_a[2];var _e=_a[3];var _f=_a[4];var _g=new nexacro.GridSizeChangedEventInfo(this,"oncolresized",_b,_c,_d,_e,1,_f);return this.oncolresized._fireEvent(this,_g);}return false;};_pGrid.on_fire_onrowresized=function(_a){if(this.onrowresized&&this.onrowresized._has_handlers){var _b=_a[0];var _c=_a[1];var _d=_a[2];var _e=_a[3];var _f=_a[4];var _g=new nexacro.GridSizeChangedEventInfo(this,"onrowresized",_b,_c,_d,_e,2,_f);return this.onrowresized._fireEvent(this,_g);}return false;};_pGrid.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){if(!this._is_alive){return;}if(!this.enable){return true;}if(this.oncellimeaction&&this.oncellimeaction._has_handlers){var _h=this._selectinfo.curcell;var _i=this._selectinfo.curcol;var _j=this._selectinfo.curpvt;var _k=this._selectinfo.curdsrow;var _l=this._selectinfo.cursubrow;var _m=new nexacro.GridKeyEventInfo(this,"oncellimeaction",_h,_i,_j,_k,_l,_c,_d,_e,_b);return this.oncellimeaction._fireEvent(this,_m);}return false;};_pGrid._is_recreating=false;_pGrid._recreate=function(){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return true;}if(!this.getElement()){return false;}var _a={"act":""};var _b=this._isDownActionKeyMouse(_a)||this._is_down_act;if(_b&&!this._userRowposChange&&!this._is_after_recreate){this._after_recreate=true;this._startAfterRecreateTimer(_a.act);return;}this._is_recreating=true;var _c=(this._vscrollmng)?this._vscrollmng._pos:0;var _d=(this._hscrollmng)?this._hscrollmng._pos:0;this._destroyBands();this._createBandsAndAreas();this._autosizeMergeCell();this._refreshBody();this._onResetScrollBar();this._recreate_contents_proc=[];if(this._vscrollmng){this._vscrollmng.setPixelPos(0);this._vscrollmng.setPixelPos(_c);}if(this._hscrollmng){this._hscrollmng.setPos(0);this._hscrollmng.setPos(_d);}this._destroyHighlightRow();this._createHighlightRow();this._is_recreating=false;if(this.autoenter=="select"){this._showEditor();}return true;};_pGrid.set_createcellasync=function(_a){if(_a!=null){_a=nexacro._toBoolean(_a);this.createcellasync=_a;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){this._async_create=_a;}else{this._async_create=false;}}};_pGrid.set_cellcombobuttonsize=function(_a){if(_a!=this.cellcombobuttonsize){this.cellcombobuttonsize=_a;this.on_apply_cellcombobuttonsize();}};_pGrid.on_apply_cellcombobuttonsize=function(){this._refreshAll();};_pGrid.set_cellcalendarbuttonsize=function(_a){if(_a!=this.cellcalendarbuttonsize){this.cellcalendarbuttonsize=_a;this.on_apply_cellcalendarbuttonsize();}};_pGrid.on_apply_cellcalendarbuttonsize=function(){this._refreshAll();};_pGrid.set_cellcomboscrollbarsize=function(_a){if(_a!=this.cellcomboscrollbarsize){this.cellcomboscrollbarsize=_a;this.on_apply_cellcomboscrollbarsize();}};_pGrid.on_apply_cellcomboscrollbarsize=function(){this._refreshAll();};_pGrid.set_celltextareascrollbarsize=function(_a){if(_a!=this.celltextareascrollbarsize){this.celltextareascrollbarsize=_a;this.on_apply_celltextareascrollbarsize();}};_pGrid.on_apply_celltextareascrollbarsize=function(){this._refreshAll();};_pGrid.set_cellcalendarpopuptype=function(_a){if(_a!=this.cellcalendarpopuptype){this.cellcalendarpopuptype=_a;this.on_apply_cellcalendarpopuptype();}};_pGrid.on_apply_cellcalendarpopuptype=function(){this._refreshAll();};_pGrid.set_cellcombopopuptype=function(_a){if(_a!=this.cellcombopopuptype){this.cellcombopopuptype=_a;this.on_apply_cellcombopopuptype();}};_pGrid.on_apply_cellcombopopuptype=function(){this._refreshAll();};_pGrid.set_cellcalendarpopupsize=function(_a){if(_a!=this.cellcalendarpopupsize){this.cellcalendarpopupsize=_a;this.on_apply_cellcalendarpopupsize();}};_pGrid.on_apply_cellcalendarpopupsize=function(){this._refreshAll();};_pGrid.set_cellcombopopupsize=function(_a){if(_a!=this.cellcombopopupsize){this.cellcombopopupsize=_a;this.on_apply_cellcombopopupsize();}};_pGrid.on_apply_cellcombopopupsize=function(){this._refreshAll();};_pGrid.set_cellcheckboxsize=function(_a){if(_a!=this.cellcheckboxsize){this.cellcheckboxsize=_a;this.on_apply_cellcheckboxsize();}};_pGrid.on_apply_cellcheckboxsize=function(){this._refreshAll();};_pGrid.set_cellexprupdatecondition=function(_a){switch(_a){case "all":case "celltext":case "none":if(_a!=this.cellexprupdatecondition){this.cellexprupdatecondition=_a;this.on_apply_cellexprupdatecondition();}break;}};_pGrid.on_apply_cellexprupdatecondition=function(){this._clearBindTypeFlag();this._refreshAll();};_pGrid._recreate_contents_all_async=function(_a,_b,_c,_d,_e){nexacro._OnceCallbackTimer.callonce(this,function(){return this._recreate_contents_all(_a,_b,_c,_d,_e);});};_pGrid._isDownActionKeyMouse=function(_a){if(this._is_up_act){return false;}var _b=this._getWindow();if(_b&&(_b._cur_ldown_elem||_b._keydown_element)){var _c=_b._cur_ldown_elem||_b._keydown_element,_d=_b.findComponent(_c,0,0)[0],_e=false;if(_a){if(_b._cur_ldown_elem){_a["act"]="L";}else if(_b._keydown_element){_a["act"]="K";}}while(_d){if(_d instanceof nexacro.ScrollBarControl){break;}if(_d instanceof nexacro.Grid&&_d==this&&_d.id==this.id){_e=true;break;}_d=_d.parent;}return _e;}return false;};_pGrid._startAfterRecreateTimer=function(_a){var _b=this;if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}this._afterrecreatetask=new nexacro._CallbackTimer(this,function(_c){return _b._callbackAfterRecreateTimer(_a);},100);this._afterrecreatetask.start();};_pGrid._callbackAfterRecreateTimer=function(_a){if(_a=="K"){this._on_last_keyup();}if(this._afterrecreatetask){this._afterrecreatetask.destroy();this._afterrecreatetask=null;}};_pGrid._recreate_contents_all=function(_a,_b,_c,_d,_e){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}var _f={"act":""};var _g=this._isDownActionKeyMouse(_f)||this._is_down_act;if(_g&&!this._userRowposChange&&!this._is_after_recreate){var _h=[_a,_b,_c,_d];if(this._after_recreate_contents_all){_h[0]=_h[0]||this._after_recreate_contents_all[0];_h[1]=_h[1]||this._after_recreate_contents_all[1];_h[2]=_h[2]||this._after_recreate_contents_all[2];_h[3]=_h[3]&&this._after_recreate_contents_all[3];_h[2]=_h[4]||this._after_recreate_contents_all[4];}this._after_recreate_contents_all=_h;this._startAfterRecreateTimer(_f.act);return;}var _i=this._getDisplayRowCount();if(_a){this._resetRowSizeList(_e);this._resetColSizeList(_e);this._is_contents_recreating=true;this._resizeBand();this._is_contents_recreating=false;if(this._bodyBand){this._bodyBand._recreate_contents(_b,false,_d);this._bodyBand._matrix._adjustColsDisplay(true);}if(!_c){if(this._headBand){this._headBand._recreate_contents();this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._recreate_contents();this._summBand._matrix._adjustColsDisplay(true);}}else{if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}}this._autosizeMergeCell();}else{if(this._bodyBand){this._bodyBand._recreate_contents(_b,false,_d);}if(!_c){if(this._headBand){this._headBand._recreate_contents();}if(this._summBand){this._summBand._recreate_contents();}}else{if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}}}var _j=this._getDisplayRowCount();this._updateNodata(_i,_j);this._updateSelector();this._adjustOverlayControls(true);};_pGrid._updateNodata=function(_a,_b){if((_a==0&&_b>0)||(_a>0&&_b==0)){var _c=this._bodyBand;if(_c){_c._updateAll(true);}else{}}};_pGrid._getBodyRowsSize=function(_a,_b,_c,_d){if(this._rowSizeList.length){if(_a>=0&&_b>=0){var _e=this._curFormat._bodyrows;var _f=_e.length;var _g=0;var _h,_i;for(_h=_a;_h<=_b;_h++ ){if(_c&&_h==_a){for(_i=_c;_i<_f;_i++ ){_g+=this._rowSizeListSub[(_h* _f)+_i];}}else if(_d&&_h==_b){for(_i=0;_i<=_d;_i++ ){_g+=this._rowSizeListSub[(_h* _f)+_i];}}else{_g+=this._rowSizeList[_h];}}return _g;}}return 0;};_pGrid._getRowSize=function(_a){var _b=this._curFormat;if(_a== -1){if(this._rowHeadList.length>0){return this._rowHeadList[0];}else{return _b.headHeight;}}else if(_a== -2){if(this._rowSummList.length>0){return this._rowSummList[0];}else{return _b.summHeight;}}else{var _c=this._getDataRow(_a);if(_c>=0){if(this._rowSizeList.length>0){return this._rowSizeList[_c];}else{return _b._body_height;}}}return  -1;};_pGrid._getHeadHeight=function(){var _a=this._curFormat;if(_a==null||_a._headband==null){return 0;}var _b=this._rowHeadList[0];if(_b==undefined){_b=_a.headHeight;}return _b;};_pGrid._getSummHeight=function(){var _a=this._curFormat;if(_a==null||_a._summband==null){return 0;}var _b=this._rowSummList[0];if(_b==undefined){_b=_a.summHeight;}return _b;};_pGrid._createBandsAndAreas=function(_a){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}var _b=this._curFormat;if(_b==null){return;}this._applyAutofittype(false);var _c=this._curFormat._bodycells;var _d=_c?_c.length:0;var _e;for(var _q=0;_q<_d;_q++ ){_e=_c[_q];if(_e.suppress!=0){this._is_use_suppress=true;}if(_e.wordwrap!="none"){this._is_body_wordwrap=true;}if(this._is_use_suppress&&this._is_body_wordwrap){break;}}_c=this._curFormat._headcells;_d=_c?_c.length:0;for(_q=0;_q<_d;_q++ ){_e=_c[_q];if(_e.wordwrap!="none"){this._is_head_wordwrap=true;break;}}_c=this._curFormat._summcells;_d=_c?_c.length:0;for(_q=0;_q<_d;_q++ ){_e=_c[_q];if(_e.wordwrap!="none"){this._is_summ_wordwrap=true;break;}}var _f=this._getAvailableRect(this);var _g=_f.width;var _h=_f.height;var _i=this.getElement();var _j,_k;var _l=_b.headHeight;var _m=_b.summHeight;if(this.summarytype=="top"||this.summarytype=="lefttop"){_j=_l+_m;_k=_h;}else{_j=_l;_k=_h-_m;}if(_k<_j){_k=_j;}var _n,_o,_p;if(_b._bodyband){this._bodyBand=_n=new nexacro._GridBandControl("body",0,_j,_g,_k-_j,null,null,this,_b._bodyband);this.body=_b._bodyband;}if(_m>0){_f=this._getAvailableRect(this);_g=_f.width;_h=_f.height;if(this.summarytype=="top"||this.summarytype=="lefttop"){_j=_l;_k=_l+_m;}else{_k=_h;_j=_k-_m;}this._summBand=_o=new nexacro._GridBandControl("summary",0,_j,_g,_k-_j,null,null,this,_b._summband);this.summ=this.summary=_b._summband;}else{this._summBand=null;}if(_l>0){_f=this._getAvailableRect(this);_g=_f.width;_j=0;_k=_l;this._headBand=_p=new nexacro._GridBandControl("head",0,_j,_g,_k-_j,null,null,this,_b._headband);this._headBand._is_scrollable=false;this.head=_b._headband;}else{this._headBand=null;}this._resetRowSizeList();this._resetColSizeList();this._is_createbandarea=true;if(_p){this._headBand.createComponent();}if(_n){this._bodyBand.createComponent();_i.setVertScrollElements(this._bodyBand._control_element);this.on_apply_fastvscrolltype();this.on_apply_scrolldisplaymode();}if(_o){this._summBand.createComponent();}this._is_createbandarea=false;this._grid_creating=_a;this._resizeBand(false);this._grid_creating=false;};_pGrid._band_scroll_tops=null;_pGrid._setScrollMaxSize=function(_a,_b,_c){if(_c){this._band_scroll_tops=_c;}if(this._control_element){this._control_element._setInnerElementScrollMaxTops(this._band_scroll_tops);if(_b==undefined){if(this._bodyBand){_b=this._bodyBand._scrollHeight;}else{_b=0;}}this._control_element.setElementScrollMaxSize(_a,_b);this._onResetScrollBar();}};_pGrid._resizing_band=0;_pGrid._after_resizeband=false;_pGrid._resizeBand=function(_a){if(!this._band_resizing_no_autofit){this._band_resizing_no_autofit=[];}if(this._band_resizing_no_autofit.length>0){_a=this._band_resizing_no_autofit[0];}this._band_resizing_no_autofit.push(_a);if(!this._grid_creating&&!this._is_created){this._after_resizeband=true;this._band_resizing_no_autofit.pop();return;}if(this._is_createbandarea){this._band_resizing_no_autofit.pop();return;}this._after_resizeband=false;var _b=this._getClientLeft();var _c=this._getClientTop();var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this._getHeadHeight();var _g=this._getSummHeight();var _h,_i,_j,_k;_h=_b;_j=_d;this._resizing_band++ ;if(this._bodyBand){if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_f+_g;_k=_e-_i;}else{_i=_f;_k=_e-_g-_i;}if(_k<0){_k=0;}this._bodyBand._update_size_contents=true;this._bodyBand.move(_h,_i,_j,_k);this._bodyBand._update_size_contents=false;}_d=this._getClientWidth();_e=this._getClientHeight();if(this._summBand){if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_f;_k=_f+_g-_i;}else{_j=_d;_i=_e-_g;_k=_e-_i;}this._summBand._update_size_contents=true;this._summBand.move(_h,_i,_j,_k);this._summBand._update_size_contents=true;}_d=this._getClientWidth();if(this._headBand){_j=_d;_i=_c;_k=_f;this._headBand._update_size_contents=true;this._headBand.move(_h,_i,_j,_k);this._headBand._update_size_contents=true;}if(!_a&&(this._colautofit||this._rowautofit)){this._applyAutofittype(true);}this._updateSelector();this._updateScrollInfo();this._resizing_band-- ;this._resetScrollMax();this._band_resizing_no_autofit.pop();};_pGrid._onResetScrollBar=function(){var _a=this._control_element;if(_a){var _b=this._getHScrollBarSize();var _c=this._getVScrollBarSize();var _d=false;var _e=false;var _f=this._getHScrollBarType();var _g=this._getVScrollBarType();var _h=this.scrolltype;var _i=false;var _j=false;if(_f!="none"){_e=true;}if(_g!="none"){_d=true;}if(this._is_form&&this.getStepCount()>0){_e=false;}var _k=_a.client_left;var _l=_a.client_top;var _m=_a.client_width;var _n=_a.client_height;var _o=_a.zoom/100;var _p=_a._target_vscroll_elements,_q=_p,_r=_a._target_hscroll_elements,_s=_r;if(nexacro._isArray(_p)){_q=_p[0];}if(nexacro._isArray(_r)){_s=_r[0];}var _t=(_q)?_q._calculateClientHeight(0):_n;var _u=(_s)?_s._calculateClientWidth(_m):_m;var _v=(_s)?_s.scroll_left:0;var _w=(_q)?_q._getScrollTop():0;if(this._isFastVscrolling()){_w=this.vscrollbar._pos;if(_w>_a.vscroll_limit){_w=_a.vscroll_limit;}}var _x=_u/_o;var _y=_t/_o;var _z,_aa,_ab,_ac;_z=_aa=_ab=_ac=0;var _ad=_a.padding?_a.padding:_a._padding_info;if(_a._apply_client_padding&&_ad){_z=_ad.left;_aa=_ad.top;_ab=_ad.right;_ac=_ad.bottom;}var _ae=_k-_z;var _af=_n+_aa+_ac;var _ag=_m+_z+_ab;var _ah=_m+_z+_ab;var _ai=_l-_aa;var _aj=_n+_aa+_ac;if(_e){this._createHScrollBar(_b);if(_b>0){if(_a.hscroll_limit<=0&&_f!="fixed"){_b=0;}if(_f=="autoindicator"){_af-=_b;this.hscrollbar.set_visible(false);}else{this.hscrollbar.set_visible(true);}}if(this._isEnable()&&_b>0&&(_h!="none"&&_h!="vertical")&&_a.hscroll_limit>0){_j=true;}}else{if(this.hscrollbar){this.hscrollbar.destroy();this.hscrollbar=null;}}if(_d){this._createVScrollBar(_c);if(_c>0){if(_a.vscroll_limit<=0&&_g!="fixed"){_c=0;}if(_g=="autoindicator"){_ah-=_c;this.vscrollbar.set_visible(false);}else{this.vscrollbar.set_visible(true);}if(this._isEnable()&&_c>0&&(_h!="none"&&_h!="horizontal")&&_a.vscroll_limit>0){_i=true;}}}else{if(this.vscrollbar){this.vscrollbar.destroy();this.vscrollbar=null;}}this._hscrollmng._setInfo(_ae,_af,_ag,_b,0,_a.hscroll_limit,this._scroll_default_value,_x,_x,_v);this._vscrollmng._setInfo(_ah,_ai,_c,_aj,0,_a.vscroll_limit,this._scroll_default_value,_y,_y,_w);if(this._hscroll_pos>_a.vscroll_limit){this._hscroll_pos=_a.hscroll_limit;}if(this._vscroll_pos>_a.vscroll_limit){this._vscroll_pos=_a.vscroll_limit;}if(this.hscrollbar){this.hscrollbar._setScrollInfo(_ae,_af,_ag,_b,0,_a.hscroll_limit,this._scroll_default_value,_x,_x,_j,_v);if(!this.hscrollbar._is_created){this.hscrollbar.on_created(this._getWindow());}}if(this.vscrollbar){this.vscrollbar._setScrollInfo(_ah,_ai,_c,_aj,0,_a.vscroll_limit,this._scroll_default_value,_y,_y,_i,_w);if(!this.vscrollbar._is_created){this.vscrollbar.on_created(this._getWindow());}}}};_pGrid._setHscrollElement=function(){if(!this._control_element){return;}var _a=[];var _b;var _c,_d;if(this._bodyBand){_b=this._bodyBand._get_rows();for(_c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(this._headBand){_b=this._headBand._matrix._rows;for(_c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(this._summBand){_b=this._summBand._matrix._rows;for(_c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(_a.length==0){_a=null;}this._control_element.setHorzScrollElements(_a);};nexacro._bigdata_innertest=0;if(nexacro._bigdata_innertest){_pGrid._div_max_height=1000;}else if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_pGrid._div_max_height=1530000;}else if(nexacro._Browser=="Gecko"){_pGrid._div_max_height=17890000;}else{_pGrid._div_max_height=5000000;}_pGrid._resetScrollMax=function(_a){if(this._resizing_band>0){return;}if(!_a){_a=this._bodyBand;}if(!_a){return;}var _b=this._curFormat;var _c=this._getGridRowCount();var _d=_b.bodyWidth;var _e=this._rowSizeList;var _f;var _g=[];var _h=1;var _i=this._div_max_height;var _j=0;for(var _k=0;_k<_c;_k++ ){_f=this._getDataRow(_k);_j+=_e[_f];if(_j-this._fixedrow_height>=_i* _h){_g.push(_j-_e[_f]);_h++ ;}}_j-=this._fixedrow_height;_g.push(_j);_a._scrollHeight=_j;_a._scrollWidth=_d;this._setScrollMaxSize(_a._scrollWidth,_a._scrollHeight,_g);};_pGrid._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Format");var _d=_c?_c.length:0;var _e="";this._format_str=[];this._autofitcol_rate=[];for(var _i=0;_i<_d;_i++ ){var _f=_c[_i];var _g=_f.getAttribute("id");if(_g==null||_g==""){_g="default";}if(_e==""||_g=="default"){this._default_formatid=_e=_g;}var _h=new nexacro.GridFormat(_g,this);_h._loadFromDOM(_f);this._formats[_g]=_h;this._format_str.push(_g);}this.formats=_a;if(this.formatid==""||(this._is_created&&this.formatid!=_e)){this.formatid=_e;}this._curFormat=this._formats[this.formatid];this._clearTempBand();return true;};_pGrid._destroyBands=function(_a){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}if(!_a){this._hideEditor(true);}if(this._bodyBand){if(this._control_element){this._control_element.setVertScrollElements(null);}this._bodyBand.destroy();this._bodyBand=null;this.body=null;}if(this._summBand){this._summBand.destroy();this._summBand=null;this.summary=null;this.summ=null;}if(this._headBand){this._headBand.destroy();this._headBand=null;this.head=null;}if(this._select_ctrl){this._select_ctrl.destroy();this._select_ctrl=null;}if(this.controlbutton){this.controlbutton=null;}if(this.controlcalendar){this.controlcalendar=null;}if(this.controlcheckbox){this.controlcheckbox=null;}if(this.controlcombo){this.controlcombo=null;}if(this.controledit){this.controledit=null;}if(this.controlmaskedit){this.controlmaskedit=null;}if(this.controltextarea){this.controltextarea=null;}if(this.controlprogressbar){this.controlprogressbar=null;}if(this.controlexpand){this.controlexpand=null;}this.on_apply_nodatatext();this._destroyOverlayControls();this._destroySelectionControls();};_pGrid._refreshAll=function(_a){this._refreshHead(_a);this._refreshSumm(_a);this._refreshBody(_a);};_pGrid._getBodyCellInfo=function(_a){if(this._curFormat&&this._curFormat._bodycells){var _b=this._curFormat._bodycells[_a];if(_b){return _b;}}return null;};_pGrid._isFastVscrolling=function(){return (this._covercontrol&&this._covercontrol.visible);};_pGrid._getBodyCellItem=function(_a,_b){return (this._bodyBand._get_rows()[_a]._cells[_b]);};_pGrid._refreshBodyCell=function(_a,_b,_c,_d,_e){if(!this.enableredraw){this._enable_redraw_history.refresh_body=true;return;}if(this._after_recreate){return;}if(_b<0){return;}var _f=this._bodyBand;if(_f){var _g=_f._get_rows();if(_g.length<=_b){return;}var _h=_g[_b]._rowidx;var _i=(this._hasTree)?this._treeIndexes[_h]:_h;var _j=this._isSelectedCell(_a,_i);if(_g[_b]){var _k=_g[_b]._cells[_a];var _l=_k._getDataRow();if(_e>=0){var _m=_k._refinfo._subcells[_e];if(_d&&_m&&_k.subcells[_e]["set_"+_d]){_k.subcells[_e]["set_"+_d](_m._getAttrValue(_m[_d],_l));}}else{var _n=_k._refinfo;if(_d&&_k["set_"+_d]){_k["set_"+_d](_n._getAttrValue(_n[_d],_l));}}_f._refreshRowCell(_b,_a,_j,undefined,undefined,_c);}}};_pGrid._refreshHead=function(_a){if(!this.enableredraw){this._enable_redraw_history.refresh_head=true;return;}if(this._after_recreate){return;}var _b=this._headBand;if(_b){var _c=_b._get_rows().length;_b._updateAll(_a);for(var _d=0;_d<_c;_d++ ){_b._refreshRow(_d);}}this._applyResizer();this._adjustOverlayControls(false,"head");};_pGrid._refreshSumm=function(_a){if(!this.enableredraw){this._enable_redraw_history.refresh_summ=true;return;}if(this._after_recreate){return;}var _b=this._summBand;if(_b){var _c=_b._get_rows().length;_b._updateAll(_a);for(var _d=0;_d<_c;_d++ ){_b._refreshRow(_d);}_b._updateAll(_a);}this._adjustOverlayControls(false,"summ");};_pGrid._refreshBody=function(_a,_b,_c,_d){if(!this.enableredraw){this._enable_redraw_history.refresh_body=true;return;}if(this._after_recreate){return;}var _e=this._bodyBand;if(_e){if(!_d){this._suppressUpdate();}var _f=this._getDispRowCnt();_e._updateAll(_a);for(var _g=0;_g<_f;_g++ ){_e._refreshRow(_g,undefined,_b);}if(!_c){this._adjustOverlayControls(this._is_recreating);}}};_pGrid._isSuppressSameRow=function(_a,_b,_c,_d){var _e,_f;if(_a=="treeitemcontrol"){return false;}_e=_d._getDisplayText(_b);_f=_d._getDisplayText(_c);if(_e==_f){return true;}return false;};_pGrid._isSuppressSameCol=function(_a,_b,_c,_d){var _e,_f;if(_a=="treeitemcontrol"){return false;}_e=_b._getDisplayText(_d);_f=_c._getDisplayText(_d);if(_e==_f){return true;}return false;};_pGrid._analyzeSuppress=function(_a){var _b=this._supphorztype;var _c=this._is_use_suppress;if(!_c&&!_b){return;}var _d=this._curFormat._bodycells;if(!_d){return;}var _e;if(_a){_e=this._getGridRowCount();}else{_e=this._getSuppRowTotal();}if(_e==0){return;}var _f=_d.length;var _g;var _h,_i,_j,_k;var _l,_m;for(_m=0;_m<_f;_m++ ){_g=_d[_m];if(_g.suppress==0&&_b==0){continue;}_g._clearSuppressInfo();var _n,_o,_p;var _q=0,_r=true,_s=null;for(_l=0;_l<=_e;_l++ ){if(nexacro._Browser=="Runtime"&&_a){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_j=(!_a)?this.__getBodyCellRowIdxFromIdx(_l):_l;_k=this._getDataRow(_j);_n=_g._getDisplaytype(_k);if(_c){_i=_g._getSuppress(_k);if(_l>0){_o=_g._getSuppressInfo(_l-1,true);}if(_i>0&&_l>0&&_o){if(_e==_l){break;}_p=this._getDataRow((!_a)?this.__getBodyCellRowIdxFromIdx(_l-1):_l-1);if(this._isFakeCell(_k)){continue;}if(this._isSuppressSameRow(_n,_p,_k,_g)){_o.last=false;_o.first=_r;if(_r){_s=_o;}_q++ ;_r=false;}else{_o.last=true;_o.same_rowcnt=_q;if(_s){_s.same_rowcnt=_q;_s=null;}_q=0;_r=true;}if(_k==this._rowcount-1){_h=_g._getSuppressInfo(_l,true);if(_s){_s.same_rowcnt=_q;}_h.last=true;_h.same_rowcnt=_q;}}}if(_b>0&&_m>0){var _t=_d[_m-1];if(this._treeCellinfo!=_t&&this._treeCellinfo!=_g){if(((_b==1||_b==3)&&_g._area=="left")||((_b==2||_b==3)&&_t._area=="right")){_h=_t._getSuppressInfo(_l,true);if(this._isSuppressSameCol(_n,_t,_g,_k)){_h.horzlast=false;_g._getSuppressInfo(_l,true);}else{_h.horzlast=true;}}}}}}if(!_c){return;}var _u=this.suppresslevel;if(_u=="sameskip"||_u=="allcompare"){_l=0;function __analyzeSuppress_row_loop2(_z){if(nexacro._Browser=="Runtime"&&_a){nexacro._peekWindowHandleMessageQueuePassing(_z._getWindow());}if(_l<_e){var _aa=[];var _ab=[];_j=(!_a)?_z.__getBodyCellRowIdxFromIdx(_l):_l;_k=_z._getDataRow(_j);for(_m=0;_m<_f;_m++ ){_g=_d[_m];_i=_g._getSuppress(_k);if(_i>0){_aa.push(_g);}if(_i<0){}}if(_aa.length>0){_aa.sort(function(_ae,_af){return _ae._getSuppress(_k)-_af._getSuppress(_k);});var _ac=_aa.length;for(var _ae=0;_ae<_ac;_ae++ ){_g=_aa[_ae];if(_g){for(var _af=0;_af<_f;_af++ ){if(_af==_g._col){continue;}_z._compareSuppressCol(_l,_af,_g._col,_u,_k);}}}}if(_ab.length>0){_ab.sort(function(_ag,_ah){return _ah._getSuppress(_k)-_ag._getSuppress(_k);});var _ad=_ab.length;for(var _ag=0;_ag<_ad;_ag++ ){_g=_ab[_ag];if(_g){for(var _ah=0;_ah<_f;_ah++ ){if(_ah==_g._col){continue;}}}}}_l++ ;return false;}return true;}while(true){if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}}}if(_e>0){var _v=0;var _w;var _x;for(_m=0;_m<_f;_m++ ){_w=0;var _y;for(_l=0;_l<_e;_l++ ){if(nexacro._Browser=="Runtime"&&_a){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_g=_d[_m];if(_g.suppress==0){continue;}_j=(!_a)?this.__getBodyCellRowIdxFromIdx(_l):_l;_k=this._getDataRow(_j);if(_g.suppressalign.indexOf("middle")<0){break;}_h=_g._getSuppressInfo(_l);_h.middle=false;_i=_g._getSuppress(_k);if(_i>0){_v++ ;if(_h.last==true){if(_v==1){_h.middle=true;}else{_y=Math.round(_v/2);_x=_g._getSuppressInfo(_w+_y-1);_x.middle=true;}_w=_l+1;_v=0;}}}}}};_pGrid._compareSuppressCol=function(_a,_b,_c,_d,_e){var _f=this._curFormat._bodycells;var _g=_f[_b];var _h=_f[_c];var _i,_j;var _k=_h._getSuppress(_e);var _l=_g._getSuppress(_e);if(_k<=0||_l<=0){return false;}if(_l<_k){_i=_g._getSuppressInfo(_a);_j=_h._getSuppressInfo(_a);if(_i.last==true){_j.last=true;}return true;}else if(_d=="allcompare"&&_l==_k){_i=_g._getSuppressInfo(_a);_j=_h._getSuppressInfo(_a);if(_i.last==true){_j.last=true;}if(_j.last==true){_i.last=true;}return true;}return false;};_pGrid.__getBodyCellRowIdxFromIdx=function(_a){var _b;if(this._fixed_rowcnt){if(_a+this._fixed_startrow<=this._fixed_endrow){_b=this._fixed_startrow;}else{_a-=this._fixed_rowcnt-this._fixed_startrow;_b=this._toprowpos[0];}}else{_b=this._toprowpos[0];}return _a+_b;};_pGrid._getSuppRowTotal=function(){var _a;var _b=this._disprowcnt;if(this._fixed_rowcnt>0){_a=this._fixed_rowcnt-this._fixed_startrow+_b;}else{_a=_b;}return _a;};_pGrid._suppressUpdate=function(){this._analyzeSuppress();var _a=this._supphorztype;var _b=this._is_use_suppress;if(!_b&&!_a){return;}if(!this._curFormat||!this._curFormat._bodycells){return;}var _c=this._getSuppRowTotal();for(var _d=0;_d<=_c;_d++ ){this._suppressUpdateRow(_d,0,_c-1);}};_pGrid._suppressUpdateRow=function(_a,_b,_c,_d){var _e=this._bodyBand;if(_e==null){return;}var _f=this._curFormat._bodycells;var _g=_f.length;var _h=(!_d)?this.__getBodyCellRowIdxFromIdx(_a):_a;var _i,_j,_k;var _l,_m,_n;var _o=this._getDataRow(_h);var _p=this._supphorztype;if(_o<0){return;}for(var _t=0;_t<_g;_t++ ){_i=_f[_t];_m=_i._getSuppressInfo(_a);_n=_i._getSuppress(_o);if(!_m){continue;}if(_n>0){if(_n>0&&(_a-_b)>0){_l=_i._getSuppressInfo(_a-1);}_j=(_l?_l.last:true);_k=(_a==_c?true:_m.last);if(_i.suppressalign.indexOf("first")>=0){if(_j==false){_m.text_proc=_n;}else{_m.text_proc=0;}}else if(_i.suppressalign.indexOf("last")>=0){if(_k==false){_m.text_proc=_n;}else{_m.text_proc=0;}}else if(_i.suppressalign.indexOf("middle")>=0){if(_m.middle==true){_m.text_proc=0;}else{_m.text_proc=_n;}}if(_l){if(_j==false){_l.border_proc=_n;}else{_l.border_proc=0;}}}else if(_n==undefined){if(_i.suppressalign.indexOf("first")>=0||_i.suppressalign.indexOf("middle")>=0){_m.text_proc=1;}}if(_p>0){if(_t>0){var _q=_f[_t-1];var _r=_q._getSuppressInfo(_a);if(!_r){continue;}var _s=false;if((_r.first||_r.last)&&(_m.first||_m.last)){if(_q._area=="left"){if(!_m.same_rowcnt){if(_r.horzlast==false){_s=true;_r.horz_border_proc=1;}if(_s){_m.horz_text_proc=1;}}}else if(_q._area=="right"){if(!_r.same_rowcnt){if(_r.horzlast==false){_s=true;_m.horz_border_proc=1;}if(_s){_r.horz_text_proc=1;}if(_s&&_m.horzlast==true){_m.horz_border_proc=1;}}}}}}}};_pGrid._refreshBodyRow=function(_a,_b,_c,_d){if(!this.enableredraw){this._enable_redraw_history.refresh_body=true;return;}if(this._after_recreate){return;}var _e=this._bodyBand;if(_e){var _f=_e._get_rows();if(_f.length<=_a){return;}var _g=this._getDispRowCnt();if(_a>=0&&_a<_g){var _h=_f[_a]._rowidx;var _i=(this._hasTree)?this._treeIndexes[_h]:_h;if(_i==undefined){return;}_e._refreshRow(_a,_b,_d,_c);}this._adjustOverlayControls(false);}};_pGrid._global_cursor=undefined;_pGrid._setGlobalCursor=function(_a,_b,_c){if(nexacro._cur_track_info||nexacro._cur_extra_track_info){return;}if(this._global_cursor!==_a){if(!_c){this._global_cursor=_a;}if(_a){this._global_cursor_obj=_b;}else if(!_b){_b=this._global_cursor_obj;}while(_b){_b._updateCursor(_a);if(_b instanceof nexacro.Grid){return;}if(_b==_c){return;}_b=_b.parent;}}};_pGrid._getColMergeInfo=function(_a,_b){var _c;if(_a=="head"){_c=this._curFormat._headcells;}else if(_a=="summ"||_a=="summary"){_c=this._curFormat._summcells;}else{_c=this._curFormat._bodycells;}if(!_c){return null;}var _d=_c.length;var _e;var _f=_b;var _g=1;var _h=[];for(var _i=0;_i<_d;_i++ ){_e=_c[_i];if(_e._col<=_b&&(_e._col+_e._colspan)>_b){if(_g<_e._colspan){_g=_e._colspan;_f=_e._col;}}}_h[0]=_f;_h[1]=_g;return _h;};_pGrid._applySelect=function(_a,_b,_c){var _d=false;if(this.summarytype=="top"||this.summarytype=="lefttop"){_d=true;}if(_a.length==0||(_d&&_c<0)){_a.splice(0,0,_c);_b.splice(0,0,_c);}else{var _e,_f;var _g=0;var _h;if(_d){for(_h=0;_h<_a.length;_h++ ){if(_a[_h]>=0){break;}_g++ ;}_e=_a.splice(0,_g);_f=_b.splice(0,_g);}var _i=_a.length;if(_i==0){_a.splice(0,0,_c);_b.splice(0,0,_c);}else if(_i==1||_a[0]>_c){this._addSelect(_a,_b,0,_c);}else if(_b[_i-1]<_c){this._addSelect(_a,_b,_i-1,_c);}else{for(_h=0;_h<_i;_h++ ){if(_b[_h]<_c&&_a[_h+1]>_c){if((_b[_h]+1)==_c&&(_a[_h+1]-1)>_c){this._addSelect(_a,_b,_h,_c);}else if((_b[_h]+1)<_c&&(_a[_h+1]-1)==_c){this._addSelect(_a,_b,_h+1,_c);}else if((_b[_h]+1)==_c&&(_a[_h+1]-1)==_c){this._addSelect(_a,_b,_h,_c);_b[_h]=_b[_h+1];_a.splice(_h+1,1);_b.splice(_h+1,1);}else if((_b[_h]+1)<_c&&(_a[_h+1]-1)>_c){_a.push(_c);_b.push(_c);_a.sort();_b.sort();}break;}}}if(_d){for(_h=0;_h<_e.length;_h++ ){_a.splice(0,0,_e[_h]);_b.splice(0,0,_f[_h]);}}}};_pGrid._addSelect=function(_a,_b,_c,_d){if(_b[_c]<_d){if((_b[_c]+1)==_d){_b[_c]=_d;}else{_a.push(_d);_b.push(_d);}}else if(_a[_c]>_d){if((_a[_c]-1)==_d){_a[_c]=_d;}else{_a.push(_d);_b.push(_d);_a.sort();_b.sort();}}};_pGrid._findCellObj=function(_a){var _b=_a;while(_b&&_b._type_name!="GridCellControl"&&_b._type_name!="GridSubCellControl"){if(_b instanceof nexacro.Grid){if(_b==this){break;}else{_b=_a;break;}}if(_b._cellobj&&_b._cellobj._is_alive&&(_b._cellobj._type_name=="GridCellControl"||_b._cellobj._type_name=="GridSubCellControl")){_b=_b._cellobj;break;}_b=_b.parent;}return _b;};_pGrid._findBandObj=function(_a){var _b=_a;while(_b&&_b._type_name!="GridBandControl"){if(_b==this){break;}_b=_b.parent;}return _b;};_pGrid._isFakeCell=function(_a){if(this._rowcount<=_a||_a< -2){return true;}return false;};_pGrid._moveToPosCell=function(_a,_b){var _c=_a;var _d=true;if(_c==undefined){_c=0;}if(this._isFakeCell(_c)){return false;}var _e=this._getBodyCellInfo(_b);if(!_e){return false;}var _f=this._beforebodycellpos=this._selectinfo.curcell;var _g=this._beforebodycolpos=this._selectinfo.curcol;var _h=this._beforebodyrowpos=this._selectinfo.curdsrow;var _i=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _j=this._beforepvt=this._selectinfo.curpvt;var _k=_b;var _l=_e._col;var _m=_c;var _n=_e._row;var _o= -9;this._setSelectedInfo(_k,_l,_m,_n,_o);while(true){if(_k!=_f){break;}if(_l!=_g){break;}if(_m!=_h){break;}if(_n!=_i){break;}if(_o!=_j){break;}_d=false;break;}if(_d){_d=this._ChangeSelect(_k,_l,_m,_n,_o,false,_f,_g,_h,_i,_j,"body");}if(_d&&this._isSelectRowType()){var _p=this._dsRowToDispRow(_m);this._jumpCurrentRow(_p);var _q=this._getCurrentBodyCell(_m,_k);if(_q){_q._showfull();}}this._moveCellAfterFocus();return _d;};_pGrid._getColFixCnt=function(_a){if(this._curFormat){return this._curFormat._getColFixCnt(_a);}return  -1;};_pGrid._getGridBand=function(_a){if(!this._curFormat||!this._curFormat._bodycells){return  -1;}var _b=this._curFormat._bodycells[_a];if(_b){if(this._bPivotGrid){var _c=this._getColFixCnt("left");var _d=this._getColFixCnt("right");if(_b._col<_c){return  -1;}else if(_b._col>=(this._curFormat._bodycells.length-_d)){return  -2;}else{return 0;}}else{return 0;}}return  -9;};_pGrid._clrMultiSelect=function(){this._selectinfo.rows=[];this._selectinfo.selects=[];this._selectstartrow=[];this._selectstartcol=[];this._selectstartsubrow=[];this._selectstartpvt=[];this._selectendrow=[];this._selectendcol=[];this._selectendsubrow=[];this._selectendpvt=[];this._defaultSelect();};_pGrid._isIncludeSelectpos=function(_a,_b){var _c=this._selectinfo.getSelectCells(_b);if(_c&&_c[_a]){return true;}return false;};_pGrid._addSelectpos=function(_a,_b,_c){var _d=this._selectinfo.selects;var _e=this._selectinfo.rows;if(!_d[_b+2]){_d[_b+2]=[];}_d[_b+2][_a]=true;for(var _f=0,_g=_e.length;_f<_g;_f++ ){if(_e[_f]==_b){return;}}_e.push(_b);if(!_c){_e.sort(function(_h,_i){return _h-_i;});}};_pGrid._delSelectpos=function(_a,_b,_c){var _d=this._selectinfo.selects;var _e=this._selectinfo.rows;var _f,_g,_h;var _i;var _j;var _k;if(_a<0){if(nexacro._isArray(_b)){_i=_b.length;for(_f=_i-1;_f>=0;_f-- ){if(_c){if(_d.length>_b[_f]+2){_d.splice(_b[_f]+2,1);}}else{_d[_b[_f]+2]=undefined;}for(_g=0;_g<_e.length;_g++ ){if(_e[_g]==_b[_f]){_e.splice(_g,1);break;}}}}else{if(_c){if(_d.length>_b+2){_d.splice(_b+2,1);}}else{_d[_b+2]=undefined;}for(_g=0;_g<_e.length;_g++ ){if(_e[_g]==_b){_e.splice(_g,1);break;}}}}else{if(nexacro._isArray(_b)){_i=_b.length;for(_f=_i-1;_f>=0;_f-- ){_j=_d[_b[_f]+2];if(_j){_j[_a]=false;}_k=false;for(_g=0,_h=_j.length;_g<_h;_g++ ){if(_j[_g]){_k=true;break;}}if(!_k){_d[_b+2]=undefined;for(_g=0;_g<_e.length;_g++ ){if(_e[_g]==_b[_f]){_e.splice(_g,1);break;}}}}}else{_j=_d[_b+2];if(_j){_j[_a]=false;}_k=false;for(_g=0,_h=_j.length;_g<_h;_g++ ){if(_j[_g]){_k=true;break;}}if(!_k){_d[_b+2]=undefined;for(_g=0;_g<_e.length;_g++ ){if(_e[_g]==_b){_e.splice(_g,1);break;}}}}}};_pGrid._resetSelectStartEndRow=function(){var _a=this._selectinfo.selects;this._selectstartrow=[];this._selectendrow=[];for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]){this._applySelect(this._selectstartrow,this._selectendrow,_b-2);}}this.selectstartrow=this._selectstartrow;this.selectendrow=this._selectendrow;if(!this.selectstartrow.length){this.selectstartrow= -9;}if(!this.selectendrow.length){this.selectendrow= -9;}};_pGrid._isMultiSelected=function(){if(!this._curFormat||!this._curFormat._bodycells){return false;}if(this._isSelectRowType()){if(this._selectinfo.rows.length>1){return true;}}else{if(this._selectinfo.rows.length>1){return true;}else if(this._selectinfo.rows.length==1){var _a=this._selectinfo.selects[this._selectinfo.rows[0]+2];var _b=0;for(var _c=0,_d=_a.length;_c<_d;_c++ ){if(_a[_c]){_b++ ;}if(_b>1){return true;}}}}return false;};_pGrid._initSelect=function(_a,_b,_c,_d,_e){_b=(_b!==undefined)?_b:0;_c=(_c!==undefined)?_c:0;_a=(_a!==undefined)?_a:0;_d=(_d!==undefined)?_d:0;_e=(_e!==undefined)?_e: -9;this._resetSelect(_a,_b,_c,_d,_e);};_pGrid._resetSelect=function(_a,_b,_c,_d,_e){var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curdsrow;var _i=this._selectinfo.cursubrow;var _j=this._selectinfo.curpvt;_b=(_b!==undefined)?_b:this._selectinfo.curcell;_c=(_c!==undefined)?_c:this._selectinfo.curcol;_a=(_a!==undefined)?_a:this._selectinfo.curdsrow;_d=(_d!==undefined)?_d:this._selectinfo.cursubrow;_e=(_e!==undefined)?_e:this._selectinfo.curpvt;if(this.getElement()){if(_a>=0&&_b<0){if(this._isSelectRowType()){_b=0;}else{_b=_c=_d=0;}}this._clrMultiSelect();this._multiselect="none";this._setSelectedInfo(_b,_c,_a,_d,_e);this._ChangeSelect(_b,_c,_a,_d,_e,true,_f,_g,_h,_i,_j,"body");this._refreshHead(true);this._refreshSumm(true);}};_pGrid._ChangeSelect=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){_f=_f||false;var _n=this._multiselect;var _o=this._curFormat;if(!_o||((_m=="lbuttondown"||_m=="keydown")&&this._setdataobj&&this._setdataobj.succ==false)){this._setdataobj=null;this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}var _p,_q,_r,_s=0;var _t=false;var _u=false;if(_l=="head"){_p=_o._headcells;_t=(_i!=_c||_g!=_a);if(_o._headrows){_s=_o._headrows.length;}}else if(_l=="summ"||_l=="summary"){_p=_o._summcells;_t=(_i!=_c||_g!=_a);if(_o._summrows){_s=_o._summrows.length;}}else{_p=_o._bodycells;if(this._isSelectRowType()){_t=(_i!=_c);_u=(_i!=_c||_g!=_a);}else{_u=_t=(_i!=_c||_g!=_a);}if(_o._bodyrows){_s=_o._bodyrows.length;}}if(!_p){this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}_q=_p.length;_r=_p[_a];var _v=false;if((_l=="body"&&_c<0)||_a<0){_v=(_n!="normal");this._clrMultiSelect();this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_v,[]);this._selectinfo.area=[];this._defaultSelect();if(_u){this.on_fire_oncellposchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}if(_t){this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}return true;}else if(!_r){this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}_v=(this._selectClear||_v);this._selectClear=false;var _w=false;if(_n=="ctrl"){if(this.selecttype=="multirow"){if(!this._isIncludeSelectpos(0,_c)){_w=true;}}if(this.selecttype=="multicell"){if(!this._isIncludeSelectpos(_a,_c)){_w=true;}}}if(_f==false){if(this._binddataset&&_l=="body"&&_c>=0&&(_w==true||_i!=_c)){this._userRowposChange=true;var _x=this._binddataset._setRowPosition(_c,51);this._userRowposChange=false;if(_c!=_x){if(_x===undefined){this._setSelectedInfo(_g,_h,_i,_j,_k);this._selectDraw(_g,_h,_i,_j,_k,_f,_a,_b,_c,_d,_e,true,[]);return false;}else{_c=_x;}}}}var _y=this._selectinfo.ctrlpoint;var _z=[];var _aa=false;var _ab=0;function makeClearRows(_ad){var _ae=_ad._selectinfo.rows;var _af=0;_z=[];for(var _ag=0,_ah=_ae.length;_ag<_ah;_ag++ ){_z[_af++ ]=_ad._dsRowToDispRow(_ae[_ag]);}return _ae;}if(_n=="none"){if(_l=="body"){if(this._isAreaSelect()||this._isMultiSelect()){if(this._isIncludeSelectpos(_a,_c)){if(_m=="keydown"||_m=="mousemove"){_aa=true;}else{_y._set(_r,_c,_s);if(_u&&_m=="lbuttondown"){this.on_fire_oncellposchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}return false;}}else{if(_m=="lbuttonup"){_aa=true;}}if(_m=="mousemove"){this._is_drag_selecting=true;}else{_z=makeClearRows(this);this._clrMultiSelect();if(_m!="lbuttonup"){_y._set(_r,_c,_s);}}}else{this._clrMultiSelect();_y._set(_r,_c,_s);}}else{_z=makeClearRows(this);this._clrMultiSelect();_y._set(_r,_c,_s);}this._selectinfo.area=[];}else if(_n=="ctrl"){if(_m!="mousemove"){_y._set(_r,_c,_s);}if(this.selecttype=="multirow"){if(_w==false&&(_m=="lbuttondown"||(_m&&_m.indexOf("func")>=0))){this._delMultirowSelectInfo(_c);this._delSelectpos( -1,_c);this._resetSelectStartEndRow();this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_v,_z);this._defaultSelect();this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);return true;}_aa=true;_ab=this._selectinfo.area.length;if(_m=="mousemove"){this._is_drag_selecting=true;_ab-- ;}}else if(this.selecttype=="multiarea"){_ab=this._selectinfo.area.length;if(_m=="mousemove"){this._is_drag_selecting=true;_ab-- ;}}}else if(_n=="shift"){if(this.selecttype=="multiarea"){_ab=this._selectinfo.area.length-1;}this._clrMultiSelect();_v=true;}if(this._isSelectRowType()==false){if(_t){_aa=true;}if(this._isAreaSelect()){this._applyAreaSelectPos(_a,_c,_ab,"area");}else{this._addSelectpos(_a,_c);this._applySelect(this._selectstartrow,this._selectendrow,_c);this._applySelect(this._selectstartcol,this._selectendcol,_b);this._applySelect(this._selectstartsubrow,this._selectendsubrow,_d);}}else{if(_t){_aa=true;}if(this._isMultiSelect()){this._applyAreaSelectPos(_a,_c,_ab,"row");}else{for(var _ad=0;_ad<_q;_ad++ ){this._addSelectpos(_ad,_c);}this._applySelect(this._selectstartrow,this._selectendrow,_c);}}this._defaultSelect();var _ac=false;if(_f==false){if(this._binddataset&&_l=="body"&&_c>=0&&(_w==true||_i!=_c)){this._rowposition=_c;_ac=true;}else{if(_v==true){_ac=true;}else if(_aa==true){_ac=true;}}}else{_v=(this._isMultiSelect()||this._isAreaSelect());_ac=true;}if(_ac){this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_v,_z,_m);}if(_u&&_m!="func_area1"){this.on_fire_oncellposchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}if(_aa&&_m!="func_area1"){this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}return true;};_pGrid._applyAreaSelectPos=function(_a,_b,_c,_d){var _e=this._curFormat;var _f,_g;var _h=[],_i=0,_j=0,_k=[],_l=0,_m=0,_n=[],_o=0,_p=0;if(_e._bodycells){_h=_e._bodycells;_i=_h.length;_j=_e._bodyrows.length;}if(_e._headcells){_k=_e._headcells;_l=_k.length;_m=_e._headrows.length;}if(_e._summcells){_n=_e._summcells;_o=_n.length;_p=_e._summrows.length;}if(_b== -2){_f=_n;_g=_p;}else if(_b== -1){_f=_k;_g=_m;}else{_f=_h;_g=_j;}var _q=this._selectinfo.ctrlpoint;var _r=_f[_a];var _s,_t,_u,_v,_w=[],_x=[],_y;_s=Math.min(_q.col,_r._col);_t=Math.max((_q.col+_q.colspan-1),(_r._col+_r._colspan-1));if(_q.row<_b){_u=_q.row;_v=_b;_y=_v-_u;_w[0]=_q.subrow;_x[0]=_q.subrowslen-1;_w[_y]=0;_x[_y]=_r._row+_r._rowspan-1;}else if(_q.row>_b){_u=_b;_v=_q.row;_y=_v-_u;_w[0]=_r._row;_x[0]=_g-1;_w[_y]=0;_x[_y]=_q.subrow+_q.rowspan-1;}else{_u=_v=_b;_w[0]=Math.min(_r._row,_q.subrow);_x[0]=Math.max(_r._row+_r._rowspan-1,_q.subrow+_q.rowspan-1);}var _z;for(var _au=_u+1;_au<_v;_au++ ){_z=_au-_u;_w[_z]=0;if(_au== -1){_x[_z]=_m-1;}else{_x[_z]=_j-1;}}var _aa;if(_d=="area"){if(_u>=0||_u==_v){_aa=this._adjustMergeArea(_f,_s,_t,_u,_v,_w,_x);}else{var _ab,_ac;var _ad=_s,_ae=_t;var _af;var _ag;var _ah;var _ai;while(true){_ab=[].concat(_w);_ac=[].concat(_x);if(_u== -2){_af=_ab.splice(0,1);_ag=_ac.splice(0,1);_ah=_ab.splice(0,1);_ai=_ac.splice(0,1);_aa=this._adjustMergeArea(_n,_ad,_ae, -2, -2,_af,_ag);_ad=_aa.begcol;_ae=_aa.endcol;_aa=this._adjustMergeArea(_k,_ad,_ae, -1, -1,_ah,_ai);if(_ad!=_aa.begcol||_ae!=_aa.endcol){_ad=_aa.begcol;_ae=_aa.endcol;continue;}}else if(_u== -1){_ah=_ab.splice(0,1);_ai=_ac.splice(0,1);_aa=this._adjustMergeArea(_k,_ad,_ae, -1, -1,_ah,_ai);_ad=_aa.begcol;_ae=_aa.endcol;}if(_v>=0){_aa=this._adjustMergeArea(_h,_ad,_ae,0,_v,_ab,_ac);}if(_aa){if(_ad!=_aa.begcol||_ae!=_aa.endcol){_ad=_aa.begcol;_ae=_aa.endcol;continue;}}break;}if(_aa){_aa.begrow=_u;_aa.begsubrow=_w;_aa.endsubrow=_x;}}}else{_aa=this._adjustRowArea(_u,_v);}this._selectinfo.area[_c]=_aa;var _aj=this._selectinfo.area;var _ak=_aj.length;this._clrMultiSelect();var _al,_am,_an,_ao;var _ap,_aq,_ar;var _as;if(_d=="area"){for(_ap=0;_ap<_ak;_ap++ ){_s=_aj[_ap].begcol;_t=_aj[_ap].endcol;_u=_aj[_ap].begrow;_v=_aj[_ap].endrow;_w=_aj[_ap].begsubrow;_x=_aj[_ap].endsubrow;this._selectstartrow[_ap]=_u;this._selectendrow[_ap]=_v;this._selectstartcol[_ap]=_s;this._selectendcol[_ap]=_t;this._selectstartsubrow[_ap]=_w[0];this._selectendsubrow[_ap]=_x[_x.length-1];for(_au=_u,_aq=0;_au<=_v;_au++ ,_aq++ ){if(_au== -2){_f=_n;_as=_o;}else if(_au== -1){_f=_k;_as=_l;}else{_f=_h;_as=_i;}for(_ar=0;_ar<_as;_ar++ ){_al=_f[_ar]._col;_am=_f[_ar]._col+_f[_ar]._colspan-1;_an=_f[_ar]._row;_ao=_f[_ar]._row+_f[_ar]._rowspan-1;if(_al>=_s&&_am<=_t&&_an>=_w[_aq]&&_ao<=_x[_aq]){this._addSelectpos(_ar,_au);}}}}}else{for(_ap=0;_ap<_ak;_ap++ ){_u=_aj[_ap].begrow;_v=_aj[_ap].endrow;for(_au=_u,_aq=0;_au<=_v;_au++ ,_aq++ ){if(_au== -2){_as=_o;}else if(_au== -1){_as=_l;}else{_as=_i;}if(_as==0){continue;}for(_ar=0;_ar<_as;_ar++ ){this._addSelectpos(_ar,_au,true);}this._applySelect(this._selectstartrow,this._selectendrow,_au);}}var _at=this._selectinfo.rows;_at.sort(function(_ap,_av){return _ap-_av;});}};_pGrid._delMultirowSelectInfo=function(_a){var _b=this._selectinfo.area;var _c=_b.length;for(var _f=0;_f<_c;_f++ ){if(_b[_f].begrow==_b[_f].endrow&&_b[_f].begrow==_a){_b.splice(_f,1);break;}else if(_b[_f].begrow==_a&&_b[_f].endrow!=_a){_b[_f].begrow++ ;break;}else if(_b[_f].endrow==_a&&_b[_f].begrow!=_a){_b[_f].endrow-- ;break;}else if(_b[_f].begrow<_a&&_b[_f].endrow>_a){var _d=_b[_f].endrow;_b[_f].endrow=_a-1;var _e=this._adjustRowArea(_a+1,_d);_b.splice(_f+1,0,_e);break;}}};_pGrid._delOverSelectInfo=function(){var _a=this._selectinfo.rows;var _b=this.rowcount-1;for(var _c=_a.length-1,_d,_e;_c>=0;_c-- ){_d=_a[_c];if(_d>_b){_e=true;this._delMultirowSelectInfo(_d);this._delSelectpos( -1,_d);}else{break;}}if(_e){this._resetSelectStartEndRow();this._defaultSelect();}};_pGrid._adjustRowArea=function(_a,_b){return {begcol: -1,endcol: -1,begrow:_a,endrow:_b,begsubrow:[],endsubrow:[]};};_pGrid._adjustMergeArea=function(_a,_b,_c,_d,_e,_f,_g){var _h=_e-_d;var _i=_a.length;var _j,_k,_l,_m;var _n,_o=_f.length;for(var _p=0;_p<_i;_p++ ){_j=_a[_p]._col;_k=_a[_p]._col+_a[_p]._colspan-1;_l=_a[_p]._row;_m=_a[_p]._row+_a[_p]._rowspan-1;_n=false;for(var _q=0;_q<_o;_q++ ){if(((_b<=_j&&_c>=_j)||(_b<=_k&&_c>=_k)||(_b>_j&&_c<_k))&&((_f[_q]<=_l&&_g[_q]>=_l)||(_f[_q]<=_m&&_g[_q]>=_m)||(_f[_q]>_l&&_g[_q]<_m))){if(_b>_j){_b=_j;_n=true;}if(_c<_k){_c=_k;_n=true;}if(_q==0){if(_f[0]>_l){_f[0]=_l;_n=true;}}if(_q==_h){if(_g[_h]<_m){_g[_h]=_m;_n=true;}}if(_n==true){_p=0;break;}}}}return {begcol:_b,endcol:_c,begrow:_d,endrow:_e,begsubrow:_f,endsubrow:_g};};_pGrid._defaultSelect=function(){this.selectstartrow=this._selectstartrow;this.selectstartcol=this._selectstartcol;this.selectstartsubrow=this._selectstartsubrow;this.selectstartpivot=this._selectstartpvt;this.selectendrow=this._selectendrow;this.selectendcol=this._selectendcol;this.selectendsubrow=this._selectendsubrow;this.selectendpivot=this._selectendpvt;if(!this.selectstartrow.length){this.selectstartrow= -9;}if(!this.selectstartcol.length){this.selectstartcol= -1;}if(!this.selectstartsubrow.length){this.selectstartsubrow= -1;}if(!this.selectstartpivot.length){this.selectstartpivot= -9;}if(!this.selectendrow.length){this.selectendrow= -9;}if(!this.selectendcol.length){this.selectendcol= -1;}if(!this.selectendsubrow.length){this.selectendsubrow= -1;}if(!this.selectendpivot.length){this.selectendpivot= -9;}};_pGrid._dsRowToDispRow=function(_a,_b){var _c;if(this._hasTree){_c=this._getTreeRowPosition(_a);}else{_c=_a;}if(_b){_c-=this._getBodyBegRowPos(_c);}return _c;};_pGrid._jumpCurrentRow=function(_a){if(_a<0){return this._begrowpos;}var _b=this._toprowpos[0];var _c=this._vscrollmng;var _d=this._getBodyBegRowPos(_a);if(this._lbuttondown_proc==false){if(_a<=_b){if(!this._select_noscroll&&_c){_c.setRowPos(_a);}_d=this._getBodyBegRowPos(_a);}else if(_a>(_b+this.pagerowcount-1)){var _e=(this.pagerowcount>0)?this._pagerowcnt-this.pagerowcount:0;if(!this._select_noscroll&&_c){_c.setRowPos(_a-this._pagerowcnt+1+_e);}_d=this._getBodyBegRowPos(_a);}else{if(this._isRemainAreaScroll()){if(!this._select_noscroll&&_c){_c.setRowPos(_a);}_d=this._getBodyBegRowPos(_a);}}}return _d;};_pGrid._getBodyBegRowPos=function(_a){if(this._fixed_rowcnt>0){if(this._fixed_endrow>=_a){return this._fixed_startrow;}return this._begrowpos-(this._fixed_rowcnt-this._fixed_startrow);}return this._begrowpos;};_pGrid._clearRows=function(_a){if(_a.length>0){for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]== -2){this._refreshSumm(true);}else if(_a[_b]== -1){this._refreshHead(true);}else{this._refreshBodyRow(_a[_b]-this._getBodyBegRowPos(_a[_b]));}}return true;}return false;};_pGrid._selectDraw=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this._dsRowToDispRow(_i);var _p=this._dsRowToDispRow(_c);this._setSelectedInfo(null,null,_c,null,null);var _q=false;var _r=false;var _s=false;var _t=this._getUseBindExprProp("body");if(!_t){_t=[];}if(_t.length){_q=this._expr_allrow_update_prop||this._expr_allrow_update_style;}if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")||_p== -1||_o== -1){_r=true;}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")||_p== -2||_o== -2){_s=true;}var _u;if(this._isSelectRowType()){if(_p<0&&(_n&&_n.indexOf("func")<0)){if(_l){if(!this._clearRows(_m)){this._refreshBody(true,false);}}else{this._refreshBodyRow(_o-this._getBodyBegRowPos(_o),undefined,undefined,true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}else if(_p!=_o){this._jumpCurrentRow(_p);if(this._isMultiSelect()){this._refreshBody(true,!_l);if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}else{if(_l){if(!this._clearRows(_m)){this._refreshBody(true,true);}else{this._refreshBodyRow(_p-this._getBodyBegRowPos(_p),undefined,undefined,true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}}else{this._refreshBodyRow(_o-this._getBodyBegRowPos(_o),undefined,undefined,true);this._refreshBodyRow(_p-this._getBodyBegRowPos(_p),undefined,undefined,true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}else{if(this._isMultiSelect()){this._refreshBody(true,!_l);if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}}else{if(_p<0&&(_n&&_n.indexOf("func")<0)){if(_l){if(!this._clearRows(_m)){this._refreshBody(true,false);}}else{this._refreshBodyCell(_g,_o-this._getBodyBegRowPos(_o),true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}else if(_p!=_o||_a!=_g){if(_n!="selectorsizing"){this._jumpCurrentRow(_p);var _v;if(_p== -1){_v=this._getCurrentHeadCell( -1);}else if(_p== -2){_v=this._getCurrentSummCell( -1);}else{_v=this._getCurrentBodyCell( -1, -1);}if(_v){var _w=_v._refinfo._area;var _x=this._select_ctrl;if(_x&&_x._is_tracking){if(_w=="body"){_v.parent._showfull(_v);}else if(_w=="left"){if(this._hscrollmng){this._hscrollmng.setPos(0);}}else{var _y=this._getScollMaxLeft();if(this._hscrollmng){this._hscrollmng.setPos(_y);}}}else if(!_n){_v.parent._showfull(_v);}else if(_n=="keydown"){_v._showfull(true);}}}if(this._isAreaSelect()){if(_n=="selectorsizing"){if(nexacro._OS=="Android"&&(nexacro._Browser=="Safari"||nexacro._Browser=="MobileSafari")){nexacro._OnceCallbackTimer.callonce(this,function(){this._refreshBody(true,!_l);},10);}else{this._refreshBody(true,!_l);}}else{this._refreshBody(true,!_l);if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}else{if(_l){this._clearRows(_m);this._refreshBody(true,!_l);}else{this._refreshBodyCell(_g,_o-this._getBodyBegRowPos(_o),true);this._refreshBodyCell(_a,_p-this._getBodyBegRowPos(_p),true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}else{if(this._isAreaSelect()){if(_n=="selectorsizing"){if(nexacro._OS=="Android"&&(nexacro._Browser=="Safari"||nexacro._Browser=="MobileSafari")){nexacro._OnceCallbackTimer.callonce(this,function(){this._refreshBody(true,!_l);},10);}else{this._refreshBody(true,!_l);}}else{this._refreshBody(true,!_l);if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}else if(this._isMultiSelect()){if(_l){this._clearRows(_m);this._refreshBody(true,!_l);}else{this._refreshBodyCell(_a,_p-this._getBodyBegRowPos(_p),true);if(_q){for(_u=0;_u<_t.length;_u++ ){this._refreshCell("body",_t[_u],undefined,undefined,undefined,true);}}}if(_r){this._refreshHead(true);}if(_s){this._refreshSumm(true);}}}}this._adjustOverlayControls(false);this._updateSelector();this._applySelection();};_pGrid.redrawExprCell=function(_a){var _b;var _c;if(!_a){if(_b=this._getUseBindExprFullProp("head")){for(_c=0;_c<_b.length;_c++ ){this._refreshCell("head",_b[_c]);}}if(_b=this._getUseBindExprFullProp("body")){for(_c=0;_c<_b.length;_c++ ){this._refreshCell("body",_b[_c]);}}if(_b=this._getUseBindExprFullProp("summary")){for(_c=0;_c<_b.length;_c++ ){this._refreshCell("summary",_b[_c]);}}}else{switch(_a){case "head":case "body":case "summary":if(_b=this._getUseBindExprFullProp(_a)){for(_c=0;_c<_b.length;_c++ ){this._refreshCell(_a,_b[_c]);}}break;}}};_pGrid._isUseBindExprStyle=function(_a){if(this._is_use_bind_expr_style[_a]!==null){return this._is_use_bind_expr_style[_a];}var _b=this._is_use_bind_expr_style[_a]=!!this._getUseBindExprProp(_a,"cssclass");if(_a=="body"&&_b){this._expr_allrow_update_style=true;}return !!_b;};_pGrid._getUseBindExprProp=function(_a,_b){var _c;var _d;var _e=this._curFormat;if(!_e){return null;}if(_a=="summary"){_a="summ";}if(!_b){if(this._use_bind_expr_cells[_a]!==null){return this._use_bind_expr_cells[_a];}this._use_bind_expr_cells[_a]=undefined;}if(_a=="body"){_c=this._bodyBand;_d=_e._bodycells;}else if(_a=="head"){_c=this._headBand;_d=_e._headcells;}else{_c=this._summBand;_d=_e._summcells;}if(!_d){return null;}var _f,_g,_h,_i;if(_c){var _j,_k;if(_b){var _l=[];for(_f=0,_h=_d.length;_f<_h;_f++ ){if(_d[_f][_b]&&_d[_f][_b]._bindtype>0){_l.push(_f);}}if(_l.length>0){return _l;}else{return undefined;}}else{if(_a=="body"){for(_f=0,_h=_d.length;_f<_h;_f++ ){_k=_d[_f]._property_map;for(_g=0,_i=_k.length;_g<_i;_g++ ){_j=_k[_g][nexacro._CELLINFO_PMAP_PROPNAME];if(_d[_f][_j]&&(_d[_f][_j]._bindtype==2||(_j=="expr"&&_d[_f][_j]._value))){this._expr_allrow_update_prop=true;if(_k[_g][nexacro._CELLINFO_PMAP_STYLE]==true){this._is_use_bind_expr_style["body"]=true;this._expr_allrow_update_style=true;if(this.cellexprupdatecondition!="all"){continue;}}else{if(this.cellexprupdatecondition=="none"){continue;}if(this.cellexprupdatecondition=="celltext"&&_j!="text"&&_j!="expr"){continue;}}if(this._use_bind_expr_cells["body"]==undefined){this._use_bind_expr_cells["body"]=[];}this._use_bind_expr_cells["body"].push(_f);break;}}}}else{for(_f=0,_h=_d.length;_f<_h;_f++ ){_k=_d[_f]._property_map;for(_g=0,_i=_k.length;_g<_i;_g++ ){_j=_k[_g][nexacro._CELLINFO_PMAP_PROPNAME];if(_d[_f][_j]&&(_d[_f][_j]._bindtype>0||_j=="expr")){if(_k[_g][nexacro._CELLINFO_PMAP_STYLE]==true){this._is_use_bind_expr_style[_a]=true;}if(this._use_bind_expr_cells[_a]==undefined){this._use_bind_expr_cells[_a]=[];}this._use_bind_expr_cells[_a].push(_f);break;}}}}}}return this._use_bind_expr_cells[_a];};_pGrid._getUseBindExprFullProp=function(_a){var _b;var _c;var _d=this._curFormat;if(!_d){return null;}if(_a=="summary"){_a="summ";}if(_a=="body"){_b=this._bodyBand;_c=_d._bodycells;}else if(_a=="head"){_b=this._headBand;_c=_d._headcells;}else{_b=this._summBand;_c=_d._summcells;}var _e=[];var _f,_g,_h,_i;if(_b){var _j,_k;if(_a=="body"){for(_f=0,_h=_c.length;_f<_h;_f++ ){_k=_c[_f]._property_map;for(_g=0,_i=_k.length;_g<_i;_g++ ){_j=_k[_g][nexacro._CELLINFO_PMAP_PROPNAME];if(_c[_f][_j]&&(_c[_f][_j]._bindtype==2||_j=="expr")){_e.push(_f);break;}}}}else{for(_f=0,_h=_c.length;_f<_h;_f++ ){_k=_c[_f]._property_map;for(_g=0,_i=_k.length;_g<_i;_g++ ){_j=_k[_g][nexacro._CELLINFO_PMAP_PROPNAME];if(_c[_f][_j]&&(_c[_f][_j]._bindtype>0||_j=="expr")){_e.push(_f);break;}}}}}return _e;};_pGrid._clearBindTypeFlag=function(){this._use_bind_expr_cells.body=null;this._use_bind_expr_cells.head=null;this._use_bind_expr_cells.summ=null;this._is_use_bind_expr_style.body=null;this._is_use_bind_expr_style.head=null;this._is_use_bind_expr_style.summ=null;this._expr_allrow_update_prop=false;this._expr_allrow_update_style=false;this._flush_cell_oldrow=undefined;this._flush_cell_oldcell=undefined;};_pGrid._toggleVal=function(_a,_b){if(!_b){return false;}var _c=_b._getValue(_a);var _d=_b._getAttrValue(_b["checkboxtruevalue"],_a);if(_d!==null&&_d!=undefined){_d=_d.toString();}var _e=_b._getAttrValue(_b["checkboxfalsevalue"],_a);if(_e!==null&&_e!=undefined){_e=_e.toString();}var _f;if(_d!=null){if(_e!=null){if(_c===_e||_c===undefined){_f=false;}else if(_c===_d){_f=true;}}else{if(_c===_d){_f=true;}else{_f=false;}}}else{if(_e!=null){if(_c===this.falsevalue){_f=false;}else{_f=true;}}else{_f=nexacro._toBoolean(_c);}}if(_f){_c=nexacro._isNull(_e)?0:_e;}else{_c=nexacro._isNull(_d)?1:_d;}if(_b.text._bindtype==1){this._dsEventOccured=true;var _g=this._binddataset.setColumn(_a,_b.text._bindexpr,_c);if(nexacro._enableaccessibility){var _h=this._getAccessibilityCurrentCell();if(_h){_h._setAccessibilityStatChecked(nexacro._toBoolean(_c));}}this._dsEventOccured=false;return _g;}return false;};_pGrid._isEditorKeyAction=function(_a,_b,_c,_d,_e,_f,_g){if(this._is_editor_keyaction==false){this._is_editor_keyaction=true;return true;}if(!this._showEditing){return false;}if(_a.isInputElement()){var _h;var _i;var _j;var _k;if(_a.readonly==true){return false;}if(_c==nexacro.Event.KEY_LEFT){if(_e||_f||_d||_g){return true;}_h=_a.getElementCaretPos();_i=_a.getElementValue();_j=_i?_i.length:0;if(this._rtl){if((_h&&_h!= -1)&&_h.begin!=_j){return true;}}else{if((_h&&_h!= -1)&&_h.begin!=0){return true;}}}else if(_c==nexacro.Event.KEY_RIGHT){if(_e||_f||_d||_g){return true;}_h=_a.getElementCaretPos();_i=_a.getElementValue();_j=_i?_i.length:0;if(this._rtl){if((_h&&_h!= -1)&&_h.begin!=0){return true;}}else{if((_h&&_h!= -1)&&_h.begin!=_j){return true;}}}else if(_c==nexacro.Event.KEY_UP){if(_e||_f||_d||_g){return true;}if(_a.usemultiline){_k=_a.getElementCaretLine();if(_k!=1){return true;}}}else if(_c==nexacro.Event.KEY_DOWN){if(_e||_f||_d||_g){return true;}if(_a.usemultiline){_k=_a.getElementCaretLine();_b=_a.parent.linkedcontrol;var _l=parseInt(_b._getLineCount());if(_k!=_l){return true;}}}}return false;};_pGrid._getDlgCode=function(_a,_b,_c,_d,_e){if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){this._accept_arrow=true;}return {want_tab:this._acceptstab,want_return:false,want_escape:false,want_chars:false,want_arrows:this._accept_arrow};};_pGrid._getFirstEditableCell=function(){var _a;if(this._binddataset&&this._curFormat&&this._curFormat._bodycells){var _b=this._getGridRowCount();var _c=this._curFormat._bodycells.length;for(var _e=0;_e<_b;_e++ ){for(var _f=0;_f<_c;_f++ ){var _d=_e;if(this._hasTree){_d=this._treeIndexes[_d];}_a=this._curFormat._bodycells[_f]._getEdittype(_d);if(_a!==""&&_a!=="none"){return {row:_d,cell:_f};}}}}return {row:null,cell:null};};_pGrid._getLastEditableCell=function(){var _a;if(this._binddataset){var _b=this._getGridRowCount();var _c=this._curFormat._bodycells.length;for(var _e=_b-1;_e>=0;_e-- ){for(var _f=_c-1;_f>=0;_f-- ){var _d=_e;if(this._hasTree){_d=this._treeIndexes[_d];}_a=this._curFormat._bodycells[_f]._getEdittype(_d);if(_a!==""&&_a!=="none"){return {row:_d,cell:_f};}}}}return {row:null,cell:null};};_pGrid._isChar=function(_a){switch(_a){case 9:case 25:case 27:case 144:case 145:return false;break;}if((_a>=16&&_a<=21)||(_a>=33&&_a<=40)||(_a>=91&&_a<=93)||(_a>=112&&_a<=123)){return false;}return true;};_pGrid._on_apply_cell_status=function(_a,_b,_c,_d){if(this.enableredraw){if(_d==undefined){_d=this._isSelectRowType();if(_b=="mouseover"){if(this.mouseovertype=="cell"){_d=false;}else if(this.mouseovertype=="row"){_d=true;}}}if(_d){var _e=_a._getRowControl();var _f=_e._cells;for(var _g=0,_h=_f.length;_g<_h;_g++ ){_f[_g]._rowstatuschange=true;_f[_g]._changeStatus(_b,_c);_f[_g]._rowstatuschange=null;}}else{_a._rowstatuschange=true;_a._changeStatus(_b,_c);_a._rowstatuschange=null;}}};_pGrid._setDSEventHandlers=function(_a){_a._setEventHandler("onload",this.on_dsnotify_onload,this);_a._setEventHandler("onrowposchanged",this.on_dsnotify_onrowposchanged,this);_a._setEventHandler("oncolumnchanged",this.on_dsnotify_oncolumnchanged,this);_a._setEventHandler("onrowsetchanged",this.on_dsnotify_onrowsetchanged,this);};_pGrid._removeDSEventHandlers=function(_a){_a._removeEventHandler("onload",this.on_dsnotify_onload,this);_a._removeEventHandler("onrowposchanged",this.on_dsnotify_onrowposchanged,this);_a._removeEventHandler("oncolumnchanged",this.on_dsnotify_oncolumnchanged,this);_a._removeEventHandler("onrowsetchanged",this.on_dsnotify_onrowsetchanged,this);};_pGrid._getBodyClientSize=function(){var _a=this._curFormat;var _b=0,_c=0,_d;_d=this._getAvailableRect(this);_c=_d.width;_b=_d.height;if(_a){if(!this._bodyBand){_d=this._getAvailableRect(this);_c=_d.width-_a.leftWidth-_a.rightWidth;_b=_d.height-this._getHeadHeight()-this._getSummHeight();}else{_d=this._getAvailableRect(this._bodyBand);_c=_d.width-_a.leftWidth-_a.rightWidth;_b=_d.height;}}return [_c,_b];};_pGrid._applyAutofittype=function(_a,_b){if(this.enableredraw==false){this._enable_redraw_history.autofit=[_a,_b];return;}var _c=this._curFormat;var _d=this.getElement();if(!_c||!_d){return;}var _e;var _f;var _g=this._getBodyClientSize();_e=_g[0];_f=_g[1];if(!this._is_created&&(_e<=0||_f<=0)){_e=_d.client_width;}var _h=false;switch(this.autofittype){case "col":this._colautofit=true;this._rowautofit=false;break;case "row":this._colautofit=false;this._rowautofit=true;break;case "both":this._colautofit=true;this._rowautofit=true;break;case "allrow":this._colautofit=false;break;case "allboth":this._colautofit=true;break;case "col,allrow":this._colautofit=true;break;case "allpivot":this._colautofit=true;break;case "row,allpivot":this._colautofit=false;break;case "none":this._colautofit=false;this._rowautofit=false;_h=_b;break;}if(this._colautofit&&_e>=0){_h=_c._adjustColWidth(_e,this._autofitcol_rate);}if(_h){if(_a){if(this.autosizingtype!="none"){this._autofiting=true;this._recreate_contents_all(true,false);this._autofiting=false;}else{this._autofiting=true;if(this._bodyBand){var _i=this._bodyBand._scrollHeight;var _j=this._bodyBand._scrollWidth;if(this._colautofit){if(_e!=_j){this._setScrollMaxSize(_e,_i);this._bodyBand._scrollWidth=_e;}this._bodyBand._matrix._adjustColsDisplay(true,true);}else{this._setScrollMaxSize(_c.bodyWidth,_i);this._bodyBand._scrollWidth=_c.bodyWidth;this._bodyBand._matrix._adjustColsDisplay(true);}}if(this._headBand){this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true);}this._autofiting=false;this._onResetScrollBar();}}this._applyResizer();return true;}return false;};_pGrid._resetColSizeList=function(_a){var _b=false;if(this.autofittype!="col"&&this.autofittype!="both"&&this.autofittype!="allboth"&&this.autofittype!="col,allrow"){var _c=this._curFormat;if(!_c){return false;}var _d,_e,_f=_c._cols,_g=_f.length;if(this.autosizingtype=="col"||this.autosizingtype=="both"){for(_d=0;_d<_g;_d++ ){_e=this._getMaxColDataSizeBand(_d,_a);if(_e>=0&&this._setColSize( -9,_d,_e,false,false,true,(_d!=_g-1))){_b=true;}}if(this.autofittype=="col"||this.autofittype=="both"||this.autofittype=="allboth"||this.autofittype=="col,allrow"){this._applyAutofittype(true);}}else{for(_d=0;_d<_g;_d++ ){_e=_f[_d].size;if(_e>=0&&this._setColSize( -9,_d,_e,false,false,true,(_d!=_g-1))){_b=true;}}}}return _b;};_pGrid.redraw=function(){if(!this.enableredraw){this._enable_redraw_history.recreate=true;return;}this._recreate();if(this._select_ctrl){this._select_ctrl._updateAll();}};_pGrid._getRowSizeInfo=function(_a){var _b=this._curFormat;var _c,_d=[];if(_a== -1){_c=this._rowHeadList[0];_d=this._rowHeadListSub;return {row_size:_c,subrow_sizes:_d};}else if(_a== -2){_c=this._rowSummList[0];_d=this._rowSummListSub;return {row_size:_c,subrow_sizes:_d};}else if(_a>=0){var _e=_b._bodyrows;var _f=_e.length;var _g=this._rowSizeListSub=[];var _h=this._rowSizeList=[];_c=_g[_a];for(var _i=0;_i<_f;_i++ ){_d[_i]=_h[_a* _f+_i];}return {row_size:_c,subrow_sizes:_d};}return null;};_pGrid._lazy_calculate=false;_pGrid._resetRowSizeList=function(_a){if(!this._curFormat){return;}var _b=false;if(this.autosizingtype!="none"&&!this._preloadImage()){_b=true;}var _c=this._isLazyAutoVscroll();var _d=this._curFormat;var _e;var _f,_g;var _h;var _i;var _j,_k;if(_d._headrows){_e=this._isUserChangeHeadRowSize;if(!_e){this._rowHeadListSub=[];this._rowHeadList=[];}_h=_d._headrows;_i=_h.length;_k=0;var _l=this._rowHeadListSub,_m=this._rowHeadList;if(!(_e&&_m[0]>=0)){if(!_b&&this._binddataset&&this._headAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(_g=0;_g<_i;_g++ ){_j=this._getMaxSubRowSize( -1,_g);_l[_g]=_j;_k+=_j;}}else{for(_g=0;_g<_i;_g++ ){_j=_h[_g].size;_l[_g]=_j;_k+=_j;}}this._rowHeadList[0]=_k;}}if(_d._summrows){_e=this._isUserChangeSummRowSize;if(!_e){this._rowSummListSub=[];this._rowSummList=[];}_h=_d._summrows;_i=_h.length;_k=0;var _n=this._rowSummListSub,_o=this._rowSummList;if(!(_e&&_o[0]>=0)){if(!_b&&this._binddataset&&this._summAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(_g=0;_g<_i;_g++ ){_j=this._getMaxSubRowSize( -2,_g);_n[_g]=_j;_k+=_j;}}else{for(_g=0;_g<_i;_g++ ){_j=_h[_g].size;_n[_g]=_j;_k+=_j;}}this._rowSummList[0]=_k;}}if(_d._bodyrows){_e=this._isUserChangeBodyRowSize;if(!_e&&!_a){this._rowSizeList=[];this._rowSizeListSub=[];this._lazy_load_rowsize=[];}_h=_d._bodyrows;_i=_h.length;var _p=this._rowcount,_q=this._rowSizeListSub,_r=this._rowSizeList;_a=!_a?0:_a;if(!_b&&this._binddataset&&this._bodyAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){var _s,_t;if(_c){var _u=this._getBodyClientSize()[1];var _v=this._getMinRowTextHeight();var _w=Math.ceil((_u+(_v-0.1))/_v);_s=this._getDataRow(this._toprowpos[0]);_t=_s+(_w-1)* 3;_t=Math.min(this._getDataRow(_t>this.rowcount-1?this.rowcount-1:_t),this._rowcount);}for(_f=_a;_f<_p;_f++ ){if(_e){if(_r[_f]>=0){continue;}}_k=0;if(_s!=undefined){if(_s<=_f&&_f<=_t){for(_g=0;_g<_i;_g++ ){_j=this._getMaxSubRowSize(_f,_g);_q[_f* _i+_g]=_j;_k+=_j;}this._lazy_load_rowsize[_f]=_k;}else{for(_g=0;_g<_i;_g++ ){_j=_h[_g].size;_q[_f* _i+_g]=_j;_k+=_j;}}}else{for(_g=0;_g<_i;_g++ ){_j=this._getMaxSubRowSize(_f,_g);_q[_f* _i+_g]=_j;_k+=_j;}}_r[_f]=_k;}this._is_variable_bodyrowsize=true;}else{for(_f=_a;_f<_p;_f++ ){if(_e){if(_r[_f]>=0){continue;}}_k=0;for(_g=0;_g<_i;_g++ ){_j=_h[_g].size;_q[_f* _i+_g]=_j;_k+=_j;}_r[_f]=_k;}if(!_e){this._is_variable_bodyrowsize=false;}}}this._updateRowSizeExtend();};_pGrid._isLazyAutoVscroll=function(){return this._lazy_calculate&&(this.autosizingtype=="row"||this.autosizingtype=="both")&&this.extendsizetype=="row";};_pGrid._getMinRowTextHeight=function(){var _a;_a=this._getCellStyleInfo(0,"font",0,undefined,null,true);_a=nexacro.FontObject(_a);return nexacro._getTextSize(".",_a)[1];};_pGrid._resetRowSizeListBodyDisplay=function(){if(!this._curFormat){return;}var _a=false;if(this.autosizingtype!="none"&&!this._preloadImage()){_a=true;}var _b=this._curFormat;var _c,_d;var _e;var _f;var _g,_h;var _i,_j;var _k=this._getBodyClientSize()[1];var _l=this._getMinRowTextHeight();var _m=Math.ceil((_k+(_l-0.1))/_l);if(_b._bodyrows){_e=_b._bodyrows;_f=_e.length;var _n=this._rowSizeListSub,_o=this._rowSizeList;_i=this._getDataRow(this._toprowpos[0]);_j=_i+(_m-1)* 3;_j=Math.min(this._getDataRow(_j>this.rowcount-1?this.rowcount-1:_j),this._rowcount);if(!_a&&this._binddataset&&this._bodyAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(_c=_i;_c<=_j;_c++ ){if(this._lazy_load_rowsize[_c]==undefined){_h=0;for(_d=0;_d<_f;_d++ ){_g=this._getMaxSubRowSize(_c,_d);_n[_c* _f+_d]=_g;_h+=_g;}this._lazy_load_rowsize[_c]=_h;_o[_c]=_h;}}this._is_variable_bodyrowsize=true;}}this._updateRowSizeExtend();};_pGrid._updateRowSizeExtendEx=function(_a,_b,_c,_d,_e){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){if(!_a){return;}var _f=[];var _g=_a.length;var _h,_i;for(_i=0;_i<_g;_i++ ){_f[_i]=0;}var _j=_c.length;if(_d!=undefined){for(_h=0;_h<_g;_h++ ){_f[_h]=_c[_d* _g+_h];}}else{for(_h=0;_h<_j;){for(_i=0;_i<_g;_i++ ){_f[_i]=Math.max(_f[_i],_c[_h]);_h++ ;}}}for(_h=0;_h<_j;){for(_i=0;_i<_g;_i++ ){_c[_h]=_f[_i];_h++ ;}}var _k=0;for(_i=0;_i<_g;_i++ ){_k+=_f[_i];}var _l=_b.length;for(_h=0;_h<_l;_h++ ){_b[_h]=_k;}}if(_e){this._resetFixSize();}};_pGrid._updateRowSizeExtend=function(){if(!this._binddataset||!this._curFormat){return;}if(this._headAutoSize){this._updateRowSizeExtendEx(this._curFormat._headrows,this._rowHeadList,this._rowHeadListSub);}if(this._summAutoSize){this._updateRowSizeExtendEx(this._curFormat._summrows,this._rowSummList,this._rowSummListSub);}if(this._bodyAutoSize){this._updateRowSizeExtendEx(this._curFormat._bodyrows,this._rowSizeList,this._rowSizeListSub,undefined,true);}};_pGrid._isChangeBodyColSizeList=function(_a,_b,_c){if(this.autosizingtype!="both"&&this.autosizingtype!="col"){return false;}var _d=this._curFormat;if(!this._binddataset||!_d){return false;}var _e=_d._bodycells;var _f,_g,_h,_i=0;var _j=false;var _k;for(var _l=0,_m=_e.length;_l<_m;_l++ ){if(_e[_l].text._bindexpr==_a){_k=_e[_l]._getDisplayTypeValue(_c);if(_k=="checkboxcontrol"){continue;}_g=_e[_l]._col;_f=_d._cols[_g];_h=this._getMaxColDataSizeBand(_g);if(_f.size!=_h){_d._setColSize(_g,_h);_b[_i++ ]=_g;_j=true;}}}return _j;};_pGrid._isChangeBodyRowSizeList=function(_a){if(this._rowSizeEx==false&&this.autosizingtype!="both"&&this.autosizingtype!="row"){return false;}if(!this._binddataset||!this._curFormat){return false;}var _b=_a;var _c=this._curFormat._bodyrows;var _d;var _e;var _f;var _g;if(_c&&this._bodyAutoSize==true){_d=_c.length;for(_g=0;_g<_d;_g++ ){var _h=(_b* _c.length)+_g;_e=this._rowSizeListSub[_h];_f=this._getMaxSubRowSize(_b,_g);if(_e!=_f){return true;}}}_c=this._curFormat._headrows;if(_c&&this._headAutoSize==true){_d=_c.length;for(_g=0;_g<_d;_g++ ){_e=this._rowHeadListSub[_g];_f=this._getMaxSubRowSize( -1,_g);if(_e!=_f){return true;}}}_c=this._curFormat._summrows;if(_c&&this._summAutoSize==true){_d=_c.length;for(_g=0;_g<_d;_g++ ){_e=this._rowSummListSub[_g];_f=this._getMaxSubRowSize( -2,_g);if(_e!=_f){return true;}}}return false;};_pGrid._updateBodyRowSizeList=function(_a){var _b=false;if(this._rowSizeEx==false||this._bodyAutoSize==false){return false;}if(!this._binddataset||!this._curFormat||!this._curFormat._bodyrows||this._curFormat._bodyrows.length==0){return false;}var _c=_a;var _d=this._curFormat._bodyrows;var _e=_d.length;for(var _i=0;_i<_e;_i++ ){var _f=(_c* _d.length)+_i;var _g=this._rowSizeListSub[_f];var _h=this._getMaxSubRowSize(_c,_i);if(_g!=_h){this._rowSizeListSub[_f]=_h;this._rowSizeList[_c]+=(_h-_g);_b=true;}}if(_b==true){this._updateRowSizeExtend();}return _b;};_pGrid._getGridRowCount=function(_a){if(_a&&this._bodyrowheight===0){return 0;}var _b=0;if(this._hasTree){if(this._treeIndexes){_b=this._treeIndexes.length;}}else{_b=this._rowcount;}return _b;};_pGrid._resetDisplayInfo=function(_a){this.pagerowcount=0;this._pagerowcnt=0;this._disprowcnt=0;var _b=this._curFormat;if(!_b){return;}var _c=this._getBodyClientSize();var _d=_c[1];var _e=this._getGridRowCount();var _f;this._bodyrowheight=_b._body_height;if(this._bodyrowheight>0){if(this._is_variable_bodyrowsize==false||_e==0){var _g=this._bodyrowheight;this.pagerowcount=Math.floor(_d/_g);this._pagerowcnt=Math.ceil((_d+(_g-0.1))/_g);}else{_f=(this._vscrollmng)?this._vscrollmng._pos:0;var _h=this._control_element.vscroll_limit;if(_f<0){_f=0;}else if(_f>_h){_f=_h;}var _i,_j,_k=this._getScreenTopRowPos(_f);var _l;_i=_j=_k[0];_l=_k[1];var _m=this._getDataRow(_j);var _n=0-(this._rowSizeList[_m]-_l);for(;_j<_e;_j++ ){_m=this._getDataRow(_j);_n+=this._rowSizeList[_m];this._pagerowcnt++ ;if(_n>=_d){break;}this.pagerowcount++ ;}if(_j==_e&&_n<_d){var _o=(this._fixed_endrow>=0)?this._fixed_endrow: -1;for(_j=_i-1;_j>_o;_j-- ){_m=this._getDataRow(_j);_n+=this._rowSizeList[_m];this._pagerowcnt++ ;if(_n>=_d){break;}this.pagerowcount++ ;}}while(_n<_d){_n+=this._bodyrowheight;this._pagerowcnt++ ;if(_n>=_d){break;}this.pagerowcount++ ;}if(this._pagerowcnt==0&&_k[1]>=_d){this._pagerowcnt=this.pagerowcount=1;}}this._disprowcnt=this._pagerowcnt;}};_pGrid._createTempCell=function(_a,_b,_c){var _d=this._getCellinfos(_b);if(!_d){return;}var _e=this._getBandId(_b);var _f=this._getGridRow(_b);var _g=this._style_tempband[_e];if(!_g){_g=this._style_tempband[_e]=new nexacro.Component(_e,0, -10,0,0,null,null,null,null,null,null,this);_g._skip_mobile_tabfocus=true;_g._is_subcontrol=true;_g._type_name=nexacro._GridBandControl.prototype._type_name;_g.createComponent(true);_g._org_on_destroy_contents=_g.on_destroy_contents;_g.on_destroy_contents=function(){this._org_on_destroy_contents();this._stylerow.destroy();this._stylerow=null;};}if(this._is_created&&!_g._is_created){_g.on_created();}var _h=_g._stylerow;if(!_h){_h=_g._stylerow=new nexacro._GridRowControl(_g,0, -10,0,0,_f,true);_h._style_evecells=[];_h._style_oddcells=[];_h.createComponent(true);if(this._is_created){_h.on_created();}_h._org_on_destroy_contents=_h.on_destroy_contents;_h.on_destroy_contents=function(){this._org_on_destroy_contents();var _l,_m;for(_l=0,_m=this._style_evecells.length;_l<_m;_l++ ){if(this._style_evecells[_l]){this._style_evecells[_l].destroy();this._style_evecells[_l]=null;}}for(_l=0,_m=this._style_oddcells.length;_l<_m;_l++ ){if(this._style_oddcells[_l]){this._style_oddcells[_l].destroy();this._style_oddcells[_l]=null;}}this._style_evecells=null;this._style_oddcells=null;};}else if(_h._rowidx!=_f){if(this._is_created&&!_h._is_created){_h.on_created();}_h._changeRow(_f);_h._updateAll();}var _i=_c?_c._cellidx:_a;var _j=(_f%2)?_h._style_oddcells[_i]:_h._style_evecells[_i];if(!_j){_j=new nexacro._GridCellControl("tempcell",0, -10,0,0,null,null,_h,_d[_i],_f,_i);_j.createComponent(true);(_f%2)?_h._style_oddcells[_i]=_j:_h._style_evecells[_i]=_j;}var _k=_j.subcells[_i];if(!_k){if(_c){_k=new nexacro._GridSubCellControl("tempcell_sub",0, -10,0,0,null,null,_j,_d[_i],_f,_i);_k.parentcell=_j;_k.createComponent(true);_j.subcells[_i]=_k;}}};_pGrid._getTempCell=function(_a,_b,_c,_d,_e){var _f=this._getBandId(_b);var _g=this._getGridRow(_b);var _h=this._style_tempband[_f];if(_h){var _i=_h._stylerow;if(_i){var _j=_c?_c._cellidx:_a;var _k=(_g%2)?_i._style_oddcells[_j]:_i._style_evecells[_j];if(_d){_k._updateAllEx(_e);}else{_k._updateAll();}if(_c){var _l=_k.subcells[_j];return {cell:_k,subcell:_l};}else{return {cell:_k,subcell:null};}}}return {cell:null,subcell:null};};_pGrid._getCellinfos=function(_a){if(_a>=0){return this._curFormat._bodycells;}if(_a== -1){return this._curFormat._headcells;}if(_a== -2){return this._curFormat._summcells;}};_pGrid._getBandId=function(_a){if(_a>=0){return "body";}if(_a== -1){return "head";}if(_a== -2){return "summary";}};_pGrid._getCellStyleInfo=function(_a,_b,_c,_d,_e,_f,_g){var _h=_e?_e._subcells:this._getCellinfos(_c);if(!_h){return null;}var _i=true;if(this._flush_cell_oldrow==_c&&this._flush_cell_oldcell==_a){_i=false;}else if(this._flush_cell_oldrow!=_c&&this._flush_cell_oldcell==_a){if(this._flush_cell_oldrow>=0&&_c>=0){if(_h[_a].cssclass._bindtype<2){_i=false;}}}this._createTempCell(_a,_c,_e);var _j=this._getTempCell(_a,_c,_e,_f,_b);var _k=_j.cell;var _l=_j.subcell;var _m=_l?_l:_k;if(_k){_k._changeUserStatus("selected",!!_d);}if(_l){_l._changeUserStatus("selected",!!_d);}var _n=undefined;var _o,_p;if(nexacro._isArray(_b)){_o={};_p=_b;}var _q=0;var _r=false;while(true){var _s=false;if(_p){_b=_p[_q++ ];}_n=_h[_a]._getStyleCache(_b,_c,_d);if(!_n){if(!_r){if(_b=="background"||_b=="cursor"||_b=="align"||_b=="textDecoration"){if(this._is_created){if(!_k._is_created){_k.on_created();}if(_l&&!_l._is_created){_l.on_created();}}else{_s=true;}if(_i){_m._control_element._flushCommand();this._flush_cell_oldrow=_c;this._flush_cell_oldcell=_a;}_r=true;}}if(_b=="background"){_n=_m._control_element._getComputedStyleBackgroundColor(true,_g);}else if(_b=="cursor"){_n=_m._control_element._getComputedStyle("cursor",true);}else if(_b=="align"){var _t=_m._subComp;var _u;if(_t){_u=_t._getCurrentStyleAlign(true);}else{_u=_m._getCurrentStyleAlign(true);}_n=_u.textAlign+","+_u.verticalAlign;}else if(_b=="font"||_b=="color"||_b=="wordSpacing"||_b=="letterSpacing"){var _v=_h[_a][_b];if(_v&&_v instanceof nexacro.BindableValue){_v=_v._value;}_n=_v||_m._getCurrentStyleInheritValue(_b,"enabled");}else if(_b=="border"){if(_h[_a]._getSuppress(_c)>0){_s=true;}_n=_m._getCurrentStyleBorder();}else if(_b=="textDecoration"){var _w=_h[_a][_b];if(_w&&_w instanceof nexacro.BindableValue){_w=_w._value;}_n=_w||_m._getCSSStyleValue(_b,"enabled");if(!_n){var _x=_m._text_elem;if(_x){_n=_x._getComputedStyle("text-decoration",true);}}}else if(_b=="checkboxicon"){var _y=_m._subComp;_n=_y._getCurrentStyleInheritValue("icon","enabled");}else if(_b=="checkboxsize"){var _z=_m._subComp;_n=_z._on_getFitSize();}else if(_b=="controldisplaysize"){var _aa=[0,0];var _ab=_m._subComp;if(!_ab){return _aa;}var _ac=_ab._getCSSStyleValue("padding","enabled");var _ad=_ab._getCSSStyleValue("border","enabled");if(_ac){_aa[0]+=_ac.left+_ac.right;_aa[1]+=_ac.top+_ac.bottom;}if(_ad){_aa[0]+=_ad.left._width+_ad.right._width;_aa[1]+=_ad.top._width+_ad.bottom._width;}_n=_aa;}else if(_b=="treestatusicon"){var _ae=_m._subComp;if(_ae._img_ctrl){_n=_ae._img_ctrl._getCurrentStyleInheritValue("icon","enabled");}}else if(_b=="treebuttonicon"){var _af=_m._subComp;if(_af._btnimg_ctrl){_n=_af._btnimg_ctrl._getCurrentStyleInheritValue("icon","enabled");}}else if(_b=="treecheckboxicon"){var _ag=_m._subComp;if(_ag._chk_ctrl){_n=_ag._chk_ctrl._getCurrentStyleInheritValue("icon","enabled");}}else if(_b=="treecheckboxsize"){var _ah=_m._subComp;if(_ah._chk_ctrl){_n=_ah._chk_ctrl._on_getFitSize();}}else{var _ai=_h[_a][_b];if(_ai&&_ai instanceof nexacro.BindableValue){_ai=_ai._value;}_n=_ai||_m._getCSSStyleValue(_b,"enabled");}var _aj=_n;if(_n&&nexacro._isObject(_n)&&!nexacro._isArray(_n)){if(_n&&_n._bindtype>0){_aj="bindexpr";}else{_aj=_n.value;}_n=_n.value;}var _ak=_h[_a].cssclass;if(_b=="font"){if(_ak&&_ak._bindtype>0&&!_h[_a].font){_aj="bindexpr";}if(!_d){_h[_a]._curfont=_aj;}else{_h[_a]._curselfont=_aj;}}else if(_b=="border"){if(_ak&&_ak._bindtype>0&&!_h[_a].border){_aj="bindexpr";}_h[_a]._curborder=_aj;}else if(_b=="padding"){if(_ak&&_ak._bindtype>0&&!_h[_a].padding){_aj="bindexpr";}_h[_a]._curpadding=_aj;}if(!_s){if(_n){_h[_a]._setStyleCache(_b,_c,_d,_n);}}}else{}if(_p){_o[_b]=_n;if(_q<_p.length){continue;}return _o;}break;}return _n;};_pGrid._getMaxColSize=function(_a,_b,_c,_d,_e,_f){var _g=0;var _h=_a.length;var _i;var _j=this._curFormat;var _k,_l;for(var _ag=0;_ag<_h;_ag++ ){_k=_a[_ag]._col;_l=_a[_ag]._colspan;if(_k<=_b&&_k+_l>_b){_i=_a[_ag]._subcells;if(_i.length>0){var _m=this._getMaxColSize(_i,_b-_k,_c,_b,_e,_a[_ag]);_g=Math.max(_g,_m);}else{if(_l>1){if(_k+_l-1!=_b){continue;}}if(!_d){_d=0;}var _n=0;if(this._hasTree){_n=this._getDepthWidth(_c,_a[_ag]);}if(_n<0){return  -1;}var _o=_a[_ag]._getAttrValue(_a[_ag].autosizecol,_c);var _p=_j._cols[_b+_d].orgsize;var _q;var _r;if(_o=="none"){_q=_p;}else{var _s=_a[_ag]._getDisplayTypeValue(_c);if(_s=="checkboxcontrol"){var _t=_a[_ag]._getCheckboxsize(_c);if(_t==undefined){_t=this._getCellStyleInfo(_a[_ag]._cellidx,"checkboxsize",_c,false,_f,true);_t=_t[0];}_q=_t+6;}else{var _u=_a[_ag]._getVirtualMergeInfo(_c+2)?"":_a[_ag]._getDisplayText(_c);if(_u&&_e&&_l==1&&!this._hasTree){var _v=/\r\n|\n|\r/;var _w=_u.split(_v);var _x=_w.length;var _y,_z=0,_aa=0;for(_r=0;_r<_x;_r++ ){_y=this._getByteLength_UTF8(_w[_r]);_aa=Math.max(_aa,_w[_r].length);_z=Math.max(_z,_y);}if(_e.max>_z&&_e.len>_aa){continue;}_e.len=_aa;_e.max=_z;}_q=this._getCellRowTextSize(_a[_ag],_c,_u);_q=_q[0];}var _ab=_a[_ag]._curpadding,_ac=_a[_ag]._curborder;if(_ab==="bindexpr"||_ab===undefined){_ab=this._getCellStyleInfo(_ag,"padding",_c,undefined,undefined,true);}if(_ac==="bindexpr"||_ac===undefined){_ac=this._getCellStyleInfo(_ag,"border",_c,undefined,undefined,true);}if(_ab){_ab=nexacro.PaddingObject(_ab);_q+=_ab.left+_ab.right;}if(_ac){_ac=nexacro.BorderObject(_ac);_q+=_ac.right._width;}_q+=_n;if(_o=="limitmin"){if(_q<_p){_q=_p;}}else if(_o=="limitmax"){if(_q>_p){_q=_p;}}if(_l>1){var _ad=0;var _ae=_k,_af=_k+_l-1;for(_r=_ae;_r<_af;_r++ ){_ad+=_j._cols[_r+_d].size;}_q-=_ad;}_q+=this._getDisplaytypeControlSize(true,_s,_a[_ag],_f,_c);}_g=Math.max(_g,_q);}}}return _g;};_pGrid._getTextSizeCache=function(_a){var _b;if(!this._arrtextsizeCache){this._arrtextsizeCache={};}if(this._arrtextsizeCache[_a.value]){_b=this._arrtextsizeCache[_a.value];}else{_b=nexacro._getTextSize("A",_a);this._arrtextsizeCache[_a.value]=_b;}return _b;};_pGrid._getCellRowTextSize=function(_a,_b,_c,_d,_e,_f){var _g=_a._curfont,_h=_a._curselfont;var _i=_a._getWordwrap(_b);var _j=[],_k,_l;if(!_i){_i=this._getCellStyleInfo(_a._cellidx,"wordWrap",_b,undefined,_d,true);}if(_g===undefined){_g=this._getCellStyleInfo(_a._cellidx,"font",_b,undefined,_d,true);_g=nexacro.FontObject(_g);_k=this._getTextSizeCache(_g);if(_a._curfont!=="bindexpr"){_a._cur1font_size=_k;}}else{if(_g==="bindexpr"){_g=this._getCellStyleInfo(_a._cellidx,"font",_b,undefined,_d,true);_g=nexacro.FontObject(_g);_k=this._getTextSizeCache(_g);}else{_g=nexacro.FontObject(_g);if(!(_k=_a._cur1font_size)){_k=this._getTextSizeCache(_g);_a._cur1font_size=_k;}}}if(_h===undefined){_h=this._getCellStyleInfo(_a._cellidx,"font",_b,true,_d,true);_h=nexacro.FontObject(_h);_l=this._getTextSizeCache(_h);if(_a._curselfont!=="bindexpr"){_a._cur1selectfont_size=_l;}}else{if(_h==="bindexpr"){_h=this._getCellStyleInfo(_a._cellidx,"font",_b,true,_d,true);_h=nexacro.FontObject(_h);_l=this._getTextSizeCache(_h);}else{_h=nexacro.FontObject(_h);if(!(_l=_a._cur1selectfont_size)){_l=this._getTextSizeCache(_h);_a._cur1selectfont_size=_l;}}}var _m;if(!_c){if(_k[0]<=_l[0]){_j=[].concat(_l);}else{_j=[].concat(_k);}_j[0]=1;_j[1]=Math.ceil(_j[1]);return _j;}else{if(_k[0]<=_l[0]){_g=_h;_m=_l[1];}else{_m=_k[1];}}var _n="normal";if(!_e){_n=_a._getDisplayTypeValue(_b);}if(_n=="imagecontrol"){var _o="row"+_b;var _p=_a._imgWidthTemp[_o];var _q=_a._imgHeightTemp[_o];var _r;if(_p>0){_j[0]=_p;_j[1]=_q;}else{_r=nexacro._getURIValue(_c);_r=nexacro._getImageLocation(_r,this._getRefFormBaseUrl());var _s=nexacro._getImageSize(_r,this._on_sizeloading,this,this._getRefFormBaseUrl(),_c);if(_s){_j[0]=_s.width;_j[1]=_s.height;}else{_j[0]=1;_j[1]=_m;}}_j[0]=Math.ceil(_j[0]);_j[1]=Math.ceil(_j[1]);return _j;}else{var _t=true;var _u=(_n=="decoratetext")?true:false;var _v=0;if(this.autosizingtype=="col"||this.autosizingtype=="both"){_t=false;}var _w=this._getCellStyleInfo(_a._cellidx,["wordSpacing","letterSpacing"],_b,undefined,_d,true);var _x=_w.wordSpacing;var _y=_w.letterSpacing;var _z=_a._getAttrValue(_a.expandshow,_b);if(_z=="show"){_v+=_a._getAttrValue(_a.expandsize,_b);}if(_y){_y=nexacro.CSSValueObject(_y);}if(_x){_x=nexacro.CSSValueObject(_x);}var _aa;if(_t&&(this._autoSizeRowProc||this._rowSizeEx)&&_i!=null&&_i!="none"&&_i!=false&&_i!="false"){var _ab;if(_f!=undefined){_ab=_f;_aa=this._getCellStyleInfo(_a._cellidx,"padding",_b,undefined,_d,true);if(_aa){_aa=nexacro.PaddingObject(_aa);_ab-=(_aa.left+_aa.right);}}else{var _ac=this._curFormat._cols;var _ad=(_d?_d._col:0)+_a._col;_w=this._getCellStyleInfo(_a._cellidx,["padding","border","align"],_b,undefined,_d,true);_aa=_w.padding;var _ae=_w.border;var _af=this._getCellStyleInfo(_a._cellidx,"border",_b,true,_d,true);_ab=_ac[_ad+_a._colspan-1].right-_ac[_ad].left;if(_ae){_ae=nexacro.BorderObject(_ae);}if(_ae&&_af){_af=nexacro.BorderObject(_af);_ae=(_ae.right._width<_af.right._width)?_af:_ae;}if(_aa){_aa=nexacro.PaddingObject(_aa);_ab-=(_aa.left+_aa.right);}if(_ae){_ab-=_ae.right._width;}}_ab-=this._getDisplaytypeControlSize(true,_n,_a,_d,_b);var _ag,_ah;if(_w.align){var _ai=_w.align.split(",");_ag=_ai[0];_ah=_ai[1];}_ab-=_v;_j=nexacro._getTextSize(_c,_g,true,_ab,_i,_x,_y,_u,_ag,_ah);}else{_j=nexacro._getTextSize(_c,_g,true,undefined,undefined,_x,_y,_u);}_j[0]+=_v;if(_j[1]<_m){_j[1]=_m;}_j[0]=Math.ceil(_j[0]);_j[1]=Math.ceil(_j[1]);return _j;}};_pGrid._getMaxSubRowSize=function(_a,_b,_c,_d,_e){var _f=this._curFormat;var _g;if(_a== -2){if(!_c){_c=this._curFormat._summcells;}_g=_f._summrows;}else if(_a== -1){if(!_c){_c=this._curFormat._headcells;}_g=_f._headrows;}else{if(!_c){_c=this._curFormat._bodycells;}_g=_f._bodyrows;}if(!this._autoSizeRowProc&&this.autosizingtype!="row"&&this.autosizingtype!="both"){return _g[_b].size;}var _h=0;var _i=_c.length;var _j,_k,_l;for(var _w=0;_w<_i;_w++ ){_j=_c[_w]._row;_k=_c[_w]._rowspan;_l=_c[_w]._subcells;if(_j==_b||(_l.length>0&&_j<=_b&&(_j+_k)>_b)){var _m=0;if(_l.length>0){_m=this._getMaxSubRowSize(_a,_b-_j,_l,_j,_c[_w]);_h=Math.max(_h,_m);}else{if(!_d){_d=0;}var _n=_c[_w]._getAttrValue(_c[_w].autosizerow,_a);var _o=_g[_b+_d].size;var _p;if(_n=="none"){_p=_o;}else{var _q=_c[_w]._getDisplayTypeValue(_a);if(_q=="checkboxcontrol"){var _r=_c[_w]._getCheckboxsize(_a);if(_r==undefined){_r=this._getCellStyleInfo(_c[_w]._cellidx,"checkboxsize",_a,false,_e,true);_r=_r[1];}_p=_r+6;}else{var _s=_c[_w]._getVirtualMergeInfo(_a+2)?"":_c[_w]._getDisplayText(_a);var _t=this._getCellRowTextSize(_c[_w],_a,_s,_e);_p=_t[1];var _u=_c[_w]._curpadding,_v=_c[_w]._curborder;if(_u==="bindexpr"||_u===undefined){_u=this._getCellStyleInfo(_w,"padding",_a,undefined,_e,true);}if(_v==="bindexpr"||_v===undefined){_v=this._getCellStyleInfo(_w,"border",_a,undefined,_e,true);}if(_u){_u=nexacro.PaddingObject(_u);_p+=_u.top+_u.bottom;}if(_v){_v=new nexacro.BorderObject(_v);_p+=_v.bottom._width;}}_p+=this._getDisplaytypeControlSize(false,_q,_c[_w],_e,_a);if(_n=="limitmin"){if(_p<_o){_p=_o;}}else if(_n=="limitmax"){if(_p>_o){_p=_o;}}}_h=Math.max(_h,_p);}}}return _h;};_pGrid._getDisplaytypeControlSize=function(_a,_b,_c,_d,_e){if(_b.indexOf("control")<0){return 0;}var _f=this._getCellStyleInfo(_c._cellidx,"controldisplaysize",_e,false,_d,true);if(_a==true){_f=_f[0];return _f;}else{_f=_f[1];return _f;}};_pGrid._getSubRowSizeList=function(_a){var _b=this._curFormat;var _c=_b._bodyrows;var _d=_c.length;var _e=[],_f=0;for(var _g=0;_g<_d;_g++ ){_e[_f++ ]=this._rowSizeListSub[_a* _d+_g];}return _e;};_pGrid._makeCssRefInfoCtrl=function(_a){_a._refcssobj=this;_a._refcssid="#"+_a.id;return this;};_pGrid._addFuncQueue=function(_a,_b,_c,_d){var _e={work:_a,pthis:_b,func:_c,args:_d};this._func_queue.push(_e);};_pGrid._exeFuncQueue=function(_a){var _b=this._func_queue;for(var _c=0;_c<_b.length;_c++ ){if(_b[_c].work==_a){_b[_c].func.call(_b[_c].pthis,_b[_c].args);this._func_queue.splice(_c,1);_c-- ;}}};_pGrid._addRefreshContents=function(_a,_b,_c){if(_b){var _d=this._recreate_contents_proc;if(_c){for(var _f=0,_g=_d.length;_f<_g;_f++ ){if(_d[_f].workname==_a){return false;}}}var _e={workname:_a,band:_b};_d.push(_e);return true;}};_pGrid._execRefreshContents=function(_a,_b,_c){var _d=this._recreate_contents_proc;for(var _e=0;_e<_d.length;_e++ ){if(_d[_e].workname==_a){_d[_e].band._recreate_contents(false,false,false,_c);this._recreate_contents_proc.splice(_e,1);_e-- ;}}};_pGrid._applyColSizing=function(_a,_b,_c){if(!this.enableredraw){return;}var _d=this.getElement();var _e=this._curFormat;if(_d&&_e&&_b>=0){var _f=this._headBand;var _g=_f._get_rows();var _h=_g[0]._cells[_b];var _i=_h._refinfo;var _j=_i._col+(_i._colspan-1);if(_i._area!="right"){var _k=_e._cols[_j].left;var _l=_e._cols[_j].right+_a;if(_k>_l){var _m=_e._cols[_j+1];if((_m&&_m._area=="right")||_j==_e._cols.length-1){_a=_k-_e._cols[_j].right+7;}else{_a=_k-_e._cols[_j].right+1;}}}else{var _n=_e._cols[_j].right;var _o=_e._cols[_j].left+_a;if(_n<_o){_a=_n-_e._cols[_j].left-1;}_a=0-_a;}var _p=_e._cols[_j].size;var _q=_e._adjustColSizing(_j,_a);var _r=_e._cols[_j].size;if(_q){if(this.enableredraw){this._updateColSize(_j);}else{if(!this._enable_redraw_history.updatecolsize){this._enable_redraw_history.updatecolsize=[];}this._enable_redraw_history.updatecolsize.push(_j);}if(!_c){this._isUserChangeColSize=true;this._addFuncQueue("colsizing",this,this.on_fire_oncolresized,[_j, -9,_r,_p,_j]);}}}};_pGrid._applyRowSizing=function(_a,_b){if(this.enableredraw==false){return;}var _c=this.getElement();var _d=this._curFormat;if(_d&&_c&&_b>=0){var _e=this._resizerRowRange[_b];var _f=_e.area;var _g=this._getDataRow(_e.row);var _h=_e.cellinfo._row+_e.cellinfo._rowspan-1;this._applyRowSizing2(_a,_f,_g,_h);}};_pGrid._applyRowSizing2=function(_a,_b,_c,_d,_e){if(this.enableredraw==false){return;}var _f=this.getElement();var _g,_h,_i;var _j=this._curFormat;var _k;var _l;if(_j&&_f){var _m=false;if(_b=="head"){_h=this._rowHeadListSub[_d];_k=_h+_a;_k=Math.max(_k,5);_k=Math.min(_k,this._getClientHeight()-5);_i=_k;_l=this.enableredraw;this.enableredraw=false;this.setRealRowSize( -1,_k,_d,true);this.enableredraw=_l;_g=_d;if(_a){this._resizeBand();if(!_e){this._addRefreshContents("rowsizing",this._headBand);}else{this._headBand._recreate_contents(false,false,false);}_m=true;}}else if(_b=="body"){_h=this._rowSizeListSub[_c* _j._bodyrows.length+_d];_k=_h+_a;var _n,_o;if(_c==this._rowcount-1){_o=7;}else{_o=1;}_n=_k-_o;if(_n<0){_k=_o;_a-=_n;}_i=_k;if(this._getFixRowCnt()>_c){this._fixed_height+=_a;this._fixedrow_height+=_a;}_l=this.enableredraw;this.enableredraw=false;this.setRealRowSize(_c,_k,_d,true);this.enableredraw=_l;_g=_d+((_j._headrows)?_j._headrows.length:0);if(_a){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){if(!_e){this._addRefreshContents("rowsizing",this._bodyBand);}else{this._bodyBand._recreate_contents(false,false,false);}}else{this._updateRowSize(_c,_d);}_m=true;}}else if(_b=="summ"){_h=this._rowSummListSub[_d];if(this.summarytype=="top"||this.summarytype=="lefttop"){_k=_h+_a;}else{_k=_h-_a;}_k=Math.max(_k,5);_k=Math.min(_k,this._getClientHeight()-5);_i=_k;_l=this.enableredraw;this.enableredraw=false;this.setRealRowSize( -2,_k,_d,true);this.enableredraw=_l;_g=_d+((_j._headrows)?_j._headrows.length:0)+((_j._bodyrows)?_j._bodyrows.length:0);if(_a){this._resizeBand();if(!_e){this._addRefreshContents("rowsizing",this._summBand);}else{this._summBand._recreate_contents(false,false,false);}_m=true;}}if(_m&&!_e){this._addFuncQueue("rowsizing",this,this.on_fire_onrowresized,[_g,_c,_i,_h,_d]);}}};_pGrid._updateColSize=function(_a){if(this._after_recreate){return;}var _b=false;if(this.autosizingtype=="row"||this.autosizingtype=="both"){this._resetRowSizeList();this._resizeBand(true);_b=true;}this._autofitcol_rate=[];this._applyAutofittype(true);if(this._headBand){this._headBand._matrix._adjustColsDisplay(true,true);this._headBand._matrix._adjustRowsDisplay(_b);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true,true);this._summBand._matrix._adjustRowsDisplay(_b);}if(this._bodyBand){var _c=this._getScrollTop();if(_c<0){_c=0;}this._last_scroll_top=_c;this._toprowpos=this._getScreenTopRowPos(_c);this._bottomrowpos=this._getScreenBottomRowPos(_c);this._bodyBand._matrix._adjustColsDisplay(true,true);this._bodyBand._matrix._adjustRowsDisplay(_b);this._bodyBand._update_rows=this._bodyBand._matrix._adjustScrollRows(_c,true);this._bodyBand._on_refresh_rows(false,true);this._adjustOverlayControls(true);}this._resetScrollMax();};_pGrid._updateRowSize=function(_a,_b,_c){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){return;}var _d=this._curFormat;var _e;var _f;var _g;var _h;var _i,_j,_k,_l;var _m;var _n,_o;if(_a== -1){if(!this._headBand){return false;}_e=this._headBand._get_rows()[0];_g=this._rowHeadList[0];_f=0;_e.set_height(_g);_e._init(_d);_h=_e._cells;for(_j=0,_l=_h.length;_j<_l;_j++ ){_n=_h[_j]._refinfo._row;_o=_h[_j]._refinfo._rowspan;_m=0;if(_n<=_b&&_b<_n+_o){for(_k=_n;_k<_n+_o;_k++ ){_m+=this._rowHeadListSub[_k];}_f=_m-_h[_j]._height;_h[_j].set_height(_m);}else if(_n>_b){_h[_j].set_top(_h[_j]._top+_f);}}this._resizeBand();if(this._bodyBand&&!_c){this._bodyBand._matrix._adjustRowsDisplay();this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows(false,false);}}else if(_a== -2){if(!this._summBand){return false;}_e=this._summBand._get_rows()[0];_g=this._rowSummList[0];_f=0;_e.set_height(_g);_e._init(_d);_h=_e._cells;for(_j=0,_l=_h.length;_j<_l;_j++ ){_n=_h[_j]._refinfo._row;_o=_h[_j]._refinfo._rowspan;_m=0;if(_n<=_b&&_b<_n+_o){for(_k=_n;_k<_n+_o;_k++ ){_m+=this._rowSummListSub[_k];}_f=_m-_h[_j]._height;_h[_j].set_height(_m);}else if(_n>_b){_h[_j].set_top(_h[_j]._top+_f);}}this._resizeBand();if(this._bodyBand&&!_c){this._bodyBand._matrix._adjustRowsDisplay();this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows(false,false);}}else if(_a>=0){if(!this._bodyBand){return false;}var _p=this._bodyBand._get_rows();for(_i=0,_l=_p.length;_i<_l;_i++ ){if(_p[_i]._rowidx==_a){_e=_p[_i];break;}}if(!_e){return false;}_e._init(_d);if(this._fixed_height){this._bodyBand._control_element._setFixArea(this._fixed_height);}var _q=this._getDataRow(_a);_g=this._rowSizeList[_q];var _r=this._curFormat._bodyrows.length;_f=0;_e.set_height(_g);_h=_e._cells;for(_j=0,_l=_h.length;_j<_l;_j++ ){_n=_h[_j]._refinfo._row;_o=_h[_j]._refinfo._rowspan;_m=0;if(_n<=_b&&_b<_n+_o){for(_k=_n;_k<_n+_o;_k++ ){_m+=this._rowSizeListSub[_q* _r+_k];}_f=_m-_h[_j]._height;_h[_j].set_height(_m);}else if(_n>_b){_h[_j].set_top(_h[_j]._top+_f);}}var _s=this._getScrollTop();if(_s<0){_s=0;}if(!_c){this._last_scroll_top=_s;this._toprowpos=this._getScreenTopRowPos(_s);this._bottomrowpos=this._getScreenBottomRowPos(_s);this._bodyBand._matrix._adjustRowsDisplay(true);this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._update_rows=this._bodyBand._matrix._adjustScrollRows(_s,true);this._bodyBand._on_refresh_rows(false,false);}}else{return false;}this._adjustOverlayControls(true);return true;};_pGrid._applyResizer=function(){if(!this._is_created){return;}var _a=this._border||this._getCSSStyleValue("border",this._status);var _b=(_a)?_a.left._width:0;var _c=(_a)?_a.top._width:0;var _d=this._resizer_colctrl;var _e=this._resizer_rowctrl;var _f,_g,_h,_i,_j,_k;var _l;var _m={};var _n;var _o;var _p,_q,_r,_s;var _t;var _u;if(this.cellsizingtype=="col"||this.cellsizingtype=="both"){_t=this._headBand;if(_t==null){return;}_f=_t._get_rows();if(_f.length==0){return;}_o=_f[0]._cells.length;_l=this._resizerColRange=[];_n=0;if(!_d){_d=new nexacro._GridResizerControl("resizertrack",0,0,0,0,null,null,this);}_d._setDirection("horizon");_d._setTracksize(this._getClientHeight());_d._setCallbackFn(this._applyColSizing);if(!_d._is_created){_d.createComponent();}this._resizer_colctrl=_d;for(_u=0;_u<_o;_u++ ){_g=_f[0]._cells[_u];if(!_g){break;}_i=_g._refinfo;_j=_g._setPositionInGrid(null,true,true);_s=_j.height;_h=_g._refinfo._border||_g._getCSSStyleValue("border",_g._stauts);if(_i._area=="left"||_i._area=="body"){_r=_h?_h.right._width:0;_p=_j.left+_g._adjust_width-_r-4;}else{_r=_h?_h.left._width:0;_p=_j.left-2;}_m={left:_p+_b,top:_j.top+_c,right:_p+_r+_b+6,bottom:_j.top+_s+_c,index:_g._cellidx,area:_i._area};switch(this.cellsizebandtype){case "body":if(_i._area=="body"){_l[_n++ ]=_m;}break;case "allband":case "nohead":_l[_n++ ]=_m;break;case "noleft":case "nohead,noleft":if(_i._area!="left"){_l[_n++ ]=_m;}break;}}}else{if(_d){_d.destroy();this._resizer_colctrl=null;this._resizerColRange=[];}}if(this.cellsizingtype=="row"||this.cellsizingtype=="both"){var _v=this._headBand;var _w=this._bodyBand;var _x=this._summBand;var _y;if(!_v&&!_w&&!_x){return;}_l=this._resizerRowRange=[];_n=0;if(_e){_e.destroy();}_e=new nexacro._GridResizerControl("resizertrack",0,0,0,0,null,null,this);_e._setDirection("vertical");_e._setTracksize(this._getClientWidth());_e._setCallbackFn(this._applyRowSizing);_e.createComponent();this._resizer_rowctrl=_e;while(_v){if(this.cellsizebandtype=="body"||this.cellsizebandtype=="nohead"||this.cellsizebandtype=="nohead,noleft"){break;}_f=_v._get_rows();if(!_f.length){break;}_y=_f[0]._cells.length;for(_k=0;_k<_y;_k++ ){_g=_f[0]._cells[_k];_i=_g._refinfo;_j=_g._setPositionInGrid(null,true,true);_r=_g._adjust_width;_h=_g._refinfo._border||_g._getCSSStyleValue("border",_g._status);_s=_h?_h.bottom._width:0;_q=_j.top+_g._adjust_height-_s-4;_m={left:_j.left+_b,top:_q+_c,right:_j.left+_r+_b,bottom:_q+_s+6+_c,index:_n,area:"head",row:_g._rowidx,cellinfo:_i};_l[_n++ ]=_m;}break;}if(_w){_f=_w._get_rows();var _z=_f.length;_y=_z>0?_f[0]._cells.length:0;for(_k=0;_k<_z;_k++ ){for(_u=0;_u<_y;_u++ ){_g=_f[_k]._cells[_u];_i=_g._refinfo;_j=_g._setPositionInGrid(null,true,true);_r=_g._adjust_width;_h=_g._refinfo._border||_g._getCSSStyleValue("border",_g._status);_s=_h?_h.bottom._width:0;_q=_j.top+_g._adjust_height-_s-4;_m={left:_j.left+_b,top:_q+_c,right:_j.left+_r+_b,bottom:_q+_s+6+_c,index:_n,area:"body",row:_g._rowidx,cellinfo:_i};_l[_n++ ]=_m;}}}while(_x){if(this.cellsizebandtype=="body"){break;}_f=_x._get_rows();if(!_f.length){break;}_y=_f[0]._cells.length;for(_k=0;_k<_y;_k++ ){_g=_f[0]._cells[_k];_i=_g._refinfo;_j=_g._setPositionInGrid(null,true,true);_r=_g._adjust_width;_h=_g._refinfo._border||_g._getCSSStyleValue("border",_g._status);if(this.summarytype=="top"||this.summarytype=="lefttop"){_s=_h?_h.bottom._width:0;_q=_j.top+_g._adjust_height-_s-4;}else{_s=_h?_h.top._width:0;_q=_j.top-2;}_m={left:_j.left+_b,top:_q+_c,right:_j.left+_r+_b,bottom:_q+_s+6+_c,index:_n,area:"summ",row:_g._rowidx,cellinfo:_i};_l[_n++ ]=_m;}break;}}else{if(_e){_e.destroy();this._resizer_rowctrl=null;this._resizerRowRange=[];}}};_pGrid._destroyResizer=function(){var _a=this._resizer_colctrl;if(_a){_a.destroy();this._resizer_colctrl=null;}var _b=this._resizer_rowctrl;if(_b){_b.destroy();this._resizer_rowctrl=null;}};_pGrid._isAreaSelect=function(){if(this.selecttype=="area"||this.selecttype=="multiarea"){return true;}return false;};_pGrid._isSelectRowType=function(){if(this.selecttype=="row"||this.selecttype=="multirow"){return true;}return false;};_pGrid._isMultiSelect=function(){if(this.selecttype=="multirow"||this.selecttype=="multicell"||this.selecttype=="multitreecell"||this.selecttype=="multiarea"){return true;}return false;};_pGrid._setColSize=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._curFormat;var _i=this._getColFixCnt("left");var _j=this._getColFixCnt("body");var _k=this._getColFixCnt("right");var _l=_h._cols;var _m=_l.length;var _n="body";if(typeof (_a)!="string"){if(_a== -1){_n="left";}else if(_a== -2){_n="right";}}else{_n=_a;}if(_d==true||_a>= -2){if(_n=="left"){if(_b>=_i){return false;}}if(_n=="body"&&_b>=0){if(_b>=_j){return false;}_b+=_i;}else if(_n=="right"){if(_b>=_k){return false;}_b+=_i;_b+=_j;}}var _o=false;if(_b== -1){var _p;for(var _q=0;_q<_m;_q++ ){if(_f){if(_l[_q]._area=="left"&&this._AutoSizeLcol==false){continue;}if(_l[_q]._area=="right"&&this._AutoSizeRcol==false){continue;}}_p=_h.setFormatColProperty(_q,"size",_c);if(_p){_o=_p;this._autofitcol_rate=[];if(_e){this._recreate_contents_all(true,false);}}}}else{while(true){if(_f){if(_l[_b]._area=="left"&&this._AutoSizeLcol==false){break;}if(_l[_b]._area=="right"&&this._AutoSizeRcol==false){break;}}if(_o=_h._setColSize(_b,_c,_g)){if(_e){if(this.enableredraw){this._updateColSize(_b);}else{if(!this._enable_redraw_history.updatecolsize){this._enable_redraw_history.updatecolsize=[];}this._enable_redraw_history.updatecolsize.push(_b);}}}break;}}return _o;};_pGrid._getLastRowBand=function(){var _a=this._curFormat;var _b="body";if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_a._headrows&&_a._headrows.length){_b="head";}if(_a._summrows&&_a._summrows.length){_b="summ";}if(_a._bodyrows&&_a._bodyrows.length){_b="body";}}else{if(_a._headrows&&_a._headrows.length){_b="head";}if(_a._bodyrows&&_a._bodyrows.length){_b="body";}if(_a._summrows&&_a._summrows.length){_b="summ";}}return _b;};_pGrid._getDispRowCnt=function(){if(this._bodyBand){return this._bodyBand._get_rows().length;}return 0;};_pGrid._getScreenBottomRowPos=function(_a,_b){if(!this._is_use_suppress&&!this._is_performance_scroll&&!_b){return  -2;}var _c=this._bodyBand;var _d=(_a!=null)?_a:this._getScrollTop();var _e= -1;var _f=0;var _g=this._getGridRowCount();var _h=this._getAvailableRect(_c).height;for(var _i=0;_i<_g;_i++ ){if(_i<=this._fixed_endrow){continue;}_f+=this._getRowSize(_i);if(_f>=_d+_h){_e=_i;break;}}return _e;};_pGrid._getScreenBottomRowPosEx=function(_a){if(!this._is_use_suppress&&!this._is_performance_scroll){return  -1;}var _b=this._bodyBand;var _c=(_a!=null)?_a:this._getScrollTop();var _d= -1,_e=0;var _f=0;var _g=this._getGridRowCount();var _h=this._getAvailableRect(_b).height;for(var _i=0;_i<_g;_i++ ){if(_i<=this._fixed_endrow){continue;}_f+=this._getRowSize(_i);if(_f<=_c+_h){_d=_i;}else{_e++ ;}}return [_d,_e];};_pGrid._getScreenTopRowPos=function(_a){var _b=this._bodyBand;var _c=(_a!=null)?_a:this._getScrollTop();var _d=0;var _e=0;var _f=this._getGridRowCount();var _g=0;var _h=false;for(var _i=0;_i<_f;_i++ ){if(_i<=this._fixed_endrow){continue;}if(_e>_c){_d=_i-1;_g=_e-_c;_h=true;break;}_e+=this._getRowSize(_i);}if(!_h){if(_b._getClientHeight()<_e){if(_e>_c){_d=_i-1;_g=_e-_c;}}else{_d=this._getFixRowCnt();}}return [_d,_g];};_pGrid._isRemainAreaScroll=function(){var _a=this._bodyBand;var _b=_a._get_rows();if(_b.length==0){return false;}var _c=this._getScrollTop();var _d=0;var _e=_b.length;var _f=_b[_e-1];var _g=this._getGridRowCount()-1;if(_f._rowidx!=_g){return false;}var _h=this._getBodyClientSize()[1];var _i=0;for(var _j=_b.length-1;_j>=0;_j-- ){_i=_b[_j]._rowidx;_d+=this._getRowSize(_i);if(_d>=_h){break;}}_c-=_b[0]._adjust_top;for(_j=0;_j<_e;_j++ ){if(_d==_c){return false;}else if(_d>_c){return (_i==_b[_j]._rowidx-1);}_d+=this._getRowSize(_b[_j]._rowidx);}return false;};_pGrid._getScollMaxLeft=function(){if(this._control_element){return this._control_element.hscroll_limit;}return 0;};_pGrid._getScrollLeft=function(){if(this._control_element){return this._control_element.scroll_left;}return 0;};_pGrid._getScrollTop=function(){if(this._control_element){return this._control_element.scroll_top;}return 0;};_pGrid._getDataRow=function(_a){if(_a>=this._rowcount){return  -9;}if(this._hasTree&&_a>=0){_a=this._treeIndexes[_a];if(_a==undefined){_a= -9;}}return _a;};_pGrid._getGridRow=function(_a){if(this._hasTree&&_a>=0){var _b=this._treeKeys;var _c=_b.indexOf(_a);if(_c!=undefined){return _c;}return  -9;}return _a;};_pGrid._refreshCol=function(_a,_b,_c){if(!this.enableredraw){this._enable_redraw_history.refreshall=true;return;}if(this._after_recreate){return;}if(!this.getElement()){return;}var _d=this._headBand;var _e;var _f;var _g,_h,_i;var _j;if(_d&&(!_c||_c=="head")){_e=_d._get_rows()[0];_f=_e.length;for(_g=0;_g<_f;_g++ ){_j=_e[_g];if(_j&&_j._refinfo._col==_a){_j._updateAll();}}}_d=this._summBand;if(_d&&(!_c||(_c=="summ"||_c=="summary"))){_e=_d._get_rows()[0];_f=_e.length;for(_g=0;_g<_f;_g++ ){_j=_e[_g];if(_j&&_j._refinfo._col==_a){_j._updateAll();}}}_d=this._bodyBand;var _k=_d._get_rows();if(_d&&_k.length&&(!_c||_c=="body")){_e=_k[0]._cells;_f=_e.length;for(_g=0;_g<_f;_g++ ){_j=_e[_g];if(_j&&_j._refinfo._col==_a){for(_h=0,_i=this._getDispRowCnt();_h<_i;_h++ ){this._refreshCell("body",_j._cellidx,_h);}}}}};_pGrid._refreshCell=function(_a,_b,_c,_d,_e,_f){if(!this.enableredraw){this._enable_redraw_history.refreshall=true;return;}if(this._after_recreate){return;}var _g,_h,_i,_j;_a=_a.toLowerCase();if(_a=="head"){_h=this._headBand;if(_h){_g=_h._get_rows()[0]._cells[_b];if(_g){if(_e>=0){_i=_g._refinfo._subcells[_e];if(_d&&_i&&_g.subcells[_e]["set_"+_d]){_g.subcells[_e]["set_"+_d](_i._getAttrValue(_i[_d],this._currentDSrow));}}else{_j=_g._refinfo;if(_d&&_g["set_"+_d]){_g["set_"+_d](_j._getAttrValue(_j[_d],this._currentDSrow));}}_g._updateAll();}}}else if(_a=="summ"||_a=="summary"){_h=this._summBand;if(_h){_g=_h._get_rows()[0]._cells[_b];if(_g){if(_e>=0){_i=_g._refinfo._subcells[_e];if(_d&&_i&&_g.subcells[_e]["set_"+_d]){_g.subcells[_e]["set_"+_d](_i._getAttrValue(_i[_d],this._currentDSrow));}}else{_j=_g._refinfo;if(_d&&_g["set_"+_d]){_g["set_"+_d](_j._getAttrValue(_j[_d],this._currentDSrow));}}_g._updateAll();}}}else{if(_c>=0){this._refreshBodyCell(_b,_c,_f,_d,_e);}else{for(var _k=0,_l=this._getDispRowCnt();_k<_l;_k++ ){this._refreshBodyCell(_b,_k,_f,_d,_e);}}}};_pGrid._isEnable=function(){this._enable=nexacro.Component.prototype._isEnable.call(this);return this._enable;};_pGrid._getMaxColDataSizeBand=function(_a,_b){var _c= -1;var _d=this._curFormat;var _e;var _f;var _g;var _h;var _i;var _j,_k,_l,_m;var _n,_o,_p;var _q,_r,_s;var _t;if(this._bodyAutoSize){_t= -1;if(this._binddataset){var _u=this._getGridRowCount();if(_u>0&&_d._bodycells){if(!this._preloadTreeImage()){return  -1;}if(!this._preloadImage()){return  -1;}_e=_d._bodycells;_f=_e.length;_g=[];_i={max: -1,len: -1};for(_q=0;_q<_f;_q++ ){_n=_e[_q];if(_n._col<=_a&&(_n._col+_n._colspan)>_a){if(_n!=_o){_g.push(_n);}_o=_n;if(_n._subcells.length){_p=_n._subcells;for(_r=0,_s=_p.length;_r<_s;_r++ ){if(_n._col+_p[_r]._col<=_a&&(_n._col+_p[_r]._col+_p._colspan)>_a){_n=_p[_r];break;}}}if(_i){if(_n._curfont===undefined){this._getCellStyleInfo(_n._cellidx,"font",0,false,undefined,true);}if(_n._curselfont===undefined){this._getCellStyleInfo(_n._cellidx,"font",0,true,undefined,true);}if(_n._curborder===undefined){this._getCellStyleInfo(_n._cellidx,"border",0,false,undefined,true);}if(_n._curpadding===undefined){this._getCellStyleInfo(_n._cellidx,"padding",0,undefined,undefined,true);}if(_n._curfont==="bindexpr"||_n._curselfont==="bindexpr"||_n._curborder==="bindexpr"||_n._curpadding==="bindexpr"){_i=null;continue;}else if(_j!==undefined){if((_j!=_n._curfont)||(_k!=_n._curselfont)||(_l!=_n._curborder)||(_m!=_n._curpadding)){_i=null;continue;}}_j=_n._curfont;_k=_n._curselfont;_l=_n._curborder;_m=_n._curpadding;}}}for(_r=0;_r<_u;_r++ ){var _v=this._getDataRow(_r);if(_b>=0&&_r<_b){_t=_d._cols[_a].size;continue;}_h=this._getMaxColSize(_g,_a,_v,null,_i);if(_h<0){return  -1;}_t=Math.max(_t,_h);}}}_c=Math.max(_c,_t);}if(this._headAutoSize&&_d._headcells){_e=_d._headcells;_f=_e.length;_g=[];for(_q=0;_q<_f;_q++ ){_n=_e[_q];if(_n._col<=_a&&(_n._col+_n._colspan)>_a){_g.push(_n);}}_t=this._getMaxColSize(_g,_a, -1);_c=Math.max(_c,_t);}if(this._summAutoSize&&_d._summcells){_e=_d._summcells;_f=_e.length;_g=[];for(_q=0;_q<_f;_q++ ){_n=_e[_q];if(_n._col<=_a&&(_n._col+_n._colspan)>_a){_g.push(_n);}}_t=this._getMaxColSize(_g,_a, -2);_c=Math.max(_c,_t);}return _c;};_pGrid._on_treeloadImagetemp=function(_a,_b,_c){};_pGrid._img_preload_cnt=0;_pGrid._hasTree=false;_pGrid._treeIndexes=null;_pGrid._treeKeys=null;_pGrid._treeStates=null;_pGrid._treeChecked=null;_pGrid._treeCellinfo=null;_pGrid._hasSameNextNode=null;_pGrid._maxdepth=0;_pGrid._rootlevel=99;_pGrid._treeInitStatus={"collapse,null":0,"expand,null":1,"collapse,all":2,"expand,all":3};_pGrid._currentCellEditor=null;_pGrid._currentCellCell= -1;_pGrid._currentCellRow= -1;_pGrid._showEditing=false;_pGrid._beforeEditRowIdx= -1;_pGrid._beforeEditCellIdx= -1;_pGrid._onceTime_focus=false;_pGrid._set_focus_dir= -1;_pGrid._showEditorFocus=false;_pGrid._on_treeloadImage=function(_a,_b,_c){var _d=this._tree_load_all;_d[_a]=true;var _e,_f=true;this._img_preload_cnt-- ;for(_e in _d){if(_d.hasOwnProperty(_e)){if(_d[_e].isload==false){_f=false;break;}}}if(_f){if(this._is_created&&this._img_preload_cnt==0){this._recreate_contents_all(true);}}else{if(this._is_created){if(this._resetColSizeList()){this._bodyBand._matrix._adjustColsDisplay(true);}}}};_pGrid._on_sizeloading=function(_a,_b,_c){var _d=this._image_load_all;_d[_a]=true;var _e,_f=true;this._img_preload_cnt-- ;for(_e in _d){if(_d.hasOwnProperty(_e)){if(_d[_e].isload==false){_f=false;break;}}}if(_f){if(this._is_created&&this._img_preload_cnt==0){this._recreate_contents_all(true);}}else{if(this._is_created){if(this._resetColSizeList()){this._bodyBand._matrix._adjustColsDisplay(true);}}}};_pGrid._preloadTreeImage=function(){if(this._tree_load_all!=null){return true;}if(!this._binddataset){return true;}var _a=this._binddataset.getRowCount();var _b=this._curFormat._bodycells;var _c,_d,_e,_f;var _g;var _h;this._tree_load_all={};for(var _l=0;_l<_a;_l++ ){for(var _m=0,_n=_b.length;_m<_n;_m++ ){_e=_b[_m];_d=_e._getDisplaytype(_l);if(_d!="treeitemcontrol"){continue;}_c=this._treeStates[_l];if(_c==0){_f="treecollapseimage";}else if(_c==1){_f="treeexpandimage";}else if(_c==2){_f="treeitemimage";}_g=_e._query_status_treecontrol(_l,_f);if(_g){_h=_g;if(_g.substring(0,4).toLowerCase()=="url("){_g=_g.substring(5,_g.length-2);}_g=nexacro._getImageLocation(_g,this._getRefFormBaseUrl());this._tree_load_all[_g]={"isload":false,"orgsrc":_h};}_f="";if(_c==0){_f+="treeopenbuttonimage";}else if(_c==1){_f+="treeclosebuttonimage";}if(_f){_g=_e._query_status_treecontrol(_l,_f);if(_g){_h=_g;if(_g.substring(0,4).toLowerCase()=="url("){_g=_g.substring(5,_g.length-2);}_g=nexacro._getImageLocation(_g,this._getRefFormBaseUrl());this._tree_load_all[_g]={"isload":false,"orgsrc":_h};}}}}var _i,_j=true,_k;for(_i in this._tree_load_all){if(this._tree_load_all.hasOwnProperty(_i)){_k=nexacro._getImageSize(_i,this._on_treeloadImage,this,this._getRefFormBaseUrl(),this._tree_load_all[_i].orgsrc);if(!_k){_j=false;this._img_preload_cnt++ ;}else{this._tree_load_all[_i].isload=true;}}}return _j;};_pGrid._preloadImage=function(){if(this._image_load_all!=null){return true;}if(!this._binddataset){return true;}var _a=this._binddataset.getRowCount();var _b=this._curFormat._bodycells;var _c,_d;if(!_b){return true;}this._image_load_all={};for(var _l=0;_l<_a;_l++ ){for(var _m=0,_n=_b.length;_m<_n;_m++ ){_d=_b[_m];_c=_d._getDisplaytype(_l);var _e;var _f;if(_c=="imagecontrol"){_e=_d._getDisplayText_text(_l);}else if(_c=="checkboxcontrol"){_e=this._getCellStyleInfo(_m,"checkboxicon",_l);}if(_e){_f=_e;if(_e.substring(0,4).toLowerCase()=="url("){_e=_e.substring(5,_e.length-2);}_e=nexacro._getImageLocation(_e,this._getRefFormBaseUrl());this._image_load_all[_e]={"isload":false,"orgsrc":_f};}var _g=_d._subcells;var _h;for(var _o=0,_p=_g.length;_o<_p;_o++ ){_h=_g[_o];_c=_h._getDisplaytype(_l);if(_c=="imagecontrol"){_e=_h._getDisplayText_text(_l);}else if(_c=="checkboxcontrol"){_e=this._getCellStyleInfo(_o,"checkboxicon",_l,_d);}if(_e){_f=_e;if(_e.substring(0,4).toLowerCase()=="url("){_e=_e.substring(5,_e.length-2);}_e=nexacro._getImageLocation(_e,this._getRefFormBaseUrl());this._image_load_all[_e]={"isload":false,"orgsrc":_f};}}}}var _i,_j=true,_k;for(_i in this._image_load_all){if(this._image_load_all.hasOwnProperty(_i)){_k=nexacro._getImageSize(_i,this._on_sizeloading,this,this._getRefFormBaseUrl(),this._image_load_all[_i].orgsrc);if(_k){this._image_load_all[_i].isload=true;}else{_j=false;this._img_preload_cnt++ ;}}}return _j;};_pGrid._getDepthWidth=function(_a,_b){var _c=_b._getDisplaytype(_a);if(_c!="treeitemcontrol"){return 0;}var _d=_b._getTreeStartLevel(_a);var _e=_b._getTreeLevel(_a);var _f=this._treeStates[_a];var _g=22;var _h=9;var _i=14;var _j=14;var _k;var _l;if(_f==0){_l="treecollapseimage";}else if(_f==1){_l="treeexpandimage";}else if(_f==2){_l="treeitemimage";}var _m=_b._query_status_treecontrol(_a,_l);var _n;var _o=undefined;if(_m){_o=_m;if(_m.substring(0,4).toLowerCase()=="url("){_m=_m.substring(5,_m.length-2);}_m=nexacro._getImageLocation(_m,this._getRefFormBaseUrl());_n=nexacro._getImageSize(_m,this._on_treeloadImagetemp,this,this._getRefFormBaseUrl(),_o);if(_n){_i=_n.width;}}_l="";if(_f==0){_l+="treeopenbuttonimage";}else if(_f==1){_l+="treeclosebuttonimage";}if(_l){_m=_b._query_status_treecontrol(_a,_l);if(_m){_o=_m;if(_m.substring(0,4).toLowerCase()=="url("){_m=_m.substring(5,_m.length-2);}_m=nexacro._getImageLocation(_m,this._getRefFormBaseUrl());_n=nexacro._getImageSize(_m,this._on_treeloadImagetemp,this,this._getRefFormBaseUrl(),_o);if(_n){_j=_n.width;}}}_e-=_d;if(_e<0){_e= -1;}var _p=(_e* _g)+_h;var _q=0;var _r=((_f==0||_f==1)&&this.treeusebutton=="use");var _s=_p-(_j/2);if(_s<0){_s=_p-(_h/2);}if(!this.treeuseline){_s-=((_j/2)* _e);}if(_r){_q=_j;_p=_s+_j;}else{if(!this.treeuseline){_p=_s+_j;}}if(this.treeuseline){_p+=(_j-(_q/2));}else{_p+=1;}if(this.treeusecheckbox==true){_k=_b._getCheckboxsize(_a);if(_k==undefined){_k=this._getCellStyleInfo(_b._cellidx,"treecheckboxsize",_a,false);_k=_k[0];}_p+=_k;}if(this.treeuseimage==true){_p+=_i;_p+=6;}else{_p+=4;}return _p;};_pGrid._isPassPrevCell=function(_a,_b,_c,_d){var _e=_a.endsubrow.length;var _f=_a.begsubrow;var _g=_a.endsubrow;var _h=_a.begcol;var _i=_a.endcol;var _j=_b.length;var _k,_l,_m;if(_c=="next"||_c=="prev"){for(_k=0;_k<_e;_k++ ){for(_l=0;_l<_j;_l++ ){if(_f[_k]<=_b[_l]._row&&_g[_k]>=_b[_l]._row){if(_b[_l]._colspan>1){if(_c=="next"&&_b[_l]._col<_d&&_d<_b[_l]._col+_b[_l]._colspan){return true;}else if(_c=="prev"&&_b[_l]._col<=_d&&_d<_b[_l]._col+_b[_l]._colspan-1){return true;}}}}}}else{for(_k=0,_m=_b.length;_k<_m;_k++ ){if(_h<=_b[_k]._col&&_i>=_b[_k]._col){if(_b[_k]._rowspan>1){if(_c=="down"&&_b[_k]._row<_d&&_d<_b[_k]._row+_b[_k]._rowspan){return true;}else if(_c=="up"&&_b[_k]._row<=_d&&_d<_b[_k]._row+_b[_k]._rowspan-1){return true;}}}}}return false;};_pGrid._getAreaMoveCell=function(_a,_b,_c){var _d=this._selectinfo;if(_d.area.length==0){return true;}var _e=_d.area[_d.area.length-1];var _f=this._curFormat._bodycells;if(_a=="next"){if(_d.ctrlpoint.col<_b){if(_e.endcol>=_b){return false;}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="prev"){if(_d.ctrlpoint.col>_b){if(_e.begcol<=_b){return false;}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="down"){if(_d.ctrlpoint.row<_c||(_d.ctrlpoint.row==_c&&_d.ctrlpoint.subrow<_b)){if(_e.endsubrow.length==(_c-_d.ctrlpoint.row+1)){if(_e.endsubrow[_e.endsubrow.length-1]>=_b){return false;}}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="up"){if(_d.ctrlpoint.row>_c||(_d.ctrlpoint.row==_c&&_d.ctrlpoint.subrow>_b)){if(_e.begsubrow.length==(_d.ctrlpoint.row-_c+1)){if(_e.begsubrow[0]<=_b){return false;}}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}return true;};_pGrid._moveToCell=function(_a,_b,_c,_d,_e,_f){if(!this._curFormat||!this._curFormat._bodycells){return false;}var _g=false;var _h,_i,_j,_k,_l;var _m,_n,_o,_p;var _q= -9;_h=this._beforebodycellpos=this._selectinfo.curcell;_i=this._beforebodycolpos=this._selectinfo.curcol;_j=this._beforebodyrowpos=this._selectinfo.curdsrow;_k=this._beforebodysubrowpos=this._selectinfo.cursubrow;if(this._tempmergeeditor){while(true){if(this.__moveToCell(_a,_b,_c,_d,_e,_f)){_g=true;_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;var _r=this._getCurrentBodyCell(_o,_m);if(_r._virtualmerge){continue;}}break;}}else{_g=this.__moveToCell(_a,_b,_c,_d,_e,_f);_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;}if(!_g){return false;}var _s;this._iskey_movetocell=false;if(this._keydown_elem){this._iskey_movetocell=true;_s="keydown";}this._hideEditor(undefined,undefined,this._need_confirm_control_value);var _t=this._ChangeSelect(_m,_n,_o,_p,_q,false,_h,_i,_j,_k,_l,"body",_s);if(!this._keydown_elem){nexacro._OnceCallbackTimer.callonce(this,function(){this._moveCellAfterFocus();});}else{if(_t==false){if(this.autoenter=="select"){nexacro._OnceCallbackTimer.callonce(this,function(){this._showEditor();});}}}return true;};_pGrid.__moveToCell=function(_a,_b,_c,_d,_e,_f){if(this._selectinfo.curdsrow<0&&!_b){if(this.rowcount>0&&(_a=="next"||_a=="down")){return this._moveToPosCell(0,0);}return false;}var _g=this._curFormat;var _h,_i,_j,_k,_l;var _m,_n,_o,_p;var _q= -9;var _r;var _s=_g._bodycells;var _t=_s.length;var _u;var _v;var _w;var _x;var _y,_z,_aa;var _ab;var _ac;var _ad;var _ae;var _af;if(_a=="next"){if(_b){_r=this._getLastEditableCell();if(_r.row==null||(_r.row<=this._selectinfo.curdsrow&&_r.cell==this._selectinfo.curcell)){this._hideEditor();if(this._setdataobj&&this._setdataobj.succ==false){_h=this._beforebodycellpos=this._selectinfo.curcell;_i=this._beforebodycolpos=this._selectinfo.curcol;_j=this._beforebodyrowpos=this._selectinfo.curdsrow;_k=this._beforebodysubrowpos=this._selectinfo.cursubrow;this._setSelectedInfo(_h,_i,_j,_k,_l);this._iskey_movetocell=true;this._setdataobj=null;if(this.autoenter=="select"){this._showEditor();}return true;}return false;}}while(true){_x=this.rowcount;if(this._selectinfo.currow>=(_x-1)&&this._selectinfo.curcell>=(_g._bodycells.length-1)){return false;}if(this._selectinfo.curcell>=_s.length-1){if(_c){return false;}while(true){_m=0;_n=0;_o=this._selectinfo.curdsrow+1;_p=0;this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}break;}}else{if(_c){_m=this._selectinfo.curcell;_n=_s[this._selectinfo.curcell]._col+_s[this._selectinfo.curcell]._colspan;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;for(_u=0;_u<_t;_u++ ){if(_s[_u]._col==_n&&(_s[_u]._row<=this._selectinfo.cursubrow&&this._selectinfo.cursubrow<(_s[_u]._row+_s[_u]._rowspan))){if(!_d||_d==_s[_u]._area){_m=_u;_p=_s[_u]._row;break;}}}if(_m==this._selectinfo.curcell){return false;}}else{_m=this._selectinfo.curcell+1;_n=_s[_m]._col;_o=this._selectinfo.curdsrow;_p=_s[_m]._row;}if(_e!=undefined&&_e<_n){return false;}this._setSelectedInfo(_m,_n,_o,_p,_q);if(_g._cols[_n].size<=0){continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_n,_o)){continue;}}}if(_b){if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}_ad=_s[_m];_ae=_ad._getEdittype(_o);if(_ae==""||_ae=="none"){continue;}}if(_f&&_o>=0){_af=this._getCurrentBodyCell(_o,_m);if(_af){_af._showfull(_af);}}break;}}else if(_a=="prev"){while(true){if(this._selectinfo.curcell<=0){if(_c||this._selectinfo.currow<=0){this._hideEditor();if(this._setdataobj&&this._setdataobj.succ==false){_h=this._beforebodycellpos=this._selectinfo.curcell;_i=this._beforebodycolpos=this._selectinfo.curcol;_j=this._beforebodyrowpos=this._selectinfo.curdsrow;_k=this._beforebodysubrowpos=this._selectinfo.cursubrow;this._setSelectedInfo(_h,_i,_j,_k,_l);this._iskey_movetocell=true;this._setdataobj=null;if(this.autoenter=="select"){this._showEditor();}return true;}return false;}while(true){_m=_g._bodycells.length-1;_n=_s[_m]._col;_o=this._selectinfo.curdsrow-1;_p=_s[_m]._row;this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}break;}}else{var _ag;if(_c){_m=this._selectinfo.curcell;_ag=_n=this._selectinfo.curcol-1;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;for(_u=0;_u<_t;_u++ ){if((_s[_u]._col<=_n&&_n<_s[_u]._col+_s[_u]._colspan)&&(_s[_u]._row<=this._selectinfo.cursubrow&&this._selectinfo.cursubrow<(_s[_u]._row+_s[_u]._rowspan))){if(!_d||_d==_s[_u]._area){_n=_s[_u]._col;_m=_u;_p=_s[_u]._row;break;}}}if(_m==this._selectinfo.curcell){return false;}}else{_m=this._selectinfo.curcell-1;_ag=_n=_s[_m]._col;_o=this._selectinfo.curdsrow;_p=_s[_m]._row;}if(_e!=undefined&&_e>_n){return false;}this._setSelectedInfo(_m,_n,_o,_p,_q);if(_g._cols[_n].size<=0){continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_ag,_o)){continue;}}}if(_b){if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}_ad=_s[_m];_ae=_ad._getEdittype(_o);if(_ae==""||_ae=="none"){continue;}}if(_f&&_o>=0){_af=this._getCurrentBodyCell(_o,_m);if(_af){_af._showfull(_af);}}break;}}else if(_a=="up"){_y= -1;_z= -1;_aa= -1;while(true){if(this._isSelectRowType()){if(this._selectinfo.curdsrow==0){return false;}_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow-1;_p=this._selectinfo.cursubrow;}else{if(this._selectinfo.curdsrow==0&&this._selectinfo.cursubrow==0){return false;}if(this._fixed_startrow>=this._selectinfo.curdsrow){return false;}if(this._selectinfo.cursubrow==0){for(_u=_t-1;_u>=0;_u-- ){if(_s[_u]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_u]._col+_s[_u]._colspan)){_y=_s[_u]._cellidx;_z=_s[_u]._col;_aa=_s[_u]._row;_ac=_aa+_s[_u]._rowspan-1;break;}}_n=_z;_m=_y;_o=this._selectinfo.curdsrow-1;_p=_aa;}else{for(_u=this._selectinfo.curcell-1;_u>=0;_u-- ){if(_s[_u]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_u]._col+_s[_u]._colspan)&&_s[_u]._row<=(this._selectinfo.cursubrow-1)&&(this._selectinfo.cursubrow-1)<(_s[_u]._row+_s[_u]._rowspan)){_y=_s[_u]._cellidx;_z=_s[_u]._col;_aa=_s[_u]._row;_ac=_aa+_s[_u]._rowspan-1;break;}}_n=_z;_m=_y;_o=this._selectinfo.curdsrow;_p=_aa;}}this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_ac,_o)){continue;}}break;}}else if(_a=="down"){_x=this._getGridRowCount();var _ah=this._dsRowToDispRow(this._selectinfo.curdsrow);var _ai=_g._bodyrows.length-1;var _aj= -1,_ak= -1,_al= -1;while(true){if(this._isSelectRowType()){if(_x-1<=_ah){return false;}_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow+1;_p=this._selectinfo.cursubrow;}else{_ab=_s[this._selectinfo.curcell]._rowspan;if(_x-1<=_ah&&(this._selectinfo.cursubrow+_ab)-1==_ai){if(this._vscrollmng){this._vscrollmng.setPos(this._vscrollmng.max);}return false;}if((this._selectinfo.cursubrow+_ab-1)==_ai){for(_u=0;_u<_t;_u++ ){if(_s[_u]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_u]._col+_s[_u]._colspan)){_aj=_s[_u]._cellidx;_ak=_s[_u]._col;_al=_s[_u]._row;break;}}_n=_ak;_m=_aj;_o=this._selectinfo.curdsrow+1;_p=_al;}else{for(_u=this._selectinfo.curcell+1;_u<_t;_u++ ){if(_s[_u]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_u]._col+_s[_u]._colspan)&&(_s[_u]._row==this._selectinfo.cursubrow+(_ab-1)+1)){_aj=_s[_u]._cellidx;_ak=_s[_u]._col;_al=_s[_u]._row;break;}}_n=_ak;_m=_aj;_o=this._selectinfo.curdsrow;_p=_al;}}this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){_v=this._treeKeys;_w=_v.indexOf(_o);if(_w!=undefined){break;}continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_p,_o)){continue;}}break;}}return true;};_pGrid._moveCellAfterFocus=function(){var _a=true;if(this.autoenter=="select"){if(nexacro._Browser=="IE"||nexacro._Browser=="Opera"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){this._onceTime_focus=true;}if(this._currentBand=="body"&&!this._showEditor()){if(this._is_data_enter_apply){this._is_data_enter_apply=false;this._hideEditor();}else{this._showEditor();}_a=false;}this._onceTime_focus=false;}return _a;};_pGrid._setTree=function(_a,_b){_a=nexacro._toBoolean(_a);if(this._hasTree!=_a){this._hasTree=_a;if(_a==true){this._setFixedRow( -1,true);this._initTreeStates();}else{this._clearTreeStates();}if(!_b){this._recreate_contents_all(false,false,true);}}};_pGrid._setTreeCellinfo=function(_a,_b){if(this._treeCellinfo!=_a){this._treeCellinfo=_a;this._setTree(true,_b);}};_pGrid._removeTreeCellinfo=function(_a,_b){if(this._treeCellinfo==_a){this._treeCellinfo=null;this._setTree(false,_b);}};_pGrid._initTreeStates=function(_a,_b){if(this._hasTree&&this._binddataset){this._treeIndexes=this._createTreeIndexes();this._treeStates=this._createTreeStates(_a,undefined,_b);this._treeChecked=this._createTreeChecked();this._createTreeHasChild();this._applyTreeStates();this._createTreeKeys();if(this._treeIndexes.length>0){this.rowcount=this._treeIndexes.length;}else{this.rowcount=0;}}};_pGrid._createTreeHasChild=function(){var _a=this._rowcount;var _b=this._treeCellinfo;if(this._hasSameNextNode){delete this._hasSameNextNode;}this._hasSameNextNode=new Array(_a);for(var _f=_a-1;_f>=0;_f-- ){var _c=_b._getTreeLevel(_f);this._maxdepth=Math.max(_c,this._maxdepth);this._rootlevel=Math.min(_c,this._rootlevel);if(this._hasSameNextNode[_f]==undefined){var _d=[];_d[0]=_c;_d[1]=false;this._hasSameNextNode[_f]=_d;for(var _g=_f-1;_g>=0;_g-- ){var _e=_b._getTreeLevel(_g);if(_c==_e){_d=[];_d[0]=_c;_d[1]=true;this._hasSameNextNode[_g]=_d;}else if(_c>_e){break;}}}}this._rootlevel=Math.max(_b._getTreeStartLevel(0),this._rootlevel);};_pGrid._createTreeKeys=function(){if(this._binddataset==null){return;}var _a=this._binddataset.rowcount;var _b;if(this._treeKeys){this._treeKeys.clear();_b=this._treeKeys;}else{_b=this._treeKeys=new nexacro.Collection();}for(var _c=0;_c<_a;_c++ ){_b.setItem(this._treeIndexes[_c],_c);}};_pGrid._createTreeIndexes=function(){if(this._binddataset==null){return [];}var _a=this._binddataset.rowcount;var _b=new Array(_a);for(var _c=0;_c<_a;_c++ ){_b[_c]=_c;}return _b;};_pGrid._getTreeDefaultStatus=function(){var _a=this._treeInitStatus[this.treeinitstatus];if(_a==null){_a=0;}var _b;if(_a==0||_a==1){_b=(_a==0)?0:1;}else if(_a==2||_a==3){_b=(_a==2)?0:1;}return _b;};_pGrid._createTreeStates=function(_a,_b,_c){if(this._binddataset==null){return [];}var _d=this._binddataset;var _e=_d.rowcount;var _f=new Array(_e);var _g=this._treeCellinfo;var _h=this._treeInitStatus[this.treeinitstatus];var _i=null;var _j;var _k;var _l;if(_h==null){_h=0;}var _m=this._treeStates;var _n;var _o;if(_a&&_m.length==_e){for(_n=0;_n<_e;_n++ ){if(_g.treestate._bindtype==0){_f[_n]=_m[_n];}}}if(_h==0||_h==1){_o=(_h==0)?0:1;_k= -1;for(_n=0;_n<_e;_n++ ){if(!_b){_i=_g._getTreeState(_n);}if(_f[_n]==undefined||(_c&&_f[_n]==2)){if(nexacro._isNull(_i)||_i===""){_f[_n]=_o;}else if(nexacro._isString(_i)){_f[_n]=Number(_i);}else{_f[_n]=_i;}}_j=_g._getTreeLevel(_n);if(nexacro._isNull(_l)||_l===""||_g.treestate._bindtype==0){if(_k>=_j){_f[_n-1]=2;}else if(_f[_n-1]>=2){_f[_n-1]=_o;}}_k=_j;_l=_i;}if(_g.treestate._bindtype==0||nexacro._isNull(_i)){_f[_e-1]=2;}}else if(_h==2||_h==3){_o=(_h==2)?0:1;_k= -1;for(_n=0;_n<_e;_n++ ){if(_f[_n]==undefined||(_c&&_f[_n]==2)){_f[_n]=_o;}_j=_g._getTreeLevel(_n);if(_k>=_j){_f[_n-1]=2;}_k=_j;}if(_e>0){_f[_e-1]=2;}}if(this._org_treeStates.length==0){this._org_treeStates=this._org_treeStates.concat(_f);}return _f;};_pGrid._createTreeChecked=function(){if(this._binddataset==null){return [];}var _a=this._binddataset.rowcount;var _b=new Array(_a);var _c=this._treeCellinfo;var _d=null;for(var _e=0;_e<_a;_e++ ){_d=_c._getTreeCheck(_e);if(_d&&(_d>0||_d.length)){_b[_e]=parseInt(_d,10);}else{_b[_e]=0;}}return _b;};_pGrid._updateTreeStates=function(_a,_b){if(this._hasTree&&this._binddataset){if(_a>=0){var _c=this._treeStates;if(_b){_c.splice(_a,0,2);}else{_c.splice(_a,1);var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_a);var _f=_d._getTreeLevel(_a-1);if(_e==_f){_c[_a-1]=2;}}this._treeStates=_c;}this._treeIndexes=this._createTreeIndexes();this._treeChecked=this._createTreeChecked();this._createTreeHasChild();this._applyTreeStates();this._createTreeKeys();if(this._treeIndexes.length>0){this.rowcount=this._treeIndexes.length;}else{this.rowcount=0;}}};_pGrid._applyTreeStates=function(){var _a=this._treeIndexes;var _b=this._treeStates;var _c=_a.length;var _d=this._treeCellinfo;var _e=_a.slice(0,_a.length);var _f= -1;var _g= -1;var _h=0;for(var _i=0;_i<_c;_i++ ){_h++ ;if(_b[_i]==0){_f=_d._getTreeLevel(_e[_i]);for(var _j=_i+1;_j<_c;_j++ ){_g=_d._getTreeLevel(_e[_j]);if(_g>_f){_i++ ;_a.splice(_h,1);}else{break;}}}}};_pGrid._clearTreeStates=function(){this._treeIndexes=null;this._treeStates=null;this._treeChecked=null;if(this._hasTree){this.rowcount=0;}if(this._treeKeys){this._treeKeys.destroy();this._treeKeys=null;}};_pGrid._getTreeRowPosition=function(_a){if(_a<0||!this._hasTree){return _a;}var _b=this._treeIndexes;var _c=_b.length-1;for(var _d=_c;_d>=0;_d-- ){if(_b[_d]==_a){return _d;}else if(_b[_d]<_a){break;}}return  -1;};_pGrid._getBindTextCellInfo=function(_a){var _b=this._curFormat;var _c=true;if(!_b){return null;}var _d=[];var _e;var _f;if(_a){if(_b._headcells){var _g=_b._headcells;var _h=_g.length;for(_f=0;_f<_h;_f++ ){_e=_g[_f];if(_e.text._bindexpr==_a){_d.push(_e);}}}if(_b._bodycells){var _i=_b._bodycells;var _j=_i.length;for(_f=0;_f<_j;_f++ ){_e=_i[_f];if(_e.text._bindexpr==_a){_d.push(_e);}}}if(_b._summcells){var _k=_b._summcells;var _l=_k.length;for(_f=0;_f<_l;_f++ ){_e=_k[_f];if(_e.text._bindexpr==_a){_d.push(_e);}}}}if(_d.length==0&&_b._bodycells){_d=_b._bodycells;_c=false;}return [_d,_c];};_pGrid._isTreeStateChanged=function(_a,_b){var _c=false;if(this._hasTree){var _d=this._getTreeRowPosition(_a.row);var _e=_a.columnid;var _f=this._treeCellinfo;if(_e==_f.treecheck._bindexpr){this._setTreeChecked(_d,_a.newvalue);}if(_b==false){if(_e==_f.treestate._bindexpr){this._setTreeState(_d,_a.newvalue);_c=true;}var _g=this._getTreeDefaultStatus();var _h=this._treeInitStatus[this.treeinitstatus];if(_e==_f.treelevel._bindexpr){var _i,_j,_k;var _l=this._treeStates;var _m=_f._getTreeLevel(_a.row);var _n=false;if(_h==0||_h==1){if(_f.treestate._bindtype!=0){_n=true;}}for(var _o=_a.row-1;_o>=0;_o-- ){_i=_f._getTreeLevel(_o);_j=_f._getTreeState(_o);if(_i<_m){if(_l[_o]>=2){_l[_o]=_g;}break;}else if(_i>_m){_k=true;}else{if(!_k){if(((nexacro._isNull(_j)||_j==="")&&_n)||!_n){_l[_o]=2;}}break;}}if(_l[_a.row]>=2){if(this._rowcount>0&&_a.row<this._rowcount-1){_i=_f._getTreeLevel(_a.row+1);if(_i>_m){_l[_a.row]=_g;}}}_c=true;}}}return _c;};_pGrid._setTreeState=function(_a,_b,_c,_d){_b=parseInt(_b,10);if(isFinite(_b)){var _e=this._treeIndexes[_a];var _f=this._treeStates[_e];var _g=0;if(_b!=_f){if(_b==2){if(_c){this._refreshBodyRow(_a-this._getBodyBegRowPos(_a));}return 1;}else if((_g=this._toggleTreeState(_a,_c,_b,_d))>0){return _g;}}}return 0;};_pGrid._getOrgTreeStates=function(_a){var _b;if(this._org_treeStates.length){_b=this._org_treeStates;}else{_b=this._createTreeStates(false,true);}if(_b[_a]==2){return 2;}else{return this._treeStates[_a];}};_pGrid._treeStateKeyAction=function(_a,_b){var _c=this._treeIndexes[_a];var _d=this._treeStates[_c];if(_d<2&&_d!=_b){return this._toggleTreeState(_a,true);}return 0;};_pGrid._callback_treetoggle=function(_a,_b){var _c=this._bodyBand._matrix._adjustTreeDisplay(_a,_b);var _d=this._getCurrentBodyCell( -1, -1);if(_d){_d._apply_setfocus();}if(_c){if(this._headBand){this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true);}}};_pGrid._supphorztype=0;_pGrid.set_suppresshorzcell=function(_a){switch(_a){case "none":this._supphorztype=0;break;case "left":this._supphorztype=1;break;case "right":this._supphorztype=2;break;case "leftright":this._supphorztype=3;break;default:return;}if(_a!=this.suppresshorzcell){this.suppresshorzcell=_a;this.on_apply_suppresshorzcell();}};_pGrid.on_apply_suppresshorzcell=function(){this._refreshAll();};_pGrid.set_treeasynctoggle=function(_a){if(_a!=null&&this.treeasynctoggle!=_a){_a=nexacro._toBoolean(_a);this.treeasynctoggle=_a;}};_pGrid._toggleTreeState=function(_a,_b,_c,_d){var _e=this._treeIndexes[_a];if(this.treeasynctoggle){if(this._treetogglecell){return;}this._treetogglecell=this._getCurrentBodyCell(_e,this._treeCellinfo._cellidx);if(_b){this._setGlobalCursor("wait",this._treetogglecell);}}var _f;if(_d){_f=this._getOrgTreeStates(_e);}else{_f=this._treeStates[_e];}var _g=false;var _h;if(_f==0){if(this.on_fire_cantreestatuschange(_a,_e,1)!==false){_h=this._expandTreeState(_a);this.on_fire_ontreestatuschanged(_a,_e,1);}}else if(_f==1){if(this.on_fire_cantreestatuschange(_a,_e,0)!==false){_g=true;_h=this._collapseTreeState(_a);this.on_fire_ontreestatuschanged(_a,_e,0);}}else if(_f==2){if(_d){if(_d=="null_value"){this._treeStates[_e]=_c;}else{this._treeStates[_e]=2;}}else{if(this.on_fire_cantreestatuschange(_a,_e,0)!==false){_h=1;if(_c!=undefined){this._treeStates[_e]=_c;}else{this._treeStates[_e]=2;}this.on_fire_ontreestatuschanged(_a,_e,0);}}}if(_b){if(_h==2){if(this._bodyBand){if(this.enableredraw){if(this.treeasynctoggle){var _i=this;nexacro._OnceCallbackTimer.callonce(this,function(){_i._callback_treetoggle(_a,_g);_i._setGlobalCursor(null,this._treetogglecell);_i._treetogglecell=null;},50);}else{this._callback_treetoggle(_a,_g);}}else{this._enable_redraw_history.recreate_body=true;}}}else if(_h==1){this._refreshBodyRow(_a-this._getBodyBegRowPos(_a));if(this.treeasynctoggle){if(this._treetogglecell){this._setGlobalCursor(null,this._treetogglecell);this._treetogglecell=null;}}}}else{if(this.treeasynctoggle){if(this._treetogglecell){this._setGlobalCursor(null,this._treetogglecell);this._treetogglecell=null;}}}return _h;};_pGrid._collapseTreeState=function(_a){var _b=this._treeIndexes;var _c=this._treeStates;var _d=_b.length;var _e=_b[_a];var _f=this._treeCellinfo;if(_c[_e]==1){_c[_e]=0;}else{return 0;}var _g=_f._getTreeLevel(_e);if(nexacro._enableaccessibility){var _h=this._getAccessibilityCurrentCell();if(_h){if(nexacro._OS=="Android"&&nexacro._Browser!="Runtime"){_h._setAccessibilityStatLive(true);}_h._setAccessibilityStatExpanded(false);}}var _i= -1;var _j=0;for(var _k=_a+1;_k<_d;_k++ ){_i=_f._getTreeLevel(_b[_k]);if(_i>_g){_j++ ;}else{break;}}if(_j>0){_b.splice(_a+1,_j);this._createTreeKeys();this.rowcount=_b.length;return 2;}return 1;};_pGrid._expandTreeState=function(_a){var _b=this._treeIndexes;var _c=this._treeStates;var _d=_c.length;var _e=_b[_a];var _f=this._treeCellinfo;if(_c[_e]==0){_c[_e]=1;}else{return 0;}var _g=_f._getTreeLevel(_e);if(nexacro._enableaccessibility){var _h=this._getAccessibilityCurrentCell();if(_h){if(nexacro._OS=="Android"&&nexacro._Browser!="Runtime"){_h._setAccessibilityStatLive(true);}_h._setAccessibilityStatExpanded(true);}}var _i= -1;var _j=0;var _k=_e;var _l=[_e];var _m= -1;var _n= -1;var _o=false;var _p;var _q= -1;for(var _t=_e+1;_t<_d;_t++ ){_i=_f._getTreeLevel(_t);if(_i>_g){if(_m<0){if((_p=(_i-_g))>1){for(var _u=0;_u<_p-1;_u++ ){_l.push(_m);_q= -1;}}}else{_n=_f._getTreeLevel(_m);if(_i>_n){if(_o==true){continue;}_k=_m;if((_p=(_i-_n))>1){for(var _v=0;_v<_p-1;_v++ ){_l.push(_m);_q=_n;}}else{_l.push(_m);_q=_n;}}else if(_i<_n){var _r=_n-_i;var _s=true;if(_l[_l.length-1]>=0){if(_q<_i){_s=false;}}if(_s){_l.splice(_l.length-_r,_r);}_k=_l[_l.length-1];}_o=false;}if(_c[_k]>0){_b.splice(_a+1+_j,0,_t);_j++ ;}else{_o=true;}_m=_t;}else{break;}}this._createTreeKeys();if(_j>0){this.rowcount=this._treeIndexes.length;return 2;}return 1;};_pGrid._setTreeChecked=function(_a,_b){_b=parseInt(_b,10);if(isFinite(_b)){var _c=this._treeIndexes[_a];var _d=this._treeChecked[_c];if(_b==_d){return false;}else{return (this._toggleTreeChecked(_a));}}return false;};_pGrid._toggleTreeChecked=function(_a){var _b=this._treeIndexes[_a];var _c=this._treeChecked[_b];var _d=(_c==0)?1:0;this._treeChecked[_b]=_d;return true;};_pGrid._getCurrentBodyCell=function(_a,_b){var _c=this._bodyBand;if(_c){if(_a<0){_a=this._selectinfo.curdsrow;}if(_b<0){_b=this._selectinfo.curcell;}var _d=_c._get_row(_a);if(_d){return _d._cells[_b];}}return null;};_pGrid._getCurrentHeadCell=function(_a,_b){var _c=this._headBand;if(_c&&(_b||this._currentDSrow== -1)){if(_a<0){_a=this.currentcell;}var _d=_c._get_rows()[0];if(_d){return _d._cells[_a];}}return null;};_pGrid._getCurrentSummCell=function(_a,_b){var _c=this._summBand;if(_c&&(_b||this._currentDSrow== -2)){if(_a<0){_a=this.currentcell;}var _d=_c._get_rows()[0];if(_d){return _d._cells[_a];}}return null;};_pGrid._isFocused=function(){var _a=this._getOwnerFrame();var _b=_a._activate;var _c=false;var _d=this._getWindow()._getLastModalFrame();if(_d&&!_d._contains(this)){_c=true;}if(_b==false||_c){return false;}var _e=this._find_lastFocused();if(_e instanceof nexacro.Div){_e=_e._getLastFocused();}if(_e!=this){return false;}return true;};_pGrid._showEditor=function(_a){var _b=this._getRootWindow();var _c=_b._isActiveLayerComponent(this);if(!_c){return;}if(this._hide_applydata){return true;}if(nexacro._toBoolean(this.readonly)==true){return false;}if(!this._isFocused()){return false;}var _d=_a;if(!_d){_d=this._getCurrentBodyCell( -1, -1);}if(!_d){return false;}var _e=this._getBodyBegRowPos(_d._rowidx);var _f=this._endrowpos;var _g=this._selectinfo.currow;var _h=this._selectinfo.curcell;if(_e>_g||_f<_g){return false;}else{if(this._beforeEditRowIdx!=_g||this._beforeEditCellIdx!=_h){if(_d._virtualmerge){this._showEditorMergeCell(_d,true,true);}else if(_d._hasEditor()){_d._showEditor(true,true);this._beforeEditRowIdx=this._getDataRow(_d._rowidx);this._beforeEditCellIdx=_d._cellidx;this._showEditing=true;}else{_d._setFocus(false);_d._setSubControlFocus(true);}}}return true;};_pGrid._applyMultiContainerScrollPos=function(){this._notifyParentDisplayOn();};_pGrid._notifyParentDisplayOn=function(){if(this._control_element){this._absolutelyResetScrollPos(true);this._control_element.setElementHScrollPos(this._control_element.scroll_left);this._control_element.setElementVScrollPos(this._control_element.scroll_top);this._absolutelyResetScrollPos(false);}};_pGrid._setdataobj=null;_pGrid._hideEditor=function(_a,_b,_c){if(this._FocuedCell&&this._FocuedCell._is_alive){this._FocuedCell._setSubControlFocus(false);}if(!this._currentCellEditor||this._hide_applydata){return false;}var _d=this._currentCellEditor;var _e=null;if(!_a&&_d._is_alive){this._hide_applydata=true;if(_c){_d._confirmValue();}_e={succ:false};_e.succ=_d._setDataset(true);if(_e.succ&&_d._cellobj){_d._cellobj._updateAll();}_d=this._currentCellEditor;this._hide_applydata=false;}if(this._binddataset.enableevent==false){this._refreshAll();}this._currentCellEditor=null;if(_d._is_alive){var _f=_d._cellobj;_f._setDisplayText();if(_f._is_mergetemp){this._hideEditorMergeCell();}else{_f._hideEditor();}if(this._keydown_elem&&!_b){_f._setFocus(false);}}this._showEditing=false;this._setdataobj=_e;this._beforeEditCellIdx= -1;this._beforeEditRowIdx= -1;this._currentCellCell= -1;this._currentCellRow= -1;return true;};_pGrid._setFocus=function(_a,_b,_c){if(nexacro._enableaccessibility){this._currentBand="grid";this._accept_arrow=true;this._removeAccessibilityCurrentFocus();if(_b==2){if(!this.accessibilityenable){this._setAccessibilityBandFocus("next",true,false);}}else if(_b==3){this._setAccessibilityBandFocus("prev",true);}}return nexacro.Component.prototype._setFocus.call(this,_a,_b,_c);};_pGrid._evtvalue=function(_a,_b,_c){var _d="";if(_c){if(_a&&_a._child_editor){_a=_a._child_editor;}}if(_a&&_a.value){_d=_a.value;}else if(_b){_d=_b;}return _d;};_pGrid._getAvailableRect=function(_a){var _b={left:0,top:0,right:0,bottom:0,width:0,height:0};_b.left=_a._getClientLeft();_b.top=_a._getClientTop();_b.right=_a._getClientLeft()+_a._getClientWidth();_b.bottom=_a._getClientTop()+_a._getClientHeight();_b.width=_a._getClientWidth();_b.height=_a._getClientHeight();return _b;};_pGrid._getPosRect=function(_a){var _b={left:_a._adjust_left,top:_a._adjust_top,right:_a.getOffsetRight(),bottom:_a.getOffsetBottom(),width:_a._adjust_width,height:_a._adjust_height};return _b;};_pGrid._closePopup=function(){var _a=this._currentCellEditor;if(_a&&_a._popupcontrol){_a._closePopup();}};_pGrid._getTreeStats=function(_a){return this._treeStates[_a];};_pGrid._getTreeCheck=function(_a){return this._treeChecked[_a];};_pGrid._initVirtualMerge=function(){var _a,_b;var _c;var _d=this._virtual_mergecell_arr;if(this.first_cellinfo){this.first_cellinfo._initVirtualMergeInfo();this.first_cellinfo=null;}for(_a=0;_a<_d.length;_a++ ){_c=_d[_a].cellinfos;for(_b=0;_b<_c.length;_b++ ){_c[_b]._initVirtualMergeInfo();_c[_b]=null;}_d[_a]=null;}this._virtual_mergecell_arr=[];};_pGrid._setVirtualMerge=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._curFormat;var _i;var _j;var _k;if(_a>_d||_a<0||_d<0){return false;}if(!_h._cols.length||!_h._cols[_a]||!_h._cols[_d]){return false;}if(_h._cols[_a]._area!=_h._cols[_d]._area){return false;}if(this.suppresshorzcell!="none"&&(_h._cols[_a]._area=="left"||_h._cols[_a]._area=="right")){return false;}if(_b== -1||_e== -1){if(_b!=_e){return false;}if(!_h._headrows){return false;}_i=_h._headcells;_j=_h._headrows.length;_k="head";if(_f<_c){return false;}}else if(_b== -2||_e== -2){if(_b!=_e){return false;}if(!_h._summrows){return false;}_i=_h._summcells;_j=_h._summrows.length;_k="summ";if(_f<_c){return false;}}else{if(_b<0||_e<0){return false;}if(_b>_e){return false;}if(!_h._bodyrows){return false;}_i=_h._bodycells;_j=_h._bodyrows.length;_k="body";}if(_c==undefined){_c=0;}if(_f==undefined){_f=_j-1;}if(_j<=_c||_j<=_f){return false;}var _l,_m,_n;var _o,_p,_q;var _r=[];var _s=null,_t=null;var _u,_v,_w,_x;for(var _ak=0,_al=_i.length;_ak<_al;_ak++ ){_s=_i[_ak];_l=_s._col;_m=_s._colspan;_n=_l+_m-1;_o=_s._row;_p=_s._rowspan;_q=_o+_p-1;if((_a<=_l&&_d>=_l)||(_a<=_n&&_d>=_n)||(_l<=_a&&_n>=_a)||(_l<=_d&&_n>=_d)){if(_b>=0){_u=_b* _j+_o;_v=_b* _j+_c;_w=_e* _j+_q;_x=_e* _j+_f;}else{_u=_o;_v=_c;_w=_q;_x=_f;}if((_v<=_u&&_x>=_u)||(_v<=_w&&_x>=_w)||(_u<=_v&&_w>=_v)||(_u<=_x&&_w>=_x)){if(_s.suppress!=0){return false;}var _y=false;if(!_t&&_o==_c){_t=_s;}if(_s._colspan>1){var _z=_s._col+_s._colspan-1;if(_s._col<_a){_y=true;_a=_s._col;}if(_z>_d){_y=true;_d=_z;}}if(_s._rowspan>1){if(_u<_v){_y=true;_c=_s._row;}if(_w>_x){_y=true;_f=_s._row+_s._rowspan-1;}}if(_y==true){_r=[];_ak= -1;}else{_r.push(_s);}}}}var _aa={start_column:_a,start_row:_b,start_subrow:_c,end_column:_d,end_row:_e,end_subrow:_f,cellinfos:_r,first_cellinfo:_t};var _ab=this._virtual_mergecell_arr;var _ac=_ab.length;var _ad=[];var _ae,_af;for(_ak=0;_ak<_ac;_ak++ ){if(this._checkInclude(_ab[_ak],_j,_a,_b,_c)){_ad.push(_ak);}else if(this._checkInclude(_ab[_ak],_j,_a,_e,_f)){_ad.push(_ak);}else if(this._checkInclude(_ab[_ak],_j,_d,_b,_c)){_ad.push(_ak);}else if(this._checkInclude(_ab[_ak],_j,_d,_e,_f)){_ad.push(_ak);}else if(this._checkInclude(_aa,_j,_ab[_ak].start_column,_ab[_ak].start_row,_ab[_ak].start_subrow)){_ad.push(_ak);}else if(this._checkInclude(_aa,_j,_ab[_ak].start_column,_ab[_ak].end_row,_ab[_ak].end_subrow)){_ad.push(_ak);}else if(this._checkInclude(_aa,_j,_ab[_ak].end_column,_ab[_ak].start_row,_ab[_ak].start_subrow)){_ad.push(_ak);}else if(this._checkInclude(_aa,_j,_ab[_ak].end_column,_ab[_ak].end_row,_ab[_ak].end_subrow)){_ad.push(_ak);}}if(_ad.length==0){if(_g){return false;}_ab.push(_aa);for(_ak=0,_al=_r.length;_ak<_al;_ak++ ){for(_ae=_b;_ae<=_e;_ae++ ){this._checkVirtualMerge(_r[_ak],_ae);}this._refreshCell(_k,_r[_ak]._cellidx, -1);}this._updateMergeData(_ab.length-1);}else{if(!_g){return false;}var _ag;for(_ak=0,_al=_ad.length;_ak<_al;_ak++ ){var _ah=_ad[_ak];var _ai=_ab.splice(_ah-_ak,1)[0];var _aj=this._getVirtualMergeCellInfos(_i,_ai.start_column,_ai.end_column,_ai.start_row,_ai.end_row,_ai.start_subrow,_ai.end_subrow,_j);for(_ae=0,_ag=_aj.length;_ae<_ag;_ae++ ){for(_af=_ai.start_row;_af<=_ai.end_row;_af++ ){_aj[_ae]._setVirtualMergeInfo(_af+2,undefined);}this._refreshCell(_k,_aj[_ae]._cellidx, -1);}for(_ae=0,_ag=_r.length;_ae<_ag;_ae++ ){for(_af=_b;_af<=_e;_af++ ){_r[_ae]._setVirtualMergeInfo(_af+2,undefined);}this._refreshCell(_k,_r[_ae]._cellidx, -1);}}}this._adjustOverlayControls(true);if(this.autosizingtype!="none"){this._recreate_contents_all(true);}else{this._autosizeMergeCell();}return true;};_pGrid._autosizeMergeCell=function(){if(this._is_autosizemerge){return;}var _a=this._virtual_mergecell_arr;if(!_a||!_a.length){return;}var _b=this._curFormat;var _c=_b._cols;if(!_c&&!_c.length){return;}var _d,_e;var _f;var _g;var _h,_i,_j,_k;var _l;var _m,_n;var _o,_p;var _q,_r;this._is_autosizemerge=true;if(this.autosizingtype=="both"||this.autosizingtype=="col"){for(_d=0;_d<_a.length;_d++ ){_f=_a[_d];_g=0;for(_e=_f.start_column;_e<=_f.end_column;_e++ ){_g+=_c[_e].size;}_h=_f.first_cellinfo;_i=_f.start_row;_j=_h._getDisplayText(_i);_m=_h._curpadding;_n=_h._curborder;if(_m==="bindexpr"||_m===undefined){_m=this._getCellStyleInfo(_h._cellidx,"padding",_i);}if(_n==="bindexpr"||_n===undefined){_n=this._getCellStyleInfo(_h._cellidx,"border",_i);}_o=0;_p=0;if(_m){_m=new nexacro._PaddingObject(_m);_o=(_m.left+_m.right);}if(_n){_n=new nexacro._BorderObject(_n);_p=(_n.left._width+_n.right._width);}if(this._overlay_controls[_d]){_k=this._overlay_controls[_d]._adjust_width;}else{_k=_b._getColSizeRange(_f.start_column,_f.end_column)-_p;}_l=this._getCellRowTextSize(_h,_i,_j,null,true,_k);_l[0]+=_o;_l[0]+=_p;if(_l[0]>_g){this._applyColSizing(_l[0]-_g,_f.end_column,true);}}}else if(this.autosizingtype=="both"||this.autosizingtype=="row"){var _s,_t,_u,_v,_w,_x;var _y;for(_d=0;_d<_a.length;_d++ ){_f=_a[_d];_g=0;_s=_f.start_row;_u=_f.end_row;_t=_f.start_subrow;_v=_f.end_subrow;if(_s== -1){_w=_b._headrows;_x=this._rowHeadListSub;_y="head";}else if(_s== -2){_w=_b._summrows;_x=this._rowSummListSub;_y="summ";}else{_w=_b._bodyrows;_x=this._rowSizeListSub;_y="body";}for(_e=_s;_e<=_u;_e++ ){for(var _ab=0,_ac=_w.length;_ab<_ac;_ab++ ){if(_e==_s&&_ab<_t){continue;}else if(_e==_u&&_ab>_v){break;}_g+=_x[_e* _w.length+_ab];}}_h=_f.first_cellinfo;var _z=_h._getAttrValue(_h.autosizerow,_i);var _aa=_w[_t+_h._row].size;_i=_f.start_row;_j=_h._getDisplayText(_i);_m=_h._curpadding;_n=_h._curborder;if(_m==="bindexpr"||_m===undefined){_m=this._getCellStyleInfo(_h._cellidx,"padding",_i);}if(_n==="bindexpr"||_n===undefined){_n=this._getCellStyleInfo(_h._cellidx,"border",_i);}_q=0;_p=0;_r=0;if(_m){_m=new nexacro._PaddingObject(_m);_q=(_m.top+_m.bottom);}if(_n){_n=new nexacro._BorderObject(_n);_p=(_n.left._width+_n.right._width);_r=(_n.top._width+_n.bottom._width);}if(this._overlay_controls[_d]){_k=this._overlay_controls[_d]._adjust_width;}else{_k=_b._getColSizeRange(_f.start_column,_f.end_column)-_p;}_l=this._getCellRowTextSize(_h,_i,_j,null,true,_k);_l[1]+=_q;_l[1]+=_r;if(_z=="limitmin"){if(_l[1]<_aa){_l[1]=_aa;}}else if(_z=="limitmax"){if(_l[1]>_aa){_l[1]=_aa;}}if(_l[1]>_g){this._applyRowSizing2(_l[1]-_g,_y,_f.end_row,_f.end_subrow,true);}}}this._is_autosizemerge=false;};_pGrid._showEditorMergeCell=function(_a,_b,_c){var _d=_a._virtualmerge;var _e,_f,_g=this._overlay_controls[_d.overlayidx];var _h,_i;if(_d.targetrow>=0){_f="body";_h=this._curFormat._bodycells;_i=this._bodyBand;}else if(_d.targetrow== -1){_f="head";_h=this._curFormat._headcells;_i=this._headBand;}else if(_d.targetrow== -2){_f="summary";_h=this._curFormat._summcells;_i=this._summBand;}if(!_h){return;}var _j=_h[_d.targetcell];if(!_j._hasEditor(_d.targetrow)){return;}var _k=this._curFormat._cols[_j._col]._area;var _l=_g._control_element.left;var _m=_g._control_element.top;var _n=_g._getClientWidth();var _o=_g._getClientHeight();_e=this._tempmergeeditor=new nexacro._OverlayControl(_l,_m,_n,_o,null,null,this,_g._org_left,_g._org_top,_g._org_width,_g._org_height,true,_f,true,(_k=="left"),(_f=="head"||_f=="summary"));_e._type_name=nexacro._GridBandControl.prototype._type_name;_e.id=_f;_e._refinfo=_i._refinfo;_e.set_background("transparent");_e.set_border("0px none");this._tempmergeeditor._overlayidx=_d.overlayidx;var _p=_e._ctrl=new nexacro._GridRowControl(_e,0,0,_g._org_width,_g._org_height,_d.targetrow,true);_e.createComponent();var _q=new nexacro._GridCellControl("tempcell",0,0,_g._org_width,_g._org_height,null,null,_p,_j,_d.targetrow,_d.targetcell);_q._is_mergetemp=true;_q.createComponent();_q._updateAll();_q.set_background("transparent");_q.set_border("0px none");_p._tempcell=_q;this._tempmergeeditor.setControlElemPosition(_l,_m,_n,_o);_q._showEditor(_b,_c);this._beforeEditRowIdx=_d.targetrow;this._beforeEditCellIdx=_d.targetcell;_g.set_visible(false);this._showEditing=true;};_pGrid._hideEditorMergeCell=function(_a){if(!this._tempmergeeditor){return;}var _b=false;if(!_a&&this._isDownActionKeyMouse()){_b=true;}this._after_hideeditor=null;if(!_b){var _c=(_a)?_a:this._tempmergeeditor;var _d=_c._ctrl._tempcell;var _e=this._binddataset;var _f=_d._refinfo;var _g,_h;if(_f.text._bindexpr){_g=_e.getColumn(_f.text._bindexpr,_d._getDataRow());_d._hideEditor();_h=_e.getColumn(_f.text._bindexpr,_d._getDataRow());}else{_d._hideEditor();}var _i=_d._virtualmerge;var _j=this._overlay_controls[_i.overlayidx];_j.set_visible(true);_c._refinfo=null;_d.destroy();_c._ctrl._tempcell=null;_c.destroy();if(this._tempmergeeditor==_a||_c==this._tempmergeeditor){this._showEditing=false;this._tempmergeeditor=null;}this._updateMergeData(_i.overlayidx);if(_g!=_h){this._autosizeMergeCell();}_d=this._getCurrentBodyCell( -1, -1);if(_d){_d.setFocus(false);}this._after_hideeditor=null;}else{this._after_hideeditor=this._tempmergeeditor;}};_pGrid._updateMergeData=function(_a){var _b=this._virtual_mergecell_arr[_a];var _c=_b.start_row;var _d=_b.end_row;var _e=_b.start_subrow;var _f=_b.end_subrow;var _g=_b.start_column;var _h=_b.end_column;var _i,_j;var _k=this._curFormat._bodycells;var _l;var _m=this._binddataset;var _n=0,_o;for(var _q=_c;_q<=_d;_q++ ){_i=0;_j=this._curFormat._bodyrows.length-1;if(_q==_d&&_f!=undefined){_j=_f;}if(_q==_c&&_e!=undefined){_i=_e;}var _p=true;for(var _r=0,_s=_k.length;_r<_s;_r++ ){if(_q==_c&&_k[_r]._row<_i){continue;}else if(_q==_d&&_k[_r]._row>_j){break;}if(_l=_k[_r].text._bindexpr){if(_k[_r]._col>=_g&&_k[_r]._col<=_h){if(!_p){return;}if(_n++ ){_m.setColumn(_q,_l,_o);}else{if(_k[_r].text._bindtype==1){_o=_m.getColumn(_q,_l);}else{_p=false;}}}}}}};_pGrid._adjustOverlayControls=function(_a,_b){if(!this.enableredraw){return;}if(_a){this._destroyOverlayControls();this._destroySelectionControls();}this._applySelection();var _c=this._curFormat;if(!_c){return;}if(!this._hasVirtualMergeCell()){return;}var _d,_e,_f,_g,_h;var _i=0,_j=0,_k=0,_l=0;var _m,_n,_o,_p,_q,_r,_s,_t,_u;var _v=[];var _w=null;var _x=null;var _y;var _z=this._virtual_mergecell_arr;var _aa;var _ab=this._overlay_controls;var _ac=0;for(_d=0,_h=_z.length;_d<_h;_d++ ){_y=_z[_d];_o=_y.start_row;_p=_y.end_row;_m=_y.start_column;_n=_y.end_column;_s=_y.start_subrow;_t=_y.end_subrow;_u=_y.first_cellinfo;if(_b){if(_b=="head"&&_o!= -1){continue;}else if(_b=="summ"&&_o!= -2){continue;}}if(_o== -1){_o=_p=0;_q=(_s>=0)?_s:0;_r=(_t>=0)?_t:_c._headrows.length-1;for(_e=_m;_e<=_n;_e++ ){_g=0;while(true){_w=this._getCurrentHeadCell(_g++ ,true);if(!_w||_w._refinfo._row>_r){break;}else if(_w._refinfo._row<_q){continue;}_x=_w._refinfo;if(_x._col==_e){_v.push(_w);}}}}else if(_o== -2){_o=_p=0;_q=(_s>=0)?_s:0;_r=(_t>=0)?_t:_c._summrows.length-1;for(_e=_m;_e<=_n;_e++ ){_g=0;while(true){_w=this._getCurrentSummCell(_g++ ,true);if(!_w||_w._refinfo._row>_r){break;}else if(_w._refinfo._row<_q){continue;}_x=_w._refinfo;if(_x._col==_e){_v.push(_w);}}}}else{if(!_c._bodyrows){return;}for(_e=_m;_e<=_n;_e++ ){for(_f=_o;_f<=_p;_f++ ){_q=0;_r=_c._bodyrows.length-1;if(_f==_p&&_t!=undefined){_r=_t;}if(_f==_o&&_s!=undefined){_q=_s;}_g=0;while(true){_w=this._getCurrentBodyCell(_f,_g++ );if(!_w){break;}if(_f==_o&&_w._refinfo._row<_q){continue;}else if(_f==_p&&_w._refinfo._row>_r){break;}_x=_w._refinfo;if(_x._col==_e){_v.push(_w);}}}}}if(_v.length>0){_o=_y.start_row;var _ad={};var _ae={};var _af=_v[0]._setPositionInGrid(undefined,undefined,true,_ad);var _ag=_v[_v.length-1]._setPositionInGrid(undefined,undefined,true,_ae);var _ah,_ai,_aj;_ah=_ae.right-_ad.left;_i=_af.left;_j=_af.top;_k=(_ag.right>_i)?_ag.right-_i:0;_l=(_ag.bottom>_j)?_ag.bottom-_j:0;_aa=_ab[_ac];var _ak=false;if(!_aa){if(_o<0){_aj=_ad.top;_ai=_ae.bottom-_ad.top;}else{_ai=this._getBodyRowsSize(_o,_p,_s,_t);_aj=this._bodyBand._matrix._getBodyRowTopPos(_o);if(_s>0){_aj+=this._rowSizeListSub[_o* _c._bodyrows.length+_s];}}var _al=this._curFormat._cols[_u._col]._area;_aa=new nexacro._OverlayControl(_i,_j,_k,_l,null,null,this,_ad.left,_aj,_ah,_ai,undefined,undefined,undefined,(_al=="left"),(_o<0));_aa.createComponent();_ab[_ac]=_aa;_ak=true;}this._setOverlayControlProperty(_aa,_i,_j,_k,_l,_v,_o,_u,_ak,(_o<=this._fixed_endrow));if(this._tempmergeeditor&&this._tempmergeeditor._overlayidx==_ac){this._tempmergeeditor.setControlElemPosition(_i,_j,_k,_l);}}else{if(_ab[_ac]){_ab[_ac].set_top(this._adjust_height);}if(this._tempmergeeditor&&this._tempmergeeditor._overlayidx==_ac){this._tempmergeeditor.set_top(this._adjust_height);}}_v=[];_ac++ ;}};_pGrid._destroyOverlayControls=function(){var _a=this._overlay_controls;if(_a.length){for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]){_a[_b].destroy();}}}this._overlay_controls=[];};_pGrid._getVirtualMergeCellInfos=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=[];var _j,_k,_l,_m;var _n,_o,_p,_q,_r,_s;for(var _t=0,_u=_a.length;_t<_u;_t++ ){_n=_a[_t]._col;_p=_a[_t]._colspan;_o=_n+_p-1;_q=_a[_t]._row;_s=_a[_t]._rowspan;_r=_q+_s-1;if((_b<=_n&&_c>=_n)||(_b<=_o&&_c>=_o)||(_n<=_b&&_o>=_b)||(_n<=_c&&_o>=_c)){if(_d>=0){_j=_d* _h+_q;_k=_d* _h+_f;_l=_e* _h+_r;_m=_e* _h+_g;}else{_j=_q;_k=_f;_l=_r;_m=_g;}if((_k<=_j&&_m>=_j)||(_k<=_l&&_m>=_l)||(_j<=_k&&_l>=_k)||(_j<=_m&&_l>=_m)){_i.push(_a[_t]);}}}return _i;};_pGrid._getVirtualMergeCellObjs=function(_a){var _b;var _c=[];var _d=this._curFormat;var _e;if(_a.start_row== -1){_b=this._headBand;_e=_d._headrows.length;}else if(_a.start_row== -2){_b=this._summBand;_e=_d._summrows.length;}else if(_a.start_row>=0){_b=this._bodyBand;_e=_d._bodyrows.length;}if(!_b){return _c;}var _f=_b._get_rows();var _g;var _h=_a.start_column;var _i=_a.end_column;var _j=_a.start_row;var _k=_a.end_row;var _l=_a.start_subrow;var _m=_a.end_subrow;var _n;var _o,_p,_q,_r;var _s;for(var _t=0,_u=_f.length;_t<_u;_t++ ){_n=this._getDataRow(_f[_t]._rowidx);if(_n>=_j&&_n<=_k){_g=_f[_t]._cells;for(var _v=0,_w=_g.length;_v<_w;_v++ ){_s=_g[_v]._refinfo;if(_s._col>=_h&&_s._col<=_i){if(_l==undefined){_c.push(_g[_v]);}else{if(_j>=0){_o=_n* _e+_s._row;_p=_j* _e+_l;_q=_n* _e+_s._row+_s._rowspan-1;_r=_k* _e+_m;}else{_o=_s._row;_p=_l;_q=_s._row+_s._rowspan-1;_r=_m;}if((_p<=_o&&_r>=_o)||(_p<=_q&&_r>=_q)||(_o<=_p&&_q>=_p)||(_o<=_r&&_q>=_r)){_c.push(_g[_v]);}}}}}}return _c;};_pGrid._setOverlayControlProperty=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!_a){return;}_a.setControlElemPosition(_b,_c,_d,_e,_j,(this.autofittype=="col"||this.autofittype=="both"||this.autofittype=="allboth"||this.autofittype=="col,allrow"));var _k=_g;var _l=_h;var _m=_l._getDisplaytype(_k);var _n=this._getCellStyleInfo(_l._cellidx,["font","color","letterSpacing","wordSpacing","textDecoration","padding","cursor","wordWrap","align"],_k,false);var _o=_l._getDisplayText(_k);var _p=_n.align.split(",");if(_m=="imagecontrol"){_a.set_text(_o);}else{if(_o&&_o.indexOf("\r")!= -1){_o=_o.replace(/\r/g,"");}_a.set_text(_o);if(_m=="decoratetext"){_a.set_usedecorate(true);}else{_a.set_usedecorate(false);}_a.set_wordWrap(_l._getWordwrap(_k));}_a.set_tooltiptext(_l._getTooltipText(_k));_a.set_font(_n.font);_a.set_letterSpacing(_n.letterSpacing);_a.set_wordSpacing(_n.wordSpacing);_a.set_textDecoration(_n.textDecoration);_a.set_color(_n.color);_a.set_cursor(_n.cursor);_a.set_padding(_n.padding);_a.set_wordWrap(_n.wordWrap);_a.set_textAlign(_p[0]);_a.set_verticalAlign(_p[1]);};_pGrid._checkInclude=function(_a,_b,_c,_d,_e){if(_a.start_column<=_c&&_a.end_column>=_c){if(_a.start_row<=_d&&_a.end_row>=_d){if(_e==undefined||_a.start_subrow==undefined){return true;}else{if(_a.start_row<_d&&_a.end_row>_d){return true;}if(_a.start_row==_a.end_row){if(_a.start_subrow<=_e&&_a.end_subrow>=_e){return true;}}else{if(_a.start_row==_d){if(_a.start_subrow<=_e&&_b>_e){return true;}}if(_a.end_row==_d){if(0<=_e&&_a.end_subrow>=_e){return true;}}}}}}return false;};_pGrid._checkVirtualMerge=function(_a,_b){if(_a._getVirtualMergeInfo(_b+2)){return _a._getVirtualMergeInfo(_b+2);}var _c=this._virtual_mergecell_arr;var _d=_c.length;var _e;var _f=this._curFormat;var _g;if(_b== -1){_e=(_f._headrows)?_f._headrows.length:0;_g="head";}else if(_b== -2){_e=(_f._summrows)?_f._summrows.length:0;_g="summ";}else if(_b>=0){_e=(_f._bodyrows)?_f._bodyrows.length:0;_g="body";}if(!_e){return null;}if(_d==0){return null;}var _h=_a._col,_i=_a._col+_a._colspan-1,_j=_a._row,_k=_a._row+_a._rowspan-1,_l=_a._area;for(var _n=0;_n<_d;_n++ ){if(this._checkInclude(_c[_n],_e,_h,_b,_j)){if(this._checkInclude(_c[_n],_e,_i,_b,_j)){if(this._checkInclude(_c[_n],_e,_h,_b,_k)){if(this._checkInclude(_c[_n],_e,_i,_b,_k)){var _m="";if(_l!="right"){if(_i<_c[_n].end_column){_m+="right";}}else{if(_h>_c[_n].start_column){_m+="left";}}if(_g!="summ"){if(_b<_c[_n].end_row){_m+="bottom";}else if(_b==_c[_n].end_row){if(_c[_n].end_subrow==undefined&&_k<_e-1){_m+="bottom";}else if(_k<_c[_n].end_subrow){_m+="bottom";}}}else{if(_b>_c[_n].start_row){_m+="top";}else if(_b==_c[_n].start_row){if(_c[_n].start_subrow==undefined&&_j>0){_m+="top";}else if(_j>_c[_n].start_subrow){_m+="top";}}}_m+="virtual";_m={"remove":_m,"targetrow":_c[_n].start_row,"targetcell":_c[_n].first_cellinfo._cellidx,"overlayidx":_n};_a._setVirtualMergeInfo(_b+2,_m);return _m;}}}}}return null;};_pGrid._hasVirtualMergeCell=function(){var _a=this._virtual_mergecell_arr;if(_a&&_a.length>0){return true;}else{return false;}};_pGrid._applySelection=function(){if(!this._is_created||(nexacro._Browser=="IE"&&nexacro._BrowserVersion<11)){return;}if(!this.showselection){this._destroySelectionControls();return;}var _a=this._bodyBand;if(!_a||!_a._is_created){return;}var _b=[];var _c=this._getSelectedCellsforRowRange(_b);if(!_c){this._destroySelectionControls();return;}var _d=_c.length;var _e=this._selectinfo;var _f=this._curFormat;if(_e.area.length<this._selections.length){this._destroySelectionControls();}var _g=_a._getCurrentStyleBorder();var _h=_g?_g.left._width:0;var _i=_g?_g.top._width:0;for(var _x=0;_x<_d;_x++ ){var _j=(_b[_x][0]==0&&_b[_x][1]==0)||(_b[_x][0]== -1&&_b[_x][1]== -1)?false:true;var _k=true;var _l=_c[_x].begcell;var _m=_c[_x].endcell;var _n=_l._getPositionInBand();var _o=_m._getPositionInBand();if(_o.right<_f.leftWidth&&_m._refinfo._area=="body"){_o.right=_f.leftWidth;}if(_l.parent._fixed&&!_m.parent._fixed){if(_b[_x][1]==0||(_b[_x][1]==1&&_o.bottom<this._fixed_height)){_k=false;_o.bottom=this._fixed_height;}}var _p=this._getClientWidth()-_f.rightWidth;if(_p<_n.left&&_l._refinfo._area=="body"){_n.left=_p;}var _q=_o.right-_n.left;var _r=_o.bottom-_n.top;if(this._selections[_x]){this._selections[_x].move(_n.left-_h,_n.top-_i,_q,_r);}else{if(!this._isMultiSelected()){this._destroySelectionControls();}var _s=new nexacro._GridSelectionControl(_n.left-_h,_n.top-_i,_q,_r,null,null,_a);_s.set_border(_a.selectborder);_s.createComponent();this._selections[_x]=_s;}if(!_j){this._selections[_x].move(_n.left-_h,_n.top+this._getClientHeight()-_i,_q,_r);continue;}var _t,_u,_v,_w;_t=_u=_v=_w=false;if(_n.orgl<_n.left||_n.orgl<0||!_q){_t=true;}if(_b[_x][0]!=1||(_n.orgt<0||_n.orgt<_n.top)){_u=true;}if((_o.right<_o.orgr&&0<=_o.orgr)||!_q){_v=true;}if(_k&&(_b[_x][1]!=1||(_o.bottom<_o.orgb))){_w=true;}this._selections[_x]._control_element.setElementBorderNone(_t,_u,_v,_w);}};_pGrid._destroySelectionControls=function(){var _a=this._selections;if(_a.length){for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]){_a[_b].destroy();}}}this._selections=[];};_pGrid._getSelectedCellsforRowRange=function(_a){var _b=this._selectinfo;var _c=this._bodyBand;var _d,_e,_f=null,_g=null,_h=null,_i=[],_j;var _k=_c._matrix._getAllRows();if(!_k||_k.length==0){return null;}var _l;var _m;var _n;var _o;var _p;var _q;var _r;var _s;var _t;var _u;var _v;var _w;var _x;var _y;var _z,_aa,_ab;var _ac=this._curFormat;if(this.selecttype=="row"){_l=[1,1];_r=this.getDatasetRow(_b.currow);_m=this._toprowpos[0];_n=this.getDatasetRow(_m);_o=this._getScreenBottomRowPos(this._getScrollTop(),true);_p=this.getDatasetRow(_o);if((_n<=_r&&(_p== -1||_r<=_p))||_r<=this._fixed_endrow){_f=_c._get_row(_r);}else{_l[0]= -1;_l[1]= -1;_f=_c._get_row(_n);}if(!_f){return null;}_g=_f._cells[0];_h=_f._cells[_f._cells.length-1];if((_h._refinfo._col+_h._refinfo._colspan-1)!=(_ac._cols.length-1)){var _ad=_f._cells;for(var _z=1;_z<_ad.length;_z++ ){if((_ad[_z]._refinfo._col+_ad[_z]._refinfo._colspan-1)==(_ac._cols.length-1)){_h=_ad[_z];}}}_a.push(_l);_i.push({begcell:_g,endcell:_h});}else if(this.selecttype=="multirow"){_t=_b.area;_u=_t.length;for(_z=0;_z<_u;_z++ ){_l=[1,1];_q=_t[_z].begrow;_m=this._toprowpos[0];_n=this.getDatasetRow(_m);_o=this._getScreenBottomRowPos(this._getScrollTop(),true);_p=this.getDatasetRow(_o);if((_n<=_q&&(_p== -1||_q<=_p))||_q<=this._fixed_endrow){_d=_c._get_row(_q);if(!_d){return null;}_g=_d._cells[0];}else{if(_n<=_q){_l[0]= -1;}else{_l[0]=0;}_d=_c._get_row(_n);if(!_d){return null;}_g=_d._cells[0];}_x=_t[_z].endrow;if((_n<=_x&&(_p== -1||_x<=_p))||_x<=this._fixed_endrow){_e=_c._get_row(_x);}else{if(_p<=_x){_l[1]= -1;}else{_l[1]=0;}_e=_c._get_row(_p);}if(!_e){return null;}_h=_e._cells[_e._cells.length-1];if((_h._refinfo._col+_h._refinfo._colspan-1)!=(_ac._cols.length-1)){var _ae=_e._cells;for(var _aa=1;_aa<_ae.length;_aa++ ){if((_ae[_aa]._refinfo._col+_ae[_aa]._refinfo._colspan-1)==(_ac._cols.length-1)){_h=_ae[_aa];}}}_a.push(_l);_i.push({begcell:_g,endcell:_h});}}else if(this.selecttype=="cell"){_l=[1,1];_s=this.getDatasetRow(_b.currow);_m=this._toprowpos[0];_n=this.getDatasetRow(_m);_o=this._getScreenBottomRowPos(this._getScrollTop(),true);_p=this.getDatasetRow(_o);if((_n<=_s&&(_p== -1||_s<=_p))||_s<=this._fixed_endrow){_f=_c._get_row(_s);if(!_f){return null;}_j=_f._cells[_b.curcell];}else{_l[0]= -1;_l[1]= -1;_f=_c._get_row(_n);if(!_f){return null;}_j=_f._cells[_b.curcell];}_a.push(_l);_i.push({begcell:_j,endcell:_j});}else if(this.selecttype=="area"||this.selecttype=="multiarea"){_t=_b.area;_u=_t.length;for(_z=0;_z<_u;_z++ ){_l=[1,1];_q=_t[_z].begrow;_m=this._toprowpos[0];_n=this.getDatasetRow(_m);_o=this._getScreenBottomRowPos(this._getScrollTop(),true);_p=this.getDatasetRow(_o);if((_n<=_q&&(_p== -1||_q<=_p))||_q<=this._fixed_endrow){_d=_c._get_row(_q);if(!_d){return null;}_v=_d._cells.length;for(_aa=0;_aa<_v;_aa++ ){_w=_d._cells[_aa];if(_w._refinfo._col==_t[_z].begcol){if(_w._refinfo._row==_t[_z].begsubrow[0]){_g=_w;break;}}}}else{if(_n<=_q){_l[0]= -1;}else{_l[0]=0;}_d=_c._get_row(_n);if(!_d){return null;}_v=_d._cells.length;for(_aa=0;_aa<_v;_aa++ ){_w=_d._cells[_aa];if(_w._refinfo._col==_t[_z].begcol){_g=_w;break;}}}_x=_t[_z].endrow;if((_n<=_x&&(_p== -1||_x<=_p))||_x<=this._fixed_endrow){_e=_c._get_row(_x);if(!_e){return null;}_y=_e._cells.length;for(_ab=_y-1;0<=_ab;_ab-- ){_w=_e._cells[_ab];if((_w._refinfo._col+_w._refinfo._colspan-1)==_t[_z].endcol){if((_w._refinfo._row+_w._refinfo._rowspan-1)==_t[_z].endsubrow[_t[_z].endsubrow.length-1]){_h=_w;break;}}}}else{if(_p<=_x){_l[1]= -1;}else{_l[1]=0;}_e=_c._get_row(_p);if(!_e){return null;}_y=_e._cells.length;for(_ab=_y-1;0<=_ab;_ab-- ){if(_e._cells[_ab]._refinfo._col==_t[_z].endcol){_w=_e._cells[_ab];_h=_w;break;}}}_a.push(_l);_i.push({begcell:_g,endcell:_h});}}return _i;};_pGrid._moveToAccessibilityCell=function(_a,_b,_c,_d){var _e;if(this._is_band_focus&&!_b){_e=true;if(_a=="prev"||_a=="up"){_e=this._setAccessibilityBandFocus(_a);}else{if(_a=="next"||(_a=="down"&&this._currentBand=="head")){this.currentcell=this.currentsubrow=this.currentcol=0;}if(!this._moveToPosAccessibilityCell(this.currentrow,this.currentcell)){_e=this._setAccessibilityBandFocus(_a);}}return _e;}var _f;if(this._currentBand=="grid"){if(_a=="prev"||_a=="next"||_a=="down"){if(_b){if(_a=="next"){if(this._bodyBand&&this._bodyBand._get_rows().length>0){_f=this._getFirstEditableCell();if(_f&&_f.row!==null){this._showEditorFocus=true;if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(0);}this._currentBand="body";this._moveToPosAccessibilityCell(_f.row,_f.cell);this._showEditorFocus=false;return true;}}}return false;}return this._setAccessibilityBandFocus(_a,true);}else{this._accept_arrow=false;return false;}}var _g;_e=true;var _h=null;var _i;var _j=false;this._is_band_focus=false;this._beforegridrowpos=this.currentrow;this._beforegridcolpos=this.currentcol;var _k;var _l;var _m;var _n,_o;if(this._currentBand=="body"){this._is_first_bodycell=false;while(true){if(_b){_e=this._moveToCell(_a,true,_d,undefined,undefined,true);}else{_e=this._moveToCell(_a,false,_d,undefined,undefined,true);}if(_e){if(this._showEditing){this._hideEditor();}_h=this._getAccessibilityCurrentCell();if(_h){if(_b){_h._setFocus(false);break;}else{_i=_h._refinfo;var _p=this._getDataRow(_h._rowidx);var _q=_i._getDisplaytype(_p);_j=_h.accessibilityenable;if(_j){if(this.autoenter=="select"){this._showEditor();}else{if(_h._subComp&&_q!="treeitemcontrol"){_h._subComp._setFocus(false);}else{_h._setFocus(false);}}break;}}}}else{if(!_b){_e=this._setAccessibilityBandFocus(_a);}break;}}return _e;}if(_b){if(this._currentBand=="head"){if(this._bodyBand._get_rows().length>0){this._currentBand="body";_f=this._getFirstEditableCell();if(_f.row!==null){this._is_first_bodycell=true;this._moveToPosAccessibilityCell(_f.row,_f.cell);}return true;}}return false;}if(_a=="next"){while(true){this.currentcell++ ;_h=this._getAccessibilityCurrentCell();if(_h){if(_h.width<=0){continue;}else{_j=_h.accessibilityenable;if(!_j){continue;}_i=_h._refinfo;this.currentsubrow=_i._row;this.currentcol=_i._col;this.currentrow=_h._rowidx;this.currentDSrow=_h._getDataRow();_h._showfull();_h._setFocus(false);}}else{this.currentcell-- ;_e=this._setAccessibilityBandFocus(_a);}break;}}else if(_a=="prev"){while(true){this.currentcell-- ;_h=this._getAccessibilityCurrentCell();if(_h){if(_h.width<=0){continue;}else{_j=_h.accessibilityenable;if(!_j){continue;}_i=_h._refinfo;this.currentsubrow=_i._row;this.currentcol=_i._col;this.currentrow=_h._rowidx;this.currentDSrow=_h._getDataRow();_h._showfull();_h._setFocus(false);}}else{this.currentcell++ ;_e=this._setAccessibilityBandFocus(_a);}break;}}else if(_a=="up"){if(this._currentBand=="head"){_g=this._headBand;}else{_g=this._summBand;}if(_g){_h=this._getAccessibilityCurrentCell();if(_h){_i=_h._refinfo;_k=_i._row;_l=_i._col;_m=this.currentcell;while(true){this.currentcell-- ;_h=this._getAccessibilityCurrentCell();if(_h){_n=_h._refinfo._row;_o=_h._refinfo._col;if(_o==_l&&_n==_k-1){_j=_h.accessibilityenable;if(!_j){continue;}this.currentsubrow=_n;this.currentcol=_o;this.currentrow=_h._rowidx;this.currentDSrow=_h._getDataRow();_h._setFocus(false);break;}}else{if(this.currentcell<=0){this.currentcol=_l;this.currentcell=_m;_e=this._setAccessibilityBandFocus(_a);break;}}}}}}else if(_a=="down"){_h=this._getAccessibilityCurrentCell();if(_h){_i=_h._refinfo;_k=_i._row;_l=_i._col;_m=this.currentcell;while(true){this.currentcell++ ;_h=this._getAccessibilityCurrentCell();if(_h){_n=_h._refinfo._row;_o=_h._refinfo._col;if(_o==_l&&_n==_k+1){this.currentsubrow=_n;this.currentcol=_o;this.currentrow=_h._rowidx;this.currentDSrow=_h._getDataRow();_h._setFocus(false);break;}}else{this.currentcell=_m;_e=this._setAccessibilityBandFocus(_a);break;}}}}return _e;};_pGrid._setAccessibilityBandFocus=function(_a,_b,_c){var _d=true,_e=null,_f=this._currentBand;var _g;var _h;if(_a=="next"){if(_f=="grid"){if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;}else if(this._bodyBand&&this.body&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;}else{this._accept_arrow=false;_d=false;}}else{if(_f=="head"){if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;}}else if(_f=="body"){if(this._summBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._hideEditor();_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;}}else if(_f=="summary"&&(this.summarytype=="top"||this.summarytype=="lefttop")){if(this._bodyBand){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}}}if(_e){if(_c){this.currentsubrow=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}else{_h=_e.accessibilityenable;if(!(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5)&&(!this._is_band_focus&&(_h||(_e._isBody&&this.rowcount<=0)))){if(_b){this.currentcell=this.currentsubrow=this.currentcol=0;}this._moveToAccessibilityBand(false);}else{if(_f=="grid"&&_b&&!this.accessibilityenable){this._first_focus=true;}this.currentcell=this.currentsubrow=this.currentcol=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}}}else if(_a=="prev"){if(_f=="grid"){if(_b||_c){if(this._summBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._summBand;this._currentBand="summary";_g=_e._get_rows();if(_g.length){this._currentDSrow=this.currentrow= -2;this.currentsubrow=_e._get_rows()[0]._format_rows.length-1;}}else if(this._bodyBand&&this.body){_e=this._bodyBand;this._currentBand="body";_g=_e._get_rows();if(_g.length){this._currentDSrow=this.currentrow=this.rowcount-1;this.currentsubrow=_g[0]._format_rows.length-1;}}else if(this._headBand){_e=this._headBand;this._currentBand="head";_g=_e._get_rows();if(_g.length){this._currentDSrow=this.currentrow= -1;this.currentsubrow=_g[0]._format_rows.length-1;}}else{_d=false;}}else{_d=false;}}else{if(_f=="summary"){_h=this._summBand.accessibilityenable;if(!this._is_band_focus&&_h){this._moveToAccessibilityBand(false);}else{if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this.currentrow=this._currentDSrow=this.rowcount-1;}else if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;}}}else if(_f=="body"){_h=this._bodyBand.accessibilityenable;if(!this._is_band_focus&&_h){this._hideEditor();this._moveToAccessibilityBand(false);}else{if(this._summBand&&(this.summarytype=="top"||this.summarytype=="lefttop")){this._hideEditor();_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;this.currentsubrow=this._curFormat._summrows.length-1;}else if(this._headBand){this._hideEditor();_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}}}}if(_e){if(_e._isBody&&this.rowcount<=0){this._removeAccessibilityCurrentFocus();_e._setFocus(false);this.currentcol=this._curFormat._cols.length-1;this.currentcell= -1;}else{if(!_c){this.currentcol=this._curFormat._cols.length-1;this.currentcell=this._getAccessibilityLastCellIndex()-1;}this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}}else if(_a=="up"){if(_f=="summary"){_h=this._summBand.accessibilityenable;if(!this._is_band_focus&&_h){this._moveToAccessibilityBand(false);}else{if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=this.rowcount-1;this.currentsubrow=0;}else if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}else{_f="grid";}}}else if(_f=="body"){_h=this._bodyBand.accessibilityenable;if(!this._is_band_focus&&_h){this._hideEditor();this._moveToAccessibilityBand(false);}else{if(this._summBand&&(this.summarytype=="top"||this.summarytype=="lefttop")){this._hideEditor();_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;this.currentsubrow=this._curFormat._summrows.length-1;}else if(this._headBand){this._hideEditor();_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}else{_f="grid";}}}else if(_f=="head"&&this.currentcell<=0){_h=this._headBand.accessibilityenable;if(!this._is_band_focus&&_h){this._moveToAccessibilityBand(false);}else{_f="grid";}}if(_e){this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}else if(_f=="grid"){this._is_band_focus=false;this._currentBand=_f;if(this.accessibilityenable){this._moveToAccessibilityBand(true);}else{_d=this._moveToAccessibilityCell(_a);}}}else if(_a=="down"){if(_f=="grid"){_d=this._setAccessibilityBandFocus("next",true);}else{if(_f=="head"){if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;}}else if(_f=="body"&&this.summarytype!="top"&&this.summarytype!="lefttop"){if(this._summBand){this._hideEditor();_e=this._summBand;this._currentBand="summary";this._currentDSrow=this.currentrow= -2;}else if(this._bodyBand&&this.rowcount<=0){this._hideEditor();this._accept_arrow=false;_d=false;}}else if(_f=="summary"&&(this.summarytype=="top"||this.summarytype=="lefttop")){if(this._bodyBand){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}}if(_e){_h=_e.accessibilityenable;if(!this._is_band_focus&&(_h||(this.rowcount<=0&&_e._isBody))){this._moveToAccessibilityBand(false);}else{this.currentsubrow=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}else if(this.currentcell>=this._getAccessibilityLastCellIndex()-1){this._accept_arrow=false;_d=false;}}}return _d;};_pGrid._getAccessibilityCurrentCell=function(_a,_b){var _c=null;if(_a===undefined||_b===undefined){_a= -1;_b= -1;}else if(_b<0){_b=this._getAccessibilityCellIndex();}if(this._currentBand=="body"){_c=this._getCurrentBodyCell(_a,_b);}else{if(this._currentBand=="head"){_c=this._getCurrentHeadCell(_b);}else{_c=this._getCurrentSummCell(_b);}}return _c;};_pGrid._getAccessibilityLastCellIndex=function(){var _a= -1;if(this._currentBand=="head"&&this._curFormat._headcells){_a=this._curFormat._headcells.length;}else if(this._currentBand=="body"&&this._curFormat._bodycells){_a=this._curFormat._bodycells.length;}else if(this._currentBand=="summary"&&this._curFormat._summcells){_a=this._curFormat._summcells.length;}return _a;};_pGrid._removeAccessibilityCurrentFocus=function(_a){var _b=this._getWindow();if(_a){_b._removeFromCurrentFocusPath(this,true);}else{if(this._currentBand=="body"){_b._removeFromCurrentFocusPath(this._bodyBand,true);}else if(this._currentBand=="head"){_b._removeFromCurrentFocusPath(this._headBand,true);}else if(this._currentBand=="summary"){_b._removeFromCurrentFocusPath(this._summBand,true);}}};_pGrid._moveToAccessibilityBand=function(_a){this._removeAccessibilityCurrentFocus(_a);if(!_a){this._is_band_focus=true;var _b=this._currentBand;if(_b=="head"){this._headBand._setFocus(false);}else if(_b=="body"){this._bodyBand._setFocus(false);}else if(_b=="summary"){this._summBand._setFocus(false);}}else{this._setFocus(false);}};_pGrid._moveToPosAccessibilityCell=function(_a,_b){var _c=false,_d=null;var _e;_a=this._getDataRow(_a);_b=this._getAccessibilityCellIndex(_b);if(this._currentBand=="body"&&this._bodyBand._get_rows().length>0){this._hideEditor();_d=this._getAccessibilityCurrentCell();if(_d){_e=_d._refinfo;if(_e._row!=_a||_e._cellidx!=_b){_d._changeStatus("focused",false);}}this._moveToPosCell(_a,_b);}_d=this._getAccessibilityCurrentCell(_a,_b);if(_d){_e=_d._refinfo;_c=true;_d._showfull();if(this._currentBand!="body"||this.autoenter!="select"||!this._showEditing){if(_d._subComp&&_e._getDisplaytype(_a)!="treeitemcontrol"){_d._subComp._setFocus(false);}else{_d._setFocus(false);}}else{this._showEditor();}this.currentcol=_e._col;}this._is_band_focus=this._is_first_focus=false;return _c;};_pGrid._getAccessibilityCellIndex=function(_a){var _b=null;if(this._currentBand=="body"){_b=this._bodyBand;}else if(this._currentBand=="head"){_b=this._headBand;}else if(this._currentBand=="summary"){_b=this._summBand;}if(_b){var _c=_b._get_row(this._getDataRow(this.currentrow));if(_c){var _d=_c._cells,_e=null;for(var _f=0,_g=_d.length;_f<_g;_f++ ){_e=_d[_f]._refinfo;if(_e._col<=this.currentcol&&this.currentcol<=(_e._col+_e._colspan-1)){if(this.currentsubrow==0){return _d[_f]._cellidx;}else{if(_e._row==this.currentsubrow){return _d[_f]._cellidx;}}}}}}return (_a>=0)?_a:null;};_pGrid._on_useInnerDsCells=function(){this._refreshAll();};_pGrid.blinkCell=function(_a,_b,_c,_d){if(_c===undefined||_c===null||_c===""){return;}if(_d===undefined||_d===null||_d===""){return;}_c= +_c;_d= +_d;if(_c<0||_d<0){return;}if(!this._blinktask){this._blinktask={};}if(!this._blinktasklist){this._blinktasklist={};}var _e=_d* 2;var _f=_c/_e;var _g,_h,_i,_j,_k;var _l=[];var _m=false;_b=nexacro._isString(_b)?_b.split(","):[_b];for(_g=0,_h=_b.length;_g<_h;_g++ ){if(typeof (_b[_g])=="string"){_j=this._getBindTextCellInfo(_b[_g].trim());if(_j[1]){_l=_l.concat(_j[0]);}}else{_l=[this._curFormat._bodycells[_b]];}if(_l.length){_m=true;}}if(_m){var _n=_c===0||_d===0;if(_n){for(_g=0,_h=_l.length;_g<_h;_g++ ){_i=_l[_g];_i._blinked_status[_a]=false;var _o=this._getCurrentBodyCell(_a,_i._cellidx);if(_o){_o._changeUserStatus("blinked",false);}delete this._blinktasklist[_a+"_"+_i._cellidx];}}else{var _p=function(_q){var _a,_o,_r;var _s=true;for(_g in this._blinktasklist){if(this._blinktasklist.hasOwnProperty(_g)){_r=this._blinktasklist[_g];_a=_g.split("_")[0];if(_r.taskid==_q&&_r.cnt>0){_s=false;_r.blinkstatus=!_r.blinkstatus;_r.cellinfo._blinked_status[_a]=_r.blinkstatus;_o=this._getCurrentBodyCell(_a,_r.cellinfo._cellidx);if(_o){_o._changeUserStatus("blinked",_r.blinkstatus);}if((_r.cnt-=1)==0){_s=true;this._blinktasklist[_g]=undefined;delete this._blinktasklist[_g];}}}}if(_s){this._blinktask[_q].destroy();this._blinktask[_q]=undefined;delete this._blinktask[_q];}};_k=new nexacro._CallbackTimer(this,_p,_f);this._blinktask[_k.id]=_k;for(_g=0,_h=_l.length;_g<_h;_g++ ){_i=_l[_g];this._blinktasklist[_a+"_"+_i._cellidx]={"taskid":_k.id,"cellinfo":_i,"cnt":_e,"blinkstatus":false};}_k.start();}}};_pGrid.blinkCellByInterval=function(_a,_b,_c,_d){if(_c===undefined||_c===null||_c===""){return;}if(_d===undefined||_d===null||_d===""){return;}_c= +_c;_d= +_d;if(_c<0||_d<0){return;}if(!this._blinktasklist){this._blinktasklist={};}var _e=500;var _f=_d* 2;var _g,_h,_i,_j;var _k=[];var _l;var _m=false;var _n;_b=nexacro._isString(_b)?_b.split(","):[_b];for(_g=0,_h=_b.length;_g<_h;_g++ ){if(typeof (_b[_g])=="string"){_j=this._getBindTextCellInfo(_b[_g].trim());if(_j[1]){_k=_k.concat(_j[0]);}}else{_k=[this._curFormat._bodycells[_b]];}if(_k.length){_m=true;}}if(_m){var _o=_c===0||_d===0;if(_o){for(_g=0,_h=_k.length;_g<_h;_g++ ){_i=_k[_g];_i._blinked_status[_a]=false;_n=this._getCurrentBodyCell(_a,_i._cellidx);if(_n){_n._changeUserStatus("blinked",false);}delete this._blinktasklist[_a+"_"+_i._cellidx];}}else{var _p=function(_q){var _a,_n,_r;for(_g in this._blinktasklist){if(this._blinktasklist.hasOwnProperty(_g)){_r=this._blinktasklist[_g];_a=_g.split("_")[0];if(_r.taskid==_q&&_r.cnt>0){_r.cnt-- ;_r.blinkstatus=!_r.blinkstatus;_r.cellinfo._blinked_status[_a]=_r.blinkstatus;_n=this._getCurrentBodyCell(_a,_r.cellinfo._cellidx);if(_n){_n._changeUserStatus("blinked",_r.blinkstatus);}if(_r.cnt>0){_l=nexacro._OnceCallbackTimer.callonce(this,_p,_r.cnt%2==0?_r.interval:_e);_r.taskid=_l.id;}else{this._blinktasklist[_g]=undefined;delete this._blinktasklist[_g];}}}}};_l=nexacro._OnceCallbackTimer.callonce(this,_p,_e);for(_g=0,_h=_k.length;_g<_h;_g++ ){_i=_k[_g];this._blinktasklist[_a+"_"+_i._cellidx]={"taskid":_l.id,"cellinfo":_i,"cnt":_f,"interval":_c,"blinkstatus":false};}}}};_pGrid._start_perftime=null;_pGrid._end_perftime=null;_pGrid._startScrollTimeCheck=function(){this._start_perftime=this._fn_CheckTime();};_pGrid._endScrollTimeCheck=function(){this._end_perftime=this._fn_CheckTime();var _a=this._fn_diffTime(this._start_perftime,this._end_perftime,"ss")+"초";this._start_perftime=null;this._end_perftime=null;return _a;};_pGrid._fn_CheckTime=function(){function fn_Right(_c,_d){var _e=String(_c).length;var _f=Number(_e)-Number(_d);var _g=_c.substring(_e,_f);return _g;}var _a=new Date();var _b=fn_Right("0"+_a.getHours(),2);_b+=fn_Right("0"+_a.getMinutes(),2);_b+=fn_Right("0"+_a.getSeconds(),2);_b+=fn_Right("0"+_a.getMilliseconds(),3);return _b;};_pGrid._fn_diffTime=function(_a,_b,_c){_a=""+_a;_b=""+_b;var _d=nexacro.toNumber(_a.substring(0,2));var _e=nexacro.toNumber(_a.substring(2,4));var _f=nexacro.toNumber(_a.substring(4,6));var _g=nexacro.toNumber(_a.substring(6,9));var _h=nexacro.toNumber(_b.substring(0,2));var _i=nexacro.toNumber(_b.substring(2,4));var _j=nexacro.toNumber(_b.substring(4,6));var _k=nexacro.toNumber(_b.substring(6,9));var _l=(_d* 3600)+(_e* 60)+_f+(_g/1000);var _m=(_h* 3600)+(_i* 60)+_j+(_k/1000);if(_c=="HH"){return (Math.floor((_m-_l)/3600));}else if(_c=="mm"){return (Math.floor((_m-_l)/60));}else if(_c=="ss"){return nexacro.round((_m-_l),3);}};delete _pGrid;}