//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(nexacro._Browser!="Runtime"){!function(_a){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=_a();}else if("function"==typeof define&&define.amd){define([],_a);}else{var _b;"undefined"!=typeof window?_b=window:"undefined"!=typeof global?_b=global:"undefined"!=typeof self&&(_b=self);if(_b){_b.SockJS=_a();}}}(function(){var _a,_b,_c;return (function e(_d,_e,_f){function s(_h,_i){if(!_e[_h]){if(!_d[_h]){var _j=typeof require=="function"&&require;if(!_i&&_j){return _j(_h,!0);}if(_g){return _g(_h,!0);}var _k=new Error("Cannot find module '"+_h+"'");throw _k.code="MODULE_NOT_FOUND",_k;}var _l=_e[_h]={exports:{}};_d[_h][0].call(_l.exports,function(_m){var _e=_d[_h][1][_m];return s(_e?_e:_m);},_l,_l.exports,e,_d,_e,_f);}return _e[_h].exports;}var _g=typeof require=="function"&&require;for(var _h=0;_h<_f.length;_h++ ){s(_f[_h]);}return s;})({1:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('./transport-list');_b.exports=_d('./main')(_f);if('_sockjs_onload' in _e){setTimeout(_e._sockjs_onload,1);}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./main":14,"./transport-list":16}],2:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./event');function CloseEvent(){_f.call(this);this.initEvent('close',false,false);this.wasClean=false;this.code=0;this.reason='';}_e(CloseEvent,_f);_b.exports=CloseEvent;},{"./event":4,"inherits":57}],3:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./eventtarget');function EventEmitter(){_f.call(this);}_e(EventEmitter,_f);EventEmitter.prototype.removeAllListeners=function(_g){if(_g){delete this._listeners[_g];}else{this._listeners={};}};EventEmitter.prototype.once=function(_g,_h){var _i=this,_j=false;function g(){_i.removeListener(_g,g);if(!_j){_j=true;_h.apply(this,arguments);}}this.on(_g,g);};EventEmitter.prototype.emit=function(){var _g=arguments[0];var _h=this._listeners[_g];if(!_h){return;}var _i=arguments.length;var _j=new Array(_i-1);for(var _k=1;_k<_i;_k++ ){_j[_k-1]=arguments[_k];}for(var _l=0;_l<_h.length;_l++ ){_h[_l].apply(this,_j);}};EventEmitter.prototype.on=EventEmitter.prototype.addListener=_f.prototype.addEventListener;EventEmitter.prototype.removeListener=_f.prototype.removeEventListener;_b.exports.EventEmitter=EventEmitter;},{"./eventtarget":5,"inherits":57}],4:[function(_d,_b,_c){'use strict';function Event(_e){this.type=_e;}Event.prototype.initEvent=function(_e,_f,_g){this.type=_e;this.bubbles=_f;this.cancelable=_g;this.timeStamp= +new Date();return this;};Event.prototype.stopPropagation=function(){};Event.prototype.preventDefault=function(){};Event.CAPTURING_PHASE=1;Event.AT_TARGET=2;Event.BUBBLING_PHASE=3;_b.exports=Event;},{}],5:[function(_d,_b,_c){'use strict';function EventTarget(){this._listeners={};}EventTarget.prototype.addEventListener=function(_e,_f){if(!(_e in this._listeners)){this._listeners[_e]=[];}var _g=this._listeners[_e];if(_g.indexOf(_f)=== -1){_g=_g.concat([_f]);}this._listeners[_e]=_g;};EventTarget.prototype.removeEventListener=function(_e,_f){var _g=this._listeners[_e];if(!_g){return;}var _h=_g.indexOf(_f);if(_h!== -1){if(_g.length>1){this._listeners[_e]=_g.slice(0,_h).concat(_g.slice(_h+1));}else{delete this._listeners[_e];}return;}};EventTarget.prototype.dispatchEvent=function(){var _e=arguments[0];var _f=_e.type;var _g=arguments.length===1?[_e]:Array.apply(null,arguments);if(this['on'+_f]){this['on'+_f].apply(this,_g);}if(_f in this._listeners){var _h=this._listeners[_f];for(var _i=0;_i<_h.length;_i++ ){_h[_i].apply(this,_g);}}};_b.exports=EventTarget;},{}],6:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./event');function TransportMessageEvent(_g){_f.call(this);this.initEvent('message',false,false);this.data=_g;}_e(TransportMessageEvent,_f);_b.exports=TransportMessageEvent;},{"./event":4,"inherits":57}],7:[function(_d,_b,_c){'use strict';var _e=_d('json3'),_f=_d('./utils/iframe');function FacadeJS(_g){this._transport=_g;_g.on('message',this._transportMessage.bind(this));_g.on('close',this._transportClose.bind(this));}FacadeJS.prototype._transportClose=function(_g,_h){_f.postMessage('c',_e.stringify([_g,_h]));};FacadeJS.prototype._transportMessage=function(_g){_f.postMessage('t',_g);};FacadeJS.prototype._send=function(_g){this._transport.send(_g);};FacadeJS.prototype._close=function(){this._transport.close();this._transport.removeAllListeners();};_b.exports=FacadeJS;},{"./utils/iframe":47,"json3":58}],8:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('./utils/url'),_g=_d('./utils/event'),_h=_d('json3'),_i=_d('./facade'),_j=_d('./info-iframe-receiver'),_k=_d('./utils/iframe'),_l=_d('./location');var _m=function(){};if(_e.env.NODE_ENV!=='production'){_m=_d('debug')('sockjs-client:iframe-bootstrap');}_b.exports=function(_n,_o){var _p={};_o.forEach(function(_r){if(_r.facadeTransport){_p[_r.facadeTransport.transportName]=_r.facadeTransport;}});_p[_j.transportName]=_j;var _q;_n.bootstrap_iframe=function(){var _r;_k.currentWindowId=_l.hash.slice(1);var _s=function(_t){if(_t.source!==parent){return;}if(typeof _q==='undefined'){_q=_t.origin;}if(_t.origin!==_q){return;}var _u;try{_u=_h.parse(_t.data);}catch(ignored){_m('bad json',_t.data);return;}if(_u.windowId!==_k.currentWindowId){return;}switch(_u.type){case 's':var _v;try{_v=_h.parse(_u.data);}catch(ignored){_m('bad json',_u.data);break;}var _w=_v[0];var _x=_v[1];var _y=_v[2];var _z=_v[3];_m(_w,_x,_y,_z);if(_w!==_n.version){throw new Error('Incompatible SockJS! Main site uses:'+' "'+_w+'", the iframe:'+' "'+_n.version+'".');}if(!_f.isOriginEqual(_y,_l.href)||!_f.isOriginEqual(_z,_l.href)){throw new Error('Can\'t connect to different domain from within an '+'iframe. ('+_l.href+', '+_y+', '+_z+')');}_r=new _i(new _p[_x](_y,_z));break;case 'm':_r._send(_u.data);break;case 'c':if(_r){_r._close();}_r=null;break;}};_g.attachEvent('message',_s);_k.postMessage('s');};};}).call(this,{env:{}});},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,"debug":54,"json3":58}],9:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('events').EventEmitter,_g=_d('inherits'),_h=_d('json3'),_i=_d('./utils/object');var _j=function(){};if(_e.env.NODE_ENV!=='production'){_j=_d('debug')('sockjs-client:info-ajax');}function InfoAjax(_k,_l){_f.call(this);var _m=this;var _n= +new Date();this.xo=new _l('GET',_k);this.xo.once('finish',function(_o,_p){var _q,_r;if(_o===200){_r=( +new Date())-_n;if(_p){try{_q=_h.parse(_p);}catch(e){_j('bad json',_p);}}if(!_i.isObject(_q)){_q={};}}_m.emit('finish',_q,_r);_m.removeAllListeners();});}_g(InfoAjax,_f);InfoAjax.prototype.close=function(){this.removeAllListeners();this.xo.close();};_b.exports=InfoAjax;}).call(this,{env:{}});},{"./utils/object":49,"debug":54,"events":3,"inherits":57,"json3":58}],10:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('events').EventEmitter,_g=_d('json3'),_h=_d('./transport/sender/xhr-local'),_i=_d('./info-ajax');function InfoReceiverIframe(_j){var _k=this;_f.call(this);this.ir=new _i(_j,_h);this.ir.once('finish',function(_l,_m){_k.ir=null;_k.emit('message',_g.stringify([_l,_m]));});}_e(InfoReceiverIframe,_f);InfoReceiverIframe.transportName='iframe-info-receiver';InfoReceiverIframe.prototype.close=function(){if(this.ir){this.ir.close();this.ir=null;}this.removeAllListeners();};_b.exports=InfoReceiverIframe;},{"./info-ajax":9,"./transport/sender/xhr-local":37,"events":3,"inherits":57,"json3":58}],11:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('events').EventEmitter,_h=_d('inherits'),_i=_d('json3'),_j=_d('./utils/event'),_k=_d('./transport/iframe'),_l=_d('./info-iframe-receiver');var _m=function(){};if(_e.env.NODE_ENV!=='production'){_m=_d('debug')('sockjs-client:info-iframe');}function InfoIframe(_n,_o){var _p=this;_g.call(this);var _q=function(){var _r=_p.ifr=new _k(_l.transportName,_o,_n);_r.once('message',function(_s){if(_s){var _t;try{_t=_i.parse(_s);}catch(e){_m('bad json',_s);_p.emit('finish');_p.close();return;}var _u=_t[0],_v=_t[1];_p.emit('finish',_u,_v);}_p.close();});_r.once('close',function(){_p.emit('finish');_p.close();});};if(!_f.document.body){_j.attachEvent('load',_q);}else{_q();}}_h(InfoIframe,_g);InfoIframe.enabled=function(){return _k.enabled();};InfoIframe.prototype.close=function(){if(this.ifr){this.ifr.close();}this.removeAllListeners();this.ifr=null;};_b.exports=InfoIframe;}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,"debug":54,"events":3,"inherits":57,"json3":58}],12:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('events').EventEmitter,_g=_d('inherits'),_h=_d('./utils/url'),_i=_d('./transport/sender/xdr'),_j=_d('./transport/sender/xhr-cors'),_k=_d('./transport/sender/xhr-local'),_l=_d('./transport/sender/xhr-fake'),_m=_d('./info-iframe'),_n=_d('./info-ajax');var _o=function(){};if(_e.env.NODE_ENV!=='production'){_o=_d('debug')('sockjs-client:info-receiver');}function InfoReceiver(_p,_q){_o(_p);var _r=this;_f.call(this);setTimeout(function(){_r.doXhr(_p,_q);},0);}_g(InfoReceiver,_f);InfoReceiver._getReceiver=function(_p,_q,_r){if(_r.sameOrigin){return new _n(_q,_k);}if(_j.enabled){return new _n(_q,_j);}if(_i.enabled&&_r.sameScheme){return new _n(_q,_i);}if(_m.enabled()){return new _m(_p,_q);}return new _n(_q,_l);};InfoReceiver.prototype.doXhr=function(_p,_q){var _r=this,_s=_h.addPath(_p,'/info');_o('doXhr',_s);this.xo=InfoReceiver._getReceiver(_p,_s,_q);this.timeoutRef=setTimeout(function(){_o('timeout');_r._cleanup(false);_r.emit('finish');},InfoReceiver.timeout);this.xo.once('finish',function(_t,_u){_o('finish',_t,_u);_r._cleanup(true);_r.emit('finish',_t,_u);});};InfoReceiver.prototype._cleanup=function(_p){_o('_cleanup');clearTimeout(this.timeoutRef);this.timeoutRef=null;if(!_p&&this.xo){this.xo.close();}this.xo=null;};InfoReceiver.prototype.close=function(){_o('close');this.removeAllListeners();this._cleanup(false);};InfoReceiver.timeout=8000;_b.exports=InfoReceiver;}).call(this,{env:{}});},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,"debug":54,"events":3,"inherits":57}],13:[function(_d,_b,_c){(function(_e){'use strict';_b.exports=_e.location||{origin:'http://localhost:80',protocol:'http',host:'localhost',port:80,href:'http://localhost/',hash:''};}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],14:[function(_d,_b,_c){(function(_e,_f){'use strict';_d('./shims');var _g=_d('url-parse'),_h=_d('inherits'),_i=_d('json3'),_j=_d('./utils/random'),_k=_d('./utils/escape'),_l=_d('./utils/url'),_m=_d('./utils/event'),_n=_d('./utils/transport'),_o=_d('./utils/object'),_p=_d('./utils/browser'),_q=_d('./utils/log'),_r=_d('./event/event'),_s=_d('./event/eventtarget'),_t=_d('./location'),_u=_d('./event/close'),_v=_d('./event/trans-message'),_w=_d('./info-receiver');var _x=function(){};if(_e.env.NODE_ENV!=='production'){_x=_d('debug')('sockjs-client:main');}var _y;function SockJS(_z,_aa,_ab){if(!(this instanceof SockJS)){return new SockJS(_z,_aa,_ab);}if(arguments.length<1){throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");}_s.call(this);this.readyState=SockJS.CONNECTING;this.extensions='';this.protocol='';_ab=_ab||{};if(_ab.protocols_whitelist){_q.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.");}this._transportsWhitelist=_ab.transports;this._transportOptions=_ab.transportOptions||{};var _ac=_ab.sessionId||8;if(typeof _ac==='function'){this._generateSessionId=_ac;}else if(typeof _ac==='number'){this._generateSessionId=function(){return _j.string(_ac);};}else{throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');}this._server=_ab.server||_j.numberString(1000);var _ad=new _g(_z);if(!_ad.host||!_ad.protocol){throw new SyntaxError("The URL '"+_z+"' is invalid");}else if(_ad.hash){throw new SyntaxError('The URL must not contain a fragment');}else if(_ad.protocol!=='http:'&&_ad.protocol!=='https:'){throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+_ad.protocol+"' is not allowed.");}var _ae=_ad.protocol==='https:';if(_t.protocol==='https'&&!_ae){throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');}if(!_aa){_aa=[];}else if(!Array.isArray(_aa)){_aa=[_aa];}_aa.sort();var _af=_aa;_af.forEach(function(_ah,_ai){if(!_ah){throw new SyntaxError("The protocols entry '"+_ah+"' is invalid.");}if(_ai<(_af.length-1)&&_ah===_af[_ai+1]){throw new SyntaxError("The protocols entry '"+_ah+"' is duplicated.");}});var _ag=_l.getOrigin(_t.href);this._origin=_ag?_ag.toLowerCase():null;_ad.set('pathname',_ad.pathname.replace(/\/+$/,''));this.url=_ad.href;_x('using url',this.url);this._urlInfo={nullOrigin:!_p.hasDomain(),sameOrigin:_l.isOriginEqual(this.url,_t.href),sameScheme:_l.isSchemeEqual(this.url,_t.href)};this._ir=new _w(this.url,this._urlInfo);this._ir.once('finish',this._receiveInfo.bind(this));}_h(SockJS,_s);function userSetCode(_z){return _z===1000||(_z>=3000&&_z<=4999);}SockJS.prototype.close=function(_z,_aa){if(_z&&!userSetCode(_z)){throw new Error('InvalidAccessError: Invalid code');}if(_aa&&_aa.length>123){throw new SyntaxError('reason argument has an invalid length');}if(this.readyState===SockJS.CLOSING||this.readyState===SockJS.CLOSED){return;}var _ab=true;this._close(_z||1000,_aa||'Normal closure',_ab);};SockJS.prototype.send=function(_z){if(typeof _z!=='string'){_z=''+_z;}if(this.readyState===SockJS.CONNECTING){throw new Error('InvalidStateError: The connection has not been established yet');}if(this.readyState!==SockJS.OPEN){return;}this._transport.send(_k.quote(_z));};SockJS.version=_d('./version');SockJS.CONNECTING=0;SockJS.OPEN=1;SockJS.CLOSING=2;SockJS.CLOSED=3;SockJS.prototype._receiveInfo=function(_z,_aa){_x('_receiveInfo',_aa);this._ir=null;if(!_z){this._close(1002,'Cannot connect to server');return;}this._rto=this.countRTO(_aa);this._transUrl=_z.base_url?_z.base_url:this.url;_z=_o.extend(_z,this._urlInfo);_x('info',_z);var _ab=_y.filterToEnabled(this._transportsWhitelist,_z);this._transports=_ab.main;_x(this._transports.length+' enabled transports');this._connect();};SockJS.prototype._connect=function(){for(var _ad=this._transports.shift();_ad;){_x('attempt',_ad.transportName);if(_ad.needBody){if(!_f.document.body||(typeof _f.document.readyState!=='undefined'&&_f.document.readyState!=='complete'&&_f.document.readyState!=='interactive')){_x('waiting for body');this._transports.unshift(_ad);_m.attachEvent('load',this._connect.bind(this));return;}}var _z=(this._rto* _ad.roundTrips)||5000;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),_z);_x('using timeout',_z);var _aa=_l.addPath(this._transUrl,'/'+this._server+'/'+this._generateSessionId());var _ab=this._transportOptions[_ad.transportName];_x('transport url',_aa);var _ac=new _ad(_aa,this._transUrl,_ab);_ac.on('message',this._transportMessage.bind(this));_ac.once('close',this._transportClose.bind(this));_ac.transportName=_ad.transportName;this._transport=_ac;return;}this._close(2000,'All transports failed',false);};SockJS.prototype._transportTimeout=function(){_x('_transportTimeout');if(this.readyState===SockJS.CONNECTING){this._transportClose(2007,'Transport timed out');}};SockJS.prototype._transportMessage=function(_z){_x('_transportMessage',_z);var _aa=this,_ab=_z.slice(0,1),_ac=_z.slice(1),_ad;switch(_ab){case 'o':this._open();return;case 'h':this.dispatchEvent(new _r('heartbeat'));_x('heartbeat',this.transport);return;}if(_ac){try{_ad=_i.parse(_ac);}catch(e){_x('bad json',_ac);}}if(typeof _ad==='undefined'){_x('empty payload',_ac);return;}switch(_ab){case 'a':if(Array.isArray(_ad)){_ad.forEach(function(_ae){_x('message',_aa.transport,_ae);_aa.dispatchEvent(new _v(_ae));});}break;case 'm':_x('message',this.transport,_ad);this.dispatchEvent(new _v(_ad));break;case 'c':if(Array.isArray(_ad)&&_ad.length===2){this._close(_ad[0],_ad[1],true);}break;}};SockJS.prototype._transportClose=function(_z,_aa){_x('_transportClose',this.transport,_z,_aa);if(this._transport){this._transport.removeAllListeners();this._transport=null;this.transport=null;}if(!userSetCode(_z)&&_z!==2000&&this.readyState===SockJS.CONNECTING){this._connect();return;}this._close(_z,_aa);};SockJS.prototype._open=function(){_x('_open',this._transport.transportName,this.readyState);if(this.readyState===SockJS.CONNECTING){if(this._transportTimeoutId){clearTimeout(this._transportTimeoutId);this._transportTimeoutId=null;}this.readyState=SockJS.OPEN;this.transport=this._transport.transportName;this.dispatchEvent(new _r('open'));_x('connected',this.transport);}else{this._close(1006,'Server lost session');}};SockJS.prototype._close=function(_z,_aa,_ab){_x('_close',this.transport,_z,_aa,_ab,this.readyState);var _ac=false;if(this._ir){_ac=true;this._ir.close();this._ir=null;}if(this._transport){this._transport.close();this._transport=null;this.transport=null;}if(this.readyState===SockJS.CLOSED){throw new Error('InvalidStateError: SockJS has already been closed');}this.readyState=SockJS.CLOSING;setTimeout(function(){this.readyState=SockJS.CLOSED;if(_ac){this.dispatchEvent(new _r('error'));}var _ad=new _u('close');_ad.wasClean=_ab||false;_ad.code=_z||1000;_ad.reason=_aa;this.dispatchEvent(_ad);this.onmessage=this.onclose=this.onerror=null;_x('disconnected');}.bind(this),0);};SockJS.prototype.countRTO=function(_z){if(_z>100){return 4* _z;}return 300+_z;};_b.exports=function(_z){_y=_n(_z);_d('./iframe-bootstrap')(SockJS,_z);return SockJS;};}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,"debug":54,"inherits":57,"json3":58,"url-parse":59}],15:[function(_d,_b,_c){'use strict';var _e=Array.prototype;var _f=Object.prototype;var _g=Function.prototype;var _h=String.prototype;var _i=_e.slice;var _j=_f.toString;var _k=function(_ae){return _f.toString.call(_ae)==='[object Function]';};var _l=function _l(_ae){return _j.call(_ae)==='[object Array]';};var _m=function _m(_ae){return _j.call(_ae)==='[object String]';};var _n=Object.defineProperty&&(function(){try{Object.defineProperty({},'x',{});return true;}catch(e){return false;}}());var _o;if(_n){_o=function(_ae,_af,_ag,_ah){if(!_ah&&(_af in _ae)){return;}Object.defineProperty(_ae,_af,{configurable:true,enumerable:false,writable:true,value:_ag});};}else{_o=function(_ae,_af,_ag,_ah){if(!_ah&&(_af in _ae)){return;}_ae[_af]=_ag;};}var _p=function(_ae,_af,_ag){for(var _ah in _af){if(_f.hasOwnProperty.call(_af,_ah)){_o(_ae,_ah,_af[_ah],_ag);}}};var _q=function(_ae){if(_ae==null){throw new TypeError("can't convert "+_ae+' to object');}return Object(_ae);};function toInteger(_ae){var _af= +_ae;if(_af!==_af){_af=0;}else if(_af!==0&&_af!==(1/0)&&_af!== -(1/0)){_af=(_af>0|| -1)* Math.floor(Math.abs(_af));}return _af;}function ToUint32(_ae){return _ae>>>0;}function Empty(){}_p(_g,{bind:function(_ae){var _af=this;if(!_k(_af)){throw new TypeError('Function.prototype.bind called on incompatible '+_af);}var _ag=_i.call(arguments,1);var _ah=function(){if(this instanceof _ak){var _al=_af.apply(this,_ag.concat(_i.call(arguments)));if(Object(_al)===_al){return _al;}return this;}else{return _af.apply(_ae,_ag.concat(_i.call(arguments)));}};var _ai=Math.max(0,_af.length-_ag.length);var _aj=[];for(var _al=0;_al<_ai;_al++ ){_aj.push('$'+_al);}var _ak=Function('binder','return function ('+_aj.join(',')+'){ return binder.apply(this, arguments); }')(_ah);if(_af.prototype){Empty.prototype=_af.prototype;_ak.prototype=new Empty();Empty.prototype=null;}return _ak;}});_p(Array,{isArray:_l});var _r=Object('a');var _s=_r[0]!=='a'||!(0 in _r);var _t=function properlyBoxed(_ae){var _af=true;var _ag=true;if(_ae){_ae.call('foo',function(_ah,_ai,_aj){if(typeof _aj!=='object'){_af=false;}});_ae.call([1],function(){'use strict';_ag=typeof this==='string';},'x');}return !!_ae&&_af&&_ag;};_p(_e,{forEach:function(_ae){var _af=_q(this),_ag=_s&&_m(this)?this.split(''):_af,_ah=arguments[1],_ai= -1,_aj=_ag.length>>>0;if(!_k(_ae)){throw new TypeError();}while( ++_ai<_aj){if(_ai in _ag){_ae.call(_ah,_ag[_ai],_ai,_af);}}}},!_t(_e.forEach));var _u=Array.prototype.indexOf&&[0,1].indexOf(1,2)!== -1;_p(_e,{indexOf:function(_ae){var _af=_s&&_m(this)?this.split(''):_q(this),_ag=_af.length>>>0;if(!_ag){return  -1;}var _ah=0;if(arguments.length>1){_ah=toInteger(arguments[1]);}_ah=_ah>=0?_ah:Math.max(0,_ag+_ah);for(;_ah<_ag;_ah++ ){if(_ah in _af&&_af[_ah]===_ae){return _ah;}}return  -1;}},_u);var _v=_h.split;if('ab'.split(/(?:ab)*/).length!==2||'.'.split(/(.?)(.?)/).length!==4||'tesst'.split(/(s)*/)[1]==='t'||'test'.split(/(?:)/, -1).length!==4||''.split(/.?/).length||'.'.split(/()()/).length>1){(function(){var _ae=/()??/.exec('')[1]===void 0;_h.split=function(_af,_ag){var _ah=this;if(_af===void 0&&_ag===0){return [];}if(_j.call(_af)!=='[object RegExp]'){return _v.call(this,_af,_ag);}var _ai=[],_aj=(_af.ignoreCase?'i':'')+(_af.multiline?'m':'')+(_af.extended?'x':'')+(_af.sticky?'y':''),_ak=0,_al,_am,_an,_ao;_af=new RegExp(_af.source,_aj+'g');_ah+='';if(!_ae){_al=new RegExp('^'+_af.source+'$(?!\\s)',_aj);}_ag=_ag===void 0? -1>>>0:ToUint32(_ag);while(_am=_af.exec(_ah)){_an=_am.index+_am[0].length;if(_an>_ak){_ai.push(_ah.slice(_ak,_am.index));if(!_ae&&_am.length>1){_am[0].replace(_al,function(){for(var _ap=1;_ap<arguments.length-2;_ap++ ){if(arguments[_ap]===void 0){_am[_ap]=void 0;}}});}if(_am.length>1&&_am.index<_ah.length){_e.push.apply(_ai,_am.slice(1));}_ao=_am[0].length;_ak=_an;if(_ai.length>=_ag){break;}}if(_af.lastIndex===_am.index){_af.lastIndex++ ;}}if(_ak===_ah.length){if(_ao||!_af.test('')){_ai.push('');}}else{_ai.push(_ah.slice(_ak));}return _ai.length>_ag?_ai.slice(0,_ag):_ai;};}());}else if('0'.split(void 0,0).length){_h.split=function split(_ae,_af){if(_ae===void 0&&_af===0){return [];}return _v.call(this,_ae,_af);};}var _w='\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003'+'\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028'+'\u2029\uFEFF';var _x='\u200b';var _y='['+_w+']';var _z=new RegExp('^'+_y+_y+'*');var _aa=new RegExp(_y+_y+'*$');var _ab=_h.trim&&(_w.trim()||!_x.trim());_p(_h,{trim:function(){if(this===void 0||this===null){throw new TypeError("can't convert "+this+' to object');}return String(this).replace(_z,'').replace(_aa,'');}},_ab);var _ac=_h.substr;var _ad=''.substr&&'0b'.substr( -1)!=='b';_p(_h,{substr:function(_ae,_af){return _ac.call(this,_ae<0?((_ae=this.length+_ae)<0?0:_ae):_ae,_af);}},_ad);},{}],16:[function(_d,_b,_c){'use strict';_b.exports=[_d('./transport/websocket'),_d('./transport/xhr-streaming'),_d('./transport/xdr-streaming'),_d('./transport/eventsource'),_d('./transport/lib/iframe-wrap')(_d('./transport/eventsource')),_d('./transport/htmlfile'),_d('./transport/lib/iframe-wrap')(_d('./transport/htmlfile')),_d('./transport/xhr-polling'),_d('./transport/xdr-polling'),_d('./transport/lib/iframe-wrap')(_d('./transport/xhr-polling')),_d('./transport/jsonp-polling')];},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('events').EventEmitter,_h=_d('inherits'),_i=_d('../../utils/event'),_j=_d('../../utils/url'),_k=_f.XMLHttpRequest;var _l=function(){};if(_e.env.NODE_ENV!=='production'){_l=_d('debug')('sockjs-client:browser:xhr');}function AbstractXHRObject(_o,_p,_q,_r){_l(_o,_p);var _s=this;_g.call(this);setTimeout(function(){_s._start(_o,_p,_q,_r);},0);}_h(AbstractXHRObject,_g);AbstractXHRObject.prototype._start=function(_o,_p,_q,_r){var _s=this;try{this.xhr=new _k();}catch(x){}if(!this.xhr){_l('no xhr');this.emit('finish',0,'no xhr support');this._cleanup();return;}_p=_j.addQuery(_p,'t='+( +new Date()));this.unloadRef=_i.unloadAdd(function(){_l('unload cleanup');_s._cleanup(true);});try{this.xhr.open(_o,_p,true);if(this.timeout&&'timeout' in this.xhr){this.xhr.timeout=this.timeout;this.xhr.ontimeout=function(){_l('xhr timeout');_s.emit('finish',0,'');_s._cleanup(false);};}}catch(e){_l('exception',e);this.emit('finish',0,'');this._cleanup(false);return;}if((!_r||!_r.noCredentials)&&AbstractXHRObject.supportsCORS){_l('withCredentials');this.xhr.withCredentials='true';}if(_r&&_r.headers){for(var _t in _r.headers){this.xhr.setRequestHeader(_t,_r.headers[_t]);}}this.xhr.onreadystatechange=function(){if(_s.xhr){var _u=_s.xhr;var _v,_w;_l('readyState',_u.readyState);switch(_u.readyState){case 3:try{_w=_u.status;_v=_u.responseText;}catch(e){}_l('status',_w);if(_w===1223){_w=204;}if(_w===200&&_v&&_v.length>0){_l('chunk');_s.emit('chunk',_w,_v);}break;case 4:_w=_u.status;_l('status',_w);if(_w===1223){_w=204;}if(_w===12005||_w===12029){_w=0;}_l('finish',_w,_u.responseText);_s.emit('finish',_w,_u.responseText);_s._cleanup(false);break;}}};try{_s.xhr.send(_q);}catch(e){_s.emit('finish',0,'');_s._cleanup(false);}};AbstractXHRObject.prototype._cleanup=function(_o){_l('cleanup');if(!this.xhr){return;}this.removeAllListeners();_i.unloadDel(this.unloadRef);this.xhr.onreadystatechange=function(){};if(this.xhr.ontimeout){this.xhr.ontimeout=null;}if(_o){try{this.xhr.abort();}catch(x){}}this.unloadRef=this.xhr=null;};AbstractXHRObject.prototype.close=function(){_l('close');this._cleanup(true);};AbstractXHRObject.enabled=!!_k;var _m=['Active'].concat('Object').join('X');if(!AbstractXHRObject.enabled&&(_m in _f)){_l('overriding xmlhttprequest');_k=function(){try{return new _f[_m]('Microsoft.XMLHTTP');}catch(e){return null;}};AbstractXHRObject.enabled=!!new _k();}var _n=false;try{_n='withCredentials' in new _k();}catch(ignored){}AbstractXHRObject.supportsCORS=_n;_b.exports=AbstractXHRObject;}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/event":46,"../../utils/url":52,"debug":54,"events":3,"inherits":57}],18:[function(_d,_b,_c){(function(_e){_b.exports=_e.EventSource;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],19:[function(_d,_b,_c){(function(_e){'use strict';var _f=_e.WebSocket||_e.MozWebSocket;if(_f){_b.exports=function WebSocketBrowserDriver(_g){return new _f(_g);};}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],20:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./lib/ajax-based'),_g=_d('./receiver/eventsource'),_h=_d('./sender/xhr-cors'),_i=_d('eventsource');function EventSourceTransport(_j){if(!EventSourceTransport.enabled()){throw new Error('Transport created when disabled');}_f.call(this,_j,'/eventsource',_g,_h);}_e(EventSourceTransport,_f);EventSourceTransport.enabled=function(){return !!_i;};EventSourceTransport.transportName='eventsource';EventSourceTransport.roundTrips=2;_b.exports=EventSourceTransport;},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,"eventsource":18,"inherits":57}],21:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./receiver/htmlfile'),_g=_d('./sender/xhr-local'),_h=_d('./lib/ajax-based');function HtmlFileTransport(_i){if(!_f.enabled){throw new Error('Transport created when disabled');}_h.call(this,_i,'/htmlfile',_f,_g);}_e(HtmlFileTransport,_h);HtmlFileTransport.enabled=function(_i){return _f.enabled&&_i.sameOrigin;};HtmlFileTransport.transportName='htmlfile';HtmlFileTransport.roundTrips=2;_b.exports=HtmlFileTransport;},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,"inherits":57}],22:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('json3'),_h=_d('events').EventEmitter,_i=_d('../version'),_j=_d('../utils/url'),_k=_d('../utils/iframe'),_l=_d('../utils/event'),_m=_d('../utils/random');var _n=function(){};if(_e.env.NODE_ENV!=='production'){_n=_d('debug')('sockjs-client:transport:iframe');}function IframeTransport(_o,_p,_q){if(!IframeTransport.enabled()){throw new Error('Transport created when disabled');}_h.call(this);var _r=this;this.origin=_j.getOrigin(_q);this.baseUrl=_q;this.transUrl=_p;this.transport=_o;this.windowId=_m.string(8);var _s=_j.addPath(_q,'/iframe.html')+'#'+this.windowId;_n(_o,_p,_s);this.iframeObj=_k.createIframe(_s,function(_t){_n('err callback');_r.emit('close',1006,'Unable to load an iframe ('+_t+')');_r.close();});this.onmessageCallback=this._message.bind(this);_l.attachEvent('message',this.onmessageCallback);}_f(IframeTransport,_h);IframeTransport.prototype.close=function(){_n('close');this.removeAllListeners();if(this.iframeObj){_l.detachEvent('message',this.onmessageCallback);try{this.postMessage('c');}catch(x){}this.iframeObj.cleanup();this.iframeObj=null;this.onmessageCallback=this.iframeObj=null;}};IframeTransport.prototype._message=function(_o){_n('message',_o.data);if(!_j.isOriginEqual(_o.origin,this.origin)){_n('not same origin',_o.origin,this.origin);return;}var _p;try{_p=_g.parse(_o.data);}catch(ignored){_n('bad json',_o.data);return;}if(_p.windowId!==this.windowId){_n('mismatched window id',_p.windowId,this.windowId);return;}switch(_p.type){case 's':this.iframeObj.loaded();this.postMessage('s',_g.stringify([_i,this.transport,this.transUrl,this.baseUrl]));break;case 't':this.emit('message',_p.data);break;case 'c':var _q;try{_q=_g.parse(_p.data);}catch(ignored){_n('bad json',_p.data);return;}this.emit('close',_q[0],_q[1]);this.close();break;}};IframeTransport.prototype.postMessage=function(_o,_p){_n('postMessage',_o,_p);this.iframeObj.post(_g.stringify({windowId:this.windowId,type:_o,data:_p||''}),this.origin);};IframeTransport.prototype.send=function(_o){_n('send',_o);this.postMessage('m',_o);};IframeTransport.enabled=function(){return _k.iframeEnabled;};IframeTransport.transportName='iframe';IframeTransport.roundTrips=2;_b.exports=IframeTransport;}).call(this,{env:{}});},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,"debug":54,"events":3,"inherits":57,"json3":58}],23:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('./lib/sender-receiver'),_h=_d('./receiver/jsonp'),_i=_d('./sender/jsonp');function JsonPTransport(_j){if(!JsonPTransport.enabled()){throw new Error('Transport created when disabled');}_g.call(this,_j,'/jsonp',_i,_h);}_f(JsonPTransport,_g);JsonPTransport.enabled=function(){return !!_e.document;};JsonPTransport.transportName='jsonp-polling';JsonPTransport.roundTrips=1;JsonPTransport.needBody=true;_b.exports=JsonPTransport;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,"inherits":57}],24:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('../../utils/url'),_h=_d('./sender-receiver');var _i=function(){};if(_e.env.NODE_ENV!=='production'){_i=_d('debug')('sockjs-client:ajax-based');}function createAjaxSender(_j){return function(_k,_l,_m){_i('create ajax sender',_k,_l);var _n={};if(typeof _l==='string'){_n.headers={'Content-type':'text/plain'};}var _o=_g.addPath(_k,'/xhr_send');var _p=new _j('POST',_o,_l,_n);_p.once('finish',function(_q){_i('finish',_q);_p=null;if(_q!==200&&_q!==204){return _m(new Error('http status '+_q));}_m();});return function(){_i('abort');_p.close();_p=null;var _q=new Error('Aborted');_q.code=1000;_m(_q);};};}function AjaxBasedTransport(_j,_k,_l,_m){_h.call(this,_j,_k,createAjaxSender(_m),_l,_m);}_f(AjaxBasedTransport,_h);_b.exports=AjaxBasedTransport;}).call(this,{env:{}});},{"../../utils/url":52,"./sender-receiver":28,"debug":54,"inherits":57}],25:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('events').EventEmitter;var _h=function(){};if(_e.env.NODE_ENV!=='production'){_h=_d('debug')('sockjs-client:buffered-sender');}function BufferedSender(_i,_j){_h(_i);_g.call(this);this.sendBuffer=[];this.sender=_j;this.url=_i;}_f(BufferedSender,_g);BufferedSender.prototype.send=function(_i){_h('send',_i);this.sendBuffer.push(_i);if(!this.sendStop){this.sendSchedule();}};BufferedSender.prototype.sendScheduleWait=function(){_h('sendScheduleWait');var _i=this;var _j;this.sendStop=function(){_h('sendStop');_i.sendStop=null;clearTimeout(_j);};_j=setTimeout(function(){_h('timeout');_i.sendStop=null;_i.sendSchedule();},25);};BufferedSender.prototype.sendSchedule=function(){_h('sendSchedule',this.sendBuffer.length);var _i=this;if(this.sendBuffer.length>0){var _j='['+this.sendBuffer.join(',')+']';this.sendStop=this.sender(this.url,_j,function(_k){_i.sendStop=null;if(_k){_h('error',_k);_i.emit('close',_k.code||1006,'Sending error: '+_k);_i._cleanup();}else{_i.sendScheduleWait();}});this.sendBuffer=[];}};BufferedSender.prototype._cleanup=function(){_h('_cleanup');this.removeAllListeners();};BufferedSender.prototype.stop=function(){_h('stop');this._cleanup();if(this.sendStop){this.sendStop();this.sendStop=null;}};_b.exports=BufferedSender;}).call(this,{env:{}});},{"debug":54,"events":3,"inherits":57}],26:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('../iframe'),_h=_d('../../utils/object');_b.exports=function(_i){function IframeWrapTransport(_j,_k){_g.call(this,_i.transportName,_j,_k);}_f(IframeWrapTransport,_g);IframeWrapTransport.enabled=function(_j,_k){if(!_e.document){return false;}var _l=_h.extend({},_k);_l.sameOrigin=true;return _i.enabled(_l)&&_g.enabled();};IframeWrapTransport.transportName='iframe-'+_i.transportName;IframeWrapTransport.needBody=true;IframeWrapTransport.roundTrips=_g.roundTrips+_i.roundTrips-1;IframeWrapTransport.facadeTransport=_i;return IframeWrapTransport;};}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/object":49,"../iframe":22,"inherits":57}],27:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('events').EventEmitter;var _h=function(){};if(_e.env.NODE_ENV!=='production'){_h=_d('debug')('sockjs-client:polling');}function Polling(_i,_j,_k){_h(_j);_g.call(this);this.Receiver=_i;this.receiveUrl=_j;this.AjaxObject=_k;this._scheduleReceiver();}_f(Polling,_g);Polling.prototype._scheduleReceiver=function(){_h('_scheduleReceiver');var _i=this;var _j=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);_j.on('message',function(_k){_h('message',_k);_i.emit('message',_k);});_j.once('close',function(_k,_l){_h('close',_k,_l,_i.pollIsClosing);_i.poll=_j=null;if(!_i.pollIsClosing){if(_l==='network'){_i._scheduleReceiver();}else{_i.emit('close',_k||1006,_l);_i.removeAllListeners();}}});};Polling.prototype.abort=function(){_h('abort');this.removeAllListeners();this.pollIsClosing=true;if(this.poll){this.poll.abort();}};_b.exports=Polling;}).call(this,{env:{}});},{"debug":54,"events":3,"inherits":57}],28:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('../../utils/url'),_h=_d('./buffered-sender'),_i=_d('./polling');var _j=function(){};if(_e.env.NODE_ENV!=='production'){_j=_d('debug')('sockjs-client:sender-receiver');}function SenderReceiver(_k,_l,_m,_n,_o){var _p=_g.addPath(_k,_l);_j(_p);var _q=this;_h.call(this,_k,_m);this.poll=new _i(_n,_p,_o);this.poll.on('message',function(_r){_j('poll message',_r);_q.emit('message',_r);});this.poll.once('close',function(_r,_s){_j('poll close',_r,_s);_q.poll=null;_q.emit('close',_r,_s);_q.close();});}_f(SenderReceiver,_h);SenderReceiver.prototype.close=function(){_j('close');this.removeAllListeners();if(this.poll){this.poll.abort();this.poll=null;}this.stop();};_b.exports=SenderReceiver;}).call(this,{env:{}});},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,"debug":54,"inherits":57}],29:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('events').EventEmitter,_h=_d('eventsource');var _i=function(){};if(_e.env.NODE_ENV!=='production'){_i=_d('debug')('sockjs-client:receiver:eventsource');}function EventSourceReceiver(_j){_i(_j);_g.call(this);var _k=this;var _l=this.es=new _h(_j);_l.onmessage=function(_m){_i('message',_m.data);_k.emit('message',decodeURI(_m.data));};_l.onerror=function(_m){_i('error',_l.readyState,_m);var _n=(_l.readyState!==2?'network':'permanent');_k._cleanup();_k._close(_n);};}_f(EventSourceReceiver,_g);EventSourceReceiver.prototype.abort=function(){_i('abort');this._cleanup();this._close('user');};EventSourceReceiver.prototype._cleanup=function(){_i('cleanup');var _j=this.es;if(_j){_j.onmessage=_j.onerror=null;_j.close();this.es=null;}};EventSourceReceiver.prototype._close=function(_j){_i('close',_j);var _k=this;setTimeout(function(){_k.emit('close',null,_j);_k.removeAllListeners();},200);};_b.exports=EventSourceReceiver;}).call(this,{env:{}});},{"debug":54,"events":3,"eventsource":18,"inherits":57}],30:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('inherits'),_h=_d('../../utils/iframe'),_i=_d('../../utils/url'),_j=_d('events').EventEmitter,_k=_d('../../utils/random');var _l=function(){};if(_e.env.NODE_ENV!=='production'){_l=_d('debug')('sockjs-client:receiver:htmlfile');}function HtmlfileReceiver(_n){_l(_n);_j.call(this);var _o=this;_h.polluteGlobalNamespace();this.id='a'+_k.string(6);_n=_i.addQuery(_n,'c='+decodeURIComponent(_h.WPrefix+'.'+this.id));_l('using htmlfile',HtmlfileReceiver.htmlfileEnabled);var _p=HtmlfileReceiver.htmlfileEnabled?_h.createHtmlfile:_h.createIframe;_f[_h.WPrefix][this.id]={start:function(){_l('start');_o.iframeObj.loaded();},message:function(_q){_l('message',_q);_o.emit('message',_q);},stop:function(){_l('stop');_o._cleanup();_o._close('network');}};this.iframeObj=_p(_n,function(){_l('callback');_o._cleanup();_o._close('permanent');});}_g(HtmlfileReceiver,_j);HtmlfileReceiver.prototype.abort=function(){_l('abort');this._cleanup();this._close('user');};HtmlfileReceiver.prototype._cleanup=function(){_l('_cleanup');if(this.iframeObj){this.iframeObj.cleanup();this.iframeObj=null;}delete _f[_h.WPrefix][this.id];};HtmlfileReceiver.prototype._close=function(_n){_l('_close',_n);this.emit('close',null,_n);this.removeAllListeners();};HtmlfileReceiver.htmlfileEnabled=false;var _m=['Active'].concat('Object').join('X');if(_m in _f){try{HtmlfileReceiver.htmlfileEnabled=!!new _f[_m]('htmlfile');}catch(x){}}HtmlfileReceiver.enabled=HtmlfileReceiver.htmlfileEnabled||_h.iframeEnabled;_b.exports=HtmlfileReceiver;}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":54,"events":3,"inherits":57}],31:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('../../utils/iframe'),_h=_d('../../utils/random'),_i=_d('../../utils/browser'),_j=_d('../../utils/url'),_k=_d('inherits'),_l=_d('events').EventEmitter;var _m=function(){};if(_e.env.NODE_ENV!=='production'){_m=_d('debug')('sockjs-client:receiver:jsonp');}function JsonpReceiver(_n){_m(_n);var _o=this;_l.call(this);_g.polluteGlobalNamespace();this.id='a'+_h.string(6);var _p=_j.addQuery(_n,'c='+encodeURIComponent(_g.WPrefix+'.'+this.id));_f[_g.WPrefix][this.id]=this._callback.bind(this);this._createScript(_p);this.timeoutId=setTimeout(function(){_m('timeout');_o._abort(new Error('JSONP script loaded abnormally (timeout)'));},JsonpReceiver.timeout);}_k(JsonpReceiver,_l);JsonpReceiver.prototype.abort=function(){_m('abort');if(_f[_g.WPrefix][this.id]){var _n=new Error('JSONP user aborted read');_n.code=1000;this._abort(_n);}};JsonpReceiver.timeout=35000;JsonpReceiver.scriptErrorTimeout=1000;JsonpReceiver.prototype._callback=function(_n){_m('_callback',_n);this._cleanup();if(this.aborting){return;}if(_n){_m('message',_n);this.emit('message',_n);}this.emit('close',null,'network');this.removeAllListeners();};JsonpReceiver.prototype._abort=function(_n){_m('_abort',_n);this._cleanup();this.aborting=true;this.emit('close',_n.code,_n.message);this.removeAllListeners();};JsonpReceiver.prototype._cleanup=function(){_m('_cleanup');clearTimeout(this.timeoutId);if(this.script2){this.script2.parentNode.removeChild(this.script2);this.script2=null;}if(this.script){var _n=this.script;_n.parentNode.removeChild(_n);_n.onreadystatechange=_n.onerror=_n.onload=_n.onclick=null;this.script=null;}delete _f[_g.WPrefix][this.id];};JsonpReceiver.prototype._scriptError=function(){_m('_scriptError');var _n=this;if(this.errorTimer){return;}this.errorTimer=setTimeout(function(){if(!_n.loadedOkay){_n._abort(new Error('JSONP script loaded abnormally (onerror)'));}},JsonpReceiver.scriptErrorTimeout);};JsonpReceiver.prototype._createScript=function(_n){_m('_createScript',_n);var _o=this;var _p=this.script=_f.document.createElement('script');var _q;_p.id='a'+_h.string(8);_p.src=_n;_p.type='text/javascript';_p.charset='UTF-8';_p.onerror=this._scriptError.bind(this);_p.onload=function(){_m('onload');_o._abort(new Error('JSONP script loaded abnormally (onload)'));};_p.onreadystatechange=function(){_m('onreadystatechange',_p.readyState);if(/loaded|closed/.test(_p.readyState)){if(_p&&_p.htmlFor&&_p.onclick){_o.loadedOkay=true;try{_p.onclick();}catch(x){}}if(_p){_o._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));}}};if(typeof _p.async==='undefined'&&_f.document.attachEvent){if(!_i.isOpera()){try{_p.htmlFor=_p.id;_p.event='onclick';}catch(x){}_p.async=true;}else{_q=this.script2=_f.document.createElement('script');_q.text="try{var a = document.getElementById('"+_p.id+"'); if(a)a.onerror();}catch(x){};";_p.async=_q.async=false;}}if(typeof _p.async!=='undefined'){_p.async=true;}var _r=_f.document.getElementsByTagName('head')[0];_r.insertBefore(_p,_r.firstChild);if(_q){_r.insertBefore(_q,_r.firstChild);}};_b.exports=JsonpReceiver;}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":54,"events":3,"inherits":57}],32:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('events').EventEmitter;var _h=function(){};if(_e.env.NODE_ENV!=='production'){_h=_d('debug')('sockjs-client:receiver:xhr');}function XhrReceiver(_i,_j){_h(_i);_g.call(this);var _k=this;this.bufferPosition=0;this.xo=new _j('POST',_i,null);this.xo.on('chunk',this._chunkHandler.bind(this));this.xo.once('finish',function(_l,_m){_h('finish',_l,_m);_k._chunkHandler(_l,_m);_k.xo=null;var _n=_l===200?'network':'permanent';_h('close',_n);_k.emit('close',null,_n);_k._cleanup();});}_f(XhrReceiver,_g);XhrReceiver.prototype._chunkHandler=function(_i,_j){_h('_chunkHandler',_i);if(_i!==200||!_j){return;}for(var _m= -1;;this.bufferPosition+=_m+1){var _k=_j.slice(this.bufferPosition);_m=_k.indexOf('\n');if(_m=== -1){break;}var _l=_k.slice(0,_m);if(_l){_h('message',_l);this.emit('message',_l);}}};XhrReceiver.prototype._cleanup=function(){_h('_cleanup');this.removeAllListeners();};XhrReceiver.prototype.abort=function(){_h('abort');if(this.xo){this.xo.close();_h('close');this.emit('close',null,'user');this.xo=null;}this._cleanup();};_b.exports=XhrReceiver;}).call(this,{env:{}});},{"debug":54,"events":3,"inherits":57}],33:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('../../utils/random'),_h=_d('../../utils/url');var _i=function(){};if(_e.env.NODE_ENV!=='production'){_i=_d('debug')('sockjs-client:sender:jsonp');}var _j,_k;function createIframe(_l){_i('createIframe',_l);try{return _f.document.createElement('<iframe name="'+_l+'">');}catch(x){var _m=_f.document.createElement('iframe');_m.name=_l;return _m;}}function createForm(){_i('createForm');_j=_f.document.createElement('form');_j.style.display='none';_j.style.position='absolute';_j.method='POST';_j.enctype='application/x-www-form-urlencoded';_j.acceptCharset='UTF-8';_k=_f.document.createElement('textarea');_k.name='d';_j.appendChild(_k);_f.document.body.appendChild(_j);}_b.exports=function(_l,_m,_n){_i(_l,_m);if(!_j){createForm();}var _o='a'+_g.string(8);_j.target=_o;_j.action=_h.addQuery(_h.addPath(_l,'/jsonp_send'),'i='+_o);var _p=createIframe(_o);_p.id=_o;_p.style.display='none';_j.appendChild(_p);try{_k.value=_m;}catch(e){}_j.submit();var _q=function(_r){_i('completed',_o,_r);if(!_p.onerror){return;}_p.onreadystatechange=_p.onerror=_p.onload=null;setTimeout(function(){_i('cleaning up',_o);_p.parentNode.removeChild(_p);_p=null;},500);_k.value='';_n(_r);};_p.onerror=function(){_i('onerror',_o);_q();};_p.onload=function(){_i('onload',_o);_q();};_p.onreadystatechange=function(_r){_i('onreadystatechange',_o,_p.readyState,_r);if(_p.readyState==='complete'){_q();}};return function(){_i('aborted',_o);_q(new Error('Aborted'));};};}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/random":50,"../../utils/url":52,"debug":54}],34:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('events').EventEmitter,_h=_d('inherits'),_i=_d('../../utils/event'),_j=_d('../../utils/browser'),_k=_d('../../utils/url');var _l=function(){};if(_e.env.NODE_ENV!=='production'){_l=_d('debug')('sockjs-client:sender:xdr');}function XDRObject(_m,_n,_o){_l(_m,_n);var _p=this;_g.call(this);setTimeout(function(){_p._start(_m,_n,_o);},0);}_h(XDRObject,_g);XDRObject.prototype._start=function(_m,_n,_o){_l('_start');var _p=this;var _q=new _f.XDomainRequest();_n=_k.addQuery(_n,'t='+( +new Date()));_q.onerror=function(){_l('onerror');_p._error();};_q.ontimeout=function(){_l('ontimeout');_p._error();};_q.onprogress=function(){_l('progress',_q.responseText);_p.emit('chunk',200,_q.responseText);};_q.onload=function(){_l('load');_p.emit('finish',200,_q.responseText);_p._cleanup(false);};this.xdr=_q;this.unloadRef=_i.unloadAdd(function(){_p._cleanup(true);});try{this.xdr.open(_m,_n);if(this.timeout){this.xdr.timeout=this.timeout;}this.xdr.send(_o);}catch(x){this._error();}};XDRObject.prototype._error=function(){this.emit('finish',0,'');this._cleanup(false);};XDRObject.prototype._cleanup=function(_m){_l('cleanup',_m);if(!this.xdr){return;}this.removeAllListeners();_i.unloadDel(this.unloadRef);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(_m){try{this.xdr.abort();}catch(x){}}this.unloadRef=this.xdr=null;};XDRObject.prototype.close=function(){_l('close');this._cleanup(true);};XDRObject.enabled=!!(_f.XDomainRequest&&_j.hasDomain());_b.exports=XDRObject;}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,"debug":54,"events":3,"inherits":57}],35:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('../driver/xhr');function XHRCorsObject(_g,_h,_i,_j){_f.call(this,_g,_h,_i,_j);}_e(XHRCorsObject,_f);XHRCorsObject.enabled=_f.enabled&&_f.supportsCORS;_b.exports=XHRCorsObject;},{"../driver/xhr":17,"inherits":57}],36:[function(_d,_b,_c){'use strict';var _e=_d('events').EventEmitter,_f=_d('inherits');function XHRFake(){var _g=this;_e.call(this);this.to=setTimeout(function(){_g.emit('finish',200,'{}');},XHRFake.timeout);}_f(XHRFake,_e);XHRFake.prototype.close=function(){clearTimeout(this.to);};XHRFake.timeout=2000;_b.exports=XHRFake;},{"events":3,"inherits":57}],37:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('../driver/xhr');function XHRLocalObject(_g,_h,_i){_f.call(this,_g,_h,_i,{noCredentials:true});}_e(XHRLocalObject,_f);XHRLocalObject.enabled=_f.enabled;_b.exports=XHRLocalObject;},{"../driver/xhr":17,"inherits":57}],38:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('../utils/event'),_g=_d('../utils/url'),_h=_d('inherits'),_i=_d('events').EventEmitter,_j=_d('./driver/websocket');var _k=function(){};if(_e.env.NODE_ENV!=='production'){_k=_d('debug')('sockjs-client:websocket');}function WebSocketTransport(_l,_m,_n){if(!WebSocketTransport.enabled()){throw new Error('Transport created when disabled');}_i.call(this);_k('constructor',_l);var _o=this;var _p=_g.addPath(_l,'/websocket');if(_p.slice(0,5)==='https'){_p='wss'+_p.slice(5);}else{_p='ws'+_p.slice(4);}this.url=_p;this.ws=new _j(this.url,[],_n);this.ws.onmessage=function(_q){_k('message event',_q.data);_o.emit('message',_q.data);};this.unloadRef=_f.unloadAdd(function(){_k('unload');_o.ws.close();});this.ws.onclose=function(_q){_k('close event',_q.code,_q.reason);_o.emit('close',_q.code,_q.reason);_o._cleanup();};this.ws.onerror=function(_q){_k('error event',_q);_o.emit('close',1006,'WebSocket connection broken');_o._cleanup();};}_h(WebSocketTransport,_i);WebSocketTransport.prototype.send=function(_l){var _m='['+_l+']';_k('send',_m);this.ws.send(_m);};WebSocketTransport.prototype.close=function(){_k('close');if(this.ws){this.ws.close();}this._cleanup();};WebSocketTransport.prototype._cleanup=function(){_k('_cleanup');var _l=this.ws;if(_l){_l.onmessage=_l.onclose=_l.onerror=null;}_f.unloadDel(this.unloadRef);this.unloadRef=this.ws=null;this.removeAllListeners();};WebSocketTransport.enabled=function(){_k('enabled');return !!_j;};WebSocketTransport.transportName='websocket';WebSocketTransport.roundTrips=2;_b.exports=WebSocketTransport;}).call(this,{env:{}});},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,"debug":54,"events":3,"inherits":57}],39:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./lib/ajax-based'),_g=_d('./xdr-streaming'),_h=_d('./receiver/xhr'),_i=_d('./sender/xdr');function XdrPollingTransport(_j){if(!_i.enabled){throw new Error('Transport created when disabled');}_f.call(this,_j,'/xhr',_h,_i);}_e(XdrPollingTransport,_f);XdrPollingTransport.enabled=_g.enabled;XdrPollingTransport.transportName='xdr-polling';XdrPollingTransport.roundTrips=2;_b.exports=XdrPollingTransport;},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,"inherits":57}],40:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./lib/ajax-based'),_g=_d('./receiver/xhr'),_h=_d('./sender/xdr');function XdrStreamingTransport(_i){if(!_h.enabled){throw new Error('Transport created when disabled');}_f.call(this,_i,'/xhr_streaming',_g,_h);}_e(XdrStreamingTransport,_f);XdrStreamingTransport.enabled=function(_i){if(_i.cookie_needed||_i.nullOrigin){return false;}return _h.enabled&&_i.sameScheme;};XdrStreamingTransport.transportName='xdr-streaming';XdrStreamingTransport.roundTrips=2;_b.exports=XdrStreamingTransport;},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"inherits":57}],41:[function(_d,_b,_c){'use strict';var _e=_d('inherits'),_f=_d('./lib/ajax-based'),_g=_d('./receiver/xhr'),_h=_d('./sender/xhr-cors'),_i=_d('./sender/xhr-local');function XhrPollingTransport(_j){if(!_i.enabled&&!_h.enabled){throw new Error('Transport created when disabled');}_f.call(this,_j,'/xhr',_g,_h);}_e(XhrPollingTransport,_f);XhrPollingTransport.enabled=function(_j){if(_j.nullOrigin){return false;}if(_i.enabled&&_j.sameOrigin){return true;}return _h.enabled;};XhrPollingTransport.transportName='xhr-polling';XhrPollingTransport.roundTrips=2;_b.exports=XhrPollingTransport;},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],42:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('inherits'),_g=_d('./lib/ajax-based'),_h=_d('./receiver/xhr'),_i=_d('./sender/xhr-cors'),_j=_d('./sender/xhr-local'),_k=_d('../utils/browser');function XhrStreamingTransport(_l){if(!_j.enabled&&!_i.enabled){throw new Error('Transport created when disabled');}_g.call(this,_l,'/xhr_streaming',_h,_i);}_f(XhrStreamingTransport,_g);XhrStreamingTransport.enabled=function(_l){if(_l.nullOrigin){return false;}if(_k.isOpera()){return false;}return _i.enabled;};XhrStreamingTransport.transportName='xhr-streaming';XhrStreamingTransport.roundTrips=2;XhrStreamingTransport.needBody=!!_e.document;_b.exports=XhrStreamingTransport;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],43:[function(_d,_b,_c){(function(_e){'use strict';if(_e.crypto&&_e.crypto.getRandomValues){_b.exports.randomBytes=function(_f){var _g=new Uint8Array(_f);_e.crypto.getRandomValues(_g);return _g;};}else{_b.exports.randomBytes=function(_f){var _g=new Array(_f);for(var _h=0;_h<_f;_h++ ){_g[_h]=Math.floor(Math.random()* 256);}return _g;};}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],44:[function(_d,_b,_c){(function(_e){'use strict';_b.exports={isOpera:function(){return _e.navigator&&/opera/i.test(_e.navigator.userAgent);},isKonqueror:function(){return _e.navigator&&/konqueror/i.test(_e.navigator.userAgent);},hasDomain:function(){if(!_e.document){return true;}try{return !!_e.document.domain;}catch(e){return false;}}};}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],45:[function(_d,_b,_c){'use strict';var _e=_d('json3');var _f=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,_g;var _h=function(_i){var _j;var _k={};var _l=[];for(_j=0;_j<65536;_j++ ){_l.push(String.fromCharCode(_j));}_i.lastIndex=0;_l.join('').replace(_i,function(_m){_k[_m]='\\u'+('0000'+_m.charCodeAt(0).toString(16)).slice( -4);return '';});_i.lastIndex=0;return _k;};_b.exports={quote:function(_i){var _j=_e.stringify(_i);_f.lastIndex=0;if(!_f.test(_j)){return _j;}if(!_g){_g=_h(_f);}return _j.replace(_f,function(_k){return _g[_k];});}};},{"json3":58}],46:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('./random');var _g={},_h=false,_i=_e.chrome&&_e.chrome.app&&_e.chrome.app.runtime;_b.exports={attachEvent:function(_k,_l){if(typeof _e.addEventListener!=='undefined'){_e.addEventListener(_k,_l,false);}else if(_e.document&&_e.attachEvent){_e.document.attachEvent('on'+_k,_l);_e.attachEvent('on'+_k,_l);}},detachEvent:function(_k,_l){if(typeof _e.addEventListener!=='undefined'){_e.removeEventListener(_k,_l,false);}else if(_e.document&&_e.detachEvent){_e.document.detachEvent('on'+_k,_l);_e.detachEvent('on'+_k,_l);}},unloadAdd:function(_k){if(_i){return null;}var _l=_f.string(8);_g[_l]=_k;if(_h){setTimeout(this.triggerUnloadCallbacks,0);}return _l;},unloadDel:function(_k){if(_k in _g){delete _g[_k];}},triggerUnloadCallbacks:function(){for(var _k in _g){_g[_k]();delete _g[_k];}}};var _j=function(){if(_h){return;}_h=true;_b.exports.triggerUnloadCallbacks();};if(!_i){_b.exports.attachEvent('unload',_j);}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./random":50}],47:[function(_d,_b,_c){(function(_e,_f){'use strict';var _g=_d('./event'),_h=_d('json3'),_i=_d('./browser');var _j=function(){};if(_e.env.NODE_ENV!=='production'){_j=_d('debug')('sockjs-client:utils:iframe');}_b.exports={WPrefix:'_jp',currentWindowId:null,polluteGlobalNamespace:function(){if(!(_b.exports.WPrefix in _f)){_f[_b.exports.WPrefix]={};}},postMessage:function(_k,_l){if(_f.parent!==_f){_f.parent.postMessage(_h.stringify({windowId:_b.exports.currentWindowId,type:_k,data:_l||''}),'*');}else{_j('Cannot postMessage, no parent window.',_k,_l);}},createIframe:function(_k,_l){var _m=_f.document.createElement('iframe');var _n,_o;var _p=function(){_j('unattach');clearTimeout(_n);try{_m.onload=null;}catch(x){}_m.onerror=null;};var _q=function(){_j('cleanup');if(_m){_p();setTimeout(function(){if(_m){_m.parentNode.removeChild(_m);}_m=null;},0);_g.unloadDel(_o);}};var _r=function(_t){_j('onerror',_t);if(_m){_q();_l(_t);}};var _s=function(_t,_u){_j('post',_t,_u);try{setTimeout(function(){if(_m&&_m.contentWindow){_m.contentWindow.postMessage(_t,_u);}},0);}catch(x){}};_m.src=_k;_m.style.display='none';_m.style.position='absolute';_m.onerror=function(){_r('onerror');};_m.onload=function(){_j('onload');clearTimeout(_n);_n=setTimeout(function(){_r('onload timeout');},2000);};_f.document.body.appendChild(_m);_n=setTimeout(function(){_r('timeout');},15000);_o=_g.unloadAdd(_q);return {post:_s,cleanup:_q,loaded:_p};},createHtmlfile:function(_k,_l){var _m=['Active'].concat('Object').join('X');var _n=new _f[_m]('htmlfile');var _o,_p;var _q;var _r=function(){clearTimeout(_o);_q.onerror=null;};var _s=function(){if(_n){_r();_g.unloadDel(_p);_q.parentNode.removeChild(_q);_q=_n=null;CollectGarbage();}};var _t=function(_w){_j('onerror',_w);if(_n){_s();_l(_w);}};var _u=function(_w,_x){try{setTimeout(function(){if(_q&&_q.contentWindow){_q.contentWindow.postMessage(_w,_x);}},0);}catch(x){}};_n.open();_n.write('<html><s'+'cript>'+'document.domain="'+_f.document.domain+'";'+'</s'+'cript></html>');_n.close();_n.parentWindow[_b.exports.WPrefix]=_f[_b.exports.WPrefix];var _v=_n.createElement('div');_n.body.appendChild(_v);_q=_n.createElement('iframe');_v.appendChild(_q);_q.src=_k;_q.onerror=function(){_t('onerror');};_o=setTimeout(function(){_t('timeout');},15000);_p=_g.unloadAdd(_s);return {post:_u,cleanup:_s,loaded:_r};}};_b.exports.iframeEnabled=false;if(_f.document){_b.exports.iframeEnabled=(typeof _f.postMessage==='function'||typeof _f.postMessage==='object')&&(!_i.isKonqueror());}}).call(this,{env:{}},typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./browser":44,"./event":46,"debug":54,"json3":58}],48:[function(_d,_b,_c){(function(_e){'use strict';var _f={};['log','debug','warn'].forEach(function(_g){var _h;try{_h=_e.console&&_e.console[_g]&&_e.console[_g].apply;}catch(e){}_f[_g]=_h?function(){return _e.console[_g].apply(_e.console,arguments);}:(_g==='log'?function(){}:_f.log);});_b.exports=_f;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],49:[function(_d,_b,_c){'use strict';_b.exports={isObject:function(_e){var _f=typeof _e;return _f==='function'||_f==='object'&&!!_e;},extend:function(_e){if(!this.isObject(_e)){return _e;}var _f,_g;for(var _h=1,_i=arguments.length;_h<_i;_h++ ){_f=arguments[_h];for(_g in _f){if(Object.prototype.hasOwnProperty.call(_f,_g)){_e[_g]=_f[_g];}}}return _e;}};},{}],50:[function(_d,_b,_c){'use strict';var _e=_d('crypto');var _f='abcdefghijklmnopqrstuvwxyz012345';_b.exports={string:function(_g){var _h=_f.length;var _i=_e.randomBytes(_g);var _j=[];for(var _k=0;_k<_g;_k++ ){_j.push(_f.substr(_i[_k]%_h,1));}return _j.join('');},number:function(_g){return Math.floor(Math.random()* _g);},numberString:function(_g){var _h=(''+(_g-1)).length;var _i=new Array(_h+1).join('0');return (_i+this.number(_g)).slice( -_h);}};},{"crypto":43}],51:[function(_d,_b,_c){(function(_e){'use strict';var _f=function(){};if(_e.env.NODE_ENV!=='production'){_f=_d('debug')('sockjs-client:utils:transport');}_b.exports=function(_g){return {filterToEnabled:function(_h,_i){var _j={main:[],facade:[]};if(!_h){_h=[];}else if(typeof _h==='string'){_h=[_h];}_g.forEach(function(_k){if(!_k){return;}if(_k.transportName==='websocket'&&_i.websocket===false){_f('disabled from server','websocket');return;}if(_h.length&&_h.indexOf(_k.transportName)=== -1){_f('not in whitelist',_k.transportName);return;}if(_k.enabled(_i)){_f('enabled',_k.transportName);_j.main.push(_k);if(_k.facadeTransport){_j.facade.push(_k.facadeTransport);}}else{_f('disabled',_k.transportName);}});return _j;}};};}).call(this,{env:{}});},{"debug":54}],52:[function(_d,_b,_c){(function(_e){'use strict';var _f=_d('url-parse');var _g=function(){};if(_e.env.NODE_ENV!=='production'){_g=_d('debug')('sockjs-client:utils:url');}_b.exports={getOrigin:function(_h){if(!_h){return null;}var _i=new _f(_h);if(_i.protocol==='file:'){return null;}var _j=_i.port;if(!_j){_j=(_i.protocol==='https:')?'443':'80';}return _i.protocol+'//'+_i.hostname+':'+_j;},isOriginEqual:function(_h,_i){var _j=this.getOrigin(_h)===this.getOrigin(_i);_g('same',_h,_i,_j);return _j;},isSchemeEqual:function(_h,_i){return (_h.split(':')[0]===_i.split(':')[0]);},addPath:function(_h,_i){var _j=_h.split('?');return _j[0]+_i+(_j[1]?'?'+_j[1]:'');},addQuery:function(_h,_i){return _h+(_h.indexOf('?')=== -1?('?'+_i):('&'+_i));}};}).call(this,{env:{}});},{"debug":54,"url-parse":59}],53:[function(_d,_b,_c){_b.exports='1.1.1';},{}],54:[function(_d,_b,_c){_c=_b.exports=_d('./debug');_c.log=log;_c.formatArgs=formatArgs;_c.save=save;_c.load=load;_c.useColors=useColors;_c.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();_c.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){return ('WebkitAppearance' in document.documentElement.style)||(window.console&&(console.firebug||(console.exception&&console.table)))||(navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31);}_c.formatters.j=function(_e){return JSON.stringify(_e);};function formatArgs(){var _e=arguments;var _f=this.useColors;_e[0]=(_f?'%c':'')+this.namespace+(_f?' %c':' ')+_e[0]+(_f?'%c ':' ')+'+'+_c.humanize(this.diff);if(!_f){return _e;}var _g='color: '+this.color;_e=[_e[0],_g,'color: inherit'].concat(Array.prototype.slice.call(_e,1));var _h=0;var _i=0;_e[0].replace(/%[a-z%]/g,function(_j){if('%%'===_j){return;}_h++ ;if('%c'===_j){_i=_h;}});_e.splice(_i,0,_g);return _e;}function log(){return 'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(_e){try{if(null==_e){_c.storage.removeItem('debug');}else{_c.storage.debug=_e;}}catch(e){}}function load(){var _e;try{_e=_c.storage.debug;}catch(e){}return _e;}_c.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},{"./debug":55}],55:[function(_d,_b,_c){_c=_b.exports=debug;_c.coerce=coerce;_c.disable=disable;_c.enable=enable;_c.enabled=enabled;_c.humanize=_d('ms');_c.names=[];_c.skips=[];_c.formatters={};var _e=0;var _f;function selectColor(){return _c.colors[_e++ %_c.colors.length];}function debug(_g){function disabled(){}disabled.enabled=false;function enabled(){var _i=enabled;var _j= +new Date();var _k=_j-(_f||_j);_i.diff=_k;_i.prev=_f;_i.curr=_j;_f=_j;if(null==_i.useColors){_i.useColors=_c.useColors();}if(null==_i.color&&_i.useColors){_i.color=selectColor();}var _l=Array.prototype.slice.call(arguments);_l[0]=_c.coerce(_l[0]);if('string'!==typeof _l[0]){_l=['%o'].concat(_l);}var _m=0;_l[0]=_l[0].replace(/%([a-z%])/g,function(_o,_p){if(_o==='%%'){return _o;}_m++ ;var _q=_c.formatters[_p];if('function'===typeof _q){var _r=_l[_m];_o=_q.call(_i,_r);_l.splice(_m,1);_m-- ;}return _o;});if('function'===typeof _c.formatArgs){_l=_c.formatArgs.apply(_i,_l);}var _n=enabled.log||_c.log||console.log.bind(console);_n.apply(_i,_l);}enabled.enabled=true;var _h=_c.enabled(_g)?enabled:disabled;_h.namespace=_g;return _h;}function enable(_g){_c.save(_g);var _h=(_g||'').split(/[\s,]+/);var _i=_h.length;for(var _j=0;_j<_i;_j++ ){if(!_h[_j]){continue;}_g=_h[_j].replace(/\*/g,'.*?');if(_g[0]==='-'){_c.skips.push(new RegExp('^'+_g.substr(1)+'$'));}else{_c.names.push(new RegExp('^'+_g+'$'));}}}function disable(){_c.enable('');}function enabled(_g){var _h,_i;for(_h=0,_i=_c.skips.length;_h<_i;_h++ ){if(_c.skips[_h].test(_g)){return false;}}for(_h=0,_i=_c.names.length;_h<_i;_h++ ){if(_c.names[_h].test(_g)){return true;}}return false;}function coerce(_g){if(_g instanceof Error){return _g.stack||_g.message;}return _g;}},{"ms":56}],56:[function(_d,_b,_c){var _e=1000;var _f=_e* 60;var _g=_f* 60;var _h=_g* 24;var _i=_h* 365.25;_b.exports=function(_j,_k){_k=_k||{};if('string'==typeof _j){return parse(_j);}return _k.long?long(_j):short(_j);};function parse(_j){_j=''+_j;if(_j.length>10000){return;}var _k=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(_j);if(!_k){return;}var _l=parseFloat(_k[1]);var _m=(_k[2]||'ms').toLowerCase();switch(_m){case 'years':case 'year':case 'yrs':case 'yr':case 'y':return _l* _i;case 'days':case 'day':case 'd':return _l* _h;case 'hours':case 'hour':case 'hrs':case 'hr':case 'h':return _l* _g;case 'minutes':case 'minute':case 'mins':case 'min':case 'm':return _l* _f;case 'seconds':case 'second':case 'secs':case 'sec':case 's':return _l* _e;case 'milliseconds':case 'millisecond':case 'msecs':case 'msec':case 'ms':return _l;}}function short(_j){if(_j>=_h){return Math.round(_j/_h)+'d';}if(_j>=_g){return Math.round(_j/_g)+'h';}if(_j>=_f){return Math.round(_j/_f)+'m';}if(_j>=_e){return Math.round(_j/_e)+'s';}return _j+'ms';}function long(_j){return plural(_j,_h,'day')||plural(_j,_g,'hour')||plural(_j,_f,'minute')||plural(_j,_e,'second')||_j+' ms';}function plural(_j,_k,_l){if(_j<_k){return;}if(_j<_k* 1.5){return Math.floor(_j/_k)+' '+_l;}return Math.ceil(_j/_k)+' '+_l+'s';}},{}],57:[function(_d,_b,_c){if(typeof Object.create==='function'){_b.exports=function inherits(_e,_f){_e.super_=_f;_e.prototype=Object.create(_f.prototype,{constructor:{value:_e,enumerable:false,writable:true,configurable:true}});};}else{_b.exports=function inherits(_e,_f){_e.super_=_f;var _g=function(){};_g.prototype=_f.prototype;_e.prototype=new _g();_e.prototype.constructor=_e;};}},{}],58:[function(_d,_b,_c){(function(_e){;(function(){var _f=typeof _a==="function"&&_a.amd;var _g={"function":true,"object":true};var _h=_g[typeof _c]&&_c&&!_c.nodeType&&_c;var _i=_g[typeof window]&&window||this,_j=_h&&_g[typeof _b]&&_b&&!_b.nodeType&&typeof _e=="object"&&_e;if(_j&&(_j["global"]===_j||_j["window"]===_j||_j["self"]===_j)){_i=_j;}function runInContext(_o,_c){_o||(_o=_i["Object"]());_c||(_c=_i["Object"]());var _p=_o["Number"]||_i["Number"],_q=_o["String"]||_i["String"],_r=_o["Object"]||_i["Object"],_s=_o["Date"]||_i["Date"],_t=_o["SyntaxError"]||_i["SyntaxError"],_u=_o["TypeError"]||_i["TypeError"],_v=_o["Math"]||_i["Math"],_k=_o["JSON"]||_i["JSON"];if(typeof _k=="object"&&_k){_c.stringify=_k.stringify;_c.parse=_k.parse;}var _w=_r.prototype,_x=_w.toString,_y,_z,_aa;var _ab=new _s( -3509827334573292);try{_ab=_ab.getUTCFullYear()== -109252&&_ab.getUTCMonth()===0&&_ab.getUTCDate()===1&&_ab.getUTCHours()==10&&_ab.getUTCMinutes()==37&&_ab.getUTCSeconds()==6&&_ab.getUTCMilliseconds()==708;}catch(exception){}function has(_bb){if(has[_bb]!==_aa){return has[_bb];}var _bc;if(_bb=="bug-string-char-index"){_bc="a"[0]!="a";}else if(_bb=="json"){_bc=has("json-stringify")&&has("json-parse");}else{var _bd,_be='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(_bb=="json-stringify"){var _bf=_c.stringify,_bg=typeof _bf=="function"&&_ab;if(_bg){(_bd=function(){return 1;}).toJSON=_bd;try{_bg=_bf(0)==="0"&&_bf(new _p())==="0"&&_bf(new _q())=='""'&&_bf(_x)===_aa&&_bf(_aa)===_aa&&_bf()===_aa&&_bf(_bd)==="1"&&_bf([_bd])=="[1]"&&_bf([_aa])=="[null]"&&_bf(null)=="null"&&_bf([_aa,_x,null])=="[null,null,null]"&&_bf({"a":[_bd,true,false,null,"\x00\b\n\f\r\t"]})==_be&&_bf(null,_bd)==="1"&&_bf([1,2],null,1)=="[\n 1,\n 2\n]"&&_bf(new _s( -8.64e15))=='"-271821-04-20T00:00:00.000Z"'&&_bf(new _s(8.64e15))=='"+275760-09-13T00:00:00.000Z"'&&_bf(new _s( -621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&_bf(new _s( -1))=='"1969-12-31T23:59:59.999Z"';}catch(exception){_bg=false;}}_bc=_bg;}if(_bb=="json-parse"){var _bh=_c.parse;if(typeof _bh=="function"){try{if(_bh("0")===0&&!_bh(false)){_bd=_bh(_be);var _bi=_bd["a"].length==5&&_bd["a"][0]===1;if(_bi){try{_bi=!_bh('"\t"');}catch(exception){}if(_bi){try{_bi=_bh("01")!==1;}catch(exception){}}if(_bi){try{_bi=_bh("1.")!==1;}catch(exception){}}}}}catch(exception){_bi=false;}}_bc=_bi;}}return has[_bb]=!!_bc;}if(!has("json")){var _ac="[object Function]",_ad="[object Date]",_ae="[object Number]",_af="[object String]",_ag="[object Array]",_ah="[object Boolean]";var _ai=has("bug-string-char-index");if(!_ab){var _aj=_v.floor;var _ak=[0,31,59,90,120,151,181,212,243,273,304,334];var _al=function(_bb,_bc){return _ak[_bc]+365* (_bb-1970)+_aj((_bb-1969+(_bc= +(_bc>1)))/4)-_aj((_bb-1901+_bc)/100)+_aj((_bb-1601+_bc)/400);};}if(!(_y=_w.hasOwnProperty)){_y=function(_bb){var _bc={},_bd;if((_bc.__proto__=null,_bc.__proto__={"toString":1},_bc).toString!=_x){_y=function(_bb){var _be=this.__proto__,_bf=_bb in (this.__proto__=null,this);this.__proto__=_be;return _bf;};}else{_bd=_bc.constructor;_y=function(_bb){var _be=(this.constructor||_bd).prototype;return _bb in this&&!(_bb in _be&&this[_bb]===_be[_bb]);};}_bc=null;return _y.call(this,_bb);};}_z=function(_bb,_bc){var _bd=0,_be,_bf,_bg;(_be=function(){this.valueOf=0;}).prototype.valueOf=0;_bf=new _be();for(_bg in _bf){if(_y.call(_bf,_bg)){_bd++ ;}}_be=_bf=null;if(!_bd){_bf=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];_z=function(_bb,_bc){var _bh=_x.call(_bb)==_ac,_bg,_bi;var _bj=!_bh&&typeof _bb.constructor!="function"&&_g[typeof _bb.hasOwnProperty]&&_bb.hasOwnProperty||_y;for(_bg in _bb){if(!(_bh&&_bg=="prototype")&&_bj.call(_bb,_bg)){_bc(_bg);}}for(_bi=_bf.length;_bg=_bf[ --_bi];_bj.call(_bb,_bg)&&_bc(_bg)){}};}else if(_bd==2){_z=function(_bb,_bc){var _bf={},_bh=_x.call(_bb)==_ac,_bg;for(_bg in _bb){if(!(_bh&&_bg=="prototype")&&!_y.call(_bf,_bg)&&(_bf[_bg]=1)&&_y.call(_bb,_bg)){_bc(_bg);}}};}else{_z=function(_bb,_bc){var _bh=_x.call(_bb)==_ac,_bg,_bi;for(_bg in _bb){if(!(_bh&&_bg=="prototype")&&_y.call(_bb,_bg)&&!(_bi=_bg==="constructor")){_bc(_bg);}}if(_bi||_y.call(_bb,(_bg="constructor"))){_bc(_bg);}};}return _z(_bb,_bc);};if(!has("json-stringify")){var _am={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var _an="000000";var _ao=function(_bb,_bc){return (_an+(_bc||0)).slice( -_bb);};var _ap="\\u00";var _aq=function(_bb){var _bc='"',_bd=0,_be=_bb.length,_bf=!_ai||_be>10;var _bg=_bf&&(_ai?_bb.split(""):_bb);for(;_bd<_be;_bd++ ){var _bh=_bb.charCodeAt(_bd);switch(_bh){case 8:case 9:case 10:case 12:case 13:case 34:case 92:_bc+=_am[_bh];break;default:if(_bh<32){_bc+=_ap+_ao(2,_bh.toString(16));break;}_bc+=_bf?_bg[_bd]:_bb.charAt(_bd);}}return _bc+'"';};var _ar=function(_bb,_bc,_bd,_be,_bf,_bg,_bh){var _bi,_bj,_bk,_bl,_bm,_bn,_bo,_bp,_bq,_br,_bs,_bt,_bu,_bv,_bw,_bx;try{_bi=_bc[_bb];}catch(exception){}if(typeof _bi=="object"&&_bi){_bj=_x.call(_bi);if(_bj==_ad&&!_y.call(_bi,"toJSON")){if(_bi> -1/0&&_bi<1/0){if(_al){_bm=_aj(_bi/864e5);for(_bk=_aj(_bm/365.2425)+1970-1;_al(_bk+1,0)<=_bm;_bk++ ){}for(_bl=_aj((_bm-_al(_bk,0))/30.42);_al(_bk,_bl+1)<=_bm;_bl++ ){}_bm=1+_bm-_al(_bk,_bl);_bn=(_bi%864e5+864e5)%864e5;_bo=_aj(_bn/36e5)%24;_bp=_aj(_bn/6e4)%60;_bq=_aj(_bn/1e3)%60;_br=_bn%1e3;}else{_bk=_bi.getUTCFullYear();_bl=_bi.getUTCMonth();_bm=_bi.getUTCDate();_bo=_bi.getUTCHours();_bp=_bi.getUTCMinutes();_bq=_bi.getUTCSeconds();_br=_bi.getUTCMilliseconds();}_bi=(_bk<=0||_bk>=1e4?(_bk<0?"-":"+")+_ao(6,_bk<0? -_bk:_bk):_ao(4,_bk))+"-"+_ao(2,_bl+1)+"-"+_ao(2,_bm)+"T"+_ao(2,_bo)+":"+_ao(2,_bp)+":"+_ao(2,_bq)+"."+_ao(3,_br)+"Z";}else{_bi=null;}}else if(typeof _bi.toJSON=="function"&&((_bj!=_ae&&_bj!=_af&&_bj!=_ag)||_y.call(_bi,"toJSON"))){_bi=_bi.toJSON(_bb);}}if(_bd){_bi=_bd.call(_bc,_bb,_bi);}if(_bi===null){return "null";}_bj=_x.call(_bi);if(_bj==_ah){return ""+_bi;}else if(_bj==_ae){return _bi> -1/0&&_bi<1/0?""+_bi:"null";}else if(_bj==_af){return _aq(""+_bi);}if(typeof _bi=="object"){for(_bv=_bh.length;_bv-- ;){if(_bh[_bv]===_bi){throw _u();}}_bh.push(_bi);_bs=[];_bw=_bg;_bg+=_bf;if(_bj==_ag){for(_bu=0,_bv=_bi.length;_bu<_bv;_bu++ ){_bt=_ar(_bu,_bi,_bd,_be,_bf,_bg,_bh);_bs.push(_bt===_aa?"null":_bt);}_bx=_bs.length?(_bf?"[\n"+_bg+_bs.join(",\n"+_bg)+"\n"+_bw+"]":("["+_bs.join(",")+"]")):"[]";}else{_z(_be||_bi,function(_bb){var _bt=_ar(_bb,_bi,_bd,_be,_bf,_bg,_bh);if(_bt!==_aa){_bs.push(_aq(_bb)+":"+(_bf?" ":"")+_bt);}});_bx=_bs.length?(_bf?"{\n"+_bg+_bs.join(",\n"+_bg)+"\n"+_bw+"}":("{"+_bs.join(",")+"}")):"{}";}_bh.pop();return _bx;}};_c.stringify=function(_bb,_bc,_bd){var _be,_bf,_bg,_bh;if(_g[typeof _bc]&&_bc){if((_bh=_x.call(_bc))==_ac){_bf=_bc;}else if(_bh==_ag){_bg={};for(var _bi=0,_bj=_bc.length,_bk;_bi<_bj;_bk=_bc[_bi++ ],((_bh=_x.call(_bk)),_bh==_af||_bh==_ae)&&(_bg[_bk]=1)){}}}if(_bd){if((_bh=_x.call(_bd))==_ae){if((_bd-=_bd%1)>0){for(_be="",_bd>10&&(_bd=10);_be.length<_bd;_be+=" "){}}}else if(_bh==_af){_be=_bd.length<=10?_bd:_bd.slice(0,10);}}return _ar("",(_bk={},_bk[""]=_bb,_bk),_bf,_bg,_be,"",[]);};}if(!has("json-parse")){var _as=_q.fromCharCode;var _at={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var _au,_av;var _aw=function(){_au=_av=null;throw _t();};var _ax=function(){var _bb=_av,_bc=_bb.length,_bd,_be,_bf,_bg,_bh;while(_au<_bc){_bh=_bb.charCodeAt(_au);switch(_bh){case 9:case 10:case 13:case 32:_au++ ;break;case 123:case 125:case 91:case 93:case 58:case 44:_bd=_ai?_bb.charAt(_au):_bb[_au];_au++ ;return _bd;case 34:for(_bd="@",_au++ ;_au<_bc;){_bh=_bb.charCodeAt(_au);if(_bh<32){_aw();}else if(_bh==92){_bh=_bb.charCodeAt( ++_au);switch(_bh){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:_bd+=_at[_bh];_au++ ;break;case 117:_be= ++_au;for(_bf=_au+4;_au<_bf;_au++ ){_bh=_bb.charCodeAt(_au);if(!(_bh>=48&&_bh<=57||_bh>=97&&_bh<=102||_bh>=65&&_bh<=70)){_aw();}}_bd+=_as("0x"+_bb.slice(_be,_au));break;default:_aw();}}else{if(_bh==34){break;}_bh=_bb.charCodeAt(_au);_be=_au;while(_bh>=32&&_bh!=92&&_bh!=34){_bh=_bb.charCodeAt( ++_au);}_bd+=_bb.slice(_be,_au);}}if(_bb.charCodeAt(_au)==34){_au++ ;return _bd;}_aw();default:_be=_au;if(_bh==45){_bg=true;_bh=_bb.charCodeAt( ++_au);}if(_bh>=48&&_bh<=57){if(_bh==48&&((_bh=_bb.charCodeAt(_au+1)),_bh>=48&&_bh<=57)){_aw();}_bg=false;for(;_au<_bc&&((_bh=_bb.charCodeAt(_au)),_bh>=48&&_bh<=57);_au++ ){}if(_bb.charCodeAt(_au)==46){_bf= ++_au;for(;_bf<_bc&&((_bh=_bb.charCodeAt(_bf)),_bh>=48&&_bh<=57);_bf++ ){}if(_bf==_au){_aw();}_au=_bf;}_bh=_bb.charCodeAt(_au);if(_bh==101||_bh==69){_bh=_bb.charCodeAt( ++_au);if(_bh==43||_bh==45){_au++ ;}for(_bf=_au;_bf<_bc&&((_bh=_bb.charCodeAt(_bf)),_bh>=48&&_bh<=57);_bf++ ){}if(_bf==_au){_aw();}_au=_bf;}return  +_bb.slice(_be,_au);}if(_bg){_aw();}if(_bb.slice(_au,_au+4)=="true"){_au+=4;return true;}else if(_bb.slice(_au,_au+5)=="false"){_au+=5;return false;}else if(_bb.slice(_au,_au+4)=="null"){_au+=4;return null;}_aw();}}return "$";};var _ay=function(_bb){var _bc,_bd;if(_bb=="$"){_aw();}if(typeof _bb=="string"){if((_ai?_bb.charAt(0):_bb[0])=="@"){return _bb.slice(1);}if(_bb=="["){_bc=[];for(;;_bd||(_bd=true)){_bb=_ax();if(_bb=="]"){break;}if(_bd){if(_bb==","){_bb=_ax();if(_bb=="]"){_aw();}}else{_aw();}}if(_bb==","){_aw();}_bc.push(_ay(_bb));}return _bc;}else if(_bb=="{"){_bc={};for(;;_bd||(_bd=true)){_bb=_ax();if(_bb=="}"){break;}if(_bd){if(_bb==","){_bb=_ax();if(_bb=="}"){_aw();}}else{_aw();}}if(_bb==","||typeof _bb!="string"||(_ai?_bb.charAt(0):_bb[0])!="@"||_ax()!=":"){_aw();}_bc[_bb.slice(1)]=_ay(_ax());}return _bc;}_aw();}return _bb;};var _az=function(_bb,_bc,_bd){var _be=_ba(_bb,_bc,_bd);if(_be===_aa){delete _bb[_bc];}else{_bb[_bc]=_be;}};var _ba=function(_bb,_bc,_bd){var _be=_bb[_bc],_bf;if(typeof _be=="object"&&_be){if(_x.call(_be)==_ag){for(_bf=_be.length;_bf-- ;){_az(_be,_bf,_bd);}}else{_z(_be,function(_bc){_az(_be,_bc,_bd);});}}return _bd.call(_bb,_bc,_be);};_c.parse=function(_bb,_bc){var _bd,_be;_au=0;_av=""+_bb;_bd=_ay(_ax());if(_ax()!="$"){_aw();}_au=_av=null;return _bc&&_x.call(_bc)==_ac?_ba((_be={},_be[""]=_bd,_be),"",_bc):_bd;};}}_c["runInContext"]=runInContext;return _c;}if(_h&&!_f){runInContext(_i,_h);}else{var _k=_i.JSON,_l=_i["JSON3"],_m=false;var _n=runInContext(_i,(_i["JSON3"]={"noConflict":function(){if(!_m){_m=true;_i.JSON=_k;_i["JSON3"]=_l;_k=_l=null;}return _n;}}));_i.JSON={"parse":_n.parse,"stringify":_n.stringify};}if(_f){_a(function(){return _n;});}}).call(this);}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],59:[function(_d,_b,_c){'use strict';var _e=_d('requires-port'),_f=_d('./lolcation'),_g=_d('querystringify'),_h=/^\/(?!\/)/,_i=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i;var _j=[['#','hash'],['?','query'],['/','pathname'],['@','auth',1],[NaN,'host',undefined,1,1],[/\:(\d+)$/,'port'],[NaN,'hostname',undefined,1,1]];function extractProtocol(_k){var _l=_i.exec(_k);return {protocol:_l[1]?_l[1].toLowerCase():'',slashes:!!_l[2],rest:_l[3]?_l[3]:''};}function URL(_k,_l,_m){if(!(this instanceof URL)){return new URL(_k,_l,_m);}var _n=_h.test(_k),_o,_p,_q,_r,_s=typeof _l,_t=this,_u=0;if('object'!==_s&&'string'!==_s){_m=_l;_l=null;}if(_m&&'function'!==typeof _m){_m=_g.parse;}_l=_f(_l);var _v=extractProtocol(_k);_t.protocol=_v.protocol||_l.protocol||'';_t.slashes=_v.slashes||_l.slashes;_k=_v.rest;for(;_u<_j.length;_u++ ){_p=_j[_u];_o=_p[0];_r=_p[1];if(_o!==_o){_t[_r]=_k;}else if('string'===typeof _o){if(~(_q=_k.indexOf(_o))){if('number'===typeof _p[2]){_t[_r]=_k.slice(0,_q);_k=_k.slice(_q+_p[2]);}else{_t[_r]=_k.slice(_q);_k=_k.slice(0,_q);}}}else if(_q=_o.exec(_k)){_t[_r]=_q[1];_k=_k.slice(0,_k.length-_q[0].length);}_t[_r]=_t[_r]||(_p[3]||('port'===_r&&_n)?_l[_r]||'':'');if(_p[4]){_t[_r]=_t[_r].toLowerCase();}}if(_m){_t.query=_m(_t.query);}if(!_e(_t.port,_t.protocol)){_t.host=_t.hostname;_t.port='';}_t.username=_t.password='';if(_t.auth){_p=_t.auth.split(':');_t.username=_p[0]||'';_t.password=_p[1]||'';}_t.href=_t.toString();}URL.prototype.set=function set(_k,_l,_m){var _n=this;if('query'===_k){if('string'===typeof _l&&_l.length){_l=(_m||_g.parse)(_l);}_n[_k]=_l;}else if('port'===_k){_n[_k]=_l;if(!_e(_l,_n.protocol)){_n.host=_n.hostname;_n[_k]='';}else if(_l){_n.host=_n.hostname+':'+_l;}}else if('hostname'===_k){_n[_k]=_l;if(_n.port){_l+=':'+_n.port;}_n.host=_l;}else if('host'===_k){_n[_k]=_l;if(/\:\d+/.test(_l)){_l=_l.split(':');_n.hostname=_l[0];_n.port=_l[1];}}else if('protocol'===_k){_n.protocol=_l;_n.slashes=!_m;}else{_n[_k]=_l;}_n.href=_n.toString();return _n;};URL.prototype.toString=function toString(_k){if(!_k||'function'!==typeof _k){_k=_g.stringify;}var _l,_m=this,_n=_m.protocol;if(_n&&_n.charAt(_n.length-1)!==':'){_n+=':';}var _o=_n+(_m.slashes?'//':'');if(_m.username){_o+=_m.username;if(_m.password){_o+=':'+_m.password;}_o+='@';}_o+=_m.hostname;if(_m.port){_o+=':'+_m.port;}_o+=_m.pathname;_l='object'===typeof _m.query?_k(_m.query):_m.query;if(_l){_o+='?'!==_l.charAt(0)?'?'+_l:_l;}if(_m.hash){_o+=_m.hash;}return _o;};URL.qs=_g;URL.location=_f;_b.exports=URL;},{"./lolcation":60,"querystringify":61,"requires-port":62}],60:[function(_d,_b,_c){(function(_e){'use strict';var _f=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//;var _g={hash:1,query:1},_h;_b.exports=function lolcation(_i){_i=_i||_e.location||{};_h=_h||_d('./');var _j={},_k=typeof _i,_l;if('blob:'===_i.protocol){_j=new _h(unescape(_i.pathname),{});}else if('string'===_k){_j=new _h(_i,{});for(_l in _g){delete _j[_l];}}else if('object'===_k){for(_l in _i){if(_l in _g){continue;}_j[_l]=_i[_l];}if(_j.slashes===undefined){_j.slashes=_f.test(_i.href);}}return _j;};}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./":59}],61:[function(_d,_b,_c){'use strict';var _e=Object.prototype.hasOwnProperty;function querystring(_f){var _g=/([^=?&]+)=([^&]*)/g,_h={},_i;for(;_i=_g.exec(_f);_h[decodeURIComponent(_i[1])]=decodeURIComponent(_i[2])){}return _h;}function querystringify(_f,_g){_g=_g||'';var _h=[];if('string'!==typeof _g){_g='?';}for(var _i in _f){if(_e.call(_f,_i)){_h.push(encodeURIComponent(_i)+'='+encodeURIComponent(_f[_i]));}}return _h.length?_g+_h.join('&'):'';}_c.stringify=querystringify;_c.parse=querystring;},{}],62:[function(_d,_b,_c){'use strict';_b.exports=function required(_e,_f){_f=_f.split(':')[0];_e= +_e;if(!_e){return false;}switch(_f){case 'http':case 'ws':return _e!==80;case 'https':case 'wss':return _e!==443;case 'ftp':return _e!==21;case 'gopher':return _e!==70;case 'file':return false;}return _e!==0;};},{}]},{},[1])(1);});}if(nexacro._Browser!="Runtime"){if(!nexacro._isHybrid()){nexacro._XPushController=function(_a){this.linkedcontrol=_a;this.layoutlist=[];this._serverkeylist=[];this._is_created=true;};var _pXPushController=nexacro._createPrototype(nexacro.Object,nexacro._XPushController);nexacro._XPushController.prototype=_pXPushController;_pXPushController.handle=null;_pXPushController._ajax=null;_pXPushController.userid="";_pXPushController.sessionid="";_pXPushController.ip_idx=0;_pXPushController.keepalivetime=30;_pXPushController.retry_cnt=1;_pXPushController.control_retry_cnt=1;_pXPushController._is_connected=false;_pXPushController._is_created=false;_pXPushController._do_disconnect=false;_pXPushController.action=null;_pXPushController.msg_type=null;_pXPushController.msg_key=null;_pXPushController.type=null;_pXPushController.projectid="";_pXPushController.protocolversion=2;_pXPushController.setXPushAsync=nexacro._emptyFn;_pXPushController.setXPushControlRetry=nexacro._emptyFn;_pXPushController.setXPushKeepTimeout=nexacro._emptyFn;_pXPushController.setXPushKeepAliveTime=nexacro._emptyFn;_pXPushController.setXPushTimeout=nexacro._emptyFn;_pXPushController.setXPushDebug=nexacro._emptyFn;_pXPushController.setXPushRetry=nexacro._emptyFn;_pXPushController.resumeXPush=nexacro._emptyFn;_pXPushController.suspendXPush=nexacro._emptyFn;_pXPushController.create=nexacro._emptyFn;_pXPushController.destroy=function(){var _a=this.handle;if(_a){_a.sockjsDisconnect();}this._destroy_handle();this._destroy_layout();this.InitServerKey();this.linkedcontrol=null;this._is_created=false;};_pXPushController._destroy_layout=function(){if(this._ajax){if(this._ajax._destroy){this._ajax._destroy();}this._ajax=null;}};_pXPushController._destroy_handle=function(){if(this.handle){this.handle._destroy();delete this.handle;this.handle=null;}};_pXPushController.setXPushLayoutURL=function(_a){var _b=this.linkedcontrol;var _c=_a;if(_c.substring(0,4).toLowerCase()=="url("){_c=_c.substring(5,_c.length-2);}var _d=_b._findForm(_b.parent);if(_d){if(_c.indexOf("%")<0){_a=nexacro._getServiceLocation(_c,_d._getRefFormBaseUrl());}}var _e,_f,_g;var _h,_i,_j;var _k=this;var _l=this._ajax;if(_l){this._destroy_layout();var _m=this.layoutlist;for(_e=0,_h=_m.length;_e<_h;_e++ ){_m[_e].listfield=[];}this.layoutlist=[];}_l=nexacro.__createHttpRequest();_l.handle.onreadystatechange=function(_n){if(this.readyState>=4){var _o=_l.handle.responseXML;if(_o){var _p;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8){_p=_o.childNodes[1];}else{_p=_o.childNodes[0];}if(_p.nodeName!="message_layout"){return false;}var _q=null;var _r=false;var _s=false;var _t=false;var _u,_v;var _w=0;var _x,_y;var _z=function(){return {"id":_q,"nokey":_r,"repeat":_s,"noreg":_t,"checkfieldidx": -1,"listfield":[]};};var _aa=function(){return {"id":null,"type":null,"size":0,"key":false,"check":false};};var _ab=_p.childNodes;for(_e=0,_h=_ab.length;_e<_h;_e++ ){if(_ab[_e].nodeName=="#text"){continue;}_u=_ab[_e].attributes;for(_f=0,_i=_u.length;_f<_i;_f++ ){if(!_q&&_u[_f].nodeName=="id"||_u[_f].nodeName=="type"){_q=_u[_f].nodeValue;}else if(_u[_f].nodeName=="key"){_r=_u[_f].nodeValue;}else if(_u[_f].nodeName=="repeat"){_s=_u[_f].nodeValue;}else if(_u[_f].nodeName=="noreg"){_t=nexacro._toBoolean(_u[_f].nodeValue);}}_v=_ab[_e];_i=_v.childNodes.length;if(_i>0){_x=_z();for(_f=0;_f<_i;_f++ ){if(_v.childNodes[_f].nodeName=="#text"){continue;}_y=_aa();_u=_v.childNodes[_f].attributes;for(_g=0,_j=_u.length;_g<_j;_g++ ){if(_u[_g].nodeName=="id"){_y.id=_u[_g].nodeValue;}if(_u[_g].nodeName=="type"){_y.type=_u[_g].nodeValue;}if(_u[_g].nodeName=="size"){_y.type=parseInt(_u[_g].nodeValue);}if(_u[_g].nodeName=="key"){_y.key=nexacro._toBoolean(_u[_g].nodeValue);}if(_u[_g].nodeName=="check"){if(nexacro._toBoolean(_u[_g].nodeValue)){_y.check=true;_x.checkfieldidx=_w;}}}_x.listfield.push(_y);_w++ ;}_k.layoutlist.push(_x);}}}else{_k._on_error( -703);return false;}}};try{_l.handle.open("GET",_a,false);}catch(e){_k._on_error( -703);_l=null;return false;}_l.handle.send("");};_pXPushController.setXPushProjectId=function(_a){this.projectid=_a;if(this.handle){this.handle.projectid=_a;}};_pXPushController.setXPushProtocolVersion=function(_a){this.protocolversion=_a;};_pXPushController.connectXPush=function(_a,_b,_c){var _d=this.linkedcontrol;_d._getRandomIPInfo();_d._resetIPList();this.userid=_a;this.sessionid=_b;this.projectid=_c;this._connect();};_pXPushController.disconnectXPush=function(){var _a=this.handle;if(_a){this._do_disconnect=true;_a.sockjsDisconnect();}else{this._on_error( -401,"BYEC");}this.InitServerKey();this._is_connected=false;};_pXPushController.sendResponseXPush=function(_a){var _b=new nexacro.CommandControl("RECT",_a);this.commandXPush(_b);};_pXPushController.requestMessageXPush=function(_a,_b){var _c=this.handle;if(_c){var _d,_e;var _f=new nexacro.CommandControl("REQD",_a);for(_d=0,_e=_b.length;_d<_e;_d++ ){_f.messagekey=_b[_d];this.commandXPush(_f);}}};_pXPushController.fireErrorEventXPush=function(){this._on_error( -701);};_pXPushController.commandXPush=function(_a){var _b=_a.actiontype;var _c=_a.messagetype;var _d=_a.messagekey;var _e=_a.type;var _f=_a.userid||this.userid;var _g="";if(this.protocolversion==3){_g=_a.projectid||this.projectid;}var _h=this.linkedcontrol;var _i=this.handle;if(_i){if(_b=="keepalive"){_i.sockjsKeepalive();}else{var _j=this._findLayout(_c);if(_b=="ADDF"){if(!this.AddServerKey(_c,_d)){this._on_error( -701);return false;}if(!_j){this._on_error( -703);return false;}if(_e=="update"||_e=="allupdate"||_e=="updateorappend"){if(!this._hasKey(_c)){this._on_error( -703);return false;}}}else if(_b=="DELF"){if(!this.DelServerKey(_c,_d)){this._on_error( -701);return false;}if(!_j){this._on_error( -703);return false;}else{if(_j.noreg){return true;}}}this.action=_b;this.msg_type=_c;this.msg_key=_d;this.type=_e;_i.sockjsCommand(_b,_c,_d,_f,_g);}}else{this.control_retry_cnt=1;var _k=_h._getErrorCode(_b);this._on_error(_k,_b,_c,_d);}};_pXPushController._on_xpush=function(_a){var _b=this.linkedcontrol;if(_b){_b._on_xpush(_a);}};_pXPushController._on_success=function(_a,_b,_c,_d,_e,_f){var _g=this.linkedcontrol;if(_g){_g._on_success(_a,_b,_c,_d,_e,_f);}};_pXPushController._on_error=function(_a,_b,_c,_d){var _e=this.linkedcontrol;if(_e){_e._on_error(_a,_b,_c,_d);}};_pXPushController._on_keepalive=function(_a){var _b=this.linkedcontrol;if(_b){_b._on_keepalive(_a);}};_pXPushController._connect=function(){var _a=this.linkedcontrol;if(this._is_connected){this._on_error( -302,"AUTH");return;}this._destroy_handle();var _b=this.ip_idx;var _c=_a.iplist;var _d=_c?_c.length:0;if(_c&&_b>=_d){this.retry_cnt++ ;_b=0;if((parseInt(_a.retry)+1)<this.retry_cnt){this.ip_idx=0;this.retry_cnt=1;this._on_error( -201,"AUTH");return;}}var _e;var _f=true;for(_e=_b;_e<_d;_e++ ){if(_c[_e].type=="http"||_c[_e].type=="https"){_f=false;break;}}_b=_e;if(_f){this.ip_idx=_b;this._on_error( -201);return;}_a._currentipinfo=_c[_b];var _g=_a._currentipinfo.ip;if(_g=="localhost"){_g="127.0.0.1";}var _h=_c[_b].type+"://"+_g+(_a.iplist[_b].port?(":"+_a.iplist[_b].port):"")+"/XPUSH";var _i=(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=9)?["xdr-streaming","iframe-htmlfile"]:["websocket"];var _j=_a.debug;var _k=(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8)?true:false;var _l={transports:_i,debug:_j,jsessionid:_k};this.handle=new nexacro.SockJSWrapper(_h,[],_l,this.userid,this.sessionid,this.projectid,this);this.ip_idx=_b;this._do_disconnect=false;};_pXPushController._message=function(_a){_a=JSON.parse(_a);var _b=_a.Action;var _c=_a.Result;var _d=_a.Message;var _e;var _f,_g,_h,_i,_j;var _k=this.linkedcontrol;var _l=_k&&_k.debug;var _m=_k?_k._getActionCode(_b): -1;if(_b=="BYEC"){this._destroy_handle();this.ip_idx=0;this._is_connected=false;if(this._do_disconnect){this._on_success(2,_m);}else{this._on_error( -100);}}else if(_b=="KEEP"){this._on_keepalive(2);}else if(_b=="AUTH"){if(_c=="OK"){this.control_retry_cnt=1;this.retry=1;this._is_connected=true;this._on_success(1,_m);}else if(_c=="NG"){this._on_error( -202,_b);}}else if(_b=="PUSH"||_b=="RELI"){this.control_retry_cnt=1;var _n=this._findLayout(_a.TopicType);if(!_n){this._on_error( -703);return;}if(_b=="RELI"&&this.handle){this.handle.sockjsAckn(_a.MessageID);}var _o={};var _p=[];var _q={};var _r=_n.listfield;var _s=_r[0];_o.id=_s.id;_o.item=_a.TopicId;_o.key=_s.key;var _t=_s.check;if(_n.checkfieldidx==0){_t=_o.item;}else if(_n.checkfieldidx>0){_t=_d[_n.checkfieldidx-1];}_o.checkfield=_t;_p.push(_o);var _u="";var _v=(_a.TopicType?_a.TopicType.length:0)+(_a.TopicId?_a.TopicId.length:0);var _w=_d.length;for(_e=0;_e<_w;_e++ ){_o={};_s=_r[_e+1];if(_s){_o.id=_s.id;_o.item=_d[_e];_o.key=_s.key;_o.checkfield=_t;_p.push(_o);}if(_l){if(_e==0){_u+=_d[_e];}else{_u+=" "+_d[_e];}}}_q.type=_a.TopicType;_q.datalist=_p;_q.action=_b;if(_a.MessageID){_q.msgid=_a.MessageID;}this._on_keepalive(0);if(_l){_v+=_u.length;}this._on_xpush(_q);}else if(_b=="RTID"){if(_c=="OK"){var _x={};var _y=_a.MsgcList;for(_e=0;_e<_y.length;_e++ ){var _z=_y[_e].type;var _aa=_y[_e].id;if(_x[_z]){_x[_z].push(_aa);}else{_x[_z]=[_aa];}}this._on_success(_m,_m,_b,"","",_x);}else if(_c=="NG"){this._on_error( -1005,_b,"","");}}else{if(_c=="OK"){this.control_retry_cnt=1;if(_b=="RECT"){_f=5;_h=_a.MessageID;_i=_a.TopicId;}else if(_b=="REQD"){_f=6;_h=_a.TopicType;_i=_a.TopicId;}else if(_b=="MSGC"){var _ab=[];var _ac=_a.MsgcList.length;for(_e=0;_e<_ac;_e++ ){var _ad={};_ad.topictype=_a.MsgcList[_e].type;_ad.topicid=_a.MsgcList[_e].id;_ad.count=_a.MsgcList[_e].count;_ab.push(_ad);}_f=9;_h=this.msg_type;_i=this.msg_key;_j=_ab;}else{_f=0;_h=_a.TopicType;_i=_a.TopicId;}this._on_success(_f,_m,_b,_h,_i,_j);}else if(_c=="NG"||_c=="F0"||_c=="F1"||_c=="H0"||_c=="H1"){if(_b=="ADUI"||_b=="RGST"||_b=="UNUI"){if(_b=="ADUI"){_g= -1092;_h=_a.TopicType;_i=_a.TopicId;}else if(_b=="RGST"){_g= -1072;}else if(_b=="UNUI"){_g= -1003;_h=_a.TopicType;_i=_a.TopicId;}this._on_error(_g,_b,_h,_i);return;}if(_b==this.action&&_a.TopicType==this.msg_type&&_a.TopicId==this.msg_key){this.control_retry_cnt++ ;this.commandXPush(this.action,this.msg_type,this.msg_key,this.type);}}}};_pXPushController._close=function(_a){this._is_connected=false;if(this._is_created){switch(_a){case 1000:this.InitServerKey();break;case 1002:this.ip_idx++ ;this._on_error( -300,"AUTH");this._connect();break;case 1006:this.InitServerKey();this._on_error( -100);break;default:break;}}};_pXPushController._findLayout=function(_a){var _b=null;var _c=this.layoutlist;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_b=_c[_e];if(_b.id==_a){break;}}return _b;};_pXPushController._findLayoutIndex=function(_a){var _b= -1;var _c=null;var _d=this.layoutlist;var _e=_d.length;for(var _f=0;_f<_e;_f++ ){_c=_d[_f];if(_c.id==_a){_b=_f;break;}}return _b;};_pXPushController._hasKey=function(_a){var _b=this._findLayout(_a);if(_b){if(_b.id==_a){var _c,_d,_e;var _f=_b.listfield;var _g=false;for(_c=0,_d=_f.length;_c<_d;_c++ ){_e=_f[_c];_g=_e.key;if(_g){break;}}if(!_g){this._on_error( -703);return false;}if(_b.noreg){return false;}}}else{this._on_error( -703);return false;}return true;};_pXPushController.FindKey=function(_a,_b){var _c=[ -1, -1];for(var _f=0,_g=this._serverkeylist.length;_f<_g;_f++ ){var _d=this._serverkeylist[_f];if(_d.type==_a){_c[0]=_f;for(var _h=0,_i=_d.keys.split(","),_j=_i.length;_h<_j;_h++ ){var _e=_i[_h];if(_e==_b){_c[1]=_h;break;}}break;}}return _c;};_pXPushController.AddServerKey=function(_a,_b){var _c={"type":_a,"keys":_b};var _d=this.FindKey(_a,_b);if(_d[0]== -1){this._serverkeylist.push(_c);return true;}else if(_d[1]== -1){var _e=this._serverkeylist[_d[0]];_e.keys+=","+_b;return true;}return false;};_pXPushController.DelServerKey=function(_a,_b){var _c=this.FindKey(_a,_b);if(_c[0]> -1&&_c[1]> -1){var _d=this._serverkeylist[_c[0]];var _e=_d.keys.split(",");_e.splice(_c[1],1);_d.keys=_e.join(",");if(_e.length==0){this._serverkeylist.splice(_c[0],1);}return true;}return false;};_pXPushController.InitServerKey=function(){this._serverkeylist=[];};delete _pXPushController;nexacro.SockJSWrapper=function(_a,_b,_c,_d,_e,_f,_g){SockJS.call(this,_a,_b,_c);this.userid=_d;this.sessionid=_e;this.interval_id= -1;this.projectid=_f?_f:"";this._xpush_controller=_g;};var _pSockJSWrapper=nexacro._createPrototype(SockJS,nexacro.SockJSWrapper);nexacro.SockJSWrapper.prototype=_pSockJSWrapper;_pSockJSWrapper._destroy=function(){clearInterval(this.interval_id);};_pSockJSWrapper.sockjsKeepalive=function(){var _a={Action:'KEEP'};this.sockjsSend(JSON.stringify(_a));};_pSockJSWrapper.sockjsDisconnect=function(){clearInterval(this.interval_id);var _a={Action:'BYEC'};this.sockjsSend(JSON.stringify(_a));};_pSockJSWrapper.sockjsAckn=function(_a){var _b={Action:'ACKN','UserID':this.userid,'MessageID':_a};if(this._xpush_controller.protocolversion==3){_b["ProjectID"]=this.projectid;}this.sockjsSend(JSON.stringify(_b));};_pSockJSWrapper.sockjsCommand=function(_a,_b,_c,_d,_e){var _f={'Action':_a,'UserID':_d,'TopicType':_b,'TopicId':_c};if(_a=="ADDF"||_a=="DELF"){_f={'Action':_a,'TopicType':_b,'TopicId':_c};}else if(_a=="MSGC"||_a=="ADUI"||_a=="UNUI"){_f={'Action':_a,'UserID':_d,'TopicType':_b,'TopicId':_c};if(this._xpush_controller.protocolversion==3){_f["ProjectID"]=_e?_e:this.projectid;}}else if(_a=="RECT"){_f={'Action':_a,'UserID':_d,'MessageID':_b};if(this._xpush_controller.protocolversion==3){_f["ProjectID"]=_e?_e:this.projectid;}}else if(_a=="RGST"||_a=="UNRG"){return;}else if(_a=="REQD"){_f={'Action':_a,'UserID':_d?_d:this.userid,'TopicType':_b,'TopicId':_c};if(this._xpush_controller.protocolversion==3){_f["ProjectID"]=this.projectid;}}else if(_a=="RTID"){if(this._xpush_controller.protocolversion==3){_f={'Action':_a,'ProjectID':_e?_e:this.projectid,'UserID':_d?_d:this.userid};}else{return;}}this.sockjsSend(JSON.stringify(_f));};_pSockJSWrapper.sockjsSend=function(_a){try{this.send(_a);}catch(e){nexacro._settracemsg(e);}};_pSockJSWrapper.onopen=function(){var _a={'Action':'AUTH','ID':this.userid,'PW':this.sessionid};if(this._xpush_controller.protocolversion==3){_a["ProjectID"]=this.projectid;}this.sockjsSend(JSON.stringify(_a));var _b=this;if(_b){_b.sockjsKeepalive();}this.interval_id=setInterval(function(){if(_b){_b.sockjsKeepalive();}},(this._xpush_controller.keepalivetime* 1000));};_pSockJSWrapper.onmessage=function(_a){var _b=this._xpush_controller;if(_b){_b._message(_a.data);}};_pSockJSWrapper.onerror=nexacro._emptyFn;_pSockJSWrapper.onclose=function(_a){var _b=this._xpush_controller;if(_b){_b._close(_a.code);}};delete _pSockJSWrapper;}else{nexacro._XPushController=function(_a){this.linkedcontrol=_a;this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=_a;var _b='""';var _c='{"id":'+this._id+', "div":"XPush", "method":"constructor", "params":'+_b+'}';nexacro.Device.exec(_c);};var _pXPushController=nexacro._createPrototype(nexacro.Object,nexacro._XPushController);nexacro._XPushController.prototype=_pXPushController;_pXPushController.handle=null;_pXPushController.retry=1;_pXPushController.controlretry=5;_pXPushController.layouturl="";_pXPushController.keepalivetime=30;_pXPushController.timeout=30;_pXPushController.keeptimeout=60;_pXPushController.debug=false;_pXPushController.projectid="";_pXPushController.protocolversion=2;_pXPushController.create=nexacro._emptyFn;_pXPushController.destroy=function(){delete nexacro.Device._userCreatedObj[this._id];var _a='""';var _b='{"id":'+this._id+', "div":"XPush", "method":"destroy", "params":'+_a+'}';nexacro.Device.exec(_b);};_pXPushController.setXPushAsync=nexacro._emptyFn;_pXPushController.setXPushControlRetry=function(_a){this.controlretry=_a;};_pXPushController.setXPushDebug=function(_a){this.debug=_a;};_pXPushController.setXPushKeepAliveTime=function(_a){this.keepalivetime=_a;};_pXPushController.setXPushKeepTimeout=function(_a){this.keeptimeout=_a;};_pXPushController.setXPushTimeout=function(_a){this.timeout=_a;};_pXPushController.setXPushLayoutURL=function(_a){this.layouturl=_a;};_pXPushController.setXPushRetry=function(_a){this.retry=_a;};_pXPushController.setXPushProjectId=function(_a){this.projectid=_a;};_pXPushController.setXPushProtocolVersion=function(_a){this.protocolversion=_a;};_pXPushController.connectXPush=function(_a,_b,_c){var _d=this.linkedcontrol;var _e=this.retry;if(nexacro.Device.publicNumCheck(_e)){if(_e>=0){_e=Number(_e);}}var _f=this.layouturl;if(_f.substring(0,4).toLowerCase()=="url("){_f=_f.substring(5,_f.length-2);}var _g=_d._findForm(_d.parent);if(_g){if(_f.indexOf("%")<0){_f=nexacro._getServiceLocation(_f,_g._getRefFormBaseUrl());}}var _h='{ "strUserID":"'+_a;_h+='", "strSessionID":"'+_b;_h+='", "protocolversion":"'+this.protocolversion;if(this.protocolversion>=3){_h+='", "projectid":"'+this.projectid;}_h+='", "strProjectID":"'+_c;_h+='", "iplist":'+JSON.stringify(_d.iplist);_h+=', "retry":"'+_e;_h+='", "controlretry":"'+this.controlretry;_h+='", "layouturl":"'+_f;_h+='", "keepalivetime":"'+this.keepalivetime;_h+='", "keeptimeout":"'+this.keeptimeout;_h+='", "timeout":"'+this.timeout;_h+='", "commandlist":'+JSON.stringify(_d.commandlist);_h+='}';var _i='{"id":'+this._id+', "div":"XPush", "method":"connect", "params":'+_h+'}';nexacro.Device.exec(_i);};_pXPushController.disconnectXPush=function(){var _a='{"id":'+this._id+', "div":"XPush", "method":"disconnect", "params":""}';var _b=this.linkedcontrol;if(_b){_b.commandlist.length=0;}nexacro.Device.exec(_a);};_pXPushController.sendResponseXPush=function(_a){var _b='{"msgid":"'+_a+'"}';var _c='{"id":'+this._id+', "div":"XPush", "method":"sendResponse", "params":'+_b+'}';nexacro.Device.exec(_c);};_pXPushController.requestMessageXPush=function(_a,_b){var _c="";var _d,_e;for(_d=0,_e=_b.length;_d<_e;_d++ ){if(_d>1){_c+=",\""+(_b[_d])+"\"";}else{_c+="\""+(_b[_d])+"\"";}}var _f='{"messagetype":"'+_a+'", "messagekeys":['+_c+']}';var _g='{"id":'+this._id+', "div":"XPush", "method":"requestMessage", "params":'+_f+'}';nexacro.Device.exec(_g);};_pXPushController.fireErrorEventXPush=function(){this._on_error( -701);};_pXPushController.commandXPush=function(_a){var _b="";var _c=_a.actiontype;if(_c=="ADDF"){var _d=_a.type;_b='{"type":"'+_d.toLowerCase()+'","parameters":'+JSON.stringify(_a)+'}';}else{_b=JSON.stringify(_a);}var _e='{"id":'+this._id+', "div":"XPush", "method": "'+_c+'", "params":'+_b+'}';nexacro.Device.exec(_e);};_pXPushController._on_xpush=function(_a){var _b=this.linkedcontrol;if(_b){var _c=nexacro._executeEvalStr("("+_a+")");var _d=_c.recvdata;if(_d.datalist){for(var _e=0;_e<_d.datalist.length;_e++ ){_d.datalist[_e].item=nexacro.Device.decodeString(_d.datalist[_e].item);}}if(_c.action){_d.action=_c.action;}if(_c.messageid){_d.msgid=_c.messageid;}_b._on_xpush(_d);}};_pXPushController._on_success=function(_a){var _b=this.linkedcontrol;if(_b){var _c={};for(var _f=0;_f<_a.returnvalue.length;_f++ ){var _d=_a.returnvalue[_f]["topictype"];var _e=_a.returnvalue[_f]["topicid"];if(_c[_d]){_c[_d].push(_e);}else{_c[_d]=[_e];}}_a.returnvalue=_c;if(_b._currentipinfo==null){_b._currentipinfo=[];}_b._currentipinfo.ip=_a.serverip;_b._currentipinfo.port=_a.serverport;_b._on_success(_a.reason,_a.action,_a.classtype,_a.messagetype,_a.messagekey,_a.returnvalue);}};_pXPushController._on_error=function(_a){var _b=this.linkedcontrol;if(_b){if(typeof (_a)=="object"){if(_b._currentipinfo==null){_b._currentipinfo=[];}_b._currentipinfo.ip=_a.serverip;_b._currentipinfo.port=_a.serverport;_b._on_error(_a.errorcode,_a.classtype,_a.messagetype,_a.messagekey);}else{_b._on_error(arguments[0],arguments[1]);}}};_pXPushController._on_keepalive=function(_a){var _b=this.linkedcontrol;if(_b){_b._on_keepalive(_a.type);}};delete _pXPushController;}}if(nexacro._Browser=="Runtime"){nexacro._XPushController=function(_a){this.linkedcontrol=_a;};var _pXPushController=nexacro._createPrototype(nexacro.Object,nexacro._XPushController);nexacro._XPushController.prototype=_pXPushController;_pXPushController.handle=null;_pXPushController.retry=1;_pXPushController.controlretry=5;_pXPushController.layouturl="";_pXPushController.keepalivetime=30;_pXPushController.timeout=30;_pXPushController.keeptimeout=60;_pXPushController.projectid="";_pXPushController.protocolversion=2;_pXPushController.create=function(){var _a=this.linkedcontrol;var _b=_a._getWindow();if(_b&&_b.handle){this.handle=nexacro.__createXPushHandle(this,_b.handle);nexacro.__setXPushHandleOnEvent(this.handle,this._on_xpush,this._on_success,this._on_error,this._on_keepalive);nexacro.__setXPushHandleOnFunction(this.handle,this._getRandomIPInfo,this._setError);}};_pXPushController.destroy=function(){nexacro.__destroyXPushHandle(this.handle);this.handle=null;this.linkedcontrol=null;};_pXPushController.setXPushAsync=function(_a){var _b=this.handle;if(_b){nexacro.__setXPushHandleAsync(_b,_a);}};_pXPushController.setXPushControlRetry=function(_a){this.controlretry=_a;var _b=this.handle;if(_b){nexacro.__setXPushHandleControlRetry(_b,_a);}};_pXPushController.setXPushDebug=function(_a){var _b=this.handle;if(_b){nexacro.__setXPushHandleDebug(_b,_a);}};_pXPushController.setXPushKeepAliveTime=function(_a){this.keepalivetime=_a;var _b=this.handle;if(_b){nexacro.__setXPushHandleKeepAliveTime(_b,_a);}};_pXPushController.setXPushKeepTimeout=function(_a){this.keeptimeout=_a;};_pXPushController.setXPushTimeout=function(_a){this.timeout=_a;};_pXPushController.setXPushLayoutURL=function(_a){var _b=this.handle;if(_b){if(nexacro._OS!="Android"){var _c=_a;if(_c.substring(0,4).toLowerCase()=="url("){_c=_c.substring(5,_c.length-2);}var _d=this.linkedcontrol._findForm(this.linkedcontrol.parent);if(_d){if(_c.indexOf("%")<0){_a=nexacro._getServiceLocation(_c,_d._getRefFormBaseUrl());}}}nexacro.__setXPushHandleLayoutURL(_b,_a);}};_pXPushController.setXPushRetry=function(_a){this.retry=_a;var _b=this.handle;if(_b){nexacro.__setXPushHandleRetry(_b,_a);}};_pXPushController.setXPushProjectId=function(_a){this.projectid=_a;};_pXPushController.setXPushProtocolVersion=function(_a){this.protocolversion=_a;var _b=this.handle;if(_b){nexacro.__setXPushHandleProtocolversion(_b,_a);}};_pXPushController.connectXPush=function(_a,_b,_c){var _d=this.handle;if(_d){this.linkedcontrol._resetIPList();nexacro.__connectXPushHandle(_d,_a,_b,_c,this.retry,this.timeout,this.controlretry,this.keeptimeout);}};_pXPushController.disconnectXPush=function(){var _a=this.handle;if(_a){nexacro.__disconnectXPushHandle(_a);}};_pXPushController.sendResponseXPush=function(_a){var _b=this.handle;if(_b){nexacro.__sendResponseXPushHandle(_b,_a);}};_pXPushController.requestMessageXPush=function(_a,_b){var _c=this.handle;if(_c){nexacro.__requestMessageXPushHandle(_c,_a,_b);}};_pXPushController.fireErrorEventXPush=function(){var _a=this.handle;if(_a){nexacro.__fireXPushHandleErrorEvent(_a, -701);}};_pXPushController.commandXPush=function(_a){var _b=this.handle;if(_b){var _c="";if(this.protocolversion==3){_c=_a.projectid||this.projectid;}nexacro.__commandXPushHandle(_b,_a.actiontype,_a.messagetype,_a.messagekey,_a.type,_a.userid,_c);}};_pXPushController._on_xpush=function(_a){var _b=this.linkedcontrol;if(_b){_b._on_xpush(_a);}};_pXPushController._on_success=function(_a,_b,_c,_d,_e,_f){var _g=this.linkedcontrol;if(_g){if(_b==11){var _h={};for(var _k=0;_k<_f.length;_k++ ){var _i=_f[_k]["topictype"];var _j=_f[_k]["topicid"];if(_h[_i]){_h[_i].push(_j);}else{_h[_i]=[_j];}}_f=_h;}_g._on_success(_a,_b,_c,_d,_e,_f);}};_pXPushController._on_error=function(_a,_b,_c,_d){var _e=this.linkedcontrol;if(_e){_e._on_error(_a,_b,_c,_d);}};_pXPushController._on_keepalive=function(_a){var _b=this.linkedcontrol;if(_b){_b._on_keepalive(_a);}};_pXPushController._getRandomIPInfo=function(){var _a=this.linkedcontrol;if(!_a){return null;}return _a._getRandomIPInfo();};_pXPushController._setError=function(_a,_b){var _c=this.linkedcontrol;if(_c){_c._setError(_a,_b);}};delete _pXPushController;}if(!nexacro.XPush){nexacro.XPushEventInfo=function(_a,_b,_c,_d,_e){this.eventid=_a;this.action=_b;this.message=_e;this.serverip=_c;this.serverport=_d;this.returnvalue=null;if(this.action==11){this.returnvalue=_e.returnvalue;}else{if(_e&&_e.returnvalue!=undefined&&_e.returnvalue[0]!=undefined){this.returnvalue=_e.returnvalue[0].count;}}};var _pXPushEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.XPushEventInfo);nexacro.XPushEventInfo.prototype=_pXPushEventInfo;_pXPushEventInfo._type_name="XPushEventInfo";delete _pXPushEventInfo;_pXPushEventInfo=null;nexacro.XPushErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_a;this.action=_b;this.errormsg=_c;this.errortype="ObjectError";this.message=_g;this.serverip=_d;this.serverport=_e;this.statuscode=_f;this.reply=null;};var _pXPushErrorEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.XPushErrorEventInfo);nexacro.XPushErrorEventInfo.prototype=_pXPushErrorEventInfo;_pXPushErrorEventInfo._type_name="XPushErrorEventInfo";delete _pXPushErrorEventInfo;_pXPushErrorEventInfo=null;nexacro.XPushKeepAliveEventInfo=function(_a,_b){this.eventid=_a;this.type=_b;};var _pXPushKeepAliveEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.XPushKeepAliveEventInfo);nexacro.XPushKeepAliveEventInfo.prototype=_pXPushKeepAliveEventInfo;_pXPushKeepAliveEventInfo._type_name="XPushKeepAliveEventInfo";delete _pXPushErrorEventInfo;_pXPushErrorEventInfo=null;nexacro.CommandControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.actiontype=_a;this.callback=_g;this.check=_i?_i:"0";this.messagekey=_c;this.messagetype=_b;this.objdataset=_e;this.objform=_d;this.row=nexacro._isNull(_h)?0:_h;this.type=_f?_f:"update";this.useactiveformcallback=_j?nexacro._toBoolean(_j):false;this.userid=_k?_k:"";this.projectid=_l?_l:"";};var _pCommandControl=nexacro.CommandControl.prototype=nexacro._createPrototype(nexacro.EventSinkObject);_pCommandControl._type_name="CommandControl";_pCommandControl.destroy=function(){};_pCommandControl.equal=function(_a){if(this.callback!=_a.callback){return false;}if(this.check!=_a.check){return false;}if(this.messagekey!=_a.messagekey){return false;}if(this.messagetype!=_a.messagetype){return false;}if(this.objdataset!==_a.objdataset){return false;}if(this.objform!==_a.objform){return false;}if(this.row!=_a.row){return false;}if(this.type!=_a.type){return false;}if(this.useactiveformcallback!=_a.useactiveformcallback){return false;}if(this.userid!=_a.userid){return false;}return true;};_pCommandControl.toJSON=function(_a){return {"_id":this._id,"messagetype":this.messagetype,"messagekey":this.messagekey};};_pCommandControl.remove=function(_a){return (_a<0||_a>this.length)?this:this.slice(0,_a).concat(this.slice(_a+1,this.length));};_pCommandControl=null;delete _pCommandControl;nexacro.PushMessage=function(_a,_b,_c,_d){this.messageid=_a||"";this.messagetype=_b||"";this.messagekey=_c||"";this.returnvalue=_d||"";};var _pPushMessage=nexacro.PushMessage.prototype=nexacro._createPrototype(nexacro.EventSinkObject);_pPushMessage._type_name="PushMessage";_pPushMessage=null;delete _pPushMessage;nexacro.XPush=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._xpush_controller=new nexacro._XPushController(this);this._xpush_controller.create();this.commandlist=[];this.iplist=[];};var _pXPush=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.XPush);nexacro.XPush.prototype=_pXPush;_pXPush._type_name="XPush";_pXPush.enableevent=true;_pXPush.async=true;_pXPush.controlretry=5;_pXPush.debug=false;_pXPush.errorcode=null;_pXPush.errormsg=null;_pXPush.keepalivetime=30;_pXPush.keeptimeout=60;_pXPush.layouturl="";_pXPush.retry=1;_pXPush.sessionid="";_pXPush.timeout=30;_pXPush.userid="";_pXPush.projectid="";_pXPush.protocolversion=2;_pXPush._connectSuccess=false;_pXPush._registerDeviceSuccess=false;_pXPush._currentipinfo=null;_pXPush._event_list={"onsuccess":1,"onerror":1,"onkeepalive":1};nexacro.XPushAction={AUTH:0,BYEC:1,ADDF:2,DELF:3,REQD:4,RECT:5,RGST:6,UNRG:7,ADUI:8,UNUI:9,MSGC:10,RTID:11};_pXPush._XPushErrorCode={BYEC: -401,RECT: -901,REQD: -902,RGST: -1001,UNRG: -1001,ADUI: -1002,UNUI: -1003,MSGC: -1004,RTID: -1005};_pXPush._XPushErrorMessage={"-100":"object_push_send_byec","-101":"object_push_socket_timeout","-200":"object_push_fail_command_auth","-201":"object_push_fail_all_command_auth","-202":"object_push_fail_data_auth","-300":"object_push_fail_connect","-301":"object_push_fail_send_receive","-302":"object_push_connected_already","-401":"object_push_fail_disconnect","-501":"object_push_fail_suspend","-601":"object_push_fail_resume","-701":"object_push_fail_command","-702":"object_push_notfound_layouturl","-703":"object_push_invalid_layouturl","-801":"object_push_fail_protocol_version","-901":"object_push_fail_rect","-902":"object_push_fail_reqd","-1001":"object_push_fail_rgst_unrg","-1002":"object_push_fail_adui","-1003":"object_push_fail_unui","-1004":"object_push_fail_msgc","-1005":"object_push_fail_rtid","-1072":"object_push_fail_already_device_token_exists","-1092":"object_push_fail_already_topic_exists"};_pXPush.destroy=function(){if(this._xpush_controller){this._xpush_controller.destroy();this._xpush_controller=null;}if(this.parent){this.parent.removeChild(this.id);this.parent=null;}nexacro._EventSinkObject.prototype.destroy.call(this);};_pXPush._findForm=function(_a){var _b=_a;while(_b&&_b._is_form==false){_b=_b.parent;}return _b;};_pXPush._getWindow=function(){var _a=this.parent;if(_a&&_a._getWindow){return _a._getWindow();}return null;};_pXPush.set_commandlist=nexacro._emptyFn;_pXPush.set_errorcode=nexacro._emptyFn;_pXPush.set_errormsg=nexacro._emptyFn;_pXPush.set_name=function(_a){this.id=this.name=_a;};_pXPush.set_enableevent=function(_a){_a=nexacro._toBoolean(_a);if(this.enableevent!=_a){this.enableevent=_a;}};_pXPush.set_async=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);this.async=_a;this.on_apply_async();return true;};_pXPush.on_apply_async=function(){var _a=this._xpush_controller;if(_a){_a.setXPushAsync(this.async);}};_pXPush.set_controlretry=function(_a){_a=parseInt(_a);if(_a===undefined||_a===null||!nexacro._isNumber(_a)||_a<0){_a=5;}if(this.controlretry!=_a){this.controlretry=_a;}this.on_apply_controlretry();};_pXPush.on_apply_controlretry=function(){var _a=this._xpush_controller;if(_a){_a.setXPushControlRetry(this.controlretry);}};_pXPush.set_debug=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);if(this.debug!=_a){this.debug=_a;}this.on_apply_debug();};_pXPush.on_apply_debug=function(){var _a=this._xpush_controller;if(_a){_a.setXPushDebug(this.debug);}};_pXPush.set_iplist=function(_a){this.iplist=[];if(_a==="undefined"||_a===null||_a===""){return true;}var _b=["tcp","tcps"];var _c=["http","https"];var _d;var _e=[];var _f,_g,_h;if(_a.indexOf(",")>=0){_e=_a.split(",");}else{_e.push(_a);}for(var _j=0;_j<_e.length;_j++ ){_d=_e[_j];_d=_d.replace(/(^\s*)|(\s*$)/gi,"");_d=_d.split(":");_f=_d[0];if(_c.indexOf(_f)> -1||_b.indexOf(_f)> -1){_g=_d[1].split("//")[1];_h=0;if(_d[2]){var _i=_d[2].split("/");if(_i&&_i.length>0){_h=_i[0].valueOf();for(var _k=1;_k<_i.length;_k++ ){if(_i[_k]){_g+="/"+_i[_k];}}}else{_h=_d[2].valueOf();}}}else{_f="tcp";_g=_d[0];_h=_d[1]?_d[1].valueOf():"";}if(this._isWebPush()){if(_b.indexOf(_f)> -1){continue;}}else{if(_c.indexOf(_f)> -1){continue;}}this.iplist.push({"type":_f,"ip":_g,"port":_h,"retry":false});}return true;};_pXPush.set_keepalivetime=function(_a){_a=parseInt(_a);if(_a===undefined||_a===null||!nexacro._isNumber(_a)||_a<0){_a=30;}if(this.keepalivetime!=_a){this.keepalivetime=_a;}this.on_apply_keepalivetime();};_pXPush.on_apply_keepalivetime=function(){var _a=this._xpush_controller;if(_a){_a.setXPushKeepAliveTime(this.keepalivetime);}};_pXPush.set_keeptimeout=function(_a){_a=parseInt(_a);if(_a===undefined||_a===null||!nexacro._isNumber(_a)||_a<=0){_a=60;}if(this.keeptimeout!=_a){this.keeptimeout=_a;}this.on_apply_keeptimeout();};_pXPush.on_apply_keeptimeout=function(){var _a=this._xpush_controller;if(_a){_a.setXPushKeepTimeout(this.keeptimeout);}};_pXPush.set_layouturl=function(_a){if(_a===undefined||_a===null){_a="";}if(this.layouturl!=_a){this.layouturl=_a;}this.on_apply_layouturl();};_pXPush.on_apply_layouturl=function(){var _a=this.layouturl;if(_a!=""){var _b=this._xpush_controller;if(_b){_b.setXPushLayoutURL(_a);}}};_pXPush.set_retry=function(_a){_a=parseInt(_a);if(_a===undefined||_a===null||!nexacro._isNumber(_a)||_a<0){_a=1;}if(this.retry!=_a){this.retry=_a;}this.on_apply_retry();};_pXPush.on_apply_retry=function(){var _a=this._xpush_controller;if(_a){_a.setXPushRetry(this.retry);}};_pXPush.set_timeout=function(_a){_a=parseInt(_a);if(_a===undefined||_a===null||!nexacro._isNumber(_a)||_a<=0){_a=30;}if(this.timeout!=_a){this.timeout=_a;}this.on_apply_timeout();};_pXPush.on_apply_timeout=function(){var _a=this._xpush_controller;if(_a){_a.setXPushTimeout(this.timeout);}};_pXPush.set_userid=function(_a){if(_a===undefined||_a===null){_a="";}if(this.userid!=_a){this.userid=_a;}};_pXPush.set_sessionid=function(_a){if(_a===undefined||_a===null){_a="";}if(this.sessionid!=_a){this.sessionid=_a;}};_pXPush.set_projectid=function(_a){_a=nexacro._toString(_a);if(this.projectid!==_a){this.projectid=_a;}this.on_apply_projectid();};_pXPush.on_apply_projectid=function(){var _a=this._xpush_controller;if(_a){_a.setXPushProjectId(this.projectid);}};_pXPush.set_protocolversion=function(_a){var _b=nexacro._parseInt(_a,2);if(_b<0){_b=2;}if(this.protocolversion!=_b){this.protocolversion=_b;}this.on_apply_protocolversion();};_pXPush.on_apply_protocolversion=function(){var _a=this._xpush_controller;if(_a){_a.setXPushProtocolVersion(this.protocolversion);}};_pXPush.subscribe=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=this._xpush_controller;if(_j){if(nexacro._isNull(_c)||nexacro._isNull(_d)||_a===undefined||_a===null||_a===""||_b===undefined||_b===null||_b===""||_e===undefined||_e===null||_e==""||_f===undefined||_f===null||_f==""){_j.fireErrorEventXPush();return;}_e=_e.toLowerCase();var _k=["append","insert","replace","update","allupdate","updateorappend"];if(_k.indexOf(_e)== -1){_j.fireErrorEventXPush();return;}_f=_f.toString();if(!_c[_f]){_j.fireErrorEventXPush();return;}var _l,_m;var _n;var _o=this.commandlist;var _p=new nexacro.CommandControl("ADDF",_a,_b,_c,_d,_e,_f,_g,_h,_i);for(_l=0,_m=_o.length;_l<_m;_l++ ){_n=_o[_l];if(_n.equal(_p)){break;}}if(_l==_m){_o.push(_p);}_j.commandXPush(_p);}};_pXPush.unsubscribe=function(_a,_b,_c,_d,_e,_f){var _g=this._xpush_controller;if(_g){if(nexacro._isNull(_c)||nexacro._isNull(_d)||_a===undefined||_a===null||_a===""||_b===undefined||_b===null||_b===""||_e===undefined||_e===null||_e==""||_f===undefined||_f===null||_f==""){_g.fireErrorEventXPush();return;}_e=_e.toLowerCase();var _h=["append","insert","replace","update","allupdate","updateorappend"];if(_h.indexOf(_e)== -1){_g.fireErrorEventXPush();return;}_f=_f.toString();if(!_c[_f]){_g.fireErrorEventXPush();return;}var _i=new nexacro.CommandControl("DELF",_a,_b,_c,_d,_e,_f);_g.commandXPush(_i);}};_pXPush.registerDevice=function(){var _a=this._xpush_controller;if(_a){var _b="RGST";if(this._connectSuccess){var _c=new nexacro.CommandControl(_b);this.commandlist.push(_c);_a.commandXPush(_c);}else{var _d=this._getErrorCode(_b);_a._on_error(_d,_b);}}};_pXPush.unregisterDevice=function(){var _a=this._xpush_controller;if(_a){var _b="UNRG";if(this._connectSuccess){var _c=new nexacro.CommandControl(_b);this.commandlist.push(_c);_a.commandXPush(_c);}else{var _d=this._getErrorCode(_b);_a._on_error(_d,_b);}}};_pXPush.registerTopic=function(_a,_b){var _c=this._xpush_controller;if(_c){var _d="ADUI";if(this._connectSuccess){var _e=new nexacro.CommandControl(_d,_a,_b);this.commandlist.push(_e);_c.commandXPush(_e);}else{var _f=this._getErrorCode(_d);_c._on_error(_f,_d);}}};_pXPush.unregisterTopic=function(_a,_b){var _c=this._xpush_controller;if(_c){var _d="UNUI";if(this._connectSuccess){var _e=new nexacro.CommandControl(_d,_a,_b);this.commandlist.push(_e);_c.commandXPush(_e);}else{var _f=this._getErrorCode(_d);_c._on_error(_f,_d);}}};_pXPush.requestMessageCount=function(_a,_b){var _c=this._xpush_controller;if(_c){var _d="MSGC";if(this._connectSuccess){var _e=new nexacro.CommandControl(_d,_a,_b);this.commandlist.push(_e);_c.commandXPush(_e);}else{var _f=this._getErrorCode(_d);_c._on_error(_f,_d);}}};_pXPush.registerTopicWithUserID=function(_a,_b,_c,_d){var _e=this._xpush_controller;if(_e){var _f="ADUI";if(this.protocolversion==3&&nexacro._isNull(_d)){_d=this.projectid;}if(this._connectSuccess){var _g=new nexacro.CommandControl(_f,_a,_b,"","","","","","","",_c,_d);this.commandlist.push(_g);_e.commandXPush(_g);}else{var _h=this._getErrorCode(_f);_e._on_error(_h,_f);}}};_pXPush.unregisterTopicWithUserID=function(_a,_b,_c,_d){var _e=this._xpush_controller;if(_e){var _f="UNUI";if(this.protocolversion==3&&nexacro._isNull(_d)){_d=this.projectid;}if(this._connectSuccess){var _g=new nexacro.CommandControl(_f,_a,_b,"","","","","","","",_c,_d);this.commandlist.push(_g);_e.commandXPush(_g);}else{var _h=this._getErrorCode(_f);_e._on_error(_h,_f);}}};_pXPush.requestMessageCountWithUserID=function(_a,_b,_c,_d){var _e=this._xpush_controller;if(_e){var _f="MSGC";if(this.protocolversion==3&&nexacro._isNull(_d)){_d=this.projectid;}if(this._connectSuccess){var _g=new nexacro.CommandControl(_f,_a,_b,"","","","","","","",_c,_d);this.commandlist.push(_g);_e.commandXPush(_g);}else{var _h=this._getErrorCode(_f);_e._on_error(_h,_f);}}};_pXPush.connect=function(_a,_b){var _c=this._xpush_controller;if(_c){if(_a==null){_a=this.userid;}if(_b==null){_b=this.sessionid;}var _d=this.protocolversion==3?this.projectid:"";_c.connectXPush(_a,_b,_d);}};_pXPush.disconnect=function(){var _a=this._xpush_controller;if(_a){var _b="BYEC";if(this._connectSuccess){this._connectSuccess=false;_a.disconnectXPush();}else{var _c=this._getErrorCode(_b);_a._on_error(_c,_b);}}};_pXPush.sendResponse=function(_a){var _b=this._xpush_controller;if(_b){var _c="RECT";if(this._connectSuccess){_b.sendResponseXPush(nexacro._toString(_a));}else{var _d=this._getErrorCode(_c);_b._on_error(_d,_c);}}};_pXPush.requestMessage=function(){if(arguments.length<2){return;}var _a=this._xpush_controller;if(_a){var _b="REQD";if(this._connectSuccess){var _c=arguments[0];var _d=new Array();for(var _f=1;_f<arguments.length;_f++ ){_d.push(arguments[_f]);}if(_d.length>0){_a.requestMessageXPush(_c,_d);}}else{var _e=this._getErrorCode(_b);_a._on_error(_e,_b);}}};_pXPush.getRegisteredTopics=function(){var _a=this._xpush_controller;if(_a){var _b="RTID";if(this._connectSuccess){var _c=new nexacro.CommandControl(_b);_a.commandXPush(_c);}else{var _d=this._getErrorCode(_b);_a._on_error(_d,_b);}}};_pXPush.getRegisteredTopicsWithUserID=function(_a,_b){var _c=this._xpush_controller;if(_c){var _d="RTID";if(this.protocolversion==3&&nexacro._isNull(_b)){_b=this.projectid;}if(this._connectSuccess){var _e=new nexacro.CommandControl(_d,"","","","","","","","","",_a,_b);_c.commandXPush(_e);}else{var _f=this._getErrorCode(_d);_c._on_error(_f,_d);}}};_pXPush.getCurrentIP=function(){if(this._currentipinfo){return this._currentipinfo.ip;}else{return null;}};_pXPush.getCurrentPort=function(){if(this._currentipinfo){return this._currentipinfo.port;}else{return null;}};_pXPush._onxpush=function(){var _a=this._xpush_controller;if(_a){_a._on_xpush.apply(_a,arguments);}};_pXPush._onsuccess=function(){var _a=this._xpush_controller;if(_a){_a._on_success.apply(_a,arguments);}};_pXPush._onerror=function(){var _a=this._xpush_controller;if(_a){_a._on_error.apply(_a,arguments);}};_pXPush._onkeepalive=function(){var _a=this._xpush_controller;if(_a){_a._on_keepalive.apply(_a,arguments);}};_pXPush._on_xpush=function(_a){var _b;var _c=new Array();var _d=new Array();var _e=new Array();var _f=new Array();var _g=new Array();for(var _y=0;_y<this.commandlist.length;_y++ ){var _h=this.commandlist[_y];var _i=_h.objdataset;if(!_i){continue;}if(_h.messagetype==_a.type){var _j= -1;var _k=_a.datalist;var _l=_k.length;var _m=false;var _n= -1;var _o="";var _p,_q,_r,_s;var _t,_u;for(var _z=0;_z<_l;_z++ ){if(_k[_z].key){_m=true;_n=_k[_z].id;_o=_k[_z].item;}}var _v=false;var _w=false;for(_z=0;_z<_l;_z++ ){_p=_k[_z];_q=_p.id;_r=_p.item;_s=_p.checkfield;if(_z==0&&_r!=_h.messagekey){break;}_t=_i.getColIndex(_q);if(_t>=0){if(_h.type=="append"){if(_j== -1){if(_h.messagekey==_r){_j=_i.addRow();_i.setColumn(_j,_t,_r);_d.push(_q);_c.push(_q);}}else{_v=true;_i.setColumn(_j,_t,_r);_d.push(_q);_c.push(_q);_b=_j;}_w=true;}else if(_h.type=="insert"){if(_j== -1){if(_h.messagekey==_r){_j=_i.insertRow(_h.row);_i.setColumn(_j,_t,_r);_d.push(_q);_c.push(_q);}}else{_v=true;_i.setColumn(_j,_t,_r);_d.push(_q);_c.push(_q);_b=_j;}_w=true;}else if(_h.type=="replace"){if(_i.getRowCount()>0){_u=_i.getColumn(0,_t);if(_u!=_r){_i.setColumn(0,_t,_r);_c.push(_q);_b=_h.row;_v=true;}_w=true;_d.push(_q);}}else if(_h.type=="update"){if(_m){if(_j== -1){if(_h.messagekey==_r){_j=_i.findRowExpr(_q+" == $0 && "+_n+" == $1",0, -1,[_r,_o]);}}else{_u=_i.getColumn(_j,_t);if(_u!=_r){_v=true;_w=true;if((_h.check=="0")||(_s&&_s==_h.check)){_i.setColumn(_j,_t,_r);_c.push(_q);_b=_j;}}}_d.push(_q);}else{this._on_error( -703);}}else if(_h.type=="allupdate"){if(_m){if(_g.length==0){do{if(_h.messagekey==_r){_j=_i.findRowExpr(_q+" == $0 && "+_n+" == $1",_j, -1,[_r,_o]);if(_j>=0){_e.push(_j);_g.push(_j);_j++ ;}}}while(_j>=0)}else{while(_g.length){_j=_g.splice(0,1);_u=_i.getColumn(_j,_t);if(_u!=_r){if((_h.check=="0")||(_s&&_s==_h.check)){_i.setColumn(_j,_t,_r);_f.push(_j+","+_q);}}}_g=_e.slice();_v=true;}_w=true;}else{this._on_error( -703);}}else if(_h.type=="updateorappend"){if(_m){if(_j== -1){if(_h.messagekey==_r){_j=_i.findRowExpr(_q+" == $0 && "+_n+" == $1",0, -1,[_r,_o]);if(_j== -1){_j=_i.addRow();_i.setColumn(_j,_t,_r);_d.push(_q);_c.push(_q);}}}else{_u=_i.getColumn(_j,_t);if(_u!=_r){_v=true;_w=true;if((_h.check=="0")||(_s&&_s==_h.check)){_i.setColumn(_j,_t,_r);_c.push(_q);_b=_j;}}}}else{this._on_error( -703);}}}}if(_a.action=="RELI"&&_a.msgid!=null){_v=true;}if(!_v||!_w){continue;}if((!_h.useactiveformcallback)||(_h.useactiveformcallback&&(_h.objform===_application.getActiveForm()))){var _x;if(_h.type=="allupdate"){_x=_h.objform[_h.callback];if(_x instanceof Function){_x.call(_h.objform,_e.join(),null,_f,"DATA",_a.action,_a.msgid);_e.splice(0,_e.length);_f.splice(0,_f.length);}}else{_x=_h.objform[_h.callback];if(_x instanceof Function){_x.call(_h.objform,_b,_c.join(),_d.join(),"DATA",_a.action,_a.msgid);_e.splice(0,_e.length);_d.splice(0,_d.length);}}}}}};_pXPush._on_success=function(_a,_b,_c,_d,_e,_f){var _g="";var _h="";var _i="";var _j="";if(_b==0){this._connectSuccess=true;}if(_c=="RECT"){_g=_d;}else if(_c=="RGST"){if(nexacro._OS=="Android"){this._registerDeviceSuccess=true;}}else if(_c=="MSGC"){_h=_d;_i=_e;_j=_f;}else if(_c=="RTID"){_j=_f;}else{if(_b!=0&&_b!=1){_h=_d;_i=_e;}}var _k=null;if(_c=="ADDF"||_c=="DELF"||_c=="REQD"||_c=="RECT"||_c=="ADUI"||_c=="UNUI"||_c=="MSGC"||_c=="RTID"){_k=new nexacro.PushMessage(_g,_h,_i,_j);}var _l;var _m=this.commandlist.length;var _n;for(_n=0;_n<_m;_n++ ){_l=this.commandlist[_n].valueOf();if(_l.messagetype==_d){if(_l.messagekey==_e&&_l.actiontype==_c){break;}}}if(_n==_m){_l=null;}if(_l&&(_c=="DELF"||_c=="ADUI"||_c=="DELF"||_c=="UNUI"||_c=="MSGC"||_c=="RGST "||_c=="UNRG")){_l.actiontype=_c;this.on_fire_onsuccess(_b,this.getCurrentIP(),this.getCurrentPort(),_k);this.commandlist.splice(_n,1);}else{this.on_fire_onsuccess(_b,this.getCurrentIP(),this.getCurrentPort(),_k);if(nexacro._OS!="iOS"&&!(nexacro._isHybrid&&nexacro._isHybrid())){if(_b==1){this._currentipinfo=null;this.commandlist=null;this.commandlist=new Array();}}}};_pXPush._on_error=function(_a,_b,_c,_d,_e){var _f=this._getActionCode(_b);var _g=this._getErrorMessage(_a);var _h="";var _i="";var _j="";var _k="";if(_b=="RECT"){_h=_c;}else{_i=_c;_j=_d;}var _l=null;if(_b=="ADDF"||_b=="DELF"||_b=="REQD"||_b=="RECT"||_b=="ADUI"||_b=="UNUI"||_b=="MSGC"){_l=new nexacro.PushMessage(_h,_i,_j,_k);}var _m;var _n=this.commandlist.length;for(var _o=0;_o<_n;_o++ ){_m=this.commandlist[_o];if(_m.messagetype==_c){if(_m.messagekey==_d){break;}}}this._setError(_a,_g);this.on_fire_onerror(_f,_g,this.getCurrentIP(),this.getCurrentPort(),_a,_l,_e);};_pXPush._on_keepalive=function(_a){this.on_fire_onkeepalive(_a);};_pXPush.on_fire_onsuccess=function(_a,_b,_c,_d){if(this.onsuccess&&this.onsuccess._has_handlers){var _e=new nexacro.XPushEventInfo("onsuccess",_a,_b,_c,_d);return this.onsuccess._fireEvent(this,_e);}return true;};_pXPush.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.XPushErrorEventInfo("onerror",_a,_b,_c,_d,_e,_f,_g);return this.onerror._fireEvent(this,_h);}return true;};_pXPush.on_fire_onkeepalive=function(_a){if(this.onkeepalive&&this.onkeepalive._has_handlers){var _b=new nexacro.XPushKeepAliveEventInfo("onkeepalive",_a);return this.onkeepalive._fireEvent(this,_b);}};_pXPush._resetIPList=function(){var _a=this.iplist.length;for(var _b=0;_b<_a;_b++ ){if(this.iplist[_b].retry){this.iplist[_b].retry=false;}}};_pXPush._getActionCode=function(_a){var _b=nexacro.XPushAction[_a];if(nexacro._isNull(_b)){return  -1;}else{return _b;}};_pXPush._getErrorCode=function(_a){var _b=this._XPushErrorCode[_a];if(nexacro._isNull(_b)){return  -701;}else{return _b;}};_pXPush._getErrorMessage=function(_a){var _b=this._XPushErrorMessage[_a];if(nexacro._isNull(_b)){return "";}else{return nexacro._getErrorMessge(_b);}};_pXPush._getRandomIPInfo=function(){var _a=this.iplist.length;if(_a>0){for(var _c=0;_c<_a;_c++ ){if(this.iplist[_c].retry==false){break;}}if(_c==_a){return null;}var _b;do{_b=Math.floor((nexacro._random()* ((_a-1)-0+1)))+0;}while(this.iplist[_b].retry)this.iplist[_b].retry=true;this._currentipinfo=this.iplist[_b];return this._currentipinfo;}return null;};_pXPush._setError=function(_a,_b){this.errorcode=_a;this.errormsg=_b;};_pXPush._isWebPush=function(){if(nexacro._Browser!="Runtime"&&!nexacro.Device._isHybrid()){return true;}return false;};_pXPush.getObject=function(_a){var _b;if(_a==undefined){_b=null;}else{_a=_a* 1;_b=nexacro.Device._userCreatedObj[_a];if(typeof _b=="undefined"||_b==null){_b=null;}}return _b;};delete _pXPush;}