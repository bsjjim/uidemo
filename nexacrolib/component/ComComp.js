//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(!nexacro.NormalDataset){nexacro.NormalDataset=function(_a,_b){nexacro.Dataset.call(this,_a,_b);this.url="";this.arguments="";this.serverdatasetid="";this.firefirstcount=0;this.firenextcount=0;this.progressload=false;this.preload=false;this._is_preloaded=false;this._is_created=false;};var _pNormalDataset=nexacro._createPrototype(nexacro.Dataset,nexacro.NormalDataset);nexacro.NormalDataset.prototype=_pNormalDataset;nexacro.NormalDataset.ROWTYPE_EMPTY=0;nexacro.NormalDataset.ROWTYPE_NORMAL=1;nexacro.NormalDataset.ROWTYPE_INSERT=2;nexacro.NormalDataset.ROWTYPE_UPDATE=4;nexacro.NormalDataset.ROWTYPE_DELETE=8;nexacro.NormalDataset.ROWTYPE_GROUP=16;nexacro.NormalDataset.REASON_LOAD=0;nexacro.NormalDataset.REASON_LOADPROCESS=1;nexacro.NormalDataset.REASON_RESET=2;nexacro.NormalDataset.REASON_LOADCONTENT=3;nexacro.NormalDataset.REASON_ASSIGN=10;nexacro.NormalDataset.REASON_COPY=11;nexacro.NormalDataset.REASON_APPEND=12;nexacro.NormalDataset.REASON_MERGE=13;nexacro.NormalDataset.REASON_DELETE=20;nexacro.NormalDataset.REASON_DELETEALL=22;nexacro.NormalDataset.REASON_CLEARDATA=23;nexacro.NormalDataset.REASON_CLEAR=24;nexacro.NormalDataset.REASON_SORTGROUP=30;nexacro.NormalDataset.REASON_FILTER=31;nexacro.NormalDataset.REASON_MOVE=32;nexacro.NormalDataset.REASON_EXCHANGE=33;nexacro.NormalDataset.REASON_CHANGELAYOUT=34;nexacro.NormalDataset.REASON_CHANGESTATUS=40;nexacro.NormalDataset.REASON_ENABLEEVENT=41;nexacro.NormalDataset.REASON_CHANGEDATAOBJECT=43;nexacro.NormalDataset.REASON_ROWCHANGE=51;nexacro.NormalDataset.REASON_ROWINDEXCHANGE=52;nexacro.NormalDataset.REASON_ROWOBJECTCHANGE=53;nexacro.NormalDataset.REASON_BINDSOURCE=90;nexacro.NormalDataset.REASON_BINDDATAOBJECT_UPDATE=70;_pNormalDataset.on_created=function(){if(this.binddataobject&&!this._binddataobject){this._binddataobject=this._findDataObject(this.binddataobject);this._loadDataObject(false);}if(this.url==""||this.preload==false){if(this.colcount>0){this._endLoad(0,"SUCCESS",3);}}if(!nexacro.isDesignMode&&this.preload&&!this._is_preloaded){if(this.url&&this.parent){var _a=[];_a.push("__preload");_a.push(this.url);_a.push(this.id);_a.push(this.serverdatasetid);var _b=_a.join('_');var _c=nexacro._getServiceLocation(this.url);var _d=this.parent._load_manager;if(_d){var _e=_d.getPreloadDataModule(this.id);if(_e){var _f=this.serverdatasetid;if(!_f){_f="output";}var _g=this.id+"="+_f;var _h=new nexacro.TransactionItem(_c,this.parent,_b,"",_g,"",0,true);_h._usewaitcursor=false;_h._loadFromData(_e);this._is_preloaded=true;}}}}if(!this._is_created){this._defaultKeyStr=this.keystring;this._defaultFilterStr=this.filterstr;}this._is_created=true;};_pNormalDataset.destroy=function(){nexacro.Dataset.prototype.destroy.call(this);this._refform=null;};_pNormalDataset.set_url=function(_a){this.url=_a;};_pNormalDataset.set_arguments=function(_a){this.arguments=_a;};_pNormalDataset.set_firefirstcount=function(_a){_a=parseInt(_a)|0;if(isFinite(_a)){this.firefirstcount=_a;}};_pNormalDataset.set_firenextcount=function(_a){_a=parseInt(_a)|0;if(isFinite(_a)){this.firenextcount=_a;}};_pNormalDataset.set_progressload=function(_a){this.progressload=nexacro._toBoolean(_a);};_pNormalDataset.set_preload=function(_a){this.preload=nexacro._toBoolean(_a);};_pNormalDataset.set_serverdatasetid=function(_a){this.serverdatasetid=_a;};_pNormalDataset._getRowcount=function(){return this.rowcount;};_pNormalDataset.on_notify_onload_dataobject=function(){this._loadDataObject(true,0);};_pNormalDataset.on_notify_onvaluechanged_dataobject=function(_a,_b){if(this.dataobjectbindmode=="twoway"){var _c=_b.dataobjectpath;var _d=_b.sourcedatasetid;if(_d==this.id){return;}if(this._isUpdatedBinddata(_c)==false){return;}var _e=_b.index;var _f=_b.value;var _g=this._getColIDFromDataobjectkey(_b.key);this._is_data_updating=true;if(_e== -1){this.loadFromDataObject();}else{var _h=this.colinfos[_g];if(_h){var _i=this.__getParsedRow(this._rawRecords[_e]);if(_i){this._setColumn(_e,_i,_h,_f);}}}this._is_data_updating=false;}};_pNormalDataset._getColIDFromDataobjectkey=function(_a){var _b=this.colinfos;if(_a){var _c="@."+_a;for(var _f=0,_g=_b.length;_f<_g;_f++ ){var _d=_b[_f];var _e=_d.datapath;if(_e){if(_e[0]=="$"){}else if(_e==_c){return _d.id;}}}}};_pNormalDataset.on_notify_ondatachanged_dataobject=function(_a,_b){if(this.dataobjectbindmode=="twoway"){var _c=false;var _d=false;var _e=this.id;this._is_data_updating=true;var _f=_b.infoarray;if(_f){for(var _u=0,_v=_f.length;_u<_v;_u++ ){var _g=_f[_u];var _h=_g.dataobjectpath;var _i=_g.sourcedatasetid;var _j=_g.index;if(_j== -1){_d=true;break;}if(_i==_e){continue;}if(this._isUpdatedBinddata(_h)==false){continue;}var _k=_g.type;var _l=_g.data;if(_k=="update"){if(_l){var _m=this._rawRecords[_j];this._copyDataObjectRowData(this._rawRecords[_j],_l);this._rawRecords[_j]._orgrow=_m;this._rawRecords[_j]._rtype=4;}}else if(_k=="add"){var _n=this._rawRecords;var _o=this._viewRecords;var _p=_n.length;var _q=[];_q._rawidx=_p;_q._rtype=(this.updatecontrol?2:1);_q._level=0;if(_o!=_n){_o[_o.length]=_q;}_n[_p]=_q;this.rowcount=_o.length;if(_l){this._addDataObjectRowData(this._rawRecords[_p],_l);}}else if(_k=="insert"){var _o=this._viewRecords;var _n=this._rawRecords;var _q=[];_q._rawidx=_j;_q._rtype=(this.updatecontrol?2:1);_q._level=0;var _r;if(_o==_n){_n.splice(_j,0,_q);this._adjustRawIdx(_j,_n.length);}else{_r=_o[_j]._rawidx;_o.splice(_j,0,_q);_n.splice(_r,0,_q);this._adjustRawIdx(_r,_n.length);}this.rowcount=_o.length;if(_l){this._addDataObjectRowData(this._rawRecords[_j],_l);}}else if(_k=="delete"){this._deleteRow(_j);}_c=true;}if(_d){this.loadFromDataObject();}else if(_c){var _s=this.rowposition;this.on_fire_onrowsetchanged( -1,"SUCCESS",43);var _t=this.rowposition;if(_k=="delete"&&_s==this.rowposition){if(_t==_j){if(this.rowcount==0){this._forcesetRowPosition( -1,51);}else{if(_t==this.rowcount){this._forcesetRowPosition(this.rowcount-1,51);}else{this._setRowPosition(_t,53,true);}}}else if(_t>_j){this._setRowPosition(_t-1,51);}}else if(_k!="update"){this._setRowPosition(_j,_s==_j?53:51,true);}}}this._is_data_updating=false;}};_pNormalDataset._isUpdatedBinddata=function(_a){var _b=false;var _c=this.dataobjectpath;if(_c==_a||_c.indexOf(_a)> -1){_b=true;}return _b;};_pNormalDataset._copyDataObjectRowData=function(_a,_b){var _c=this.colinfos;function __copyRowData_loopFn(_e){var _f=this._getPath(_c[_e]._datapath);if(_b[_f]!==undefined){_a[_e]=_b[_f];}}var _d=_b.length<_c.length?_b.length:_c.length;nexacro.__forLoop(this,0,_d,__copyRowData_loopFn);};_pNormalDataset._addDataObjectRowData=function(_a,_b){var _c=this.colinfos;function __copyRowData_loopFn(_e){var _f=this._getPath(_c[_e]._datapath);_a[_e]=_b[_f];}var _d=_b.length<_c.length?_b.length:_c.length;nexacro.__forLoop(this,0,_d,__copyRowData_loopFn);};_pNormalDataset._getPath=function(_a){if(!_a){return;}var _b=_a[0];if(_b=="@"){return _a[1];}else if(_b=="$"){}};_pNormalDataset._getPathFromColinfo=function(_a){var _b;if(!_a||!_a.datapath){return;}var _c=_a._datapath;if(!_c){_c=_a._datapath=_a.datapath.match(/[^\]\[.]+/g);}var _d=_c[0];if(_d=="@"){var _e=_c.length;if(_e==2){_b=_c[1];}else if(_e>2){_b="";for(var _f=1;_f<_e;_f++ ){_b+=_c[_f];if(_f!=_e-1){_b+=".";}}}}else if(_d=="$"){_b=_a.datapath;}return _b;};_pNormalDataset.set_binddataobject=function(_a){if(_a!=this.binddataobject){var _b=this._binddataobject;if(_b){_b._removeEventHandler("onload",this.on_notify_onload_dataobject,this);}if(!_a){this._binddataobject=null;this.binddataobject="";}else{_b=this._binddataobject=this._findDataObject(_a);if(_b){_b._setEventHandler("onload",this.on_notify_onload_dataobject,this);_b._setEventHandler("ondatachanged",this.on_notify_ondatachanged_dataobject,this);_b._setEventHandler("onvaluechanged",this.on_notify_onvaluechanged_dataobject,this);}this.binddataobject=_a;}this.on_apply_binddataobject();}return this.binddataobject;};_pNormalDataset.on_apply_binddataobject=function(){if(this._is_created){this._loadDataObject(true,3);}};_pNormalDataset.set_dataobjectpath=function(_a){this.dataobjectpath=_a;this.on_apply_dataobjectpath();};_pNormalDataset.on_apply_dataobjectpath=function(_a){var _b=this._binddataobject;if(this._is_created&&_b){this._loadDataObject(true,3);}};_pNormalDataset.set_dataobjectbindmode=function(_a){this.dataobjectbindmode=_a;};_pNormalDataset.load=function(_a,_b){var _c;if(this._refform){_c=this._refform._getRefFormBaseUrl();}var _d=nexacro._getServiceLocation(this.url,_c);if(_d.length&&this.parent){var _e="__normaldataset_loadurl_"+this.id;var _f=this.parent._load_manager;if(_f){var _g=this.serverdatasetid;if(!_g){_g="output";}var _h=this.id+"="+_g;var _i=nexacro._getServiceObject(this.url,true);_f.loadDataModule(_d,_e,"",_h,this.arguments,null,_a,_b,false,_i);}}else{this._endLoad( -1,"empty url",3);}};_pNormalDataset.append=function(_a){this._append(_a,true,0);};_pNormalDataset._append=function(_a,_b,_c){var _d;if(this._refform){_d=this._refform._getRefFormBaseUrl();}var _e=_a?_a:this.url;if(!_e){this._endLoad( -1,"empty url",0);return;}var _f=nexacro._getServiceLocation(_e,_d);if(_f&&_f.length&&this.parent){var _g="__normaldataset_appendurl_"+this.id;var _h=this.parent._load_manager;if(_h){var _i=this.serverdatasetid;if(!_i){_i="output";}var _j=this.id+"="+_i+":P";var _k=nexacro._getServiceObject(_f,true);_h.loadDataModule(_f,_g,"",_j,this.arguments,null,_b,_c,false,_k);}}else{this._endLoad( -1,"empty url",0);}};_pNormalDataset.on_preload_data=function(_a,_b,_c,_d,_e,_f,_g,_h){if(_b!=0){nexacro._onHttpSystemError(this,true,this,_d,_a,_e,_f,_g,_h);}else if(_c&&!this._is_preloaded){var _i=[];_i.push("__preload");_i.push(this.url);_i.push(this.id);_i.push(this.serverdatasetid);var _j=_i.join('_');var _k=this.serverdatasetid;if(!_k){_k="output";}var _l=this.id+"="+_k;var _m=new nexacro.TransactionItem(this.url,this.parent,_j,"",_l,"",0,true);_m._usewaitcursor=false;_m._loadFromData(_c);this._is_preloaded=true;}};_pNormalDataset._findDataObject=function(_a){if(_a&&_a.length>0){var _b;var _c=this.parent;if(_c){_b=_c[_a];if(_b&&(_b._type_name=="DataObject")){return _b;}}if(this._refform){_b=this._refform.lookup(_a);if(_b&&(_b._type_name=="DataObject")){return _b;}}}return undefined;};_pNormalDataset._loadDataObject=function(_a,_b){var _c=null;var _d=this.binddataobject;var _e=this._binddataobject;if(_d&&!_e){_e=this._binddataobject=this._findDataObject(_d);}if(_e){_c=_e.data;}this._loadFromJSONObject(_c);if(_a!==false&&this._is_created){this._endLoad(0,"SUCCESS",_b?_b:0);}if(_b==0||_b==3){var _f=nexacro.Component.prototype._getRootComponent.call(this,this.parent);if(_f&&_f._is_view&&_f._ismodeltrigger){if(this.name==_f.viewdataset){var _g=_f.parent;var _h=_g._trigger_manager;var _i="";var _j=_f;var _k=_f.getViewDataset();_i="Model Load Success";_h._notifyTrigger(_i,_k,_j);}}}};delete _pNormalDataset;}"use strict";if(!nexacro.DataObject){nexacro.DataObjectLoadEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.reason=_d;};var _pDataObjectLoadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectLoadEventInfo);nexacro.DataObjectLoadEventInfo.prototype=_pDataObjectLoadEventInfo;_pDataObjectLoadEventInfo._type_name="DataObjectLoadEventInfo";_pDataObjectLoadEventInfo=null;nexacro.DataObjectErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};var _pDataObjectErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.DataObjectErrorEventInfo);nexacro.DataObjectErrorEventInfo.prototype=_pDataObjectErrorEventInfo;_pDataObjectErrorEventInfo._type_name="DataObjectErrorEventInfo";_pDataObjectErrorEventInfo=null;nexacro.DataObjectEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.response=_c;this.serviceid=_d;this.url=_e;this.reason=_f;this.cancelable=true;this.method=_g;this.statuscode=_h;};var _pDataObjectEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectEventInfo);nexacro.DataObjectEventInfo.prototype=_pDataObjectEventInfo;_pDataObjectEventInfo._type_name="DataObjectEventInfo";nexacro.DataObjectDataChangedEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"ondatachanged";this.fromobject=this.fromreferenceobject=_a;this.infoarray=_e;};var _pDataObjectDataChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectDataChangedEventInfo);nexacro.DataObjectDataChangedEventInfo.prototype=_pDataObjectDataChangedEventInfo;_pDataObjectDataChangedEventInfo._type_name="DataObjectDataChangedEventInfo";_pDataObjectDataChangedEventInfo=null;nexacro.DataObjectValueChangedEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"onvaluechanged";this.fromobject=this.fromreferenceobject=_a;this.uid=_d;this.dataobjectpath=_e;this.index=_f;this.key=_g;this.value=_h;this.sourcedatasetid=_i;};var _pDataObjectValueChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectValueChangedEventInfo);nexacro.DataObjectValueChangedEventInfo.prototype=_pDataObjectValueChangedEventInfo;_pDataObjectValueChangedEventInfo._type_name="DataObjectValueChangedEventInfo";_pDataObjectValueChangedEventInfo=null;nexacro.DataObject=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._context_list=[];this._updatelist=[];this._remaining_updatelist=[];};var _pDataObject=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.DataObject);nexacro.DataObject.prototype=_pDataObject;_pDataObject._type_name="DataObject";_pDataObject.url="";_pDataObject.enableevent=true;_pDataObject.preload=false;_pDataObject.data=null;_pDataObject._is_preloaded=false;_pDataObject._response=undefined;_pDataObject._response_headers=undefined;_pDataObject._event_list={"onsuccess":1,"onload":1,"onerror":1,"ondatachanged":1,"onvaluechanged":1};nexacro.DataObject.REASON_LOAD=0;nexacro.DataObject.REASON_LOADCONTENT=1;nexacro.DataObject.REASON_REQUEST=2;_pDataObject.create=function(){};_pDataObject.on_created=function(){if(this.url==""||this.preload==false){if(this.data){this._endLoad(0,"SUCCESS",1);}}if(!nexacro.isDesignMode&&this.preload&&!this._is_preloaded){if(this.url&&this.parent){var _a=[];_a.push("__preload");_a.push(this.url);_a.push(this.id);_a.push(this.serverdatasetid);var _b=_a.join('_');var _c=nexacro._getServiceLocation(this.url);var _d=this.parent._load_manager;if(_d){var _e=_d.getPreloadDataObjectModule(this.id);if(_e){var _f=new nexacro.RESTAPIItem(_c,this.parent,_b,"",this,"",0,true);_f._usewaitcursor=false;_f._loadFromDataObject(_e,this);this._is_preloaded=true;}}}}this._is_created=true;};_pDataObject.destroy=function(){this.data=null;this._context_list=null;this._is_created=null;this._response=null;this._response_headers=null;if(this.parent){this.parent.removeChild(this.id);}this.parent=null;this._updatelist.length=0;this._updatelist=null;nexacro._EventSinkObject.prototype.destroy.call(this);};_pDataObject.set_data=function(_a){try{if(_a){if(typeof _a=="string"){this.data=JSON.parse(_a);}else if(typeof _a=="object"){this.data=_a;}}if(!this.data){this.data=undefined;}}catch(err){this.data=undefined;}finally{this.on_apply_data();}};_pDataObject.on_apply_data=function(){this._endLoad(0,"SUCCESS",1);};_pDataObject.set_url=function(_a){if(this.url!=_a){this.url=_a;this.on_apply_url();}};_pDataObject.on_apply_url=function(){};_pDataObject.set_preload=function(_a){this.preload=nexacro._toBoolean(_a);};_pDataObject.set_enableevent=function(_a){_a=nexacro._toBoolean(_a);if(this.enableevent!=_a){this.enableevent=_a;this._eventstat=(_a&&!this.loadstatus);this.on_apply_enableevent(_a);}};_pDataObject.on_apply_enableevent=function(_a){if(_a){this._before_fire_event=true;this.on_fire_ondatachanged( -1, -1,41,this._updatelist);this._before_fire_event=false;}};_pDataObject.serializeToString=function(_a,_b){var _c=this.data;if(_c){return JSON.stringify(_c,_a,_b);}return "";};_pDataObject.load=function(_a){var _b=this.url;var _c;_a=_a===undefined?true:_a;if(this._refform){_c=this._refform._getRefFormBaseUrl();}_b=nexacro._getServiceLocation(_b,_c);if(_b.length&&this.parent){var _d="";var _e=this.parent._load_manager;if(_e){var _f=nexacro._getServiceObject(this.url,true);_e.loadDataObjectModule(_b,_d,"",this,null,_a,undefined,false,_f);}}else{this._endLoad( -1,"empty url",1);}};_pDataObject.getObject=function(){return this.data;};_pDataObject.getObjectByPath=function(_a){return this._jsonPath(_a);};_pDataObject.request=function(_a,_b,_c,_d){var _e;if(this._refform){_e=this._refform._getRefFormBaseUrl();}var _f=nexacro._getServiceLocation(_c,_e);if(_c.length&&this.parent){var _g=this.parent._load_manager;if(_g){var _h=nexacro._getServiceObject(_c,true);var _i=_d&&_d.async!=undefined?_d.async:true;_g.loadDataObjectModule(_f,_a,_b,this,_d,_i,undefined,false,_h);}}else{this._endLoad( -1,"empty url",1);}};_pDataObject.getAllResponseHeaders=function(){if(this._response_headers){return this._parseResponseHeaders(this._response_headers);}return undefined;};_pDataObject.getResponseHeader=function(_a){if(this._response_headers){return this._parseResponseHeaders(this._response_headers,_a);}return null;};_pDataObject.getResponse=function(){return this._response;};_pDataObject.setDataValue=function(_a,_b,_c,_d,_e){if(_c== -1){this._setPathValue(_d,_b);this._before_fire_event=true;this.on_fire_onvaluechanged(0,"SUCCESS",16,"update_"+parseInt(Math.random()* 100000000),"",_c,_d,_b,_e);this._before_fire_event=false;}else{var _f=this.getObjectByPath(_a);if(_f){var _g=_f[_c];if(_g){var _h="update_"+parseInt(Math.random()* 100000000);this._setValueInKey(_g,_d,_b);this._updatelist.push({"uid":_h,"type":"update","index":_c,"data":_g,"dataobjectpath":_a,"sourcedatasetid":_e});if(this.enableevent){this._before_fire_event=true;this.on_fire_onvaluechanged(0,"SUCCESS",1,_h,_a,_c,_d,_b,_e);this._before_fire_event=false;}}}}};_pDataObject.setDataInPath=function(_a,_b,_c,_d){var _e=false;var _f=this.getObjectByPath(_a);if(_f){if(_b.length>0){var _g=this._updatelist;for(var _m=0,_n=_b.length;_m<_n;_m++ ){var _h=_b[_m];var _i=_h[0];var _c=_h[1];var _j=_h[2];var _k;if(_i=="update"){if(_e==true){_f=this.getObjectByPath(_a);_e=false;}_k=_f[_c];this._copyRowData(_k,_j);}else if(_i=="add"){_k=this._addRowData(_a,_j);_e=true;}else if(_i=="delete"){_k=this._deleteRowData(_a,_c);_e=true;}else if(_i=="insert"){_k=this._addRowData(_a,_j,_c);_e=true;}_g.push({"uid":_i+"_"+parseInt(Math.random()* 100000000),"type":_i,"index":_c,"data":_k,"dataobjectpath":_a,"sourcedatasetid":_d});}}else{var _l=_f[_c];this._copyRowData(_l,_b);this._updatelist.push({"uid":"update"+"_"+parseInt(Math.random()* 100000000),"type":"update","index":_c,"data":_l,"dataobjectpath":_a,"sourcedatasetid":_d});}if(this.enableevent){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.addDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._addRowData(_a,_b,_c);this._updatelist.push({"uid":"add"+"_"+parseInt(Math.random()* 100000000),"type":"add","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.deleteDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._deleteRowData(_a,_c);this._updatelist.push({"uid":"delete"+"_"+parseInt(Math.random()* 100000000),"type":"delete","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.insertDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._addRowData(_a,_b,_c);this._updatelist.push({"uid":"insert"+"_"+parseInt(Math.random()* 100000000),"type":"insert","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.setData=function(_a,_b,_c,_d,_e){var _f;var _g=this.getObjectByPath(_a);if(_b=="update"){_f=_g[_c];this._copyRowData(_f,_d);}else if(_b=="add"){_f=this._addRowData(_a,_d,_c);}else if(_b=="delete"){_f=_d=this._deleteRowData(_a,_c);}else if(_b=="insert"){_f=this._addRowData(_a,_d,_c);}this._updatelist.push({"uid":_b+"_"+parseInt(Math.random()* 100000000),"type":_b,"index":_c,"data":_d,"dataobjectpath":_a,"srcdatasetid":_e});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}};_pDataObject.setDataList=function(_a,_b,_c){var _d=false;var _e;var _f=this._updatelist;var _g=this.getObjectByPath(_a);if(_g){for(var _l=0,_m=_b.length;_l<_m;_l++ ){var _h=_b[_l];var _i=_h[0];var _j=_h[1];var _k=_h[2];if(_i=="update"){_e=_g[_j];this._copyRowData(_e,_k);}else if(_i=="add"){_e=this._addRowData(_a,_k);}else if(_i=="delete"){_e=this._deleteRowData(_a,_j);}else if(_i=="insert"){_e=this._addRowData(_a,_k,_j);}_f.push({"uid":_i+"_"+parseInt(Math.random()* 100000000),"type":_i,"index":_j,"data":_e,"dataobjectpath":_a,"srcdatasetid":_c});if(this.enableevent){_d=true;}}}if(_d){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,_f,_c);this._before_fire_event=false;}};_pDataObject.getChangedInfo=function(){if(this._before_fire_event){return this._remaining_updatelist;}return this._appendArray(this._updatelist,this._remaining_updatelist);};_pDataObject.clearChangedInfo=function(){this._updatelist.length=0;this._remaining_updatelist.length=0;};_pDataObject.removeChangedInfo=function(_a){var _b=this._remaining_updatelist;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c].uid=_a){_b.splice(_c,1);return _a;}}var _b=this._updatelist;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c].uid=_a){_b.splice(_c,1);return _a;}}return false;};_pDataObject.on_fire_onload=function(_a,_b,_c,_d){if(_a>=0){_a=0;_b="SUCCESS";}var _e=this.onload;if(_e&&_e._has_handlers){var _f=new nexacro.DataObjectLoadEventInfo(this,"onload",_d,_c);_e._fireEvent(this,_f);}};_pDataObject.on_fire_ondatachanged=function(_a,_b,_c,_d){if(_a>=0){_a=0;_b="SUCCESS";}var _e=this.ondatachanged;if(_e&&_e._has_handlers){var _f=new nexacro.DataObjectDataChangedEventInfo(this,"ondatachanged","",_c,_d);_e._fireEvent(this,_f);}this._remaining_updatelist=this._appendArray(this._updatelist,this._remaining_updatelist);this._updatelist.length=0;};_pDataObject.on_fire_onvaluechanged=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(_a>=0){_a=0;_b="SUCCESS";}var _j=this.onvaluechanged;if(_j&&_j._has_handlers){var _k=new nexacro.DataObjectValueChangedEventInfo(this,"onvaluechanged",_c,_d,_e,_f,_g,_h,_i);_j._fireEvent(this,_k);}this._remaining_updatelist=this._appendArray(this._updatelist,this._remaining_updatelist);this._updatelist.length=0;};_pDataObject.on_fire_onsuccess=function(_a,_b,_c,_d,_e,_f){var _g=this.onsuccess;if(_g&&_g._has_handlers){var _h=new nexacro.DataObjectEventInfo(this,"onsuccess",_a,_b,_c,_d,_e,_f);_g._fireEvent(this,_h);}};_pDataObject.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.DataObjectErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f,_g);return this.onerror._fireEvent(this,_h);}return true;};_pDataObject._on_success=function(_a,_b,_c,_d,_e,_f){var _g=this;var _h=this.on_fire_onsuccess(_a,_b,_c,2,_e,_f);if(!_g.onsuccess||(_g.onsuccess&&!_g.onsuccess.defaultprevented)&&_e!="HEAD"){this.on_onsuccess_default_action(_d,_c);}return _h;};_pDataObject.on_onsuccess_default_action=function(_a,_b){this._setContents(_a,2,_b);};_pDataObject._setContents=function(_a,_b,_c){if(_a){if(typeof _a=="string"){this.data=JSON.parse(_a);}else{this.data=_a;}this._endLoad(0,"SUCCESS",_b!=undefined?_b:1,_c?_c:"");}};_pDataObject._parse=function(_a){return JSON.parse(_a);};_pDataObject._jsonPath=function(_a){var _b=this.data;if(_b){return nexacro._JSONPath(_b,_a);}else{return null;}};_pDataObject._endLoad=function(_a,_b,_c,_d){this.on_fire_onload(_a,_b,_c,_d);};_pDataObject.on_preload_dataobject=function(_a,_b,_c,_d,_e,_f,_g,_h){if(_b!=0){this._onDataObjectRequestError(this,true,this,_d,_a,_e,_f,_g,_h);}else if(_c&&!this._is_preloaded){var _i=[];_i.push("__preload");_i.push(this.url);_i.push(this.id);_i.push(this.serverdatasetid);var _j=_i.join('_');var _k=new nexacro.RESTAPIItem(this.url,this.parent,_j,"",this,"",0,true);_k._usewaitcursor=false;_k._loadFromDataObject(_c,this);this._is_preloaded=true;}};_pDataObject._onDataObjectRequestError=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=false;var _n=nexacro.MakeCommunicationError(this,_d,_e,_f,_g,_h,_i);this._addResponseInfo(_k,_l);if(_b){var _o=nexacro.getEnvironment();if(_o){_o.on_fire_onerror(_a,"ObjectError",_n.message,_c,_f,_g,_h,_j);}_m=this.on_fire_onerror("ObjectError",_n.message,_c,_f,_g,_h,_j);}return _m;};_pDataObject._addResponseInfo=function(_a,_b){this._response=_a;this._response_headers=_b;};_pDataObject._clearResponseInfo=function(){this._response=undefined;this._response_headers=undefined;};_pDataObject._parseResponseHeaders=function(_a,_b){var _c=_a.trim().replace(/\0[\s\S]*$/g,'').split(/[\r\n]+/);var _d={};if(_b){_b=_b.toLowerCase();}for(var _i=0;_i<_c.length;_i++ ){var _e=_c[_i].split(': ');if(_e){var _f=_e[0];if(_f&&_f.indexOf("HTTP/")> -1){continue;}var _g=_e.shift();if(_g){if(_b){var _h=_g;_h=_h.toLowerCase();if(_h==_b){return _e.pop();}}_d[_g]=_e.join(': ');}}}if(_b){return null;}return _d;};_pDataObject._appendArray=function(_a,_b){return _b.concat(_a);};_pDataObject._getAbsolutePathByDataobectpath=function(_a){var _b="";var _c=_a.match(/[^\]\[.]+/g);if(_c){for(var _d=1,_e=_c.length;_d<_e;_d++ ){_b=_b+"/"+_c[_d];}return _b;}return _b;};_pDataObject._copyRowData=function(_a,_b){for(var _d in _b){if(typeof _b[_d]=="object"&&_b[_d]!=null){this._copyRowData(_a[_d],_b[_d]);}else if(_d[0]=="$"){var _c=this.getObjectByPath(_d);if(_c&&_c[0]){_c[0]=_b[_d];}}else{_a[_d]=_b[_d];}}};_pDataObject._addRowData=function(_a,_b,_c){if(!this.data){return false;}var _d=this._getRootObjectByPath(_a);if(!_d){return false;}var _e={};for(var _f in _b){if(typeof _b[_f]=="object"&&_b[_f]!=null){this._copyRowData(_e[_f],_b[_f]);}else{_e[_f]=_b[_f];}}if(_c> -1){_d.splice(_c,0,_e);}else{_d.push(_e);}return _e;};_pDataObject._deleteRowData=function(_a,_b){var _c=this._getRootObjectByPath(_a);if(!_c){return false;}return _c.splice(_b,1)[0];};_pDataObject._deleteAllRowData=function(_a){var _b=this._getRootObjectByPath(_a);if(!_b){return false;}_b.length=0;};_pDataObject._getPath=function(_a){var _b=_a[0];if(_b=="@"){return _a[1];}else if(_b=="$"){}};_pDataObject._getRootObjectByPath=function(_a){var _b=this.data;var _c;if(_b){_a=_a.slice(0,_a.lastIndexOf("["));var _d=_a.match(/[^\]\[.]+/g);var _c=_b;if(_d.length>1){for(var _e=1,_f=_d.length;_e<_f;_e++ ){_c=_c[_d[_e]];}return _c;}}return _c;};_pDataObject._setValueInKey=function(_a,_b,_c){if(_b.indexOf(".")> -1){var _d=_b.split(".");for(var _e=0,_f=_d.length;_e<_f;_e++ ){if(_e==_f-1){_a[_d[_e]]=_c;}else{_a=_a[_d[_e]];}}}else{_a[_b]=_c;}};_pDataObject._setPathValue=function(_a,_b){var _c=this.data;if(_c){var _d=_a.match(/[^\]\[.]+/g);for(var _e=1;_e<_d.length-1;_e++ ){_c=_c[_d[_e]];}if(_c){_c[_d[_e]]=_b;}}};_pDataObject=null;nexacro.RESTAPIItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){nexacro._CommunicationItem.call(this,_a,this.type,false,_i,_j);this.context=_b;this.method=_d;this.svcid=_c;this.outputdataobj=this._parseDOParam(_e);this.JSONParm=_f;this._parseJSONParam();this.datatype=(!_g?0:_g);this._sendData=this._serializeData();this._usewaitcursor=_h&&nexacro._usewaitcursor;this._remain_data=null;this._progress_data=null;this._is_unknowntype_data=false;this._recieved_data=null;this._async_progress_timer_id=null;this._check_responseXML=false;var _k=nexacro._hasCookieVariables();};var _pRESTAPIItem=nexacro._createPrototype(nexacro.TransactionItem,nexacro.RESTAPIItem);nexacro.RESTAPIItem.prototype=_pRESTAPIItem;_pRESTAPIItem.handle=null;_pRESTAPIItem.callbackList=[];_pRESTAPIItem.type="dataobject";_pRESTAPIItem.bcache=false;_pRESTAPIItem._type_name="RESTAPIItem";_pRESTAPIItem.on_load_dataobject=function(_a,_b,_c,_d,_e){var _f=this.outputdataobj;var _g;var _h=this.bcache;var _i=null;var _j=null;this._addCookieToCookieVariable(_b);if(_a&&_a._type_name=="DataObjectCache"){_h=false;_i=_a._loadDataObject(this);_g=_i[0];_a=_i[2];_j=_i[3];}else{if(_f){_f._addResponseInfo(_a,_d);}if(_a&&this._protocol<0){_a=this.on_decrypt(_a);}_i=this._deserializeData(_a);if(_h){_f=_i[1];}_g=_i[0];_j=_i[2];}if(_h){var _k=nexacro._DataObjectCacheList[this.path];if(!_k){nexacro._DataObjectCacheList[this.path]=new nexacro._DataObjectCache(_f,_c,this.version,_a,_d);}else{_k.dataobject=_f;_k.last_modified=_c?_c:"";_k.version=this.version;_k.data=_a;}}if(this._usewaitcursor){this._hideWaitCursor(this.context);}nexacro._removeCommContext(this.context);var _l=nexacro.getApplication();if(_l){_l.on_fire_oncommunication(_l,1);}var _m=this.callbackList;var _n=_m.length;if(_n>0){var _o=_g?_g[0]:0;var _p=_g?_g[1]:"SUCCESS";var _q=this.context._load_manager;var _r=_q?_q.getDataItem(this.svcid):null;if(_r){_r._is_cancel=undefined;}for(var _v=0;_v<_n;_v++ ){var _s=_m[_v];var _t=_s.target;if(_t._is_alive!=false){if(this._is_unknowntype_data){_s.callback.call(_t,this.svcid,_o,_p,"comm_fail_loaddetail",10599,this.path,this.path);}else{_s.callback.call(_t,this.svcid,_o,_a);}}}_m.splice(0,_n);}var _u=this.method;if(_f){if(_u){_f._on_success(_a,this.svcid,this.path,_j,_u,_e);}else{_f._setContents(_j,0,this.path);}_f._clearResponseInfo();}this.handle=null;};_pRESTAPIItem._parseDOParam=function(_a){var _b;if(_a){if(typeof _a=="object"){_b=_a;}else if(this.context){_b=this.context[_a];}}return _b;};_pRESTAPIItem._parseJSONParam=function(){var _a=this.JSONParm;if(!_a){return;}if(_a.postdata){this.postdata=_a.postdata;}if(_a.httpheader){this.header=_a.httpheader;}};_pRESTAPIItem._deserializeData=function(_a){if(!_a){return [[ -1,"Stream Data is null!"],[],new nexacro.Collection()];}if(_a.charAt(0)==" "){_a=_a.trim();}return this.__deserializeJSON(_a);};_pRESTAPIItem._loadFromDataObject=function(_a,_b){var _c=this._deserializeData(_a);var _d=0;var _e="SUCCESS";var _f=this.bcache;var _g=this.last_modified;var _h=_c[0];if(_h){_d=_h[0];_e=_h[1];}if(_f){_b=_c[1];var _i=nexacro._DataObjectCacheList[this.path];if(!_i){nexacro._DataObjectCacheList[this.path]=new nexacro._DataObjectCache(_b,_g,this.version);}else{_i.dataobject=_b;_i.last_modified=_g?_g:"";_i.version=this.version;}}var _j=_c[2];var _k=this.callbackList;var _l=_k.length;if(_l>0){for(var _p=0;_p<_l;_p++ ){var _m=_k[_p];var _n=_m.target;if(_n._is_alive!=false){_m.callback.call(_n,this.svcid,_d,_e);}}_k.splice(0,_l);}var _o=this.method;if(_b){if(_o){_b._on_success(_a,this.svcid,this.path,_j,_o);}else{_b._setContents(_j,0,this.path);}_b._clearResponseInfo();}this.handle=null;};_pRESTAPIItem.__deserializeJSON=function(_a,_b){var _c=0;var _d="SUCCESS";var _e=this.outputdataobj?this.outputdataobj:null;var _f;if(_a.length>0){try{_f=JSON.parse(_a);}catch(e){this._is_unknowntype_data=true;return [[ -1,"invalid nexacro communication format"],_e];}}var _g=[_c,_d];return [_g,_e,_f];};_pRESTAPIItem.on_error=function(_a,_b,_c,_d,_e,_f,_g){var _h=this.outputdataobj;if(this._usewaitcursor){this._hideWaitCursor(this.context);}var _i=this.callbackList;var _j=_i.length;var _k=false;if(_j>0){for(var _q=0;_q<_j;_q++ ){var _l=_i[_q];var _m=_l.target;if(_m._is_alive!=false){_k=_l.callback.call(_m,this.svcid, -1,"FAILED",_b,_c,this.path,_d,_e,_h,_f,_g);if(_k){if(this._usewaitcursor){this._showWaitCursor(this.context);}continue;}}}if(_k){return true;}}var _n=this.context._load_manager;var _o=_n?_n.getDataItem(this.svcid):null;if(_o&&!_o._is_cancel){return;}_i.splice(0,_j);nexacro._removeCommContext(this.context);var _p=nexacro.getApplication();if(_p){_p.on_fire_oncommunication(_p,1);}this.handle=null;};_pRESTAPIItem=null;}if(!nexacro.DomParser){nexacro.DomParseErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onerror";this.fromobject=this.fromreferenceobject=_a;this.level=_c;this.line=_d;this.column=_e;this.message=_f;this.description=_g;};var _pDomParseErrorEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DomParseErrorEventInfo);nexacro.DomParseErrorEventInfo.prototype=_pDomParseErrorEventInfo;_pDomParseErrorEventInfo._type_name="DomParseErrorEventInfo";delete _pDomParseErrorEventInfo;nexacro.DomParser=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);};var _pDomParser=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.DomParser);nexacro.DomParser.prototype=_pDomParser;_pDomParser._type_name="DomParser";_pDomParser._event_list={"onerror":1};_pDomParser.parseFromString=function(_a,_b){if(!_b||_b=="text/xml"){var _c=nexacro._parseXMLDocument(_a);if(_c){var _d=nexacro._getParserError(_c);if(_d){this.on_fire_onparseerror("error",_d.line,_d.column,_d.message,_d.desc);return null;}}return _c;}return null;};_pDomParser.on_fire_onparseerror=function(_a,_b,_c,_d,_e){if(this.onerror&&this.onerror._has_handlers){var _f=new nexacro.DomParseErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e);return this.onerror._fireEvent(this,_f);}return false;};delete _pDomParser;nexacro.XmlSerializer=function(_a,_b){this.id=this.name=_a;this.parent=_b;};var _pXmlSerializer=nexacro._createPrototype(nexacro.Object,nexacro.XmlSerializer);nexacro.XmlSerializer.prototype=_pXmlSerializer;_pXmlSerializer.serializeToString=function(_a){return nexacro._documentToXml(_a);};delete _pXmlSerializer;}if(!nexacro._IconText){nexacro._IconText=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pIconText=nexacro._createPrototype(nexacro.Component,nexacro._IconText);nexacro._IconText.prototype=_pIconText;_pIconText._type_name="IconText";_pIconText._cell_elem=null;_pIconText.text="";_pIconText.icon="";_pIconText.iconPosition="";_pIconText.textPadding="";_pIconText.textwidth=undefined;_pIconText.tabstop=false;_pIconText._textpadding=null;_pIconText._is_focus_accept=false;_pIconText._is_simple_control=true;_pIconText._is_eventinfo_control=false;_pIconText._is_fiticonsize=false;_pIconText._icon_width=0;_pIconText._icon_height=0;_pIconText.accessibilityrole="Icon";_pIconText.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._cell_elem=new nexacro.IconTextElement(_a,"icontext",this._is_fiticonsize);_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this.wordWrap){_b.setElementWordWrap(this.wordWrap);}var _d=this._textpadding||this._getCSSStyleValue("textPadding");if(_d){_b.setElementTextPadding(_d);}if(this.textwidth!=null){_b.setElementTextWidth(this.textwidth);}if(this._textdecoration){_b.setElementTextDecoration(this._textdecoration);}if(this._displaytext){_b.setElementText(this._displaytext);}var _e=this._icon||this._getCSSStyleValue("icon");if(_e){_b.setElementIcon(_e);}var _f=this.iconPosition||this._getCSSStyleValue("iconPosition");_b.setElementIconPos(_f);}};_pIconText.on_created_contents=function(_a){if(this.expr){this._on_apply_expr(this.expr);}if(this.fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}};_pIconText.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}if(this._textpadding){this._textpadding=null;}if(this._icon){this._icon=null;}};_pIconText.on_create_contents_command=function(){if(this.expr){this._on_apply_expr(this.expr);}var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pIconText.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this.fittocontents!="none"){this._update_position();}};_pIconText.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pIconText.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pIconText.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){if(!this.textPadding){_c.setElementTextPadding(this._getCSSStyleValue("textPadding",_a,_b));}if(!this.icon){_c.setElementIcon(this._getCSSStyleValue("icon",_a,_b));}if(!this.iconPosition){_c.setElementIconPos(this._getCSSStyleValue("iconPosition",_a,_b));}var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}};_pIconText.on_get_accessibility_label=function(){return this.text;};_pIconText._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j="none";var _k;var _l=false;if(_f.search("\n")> -1){_l=true;}if(this.fittocontents=="height"){_j=this.wordWrap||this._getCSSStyleValue("wordWrap");if(_j&&_j!="none"){_l=true;}_k=this._adjust_width-_b;}var _m=nexacro._getTextSize(_f,_g,_l,_k,_j,_h,_i);_b+=Math.ceil(this.textwidth!=null?this.textwidth:_m[0]);_c+=Math.ceil(_m[1]);}var _n=this._icon||this._getCSSStyleValue("icon");if(_n){var _o=this._textpadding||this._getCSSStyleValue("textPadding");var _p=this.iconPosition||this._getCSSStyleValue("iconPosition");var _q;if(this._icon_width!=0&&this._icon_height!=0){_q={width:this._icon_width,height:this._icon_height};}else{_q=nexacro._getImageSize(_n.url,this._on_icon_onload,this,undefined,this.image)||{width:this._icon_width,height:this._icon_height};}if(_p=="top"||_p=="bottom"){_c+=_q.height;_b=Math.max(_b,_q.width);}else{_b+=_q.width;_c=Math.max(_c,_q.height);}if(_o){_b+=_o.left+_o.right;_c+=_o.top+_o.bottom;}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pIconText._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pIconText.set_icon=function(_a){this.icon=_a;if(_a){if(this._icon==null||this._icon.value!=_a){var _b=nexacro.UrlObject(_a,this);this._icon=_b;this.on_apply_icon(_b);}}else{if(this._icon){this._icon=null;this.on_apply_icon(null);}}this._icon_width=0;this._icon_height=0;};_pIconText.on_apply_icon=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIcon(_a||this._getCSSStyleValue("icon",this._status,this._userstatus));}};_pIconText.set_iconPosition=function(_a){if(this.iconPosition!=_a){this.iconPosition=_a;this.on_apply_iconPosition(_a);}};_pIconText.on_apply_iconPosition=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIconPos(_a||this._getCSSStyleValue("iconPosition",this._status,this._userstatus));}};_pIconText.set_textPadding=function(_a){this.textPadding=_a;if(_a){if(this._textpadding==null||this._textpadding.value!=_a){var _b=nexacro.PaddingObject(_a);this._textpadding=_b;this.on_apply_textPadding(_b);}}else{if(this._textpadding){this._textpadding=null;this.on_apply_textPadding(null);}}};_pIconText.on_apply_textPadding=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextPadding(_a||this._getCSSStyleValue("textPadding",this._status,this._userstatus));}};_pIconText.set_textwidth=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.textwidth!=_a){this.textwidth=_a;this.on_apply_textwidth(_a);}};_pIconText.on_apply_textwidth=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextWidth(_a);}};_pIconText.on_apply_text=function(_a){var _b=this._cell_elem;if(_b){_b.setElementText(_a);}if(nexacro._enableaccessibility){this._setAccessibilityLabel(this._getAccessibilityLabel());}};_pIconText.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pIconText.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pIconText.on_apply_wordWrap=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementWordWrap(_a);if(this.fittocontents!="none"){this._update_position();}}};_pIconText.on_apply_textDecoration=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementTextDecoration(_a);}};_pIconText._on_icon_onload=function(_a,_b,_c){if(this.fittocontents!=="none"&&(this._icon_width!=_b||this._icon_height!=_c)){this._icon_width=_b;this._icon_height=_c;this._update_position();}};_pIconText._getCurrentIcon=function(){var _a=this._cell_elem;if(_a){return _a.icon;}return null;};delete _pIconText;}if(!nexacro._Icon){nexacro._Icon=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pIcon=nexacro._createPrototype(nexacro.Component,nexacro._Icon);nexacro._Icon.prototype=_pIcon;_pIcon._type_name="Icon";_pIcon._cell_elem=null;_pIcon.icon="";_pIcon.padding="";_pIcon.textAlign="";_pIcon.verticalAlign="";_pIcon.tabstop=false;_pIcon._icon=null;_pIcon._is_focus_accept=false;_pIcon._is_simple_control=true;_pIcon._is_eventinfo_control=false;_pIcon._is_fiticonsize=false;_pIcon.accessibilityrole="Icon";_pIcon.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=new nexacro.IconElement(_a,"icon",this._is_fiticonsize);this._cell_elem=_b;_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}var _c=this._icon||this._getCSSStyleValue("icon");if(_c){_b.setElementIcon(_c);}}};_pIcon.on_created_contents=function(_a){if(this.fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}};_pIcon.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}if(this._icon){this._icon=null;}};_pIcon.on_create_contents_command=function(){var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pIcon.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this.fittocontents!="none"){this._update_position();}};_pIcon.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pIcon.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pIcon.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){if(!this.icon){_c.setElementIcon(this._getCSSStyleValue("icon",_a,_b));}}};_pIcon._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._icon||this._getCSSStyleValue("icon");if(_f){var _g=this.iconPosition||this._getCSSStyleValue("iconPosition");var _h=nexacro._getImageSize(_f.url,this._on_icon_onload,this,undefined,this.image)||{width:0,height:0};if(_g=="left"||_g=="right"){_b+=_h.width;_c=Math.max(_c,_h.height);}else{_c+=_h.height;_b=Math.max(_b,_h.width);}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pIcon._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pIcon.set_icon=function(_a){this.icon=_a;if(_a){if(this._icon==null||this._icon.value!=_a){var _b=nexacro.UrlObject(_a,this);this._icon=_b;this.on_apply_icon(_b);}}else{if(this._icon){this._icon=null;this.on_apply_icon(null);}}};_pIcon.on_apply_icon=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIcon(_a||this._getCSSStyleValue("icon",this._status,this._userstatus));}};_pIcon.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pIcon.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pIcon._on_icon_onload=function(_a,_b,_c){if(this.fittocontents!=="none"){this._update_position();}};_pIcon._getCurrentIcon=function(){var _a=this._cell_elem;if(_a){return _a.icon;}return null;};delete _pIcon;}if(!nexacro.Static){nexacro.Static=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pStatic=nexacro._createPrototype(nexacro.Component,nexacro.Static);nexacro.Static.prototype=_pStatic;_pStatic._type_name="Static";_pStatic._cell_elem=null;_pStatic.text="";_pStatic.usedecorate=false;_pStatic.tabstop=false;_pStatic._is_focus_accept=false;_pStatic._is_simple_control=true;_pStatic._apply_client_padding=true;_pStatic.accessibilityrole="static";_pStatic._event_list={"onclick":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"onsize":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pStatic.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._cell_elem=new nexacro.TextBoxElement(_a,"text");_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this.wordWrap){_b.setElementWordWrap(this.wordWrap);}if(this._textdecoration){_b.setElementTextDecoration(this._textdecoration);}if(this._displaytext){if(this.usedecorate){_b.setElementDecorateText(this._displaytext);}else{_b.setElementText(this._displaytext);}_b.setElementPointerEvents();}}};_pStatic.on_created_contents=function(_a){if(this.expr){this._on_apply_expr(this.expr);}if(this.fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}};_pStatic.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}};_pStatic.on_create_contents_command=function(){if(this.expr){this._on_apply_expr(this.expr);}var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pStatic.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this.fittocontents!="none"){this._update_position();}};_pStatic.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pStatic.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pStatic.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}};_pStatic.on_get_prop_tabstop=function(){if(nexacro._enableaccessibility){if(this.accessibilityenable&&this.accessibilityrole=="link"){return true;}}return false;};_pStatic.on_get_accessibility_label=function(){if(this.usedecorate){return nexacro._getDisplayTextfromDecorateText(this._displaytext);}return this._displaytext;};_pStatic._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pStatic._on_getDisplayText=function(){if(this.usedecorate){return nexacro._getDisplayTextfromDecorateText(this._displaytext);}return this._displaytext;};_pStatic._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j="none";var _k;var _l=false;if(_f.search("\n")> -1){_l=true;}if(this.fittocontents=="height"){_j=this.wordWrap||this._getCSSStyleValue("wordWrap");if(_j&&_j!="none"){_l=true;}_k=this._adjust_width-_b;}var _m=this.usedecorate;var _n=nexacro._getTextSize(_f,_g,_l,_k,_j,_h,_i,_m);_b+=Math.ceil(this.textwidth!=null?this.textwidth:_n[0]);_c+=Math.ceil(_n[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pStatic.set_usedecorate=function(_a){_a=nexacro._toBoolean(_a);if(this.usedecorate!=_a){this.usedecorate=_a;this.on_apply_usedecorate(_a);}};_pStatic.on_apply_usedecorate=function(_a){if(this._displaytext){this.on_apply_text(this._displaytext);}};_pStatic.on_apply_text=function(_a){var _b=this._cell_elem;if(_b){if(this.usedecorate){_b.setElementDecorateText(_a);}else{_b.setElementText(_a);}_b.setElementPointerEvents();}if(nexacro._enableaccessibility){this._setAccessibilityLabel(this._getAccessibilityLabel());}};_pStatic.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pStatic.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pStatic.on_apply_wordWrap=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementWordWrap(_a);if(this.fittocontents!="none"){this._update_position();}}};_pStatic.on_apply_textDecoration=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementTextDecoration(_a);}};delete _pStatic;}if(!nexacro._TitleBarIconTextControl){nexacro._TitleBarIconTextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTitleBarIconTextControl=nexacro._createPrototype(nexacro._IconText,nexacro._TitleBarIconTextControl);nexacro._TitleBarIconTextControl.prototype=_pTitleBarIconTextControl;_pTitleBarIconTextControl._type_name="TitleBarIconTextControl";_pTitleBarIconTextControl._is_subcontrol=true;_pTitleBarIconTextControl._is_fiticonsize=true;delete _pTitleBarIconTextControl;}if(!nexacro.Button){nexacro.Button=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pButton=nexacro._createPrototype(nexacro._IconText,nexacro.Button);nexacro.Button.prototype=_pButton;_pButton._type_name="Button";_pButton.tabstop=true;_pButton.defaultbutton=false;_pButton.escapebutton=false;_pButton._is_focus_accept=true;_pButton._cur_ldown_elem=null;_pButton._selectstatus=false;_pButton._use_pushed_status=true;_pButton._use_selected_status=true;_pButton.accessibilityrole="button";_pButton._is_eventinfo_control=true;_pButton.destroyComponent=function(){if(!this._is_alive){return;}var _a=this._getMainForm();if(_a){if(_a._defaultbutton==this){_a._defaultbutton=null;}else if(_a._escapebutton==this){_a._escapebutton=null;}}return nexacro.Component.prototype.destroyComponent.call(this);};_pButton.on_getBindableProperties=function(){return "value";};_pButton._getDlgCode=function(){return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};_pButton._isFocusAcceptable=function(){return this._is_focus_accept;};_pButton.set_defaultbutton=function(_a){_a=nexacro._toBoolean(_a);if(this.defaultbutton!=_a){this.defaultbutton=_a;}var _b=this._getMainForm();if(_b){var _c=!(this.parent==_b||this._is_created);if(_a){if(!_c){_b._defaultbutton=this;this._setAccessibilityFlagDefaultButton(true);}}else{if(_b._defaultbutton==this){_b._defaultbutton=null;this._setAccessibilityFlagDefaultButton(false);}}}};_pButton.set_escapebutton=function(_a){_a=nexacro._toBoolean(_a);if(this.escapebutton!=_a){this.escapebutton=_a;}var _b=this._getMainForm();if(_b){var _c=!(this.parent==_b||this._is_created);if(_a){if(!_c){_b._escapebutton=this;}}else{if(_b._escapebutton==this){_b._escapebutton=null;}}}};_pButton._click=function(_a){if(_a==nexacro.Event.KEY_ESC||_a==nexacro.Event.KEY_RETURN){if(this._isAccessibilityEnable()){this._notifyAccessibility();}}this.click();};_pButton.click=function(){this.on_fire_onclick("none",false,false,false, -1, -1, -1, -1, -1, -1,this,this);};_pButton.getSelectStatus=function(){return this._selectstatus;};_pButton.setSelectStatus=function(_a){var _b=this._selectstatus;this._selectstatus=_a;if(_a){this._changeUserStatus("selected",true);}else{this._changeUserStatus("selected",false);}return _b;};_pButton.toggleSelectStatus=function(){var _a=this._selectstatus;this.setSelectStatus(!_a);return _a;};_pButton._on_hotkey=function(){this.click();};_pButton.on_keydown_basic_action=function(_a){if(this._use_pushed_status){if(_a==13||_a==32){this._changeUserStatus("pushed",true);}}};_pButton.on_keyup_basic_action=function(){if(this._use_pushed_status){this._changeUserStatus("pushed",false);}};_pButton.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();this._cur_ldown_elem=_i._cur_ldown_elem||_i._keydown_element;return _h;};_pButton.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();var _j=_i._cur_ldown_elem||_i._keydown_element;if(!this._is_subcontrol){if(_j==this._cur_ldown_elem){if(_a==13||_a==32){this._click(_a);}}}this._cur_ldown_elem=null;return _h;};delete _pButton;}if(!nexacro.StepImageButtonControl){nexacro.StepImageButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pStepImageButtonCtrl=nexacro._createPrototype(nexacro.Button,nexacro.StepImageButtonControl);nexacro.StepImageButtonControl.prototype=_pStepImageButtonCtrl;_pStepImageButtonCtrl._type_name="ButtonControl";_pStepImageButtonCtrl._is_subcontrol=true;_pStepImageButtonCtrl._on_getAccessibilityAdditionalLabel=function(){var _a="";var _b=this.parent?this.parent:null;if(_b){_a=this.id+" "+_b.stepcount;}return _a;};_pStepImageButtonCtrl._on_getAccessibilityAdditionalRole=function(){return " Step";};_pStepImageButtonCtrl.on_getIDCSSSelector=function(){return "stepitem";};_pStepImageButtonCtrl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){if(_c=="pushed"&&_e=="selected"){return _e;}}return _c;};delete _pStepImageButtonCtrl;}if(!nexacro._TitleBarButtonControl){nexacro._TitleBarButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTitleBarButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._TitleBarButtonControl);nexacro._TitleBarButtonControl.prototype=_pTitleBarButtonControl;_pTitleBarButtonControl._type_name="TitleBarButtonControl";_pTitleBarButtonControl._is_subcontrol=true;delete _pTitleBarButtonControl;}if(!nexacro.Edit){nexacro.Edit=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this.readonly=true;}};var _pEdit=nexacro._createPrototype(nexacro.Component,nexacro.Edit);nexacro.Edit.prototype=_pEdit;_pEdit._type_name="Edit";_pEdit.value=undefined;_pEdit.displaynulltext="";_pEdit.readonly=false;_pEdit.password=false;_pEdit.autoselect=false;_pEdit.autoskip=false;_pEdit.maxlength=0;_pEdit.usesoftkeyboard=true;_pEdit.inputmode="normal";_pEdit.inputfilter="none";_pEdit.inputtype="normal";_pEdit.imeaction="none";_pEdit.imemode="none";_pEdit.useime="global";_pEdit.text="";_pEdit.usecontextmenu=true;_pEdit._input_element=null;_pEdit._inputfilter_obj=null;_pEdit._inputtype_obj=null;_pEdit._undostack=null;_pEdit._is_undo=false;_pEdit._default_value=undefined;_pEdit._default_text="";_pEdit._keypad_type="text";_pEdit._imedisable=false;_pEdit._processing_updateToDataset=false;_pEdit._result_updateToDataset=true;_pEdit._processing_canchange=false;_pEdit._onlydisplay=false;_pEdit._apply_client_padding=false;_pEdit._has_inputElement=true;_pEdit._change_value=false;_pEdit._processing_autoskip=false;_pEdit._is_simple_control=true;_pEdit._is_editable_control=true;_pEdit._use_readonly_status=true;if(nexacro._Browser=="IE"||nexacro._Browser=="Runtime"){_pEdit._set_node_value=false;}else{_pEdit._set_node_value=true;}if((nexacro._Browser=="IE"&&nexacro._BrowserVersion<10)||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_pEdit._use_focus_caret=true;_pEdit._caret_pos= -1;}else{_pEdit._use_focus_caret=false;_pEdit._caret_pos= -1;}_pEdit._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onimeaction":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pEdit.accessibilityrole="edit";_pEdit.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.InputElement(_a,"input");_b.setElementAutoSkip(this.autoskip);_b.setElementAutoSelect(this.autoselect);_b.setElementUseIme(this.useime);_b.setElementImeMode(this.imemode);_b.setElementImeAction(this.imeaction);_b.setElementReadonly(this.readonly);_b.setElementDisplayNullText(this.displaynulltext);_b.setElementMaxLength(this.maxlength);if((this.inputtype.indexOf("normal")>=0)||(this.inputtype.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this.password?"password":this._keypad_type,this._imedisable);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"input");_b.setElementVerticalAlign("middle");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this.textAlign);_b.setElementPadding(this.padding);this._undostack=new nexacro._EditUndoStack(this);}};_pEdit.on_created_contents=function(_a){var _b=this._input_element;if(_b){this.on_apply_value(this.value);_b.create(_a);this.set_usesoftkeyboard(this.usesoftkeyboard,true);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}};_pEdit.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._inputfilter_obj;if(_c){this._inputfilter_obj=null;}var _d=this._inputtype_obj;if(_d){this._inputtype_obj=null;}};_pEdit.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_value(this.value);this.on_apply_prop_enable(this._real_enable);return _a.createCommand();}return "";};_pEdit.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}};_pEdit.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);}};_pEdit.on_change_containerPos=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementPosition(_a,_b);}};_pEdit._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._input_element;if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();if(_a){this._default_value=this.value;this._default_text=this.text;}this._changeUserStatus("nulltext",false);_c.setElementFocus(_a,_b);var _d=_c.getElementText();if(_d!=this.text){this._default_text=this.text=_d;}if(!this.autoselect){if(this._use_focus_caret){if(this._caret_pos== -1){_c.setElementSetSelect(0,0);}else{_c.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}else{if(this._caret_pos== -1){if(this._change_value){_c.setElementSetSelect(this.value?this.value.length:0);}else{if(nexacro._isDesktop()||_c._is_sys_focused){if(nexacro._Browser!="Runtime"&&_a=="focus"){_c._use_timer=true;}_c.setElementSetSelect(0,0);if(nexacro._Browser!="Runtime"&&_a=="focus"){_c._use_timer=false;}}}}}}}else{if(_a){this._default_value=this.value;this._default_text=this.text;}this._changeUserStatus("nulltext",false);}}};_pEdit.on_getBindableProperties=function(){return "value";};_pEdit.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){var _c=this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}};_pEdit.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pEdit.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._input_element;var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(this._undostack){this._undostack.clear();}var _g=false;if(this.value!=_f){_g=true;}this._setValue(_f);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this.value?this.value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pEdit.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pEdit._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pEdit._getDragData=function(){return this.getSelectedText();};_pEdit.on_get_accessibility_label=function(){var _a="";return _a;};_pEdit._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j=nexacro._getTextSize(this.text,_g,false,undefined,"none",_h,_i);_b+=Math.ceil(_j[0]);_c+=Math.ceil(_j[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pEdit.set_text=nexacro._emptyFn;_pEdit.set_value=function(_a){_a=this._convertValueType(_a);if(this.value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);}};_pEdit.on_apply_value=function(_a){var _b=this._input_element;if(_b){var _c=_b.getElementCaretPos();var _d=this.text;_a=(this.value?this.text:this.value);var _e=this._getForm();var _f=_e?_e.getFocus():null;if(this._is_created&&nexacro._isNull(this.value)&&_f!==this){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);}if(!this._onlydisplay){if(this._undostack){if(_c&&_c!= -1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}_b.setElementValue(_a);_d=_b.getElementText();}else{if(this.displaynulltext&&nexacro._isNull(this.value)){_b.setElementText(this.displaynulltext);}else{_b.setElementText(_a);}}if(this.text!=_d){this.text=_d;}this._updateAccessibilityLabel();this._default_value=this.value;this._default_text=this.text;_c=_b.getElementCaretPos();if(_c&&_c!= -1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}}};_pEdit.set_displaynulltext=function(_a){_a=nexacro._toString(_a);if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pEdit.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){if(this._onlydisplay){this.on_apply_value(this.value);}else{_b.setElementDisplayNullText(_a);}}};_pEdit.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pEdit.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pEdit.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this.autoselect!=_a){this.autoselect=_a;this.on_apply_autoselect(_a);}};_pEdit.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSelect(_a);}}};_pEdit.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this.autoskip!=_a){this.autoskip=_a;this.on_apply_autoskip(_a);}};_pEdit.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSkip(_a);}}};_pEdit.set_inputmode=function(_a){var _b=["normal","upper","lower"];if(_b.indexOf(_a)== -1){return;}if(this.inputmode!=_a){this.inputmode=_a;}};_pEdit.set_inputfilter=function(_a){if(_a){var _b=_a.split(',');var _c=["none","alpha","digit","comma","dot","sign","space","symbol"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.inputfilter!=_a){this.inputfilter=_a;this._inputfilter_obj=null;this.on_apply_inputfilter(_a);}};_pEdit.on_apply_inputfilter=function(_a){this._inputfilter_obj=new nexacro._EditInputFilter(_a);};_pEdit.set_inputtype=function(_a){if(_a){var _b=_a.split(',');var _c=["normal","alpha","english","digit","number","comma","dot","sign","space","symbol","half","full","numberandenglish"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.inputtype!=_a){this.inputtype=_a;this._inputtype_obj=null;this.on_apply_inputtype(_a);}};_pEdit.on_apply_inputtype=function(_a){this._inputtype_obj=new nexacro._EditInputType(_a);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}else{this._imedisable=this._inputtype_obj.imedisable;}this._keypad_type=this._inputtype_obj.keypadtype;var _b=this._input_element;if(_b&&!this._onlydisplay){if((this.inputtype.indexOf("normal")>=0)||(this.inputtype.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this.password?"password":this._keypad_type);}};_pEdit.set_imeaction=function(_a){if(_a){var _b=_a.split(',');var _c=["none","done","go","search","send","next","previous"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.imeaction!=_a){this.imeaction=_a;this.on_apply_imeaction(_a);}};_pEdit.on_apply_imeaction=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeAction(_a);}};_pEdit.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this.maxlength!=_a){this.maxlength=_a;this.on_apply_maxlength(_a);}};_pEdit.on_apply_maxlength=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementMaxLength(_a);}};_pEdit.set_password=function(_a){_a=nexacro._toBoolean(_a);if(this.password!=_a){this.password=_a;this.on_apply_password(_a);}};_pEdit.on_apply_password=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementInputType(_a?"password":this._keypad_type,this._imedisable);}};_pEdit.set_useime=function(_a){_a=nexacro._toBoolean(_a);if(this.useime!=_a){this.useime=_a;this.on_apply_useime(_a);}};_pEdit.on_apply_useime=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementUseIme(_a);}};_pEdit.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pEdit.on_apply_usesoftkeyboard=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementUseSoftKeyboard(this.usesoftkeyboard,_a);}};_pEdit.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)== -1){return;}if(this.imemode!=_a){this.imemode=_a;this.on_apply_imemode(_a);}};_pEdit.on_apply_imemode=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeMode(_a);}};_pEdit.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;}};_pEdit.set_cursor=function(_a){this.cursor=_a;if(_a){if(this._cursor==null||this._cursor.value!=_a){if(this.enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pEdit.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pEdit.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);}};_pEdit.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pEdit.getLength=function(){return (this.value?this.value.length:0);};_pEdit.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!= -1){return _b.begin;}}return  -1;};_pEdit.setCaretPos=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a== -1){if(_a){_a=this.text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);}return true;}return false;};_pEdit.getSelect=function(){var _a=this._input_element;if(_a&&!this._onlydisplay){return _a.getElementSelectionRange();}return [0,0];};_pEdit.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this.text?this.text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b= -1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a== -1){_a=_e;}if(_b== -1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pEdit.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this.text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pEdit.setSelectedText=function(_a){_a=nexacro._toString(_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){var _c=_b.getElementSelectionRange();var _d=_c[0],_e=_c[1];if(_d==_e){return "";}var _f="";if(this._inputtype_obj){var _g=_a.length;for(var _m=0;_m<_g;_m++ ){var _h=_a[_m];if(this._inputtype_obj.test(_h)){_f+=_h;}}_a=_f;}var _i=_a.length;var _j=this.text.substring(_d,_e);var _k=this.text;var _l=_k.length-(_e-_d)+_i;if(this.maxlength>0&&_l>this.maxlength){_a=_a.substring(0,this.maxlength-_i);}_k=_k.substring(0,_d)+_a+_k.substring(_e);if(this.text!=_k){this.set_value(_k);_b.setElementSetSelect(_d,_d+_i);}return _j;}}return "";};_pEdit.updateToDataset=function(){this._result_updateToDataset=this.applyto_bindSource("value",this.value);if(this._result_updateToDataset){this._default_value=this.value;this._default_text=this.text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pEdit.on_deactivate_process=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){_a.setCompositionComplete();}}};_pEdit._on_deactivate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",false);}this.on_deactivate_process.call(this);};_pEdit._on_value_change=function(_a,_b,_c,_d){if(!this.on_fire_canchange(this,_a,_b,_c,_d)){return false;}var _e=this._input_element;var _f=_e.getElementCaretPos();if(_f&&_f!= -1){this._caret_pos=_f;}if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){return false;}this._default_value=_d;this._default_text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);return true;};_pEdit._on_input_undo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){this._is_undo=true;var _c=_a.end;if(_a.value&&_a.value.length>_c){_c=_a.value.length;}_b.updateElementText(_a.value,_c);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pEdit._on_input_redo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pEdit.on_keydown_basic_before_process=function(_a,_b,_c,_d,_e){return true;};_pEdit.on_keydown_basic_specialkey_process=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_e;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_f.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_f.isComposing()){_f.setCompositionComplete();}if(this._undostack){this._undostack.undo();_f._applyMaxlength();_f.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_f.stopSysEvent();return;}}return true;};_pEdit.on_keydown_basic_process=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}return true;};_pEdit.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_basic_before_process.call(this,_a,_b,_c,_d,_f)){return;}if(!this.on_keydown_basic_specialkey_process.call(this,_a,_b,_c,_d,_f)){return;}this.on_keydown_basic_process.call(this,_a,_b,_c,_d,_f);}};_pEdit.on_keydown_default_before_process=function(_a){return true;};_pEdit.on_keydown_default_specialkey_process=function(_a){var _b=this._input_element;var _c=_b.getElementCaretPos();if(_a==nexacro.Event.KEY_RETURN){if(_b.isComposing()){_b.setCompositionComplete();}var _d=this._default_value;var _e=this._default_text;var _f=_b.value;var _g=_f?_f:"";if(_d!=_f){if(!this._on_value_change(_e,_d,_g,_f)){var _h=_g?_g.length:0;var _i=_e?_e.length:0;if(_c!= -1){if(_h-_i>=0){_c.begin=_c.end=_c.begin-(_h-_i);}if(_c.begin<0){_c.begin=_c.end=0;}}if(_c&&_c!= -1){this._caret_pos=_c;}this.value=_d;this.text=_e;_b.setElementValue(_e);_b.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}return true;};_pEdit.on_keydown_default_process=function(_a){return true;};_pEdit.on_keydown_default_action=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(!this.on_keydown_default_before_process.call(this,_a)){return;}if(!this.on_keydown_default_specialkey_process.call(this,_a)){return;}this.on_keydown_default_process.call(this,_a);}};_pEdit.on_keypress_basic_before_process=function(_a,_b,_c,_d){return true;};_pEdit.on_keypress_basic_specialkey_process=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_e.stopSysEvent();return;}}if(_a!==0&&_b===0){return 2;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return 2;}}}return true;};_pEdit.on_keypress_basic_process=function(_a,_b,_c,_d){if(nexacro._OS=="iOS"){return true;}_b=_b||_a;var _e=this._input_element;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0&&this._isFilterChar(_f)){_e.stopSysEvent();return false;}}return true;};_pEdit.on_keypress_basic_action=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(!this.on_keypress_basic_before_process.call(this,_a,_b,_c,_d)){return;}var _f=this.on_keypress_basic_specialkey_process.call(this,_a,_b,_c,_d);if(!_f){return;}else if(_f==2){return true;}if(!this.on_keypress_basic_process.call(this,_a,_b,_c,_d)){return false;}}};_pEdit.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this.readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pEdit.on_keyinput_basic_before_process=function(_a){return true;};_pEdit.on_keyinput_basic_process=function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;this.value=_c;this.text=_a;if(this._undostack&&!_b.isComposing()){var _d=_b.getElementCaretPos();if(_d&&_d!= -1){this._undostack.push(_c,_d.begin,_d.end);}else{this._undostack.push(_c,0,0);}}return true;};_pEdit.on_keyinput_basic_action=function(_a){if(this.readonly||!this._isEnable()){return false;}var _b=this._input_element;if(_b){if(!this.on_keyinput_basic_before_process.call(this,_a)){return false;}if(!this.on_keyinput_basic_process.call(this,_a)){return false;}}this._updateAccessibilityLabel();return true;};_pEdit.on_killfocus_basic_process=function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=this._default_value;var _d=this._default_text;var _e=_a.value;_b=_e?_e:"";var _f=_a.getElementCaretPos();if(_c!=_e){if(!this._processing_canchange){if(!this._on_value_change(_d,_c,_b,_e)){var _g=_b?_b.length:0;var _h=_d?_d.length:0;if(_f!= -1){if(_g-_h>=0){_f.begin=_f.end=_f.begin-(_g-_h);}if(_f.begin<0){_f.begin=_f.end=0;}this._caret_pos=_f;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this.value=_c;this.text=_d;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _i=this._getRootWindow();var _j=_i._indexOfCurrentFocusPaths(this);if(_j<0){_a.setElementBlur();}}else{if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}return true;};_pEdit.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();if(_b[0]==_b[1]){_a._setElementLastSelectionRange();}}if(!this.on_killfocus_basic_process.call(this)){return;}}};_pEdit.on_fire_onkillfocus=function(_a,_b){nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);var _c=this._input_element;if(_c&&_c._updateElementValue){_c._updateElementValue(_c.value);this._setValue(_c.value===null?undefined:_c.value);}};_pEdit.on_click_basic_action=function(_a,_b){var _c=this._input_element;if(_c){var _d=this._getWindow();if(_d&&this._track_capture){var _e=_d._getCaptureComp(true,false,this);if(!this._onlydisplay&&(!_e||_e==this)){_c.setElementFocus(_b);}}}};_pEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=this._getClientXY(_g,_h);var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_o[0],_o[1],this,this,_m);return this.oneditclick._fireEvent(this,_p);}return true;};_pEdit.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pEdit.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pEdit.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pEdit._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pEdit._setValue=function(_a){this.text=nexacro._toString(_a);this.value=_a;this.on_apply_value(_a);};_pEdit._setReadonlyView=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pEdit._setDefaultCaret=nexacro._emptyFn;_pEdit._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pEdit._isFilterChar=function(_a){if(_a!=""){if(this._inputfilter_obj&&this._inputfilter_obj.test(_a)){return true;}if(this._inputtype_obj&&!this._inputtype_obj.test(_a)){return true;}}return false;};_pEdit.on_beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_e=="insertFromPaste"){if(_g){var _k=this.maxlength;_g=_g.replace(/\r\n/g,"");if(_k&&_c+(_h.length-_d)+_i>_k){_g=_g.substring(0,_k-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_i=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this.inputmode){case "upper":_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this.maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _l=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_l&&_l.ismax){_j.push(_f._BeforeinputState.MAXLENGTH);}}if(this.maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}_g=_h+_g;if(_g.length>this.maxlength){_j.push(_f._BeforeinputState.CANCEL);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;};_pEdit._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(_f){return this.on_beforeinput_process_with_HTMLEvent.call(this,_a,_b,_c,_d,_e);}};_pEdit.on_beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_e.value;var _h=_a.substring(_c,_d);if(_h){var _i=_h;if(nexacro._is_hangul(_i)||(_b==nexacro._CompositionState.NONE||_b==nexacro._CompositionState.END)){if(this._inputtype_obj){_i=this._inputtype_obj.apply(_i);}if(this._inputfilter_obj){_i=this._inputfilter_obj.apply(_i);}if(this.inputmode=="upper"){_i=_i.toUpperCase();}else if(this.inputmode=="lower"){_i=_i.toLowerCase();}}if(_i!=_h){if(_f&&!_i){var _j=_g?_g.length:0;var _k=_c+(_h.length-(_a.length-_j));_e.updateElementText(_g,_k);}else{_e.replaceElementText(_i,_c,_d);}}}};_pEdit._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){this.on_beforeinput_process_with_NexacroInputEvent.call(this,_a,_b,_c,_d);}};_pEdit._on_input_compositionend=function(_a,_b){var _c=this._input_element;if(_c){if(this._undostack){var _d=_b?_b:_c.getElementCaretPos();if(_d&&_d!= -1){this._undostack.push(_a,_d.begin,_d.end);}else{this._undostack.push(_a,0,0);}}}};_pEdit.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b=_a._imelocale.getLocale();var _c,_d;if(_b&&nexacro._cache_edit_set[_b]){for(var _e in nexacro._cache_edit_set[_b]){this[_e]=nexacro._cache_edit_set[_b][_e];}for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){if(!nexacro._cache_edit_set[_b][nexacro._edit_user_override_func[_c]]){this[nexacro._edit_user_override_func[_c]]=nexacro.Edit.prototype[nexacro._edit_user_override_func[_c]];}}}else{for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){this[nexacro._edit_user_override_func[_c]]=nexacro.Edit.prototype[nexacro._edit_user_override_func[_c]];}}}};_pEdit._setAccessibilityReadOnly=nexacro._emptyFn;_pEdit=null;}if(!nexacro.MaskEdit){nexacro.MaskEdit=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this.readonly=true;}};var _pMaskEdit=nexacro._createPrototype(nexacro.Component,nexacro.MaskEdit);nexacro.MaskEdit.prototype=_pMaskEdit;_pMaskEdit._type_name="MaskEdit";_pMaskEdit.value=undefined;_pMaskEdit.displaynulltext="";_pMaskEdit.displayinvalidtext="invalid value";_pMaskEdit.readonly=false;_pMaskEdit.autoselect=false;_pMaskEdit.autoskip=false;_pMaskEdit.type="number";_pMaskEdit.trimtype="none";_pMaskEdit.limitbymask="decimal";_pMaskEdit.clipmode="includespace";_pMaskEdit.format="";_pMaskEdit.maskchar="_";_pMaskEdit.text="";_pMaskEdit.usecontextmenu=true;_pMaskEdit.locale="";_pMaskEdit.usesoftkeyboard=true;_pMaskEdit.postfixtext="";_pMaskEdit.imeaction="none";_pMaskEdit._input_element=null;_pMaskEdit._masktypeobj=null;_pMaskEdit._undostack=null;_pMaskEdit._default_value=undefined;_pMaskEdit._default_text="";_pMaskEdit._locale="";_pMaskEdit._imedisable=true;_pMaskEdit._processing_updateToDataset=false;_pMaskEdit._result_updateToDataset=true;_pMaskEdit._processing_canchange=false;_pMaskEdit._onlydisplay=false;_pMaskEdit._apply_client_padding=false;_pMaskEdit._has_inputElement=true;_pMaskEdit._processing_autoskip=false;_pMaskEdit._is_keydown_ime=false;_pMaskEdit._is_simple_control=true;_pMaskEdit._is_editable_control=true;_pMaskEdit._is_locale_control=true;_pMaskEdit._use_readonly_status=true;_pMaskEdit._caret_pos= -1;_pMaskEdit._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onimeaction":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pMaskEdit.accessibilityrole="edit";_pMaskEdit.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.InputElement(_a,"input");_b.setElementAutoSkip(this.autoskip);_b.setElementAutoSelect(this.autoselect);_b.setElementUseIme("none");_b.setElementImeMode("disabled");_b.setElementImeAction(this.imeaction);_b.setElementReadonly(this.readonly);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"input");_b.setElementVerticalAlign("middle");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this.textAlign);_b.setElementPadding(this.padding);this._undostack=new nexacro._EditUndoStack(this);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}}};_pMaskEdit.on_created_contents=function(_a){var _b=this._input_element;if(_b){this.on_apply_type(this.type);this.on_apply_limitbymask(this.limitbymask);this.on_apply_clipmode(this.clipmode);this.on_apply_maskchar(this.maskchar);this._on_apply_format(this.format);this.on_apply_locale(this._getLocale());this.on_apply_postfixtext(this.postfixtext);this.on_apply_value(this.value);_b.create(_a);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this.set_usesoftkeyboard(this.usesoftkeyboard,true);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this.value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}};_pMaskEdit.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._masktypeobj;if(_c){this._masktypeobj=null;}};_pMaskEdit.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_type(this.type);this.on_apply_limitbymask(this.limitbymask);this.on_apply_clipmode(this.clipmode);this.on_apply_maskchar(this.maskchar);this._on_apply_format(this.format);this.on_apply_locale(this._getLocale());this.on_apply_postfixtext(this.postfixtext);this.on_apply_value(this.value);this.on_apply_prop_enable(this._real_enable);return _a.createCommand();}return "";};_pMaskEdit.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this.value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}};_pMaskEdit.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);}};_pMaskEdit.on_change_containerPos=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementPosition(_a,_b);}};_pMaskEdit._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this.value;var _d="";var _e="";var _f=this._getMaskObj();if(_f){if(!this._onlydisplay){_f.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_f.applyMask("");}else{_d=_f.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{if(this._isInvalidValue(_c)){_b.setElementDefaultValue(_e);}_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this.text){this._default_text=this.text=_d;}}}};_pMaskEdit.on_getBindableProperties=function(){return "value";};_pMaskEdit.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){var _c=this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}};_pMaskEdit.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pMaskEdit.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);if(_e===this.value){return;}if(this._undostack){this._undostack.clear();}this._setValue(_e);}};_pMaskEdit.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pMaskEdit._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pMaskEdit._getDragData=function(){return this.getSelectedText();};_pMaskEdit.on_get_accessibility_label=function(){var _a="";return _a;};_pMaskEdit._on_getAccessibilityAdditionalLabel=function(){var _a=this._input_element;if(_a&&_a._wantAccessibilityAdditionalLabel){if(_a._wantAccessibilityAdditionalLabel()){if(this.text!==undefined&&this.value!==undefined){return this.text;}}}if(!this.text){return this.displaynulltext?this.displaynulltext:"";}return "";};_pMaskEdit._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j=nexacro._getTextSize(this.text,_g,false,undefined,"none",_h,_i);_b+=Math.ceil(_j[0]);_c+=Math.ceil(_j[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMaskEdit.set_text=nexacro._emptyFn;_pMaskEdit.set_value=function(_a){_a=this._convertValueType(_a);if(this.value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);this._updateAccessibilityLabel();}};_pMaskEdit.on_apply_value=function(_a){var _b=this._input_element;var _c;var _d=false;if(_b){_c=this.text;_d=this._isInvalidValue(_a);if(this._is_created){if(nexacro._isNull(_a)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(_d){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}else{this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);}var _e=this._getMaskObj();if(_e){if(_d){_c=this.text=_e.applyMask("");}else{_c=this.text=_e.applyMask(_a);}}if(!this._onlydisplay){var _f=_b.getElementCaretPos();if(this._undostack){if(_f&&_f!= -1){this._undostack.push(_c,_f.begin,_f.end);}else{this._undostack.push(_c,0,0);}}if(nexacro._isNull(_a)){_b.setElementDefaultValue(_c);if(_d){_b.setElementValue(_c,_d);}else{_b.setElementValue(_a,_d);}}else{_b.setElementValue(_c,_d);}this._displaytext=_b.getElementText();_b.setElementSetSelect((_f&&_f!= -1)?_f.begin:0,_f?_f.end:0);}else{if(this.displaynulltext&&nexacro._isNull(_a)){_b.setElementText(this.displaynulltext);}else{if(this._isInvalidValue(_a)){_c=this.displayinvalidtext;}_b.setElementText(_c);}}if(this.text!=_c){this.text=_c;}this._default_value=this.value;this._default_text=this.text;}};_pMaskEdit.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pMaskEdit.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){if(this._onlydisplay){this.on_apply_value(this.value);}else{if(_a==""){_b.setElementDisplayNullText(_a,this._getEmptyText());}else{_b.setElementDisplayNullText(_a);}this._displaytext=_b.getElementText();}}};_pMaskEdit.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displayinvalidtext!=_a){this.displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pMaskEdit.on_apply_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");var _b=this._input_element;if(_b){if(this._onlydisplay){this.on_apply_value(this.value);}else{_b.setElementDisplayInvalidText(_a);this._displaytext=_b.getElementText();}}};_pMaskEdit.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pMaskEdit.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pMaskEdit.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this.autoselect!=_a){this.autoselect=_a;this.on_apply_autoselect(_a);}};_pMaskEdit.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementAutoSelect(_a);}};_pMaskEdit.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this.autoskip!=_a){this.autoskip=_a;this.on_apply_autoskip(_a);}};_pMaskEdit.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementAutoSkip(_a);}};_pMaskEdit.set_clipmode=function(_a){var _b=["includespace","excludespace"];if(_b.indexOf(_a)== -1){return;}if(this.clipmode!=_a){this.clipmode=_a;this.on_apply_clipmode(_a);}};_pMaskEdit.on_apply_clipmode=function(_a){var _b=this._masktypeobj;if(_b){if(this.type=="string"){if(_a=="includespace"){_b.setFillChar(' ');}else{_b.setFillChar('');}}}};_pMaskEdit.set_limitbymask=function(_a){var _b=["none","integer","decimal","both"];if(_b.indexOf(_a)== -1){return;}if(this.limitbymask!=_a){this.limitbymask=_a;this.on_apply_limitbymask(_a);this.on_apply_value(this.value);}};_pMaskEdit.on_apply_limitbymask=function(_a){var _b=this._masktypeobj;if(_b){if(this.type=="number"){_b.setLimitType(_a);}}};_pMaskEdit.set_format=function(_a){_a=nexacro._toString(_a);if(this.format!=_a){this.format=_a;this._on_apply_format(_a);this.on_apply_value(this.value);}};_pMaskEdit._on_apply_format=function(_a){var _b=this._masktypeobj;if(_b){_a=_a?_a.replace(/^\s\s*/,''):"";_b.setMask(_a);this._on_apply_inputtype();}};_pMaskEdit.set_maskchar=function(_a){_a=nexacro._toString(_a);if(_a==""){_a="_";}if(this.maskchar!=_a){this.maskchar=_a;this.on_apply_maskchar(_a);this.on_apply_value(this.value);}};_pMaskEdit.on_apply_maskchar=function(_a){var _b=this._masktypeobj;if(_b){_b.setMaskChar(_a);}};_pMaskEdit.set_trimtype=function(_a){var _b=["none","left","right","both"];if(_b.indexOf(_a)== -1){return;}if(this.trimtype!=_a){this.trimtype=_a;}};_pMaskEdit.set_type=function(_a){var _b=["number","string"];if(_b.indexOf(_a)== -1){return;}if(this.type!=_a){this.type=_a;this.on_apply_type(_a);this.on_apply_limitbymask(this.limitbymask);this.on_apply_maskchar(this.maskchar);this.on_apply_clipmode(this.clipmode);this._on_apply_format(this.format);this.on_apply_locale(this._getLocale());this.on_apply_value(this.value);}};_pMaskEdit.on_apply_type=function(_a){this._masktypeobj=null;if(_a=="number"){this._masktypeobj=new nexacro._EditMaskTypeNumber();}else if(_a=="string"){this._masktypeobj=new nexacro._EditMaskTypeString();}var _b=this._input_element;if(_b){if(_a=="number"){_b.setElementTextAlignByClassCSSSelector("right");}else{_b.setElementTextAlignByClassCSSSelector("left");}}};_pMaskEdit.set_locale=function(_a){if(this.locale!=_a){this.locale=_a;this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this.value);}};_pMaskEdit.on_apply_locale=function(_a){var _b=this._masktypeobj;if(_b){_b.setLocale(_a);}};_pMaskEdit.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pMaskEdit.on_apply_usesoftkeyboard=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementUseSoftKeyboard(this.usesoftkeyboard,_a);}};_pMaskEdit.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;}};_pMaskEdit.set_cursor=function(_a){this.cursor=_a;if(_a){if(this._cursor==null||this._cursor.value!=_a){if(this.enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pMaskEdit.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pMaskEdit.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);}};_pMaskEdit.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pMaskEdit.set_postfixtext=function(_a){_a=nexacro._toString(_a);if(this.postfixtext!=_a){this.postfixtext=_a;this.on_apply_postfixtext(_a);}};_pMaskEdit.on_apply_postfixtext=function(_a){var _b=this._masktypeobj;if(_b){_b.setPostfixtext(_a);this.on_apply_value(this.value);}};_pMaskEdit.set_imeaction=function(_a){if(_a){var _b=_a.split(',');var _c=["none","done","go","search","send","next","previous"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.imeaction!=_a){this.imeaction=_a;this.on_apply_imeaction(_a);}};_pMaskEdit.on_apply_imeaction=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeAction(_a);}};_pMaskEdit.getLength=function(){var _a=this.value;if(this.type=="number"){var _b=/[.,\-+]/gi;if(_b.test(_a)){_a=_a.replace(_b,"");}}return _a?_a.length:0;};_pMaskEdit.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!= -1){return _b.begin;}}return  -1;};_pMaskEdit.setCaretPos=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a== -1){if(_a){_a=this.text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);}return true;}return false;};_pMaskEdit.getSelect=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){return _a.getElementSelectionRange();}}return [0,0];};_pMaskEdit.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this.text?this.text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b= -1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a== -1){_a=_e;}if(_b== -1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pMaskEdit.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this.text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pMaskEdit.updateToDataset=function(){this._result_updateToDataset=this.applyto_bindSource("value",this.value);if(this._result_updateToDataset){this._default_value=this.value;this._default_text=this.text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pMaskEdit._on_value_change=function(_a,_b,_c,_d){var _e=true;if(!this.on_fire_canchange(this,_a,_b,_c,_d)){_e=false;}if(_e){this._default_value=_d;this._default_text=_c;if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){_e=false;}if(_e){this._default_text=_c;if(this.text!=_c){var _f=this._input_element;var _g=_f.getElementCaretPos();_f.setElementValue(_c);_f.setElementSetSelect(_g.begin,_g.end);}this.text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);this._updateAccessibilityLabel();}}if(!_e){this._default_value=_b;this._default_text=_a;}return _e;};_pMaskEdit._on_input_undo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pMaskEdit._on_input_redo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pMaskEdit._on_input_autoskip=function(){var _a=this._getMaskObj();if(_a){if(this.autoskip&&_a.isFilled()){this._setFocusToNextComponent();}}};_pMaskEdit.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}var _g=this._input_element;if(_g){if(!_b&&!_d&&_c&&_a==90){if(this._undostack){this._undostack.undo();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}if(this._undostack){var _h=_g.getElementCaretPos();if(_h&&_h!= -1){this._undostack.update(_h.begin,_h.end);}}}};_pMaskEdit.on_keydown_default_action=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){var _c=this._getMaskObj();var _d=_b.value;var _e=_b.getElementCaretPos();var _f,_g;this._is_keydown_ime=false;if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){var _h=_b.handle;this._is_keydown_ime=true;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_h.blur();_h.focus();}_b.stopSysEvent();}else if(_a==nexacro.Event.KEY_RETURN){var _i=this._default_value;var _j=this._default_text;var _k=this.value;var _l=this.text;if(_c&&this.type=="string"){_l=_c.applyMask(_k);}if(_i!=_k||_l!=_j){if(!this._on_value_change(_j,_i,_l,_k)){this.value=_i;this.text=_j;}_b.setElementValue(this.text);}}else if(_a==nexacro.Event.KEY_BACKSPACE){if(_c&&_d){if(_e.end>0&&_e.begin==_e.end){_f=_e.end-1;while((_g=_d.charAt(_f))){if(_c.isDeletableChar(_g,_f)||_f==0){break;}_f-- ;}if(_f!=(_e.end-1)){_b.setElementSetSelect(_f+1,_f+1);}}}}else if(_a==nexacro.Event.KEY_DEL){if(_c&&_d){var _m=_d.length;if(_e.end<_m&&_e.begin==_e.end){_f=_e.end;while((_g=_d.charAt(_f))){if(_c.isDeletableChar(_g,_f)||_f==_m){break;}_f++ ;}if(_f!=_e.end){_b.setElementSetSelect(_f,_f);}}}}}};_pMaskEdit.on_keypress_basic_action=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_e.stopSysEvent();return;}}if(_a!==0&&_b===0){return true;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return true;}}_b=_b||_a;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0){var _g=this._getMaskObj();var _h=_e.getElementCaretPos();var _i=_g.findNearEditablePos(_h.begin,1);if(_i<0||_g.isFilterChar(_f,_i,_h.end)){_e.stopSysEvent();this._on_input_autoskip();return;}_g.keyPressed(_f,_i);}}}};_pMaskEdit.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this.readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pMaskEdit.on_keyinput_basic_action=function(){if(this.readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){var _b=_a.value;var _c=_b?_b:"";var _d=this._getMaskObj();if(_d){_b=_d.removeMask(_c);}if(this.clipmode=="includespace"){var _e=this.trimtype;if(_e=="both"){_b=_b.replace(/^\s+|\s+$/g,"");}else if(_e=="left"){_b=_b.replace(/^\s+/,"");}else if(_e=="right"){_b=_b.replace(/\s+$/,"");}}if(!_b&&!this._default_value&&!this._default_text){this.value=this._default_value;}else{this.value=_b;}this.text=_c;if(this._undostack){var _f=_a.getElementCaretPos();if(_f&&_f!= -1){this._undostack.push(_c,_f.begin,_f.end);}else{this._undostack.push(_c,0,0);}}}};_pMaskEdit.on_keyinput_default_action=function(){if(this.readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){this._on_input_autoskip();}};_pMaskEdit.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._getRootComponent(this);if(_c==_a){if(this.parent&&(!this.parent._is_subcontrol||this.parent==_b.parent)){return;}}var _d=this._input_element;if(_d){var _e=this._getMaskObj();var _f=this._default_value;var _g=this._default_text;var _h=this.value;var _i=_e?_e.applyMask(_h):this.text;if(_f!=_h||_i!=_g){if(!this._processing_canchange){if(!this._on_value_change(_g,_f,_i,_h)){this.value=_f;}}}this._caret_pos=_d.getElementCaretPos();_h=this.value;var _j=this._isInvalidValue(_h);if(_e){_e.setEditStatus(false);if(_j){_i=_e.applyMask("");}else{_i=_e.applyMask(_h);}this.text=_i;if(!this._onlydisplay){if(nexacro._isNull(_h)){_d.setElementDefaultValue(_i);_i=_h;}_d.setElementValue(_i,_j);}else{if(this.displaynulltext&&nexacro._isNull(_h)){_d.setElementText(this.displaynulltext);}else{if(this.displayinvalidtext&&_j){_d.setElementText(this.displayinvalidtext);}else{_d.setElementText(_i);}}}}if(!this._onlydisplay){if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this.value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}var _k=_d.getElementSelectionRange();if(_k[0]==_k[1]){_d._setElementLastSelectionRange();}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_d.setElementBlur();}}}};_pMaskEdit.on_click_basic_action=function(_a,_b){var _c=this._input_element;if(_c){var _d=this._getWindow();if(_d&&this._track_capture){var _e=_d._getCaptureComp(true,false,this);if(!this._onlydisplay&&(!_e||_e==this)){_c.setElementFocus(_b);}}}};_pMaskEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=this._getClientXY(_g,_h);var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_o[0],_o[1],this,this,_m);return this.oneditclick._fireEvent(this,_p);}return true;};_pMaskEdit.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pMaskEdit.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pMaskEdit.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pMaskEdit._convertValueType=function(_a,_b){if(nexacro._isNull(_a)){return _a;}var _c;var _d=nexacro._getDatatypeRule();if(_b){if(_d=="1.0"){return _a;}}_c=nexacro._toString(_a).replace(/&quot;/g,"\"");return _c;};_pMaskEdit._setValue=function(_a){var _b="";if(!nexacro._isNull(_a)){_b=nexacro._toString(_a);}this.text=_b;this.value=_a;this.on_apply_value(_a);};_pMaskEdit._setLocale=function(_a){if(!this.locale&&_a!=this._locale){this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this.value);}};_pMaskEdit._setEnableView=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementEnable(_a);}}};_pMaskEdit._setDefaultCaret=nexacro._emptyFn;_pMaskEdit._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm()._getNextComponent(_a,true,true);if(_b){_b.setFocus();if(!_b.autoselect&&_b._is_editable_control){_b._setDefaultCaret();}}};_pMaskEdit._on_apply_inputtype=function(){var _a=this._getMaskObj();var _b=this._input_element;if(_a&&_b){var _c=_a.getInputMode();if(!this._onlydisplay){_b.setElementInputType(_c,true);}}};_pMaskEdit._getMaskObj=function(){var _a=this._masktypeobj;if(_a){return _a;}return null;};_pMaskEdit._getEmptyText=function(){var _a=this._masktypeobj;if(_a){return _a.applyMask("");}return "";};_pMaskEdit._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=this._getMaskObj();var _h=[];if(_g){var _i=_f._getInputValue();var _j,_k,_l,_m,_n;switch(_e){case "deleteContentBackward":if(_c==_d){_j=_i.substring(0,_c-1);_k=_i.substring(_d);_l=_j+_k;_m=_g.arrangeMask(_l,_c-1,_c-1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteContentForward":if(_c==_d){_j=_i.substring(0,_c);_k=_i.substring(_d+1);_l=_j+_k;_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteByCut":_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}_h.push(_f._BeforeinputState.REPLACE);break;case "insertText":case "insertCompositionText":_a=_a?_a:"";_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)||this._is_keydown_ime){_h.push(_f._BeforeinputState.CANCEL);}else{if(this.type=="number"){_l=_i.substring(0,_c)+_a+_i.substring(_d);_m=_g.arrangeMask(_l,_c,_d+_a.length);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else if(_m.text!=_l){_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};_h.push(_f._BeforeinputState.REPLACE);}else{_h.push(_f._BeforeinputState.PASS);}}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{_l=_i.substring(0,_c)+_a+_i.substring(_d,_i.length);_d=_c+_a.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}}break;case "insertFromPaste":_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)){_h.push(_f._BeforeinputState.CANCEL);}else{if(this.type=="number"){_l=_i.substring(0,_c)+_a+_i.substring(_d);_m=_g.arrangeMask(_l,_c,_d+_a.length);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else if(_m.text!=_l){_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};_h.push(_f._BeforeinputState.REPLACE);}else{_h.push(_f._BeforeinputState.PASS);}}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{_l=_i.substring(0,_c)+_a+_i.substring(_c);_d=_c+_a.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}}break;default:_h.push(_f._BeforeinputState.PASS);break;}}return _h;};_pMaskEdit._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_a?_a:"";var _h=this._getMaskObj();if(_h){var _i=_h.arrangeMask(_g,_c,_d);if(_i==null){_e.replaceElementText("",_c,_d);_e.stopSysEvent();}else{var _j=_h.findNearEditablePos(_i.pos,1);if(_f&&_i.text==this.text){_e._event_stop=true;_j=_c;}if(_i.text!=_g||_i.pos!=_j){_e.updateElementText(_i.text,_j);}if(_i.text==this.text){var _k=_h.removeMask(_i.text);if(this.clipmode=="includespace"){var _l=this.trimtype;if(_l=="both"){_k=_k.replace(/^\s+|\s+$/g,"");}else if(_l=="left"){_k=_k.replace(/^\s+/,"");}else if(_l=="right"){_k=_k.replace(/\s+$/,"");}}this.value=_k;}}}};_pMaskEdit._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}if(this.type=="number"){if(!isFinite( +_a)||isNaN( +_a)){return true;}}else{_a=_a+"";var _b=this._getMaskObj();if(_b){_b.applyMask(_a);if(_b._is_mismatch){return true;}}}return false;};_pMaskEdit._on_input_compositionend=function(_a){var _b=this._input_element;if(_b){if(this._undostack){var _c=_b.getElementCaretPos();if(_c&&_c!= -1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}}};_pMaskEdit=null;}if(!nexacro.TextArea){nexacro.TextArea=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this.readonly=true;}};var _pTextArea=nexacro._createPrototype(nexacro.Component,nexacro.TextArea);nexacro.TextArea.prototype=_pTextArea;nexacro.TextArea._TAB_CHAR='\u0009';_pTextArea._type_name="TextArea";_pTextArea.acceptstab=false;_pTextArea.autoselect=false;_pTextArea.autoskip=false;_pTextArea.displaynulltext="";_pTextArea.displayinvalidtext=undefined;_pTextArea.usesoftkeyboard=true;_pTextArea.dragscrolltype="both";_pTextArea.imemode="none";_pTextArea.inputfilter="none";_pTextArea.inputmode="normal";_pTextArea.inputtype="normal";_pTextArea.maxlength=0;_pTextArea.readonly=false;_pTextArea.usecontextmenu=true;_pTextArea.useime="global";_pTextArea.text="";_pTextArea.value=undefined;_pTextArea._not_use_scrollTop=true;_pTextArea._input_element=null;_pTextArea._inputfilter_obj=null;_pTextArea._inputtype_obj=null;_pTextArea._undostack=null;_pTextArea._default_value=undefined;_pTextArea._default_text="";_pTextArea._keypad_type="text";_pTextArea._imedisable=false;_pTextArea._want_tab=true;_pTextArea._is_set_value=false;_pTextArea._update_scroll_lock=false;_pTextArea._processing_updateToDataset=false;_pTextArea._result_updateToDataset=true;_pTextArea._processing_canchange=false;_pTextArea._apply_filter=true;_pTextArea._onlydisplay=false;_pTextArea._apply_client_padding=false;_pTextArea._has_inputElement=true;_pTextArea._change_value=false;_pTextArea._processing_autoskip=false;_pTextArea._is_undo=false;_pTextArea._is_scrollable=true;_pTextArea._is_editable_control=true;_pTextArea._use_translate_scroll=false;_pTextArea._use_container_move=false;_pTextArea._use_readonly_status=true;if((nexacro._Browser=="IE"&&nexacro._BrowserVersion<10)||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_pTextArea._use_focus_caret=true;_pTextArea._caret_pos= -1;}else{_pTextArea._use_focus_caret=false;_pTextArea._caret_pos= -1;}_pTextArea._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pTextArea.accessibilityrole="textarea";_pTextArea.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.TextAreaElement(_a,"textarea");_b.setElementAutoSkip(this.autoskip);_b.setElementAutoSelect(this.autoselect);_b.setElementUseIme(this.useime);_b.setElementImeMode(this.imemode);_b.setElementReadonly(this.readonly);_b.setElementDisplayNullText(this.displaynulltext);_b.setElementMaxLength(this.maxlength);if((this.inputtype.indexOf("normal")>=0)||(this.inputtype.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this._keypad_type,this._imedisable);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"textarea");_b.setElementVerticalAlign("top");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this.textAlign);_b.setElementPadding(this.padding);var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this.wordWrap){_b.setElementWordWrap(this.wordWrap);}this._undostack=new nexacro._EditUndoStack(this);}};_pTextArea.on_created_contents=function(_a){var _b=this._input_element;if(_b){var _c=this.wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")> -1&&(_c!="none"&&_c!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);this.on_apply_value(this.value);_b.create(_a);this.set_usesoftkeyboard(this.usesoftkeyboard,true);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility){if(this.readonly){this._setAccessibilityFlagReadOnly(this.readonly);}this._setAccessibilityFlagMultiLine(true);}this.on_apply_scrollbartype();this._onResetScrollBar();this._onRecalcScrollSize();}};_pTextArea.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._inputfilter_obj;if(_c){this._inputfilter_obj=null;}var _d=this._inputtype_obj;if(_d){this._inputtype_obj=null;}var _e=this._vscroll_animationframe;if(_e){_e.destroy();}var _f=this._hscroll_animationframe;if(_f){_f.destroy();}};_pTextArea.on_create_contents_command=function(){var _a=this._input_element;if(_a){var _b=this.wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")> -1&&(_b!="none"&&_b!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);return _a.createCommand();}return "";};_pTextArea.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);this.on_apply_value(this.value);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}if(nexacro._enableaccessibility){if(this.readonly){this._setAccessibilityFlagReadOnly(this.readonly);}this._setAccessibilityFlagMultiLine(true);}this.on_apply_scrollbartype();this._onRecalcScrollSize();this._onResetScrollBar();};_pTextArea.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);if(this._update_scroll_lock==true){return false;}this._update_scroll_lock=true;this._onRecalcScrollSize();this._onResetScrollBar();this._update_scroll_lock=false;}};_pTextArea._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._input_element;if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();this._want_tab=true;if(_a){this._default_value=this.value;this._default_text=this.text;}var _d=this._getWindow();if(_d){var _e=_d._cur_ldown_elem?_d._cur_ldown_elem.linkedcontrol:null;if(!(_e&&_e instanceof nexacro.ScrollBarControl)){_c.setElementFocus(_a,_b);}}this._changeUserStatus("nulltext",false);var _f=_c.getElementText();if(_f!=this.text){this._default_text=this.text=_f;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}if(!this.autoselect){if(this._use_focus_caret){if(this._caret_pos== -1){_c.setElementSetSelect(0,0);}else{_c.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}else{if(this._caret_pos== -1){if(this._change_value){_c.setElementSetSelect(this.value?this.value.length:0);}else{_c.setElementSetSelect(0,0);}}}}}else{this._want_tab=true;if(_a){this._default_value=this.value;this._default_text=this.text;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}}}};_pTextArea.on_apply_status=function(_a,_b){var _c=this._input_element;if(_c){if(!this.wordWrap){var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}}};_pTextArea.on_getBindableProperties=function(){return "value";};_pTextArea.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementEnable(_a,this._getCSSStyleValue("color"));this._update_scroll_lock=true;this._onRecalcScrollSize();this._onResetScrollBar();this._update_scroll_lock=false;}}};_pTextArea.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pTextArea.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._input_element;var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(_f==this.value){return;}if(this._undostack){this._undostack.clear();}var _g=false;if(this.value!=_f){_g=true;}this._setValue(_f);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this.value?this.value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pTextArea.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pTextArea._onRecalcScrollSize=function(){if(this._onlydisplay){return;}var _a=this.getElement();var _b=this._input_element;var _c=null;var _d=_a.getClientWidth();var _e=_a.getClientHeight();if(_d<=0||_e<=0){return;}if(_a&&_b){var _f;var _g;_c=nexacro._get_invisible_obj(this);nexacro._reset_invisible_obj(_c,true);var _h=this.hscrollbar;var _i=this.vscrollbar;var _j=_i?_i._max:0;_f=_b.getElementScrollWidth();_g=_b.getElementScrollHeight();_a.setElementScrollMaxSize(_f,_g);var _k;var _l=this;if(_i){if(_j!=_i._max){var _m=nexacro._getTextSize("A",this._getCurrentStyleInheritValue("font"),false,undefined,"none",this._getCurrentStyleInheritValue("wordSpacing"),this._getCurrentStyleInheritValue("letterSpacing"));var _n=this._getCSSStyleValue("padding");var _o=_a.getClientHeight();var _p=_n?_o-(_n.top+_n.bottom):_o;var _q=this._getCaretLine();var _r=_i._pos?_i._pos/_m[1]:0;var _s=_o/_m[1];if(_r+_s<_q){_i.set_pos(_m[1]* _q-_p);}}else{_k=_b.getElementVScrollPos();if(_i._pos!=_k){_i.set_pos(_k);}}}if(_h){_k=_b.getElementHScrollPos();if(_h._pos!=_k){var _t=this._hscroll_animationframe;if(!_t){_t=this._hscroll_animationframe=new nexacro.AnimationFrame(_l,_h.set_pos(_k));}else{_t._setCallback(_h.set_pos(_k));}if(_t.callback){_t.start();}}}}if(_c){nexacro._reset_invisible_obj(_c,false);}};_pTextArea._getDlgCode=function(_a,_b,_c,_d){var _e=true;var _f;if(nexacro._enableaccessibility){if(!this._onlydisplay){if(_a==nexacro.Event.KEY_UP){_f=this._input_element;if((_f&&_f.isFirstCaretLine())||!_f){_e=false;}}else if(_a==nexacro.Event.KEY_DOWN){_f=this._input_element;if(!this.enable||(_f&&_f.isLastCaretLine())||!_f){_e=false;}}}}if(_a==nexacro.Event.KEY_TAB){if(this.readonly){this._want_tab=false;}}return {want_tab:this._want_tab,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pTextArea._getDragData=function(){return this.getSelectedText();};_pTextArea.on_get_accessibility_label=function(){var _a="";return _a;};_pTextArea.set_text=nexacro._emptyFn;_pTextArea.set_value=function(_a){_a=this._convertValueType(_a);if(_a){if(_a.indexOf("\r\n")!= -1||_a.indexOf("\n\r")!= -1){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(_a.indexOf("\r")!= -1){_a=_a.replace(/\r/g,"");}}if(this.value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);this._is_set_value=true;}};_pTextArea.on_apply_value=function(_a){var _b=this._input_element;if(_b){var _c=_b.getElementCaretPos();var _d=this.text;_a=_a?this.text:_a;if(this._is_created&&nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);}if(!this._onlydisplay){if(this._undostack){if(_c&&_c!= -1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}_b.setElementValue(_a);_d=_b.getElementText();}else{if(this.displaynulltext&&nexacro._isNull(this.value)){_b.setElementText(this.displaynulltext);}else{_b.setElementText(_a);}}if(this.text!=_d){this.text=_d;}this._updateAccessibilityLabel();this._default_value=this.value;this._default_text=this.text;if(this._is_created){this._onRecalcScrollSize();this._onResetScrollBar();}_c=_b.getElementCaretPos();if(_c&&_c!= -1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}this._is_set_value=true;}};_pTextArea.set_displaynulltext=function(_a){if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pTextArea.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementDisplayNullText(_a);}else{this.on_apply_value(this.value);}}};_pTextArea.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pTextArea.on_apply_usesoftkeyboard=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementUseSoftKeyboard(this.usesoftkeyboard,_a);}}};_pTextArea.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pTextArea.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pTextArea.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this.autoselect!=_a){this.autoselect=_a;this.on_apply_autoselect(_a);}};_pTextArea.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSelect(_a);}}};_pTextArea.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this.autoskip!=_a){this.autoskip=_a;this.on_apply_autoskip(_a);}};_pTextArea.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSkip(_a);}}};_pTextArea.set_inputmode=function(_a){var _b=["normal","upper","lower"];if(_b.indexOf(_a)== -1){return;}if(this.inputmode!=_a){this.inputmode=_a;}};_pTextArea.set_inputfilter=function(_a){if(_a){var _b=_a.split(',');var _c=["none","alpha","digit","comma","dot","sign","space","symbol"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.inputfilter!=_a){this.inputfilter=_a;this._inputfilter_obj=null;this.on_apply_inputfilter(_a);}};_pTextArea.on_apply_inputfilter=function(_a){this._inputfilter_obj=new nexacro._EditInputFilter(_a);};_pTextArea.set_inputtype=function(_a){if(_a){var _b=_a.split(',');var _c=["normal","alpha","english","digit","number","comma","dot","sign","space","symbol","half","full","numberandenglish"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])== -1){return;}}}else{return;}if(this.inputtype!=_a){this.inputtype=_a;this._inputtype_obj=null;this.on_apply_inputtype(_a);}};_pTextArea.on_apply_inputtype=function(_a){this._inputtype_obj=new nexacro._EditInputType(_a);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}else{this._imedisable=this._inputtype_obj.imedisable;}this._keypad_type=this._inputtype_obj.keypadtype;var _b=this._input_element;if(_b){if(!this._onlydisplay){if((this.inputtype.indexOf("normal")>=0)||(this.inputtype.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this.password?"password":this._keypad_type,this._imedisable);}}};_pTextArea.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this.maxlength!=_a){this.maxlength=_a;this.on_apply_maxlength(_a);}};_pTextArea.on_apply_maxlength=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementMaxLength(_a);}}};_pTextArea.set_useime=function(_a){_a=nexacro._toBoolean(_a);if(this.useime!=_a){this.useime=_a;this.on_apply_useime(_a);}};_pTextArea.on_apply_useime=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementUseIme(_a);}}};_pTextArea.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)== -1){return;}if(this.imemode!=_a){this.imemode=_a;this.on_apply_imemode(_a);}};_pTextArea.on_apply_imemode=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementImeMode(_a);}}};_pTextArea.on_apply_wordWrap=function(_a){var _b=this._input_element;if(_b){_b.setElementWordWrap(_a);}if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")> -1&&(this.wordWrap!="none"&&this.wordWrap==="")){this._hscrollbartype="none";}if(this._is_created){this._onRecalcScrollSize();}};_pTextArea.set_scrollbartype=function(_a){_a=nexacro._toString(_a).trim();var _b;var _c;var _d=_a.toLowerCase().split(" ");this.scrollbartype=_a;for(var _g=0;_g<_d.length;_g++ ){switch(_d[_g]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(_g==0){_c=_d[_g];}else if(_g==1){_b=_d[_g];}break;default:break;}}if(!_c&&!_b){this._hscrollbartype=undefined;this._vscrollbartype=undefined;}else{if(!_c||_c=="default"){this._hscrollbartype=_c=undefined;}else{this._hscrollbartype=_c;}if(!_b){this._vscrollbartype=_c;}else if(_b=="default"){this._vscrollbartype=undefined;}else{this._vscrollbartype=_b;}}if(this._is_created&&_c!="fixed"){var _e=this.wordWrap||this._getCSSStyleValue("wordWrap");var _f=(_e&&_e!="none"&&_e!="undefined");if(_f){this._hscrollbartype="none";}}this.on_apply_scrollbartype();return _a;};_pTextArea.set_acceptstab=function(_a){_a=nexacro._toBoolean(_a);if(this.acceptstab!=_a){this.acceptstab=_a;}};_pTextArea.set_dragscrolltype=function(_a){nexacro.Form.prototype.set_dragscrolltype.call(this,_a);};_pTextArea.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;}};_pTextArea.set_cursor=function(_a){this.cursor=_a;if(_a){if(this._cursor==null||this._cursor.value!=_a){if(this.enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pTextArea.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pTextArea.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);this._onRecalcScrollSize();}};_pTextArea.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pTextArea.getLength=function(_a){return (this.value?this.value.length:0);};_pTextArea.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!= -1){return _b.begin;}}return  -1;};_pTextArea.setCaretPos=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a== -1){if(_a){_a=this.text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);if(_a===0){this._setHscrollPos(0);this._setVscrollPos(0);}}return true;}return false;};_pTextArea.getSelect=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){return _a.getElementSelectionRange();}}return [0,0];};_pTextArea.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this.text?this.text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b= -1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a== -1){_a=_e;}if(_b== -1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pTextArea.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this.text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pTextArea.setSelectedText=function(_a){if(/\r\n|\n\r/.test(_a)){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_a)){_a=_a.replace(/\r/g,"");}var _b=this._input_element;if(_b){if(!this._onlydisplay){var _c=_b.getElementSelectionRange();var _d=_c[0],_e=_c[1];if(_d==_e){return "";}var _f="";if(this._inputtype_obj){var _g=_a.length;for(var _m=0;_m<_g;_m++ ){var _h=_a[_m];if(this._inputtype_obj.test(_h)){_f+=_h;}}_a=_f;}var _i=_a.length;var _j=this.text.substring(_d,_e);var _k=this.text;var _l=_k.length-(_e-_d)+_i;if(this.maxlength>0&&_l>this.maxlength){_a=_a.substring(0,this.maxlength-_i);}_k=_k.substring(0,_d)+_a+_k.substring(_e);if(this.text!=_k){this.set_value(_k);_b.setElementSetSelect(_d,_d+_i);}return _j;}}return "";};_pTextArea.insertText=function(_a,_b){_a=nexacro._toString(_a);if(_a==null||_a==""){return;}var _c=this.value||"";if(nexacro._isNull(_b)||_b===""){_b=_c.length;}else{_b=nexacro._toInt(_b);}if(_b<0||_b>_c.length){_b=_c.length;}var _d=this._input_element;if(_d){if(_a!=""){if(/\r\n|\n\r/.test(_a)){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_a)){_a=_a.replace(/\r/g,"");}}_c=_c.substring(0,_b)+_a+_c.substring(_b);if(!this._onlydisplay){this.set_value(_c);}else{}}};_pTextArea.deleteText=function(_a,_b){if(nexacro._isNull(_a)){_a=0;}else{_a=nexacro._toInt(_a);}if(nexacro._isNull(_b)){_b= -1;}else{_b=nexacro._toInt(_b);}var _c=this.value||"";var _d=_c.length;if(_b== -1){_b=_d-_a;}if(_b<0||_a<0||_a>=_d){return;}var _e=this._input_element;if(_e){if(!this._onlydisplay){var _f=_c.substring(0,_a)+_c.substring(_a+_b);this.set_value(_f);}else{}}};_pTextArea.find=function(_a,_b){_b=nexacro._toInt(_b)|0;_a=nexacro._toString(_a);if(_b== -1){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=_c.getElementCaretPos();if(_d&&_d!= -1){_b=_d.begin;}}}}if(_b<0){return  -1;}return _a?this.text.indexOf(_a,_b): -1;};_pTextArea.replace=function(_a,_b){if(_b==null){_b="";}_a=nexacro._toString(_a);_b=nexacro._toString(_b);var _c=this.value||"";var _d=this._input_element;if(_d&&_a){var _e=_c.split(_a);if(_e.length>1){_c=_e.join(_b);_e.pop();var _f=_e.join(_b).length;if(!this._onlydisplay){if(_c!=""){if(/\r\n|\n\r/.test(_c)){_c=_c.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_c)){_c=_c.replace(/\r/g,"");}}this.set_value(_c||"");if(_d._is_focused){this.setCaretPos(_f);}}else{}}}return this.value;};_pTextArea.updateToDataset=function(){if(this._result_updateToDataset=this.applyto_bindSource("value",this.value)){this._default_value=this.value;this._default_text=this.text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pTextArea.on_deactivate_process=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){_a.setCompositionComplete();var _b=_a.getElementCaretPos();_a.setElementSetSelect(_b.begin,_b.end);}}};_pTextArea._on_deactivate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",false);}this.on_deactivate_process.call(this);};_pTextArea._on_value_change=function(_a,_b,_c,_d){if(!this.on_fire_canchange(this,_a,_b,_c,_d)){return false;}this._default_value=_d;this._default_text=_c;var _e=this._input_element;var _f=_e.getElementCaretPos();if(_f&&_f!= -1){this._caret_pos=_f;}if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){return false;}this.on_fire_onchanged(this,_a,_b,_c,_d);return true;};_pTextArea._on_input_undo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){this._is_undo=true;var _c=_a.end;if(_a.value&&_a.value.length>_c){_c=_a.value.length;}_b.updateElementText(_a.value,_c);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pTextArea._on_input_redo=function(_a){if(this.readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pTextArea.on_notify_vscroll_onscroll=function(_a,_b){this._scrollTo(this._hscroll_pos,_b.pos,false,false,_b.type,_b._evtkind);if(this._input_element){this._input_element.setElementVScrollPos(_b.pos);}};_pTextArea.on_keydown_basic_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_basic_specialkey_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _h=_g.getElementCaretPos();var _i=_g.getElementText();_i=_i.substring(0,_h.begin)+nexacro.TextArea._TAB_CHAR+_i.substring(_h.end);var _j=_h.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_i,_j);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;};_pTextArea.on_keydown_basic_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!= -1){this._undostack.update(_h.begin,_h.end);}}return true;};_pTextArea.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keydown_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}this.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);}};_pTextArea.on_keydown_default_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_default_specialkey_process=function(_a,_b,_c,_d,_e,_f){if(_a>=nexacro.Event.KEY_LEFT&&_a<=nexacro.Event.KEY_DOWN){this._onRecalcScrollSize();}return true;};_pTextArea.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_default_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}this.on_keydown_default_process.call(this,_a);}};_pTextArea.on_keypress_basic_before_process=function(_a,_b,_c,_d){return true;};_pTextArea.on_keypress_basic_specialkey_process=function(_a,_b,_c,_d){if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return false;}return true;};_pTextArea.on_keypress_basic_process=function(_a,_b,_c,_d){if(nexacro._OS=="iOS"){return true;}var _e=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0&&this._isFilterChar(_f)){_e.stopSysEvent();return false;}}return true;};_pTextArea.on_keypress_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_g){if(_a!==0&&_b===0){return true;}else{if(!this.on_keypress_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keypress_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f)){return false;}}return true;}};_pTextArea.on_keyup_basic_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keyup_basic_specialkey_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keyup_default_process=function(_a,_b,_c,_d,_e,_f){this._onRecalcScrollSize();return true;};_pTextArea.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){if(!this.on_keyup_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keyup_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keyup_default_process.call(this,_a,_b,_c,_d,_e,_f)){return false;}};_pTextArea.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this.readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pTextArea.on_keyinput_basic_before_process=function(_a){return true;};_pTextArea.on_keyinput_basic_process=function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;this.value=_c;this.text=_a;if(this._undostack&&!_b.isComposing()){var _d=_b.getElementCaretPos();if(_d&&_d!= -1){this._undostack.push(_c,_d.begin,_d.end);}else{this._undostack.push(_c,0,0);}}return true;};_pTextArea.on_keyinput_basic_action=function(_a){if(this.readonly||!this._isEnable()){return false;}var _b=this._input_element;if(_b){if(!this.on_keyinput_basic_before_process.call(this,_a)){return false;}if(!this.on_keyinput_basic_process.call(this,_a)){return false;}this._onRecalcScrollSize();nexacro._OnceCallbackTimer.callonce(this,function(){this._onResetScrollBar();});}this._updateAccessibilityLabel();return true;};_pTextArea.on_killfocus_basic_process=function(){var _a=this._input_element;var _b;if(!this._onlydisplay){if(_a.isComposing()){_b=this.text;var _c=this.text;if(this._inputtype_obj){_c=this._inputtype_obj.apply(_b);}if(this._inputfilter_obj){_c=this._inputfilter_obj.apply(_b);}if(_b!=_c){_a.setCompositionCancel();}else{_a.setCompositionComplete();}}}var _d=this._default_value;var _e=this._default_text;var _f=this.value;_b=_f?_f:"";if(_d!=_f){if(!this._processing_canchange){var _g=_a.getElementCaretPos();if(!this._on_value_change(_e,_d,_b,_f)){var _h=_b?_b.length:0;var _i=_e?_e.length:0;if(_g!= -1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_d?_d.length:0;}this.value=_d;this.text=_e;if(!this._onlydisplay){_a.setElementValue(_d);}else{_a.setElementText(_d);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(!this._onlydisplay){if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}this._adjust_scrollPosition(_a);var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}};_pTextArea.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=_c.getElementSelectionRange();if(_d[0]==_d[1]){_c._setElementLastSelectionRange();}}if(!this.on_killfocus_basic_process.call(this)){return;}}};_pTextArea.on_fire_onkillfocus=function(_a,_b){nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);var _c=this._input_element;if(_c&&_c._updateElementValue){_c._updateElementValue(_c.value);this._setValue(_c.value===null?undefined:_c.value);}};_pTextArea.on_click_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=this._input_element;if(_k){if(!this._onlydisplay){var _l=this._getWindow();if(_l&&this._track_capture){var _m=_l._getCaptureComp(true,false,this);if(!_m||_m==this){_k.setElementFocus(_b,true);}}}}};_pTextArea.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,this,_m);return this.oneditclick._fireEvent(this,_o);}return true;};_pTextArea.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pTextArea.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pTextArea.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pTextArea._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pTextArea._setValue=function(_a){this.text=nexacro._toString(_a);this.value=_a;this.on_apply_value(this.value);};_pTextArea._setDefaultCaret=nexacro._emptyFn;_pTextArea._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pTextArea._setHscrollPos=function(_a){this._hscroll_pos=nexacro._toInt(_a);var _b=this._input_element;if(_b){_b.setElementHScrollPos(_a);}};_pTextArea._setVscrollPos=function(_a){this._vscroll_pos=nexacro._toInt(_a);var _b=this._input_element;if(_b){_b.setElementVScrollPos(_a);}};_pTextArea._setVScrollDefaultAction=function(_a){var _b=this.getElement();if(_b){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}var _c= -3;var _d=20;if(_a>=0){_c=3;}_a=_d* _c;var _e=this._vscroll_pos;var _f=_e-_a;var _g=_b.vscroll_limit;if(_f>_g){_f=_g;}this._scrollTo(this._hscroll_pos,_f,true,true,undefined,"mousewheel_v");if(_e!=this._vscroll_pos){return true;}}return false;};_pTextArea._getLineCount=function(){var _a=0;var _b=this._input_element;if(_b){if(!this._onlydisplay){_a=_b.getElementTextLineCount(true);}}return _a;};_pTextArea._getCaretLine=function(){var _a=0;var _b=this._input_element;if(_b){if(!this._onlydisplay){_a=_b.getElementCaretLine();}}return _a;};_pTextArea._isFilterChar=function(_a){if(_a!=""){if(this._inputfilter_obj&&this._inputfilter_obj.test(_a)){return true;}if(this._inputtype_obj&&!this._inputtype_obj.test(_a)){return true;}}return false;};_pTextArea._isWheelScrollable=function(_a){if(this._onlydisplay){return true;}var _b=this._input_element;if(!_b){return false;}var _c=_b.getElementVScrollPos();var _d=_b.getElementScrollHeight();var _e=this._getClientHeight();if((_c+_e>=_d&&_a<0)||(_c==0&&_a>0)){return false;}return true;};_pTextArea.on_beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=[_f._BeforeinputState.PASS];var _j=_g?_g.length:0;if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _i;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(_e=="insertFromPaste"){if(_g){var _k=this.maxlength;_g=_g.replace(/&quot;/g,"\"");if(_g.indexOf("\r\n")!= -1||_g.indexOf("\n\r")!= -1){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(_g.indexOf("\r")!= -1){_g=_g.replace(/\r/g,"");}if(_k&&_c+(_h.length-_d)+_j>_k){_g=_g.substring(0,_k-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_j=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;var _l=_c+_j;_f._beforeinput_result_pos={begin:_l,end:_l};_i.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this.inputmode){case "upper":_i.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_i.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this.maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _m=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_m&&_m.ismax){_i.push(_f._BeforeinputState.MAXLENGTH);}}if(this.maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}if(_e!="insertFromPaste"){_g=_h+_g;}if(_g.length>this.maxlength){_i.push(_f._BeforeinputState.CANCEL);_i.push(_f._BeforeinputState.MAXLENGTH);}}return _i;};_pTextArea._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(_f){return this.on_beforeinput_process_with_HTMLEvent.call(this,_a,_b,_c,_d,_e);}};_pTextArea.on_beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_e.value;var _h=_a.substring(_c,_d);if(_h){var _i=_h;if((nexacro._is_hangul(_i)||(_b==nexacro._CompositionState.NONE||_b==nexacro._CompositionState.END))){if(this._inputtype_obj){_i=this._inputtype_obj.apply(_i);}if(this._inputfilter_obj){_i=this._inputfilter_obj.apply(_i);}if(this.inputmode=="upper"){_i=_i.toUpperCase();}else if(this.inputmode=="lower"){_i=_i.toLowerCase();}}if(_i!=_h){if(_f&&!_i){var _j=_g?_g.length:0;var _k=_c+(_h.length-(_a.length-_j));_e.updateElementText(_g,_k);}else{_e.replaceElementText(_i,_c,_d);}}}};_pTextArea._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){return this.on_beforeinput_process_with_NexacroInputEvent.call(this,_a,_b,_c,_d);}};_pTextArea._adjust_scrollPosition=function(_a,_b){var _c=this.hscrollbar?this.hscrollbar.pos:0;var _d=this.vscrollbar?this.vscrollbar.pos:0;if(this._is_set_value&&(_b=="tabkey"||_b=="shifttabkey"||(this.taborder==0&&!this._is_subcontrol&&_b!="lbuttondown"&&_b!="lbutton"))){if(!this._change_value&&this._caret_pos== -1){if(this.vscrollbar){_d=0;}if(this.hscrollbar){_c=0;}}else{if(this.vscrollbar){_d=nexacro._getTextAreaElementVscrollPos(_a);}if(this.hscrollbar){_c=nexacro._getTextAreaElementHscrollPos(_a);}}}var _e=this;nexacro._OnceCallbackTimer.callonce(_e,function(){if(_e.hscrollbar){_e.hscrollbar.set_pos(_c);}if(_e.vscrollbar){_e.vscrollbar.set_pos(_d);}});this._is_set_value=false;};_pTextArea._on_input_compositionend=function(_a,_b){var _c=this._input_element;if(_c){if(this._undostack){var _d=_b?_b:_c.getElementCaretPos();if(_d&&_d!= -1){this._undostack.push(_a,_d.begin,_d.end);}else{this._undostack.push(_a,0,0);}}}};_pTextArea.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b,_c;var _d=_a._imelocale.getLocale();if(_d&&nexacro._cache_textarea_set[_d]){for(var _e in nexacro._cache_textarea_set[_d]){this[_e]=nexacro._cache_textarea_set[_d][_e];}for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_textarea_set[_d][nexacro._edit_user_override_func[_b]]){this[nexacro._edit_user_override_func[_b]]=nexacro.TextArea.prototype[nexacro._edit_user_override_func[_b]];}}}else{for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){this[nexacro._edit_user_override_func[_b]]=nexacro.TextArea.prototype[nexacro._edit_user_override_func[_b]];}}}};_pTextArea=null;}if(nexacro.Edit){nexacro._defineImeLocaleEdit("ko",{"Edit":{on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){if(_a.isComposing()){_b=this.text;var _c=this.text;if(this._inputtype_obj){_c=this._inputtype_obj.apply(_b);}if(this._inputfilter_obj){_c=this._inputfilter_obj.apply(_b);}if(_b!=_c){_a.setCompositionCancel();}else{_a.setCompositionComplete();}}var _d=this._default_value;var _e=this._default_text;var _f=_a.value;_b=_f?_f:"";var _g=_a.getElementCaretPos();if(_d!=_f){if(!this._processing_canchange){if(!this._on_value_change(_e,_d,_b,_f)){var _h=_b?_b.length:0;var _i=_e?_e.length:0;if(_g!= -1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_d?_d.length:0;}this.value=_d;this.text=_e;_a.setElementValue(_d);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}if(nexacro._Browser=="IE"){if(this._inputtype_obj&&this._inputtype_obj._imedisable){this.on_apply_imemode(this.imemode);}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e){if(nexacro._OS=="Windows"&&nexacro._OSVersion<10&&nexacro._Browser=="IE"){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_a==229){if(_f._last_selection_range){_g.begin=_f._last_selection_range[0];_g.end=_f._last_selection_range[1];}else{_g.begin=_g.end=_g.begin-1;}}if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}return true;}else{return nexacro.Edit.prototype.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e);}},on_keypress_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b&&!_g.isComposing()){var _h=String.fromCharCode(_b);if(nexacro._OS=="iOS"&&(_b>=12593&&_b<=12643)){if(_h.length>0&&this._isFilterChar(_h)){_g.stopSysEvent();return false;}return true;}}return nexacro.Edit.prototype.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f);}},"TextArea":{on_keydown_basic_process:function(_a,_b,_c,_d,_e){if(nexacro._OS=="Windows"&&nexacro._OSVersion<10&&nexacro._Browser=="IE"){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_a==229){if(_f._last_selection_range){_g.begin=_f._last_selection_range[0];_g.end=_f._last_selection_range[1];}else{_g.begin=_g.end=_g.begin-1;}}if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}return true;}else{return nexacro.TextArea.prototype.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e);}},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){_g.setCompositionComplete();}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keypress_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b&&!_g.isComposing()){var _h=String.fromCharCode(_b);if(nexacro._OS=="iOS"&&(_b>=12593&&_b<=12643)){if(_h.length>0&&this._isFilterChar(_h)){_g.stopSysEvent();return false;}return true;}}return nexacro.TextArea.prototype.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_killfocus_basic_process:function(){var _a=nexacro.TextArea.prototype.on_killfocus_basic_process.call(this);if(nexacro._Browser=="IE"){if(this._inputtype_obj&&this._inputtype_obj._imedisable){this.on_apply_imemode(this.imemode);}}return _a;}}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ko",{"InputElement":{on_sys_keydown_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;if(_c._force_fire_propertychange){var _d=nexacro._getSysEventKey(_a);if(_d==nexacro.KeyCode_ImeInput){if(!_c.on_sys_propertychange_before_process.call(_c,_a)){return;}_c.on_sys_propertychange_process.call(_c,_a);}}return true;},on_sys_keyup_specialkey_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;var _d=nexacro._getSysEventKey(_a);var _e=_a.ctrlKey;var _f=_c.getElementCaretPos();var _g=_c._composer.isComposing();if(_g){var _h=_c._getInputValue();if(_d==nexacro.Event.KEY_RETURN||_d==nexacro.Event.KEY_ESC||(_e&&_d==77)||(_e&&_d==90)){_c._composer.setStatus(nexacro._CompositionState.END,_f.end);_c._updateInputValue(_h,true);}}return true;},on_sys_compositionstart_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.START,_d.begin);if(nexacro._OS=="Windows"&&nexacro._OSVersion<10&&nexacro._Browser=="IE"){var _e=this._getInputValue();if(_c._composer._prev_status==nexacro._CompositionState.NONE){_e=_c.value;if(this._last_selection_range){_d.begin=this._last_selection_range[0];_d.end=this._last_selection_range[1];}else{_d.begin=_d.end=_d.begin-1;}}else if(_c._composer._prev_status==nexacro._CompositionState.COMPOSING){var _f=_e.length;var _g=this._last_selection_range[1];var _h=_e.substr(0,_g);if(_f-1!=_g){_h+=_e.substr(_g+1);}_e=_h;_d.begin=_g;_d.end=_g;}var _i=this.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_e,_d);}}return true;},on_sys_compositionend_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;var _d=_c.parent_elem.linkedcontrol;var _e=_c._getInputValue();var _f=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.END,_f.end);if(_c._evtorder_compositionend_is_last){setTimeout(function(){_c._updateInputValue(_e,true);},0);}if(_c._use_event_beforeinput&&nexacro._OS=="Android"){var _g=_a.data;var _h=_a.type;var _i=_c._getInputValue();var _j=_c.getCompositionStatus();var _k=_f.begin;var _l=_f.end;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_k=_c._composing_start;}if(_l==undefined){if(_c.maxlength>0){_l=Math.min(_k+_g.length,_c.maxlength);}else{_l=_k+_g.length;}}_g=_g.substr(0,_l-_k);_i=_i.substring(0,_k)+_i.substring(_l,Math.min(_i.length,(_c.maxlength>0?_c.maxlength:_i.length)));_c._beforeinput_result=_d._on_beforekeyinput(_c,_g,_j,_k,_l,_h);if(_c._beforeinput_result){_c._beforeinput_result.forEach(function(_t){var _u;switch(_t){case _c._BeforeinputState.PASS:break;case _c._BeforeinputState.CANCEL:_c._beforeinput_result_data=_i;_c._beforeinput_result_pos={begin:null,end:null};break;case _c._BeforeinputState.CONVERT_UPPER:_u=_l;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toUpperCase()+_i.substring(_l,_i.length);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.CONVERT_LOWER:_u=_l+_g.length;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toLowerCase()+_i.substring(_l);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.MAXLENGTH:break;case _c._BeforeinputState.REPLACE:break;default:break;}},_c);}_c._on_sys_keyinput(_a);}_c._composing_start=_c._composing_end=undefined;var _m=_e;if(_c.maxlength>0&&_e&&_e.length>_c.maxlength){if(_c._last_selection_range){var _n=_m.substr(0,_c._last_selection_range[0]);var _o=_n.length;var _p=_m.substr(_f.end);var _q=_p.length;var _r=_c.maxlength-(_o+_q);if(_r<0){_r=0;}var _s=_m.substr(_c._last_selection_range[0],_r);_m=_n+_s+_p;}else{_m=_m.substring(0,_c.maxlength);}_e=_m;}_d=_c.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_e);}_c._setElementLastSelectionRange();return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;if(_c._skip_sys_keyinput){_c._skip_sys_keyinput=false;return;}var _d=_c.parent_elem.linkedcontrol;var _e=false;var _f=_c._getInputValue();var _g;if(_c._beforeinput_result){var _h=false;_c._beforeinput_result.forEach(function(_l){switch(_l){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.end,_c._beforeinput_result_pos.end);_h=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_c._beforeinput_result_data!=null){_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.begin,_c._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_e=true;break;}},_c);if(_c.autoskip&&_e){if(_c.value&&_f.length>=_c.maxlength){_c._go_next_focus();}}if(_h){return;}}_f=_c._getInputValue();_g=_c.getElementCaretPos();if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}var _i=_c.value;_c._updateElementValue(_f);if(_d._on_keyinput){_d._on_keyinput(_c);}if(_c.getInputStatusPseudoClass("AUTOFILL")){nexacro.__changeInputDOMNodeType(_b,_c.inputtype);}var _j=_c._composer._prev_status;var _k=_c._composer.status;if(_j==_k&&_c.value==_i){if(_d._on_input_autoskip){_d._on_input_autoskip();}}_c._composer._prev_status=_k;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){if(nexacro._Browser=="Gecko"){var _b=_a?(_a.target||_a.srcElement):this.handle;var _c=_b?_b._linked_element:this;var _d=_c.parent_elem.linkedcontrol;var _e=_d._getRootWindow();if(_e&&_e._keydown_element){if(_e._keydown_element!==_c&&_d._processing_autoskip){var _f=_c.value;var _g=(_c._last_selection_range)?_c._last_selection_range:[0,0];_c._updateInputValue(_f,false,_g[0],_g[1]);_d._processing_autoskip=false;return false;}}}return nexacro.InputElement.prototype.on_sys_keyinput_process.call(this,_a);},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput&&nexacro._is_hangul(_a.data)){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_apply_ime_environment_process:function(_a){var _b=_a?(_a.target||_a.srcElement):this.handle;var _c=_b?_b._linked_element:this;if(!_c._apple_default_browser){_c._setElementUseMaxLength(true);}else{_c._setElementUseMaxLength(false);}if(this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(_b,_c.maxlength);}else{nexacro.__setDOMNode_MaxLength(_b,0);}_c.on_updateEvtOrder_process();return true;},on_apply_force_imeSet:function(_a){var _b=_a?(_a.target||_a.srcElement):this.handle;var _c=_b?_b._linked_element:this;var _d=_c.parent_elem.linkedcontrol;var _e=_c.getElementCaretPos();var _f,_g;if(nexacro._Browser=="IE"){if(_d._inputtype_obj&&_d._inputtype_obj._imedisable){var _h=false;if(_c._evtorder_compositionend_is_last){_h=true;_c._evtorder_compositionend_is_last=false;}_d.on_apply_imemode("alpha");_b.blur();_b.focus();if(_h){_c._evtorder_compositionend_is_last=true;}_c.setCompositionCancel();_f=this.value;if(_f===null||_f===undefined){_f="";}_c._updateInputValue(_f);_g=_e.begin;if(_g>0){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<11){_g-=1;}}_c.setElementSetSelect(_g,_g);return false;}}else if(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge"){if(_d._inputtype_obj&&_d._inputtype_obj._imedisable){_c.setCompositionCancel();_f=this.value;if(_f===null||_f===undefined){_f="";}_c._updateInputValue(_f);_g=_e.begin;if(_g>0){_g-=1;}_c.setElementSetSelect(_g,_g);return false;}}return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ko",{"InputElement":{on_sys_compositionstart_process:function(){var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.START,_a.begin);return false;},on_sys_compositionupdate_process:function(){if(this._inputtype==""){return true;}var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_a.end);return false;},on_sys_compositionend_process:function(){if(this._inputtype==""){return true;}var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.END,_a.end);var _b=this._getInputValue();var _c=_b;if(this.maxlength>0&&_b&&_b.length>this.maxlength){if(this._last_selection_range){var _d=_c.substr(0,this._last_selection_range[0]);var _e=_d.length;var _f=_c.substr(_a.end);var _g=_f.length;var _h=this.maxlength-(_e+_g);if(_h<0){_h=0;}var _i=_c.substr(this._last_selection_range[0],_h);_c=_d+_i+_f;}else{_c=_c.substring(0,this.maxlength);}_b=_c;}var _j=this.parent.linkedcontrol;if(_j){_j._on_input_compositionend(_b);}return false;}}});}}{var regexp_ko="[\\uac00-\\ud7af\\u3130-\\u318f\\u1100-\\u11ff]";nexacro._addImeLocaleInfo("ko",regexp_ko);}if(nexacro.Edit){nexacro._defineImeLocaleEdit("zh",{"Edit":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_e;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _g=_f.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_g.blur();_g.focus();}else if(nexacro._Browser=="Runtime"){_f.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_f.isComposing()){_f.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_f.isComposing()){_f.setCompositionComplete();}if(this._undostack){this._undostack.undo();_f._applyMaxlength();_f.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_f.stopSysEvent();return;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}if((nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge"))){if(_f.isComposing()&&(_a==37||_a==39)){_f.stopSysEvent();return false;}}return true;},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this.value===_c&&this.text===_a){return false;}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g= -1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(!this._set_node_value){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!= -1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},on_killfocus_basic_process:function(){var _a=this._input_element;if(!this._onlydisplay){var _b=_a.value;if(_a.isComposing()){_b=this._killfocus_fix_composition();}var _c=this._default_value;var _d=this._default_text;var _e=_a.value;var _f=_e?_e:"";var _g=_a.getElementCaretPos();if(_c!=_e){if(!this._on_value_change(_d,_c,_f,_e)){var _h=_f?_f.length:0;var _i=_d?_d.length:0;if(_g!= -1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this.value=_c;this.text=_d;_b=_c;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}else{_b=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}return true;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextArea":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _i=_g.getElementCaretPos();var _j=_g.getElementText();_j=_j.substring(0,_i.begin)+nexacro.TextArea._TAB_CHAR+_j.substring(_i.end);var _k=_i.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_j,_k);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}if((nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge"))){if(_f.isComposing()&&(_a==37||_a==39)){_f.stopSysEvent();return false;}}return true;},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){var _h=_g.getElementCaretPos();var _i=_g._composer.startOffset;var _j=_h.end;if(_j===undefined){_j=_g._composer.endOffset;}var _k=_g._getInputValue();var _l=this._fix_composition(_k,_i,_j);var _m=_j;var _n= -1;var _o=false;var _p=_g._checkMaxLength(_l,_m-(_k.length-_l.length),true);if(this.maxlength>0){if(_p){_o=_p.ismax;_n=_p.pos;if(_o){_l=_l.substring(0,_n)+_k.substring(_m);}}else{_n=_m-(_k.length-_l.length);}}else{_n=_m-(_k.length-_l.length);}_k=_l;_g._updateElementValue(_k);if(nexacro._Browser=="IE"||nexacro._Browser=="Runtime"){_g._updateInputValue(_k);}else{nexacro.__setDOMNode_Value(_g.handle,_k);}if(_n!= -1&&_i==_n&&nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_g.setCompositionCancel(_n);}else if(_n!= -1&&_i==_n){_g.setCompositionCancel(_n,true);}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_g.setCompositionComplete(_n);}else{_g.setCompositionComplete(_n,true);}_g.setElementSetSelect(_n,_n);_k=_g._getInputValue();if(_o){if(_g.autoskip){if(_g.value&&_k.length>=_g.maxlength){_g._go_next_focus();}}if(this._on_input_autoskip){this._on_input_autoskip();}}}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this.value===_c&&this.text===_a){return false;}return true;},on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=null;var _d=_a.value;if(_a.isComposing()){_c=[_a._composer.startOffset,_a._composer.endOffset];_d=_a._getInputValue();var _e=this._killfocus_fix_composition();_c[0]=_c[1]=_c[1]-(_d.length-_e.length);_d=_e;}else{var _f=_a.getElementCaretPos();if(_f&&_f!= -1){_c=_f;}}var _g=this._default_value;var _h=this._default_text;var _i=_a.value;_b=_i?_i:"";if(!_c){_c=_a.getElementCaretPos();}if(_g!=_i){if(!this._on_value_change(_h,_g,_b,_i)){var _j=_b?_b.length:0;var _k=_h?_h.length:0;if(_c!= -1){if(_j-_k>=0){_c.begin=_c.end=_c.begin-(_j-_k);}if(_c.begin<0){_c.begin=_c.end=0;}this._caret_pos=_c;}else{this._caret_pos.begin=this._caret_pos.end=_g?_g.length:0;}this.value=_g;this.text=_h;_d=_g;if(!this._onlydisplay){_a.setElementValue(_g);}else{_a.setElementText(_g);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);_a._need_reset_update_value=true;}else{_d=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_a.setElementBlur();}}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(/\r\n|\n\r/.test(_g)){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_g)){_g=_g.replace(/\r/g,"");}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g= -1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="IE"||nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!= -1&&_c==_g&&nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_a.setCompositionCancel(_g);}else if(_g!= -1&&_c==_g){_a.setCompositionCancel(_g,true);}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_a.setCompositionComplete(_g);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){if(/\r\n|\n\r/.test(_d)){_d=_d.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_d)){_d=_d.replace(/\r/g,"");}var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("zh",{"InputElement":{_ignore_input_event_once:false,setCompositionComplete_process:function(_a,_b){var _c=this._getInputValue();var _d=_b||this._composer.isComposing();if(_d){var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_a);this._updateInputValue(_c,!this._processing_oninput,_a);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin)+_d.substring(_a),!this._processing_oninput,_e.begin);}return true;},on_sys_keydown_before_process:function(_a){var _b=_a.srcElement;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keydown_before_process.call(_c,_a);},on_sys_keyup_before_process:function(_a){var _b=_a.srcElement;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keyup_before_process.call(_c,_a);},on_sys_keyup_specialkey_process:function(_a){var _b=this;var _c=_b._composer.isComposing();if(_c){var _d=_a.ctrlKey;var _e=nexacro._getSysEventKey(_a);var _f=_b._getInputValue();var _g;if(_e==nexacro.Event.KEY_RETURN||(_d&&_e==77)||(_d&&_e==90)){_g=_b.getElementCaretPos();var _h=_b._composer.startOffset;_b._composer.setStatus(nexacro._CompositionState.END,_g.end);var _i=_b.parent_elem.linkedcontrol;var _j=_g.end;var _k=false;if(_b._composing_start!==undefined&&_b._composing_end!==undefined){_h=_b._composing_start;}var _l= -1;var _m=_i._fix_composition(_f,_h,_j);var _n=_j;if(_i.maxlength>0){var _o=_b._checkMaxLength(_m,_n-(_f.length-_m.length));if(_o){_k=_o.ismax;_l=_o.pos;if(_k){_m=_m.substring(0,_l)+_f.substring(_n);}}else{_l=_n-(_f.length-_m.length);}}else{_l=_n-(_f.length-_m.length);}_f=_m;_b._updateInputValue(_f,true,_l);_f=_b._getInputValue();if(_k){_b.setCompositionComplete();if(_b.autoskip&&_b._is_focused){if(_b.value&&_f.length>=_b.maxlength){_b._go_next_focus();}}if(_i._on_input_autoskip){_i._on_input_autoskip();}}_b._composing_start=_b._composing_end=undefined;_i=_b.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_f);}_b._setElementLastSelectionRange();}else if(_e>=nexacro.Event.KEY_F6&&_e<=nexacro.Event.KEY_F10){if((nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_g=_b.getElementCaretPos();_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}}}return true;},on_sys_propertychange_process:function(_a){var _b=_a.srcElement;if(_b){var _c=_b._linked_element;if(_c){var _d=_c.getElementSelectionRange();if(!_c._processing_oninput){if(_c._ignore_input_event_once){_c._ignore_input_event_once=false;return false;}else if(_d[0]==_d[1]&&_c.isComposing()){_c._ignore_input_event_once=true;}}}return nexacro.InputElement.prototype.on_sys_propertychange_process.call(_c,_a);}},on_sys_beforeinput_forward_process:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d=_a.data;var _e=_a.inputType;var _f=_b._getInputValue();var _g=_b.getElementCaretPos();var _h=_b.getCompositionStatus();var _i=_g.begin;var _j=_g.end;var _k=_c._getWindow();var _l;if(_c){_l=_k._getCaptureComp(false,true,_c);}if(_l&&_l!=_c){_b._beforeinput_result=[_b._BeforeinputState.CANCEL];_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};_b._b_beforeinput_forcedcancle=true;return false;}else{_b._b_beforeinput_forcedcancle=false;}if(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"){{if(_d==null&&_e=="insertLineBreak"){_d="\n";}else if(_e=="insertCompositionText"){_b._composing_start=_i;_b._composing_end=_j;}_b._beforeinput_result=_c._on_beforekeyinput(_b,_d,_h,_i,_j,_e);if(_b._beforeinput_result){_b._beforeinput_result.forEach(function(_m){switch(_m){case _b._BeforeinputState.PASS:break;case _b._BeforeinputState.CANCEL:_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};break;case _b._BeforeinputState.MAXLENGTH:break;case _b._BeforeinputState.REPLACE:case _b._BeforeinputState.CONVERT_UPPER:case _b._BeforeinputState.CONVERT_LOWER:_b._beforeinput_result_data=_f.substring(0,_i)+_b._beforeinput_result_insert_data+_f.substring(_j);break;default:break;}},_b);}}}return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d;var _e;var _f=false;if(_b._beforeinput_result&&(_b._b_beforeinput_forcedcancle||(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"))){var _g=false;_b._beforeinput_result.forEach(function(_j){switch(_j){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.end,_b._beforeinput_result_pos.end);_g=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_b._beforeinput_result_data!=null){_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.begin,_b._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_f=true;break;}},_b);if(_g){return;}}_d=_b._getInputValue();_e=_b.getElementCaretPos();if(_c._is_undo&&this.maxlength>0){var _h=_b._checkMaxLength(_d,_e.end);if(_h&&_h.ismax){_d=_d.substring(0,_h.pos);_b._updateInputValue(_d,false,"",_h.end);}_c._is_undo=false;}if(_b._composer.isComposing()){_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{_b._updateElementValue(_d);}if(_c._on_keyinput&&_a.inputType!="deleteCompositionText"){_c._on_keyinput(_b);}var _i=_b._composer.status;_b._setElementLastSelectionRange();if(_b.autoskip&&_b._is_focused){if(_f){if(_b.value&&_d.length>=_b.maxlength){_b._go_next_focus();}}if(_c._on_input_autoskip){_c._on_input_autoskip();}}_b._composer._prev_status=_i;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){var _b=(_a.target||_a.srcElement);var _c=this;var _d=_c.parent_elem.linkedcontrol;var _e=_c._composer.status;var _f=_c._getInputValue();var _g=_c.getElementCaretPos();if(_g&&_g!= -1){var _h,_i;_h=_c._paste_caret_pos?_c._paste_caret_pos.begin:_c._composer.startOffset;_i=_c._paste_caret_pos?_c._paste_caret_pos.end:_g.end;if(_h>_i){_h=_i;}var _j=_c._checkBackspaceKeyInKeyInput(_c.value,_f,_h,_i);var _k=_c._checkSelectionInKeyInput(_c.value,_f,_h,_i);if(_j){nexacro.__fireHTMLEvent(_b,"keydown","onkeydown");}if(_k!==false){_h=_k;}if(_d._on_beforekeyinput&&!_c._composer.isComposing()){_d._on_beforekeyinput(_c,_f,_e,_h,_i);if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}}}var _l=_c._getInputValue();_g=_c.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(_d instanceof nexacro.MaskEdit){_c._beforeinput_result_pos={begin:_g.begin,end:_g.end};}}var _m=false;if(_c.maxlength>0&&!_c._composer.isComposing()){var _n=_c._paste_caret_pos?_c._paste_caret_pos.end-(_f.length-_l.length):_g.end;var _o=_c._checkMaxLength(_l,_n);if(_o){_m=_o.ismax;var _p=_o.pos;if(_m){if(_n!=_p){_l=_l.substring(0,_p)+_l.substring(_n);_c._updateInputValue(_l,false,_p);_g=_c.getElementCaretPos();}_c.setCompositionComplete();}}}_f=_l;if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}else{_c._updateElementValue(_f);}var _q=_c._composer.status;if(_m){if(_d._on_input_autoskip&&_c._is_focused){_d._on_input_autoskip();}}_c._composer._prev_status=_q;if(_d._on_keyinput&&_a.inputType!="deleteCompositionText"){_d._on_keyinput(_c);}if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_m){if(nexacro._Browser=="Safari"){setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}else{_c._go_next_focus();}}}return true;},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_sys_compositionupdate_process:function(_a){var _b=false;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"||nexacro._OS=="iOS"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9)||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_b=true;}var _c=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_c.end,_b);return true;},on_sys_compositionend_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;var _d=_c.getCompositionStatus();if(_d!=nexacro._CompositionState.COMPOSING){return;}if(_c._is_focused){var _e=_c._getInputValue();var _f=_c.getElementCaretPos();var _g=_c._composer.startOffset;_c._composer.setStatus(nexacro._CompositionState.END,_f.end);var _h=_c.parent_elem.linkedcontrol;var _i=_a.data;var _j=_f.end;var _k=false;var _l;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_g=_c._composing_start;}if(_j==undefined){_j=_g+_i.length;}var _m=_j;var _n= -1;var _o;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){if(_m!=_n){_o=_o.substring(0,_n)+_e.substring(_m);}}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}var _p=false;if(_e!==_o){_p=true;}_e=_o;_c._updateElementValue(_e);if((_p||_c.value!==_e)&&_h._on_keyinput){_h._on_keyinput(_c,_e);}if(!_k||!_c.autoskip){setTimeout(function(){_c._updateInputValue(_e,true,_n);},0);}}else{_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_m=_c._paste_caret_pos?_c._paste_caret_pos.end:_j;_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){_o=_o.substring(0,_n)+_e.substring(_m);}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}_e=_o;var _q=_c.value;if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_c._updateElementValue(_e);}if(!_c._evtfire_oninput_after_compositionend||_c._evtorder_compositionend_is_last||_c._use_event_beforeinput){_c._updateInputValue(_e,true,_n);}else{_c._updateInputValue(_e,false,_n);}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==10&&_q!=_e&&_h._on_keyinput){_h._on_keyinput(_c);}if(_k){_c.setCompositionComplete();}}_c._composing_start=_c._composing_end=undefined;_h=_c.parent.linkedcontrol;if(_h){_h._on_input_compositionend(_e);}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_k){if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11)){_c._go_next_focus();}else{setTimeout(function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_c._updateInputValue(_e,true,_n);}if(_c._is_focused){_c._go_next_focus();}},0);}}if(_h._on_input_autoskip){_h._on_input_autoskip();}}}return true;},on_sys_touchend_process:function(_a){return false;},on_sys_paste_before_process:function(_a){if(nexacro._OS=="iOS"&&this.isComposing()){nexacro._stopSysEvent(_a);return false;}return true;},on_complete_composition_value_process:function(){if((nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")||nexacro._Browser==="Gecko"||nexacro._Browser==="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){if(this.handle){this.handle.blur();this.handle.focus();if((nexacro._Browser==="IE"&&nexacro._BrowserVersion<=8)||(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")){var _a=this.parent_elem.linkedcontrol;var _b=this._composer.startOffset;var _c=this._composer.endOffset;if(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari"){var _d=this.getElementCaretPos();_c=_d.end;}var _e= -1;var _f=this._getInputValue();var _g=_a._fix_composition(_f,_b,_c);var _h=_c;if(_a.maxlength>0){var _i=this._checkMaxLength(_g,_c-(_f.length-_g.length));if(_i){_e=_i.pos;if(_i.ismax){_g=_g.substring(0,_e)+_f.substring(_h);}}else{_e=_c-(_f.length-_g.length);}}else{_e=_c-(_f.length-_g.length);}this._updateInputValue(_g,false,_e);this.setCompositionComplete(_e,true);}}}return true;},on_updateEvtOrder_process:function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11){this._evtorder_compositionend_is_last=true;}else{this._evtorder_compositionend_is_last=false;}},on_apply_ime_environment_process:function(_a){var _b=_a?(_a.target||_a.srcElement):this.handle;var _c=_b?_b._linked_element:this;_c._use_html_maxlength=false;nexacro.__setDOMNode_MaxLength(_b,0);_c.on_updateEvtOrder_process();return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("zh",{"InputElement":{setCompositionComplete_process:function(_a,_b){var _c=this.getElementCaretPos();var _d=this._getInputValue();var _e=_b||this._composer.isComposing();if(_e){this._composer.setStatus(nexacro._CompositionState.END,_c.end);this._updateInputValue(_d,!this._processing_oninput);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin),!this._processing_oninput);}return true;},on_sys_keyup_specialkey_process:function(_a,_b,_c){var _d=this.getElementCaretPos();var _e=this._composer.isComposing();if(_e){if(_a==nexacro.Event.KEY_RETURN||(_c&&_a==77)||(_c&&_a==90)){this._composer.setStatus(nexacro._CompositionState.END,_d.end);var _f=this._getInputValue();this._updateInputValue(_f,true);}}return true;},on_sys_keyinput_process:function(){var _a=this._composer.status;var _b,_c;var _d=this._getInputValue();var _e=this.getElementCaretPos();var _f=this._paste_caret_pos;_b=this._paste_caret_pos?this._paste_caret_pos.begin:this._composer.startOffset;_c=this._paste_caret_pos?this._paste_caret_pos.end:_e.end;if(_b>_c){_b=_c;}var _g=this.parent_elem.linkedcontrol;if(_g._on_beforekeyinput&&!this._composer.isComposing()){_g._on_beforekeyinput(this,_d,_a,_b,_c);if(this._event_stop){this._event_stop=false;return false;}}var _h=this._getInputValue();_e=this.getElementCaretPos();var _i=false;if(this.maxlength>0&&!this._composer.isComposing()){var _j=_f?_f.end:_e.end;var _k=this._checkMaxLength(_d,_j);if(_k){_i=_k.ismax;var _l=_k.pos;if(_i&&_j!=_l){_h=_d.substring(0,_l)+_d.substring(_j);this._updateInputValue(_h);this.setElementSetSelect(_l,_l);_e=this.getElementCaretPos();}this.setCompositionComplete();}}_d=_h;if(this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{this._updateElementValue(_d);}var _m=this._composer.status;if(_i){if(_g._on_input_autoskip&&this._is_focused){_g._on_input_autoskip();}}this._composer._prev_status=_m;if(_g._on_keyinput){_g._on_keyinput(this);}if(this._event_stop){this._event_stop=false;return false;}this._setElementLastSelectionRange();if(this.autoskip&&this._is_focused&&_i){this._go_next_focus();}return true;},on_sys_compositionend_process:function(){if(this._is_focused){var _a=this._getInputValue();var _b=this.getElementCaretPos();var _c=this._composer.startOffset;this._composer.setStatus(nexacro._CompositionState.END,_b.end);var _d=this.parent_elem.linkedcontrol;var _e=_b.end;var _f=false;if(this._composing_start!==undefined&&this._composing_end!==undefined){_c=this._composing_start;}if(_e==undefined){_e=_c;}var _g= -1;var _h=_d._fix_composition(_a,_c,_e);var _i=_e;if(_d.maxlength>0){var _j=this._checkMaxLength(_h,_i-(_a.length-_h.length));if(_j){_f=_j.ismax;_g=_j.pos;if(_f){_h=_h.substring(0,_g)+_a.substring(_i);}}else{_g=_i-(_a.length-_h.length);}}else{_g=_i-(_a.length-_h.length);}_a=_h;this._updateInputValue(_a,false,_g);if(_g!= -1&&_i!=_g){this.setElementSetSelect(_g,_g);_a=this._getInputValue();_b=this.getElementCaretPos();}if(_f){this.setCompositionComplete();}this._composer.setStatus(nexacro._CompositionState.END,_b.end);_d=this.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_a);}}return;},on_complete_composition_value_process:function(){this.setCompositionComplete();return true;}}});}}{var regexp_zh="[\u0000-\u007F]|[\u4E00-\u9FCC]";nexacro._addImeLocaleInfo("zh",regexp_zh);}if(nexacro.Edit){nexacro._defineImeLocaleEdit("ja",{"Edit":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_e;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _g=_f.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_g.blur();_g.focus();}else if(nexacro._Browser=="Runtime"){_f.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_f.isComposing()){_f.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_f.isComposing()){_f.setCompositionComplete();}if(this._undostack){this._undostack.undo();_f._applyMaxlength();_f.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_f.stopSysEvent();return;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}if((nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge"))){if(_f.isComposing()&&(_a==37||_a==39)){_f.stopSysEvent();return false;}}return true;},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this.value===_c&&this.text===_a){return false;}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g= -1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(!this._set_node_value){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!= -1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},on_killfocus_basic_process:function(){var _a=this._input_element;if(!this._onlydisplay){var _b=_a.value;if(_a.isComposing()){_b=this._killfocus_fix_composition();}var _c=this._default_value;var _d=this._default_text;var _e=_a.value;var _f=_e?_e:"";var _g=_a.getElementCaretPos();if(_c!=_e){if(!this._on_value_change(_d,_c,_f,_e)){var _h=_f?_f.length:0;var _i=_d?_d.length:0;if(_g!= -1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this.value=_c;this.text=_d;_b=_c;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}else{_b=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}}return true;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextArea":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _i=_g.getElementCaretPos();var _j=_g.getElementText();_j=_j.substring(0,_i.begin)+nexacro.TextArea._TAB_CHAR+_j.substring(_i.end);var _k=_i.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_j,_k);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e){var _f=this._input_element;if(this._undostack&&!_f.isComposing()){var _g=_f.getElementCaretPos();if(_g&&_g!= -1){this._undostack.update(_g.begin,_g.end);}}if((nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge"))){if(_f.isComposing()&&(_a==37||_a==39)){_f.stopSysEvent();return false;}}return true;},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){var _h=_g.getElementCaretPos();var _i=_g._composer.startOffset;var _j=_h.end;if(_j===undefined){_j=_g._composer.endOffset;}var _k=_g._getInputValue();var _l=this._fix_composition(_k,_i,_j);var _m=_j;var _n= -1;var _o=false;var _p=_g._checkMaxLength(_l,_m-(_k.length-_l.length),true);if(this.maxlength>0){if(_p){_o=_p.ismax;_n=_p.pos;if(_o){_l=_l.substring(0,_n)+_k.substring(_m);}}else{_n=_m-(_k.length-_l.length);}}else{_n=_m-(_k.length-_l.length);}_k=_l;_g._updateElementValue(_k);if(nexacro._Browser=="IE"||nexacro._Browser=="Runtime"){_g._updateInputValue(_k);}else{nexacro.__setDOMNode_Value(_g.handle,_k);}if(_n!= -1&&_i==_n&&nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_g.setCompositionCancel(_n);}else if(_n!= -1&&_i==_n){_g.setCompositionCancel(_n,true);}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_g.setCompositionComplete(_n);}else{_g.setCompositionComplete(_n,true);}_g.setElementSetSelect(_n,_n);_k=_g._getInputValue();if(_o){if(_g.autoskip){if(_g.value&&_k.length>=_g.maxlength){_g._go_next_focus();}}if(this._on_input_autoskip){this._on_input_autoskip();}}}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this.value===_c&&this.text===_a){return false;}return true;},on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=null;var _d=_a.value;if(_a.isComposing()){_c=[_a._composer.startOffset,_a._composer.endOffset];_d=_a._getInputValue();var _e=this._killfocus_fix_composition();_c[0]=_c[1]=_c[1]-(_d.length-_e.length);_d=_e;}else{var _f=_a.getElementCaretPos();if(_f&&_f!= -1){_c=_f;}}var _g=this._default_value;var _h=this._default_text;var _i=_a.value;_b=_i?_i:"";if(!_c){_c=_a.getElementCaretPos();}if(_g!=_i){if(!this._on_value_change(_h,_g,_b,_i)){var _j=_b?_b.length:0;var _k=_h?_h.length:0;if(_c!= -1){if(_j-_k>=0){_c.begin=_c.end=_c.begin-(_j-_k);}if(_c.begin<0){_c.begin=_c.end=0;}this._caret_pos=_c;}else{this._caret_pos.begin=this._caret_pos.end=_g?_g.length:0;}this.value=_g;this.text=_h;_d=_g;if(!this._onlydisplay){_a.setElementValue(_g);}else{_a.setElementText(_g);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);_a._need_reset_update_value=true;}else{_d=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_a.setElementBlur();}}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(/\r\n|\n\r/.test(_g)){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_g)){_g=_g.replace(/\r/g,"");}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g= -1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="IE"||nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!= -1&&_c==_g&&nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_a.setCompositionCancel(_g);}else if(_g!= -1&&_c==_g){_a.setCompositionCancel(_g,true);}else if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_a.setCompositionComplete(_g);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){if(/\r\n|\n\r/.test(_d)){_d=_d.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_d)){_d=_d.replace(/\r/g,"");}var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ja",{"InputElement":{_ignore_input_event_once:false,setCompositionComplete_process:function(_a,_b){var _c=this._getInputValue();var _d=_b||this._composer.isComposing();if(_d){var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_a);this._updateInputValue(_c,!this._processing_oninput,_a);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin)+_d.substring(_a),!this._processing_oninput,_e.begin);}return true;},on_sys_keydown_before_process:function(_a){var _b=_a.srcElement;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keydown_before_process.call(_c,_a);},on_sys_keyup_before_process:function(_a){var _b=_a.srcElement;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keyup_before_process.call(_c,_a);},on_sys_keyup_specialkey_process:function(_a){var _b=this;var _c=_b._composer.isComposing();if(_c){var _d=_a.ctrlKey;var _e=nexacro._getSysEventKey(_a);var _f=_b._getInputValue();var _g;if(_e==nexacro.Event.KEY_RETURN||(_d&&_e==77)||(_d&&_e==90)){_g=_b.getElementCaretPos();var _h=_b._composer.startOffset;_b._composer.setStatus(nexacro._CompositionState.END,_g.end);var _i=_b.parent_elem.linkedcontrol;var _j=_g.end;var _k=false;if(_b._composing_start!==undefined&&_b._composing_end!==undefined){_h=_b._composing_start;}var _l= -1;var _m=_i._fix_composition(_f,_h,_j);var _n=_j;if(_i.maxlength>0){var _o=_b._checkMaxLength(_m,_n-(_f.length-_m.length));if(_o){_k=_o.ismax;_l=_o.pos;if(_k){_m=_m.substring(0,_l)+_f.substring(_n);}}else{_l=_n-(_f.length-_m.length);}}else{_l=_n-(_f.length-_m.length);}_f=_m;_b._updateInputValue(_f,true,_l);_f=_b._getInputValue();if(_k){_b.setCompositionComplete();if(_b.autoskip&&_b._is_focused){if(_b.value&&_f.length>=_b.maxlength){_b._go_next_focus();}}if(_i._on_input_autoskip){_i._on_input_autoskip();}}_b._composing_start=_b._composing_end=undefined;_i=_b.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_f);}_b._setElementLastSelectionRange();}else if(_e>=nexacro.Event.KEY_F6&&_e<=nexacro.Event.KEY_F10){if((nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_g=_b.getElementCaretPos();_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}}}return true;},on_sys_propertychange_process:function(_a){var _b=_a.srcElement;if(_b){var _c=_b._linked_element;if(_c){var _d=_c.getElementSelectionRange();if(!_c._processing_oninput){if(_c._ignore_input_event_once){_c._ignore_input_event_once=false;return false;}else if(_d[0]==_d[1]&&_c.isComposing()){_c._ignore_input_event_once=true;}}}return nexacro.InputElement.prototype.on_sys_propertychange_process.call(_c,_a);}},on_sys_beforeinput_forward_process:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d=_a.data;var _e=_a.inputType;var _f=_b._getInputValue();var _g=_b.getElementCaretPos();var _h=_b.getCompositionStatus();var _i=_g.begin;var _j=_g.end;var _k=_c._getWindow();var _l;if(_c){_l=_k._getCaptureComp(false,true,_c);}if(_l&&_l!=_c){_b._beforeinput_result=[_b._BeforeinputState.CANCEL];_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};_b._b_beforeinput_forcedcancle=true;return false;}else{_b._b_beforeinput_forcedcancle=false;}if(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"){{if(_d==null&&_e=="insertLineBreak"){_d="\n";}else if(_e=="insertCompositionText"){_b._composing_start=_i;_b._composing_end=_j;}_b._beforeinput_result=_c._on_beforekeyinput(_b,_d,_h,_i,_j,_e);if(_b._beforeinput_result){_b._beforeinput_result.forEach(function(_m){switch(_m){case _b._BeforeinputState.PASS:break;case _b._BeforeinputState.CANCEL:_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};break;case _b._BeforeinputState.MAXLENGTH:break;case _b._BeforeinputState.REPLACE:case _b._BeforeinputState.CONVERT_UPPER:case _b._BeforeinputState.CONVERT_LOWER:_b._beforeinput_result_data=_f.substring(0,_i)+_b._beforeinput_result_insert_data+_f.substring(_j);break;default:break;}},_b);}}}return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d;var _e;var _f=false;if(_b._beforeinput_result&&(_b._b_beforeinput_forcedcancle||(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"))){var _g=false;_b._beforeinput_result.forEach(function(_j){switch(_j){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.end,_b._beforeinput_result_pos.end);_g=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_b._beforeinput_result_data!=null){_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.begin,_b._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_f=true;break;}},_b);if(_g){return;}}_d=_b._getInputValue();_e=_b.getElementCaretPos();if(_c._is_undo&&this.maxlength>0){var _h=_b._checkMaxLength(_d,_e.end);if(_h&&_h.ismax){_d=_d.substring(0,_h.pos);_b._updateInputValue(_d,false,"",_h.end);}_c._is_undo=false;}if(_b._composer.isComposing()){_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{_b._updateElementValue(_d);}if(_c._on_keyinput&&_a.inputType!="deleteCompositionText"){_c._on_keyinput(_b);}var _i=_b._composer.status;_b._setElementLastSelectionRange();if(_b.autoskip&&_b._is_focused){if(_f){if(_b.value&&_d.length>=_b.maxlength){_b._go_next_focus();}}if(_c._on_input_autoskip){_c._on_input_autoskip();}}_b._composer._prev_status=_i;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){var _b=(_a.target||_a.srcElement);var _c=this;var _d=_c.parent_elem.linkedcontrol;var _e=_c._composer.status;var _f=_c._getInputValue();var _g=_c.getElementCaretPos();if(_g&&_g!= -1){var _h,_i;_h=_c._paste_caret_pos?_c._paste_caret_pos.begin:_c._composer.startOffset;_i=_c._paste_caret_pos?_c._paste_caret_pos.end:_g.end;if(_h>_i){_h=_i;}var _j=_c._checkBackspaceKeyInKeyInput(_c.value,_f,_h,_i);var _k=_c._checkSelectionInKeyInput(_c.value,_f,_h,_i);if(_j){nexacro.__fireHTMLEvent(_b,"keydown","onkeydown");}if(_k!==false){_h=_k;}if(_d._on_beforekeyinput&&!_c._composer.isComposing()){_d._on_beforekeyinput(_c,_f,_e,_h,_i);if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}}}var _l=_c._getInputValue();_g=_c.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(_d instanceof nexacro.MaskEdit){_c._beforeinput_result_pos={begin:_g.begin,end:_g.end};}}var _m=false;if(_c.maxlength>0&&!_c._composer.isComposing()){var _n=_c._paste_caret_pos?_c._paste_caret_pos.end-(_f.length-_l.length):_g.end;var _o=_c._checkMaxLength(_l,_n);if(_o){_m=_o.ismax;var _p=_o.pos;if(_m){if(_n!=_p){_l=_l.substring(0,_p)+_l.substring(_n);_c._updateInputValue(_l,false,_p);_g=_c.getElementCaretPos();}_c.setCompositionComplete();}}}_f=_l;if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}else{_c._updateElementValue(_f);}var _q=_c._composer.status;if(_m){if(_d._on_input_autoskip&&_c._is_focused){_d._on_input_autoskip();}}_c._composer._prev_status=_q;if(_d._on_keyinput&&_a.inputType!="deleteCompositionText"){_d._on_keyinput(_c);}if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_m){if(nexacro._Browser=="Safari"){setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}else{_c._go_next_focus();}}}return true;},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_sys_compositionupdate_process:function(_a){var _b=false;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"||nexacro._OS=="iOS"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9)||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_b=true;}var _c=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_c.end,_b);return true;},on_sys_compositionend_process:function(_a){var _b=(_a.target||_a.srcElement);var _c=_b._linked_element;var _d=_c.getCompositionStatus();if(_d!=nexacro._CompositionState.COMPOSING){return;}if(_c._is_focused){var _e=_c._getInputValue();var _f=_c.getElementCaretPos();var _g=_c._composer.startOffset;_c._composer.setStatus(nexacro._CompositionState.END,_f.end);var _h=_c.parent_elem.linkedcontrol;var _i=_a.data;var _j=_f.end;var _k=false;var _l;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_g=_c._composing_start;}if(_j==undefined){_j=_g+_i.length;}var _m=_j;var _n= -1;var _o;if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){if(_m!=_n){_o=_o.substring(0,_n)+_e.substring(_m);}}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}var _p=false;if(_e!==_o){_p=true;}_e=_o;_c._updateElementValue(_e);if((_p||_c.value!==_e)&&_h._on_keyinput){_h._on_keyinput(_c,_e);}if(!_k||!_c.autoskip){setTimeout(function(){_c._updateInputValue(_e,true,_n);},0);}}else{_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_m=_c._paste_caret_pos?_c._paste_caret_pos.end:_j;_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){_o=_o.substring(0,_n)+_e.substring(_m);}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}_e=_o;var _q=_c.value;if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){_c._updateElementValue(_e);}if(!_c._evtfire_oninput_after_compositionend||_c._evtorder_compositionend_is_last||_c._use_event_beforeinput){_c._updateInputValue(_e,true,_n);}else{_c._updateInputValue(_e,false,_n);}if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==10&&_q!=_e&&_h._on_keyinput){_h._on_keyinput(_c);}if(_k){_c.setCompositionComplete();}}_c._composing_start=_c._composing_end=undefined;_h=_c.parent.linkedcontrol;if(_h){_h._on_input_compositionend(_e);}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_k){if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"||(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11)){_c._go_next_focus();}else{setTimeout(function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==9){_c._updateInputValue(_e,true,_n);}if(_c._is_focused){_c._go_next_focus();}},0);}}if(_h._on_input_autoskip){_h._on_input_autoskip();}}}return true;},on_sys_touchend_process:function(_a){return false;},on_sys_paste_before_process:function(_a){if(nexacro._OS=="iOS"&&this.isComposing()){nexacro._stopSysEvent(_a);return false;}return true;},on_complete_composition_value_process:function(){if((nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")||nexacro._Browser==="Gecko"||nexacro._Browser==="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){if(this.handle){this.handle.blur();this.handle.focus();if((nexacro._Browser==="IE"&&nexacro._BrowserVersion<=8)||(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")){var _a=this.parent_elem.linkedcontrol;var _b=this._composer.startOffset;var _c=this._composer.endOffset;if(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari"){var _d=this.getElementCaretPos();_c=_d.end;}var _e= -1;var _f=this._getInputValue();var _g=_a._fix_composition(_f,_b,_c);var _h=_c;if(_a.maxlength>0){var _i=this._checkMaxLength(_g,_c-(_f.length-_g.length));if(_i){_e=_i.pos;if(_i.ismax){_g=_g.substring(0,_e)+_f.substring(_h);}}else{_e=_c-(_f.length-_g.length);}}else{_e=_c-(_f.length-_g.length);}this._updateInputValue(_g,false,_e);this.setCompositionComplete(_e,true);}}}return true;},on_updateEvtOrder_process:function(){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion==11){this._evtorder_compositionend_is_last=true;}else{this._evtorder_compositionend_is_last=false;}},on_apply_ime_environment_process:function(_a){var _b=_a?(_a.target||_a.srcElement):this.handle;var _c=_b?_b._linked_element:this;_c._use_html_maxlength=false;nexacro.__setDOMNode_MaxLength(_b,0);_c.on_updateEvtOrder_process();return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ja",{"InputElement":{setCompositionComplete_process:function(_a,_b){var _c=this.getElementCaretPos();var _d=this._getInputValue();var _e=_b||this._composer.isComposing();if(_e){this._composer.setStatus(nexacro._CompositionState.END,_c.end);this._updateInputValue(_d,!this._processing_oninput);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin),!this._processing_oninput);}return true;},on_sys_keyup_specialkey_process:function(_a,_b,_c){var _d=this.getElementCaretPos();var _e=this._composer.isComposing();if(_e){if(_a==nexacro.Event.KEY_RETURN||(_c&&_a==77)||(_c&&_a==90)){this._composer.setStatus(nexacro._CompositionState.END,_d.end);var _f=this._getInputValue();this._updateInputValue(_f,true);}}return true;},on_sys_keyinput_process:function(){var _a=this._composer.status;var _b,_c;var _d=this._getInputValue();var _e=this.getElementCaretPos();var _f=this._paste_caret_pos;_b=this._paste_caret_pos?this._paste_caret_pos.begin:this._composer.startOffset;_c=this._paste_caret_pos?this._paste_caret_pos.end:_e.end;if(_b>_c){_b=_c;}var _g=this.parent_elem.linkedcontrol;if(_g._on_beforekeyinput&&!this._composer.isComposing()){_g._on_beforekeyinput(this,_d,_a,_b,_c);if(this._event_stop){this._event_stop=false;return false;}}var _h=this._getInputValue();_e=this.getElementCaretPos();var _i=false;if(this.maxlength>0&&!this._composer.isComposing()){var _j=_f?_f.end:_e.end;var _k=this._checkMaxLength(_d,_j);if(_k){_i=_k.ismax;var _l=_k.pos;if(_i&&_j!=_l){_h=_d.substring(0,_l)+_d.substring(_j);this._updateInputValue(_h);this.setElementSetSelect(_l,_l);_e=this.getElementCaretPos();}this.setCompositionComplete();}}_d=_h;if(this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{this._updateElementValue(_d);}var _m=this._composer.status;if(_i){if(_g._on_input_autoskip&&this._is_focused){_g._on_input_autoskip();}}this._composer._prev_status=_m;if(_g._on_keyinput){_g._on_keyinput(this);}if(this._event_stop){this._event_stop=false;return false;}this._setElementLastSelectionRange();if(this.autoskip&&this._is_focused&&_i){this._go_next_focus();}return true;},on_sys_compositionend_process:function(){if(this._is_focused){var _a=this._getInputValue();var _b=this.getElementCaretPos();var _c=this._composer.startOffset;this._composer.setStatus(nexacro._CompositionState.END,_b.end);var _d=this.parent_elem.linkedcontrol;var _e=_b.end;var _f=false;if(this._composing_start!==undefined&&this._composing_end!==undefined){_c=this._composing_start;}if(_e==undefined){_e=_c;}var _g= -1;var _h=_d._fix_composition(_a,_c,_e);var _i=_e;if(_d.maxlength>0){var _j=this._checkMaxLength(_h,_i-(_a.length-_h.length));if(_j){_f=_j.ismax;_g=_j.pos;if(_f){_h=_h.substring(0,_g)+_a.substring(_i);}}else{_g=_i-(_a.length-_h.length);}}else{_g=_i-(_a.length-_h.length);}_a=_h;this._updateInputValue(_a,false,_g);if(_g!= -1&&_i!=_g){this.setElementSetSelect(_g,_g);_a=this._getInputValue();_b=this.getElementCaretPos();}if(_f){this.setCompositionComplete();}this._composer.setStatus(nexacro._CompositionState.END,_b.end);_d=this.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_a);}}return;},on_complete_composition_value_process:function(){this.setCompositionComplete();return true;}}});}}{var regexp_nipon="[\u0000-\u007F]|[\u0370-\u03FF]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\u31F0-\u31FF]|[\uFF01-\uFFEF]|[\u3000-\u3002]|[\u300C]|[\u300D]|[\u309B]|[\u309C]|[\u2010-\u201F]";nexacro._addImeLocaleInfo("ja",regexp_nipon);}if(!nexacro.ImageViewer){nexacro.ImageViewer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pImageViewer=nexacro._createPrototype(nexacro.Component,nexacro.ImageViewer);nexacro.ImageViewer.prototype=_pImageViewer;_pImageViewer._type_name="ImageViewer";_pImageViewer._image=null;_pImageViewer._imagetext=null;_pImageViewer.text="";_pImageViewer.image=undefined;_pImageViewer.imagealign="center middle";_pImageViewer.imagewidth=0;_pImageViewer.imageheight=0;_pImageViewer.stretch="none";_pImageViewer.accessibilityrole="image";_pImageViewer._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"oninput":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onload":1,"onmove":1,"onsize":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pImageViewer.on_create_contents=function(){var _a=this.getElement();if(_a){if(this.image){this._createImageControl();}if(this._displaytext){this._createImageTextControl();}}};_pImageViewer.on_created_contents=function(_a){this.on_apply_stretch();if(this._image){this._image.on_created(_a);}if(this._imagetext){this._imagetext.on_created(_a);}};_pImageViewer.on_create_contents_command=function(){this.on_apply_stretch();var _a="";if(this._image){_a+=this._image.createCommand();}if(this._imagetext){_a+=this._imagetext.createCommand();}return _a;};_pImageViewer.on_attach_contents_handle=function(_a){if(this._image){this._image.attachHandle(_a);}if(this._imagetext){this._imagetext.attachHandle(_a);}};_pImageViewer.on_destroy_contents=function(){if(this._image){var _a=this._image.width;var _b=this._image.height;var _c=nexacro._toString(this._image.image);if(_c){if(this._image._getImageType()=="url"){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());}}var _d=this._image._getstretchedmode(this.fittocontents);nexacro._releaseImageViewUrl(_c,_a,_b,_d);this._image.destroy();this._image=null;}if(this._imagetext){this._imagetext.destroy();this._imagetext=null;}};_pImageViewer.on_change_containerRect=function(_a,_b){if(this._image){this._image.resize(_a,_b);nexacro._resizeImageViewManager(this);}if(this._imagetext){this._imagetext.resize(_a,_b);}};_pImageViewer._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=[0,0];var _c=[0,0];var _d=0;var _e=0;var _f=this._getCurrentStyleBorder();if(_f){_d+=_f._getBorderWidth();_e+=_f._getBorderHeight();}var _g=this._getCurrentStylePadding();if(_g){_d+=_g.left+_g.right;_e+=_g.top+_g.bottom;}var _h;if(this._displaytext&&this._displaytext!==""){_h=this._displaytext;}else{_h=this.text;}if(_h&&this._imagetext){_b=this._imagetext._on_getFitSize();}var _i=this._image;if(_i){_c=_i.getOriginalImageSize();}_d+=Math.ceil(Math.max(_b[0],_c[0]));_e+=Math.ceil(Math.max(_b[1],_c[1]));return [_d,_e];}return [this._adjust_width,this._adjust_height];};_pImageViewer.set_imagewidth=nexacro._emptyFn;_pImageViewer.set_imageheight=nexacro._emptyFn;_pImageViewer.on_apply_text=function(){var _a=this._displaytext;var _b=this._imagetext;var _c=this.getElement();if(_c&&_a){this._createImageTextControl(false);}if(_b){_b.set_text(_a);if(!_a){_b.set_visible(false);}else{_b.set_visible(true);}}};_pImageViewer.set_image=function(_a){_a=this._convertImageValue(_a);if(this.image!=_a){this.image=_a;this.on_apply_image();}};_pImageViewer.on_apply_image=function(){var _a=this.getElement();if(_a&&this.image){if(!this._image){this._createImageControl(false);}}if(this._image){this._image.set_image(this.image);}};_pImageViewer.set_stretch=function(_a){var _b=["none","fit","fixaspectratio"];if(_b.indexOf(_a)== -1){return;}if(this.stretch!=_a){this.stretch=_a;this.on_apply_stretch();}};_pImageViewer.on_apply_stretch=function(){var _a=this._image;if(_a){var _b=this._image.width;var _c=this._image.height;var _d=nexacro._toString(this._image.image);if(_d){if(this._image._getImageType()=="url"){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());}}var _e=_a._getstretchedmode(this.fittocontents);nexacro._releaseImageViewUrl(_d,_b,_c,_e);_a.set_stretch(this.stretch);}};_pImageViewer.set_imagealign=function(_a){if(this.imagealign!=_a){this.imagealign=_a;this.on_apply_imagealign();}};_pImageViewer.on_apply_imagealign=function(){var _a=this._image;if(_a){_a.set_imagealign(this.imagealign);}};_pImageViewer.on_apply_textAlign=function(_a){if(this._imagetext){this._imagetext.set_textAlign(_a);}};_pImageViewer.on_apply_verticalAlign=function(_a){if(this._imagetext){this._imagetext.set_verticalAlign(_a);}};_pImageViewer.getImageCount=function(){var _a=this._image;if(_a){return _a.getImageCount();}return 0;};_pImageViewer.setImageIndex=function(_a){var _b=this._image;if(_b){_b.setImageIndex(parseInt(_a)|0);}};_pImageViewer._on_element_swap=function(){var _a=this.getElement();if(_a){var _b=this._imagetext?this._imagetext.getElement():null;var _c=this._image?this._image.getElement():null;if(_b&&_c){_a.sendToBackElement(_c);}}};_pImageViewer._on_image_onclick=function(_a,_b){return this.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,this,_a,_b.metakey);};_pImageViewer.on_fire_onload=function(_a,_b){if(this.onload&&this.onload._has_handlers){var _c=new nexacro.LoadEventInfo(_a,"onload",_b);var _d=this.onload._fireEvent(this,_c);return _d;}return true;};_pImageViewer.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();this._cur_ldown_elem=_i._cur_ldown_elem||_i._keydown_element;return _h;};_pImageViewer.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();var _j=_i._cur_ldown_elem||_i._keydown_element;if(!this._is_subcontrol){if(_j==this._cur_ldown_elem){if(_a==13||_a==32){this.on_fire_onclick("none",_b,_c,_d, -1, -1, -1, -1, -1, -1,this,this,_g);}}}this._cur_ldown_elem=null;return _h;};_pImageViewer._createImageControl=function(_a){var _b=this._image;if(!_b){_b=this._image=new nexacro._ImageAreaControl("imagearea",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);_b.set_image(this.image);_b.set_imagealign(this.imagealign);_b.set_stretch(this.stretch);_b._setNotifyFn(this,this._setImageSize);_b.createComponent(_a);_b._setEventHandler("onclick",this._on_image_onclick,this);}return _b;};_pImageViewer._createImageTextControl=function(_a){var _b=this._imagetext;if(!_b){_b=this._imagetext=new nexacro.Static("imagetext",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);_b._setControl();_b.set_accessibilityrole("image");_b.set_text(this._displaytext);_b.createComponent(_a);_b._setEventHandler("onclick",this._on_image_onclick,this);}return _b;};_pImageViewer._convertImageValue=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;}}}return _a;};_pImageViewer._setImageSize=function(_a,_b){if(this.imagewidth!=_a||this.imageheight!=_b){if(this.fittocontents!="none"){this._update_position();}}this.imagewidth=_a;this.imageheight=_b;};delete _pImageViewer;nexacro._ImageAreaControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pImageAreaControl=nexacro._createPrototype(nexacro.Component,nexacro._ImageAreaControl);nexacro._ImageAreaControl.prototype=_pImageAreaControl;_pImageAreaControl._type_name="ImageAreaControl";_pImageAreaControl._is_subcontrol=true;_pImageAreaControl.image="";_pImageAreaControl.imagealign="center middle";_pImageAreaControl.imagewidth=0;_pImageAreaControl.imageheight=0;_pImageAreaControl.stretch="none";_pImageAreaControl._img_elem=null;_pImageAreaControl._imagealign=null;_pImageAreaControl._notifyTarget=null;_pImageAreaControl._notifyFn=null;_pImageAreaControl._orgwidth=0;_pImageAreaControl._orgheight=0;_pImageAreaControl._is_simple_control=true;_pImageAreaControl._is_focus_accept=false;_pImageAreaControl.on_create_contents=function(){var _a=this.getElement();if(_a){this._img_elem=new nexacro.ImageElement(_a,"image");}};_pImageAreaControl.on_created_contents=function(_a){if(this._img_elem){this._img_elem.create(_a);}this.on_apply_image();};_pImageAreaControl.on_create_contents_command=function(){var _a="";var _b=this._img_elem;if(_b){_a=_b.createCommand();}return _a;};_pImageAreaControl.on_attach_contents_handle=function(_a){var _b=this._img_elem;if(_b){_b.attachHandle(_a);this.on_apply_image();}};_pImageAreaControl.on_destroy_contents=function(){if(this._img_elem){this._img_elem.destroy();this._img_elem=null;}this._imagealign=null;this._notifyTarget=null;this._notifyFn=null;};_pImageAreaControl.on_change_containerRect=function(){if(this._img_elem){this._updateElementPositions();}};_pImageAreaControl.set_image=function(_a){_a=this._convertImageValue(_a);if(this.image!=_a){this.chk_on_fire_onload=true;this.image=_a;this.on_apply_image();}};_pImageAreaControl.on_apply_image=function(){this._load_image();};_pImageAreaControl.set_imagealign=function(_a){if(this.imagealign!=_a){this.imagealign=_a;this.on_apply_imagealign();}};_pImageAreaControl.on_apply_imagealign=function(){this._imagealign=nexacro.AlignObject(this.imagealign);if(this._img_elem){this._updateElementPositions();}};_pImageAreaControl.set_stretch=function(_a){if(this.stretch!=_a){this.stretch=_a;this.on_apply_stretch();}};_pImageAreaControl.on_apply_stretch=function(){this._load_image();this._updateElementPositions();};_pImageAreaControl._convertImageValue=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;}}}return _a;};_pImageAreaControl._on_load_image=function(_a,_b,_c){this._orgwidth=_b;this._orgheight=_c;this._setImageSize(_b,_c);if(this.parent instanceof nexacro.ImageViewer){var _d=_a.indexOf("?size=");if(_d>0){var _e=_a.substring(_d+6);var _f=_e.split(":")[0].split("x")[0];var _g=_e.split(":")[0].split("x")[1];var _h=_e.split(":")[1];var _i=this._getstretchedmode(this.parent.fittocontents);if(_f!=this.width||_g!=this.height||_h!=_i){nexacro._releaseImageViewUrl(nexacro._removeImageViewUrl(_a),_f,_g,_h);}}}this._load_image_completed(_a,_b,_c);};_pImageAreaControl._load_image=function(){var _a=this.getElement();if(_a){var _b=nexacro._toString(this.image);var _c=this._img_elem;if(_b){if(this._getImageType()=="url"){_b=nexacro._getURIValue(_b);_b=nexacro._getImageLocation(_b,this._getRefFormBaseUrl());}var _d=0;if(this.parent instanceof nexacro.ImageViewer){var _e=this._getstretchedmode(this.parent.fittocontents);_d=nexacro._getImageViewSize(_b,this._on_load_image,this,undefined,this.image,true,this.width,this.height,_e);}else{_d=nexacro._getImageSize(_b,this._on_load_image,this,undefined,this.image);}if(_d){this._orgwidth=_d.width;this._orgheight=_d.height;this._load_image_completed(_b,_d.width,_d.height);}}else{if(_c){_c.setElementVisible(false);_c.setElementImage("");this._updateElementPositions();this._setImageSize(0,0);}}}};_pImageAreaControl._load_image_completed=function(_a,_b,_c){var _d=this._img_elem;if(_d){var _e=true;var _f=this.image;if(!_f||(_b==0&&_c==0)){_d.setElementVisible(false);_d.setElementImage("");this._updateElementPositions();this._setImageSize(0,0);}else{var _g=this.stretch;if(this.parent instanceof nexacro.ImageViewer){_g=this._getstretchedmode(this.parent.fittocontents);}_f=_f.toString();if(this._getImageType()=="url"){if(_f.substring(0,4).toLowerCase()=="url("){_f=_f.substring(5,_f.length-2);}_f=nexacro._getImageLocation(_f,this._getRefFormBaseUrl());_a=nexacro._removeImageViewUrl(_a);if(_f!=_a){_e=false;nexacro._releaseImageViewUrl(_a,this.width,this.height,_g);}}if(_e){_a=nexacro.UrlObject(_a);_d.setElementVisible(true);_d.setElementImage(_a,_b,_c,_g,this);this._updateElementPositions();}}}var _h=this.parent;if(_h instanceof nexacro.ImageViewer){_h._on_element_swap();if(this.chk_on_fire_onload==true){this.chk_on_fire_onload=false;_h.on_fire_onload(_h,_a);}}};_pImageAreaControl._updateElementPositions=function(){var _a=this._img_elem;if(_a){this._recalcImageSize();var _b=this._imagealign?this._imagealign.halign:"center";var _c=this._imagealign?this._imagealign.valign:"middle";var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this.imagewidth;var _g=this.imageheight;var _h,_i;switch(_b){case "left":_h=0;break;case "right":_h=_d-_f;break;default:_h=Math.floor((_d-_f)/2);break;}switch(_c){case "top":_i=0;break;case "bottom":_i=_e-_g;break;default:_i=Math.floor((_e-_g)/2);break;}_a.setElementPosition(_h,_i);_a.setElementSize(_f,_g);}};_pImageAreaControl._recalcImageSize=function(){var _a=this.stretch;if(!_a){return;}var _b=0,_c=0;var _d=0,_e=0;var _f=this._getClientWidth();var _g=this._getClientHeight();if(_a=="fit"){_b=_f;_c=_g;}else if(_a=="fixaspectratio"){_d=this._orgwidth;_e=this._orgheight;if(_d||_e){var _h=_d?(_f/_d):_d;var _i=_e?(_g/_e):_e;if(_h<=_i){_b=_f;_c=Math.floor(_e* _h);}else{_b=Math.floor(_d* _i);_c=_g;}}else{_b=_d;_c=_e;}}else{_b=this._orgwidth;_c=this._orgheight;}this._setImageSize(_b,_c);};_pImageAreaControl._setNotifyFn=function(_a,_b){this._notifyTarget=_a;this._notifyFn=_b;};_pImageAreaControl._setImageSize=function(_a,_b){this.imagewidth=_a;this.imageheight=_b;if(this._notifyTarget&&this._notifyFn){this._notifyFn.call(this._notifyTarget,_a,_b);}};_pImageAreaControl._getImageType=function(){var _a="url";var _b=this.image;if(_b){var _c=nexacro._transImageBase64StringFormat(_b,false,true);if(_c&&_c.encode===";base64,"){_a="base64";}}return _a;};_pImageAreaControl.getImageCount=function(){var _a=this._img_elem;if(_a){return _a.getImageCount();}return 0;};_pImageAreaControl.getOriginalImageSize=function(){return [this._orgwidth,this._orgheight];};_pImageAreaControl.setImageIndex=function(_a){var _b=this._img_elem;if(_b){_b.setImageIndex(parseInt(_a)|0);}};_pImageAreaControl._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pImageAreaControl._getstretchedmode=function(_a,_b){var _c=_b;if(_b==undefined){_c=this.stretch;}if(nexacro&&nexacro._Browser=="Runtime"){if(_c=="fixaspectratio"&&_a&&_a!="none"){_c="none";}}return _c;};delete _pImageAreaControl;}if(!nexacro.CheckBox){nexacro.CheckBoxChangedEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onchanged";this.prevalue=_c;this.postvalue=_d;this.fromobject=this.fromreferenceobject=_a;};var _pCheckBoxChangedEventInfo=nexacro._createPrototype(nexacro.ChangedEventInfo,nexacro.CheckBoxChangedEventInfo);nexacro.CheckBoxChangedEventInfo.prototype=_pCheckBoxChangedEventInfo;_pCheckBoxChangedEventInfo._type_name="CheckBoxChangedEventInfo";delete _pCheckBoxChangedEventInfo;nexacro.CheckBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCheckBox=nexacro._createPrototype(nexacro._IconText,nexacro.CheckBox);nexacro.CheckBox.prototype=_pCheckBox;_pCheckBox._type_name="CheckBox";_pCheckBox.value=false;_pCheckBox.readonly=false;_pCheckBox.falsevalue=null;_pCheckBox.truevalue=null;_pCheckBox.tabstop=true;_pCheckBox._is_focus_accept=true;_pCheckBox._use_selected_status=true;_pCheckBox._use_readonly_status=true;_pCheckBox.accessibilityrole="checkbox";_pCheckBox._event_list={"canchange":1,"onchanged":1,"onclick":1,"ondrag":1,"ondragenter":1,"ondragmove":1,"ondragleave":1,"ondrop":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pCheckBox.on_created_contents=function(_a){nexacro._IconText.prototype.on_created_contents.call(this,_a);this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox.on_attach_contents_handle=function(_a){nexacro._IconText.prototype.on_attach_contents_handle.call(this,_a);this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox.on_destroy_contents=function(){nexacro._IconText.prototype.on_destroy_contents.call(this);this.falsevalue=null;this.truevalue=null;};_pCheckBox.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(this._changeValue(undefined));this.on_apply_value();}};_pCheckBox.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){this._setValue(this._changeValue(_b.getColumn(_c,_d)));this.on_apply_value();}};_pCheckBox.on_getBindableProperties=function(){return "value";};_pCheckBox.on_get_accessibility_label=function(){return this.text?this.text:"";};_pCheckBox._on_hotkey=function(_a,_b,_c,_d){this.on_fire_onclick("",_b,_c,_d, -1, -1, -1, -1, -1, -1,this,this,false);};_pCheckBox._isFocusAcceptable=function(){return this._is_focus_accept;};_pCheckBox.set_value=function(_a){_a=this._changeValue(_a);if(this.value!=_a){if(this.applyto_bindSource("value",_a)){this._setValue(_a);this.on_apply_value();}}};_pCheckBox.on_apply_value=function(){if(this.isChecked()){this._changeUserStatus("selected",true);}else{this._changeUserStatus("selected",false);}};_pCheckBox.set_truevalue=function(_a){if(_a!=undefined){_a=_a.toString();}if(this.truevalue!==_a){if(this.isChecked()){if(this.applyto_bindSource("value",_a)){this._setValue(_a);}}this.truevalue=_a;}};_pCheckBox.set_falsevalue=function(_a){if(_a!=undefined){_a=_a.toString();}if(this.falsevalue!==_a){if(!this.isChecked()){if(this.applyto_bindSource("value",_a)){this._setValue(_a);}}this.falsevalue=_a;}};_pCheckBox.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly(_a);}};_pCheckBox.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);};_pCheckBox.isChecked=function(){return this._isChecked(this.value);};_pCheckBox.on_keyup_basic_action=function(_a,_b,_c,_d,_e,_f){if(_a==nexacro.Event.KEY_SPACE){this.on_fire_onclick("",_b,_c,_d, -1, -1, -1, -1, -1, -1,_e,_e,_f);}};_pCheckBox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this.enable||this.readonly){return false;}var _n=this.value;var _o;if(this._isChecked(_n)){if(nexacro._isNull(this.falsevalue)){_o=false;}else{_o=this.falsevalue;}}else{if(nexacro._isNull(this.truevalue)){_o=true;}else{_o=this.truevalue;}}var _p=this.on_fire_canchange(this,_n,_o);if(_p){if(this.applyto_bindSource("value",_o)){this._setValue(_o);}if(_n!==_o){this.on_fire_onchanged(this,_n,_o);}if(this._is_alive){this.on_apply_value();}}if(this._is_alive){return nexacro.Component.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}};_pCheckBox.on_fire_canchange=function(_a,_b,_c){if(this.canchange&&this.canchange._has_handlers){var _d=new nexacro.CheckBoxChangedEventInfo(this,"canchange",_b,_c);return this.canchange._fireCheckEvent(this,_d);}return true;};_pCheckBox.on_fire_onchanged=function(_a,_b,_c){if(this.onchanged&&this.onchanged._has_handlers){var _d=new nexacro.CheckBoxChangedEventInfo(this,"onchanged",_b,_c);return this.onchanged._fireEvent(this,_d);}};_pCheckBox._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this.visible&&this._isEnable()){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};_pCheckBox._setValue=function(_a){this.value=_a;this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox._isChecked=function(_a){if(this.truevalue!=null){if(this.falsevalue!=null){if(_a===this.falsevalue||_a===undefined){return false;}if(_a===this.truevalue||nexacro._toBoolean(_a)){return true;}if(this.value===this.truevalue){return true;}return false;}else{if(_a===this.truevalue||nexacro._toBoolean(_a)){return true;}return false;}}else{if(this.falsevalue!=null){if(_a===this.falsevalue){return false;}return true;}else{return nexacro._toBoolean(_a);}}};_pCheckBox._changeValue=function(_a){var _b=!nexacro._isNull(this.truevalue);var _c=!nexacro._isNull(this.falsevalue);if(nexacro._isNull(_a)){if(_c){return this.falsevalue;}else{return false;}}_a=_a.toString();if(_b){if(_a===this.truevalue){return _a;}if(_c){if(_a===this.falsevalue){return _a;}else{return this.value;}}else{if(parseInt(_a)===0){return 0;}else if(!nexacro._toBoolean(_a)){return false;}else{return this.value;}}}else{if(_c){if(_a===this.falsevalue){return _a;}else if(parseInt(_a)===1){return 1;}else if(nexacro._toBoolean(_a)){return true;}else{return this.value;}}else{if(parseInt(_a)===0){return 0;}else if(parseInt(_a)===1){return 1;}else{return nexacro._toBoolean(_a);}}}};_pCheckBox._applyStatus=function(){var _a=this.value;var _b;if(this._isChecked(_a)){if(nexacro._isNull(this.falsevalue)){_b=false;}else{_b=this.falsevalue;}}else{if(nexacro._isNull(this.truevalue)){_b=true;}else{_b=this.truevalue;}}var _c=this.on_fire_canchange(this,_a,_b);if(_c){if(this.applyto_bindSource("value",_b)){this._setValue(_b);}if(_a!==_b){this.on_fire_onchanged(this,_a,_b);}if(this._is_alive){this.on_apply_value();}}};delete _pCheckBox;}if(!nexacro.Radio){nexacro.RadioClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.ClickEventInfo.call(this,_a,_b||"onradioclick",_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);this.index=_c;this.itemtext=_d;this.itemvalue=_e;};var _pRadioClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.RadioClickEventInfo);nexacro.RadioClickEventInfo.prototype=_pRadioClickEventInfo;_pRadioClickEventInfo._type_name="RadioClickEventInfo";delete _pRadioClickEventInfo;nexacro.Radio=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._items=[];this._iconsize={};};var _pRadio=nexacro._createPrototype(nexacro.Component,nexacro.Radio);nexacro.Radio.prototype=_pRadio;_pRadio._type_name="Radio";_pRadio._text_elem=null;_pRadio.codecolumn="";_pRadio.columncount=0;_pRadio.datacolumn="";_pRadio.direction="horizontal";_pRadio.index= -1;_pRadio.innerdataset=null;_pRadio.readonly=false;_pRadio.rowcount=0;_pRadio.value=undefined;_pRadio.text="";_pRadio.acceptvaluetype="allowinvalid";_pRadio._default_value=undefined;_pRadio._default_text="";_pRadio._default_index= -1;_pRadio._want_tab=false;_pRadio._want_arrow=true;_pRadio._is_listtype=true;_pRadio._use_readonly_status=true;_pRadio.accessibilityrole="radio";_pRadio._is_first_focus=false;_pRadio._accessibility_index= -1;_pRadio.accessibility=null;_pRadio.itemaccessibility=null;_pRadio.itemaccessibilityenable=true;_pRadio._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondragend":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onitemclick":1,"onitemchanged":1,"canitemchange":1,"oninnerdatachanged":1,"onmousedown":1,"onmouseup":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pRadio.on_create_contents=function(){var _a=this.getElement();if(_a){if(!this.innerdataset){this._createRadioTextElement();}else{this._redrawRadioItem();}}};_pRadio.on_created_contents=function(_a){if(!this._innerdataset&&this.innerdataset){this._setInnerDatasetStr(this.innerdataset);}if(this.fittocontents!="none"){this._update_position();}var _b=this._text_elem;if(_b){_b.create(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_created(_a);}if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();this.on_apply_prop_itemaccessibilityenable();}};_pRadio.on_destroy_contents=function(){this._destroyRadioTextElement();this._destroyRadioItemControl();this._removeEventHandlerToInnerDataset();};_pRadio._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pRadio.on_create_contents_command=function(){if(!this._innerdataset&&this.innerdataset){this._setInnerDatasetStr(this.innerdataset);}var _a="";var _b=this._text_elem;if(_b){_a+=_b.createCommand();}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_a+=_c[_e].createCommand();}return _a;};_pRadio.on_attach_contents_handle=function(_a){var _b=this._text_elem;if(_b){_b.attachHandle(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].attachHandle(_a);}if(this.fittocontents!="none"){this._update_position();}if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();this.on_apply_prop_itemaccessibilityenable();}};_pRadio.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._text_elem;if(_c){_c.setElementSize(_a,_b);}else{this._recalcLayout();}}};_pRadio.on_change_containerPos=function(){};_pRadio.on_getBindableProperties=function(){return "value";};_pRadio.on_apply_prop_cssclass=function(){var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_cssclass();}}};_pRadio.on_apply_prop_enable=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}}};_pRadio.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this.value=undefined;this.text="";this.index= -1;this._doDeselect(this.index);}};_pRadio.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);this._setValue(_e);var _f=this._innerdataset;if(!_f){return true;}var _g=_f.findRow(this.codecolumn,_e);this._block_read_aria_stat=true;this._doDeselect(this.index);this._setIndex(_g);this._doSelect(_g);if(!this._select_act){this._default_value=_e;this._default_index=_g;}this._block_read_aria_stat=false;}};_pRadio._getDlgCode=function(_a,_b,_c,_d){var _e,_f;if(_a&&(_a==nexacro.Event.KEY_TAB)){_e=this._getPreCalculateWantTab(_a,_d);}else{_f=this._want_arrow;}if(this._is_first_focus){this._is_first_focus=false;}return {want_tab:_e,want_return:false,want_escape:false,want_chars:false,want_arrows:_f};};_pRadio._setFocus=function(_a,_b){this._focus_direction=_b;var _c=this.setFocus(_a);this._focus_direction= -1;return _c;};_pRadio._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a==false){this._focus_direction= -1;if(this._isEnable()){this._want_arrow=true;}else{this._want_arrow=false;}}if(_h>=0){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){var _i,_j=this._items;if(_h<2){if(_h==0){this._accessibility_index= -1;}else{this._accessibility_index=_j.length-1;}if(_j.length>0){this._is_first_focus=true;if(this.index> -1){_i=_j[this.index];if(_i){this._accessibility_index=this.index;_i._on_focus(true);_i._changeUserStatus("selected",true);}}}}else{if(nexacro._enableaccessibility){if(!this.readonly){if(_h==2){_j=this._items;this._is_first_focus=true;if(!this._isAccessibilityEnable()){this._accessibility_index=0;_i=_j[this._accessibility_index];if(_i){_i._on_focus(true);}}else{this._accessibility_index= -1;}}else if(_h==3){_j=this._items;this._is_first_focus=true;this._accessibility_index=_j.length-1;_i=_j[this._accessibility_index];if(_i){_i._on_focus(true);}}}}}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);}return _g;};_pRadio._on_getAccessibilityAdditionalLabel=function(){if(this._isAccessibilityEnable()&&!this._is_first_focus){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this.index+1)+" "+_a;}return "";};_pRadio._on_getAccessibilityAdditionalRole=function(){var _a="";if(!this._is_first_focus&&this._getAccessibilityRole(this.accessibility=="radio")){_a=" radio";}return _a;};_pRadio.on_get_accessibility_label=function(){var _a="";if(!this._is_first_focus){_a=this.text?this.text:this.value;}return _a;};_pRadio._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._innerdataset;var _g=this._items;var _h=_g.length;if(_f&&_h){var _i=this.direction;var _j;var _k=this.columncount;var _l=this.rowcount;var _m=_f.getRowCount();var _n=0;var _o=0;var _p,_q;var _r;var _s=0;if(_k== -1&&_l== -1){for(_p=0;_p<_h;_p++ ){_r=_g[_p]._on_getFitSize();if(_i=="horizontal"){_c=Math.max(_c,_r[1]);_b+=_r[0];}else{_c+=_r[1];_b=Math.max(_b,_r[0]);}}}else{if(_i=="horizontal"){_j="col";if(_k>0){_n=_k;}else if((_k== -1&&(_l== -1||_l==0))||(_k==0&&(_l==0||_l==_m))){_n=1;}else if(_k== -1&&_l>1){_n=Math.round(_m/_l);}else if(_l>0){_n=Math.ceil(_m/_l);if((_n* _l)<_m){_n++ ;}}else{_n=_m;}if(_n>_m){_n=_m;}_o=parseInt(_m/_n)|0;if((_m>_n)&&(_m%_n)>0){_o++ ;}}else{if(_l>0){_o=_l;}else if(_k>0){_o=parseInt(_m/_k);if((_k* _o)<_m){_o++ ;}}else{_o=1;}if(_o>0){_j="row";_n=parseInt(_m/_o)|0;}else{_j="col";_n=_k;}if(_n<=0){_n=1;}if(_j=="row"&&(_m>_o)&&(_m%_o)>0){_n++ ;}}var _t=[];for(_p=0;_p<_n;_p++ ){_t[_p]=0;}if(_j=="col"){for(_p=0;_p<_o;_p++ ){for(_q=0;_q<_n;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_q]<_r[0]){_t[_q]=_r[0];}_s++ ;}}}else{for(_p=0;_p<_n;_p++ ){for(_q=0;_q<_o;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_p]<_r[0]){_t[_p]=_r[0];}_s++ ;}}}for(_p=0;_p<_n;_p++ ){_b+=_t[_p];}if(_r){_c+=_r[1]* _o;}}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pRadio.on_fire_sys_onaccessibilitygesture=function(_a){var _b=false;var _c=this._items;if(_c&&_c.length>0){if(this._accessibility_index==undefined&&this.index> -1){this._accessibility_index=this.index;}if(_a>0){this._accessibility_index++ ;}else{this._accessibility_index-- ;}if(_c[this._accessibility_index]){_b=true;_c[this._accessibility_index]._setAccessibilityNotifyEvent();}}return _b;};_pRadio._setAccessibilityNotifyEvent=function(_a){var _b=this._items;if(_b&&_b.length>0){var _c=null;this._accessibility_index= -1;if(this._accessibility_index<0||this._accessibility_index>=_b.length){if(_a==undefined){_a=1;}if(_a>0){this._accessibility_index=0;}else{this._accessibility_index=_b.length-1;}}_c=_b[this._accessibility_index];if(_c){return _c._setAccessibilityNotifyEvent();}}else{return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);}};_pRadio._setAccessibilityInfoByHover=function(_a){if(_a){if(_a.parent instanceof nexacro._RadioItemControl){_a=_a.parent;}this._accessibility_index=_a._index;return _a._setAccessibilityNotifyEvent();}else{return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this);}};_pRadio.set_text=nexacro._emptyFn;_pRadio._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pRadio.set_value=function(_a){_a=this._convertValueType(_a);if(this.value!=_a){if(this.acceptvaluetype=="ignoreinvalid"){var _b=this._innerdataset;var _c=this.codecolumn;var _d= -1;if(_b&&_c){_d=_b.findRow(_c,_a);if(_d<0){return;}}}this._select_act=true;if(!this.applyto_bindSource("value",_a)){this._select_act=false;return;}this._select_act=false;this.value=_a;this.on_apply_value(_a);}};_pRadio.updateToDataset=function(){return this.applyto_bindSource("value",this.value);};_pRadio.on_apply_value=function(_a){var _b=this._innerdataset;var _c=this.codecolumn;if(_b&&_c){var _d=_b.findRow(_c,_a);this._setIndex(_d);this._block_read_aria_stat=true;this._doDeselect(this._default_index);this._doSelect(_d);this._block_read_aria_stat=false;if(_d>=0){this._default_value=_a;}this._default_index=this.index;}};_pRadio.set_index=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}if(this.index!=_a){this.index=_a;this.on_apply_index(_a);}};_pRadio.on_apply_index=function(_a){var _b=this._innerdataset;var _c=this.codecolumn?this.codecolumn:this.datacolumn;var _d;if(_b&&_c){if(!nexacro._isNull(_a)&&_a>=0&&_a<_b.getRowCount()){_d=_b.getColumn(_a,_c);_d=this._convertValueType(_d,true);}else{_a=this.index= -1;}if(this.value!=_d){this._select_act=true;if(!this.applyto_bindSource("value",_d)){this.index=this._default_index;this._select_act=false;return;}this._select_act=false;this._setValue(_d);}this._doDeselect(this._default_index);this._doSelect(_a);this._default_value=_d;this._default_index=_a;if(this._isAccessibilityEnable()){this.on_apply_accessibility();}}};_pRadio.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pRadio.on_apply_readonly=function(_a){var _b=this._items;var _c=_b.length;var _d=_a?true:false;this._changeStatus("readonly",_d);for(var _e=0;_e<_c;_e++ ){_b[_e]._changeStatus("readonly",_d);}};_pRadio.set_datacolumn=function(_a){if(this.datacolumn!=_a){this.datacolumn=_a;this.on_apply_datacolumn(_a);}};_pRadio.on_apply_datacolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){var _d;var _e=_a==""?this.codecolumn:_a;var _f,_g;var _h=this._items;for(_f=0,_g=_h.length;_f<_g;_f++ ){_d=_c.getColumn(_f,_e);if(_d){_h[_f].set_text(_d);if(this.index==_f){this._setText(_d);}}else{_h[_f].set_text("");this._setText("");}}this._updateItemInfo();}};_pRadio.set_codecolumn=function(_a){if(this.codecolumn!=_a){this.codecolumn=_a;this.on_apply_codecolumn(_a);}};_pRadio.on_apply_codecolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){this.on_apply_index(this.index);if(!this.datacolumn){this.on_apply_datacolumn(this.datacolumn);}this._updateItemInfo();}};_pRadio.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this.innerdataset!=_a||(this.innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pRadio.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}var _b=this.getElement();if(_b){this._destroyRadioItemControl();if(_a){this._redrawRadioItem();if(this.index<0){this._default_value=this.value=undefined;}}else{this._createRadioTextElement();}}};_pRadio.set_columncount=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}if(this.columncount!=_a){this.columncount=_a;this.on_apply_columncount(_a);}};_pRadio.on_apply_columncount=function(){this._recalcLayout();};_pRadio.set_rowcount=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}if(this.rowcount!=_a){this.rowcount=_a;this.on_apply_rowcount(_a);}};_pRadio.on_apply_rowcount=function(){this._recalcLayout();};_pRadio.set_direction=function(_a){var _b=["horizontal","vertical"];if(_b.indexOf(_a)== -1){return;}if(this.direction!=_a){this.direction=_a;this.on_apply_direction(_a);}};_pRadio.on_apply_direction=function(){this._recalcLayout();};_pRadio.set_itemaccessibilityrole=function(_a){if(_a){this.itemaccessibilityrole=_a;this.on_apply_itemaccessibilityrole(_a);}else{this.itemaccessibilityrole="";this.on_apply_itemaccessibilityrole(" ");}};_pRadio.on_apply_itemaccessibilityrole=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityrole(_a?_a:this.itemaccessibilityrole);}}};_pRadio.set_itemaccessibilitylabel=function(_a){if(_a){this.itemaccessibilitylabel=_a;this.on_apply_itemaccessibilitylabel(_a);}else{this.itemaccessibilitylabel="";this.on_apply_itemaccessibilitylabel(" ");}};_pRadio.on_apply_itemaccessibilitylabel=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitylabel(_a?_a:this.itemaccessibilitylabel);}}};_pRadio.set_itemaccessibilitydescription=function(_a){if(_a){this.itemaccessibilitydescription=_a;this.on_apply_itemaccessibilitydescription(_a);}else{this.itemaccessibilitydescription="";this.on_apply_itemaccessibilitydescription(" ");}};_pRadio.on_apply_itemaccessibilitydescription=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydescription(_a?_a:this.itemaccessibilitydescription);}}};_pRadio.set_itemaccessibilityaction=function(_a){if(_a){this.itemaccessibilityaction=_a;this.on_apply_itemaccessibilityaction(_a);}else{this.itemaccessibilityaction="";this.on_apply_itemaccessibilityaction(" ");}};_pRadio.on_apply_itemaccessibilityaction=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityaction(_a?_a:this.itemaccessibilityaction);}}};_pRadio.set_itemaccessibilitydesclevel=function(_a){if(_a){this.itemaccessibilitydesclevel=_a;this.on_apply_itemaccessibilitydesclevel(_a);}else{this.itemaccessibilitydesclevel="";this.on_apply_itemaccessibilitydesclevel(" ");}};_pRadio.on_apply_itemaccessibilitydesclevel=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydesclevel(_a?_a:this.itemaccessibilitydesclevel);}}};_pRadio.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)== -1){return;}this.acceptvaluetype=_a;};_pRadio.getCount=function(){return this._items.length;};_pRadio.getInnerDataset=function(){return this._innerdataset;};_pRadio.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset(_a);}};_pRadio.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._items;if(_a==nexacro.Event.KEY_SPACE){if(!this.readonly){if(this._accessibility_index> -1){_h[this._accessibility_index]._changeUserStatus("focus",true);this.set_index(this._accessibility_index);}}}else{if(nexacro._enableaccessibility){if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){var _i=this._accessibility_index;var _j=_h.length;var _k;if(_a==nexacro.Event.KEY_UP){if(_i<0){this._want_arrow=false;}else{this._accessibility_index=_i+= -1;_k=_h[_i];if(_k){_k._on_focus(true,"keyup");}else{if(_i== -1){var _l=this._last_focused;if(_l){this._doDefocus(_l,true);}else{this._doDefocus(this);}this._on_focus(true,"keyup");}}}}else{if((_i+1)>=_j){this._want_arrow=false;}else{this._accessibility_index=_i+=1;_k=_h[_i];if(_k){_k._on_focus(true,"keydown");}}}}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pRadio._on_radioitem_onclick=function(_a){if(!this.enable||this.readonly==true){return false;}var _b=this._default_index;var _c=this._default_value;var _d=this._default_text;this.on_fire_onitemclick(_a,_a._index,_a.text,_a._value);if(this.index!=_a._index){var _e=_a._index;var _f=_a._value;var _g=_a.text;var _h=this.on_fire_canitemchange(_a,_b,_d,_c,_e,_g,_f);if(_h){this.set_index(_e);if(this.index!=_b||_b== -1){this.on_fire_onitemchanged(_a,_b,_d,_c,_e,_g,_f);}if(nexacro._enableaccessibility){this._accessibility_index=_a._index;_a._on_focus(true);}}}};_pRadio._on_icon_onload=function(){this._recalcLayout();};_pRadio._on_dataset_onvaluechanged=function(_a,_b){if(this._is_created){this._redrawRadioItem();this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pRadio._on_dataset_onrowsetchanged=function(){this._redrawRadioItem();};_pRadio.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);return this.canitemchange._fireCheckEvent(this,_h);}return true;};_pRadio.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);return this.onitemchanged._fireEvent(this,_h);}};_pRadio.on_fire_onitemclick=function(_a,_b,_c,_d){if(this.onitemclick&&this.onitemclick._has_handlers){var _e=new nexacro.ItemClickEventInfo(this,"onitemclick",_b,_c,_d);return this.onitemclick._fireEvent(this,_e);}return false;};_pRadio.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pRadio.on_keydown_basic_action=function(){};_pRadio.on_keydown_default_action=function(_a,_b,_c,_d,_e){var _f=nexacro.Event;var _g=this;if(nexacro._enableaccessibility){if(_a==_f.KEY_UP||_a==_f.KEY_DOWN){return false;}}if(_a==nexacro.Event.KEY_TAB){this._want_tab=false;this._is_first_focus=false;}else if(_a==_f.KEY_LEFT||_a==_f.KEY_RIGHT||_a==_f.KEY_UP||_a==_f.KEY_DOWN){var _h=this._innerdataset;if(!_h||this.readonly){return false;}var _i=_h.getRowCount();if(_i<1){return false;}var _j=this._default_index;var _k=this._default_value;var _l=this._default_text;var _m=(_a==_f.KEY_LEFT||_a==_f.KEY_UP)? -1:(_a==_f.KEY_RIGHT||_a==_f.KEY_DOWN)?1:0;var _n=this.index+_m;if(_n>=_i){_n=0;}else if(_n<0){_n=_i-1;}var _o=this._getItem(_n);var _p=this.on_fire_canitemchange(_g,_j,_l,_k,_n,_o.text,_o._value);if(_p){this._accessibility_index=_n;if(_i!=_n&&_i>=_n&&0<=_n){this.set_index(_n);if(_n!=_j){this.on_fire_onitemchanged(_g,_j,_l,_k,_n,_o.text,_o._value);}}if(nexacro._enableaccessibility){_o._on_focus(true,_m== -1?"keyleft":(_m==1?"keyright":undefined));_o._changeUserStatus("selected",true);}}}return false;};_pRadio._createRadioItemControl=function(){var _a=this._innerdataset;if(_a){var _b=_a.getRowCount();if(_b>0){var _c,_d,_e;var _f=this._is_created?false:true;var _g=this.codecolumn;var _h=this.datacolumn==""?_g:this.datacolumn;for(var _i=0;_i<_b;_i++ ){_d=_a.getColumn(_i,_h);_e=_a.getColumn(_i,_g);_e=this._convertValueType(_e,true);_c=new nexacro._RadioItemControl("radioitem"+_i,0,0,0,0,null,null,null,null,null,null,this);_c.set_text(_d);_c._setItemInfo(_i,_e);_c.createComponent(_f);_c._setEventHandler("onclick",this._on_radioitem_onclick,this);if(nexacro._enableaccessibility){_c._setAccessibilityInfoIndex(_i);_c._setAccessibilityInfoCount(_b);}this._items[_i]=_c;}}}};_pRadio._updateItemInfo=function(){var _a=this._innerdataset;if(!_a){return;}var _b=_a.getRowCount();if(_b>0){var _c=this.codecolumn;for(var _f=0;_f<_b;_f++ ){var _d=_a.getColumn(_f,_c);_d=this._convertValueType(_d,true);var _e=this._items[_f];_e._setItemInfo(_f,_d);if(nexacro._enableaccessibility){_e._setAccessibilityInfoIndex(_f);_e._setAccessibilityInfoCount(_b);}this._items[_f]=_e;}}};_pRadio._createRadioTextElement=function(){var _a=this.getElement();var _b=this._text_elem;if(!_b&&_a){_b=this._text_elem=new nexacro.TextBoxElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}_b.setElementText(this.name);if(this._is_created){_b.create(this._getWindow());}}};_pRadio._destroyRadioItemControl=function(){var _a,_b;var _c=this._items;for(_a=0,_b=_c.length;_a<_b;_a++ ){_c[_a].destroy();_c[_a]=null;}this._items=[];};_pRadio._destroyRadioTextElement=function(){var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}};_pRadio._recalcLayout=function(){var _a=this.getElement();if(_a){var _b=this._innerdataset;var _c=this._items;var _d=_c.length;if(_b&&_d){var _e;var _f=this.fittocontents;var _g=this.direction;var _h=this.columncount;var _i=this.rowcount;var _j=_b.getRowCount();var _k=1;var _l=_j;var _m=this._getClientWidth();var _n=this._getClientHeight();var _o=0;var _p=0;var _q,_r;var _s,_t;var _u,_v,_w=0;var _x=[];var _y=[];var _z=1;if(_h== -1&&_i== -1){_l=1;_k=0;var _aa=0;for(_s=0;_s<_d;_s++ ){_v=_c[_s]._on_getFitSize();_aa+=_v[0];if(_m<_aa){_l++ ;_aa=_v[0];_k=1;}else{_k++ ;_z=_z>_k?_z:_k;}}_k=_z;_w=0;for(_s=0;_s<_l;_s++ ){_o=0;for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_r=_n/_l;_u.move(_o,_p,_v[0],_r);_o+=_v[0];if(_o>_m){break;}_w++ ;}_p+=_r;}}else{if(_g=="horizontal"){if(_h>0){_k=_h;}else if((_h<0&&_i<0)||(_h<0&&_i==0)||(_h==0&&_i==0)||(_h==0&&_i==_j)){_k=1;}else if(_h<0&&(_h<_i)&&(_i>1)){_k=Math.round(_l/_i);}else if(_i>0){_k=Math.ceil(_l/_i);if((_k* _i)<_l){_k++ ;_l=(((_k* _i)-_l)>=_k)?_i-1:_i;}}else{_k=_l;}if(_k>_l){_k=_l;}_e="col";_l=parseInt(_j/_k)|0;if((_j>_k)&&(_j%_k)>0){_l++ ;}}else{if(_i>0){_l=_i;}else if(_h>0){_l=parseInt(_j/_h);if((_h* _l)<_j){_l++ ;}}else{_l=1;}if(_l>0){_e="row";_k=parseInt(_j/_l)|0;}else{_k=_h;_e="col";}if(_k<=0){_k=1;}if(_e=="row"&&(_j>_l)&&(_j%_l)>0){_k++ ;}}_q=_m/_k;_r=_n/_l;if(_e=="col"){if(_f=="none"){for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_u.move((_q* _t),(_r* _s),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_x[_t]=_x[_t]?Math.max(_x[_t],_v[0]):_v[0];_y[_s]=_y[_s]?Math.max(_y[_s],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_f=="both"){_u.move(_o,_p,_x[_t],_y[_s]);_o+=_x[_t];}else if(_f=="width"){_u.move(_o,(_r* _s),_x[_t],_r);_o+=_x[_t];}else if(_f=="height"){_u.move((_q* _t),_p,_q,_y[_s]);}_w++ ;}_o=0;if(_f=="both"||_f=="height"){_p+=_y[_s];}else{_p+=_r;}}}}else{if(_f=="none"){for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];_u.move((_q* _s),(_r* _t),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_x[_s]=_x[_s]?Math.max(_x[_s],_v[0]):_v[0];_y[_t]=_y[_t]?Math.max(_y[_t],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_f=="both"){_u.move(_o,_p,_x[_s],_y[_t]);_p+=_y[_s];}else if(_f=="width"){_u.move(_o,(_r* _t),_x[_s],_r);_p+=_y[_s];}else if(_f=="height"){_u.move((_q* _s),_p,_q,_y[_t]);}_w++ ;}_p=0;if(_f=="both"||_f=="width"){_o+=_x[_s];}else{_o+=_q;}}}}}}}};_pRadio._redrawRadioItem=function(){this._destroyRadioTextElement();this._destroyRadioItemControl();this._createRadioItemControl();if(this.value!==undefined){this.on_apply_value(this.value);}else if(this.index> -1){this.on_apply_index(this.index);}this.on_apply_readonly(this.readonly);this._recalcLayout();};_pRadio._doSelect=function(_a){var _b=this._getItem(_a);if(_b){_b._block_read_aria_stat=this._block_read_aria_stat;_b._changeUserStatus("selected",true);_b._block_read_aria_stat=false;this._setText(_b.text);}else{this._setText("");}};_pRadio._doDeselect=function(_a){var _b=this._getItem(_a);if(_b){_b._block_read_aria_stat=this._block_read_aria_stat;_b._changeUserStatus("selected",false);_b._block_read_aria_stat=false;}};_pRadio._doDefocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pRadio._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pRadio._setValue=function(_a){if(_a===null){_a="";}this.value=(_a===undefined)?_a:_a.toString();};_pRadio._setIndex=function(_a){if((_a>0)&&(_a>=this._items.length)){_a= -1;}this.index=_a;};_pRadio._setText=function(_a){this.text=_a;this._default_text=_a;};_pRadio._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pRadio._getItem=function(_a){var _b;var _c=this._items;if(_c.length>0&&_a>=0){_b=_c[_a];}return _b;};_pRadio._getPreCalculateWantTab=function(_a,_b){var _c=this._innerdataset;if(_c){if(this.index> -1){var _d=this.index;if(_d==this._accessibility_index){return false;}}else{var _e=this._accessibility_index;if(_b){if(_e<0){return false;}}else{var _f=_c.getRowCount();if(_e+1>_f){return false;}}}}return this._want_tab;};_pRadio._getPreCalculateWantArrow=function(_a){if(!this._isEnable()){return false;}var _b=this._innerdataset;var _c=nexacro._enableaccessibility?this._accessibility_index:this.index;if(_b){var _d=_b.getRowCount();if(_a==nexacro.Event.KEY_UP){if(!this._isAccessibilityEnable()){return false;}else if((_c-1)<0){return false;}}else if(_a==nexacro.Event.KEY_DOWN){if(!this._isAccessibilityEnable()){return false;}else if((_c+1)>=_d){return false;}}}else{return false;}return this._want_arrow;};delete _pRadio;}if(!nexacro._RadioItemControl){nexacro._RadioItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pRadioItemControl=nexacro._createPrototype(nexacro._IconText,nexacro._RadioItemControl);nexacro._RadioItemControl.prototype=_pRadioItemControl;_pRadioItemControl._type_name="RadioItemControl";_pRadioItemControl._index= -1;_pRadioItemControl._value=undefined;_pRadioItemControl._is_subcontrol=true;_pRadioItemControl._use_selected_status=true;_pRadioItemControl._use_readonly_status=true;_pRadioItemControl.accessibilityrole="radioitem";_pRadioItemControl.on_getIDCSSSelector=function(){return "radioitem";};_pRadioItemControl._on_getAccessibilityAdditionalLabel=function(){if(this._isAccessibilityEnable()&&!this.parent._is_first_focus){if(this._index> -1){return ( +this._index+1)+" "+this.parent._items.length;}}return "";};_pRadioItemControl._getAccessibilityLabel=function(_a){var _b="";if(this.parent._is_first_focus){var _c=this.parent;var _d=_c.accessibility;_b=_c._getAccessibilityParentValue(_d);}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _b;};_pRadioItemControl._setItemInfo=function(_a,_b){this._index=_a;this._value=_b;};delete _pRadioItemControl;}if(!nexacro.ListBox){nexacro.ListBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._selectinfo={index: -1,text:"",value:undefined,obj:null};this._scroll_vpos_queue=[];this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};this._selectinfo_list=[];this._buffer_pages=[];this._initInnerdatasetInfo();};var _pListBox=nexacro._createPrototype(nexacro.Component,nexacro.ListBox);nexacro.ListBox.prototype=_pListBox;_pListBox._type_name="ListBox";_pListBox._temp_item=null;_pListBox.codecolumn="";_pListBox.datacolumn="";_pListBox.multiselect=false;_pListBox.innerdataset=null;_pListBox.readonly=false;_pListBox.index= -1;_pListBox.text="";_pListBox.value=undefined;_pListBox.dragscrolltype="all";_pListBox.selectscrollmode="default";_pListBox.itemheight=undefined;_pListBox.acceptvaluetype="allowinvalid";_pListBox._innerdataset=null;_pListBox._contents_maxwidth=0;_pListBox._contents_maxheight=0;_pListBox._page_rowcount=0;_pListBox._page_rowcount_min=0;_pListBox._shiftKey=false;_pListBox._ctrlKey=false;_pListBox._altKey=false;_pListBox._lbtnDownIdx= -1;_pListBox._want_tab=false;_pListBox._want_arrow=true;_pListBox._shift_select_base_index=null;_pListBox._is_first_focus=false;_pListBox._calc_scroll=false;_pListBox._cnt_resetscroll=0;_pListBox._keep_scrolling=false;_pListBox._is_listtype=true;_pListBox._touch_scrolling=false;_pListBox._is_scrollable=true;_pListBox._use_readonly_status=true;_pListBox._accessibility_index= -1;_pListBox.accessibilityrole="listbox";_pListBox.accessibilityaction="";_pListBox.accessibilitydesclevel="all";_pListBox.accessibilitydescription="";_pListBox.accessibilityenable=true;_pListBox.accessibilitylabel="";_pListBox.itemaccessibilityrole="listboxitem";_pListBox.itemaccessibilityenable=true;_pListBox.itemaccessibilitylabel="";_pListBox.itemaccessibilitydescription="";_pListBox.itemaccessibilityaction="";_pListBox.itemaccessibilitydesclevel="all";_pListBox._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";_pListBox._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onitemclick":1,"onitemdblclick":1,"canitemchange":1,"onitemchanged":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onitemmouseenter":1,"onvscroll":1,"onhscroll":1,"onmousedown":1,"onmouseup":1,"onmousewheel":1};_pListBox.on_create_contents=function(){this._temp_item=new nexacro._ListBoxItemControl("_temp_item",0,0,0,0,null,null,null,null,null,null,this);this._temp_item.createComponent();};_pListBox.on_created_contents=function(_a){if(this.innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);}this.on_apply_innerdataset(this._innerdataset);}this._redrawListBoxContents(true);var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created(_a);}this._selectinfo.obj=null;this._selectinfo.index=this.index;this._selectinfo.text=this.text;this._selectinfo.value=this.value;if(nexacro._enableaccessibility){this._want_arrow=true;this.on_apply_prop_accessibilitylabel();}this._is_created=true;this._onRecalcScrollSize();};_pListBox.on_destroy_contents=function(){var _a=this._temp_item;if(_a){_a.destroy();}this._temp_item=null;this._destroyListBoxContents();this._buffer_pages=null;this._removeEventHandlerToInnerDataset();this._selectinfo=null;this._select_multi=null;this._selectinfo_list.length=0;this._scroll_vpos_queue=null;};_pListBox._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._on_dataset_onload,this);this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pListBox.on_create_contents_command=function(){if(this.innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);}this._parseInnerDataset();}this._redrawListBoxContents(true);var _a="";var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}return _a;};_pListBox.on_attach_contents_handle=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].attachHandle(_a);}this._selectinfo.obj=null;this._selectinfo.index=this.index;this._selectinfo.text=this.text;this._selectinfo.value=this.value;if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}this._is_created=true;this._onRecalcScrollSize();};_pListBox.on_change_containerRect=function(){if(this._is_created_contents){var _a=this._getItemHeight();var _b=this._getClientHeight();var _c=_a?_b/_a:0;if(this._page_rowcount!=_c){this._redrawListBoxContents(false);}else{this._recalcLayout();}if(!this._calc_scroll){this._onRecalcScrollSize();}else{this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pListBox.on_change_containerPos=function(){};_pListBox.on_getBindableProperties=function(){return "value";};_pListBox.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(nexacro._enableaccessibility){var _a=this._accessibility_index;var _b=this._getItem(_a);if(_b){_b._changeStatus("mouseover",false);}}};_pListBox.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(!_a){_a=this.enable;}var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pListBox.on_apply_prop_cssclass=function(){var _a=this._getContentsItem();var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_cssclass();}};_pListBox.on_init_bindSource=function(_a,_b,_c){if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();}if(_b=="value"){this.set_value(undefined);}};_pListBox.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);if(this.value!=_e){_b=this._innerdataset;var _f=this.codecolumn;var _g=this.datacolumn==""?_f:this.datacolumn;if(_b&&_f){var _h=_b.findRow(_f,_e);var _i=_e;if(_h> -1){_i=_b.getColumn(_h,_g);}else{this._do_not_change_value=true;}this._setValue(_e);this._setIndex(_h);this._setText(_i);this._doSelect(_h,false);this._do_not_change_value=false;}if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();}}}};_pListBox._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=Math.max(this._contents_maxwidth,_b);var _e=Math.max(this._contents_maxheight,_c);this._calc_scroll=true;_a.setElementScrollMaxSize(_d,_e);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pListBox._getDlgCode=function(_a,_b,_c,_d){var _e,_f;var _g=this.hscrollbar;var _h=this.vscrollbar;if(_a&&(_a==nexacro.Event.KEY_TAB)){_e=this._want_tab;}else{_f=this._want_arrow;}if(nexacro._enableaccessibility){this._want_arrow=true;}if(this._is_first_focus){this._is_first_focus=false;}if(_c){if(_a==nexacro.Event.KEY_LEFT){if(_g){_f=_g.pos>_g.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_UP){if(_h){_f=_h.pos>_h.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_RIGHT){if(_g){_f=_g.pos<_g.max?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_DOWN){if(_h){_f=_h.pos<_h.max?true:false;}else{_f=false;}}}return {want_tab:_e,want_return:false,want_escape:false,want_chars:false,want_arrows:_f};};_pListBox._setFocus=function(_a,_b,_c){this._focus_direction=_b;var _d=this.setFocus(_a,_c);this._focus_direction= -1;return _d;};_pListBox._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a===false){this._focus_direction= -1;this._want_arrow=true;}if(_h>=0){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){if(this._last_focused){this._do_defocus(this._last_focused,false);}var _i,_j;var _k=this._getInnerdatasetInfo("_rowcount");if(nexacro._enableaccessibility){this._accessibility_index= -1;if(_k){if(_h<2){if(_h===0){this._accessibility_index=0;}else{this._accessibility_index=_k-1;}this._is_first_focus=true;this._refreshScroll(this._accessibility_index,_h);_j=this._getItem(this._accessibility_index);if(_j){_j._on_focus(true);}}else{if(_h==2){this._is_first_focus=true;if(!this._isAccessibilityEnable()){this._accessibility_index=0;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}else{this._accessibility_index= -1;}}else if(_h==3){this._is_first_focus=true;this._accessibility_index=_k-1;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}}}this._shift_select_base_index=this._accessibility_index;}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._last_focused){this._do_defocus(this._last_focused,false);}else if(this._select_multi.lastselected===undefined&&this._accessibility_index> -1){this._getItem(this._accessibility_index)._changeStatus("focused",false);}}return _g;};_pListBox._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._getInnerdatasetInfo("_rowcount");var _g=this._getInnerdatasetInfo("_max_width");var _h=this._getInnerdatasetInfo("_max_height");_b+=_g;_c+=_h* _f;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pListBox.on_get_accessibility_label=function(){var _a="";if(!this._is_first_focus){_a=this.text?this.text:this.value;}return _a?_a:"";};_pListBox.set_text=nexacro._emptyFn;_pListBox._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pListBox.set_value=function(_a){_a=this._convertValueType(_a);if(this.value!=_a){if(this.acceptvaluetype=="ignoreinvalid"){var _b= -1;var _c=this._innerdataset;var _d=this.codecolumn;if(_c){_b=_c.findRow(_d,_a);if(_b<0){return;}}}if(!this.applyto_bindSource("value",_a)){return;}this.value=_a;this.on_apply_value(_a);if(this.value==undefined){this.value=_a;}}};_pListBox.on_apply_value=function(_a){var _b=this._innerdataset;var _c=this.codecolumn;var _d=this.datacolumn==""?_c:this.datacolumn;if(_b&&_c){var _e=_b.findRow(_c,_a);var _f="";if(_e> -1){_f=_b.getColumn(_e,_d);}this._setIndex(_e);this._setText(_f);this._doSelect(_e,false);}};_pListBox.set_index=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}var _b=this._innerdataset;if(_b&&(_a>_b.getRowCount()-1)){_a= -1;}if(this.index!=_a){this.index=_a;this.on_apply_index(_a);}else{this.on_apply_index(_a);this._on_last_selectfocuschanged(this.index,true);}};_pListBox.on_apply_index=function(_a){var _b="";var _c;var _d=this._getInnerdatasetInfo("_rows",_a);if(_d){_c=_d.value;_b=_d.text;}if(this.value!=_c){if(!this.applyto_bindSource("value",_c)){this.index=this._default_index;return;}this._setValue(_c);this._setText(_b);}if(this._innerdataset){this._doSelect(_a,false);}};_pListBox.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this.innerdataset!=_a||(this.innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pListBox.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onload",this._on_dataset_onload,this);_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}this._parseInnerDataset();var _b=this.getElement();if(_b){this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_codecolumn=function(_a){if(this.codecolumn!=_a){this.codecolumn=_a;this.on_apply_codecolumn(_a);}};_pListBox.on_apply_codecolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_datacolumn=function(_a){if(this.datacolumn!=_a){this.datacolumn=_a;this.on_apply_datacolumn(_a);}};_pListBox.on_apply_datacolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(this.multiselect!=_a){this.multiselect=_a;this.on_apply_multiselect(_a);}};_pListBox.on_apply_multiselect=function(_a){var _b=this.getElement();if(_b){this._select_clear();this._shiftKey=false;this._ctrlKey=false;this.setSelect(this.index,true);}};_pListBox.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);this._setAccessibilityFlagReadOnly(_a);}};_pListBox.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_readonly(_a);}};_pListBox.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.itemheight!=_a){this.itemheight=_a;this.on_apply_itemheight(_a);}};_pListBox.on_apply_itemheight=function(_a){var _b=this.getElement();if(_b){this._redrawListBoxContents(false);this._onRecalcScrollSize();}};_pListBox.set_dragscrolltype=function(_a){var _b=["none","vert","horz","both","all"];if(_b.indexOf(_a)== -1){return;}if(this.dragscrolltype!=_a){this.dragscrolltype=_a;}};_pListBox.set_selectscrollmode=function(_a){switch(_a){case "select":case "scroll":this._selectscrollmode=this.selectscrollmode=_a;break;case "default":this.selectscrollmode=_a;this._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";break;}};_pListBox.set_itemaccessibilityrole=function(_a){if(_a){this.itemaccessibilityrole=_a;this.on_apply_itemaccessibilityrole(_a);}else{this.itemaccessibilityrole="";this.on_apply_itemaccessibilityrole(" ");}};_pListBox.on_apply_itemaccessibilityrole=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityrole(_a?_a:this.itemaccessibilityrole);}};_pListBox.set_itemaccessibilitylabel=function(_a){if(_a){this.itemaccessibilitylabel=_a;this.on_apply_itemaccessibilitylabel(_a);}else{this.itemaccessibilitylabel="";this.on_apply_itemaccessibilitylabel(" ");}};_pListBox.on_apply_itemaccessibilitylabel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitylabel(_a?_a:this.itemaccessibilitylabel);}};_pListBox.set_itemaccessibilityenable=function(_a){if(_a){this.itemaccessibilityenable=_a;this.on_apply_itemaccessibilityenable(_a);}else{this.itemaccessibilityenable=true;this.on_apply_itemaccessibilityenable(true);}};_pListBox.on_apply_itemaccessibilityenable=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityenable(_a?_a:this.itemaccessibilityenable);}};_pListBox.set_itemaccessibilitydescription=function(_a){if(_a){this.itemaccessibilitydescription=_a;this.on_apply_itemaccessibilitydescription(_a);}else{this.itemaccessibilitydescription="";this.on_apply_itemaccessibilitydescription(" ");}};_pListBox.on_apply_itemaccessibilitydescription=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydescription(_a?_a:this.itemaccessibilitydescription);}};_pListBox.set_itemaccessibilityaction=function(_a){if(_a){this.itemaccessibilityaction=_a;this.on_apply_itemaccessibilityaction(_a);}else{this.itemaccessibilityaction="";this.on_apply_itemaccessibilityaction(" ");}};_pListBox.on_apply_itemaccessibilityaction=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityaction(_a?_a:this.itemaccessibilityaction);}};_pListBox.set_itemaccessibilitydesclevel=function(_a){if(_a){this.itemaccessibilitydesclevel=_a;this.on_apply_itemaccessibilitydesclevel(_a);}else{this.itemaccessibilitydesclevel="";this.on_apply_itemaccessibilitydesclevel(" ");}};_pListBox.on_apply_itemaccessibilitydesclevel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydesclevel(_a?_a:this.itemaccessibilitydesclevel);}};_pListBox.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)== -1){return;}this.acceptvaluetype=_a;};_pListBox.getCount=function(){return this._getInnerdatasetInfo("_rowcount");};_pListBox.getSelectedCount=function(){return this._select_multi.length;};_pListBox.getSelect=function(_a){if(_a<0||_a>=this.getCount()){return false;}var _b=this._select_multi.items;var _c=this._select_multi.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return true;}}return false;};_pListBox.getSelectedItems=function(){if(this._select_multi&&this._select_multi.length>0){var _a=this._select_multi.items;var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=_a[_c];}_b.sort(function(_e,_f){return _e-_f;});return _b;}else{return [];}};_pListBox.clearSelect=function(){if(this._select_multi&&this._select_multi.length>0){this._change_by_script=true;this._selectinfo.index= -1;if(this._changeIndex( -1)){this.on_apply_index( -1);}this._select_clear();this._change_by_script=false;}};_pListBox.redraw=function(){this._redrawListBoxContents(true);this._onRecalcScrollSize();};_pListBox.setSelect=function(_a,_b){_b=nexacro._toBoolean(_b);_a=parseInt(_a)|0;var _c=this._getItem(_a);this._change_by_script=true;if(_a>=0){if(_b==true){if(!this.multiselect){if(this._changeIndex(_a)){this._deselect_all(true);if(!_c){this._clearListBoxBufferPage();}this.on_apply_index(_a);}else{this._doSelect(_a,false);}}else{if(_c){_c.set_selected(_b);}this._select_add(_a);this._changeIndex(_a);}}else{if(_c){_c.set_selected(false);}var _d=this.index;var _e;if(this._select_multi&&this._select_multi.length>0){if(this.index==_a){var _f=this._select_multi.items;_e=_f.indexOf(this.index);if(_e>0){_d=_f[_e-1];}}}this._select_remove(_a);if(this._select_multi&&this._select_multi.length==0){this._changeIndex( -1);}else if(this._select_multi&&this._select_multi.length>0){this._changeIndex(_d);}}}else{if(this._changeIndex( -1)){this.on_apply_index( -1);}this._select_clear();}this._change_by_script=false;};_pListBox.updateToDataset=function(){return this.applyto_bindSource("value",this.value);};_pListBox.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this.innerdataset=_a.id;this._keep_scrolling=(this.innerdataset!=_a.id)?false:true;this.on_apply_innerdataset(this._innerdataset);}};_pListBox.getInnerDataset=function(){return this._innerdataset;};_pListBox._on_dataset_onload=function(_a,_b){if(_b.reason==0){this._redrawListBoxContents(true);this._onRecalcScrollSize();if(this.index> -1){if(this._changeIndex(this.index)){this.on_apply_index(this.index);}}else if(this.value!==""){var _c=this._innerdataset.findRow(this.codecolumn,this.value);if(this._changeIndex(_c)){this.on_apply_index(_c);}}}};_pListBox._on_dataset_onvaluechanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pListBox._on_dataset_onrowsetchanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();}};_pListBox._on_item_onlbuttondown=function(_a,_b){if(this.readonly){return false;}if(nexacro._enableaccessibility){if(this._accessibility_index> -1){var _c=this._getItem(this._accessibility_index);if(_c._status=="focused"){_c._changeStatus("focused",false);}}}var _d=this._statusmap?this._statusmap['focused']:false;_a._changeUserStatus("selected",true);if(_d){_a._changeStatus("focused",true);}this._shiftKey=_b.shiftkey;this._ctrlKey=_b.ctrlkey;this._altKey=_b.altkey;this._selectinfo.obj=_a;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;if(nexacro._isTouchInteraction){this._selectinfo_list[this._selectinfo_list.length]=this._selectinfo;}if(!this._shiftKey){this._shift_select_base_index=_a.index;}this._lbtnDownIdx=_a.index;};_pListBox._on_item_ondblclick=function(_a,_b){if(this.readonly||!this.enableevent){return false;}return this.on_fire_onitemdblclick(this,this.index,this.text,this.value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty);};_pListBox._on_beforescroll=function(_a,_b,_c,_d,_e,_f){if(_e=="trackstart"||_e=="tracklastover"||_e=="trackfirstover"){return true;}if(nexacro._Browser=="Runtime"||(navigator.userAgent.indexOf("Android 4.1")> -1||navigator.userAgent.indexOf("Android 4.2")> -1||navigator.userAgent.indexOf("Android 4.3")> -1)){this._adjustScrollRows_callback(true,_d);}else{if(_f=="fling"||_f=="slide"||_e=="track"){if(!this._aniframe_rowscroll){var _g=this;this._scroll_vpos_queue=[];this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_g._adjustScrollRows_callback();});}var _h=this._scroll_vpos_queue.push(_d);if(_h==1){this._aniframe_rowscroll.start();}}else{this._adjustScrollRows_callback(true,_d);}}return true;};_pListBox._adjustScrollRows_callback=function(_a,_b){if(_b==undefined){_b=this.vscrollbar?this.vscrollbar._pos:0;}if(_a){this._scroll_vpos_queue=[];}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=_c?Math.floor(_b/_c):0;var _f=_e+this._page_rowcount;if(_f>=_d){_f=_d-1;}if(this._touch_scrolling){this._createListBoxContents(_e,_f,true);this._control_element.setElementVScrollPos(_b);}else{this._createListBoxContents(_e,_f);this._control_element.setElementVScrollPos(_b);}if(this.index> -1){if(this.multiselect){var _g=this._selectinfo.index;var _h=this._buffer_pages;for(var _j=0;_j<_h.length;_j++ ){for(var _k=0;_k<_h[_j].length;_k++ ){var _i=_h[_j][_k].index;if(_i==_g){this._doSelect(this.index,true);}}}}else{this._doSelect(this.index,false);}}};_pListBox._setVScrollDefaultAction=function(_a){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}var _b=this.getElement();if(_b){var _c=this._getItemHeight();var _d=this._vscroll_pos;var _e=_d+_c;if(_a>0){_e=_d-_c;if(_e<0){_e=0;}}if(_e>_b.vscroll_limit){_e=_b.vscroll_limit;}this._scrollTo(this._hscroll_pos,_e,true,true,undefined,"mousewheel_v");if(_d!=this._vscroll_pos){return true;}}return false;};_pListBox.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){if(nexacro._enableaccessibility){var _h;var _i=this._accessibility_index;var _j=this._getInnerdatasetInfo("_rowcount");if(_a==nexacro.Event.KEY_UP){if(_i<0){this._want_arrow=false;}else{this._accessibility_index=_i+= -1;this._refreshScroll(_i,_d?1:0);_h=this._getItem(_i);if(_h){_h._on_focus(true);}else{if(_i== -1){if(this._isAccessibilityEnable()){var _k=this._last_focused;if(_k){this._do_defocus(_k,true);}else{this._do_defocus(this);}this._on_focus(true);}else{this._want_arrow=false;}}}}}else{if((_i+1)>=_j){this._want_arrow=false;}else{this._accessibility_index=_i+=1;this._refreshScroll(_i,_d?1:0);_h=this._getItem(_i);if(_h){_h._on_focus(true);}}}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pListBox.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pListBox.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(_l&&(_l instanceof nexacro.ScrollBarControl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarControl))){return;}var _o=this._getWindow().findComponent(_m);var _p=this._selectinfo;var _q=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);var _r=_p.obj;if(_r){var _s;if(this._contains(_m)){this.on_fire_onitemclick(this,_o.index,_o.text,_o.value,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_n);if(nexacro._enableaccessibility){if(this._accessibility_index> -1){var _t=this._getItem(this._accessibility_index);if(_p.index!=this._accessibility_index&&_t&&_t._selected==true){this._deselect_all(true);_t._changeUserStatus("selected",false);}}else{if(_p){this._accessibility_index=_p.index;}}}_s=_r;var _u=_s.index;if(this.multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_u);}else{this._do_select(_u,false);}}else{if(this._changeIndex(_u)){this.on_apply_index(_u);}else{if(!_r.selected){_r._changeUserStatus("selected",false);}}if(_r!=_o){_r._changeStatus("mouseover",false);}}}else{if(!_r.selected){_r._changeUserStatus("selected",false);}}}return _q;};_pListBox.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onslidestart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this.selectscrollmode=="select"&&this.multiselect){if(this._innerdataset){var _k= -1;if(_c[0].target&&_c[0].target.parent){_k=_c[0].target.parent.index;}if(this._lbtnDownIdx> -1&&_k> -1){this._deselect_all(true);var _l=this._lbtnDownIdx;var _m=_k;var _n=_k;if(!nexacro._isNumber(_l)){_l=0;}if(!nexacro._isNumber(_m)){_m=this._getInnerdatasetInfo("_rowcount");}if(_l>_m){var _o=_m;_m=_l;_l=_o;_n=_o;}var _p=[];for(var _q=_l;_q<=_m;_q++ ){_p.push(_q);}this._doMultiSelect(_p,true);this._changeIndex(_n);}}return true;}return _j;};_pListBox.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onslideend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onflingstart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onflingend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.readonly){return false;}if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pListBox.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pListBox.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!this._selectinfo){return false;}this._selectinfo.obj=null;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;var _h=this._selectinfo;_h.index=_e;_h.text=_f;_h.value=_g;if(this.onitemchanged&&this.onitemchanged._has_handlers){var _i=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);var _j=this.onitemchanged._fireEvent(this,_i);return nexacro._toBoolean(_j);}return false;};_pListBox.on_fire_onitemdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.readonly){return false;}if(this.onitemdblclick&&this.onitemdblclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemdblclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemdblclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pListBox.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pListBox.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;var _e=this._getContentsItem();if(_e&&_e.length>0){var _f=null;if(_a>0){this._overeditemindex++ ;}else{this._overeditemindex-- ;}_f=this._getItemByRealIdx(_e,this._overeditemindex).obj;if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pListBox.on_keydown_basic_action=function(){};_pListBox.on_keydown_default_action=function(_a,_b,_c,_d,_e){if(this.readonly){return;}var _f=this._getInnerdatasetInfo("_rowcount");if(!_f){return;}this._shiftKey=_d;this._ctrlKey=_c;this._altKey=_b;if(!this._shiftKey){this._shift_select_base_index=this.index;}var _g;var _h=this._select_multi;this._last_keydown_keycode=_a;if(_a==nexacro.Event.KEY_UP){if(_c){this._do_scroll("up");return true;}if(!nexacro._enableaccessibility){if(this.multiselect){this._select_withkeyupevent(_d);_g=_h.items[_h.length-1];if(_g!=null){if(_g> -1){if(this._last_focused){this._do_defocus(this._last_focused);}this._changeIndex(_g);}}}else{_g= +this.index-1;if(_g<0){_g=_f-1;}else if(_g>=_f){_g=0;}if(_g> -1){if(this._changeIndex(_g)){if(this._last_focused){this._do_defocus(this._last_focused);}this.on_apply_index(_g);}}}}}else if(_a==nexacro.Event.KEY_DOWN){if(_c){this._do_scroll("down");return true;}if(!nexacro._enableaccessibility){if(this.multiselect){this._select_withkeydownevent(_d);_g=_h.items[_h.length-1];if(_g!=null){if(_g<_f){this._changeIndex(_g);}}}else{_g= +this.index+1;if(_g<0){_g=_f-1;}else if(_g>=_f){_g=0;}if(_g<_f){if(this._changeIndex(_g)){this.on_apply_index(_g);}}}}}else if(_a===nexacro.Event.KEY_SPACE){if(this.multiselect){var _i=this._getItem(this._select_multi.lastselected);var _j=false;this._sellist=this._select_multi.items;var _k=this._sellist.length;var _l,_m;for(var _n=0;_n<_k;_n++ ){_m=this._sellist[_n];if(this._select_multi.lastselected==_m){_j=true;_i=this._getItem(_m);_l=_m;}}if(_j!==true){if(_i){_i.set_selected(true);}this._select_add(this._select_multi.lastselected);}else{this._do_deselect(_l,true);}}else{_g=this._accessibility_index;if(_g> -1){if(this._changeIndex(_g)){if(this._last_focused){this._do_defocus(this._last_focused);}this.on_apply_index(_g);}}}}};_pListBox._redrawListBoxContents=function(_a){this._redrawListBoxContentsBefore();var _b=this._getInnerdatasetInfo("_rowcount");if(_b){var _c=this._getItemHeight();var _d=this._getClientHeight();var _e=_c?_d/_c:0;if(nexacro._enableaccessibility&&(nexacro._isMobile&&nexacro._isMobile())){_e=_b;}this._page_rowcount=Math.ceil(_e);this._page_rowcount_min=Math.floor(_e);var _f=0;var _g=0;if(_a){_g=_b-1;if(_g>=this._page_rowcount){_g=this._page_rowcount>0?this._page_rowcount-1:0;}}else{_f=this._get_first_visible_row();_g=this._get_last_visible_row(true);}this._recalcContentsMaxSize();this._createListBoxContents(_f,_g);if(this.value!==undefined){this.on_apply_value(this.value);}else if(this.index> -1){this.on_apply_index(this.index);}}this._redrawListBoxContentsAfter();};_pListBox._redrawListBoxContentsBefore=function(){this._destroyListBoxContents();};_pListBox._redrawListBoxContentsAfter=function(){if(this._status=="focused"){var _a=this._getItem(this._accessibility_index);if(_a){_a._on_focus(true);}}};_pListBox._createListBoxContents=function(_a,_b,_c){var _d=this._isRange(_a,_b);var _e=this._getInnerdatasetInfo("_rowcount");var _f=this._page_rowcount;var _g=this._buffer_pages;var _h,_i;var _j,_k;var _l,_m;var _n=_e-1;if(_c){switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f-1)){_m=1;}else{_m=2;}for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:do{_h=_g[0];_j=_h[0];if(_j.index<_f){_i=0;_f=_j.index;}else{_i=_j.index-_f;}this._insertListBoxBufferPage(0,_f,_i);}while(_i>_a)break;case 2:_h=_g[_g.length-1];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);break;}}else{switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f-1)){_m=1;}else{_m=2;}this._clearListBoxBufferPage();for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:_h=_g[0];_j=_h[0];_i=_a-_f+1;if(_i<0){_i=0;_f=_j.index;}if(_g.length==2){this._removeListBoxBufferPage(this._buffer_pages.length-1);this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}else if(_g.length==1){this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}break;case 2:if(_g.length==2){this._removeListBoxBufferPage(0);_h=_g[0];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);}break;case 3:this._resetListBoxBufferPage(_a,_b);break;}}};_pListBox._destroyListBoxContents=function(){this._clearListBoxBufferPage();this._contents_maxwidth=0;this._contents_maxheight=0;};_pListBox._createListItemControl=function(_a){var _b=this._getInnerdatasetInfo("_rows",_a);if(_b){var _c=this._getItemHeight();var _d=this._getClientWidth();var _e=this._createListItem("item_"+_a,0,_a* _c,Math.max(this._contents_maxwidth,_d),_c,null,null,null,null,null,null,this);_e.set_value(_b.value);_e.set_text(_b.text);_e.set_index(_a);_e.set_selected(false);_e.set_readonly(this.readonly);if(nexacro._enableaccessibility){this._setItemAccessibility(_e);}_e._setEventHandler("onlbuttondown",this._on_item_onlbuttondown,this);_e._setEventHandler("ontouchstart",this._on_item_onlbuttondown,this);_e._setEventHandler("ondblclick",this._on_item_ondblclick,this);_e.createComponent(this._is_created?false:true);if(this.multiselect){var _f=this._select_multi.items;var _g=this._select_multi.length;for(var _h=0;_h<_g;_h++ ){if(_a==_f[_h]){_e.set_selected(true);break;}}}else{if(this.index==_a){_e.set_selected(true);this._set_last_selectfocused(_a);}}return _e;}};_pListBox._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._ListBoxItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pListBox._addListBoxBufferPage=function(_a,_b){var _c,_d;var _e=[];for(_c=0;_c<_a;_c++ ){_d=this._createListItemControl(_b);_e.push(_d);_b++ ;}this._buffer_pages.push(_e);};_pListBox._insertListBoxBufferPage=function(_a,_b,_c){var _d,_e;var _f=[];for(_d=0;_d<_b;_d++ ){_e=this._createListItemControl(_c);_f.push(_e);_c++ ;}this._buffer_pages.splice(_a,0,_f);};_pListBox._adjustListBoxBufferPage=function(_a){var _b=this._buffer_pages[_a];var _c=this._buffer_pages[_a-1];var _d=this._buffer_pages[_a+1];var _e,_f;var _g,_h;var _i;if(_c){_g=_b[0].index;_f=_c[_c.length-1].index;if(_g-1!=_f){_e=_g-this._page_rowcount;this._removeListBoxBufferPage(_a-1);this._insertListBoxBufferPage(_a-1,this._page_rowcount,_e);}}if(_d){_h=_b[_b.length-1].index;_i=_d[0].index;if(_h+1!=_i){this._removeListBoxBufferPage(_a+1);this._insertListBoxBufferPage(_a+1,this._page_rowcount,_h+1);}}};_pListBox._removeListBoxBufferPage=function(_a){if(this._buffer_pages[_a]){var _b=this._buffer_pages.splice(_a,1)[0];for(var _c in _b){if(_b.hasOwnProperty(_c)){if(_b[_c]){_b[_c].destroy();_b[_c]=null;}}}}};_pListBox._clearListBoxBufferPage=function(){var _a,_b;var _c=this._buffer_pages;for(_a in _c){if(_c.hasOwnProperty(_a)){for(_b in _c[_a]){if(_c[_a].hasOwnProperty(_b)){if(_c[_a][_b]){_c[_a][_b].destroy();_c[_a][_b]=null;}}}}_c[_a]=null;}this._buffer_pages=[];};_pListBox._resetListBoxBufferPage=function(_a,_b){var _c;var _d=this._buffer_pages;var _e=_d.length;if(_e>2){var _f;var _g,_h;for(_f=0;_f<_e;_f++ ){_c=_d[_f];if(_c[0].index<=_a&&_c[_c.length-1].index>=_a){_g=_f;}if(_c[0].index<=_b&&_c[_c.length-1].index>=_b){_h=_f;}}if(_g==_h){if(_g==0){_h+=1;}else{if(_h==(_e-1)){_g-=1;}}}while(_e){_e-- ;if(_g!=_e&&_h!=_e){this._removeListBoxBufferPage(_e);}}}};_pListBox._recalcLayout=function(){var _a=this._getItemHeight();var _b=this._getClientWidth();var _c;var _d=this._getContentsItem();var _e=_d.length;for(var _f=0;_f<_e;_f++ ){_c=_d[_f];if(_c){_c.move(0,_c.index* _a,Math.max(this._contents_maxwidth,_b),_a);}}};_pListBox._recalcContentsMaxSize=function(){var _a=this._getClientWidth();var _b=this._getClientHeight();if(_a==0||_b==0){this._contents_maxwidth=0;this._contents_maxheight=0;return;}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=this._getInnerdatasetInfo("_max_width");var _f=this._getInnerdatasetInfo("_max_height");this._scroll_default_value=_f;if(this._contents_maxwidth!=_e||this._contents_maxheight!=(_c* _d)){this._contents_maxwidth=_e;this._contents_maxheight=_c* _d;if(this._is_created){this._onRecalcScrollSize();}}};_pListBox._parseInnerDataset=function(){this._initInnerdatasetInfo();var _a=this._innerdataset;if(_a){var _b=this.codecolumn;var _c=this.datacolumn;var _d=_a.getRowCount();if(_d&&(_b||_c)){_b=_b==""?_c:_b;_c=_c==""?_b:_c;var _e=this._temp_item;var _f=_e?_e._getCurrentStyleInheritValue("font"):null;var _g="";var _h=0;var _i=[0,0];for(var _j=0,_k,_l;_j<_d;_j++ ){_k=_a.getColumn(_j,_c);_l=_a.getColumn(_j,_b);_l=this._convertValueType(_l,true);this._setInnerdatasetInfoRowData({text:_k,value:_l});if(_f){_i=nexacro._getTextSize(_k,_f);}if(_h<_i[0]){_h=_i[0];_g=_k;}}if(_e){_e.set_text(_g);_i=_e._on_getFitSize();_h=_i[0];this._setInnerdatasetInfoMaxSize(_h,_i[1]);}this._setInnerdatasetInfoRowCount(_d);}}};_pListBox._doSelect=function(_a,_b,_c){if(this.readonly){return false;}if(!this.multiselect){this._doSingleSelect(_a,_c);}else{if(typeof _a==="number"){_a=[_a];}this._doMultiSelect(_a,_b,_c);}};_pListBox._doSingleSelect=function(_a,_b){var _c=[false];this._on_select_change(_a,true,"singleselect",_c,_b);if(_c[0]){if(!_b){this._set_last_selectfocused(_a);}}};_pListBox._doMultiSelect=function(_a,_b,_c){var _d=_a[0];var _e=_a.length;var _f=this._select_multi;var _g=_f.length;if(!_b&&_g){var _h=_f.items;var _i=[];var _j=0;var _k=_f.length-1;if(_j<=_k){for(;_j<=_k;_j++ ){_i[_i.length]=_h[_j];}}else{for(;_j>=_k;_j-- ){_i[_i.length]=_h[_j];}}if(this._do_deselect(_i,_c)===false){return;}}var _l=[false];var _m=0,_n;for(;_m<_e;_m++ ){_n=_a[_m];if(_b&&this._is_selected(_n)){continue;}this._on_select_change(_n,true,"multiselect",_l,_c);}this._set_last_selectfocused(_d,_c);};_pListBox._select_withmouseevent=function(_a){var _b=this.multiselect?"multi":"single";switch(_b){case 'multi':var _c=this._select_multi;var _d=_c?_c.length:0;if(this._shiftKey){if(!this._ctrlKey){this._deselect_all(true);}this._select_range(this._shift_select_base_index,_a,this._shiftKey);}else if(this._ctrlKey){var _e=this._getItem(_a);if(_e){_e.set_selected(!_e.selected);}if(_e.selected===false){var _f=this.index;var _g;if(this._select_multi&&this._select_multi.length>0){if(this.index==_a){var _h=this._select_multi.items;_g=_h.indexOf(this.index);if(_g>0){_f=_h[_g-1];}}}for(var _i=0;_i<_d;_i++ ){if(_a===_c.items[_i]){this._select_remove(_a);}}if(this._select_multi&&this._select_multi.length==0){this._changeIndex( -1);}else if(this._select_multi&&this._select_multi.length>0){this._changeIndex(_f);}}else{this._select_add(_a);}this._set_last_selectfocused(_a);}else if(this._is_selected(_a)&&!this._shiftKey&&!this._ctrlKey&&_d>1){this._do_select(_a,false);}else{this._do_select(_a,false);}break;case 'single':this._do_select(_a,false);break;}};_pListBox._select_withkeyupevent=function(_a){var _b=this._select_multi.lastselected==null?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;if(_b>0){var _c=_b-1;if(_a&&_b){if(this._is_selected(_b)&&this._is_selected(_c)){this._do_deselect(_b,true);this._set_last_selectfocused(_c);if(this._isAccessibilityEnable()){var _d=this._getItem(_c);if(_d){_d._setFocus(true);}}}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_c,true);}else{this._do_select(_c,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_c,false);}}};_pListBox._select_withkeydownevent=function(_a){var _b=this._select_multi.lastselected==null?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;var _c=this._getInnerdatasetInfo("_rowcount");if(_b+1<_c){var _d=_b===null?0:_b+1;if(_a&&_b>=0){if(this._shift_select_base_index==_b){this._deselect_all(true);this._do_select(this._shift_select_base_index,true);}if(this._is_selected(_b)&&this._is_selected(_d)){this._do_deselect(_b,true);this._set_last_selectfocused(_d);}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_d,true);}else{this._do_select(_d,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_d,false);}}};_pListBox._do_scroll=function(_a){var _b=this._get_first_visible_row();var _c=this._getItemHeight();var _d=this.vscrollbar;var _e=this._vscroll_pos;if(_d){var _f=_b;if(_a=="down"){_f+=1;}else{if(_e<=_f* _c){_f-=1;}}if(_f> -1){this._scrollTo(null,_f* _c);}}};_pListBox._select_add=function(_a,_b){if(_a<0||_a>this._innerdataset.getRowCount()-1){return;}var _c=_a+"";var _d=this._select_multi;var _e=_d.map[_c];if(typeof _e!='undefined'){return this._select_replace(_c,_a);}_d.map[_c]=_a;_d.length++ ;_d.items.push(_a);_d.keys.push(_c);this._changeIndex(_a,undefined,_b);};_pListBox._select_replace=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;_d.items[_c]=_b;_d.map[_a]=_b;};_pListBox._select_indexOfkey=function(_a){_a+="";return nexacro._indexOf(this._select_multi.keys,_a);};_pListBox._select_remove=function(_a){var _b=this._select_indexOfkey(_a);var _c=this._select_multi;if(_b<_c.length&&_b>=0){_c.length-- ;_c.items.splice(_b,1);var _d=_c.keys[_b];if(typeof _d!='undefined'){_c.map[_d]=undefined;}_c.keys.splice(_b,1);if(!this.multiselect&&_c.length==0){this.index= -1;this.text="";if(!this._do_not_change_value){this.value=undefined;}}return _a;}return false;};_pListBox._select_indexOf=function(_a){if(!this.multiselect){return this._selectinfo?this._selectinfo.index==_a: -1;}else{return nexacro._indexOf(this._select_multi.items,_a);}};_pListBox._select_clear=function(){var _a=this._getContentsItem();var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].set_selected(false);}this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};};_pListBox._select_range=function(_a,_b,_c,_d){if(!_c){this._deselect_all(true);}var _e;var _f=[];var _g=_b;if(!nexacro._isNumber(_a)){_a=0;}if(!nexacro._isNumber(_b)){_b=this._getInnerdatasetInfo("_rowcount");}if(_a>_b){for(_e=_a;_b<=_e;_e-- ){_f.push(_e);}}else{for(_e=_a;_e<=_b;_e++ ){_f.push(_e);}}this._doMultiSelect(_f,true,true);this._changeIndex(_g);};_pListBox._deselect_all=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");for(var _c=0;_c<_b;_c++ ){this._do_deselect(_c,_a);}};_pListBox._do_select=function(_a,_b,_c){if(this.readonly){return false;}if(typeof _a==="number"){_a=[_a];}if(!this.multiselect&&_a){var _d=_a.length?_a[0]:_a;this._doSingleSelect(_d,_c);}else{this._doMultiSelect(_a,_b,_c);}};_pListBox._do_deselect=function(_a,_b){if(nexacro._isNumber(_a)){_a=[_a];}else if(!nexacro._isArray(_a)){_a=[_a];}var _c=_a.length;var _d,_e=0,_f=0;var _g=[0];for(;_e<_c;_e++ ){_d=_a[_e];if(this._is_selected(_d)){ ++_f;this._on_select_change(_d,false,"deselect",_g,_b);}}return _g[0]===_f;};_pListBox._select_commit=function(_a,_b,_c,_d){var _e=this._select_multi;var _f=_e.length;switch(_a){case "deselect": ++(_c[0]);this._select_remove(_b);break;case "singleselect":var _g=_e.lastselected;this._select_add(_b);if(_g!=_b&&_f>0&&this._do_deselect(_g)===false){return false;}_c[0]=true;break;case "multiselect":this._select_add(_b,_d);_c[0]=true;break;}};_pListBox._set_last_selectfocused=function(_a,_b){var _c=this._select_multi.lastselected;this._select_multi.lastselected=_a;if(_a!==_c){this._on_last_selectfocuschanged(_a,_b);}};_pListBox._on_select_change=function(_a,_b,_c,_d,_e){if(this._select_commit(_c,_a,_d,_e)!==false){var _f=this._getItem(_a);if(_f){if(_b){_f.set_selected(true);}else{_f.set_selected(false);}if(nexacro._enableaccessibility){_f._setAccessibilityInfoIndex(_a+1);_f._setAccessibilityInfoCount(this._getInnerdatasetInfo("_rowcount"));}}}};_pListBox._on_last_selectfocuschanged=function(_a,_b){if(_a> -1){var _c=this.getElement();if(_c){var _d=this._get_first_visible_row();var _e=this._get_last_visible_row(true);var _f=this.vscrollbar;if(_f){var _g=_f.pos;if(_a<=_d){_g=_a* this._getItemHeight();}else if(_a>=_e){_g=(_a+1)* this._getItemHeight()-_c.client_height;}if(_f.pos!=_g){_f.set_pos(_g);}}else{var _h=this._getItem(_a);if(_h){var _i=_h.getElement();if(_i){_i.setElementFocus();}}}}}};_pListBox._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,true);}};_pListBox._changeIndex=function(_a,_b,_c){if(this.index!=_a&&!_c){var _d=this._innerdataset;var _e=parseInt(_a,10)|0;var _f=this.index;var _g=this.text;var _h=this.value;var _i=(this.codecolumn||this.datacolumn);if(_d&&_i){var _j=_d.getColumn(_e,this.datacolumn||this.codecolumn);var _k=_d.getColumn(_e,this.codecolumn||this.datacolumn);_k=this._convertValueType(_k,true);var _l=_j==undefined?"":_j;var _m=_k;if(_b==undefined){_b=this._change_by_script;}if(_b!=true){if(this.on_fire_canitemchange(this,_f,_g,_h,_e,_l,_m)!=false){this._accessibility_index=this.index=_e;this.text=_l;if(!this._is_value_setting){this.value=_m;}this.applyto_bindSource("value",_k);this.on_fire_onitemchanged(this,_f,_g,_h,_e,_l,_m);return true;}}else{this._accessibility_index=this.index=_e;this.text=_l;if(!this._is_value_setting){this.value=_m;}this.applyto_bindSource("value",_k);return true;}}}return false;};_pListBox._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pListBox._setValue=function(_a){if(_a===null){_a="";}this.value=(_a===undefined)?_a:_a.toString();};_pListBox._setIndex=function(_a){this.index=_a;};_pListBox._setText=function(_a){this.text=_a;};_pListBox._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pListBox._setItemAccessibility=function(_a){var _b;if(nexacro._Browser=="Runtime"){_b=this._getAccessibilityRole();}else{_b=this.itemaccessibilityrole;}if(_b){_a.set_accessibilityrole(_b);}var _c=this.itemaccessibilityenable;if(_c!==undefined){_a.set_accessibilityenable(_c);}var _d=this.itemaccessibilitylabel;if(_d!==undefined){_a.set_accessibilitylabel(_d);}var _e=this.itemaccessibilitydescription;if(_e){_a.set_accessibilitydescription(_e);}var _f=this.itemaccessibilityaction;if(_f){_a.set_accessibilityaction(_f);}var _g=this.itemaccessibilitydesclevel;if(_g){_a.set_accessibilitydesclevel(_g);}};_pListBox._getItem=function(_a){var _b=this._buffer_pages;var _c,_d;var _e,_f;for(_e in _b){_c=_b[_e];for(_f in _c){_d=_c[_f];if(_d&&(_d.index==_a)){return _d;}}}return null;};_pListBox._getItemHeight=function(){var _a=this.itemheight;if(_a!==undefined){return _a;}var _b=this._temp_item;if(_b){return _b._on_getFitSize()[1];}return 0;};_pListBox._getContentsItem=function(){var _a=[];var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]&&_b.hasOwnProperty(_c)){_a=_a.concat(_b[_c]);}}return _a;};_pListBox._getContentsCount=function(){var _a=0;var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]){_a+=_b[_c].length;}}return _a;};_pListBox._isRange=function(_a,_b){var _c=0;var _d,_e;var _f=this._buffer_pages;for(var _g in _f){_d=_f[_g];for(var _h in _d){_e=_d[_h];if(_e){if(_e.index==_b){_c+=1;}if(_e.index==_a){_c+=2;}}}}return _c;};_pListBox._get_first_visible_row=function(){var _a=this._getItemHeight();var _b=(this.vscrollbar)?this.vscrollbar.pos:0;return _a?Math.floor(_b/_a):0;};_pListBox._get_last_visible_row=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=_a?this._page_rowcount-1:this._page_rowcount_min-1;var _d=this._get_first_visible_row()+_c;var _e=_b-1;if(_d>=_e){_d=_e;}return _d;};_pListBox._get_page_from_rowidx=function(_a){var _b=this._page_rowcount;return _b?Math.floor(_a/this._page_rowcount)+1:1;};_pListBox._refreshScroll=function(_a,_b){var _c=this.getElement();if(_c){var _d=_c.scroll_top==undefined?0:_c.scroll_top;var _e,_f,_g;var _h=this._getItemHeight();var _i=this._getInnerdatasetInfo("_rowcount");if(_a>=_i){return;}_f=(_a<0?0:_a)* _h;_g=_f+_h;if((_g>this._getClientHeight()+_d)&&_b===0){_e=_d+_h;}else if(_f<_d){_e=_f;}if(this.vscrollbar&&_e>=0){this.vscrollbar.set_pos(_e);}}};_pListBox._getNextAccessibilityOrderIndex=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=this._accessibility_index+_a;if(_c<0||_c>=_b){_c= -1;}return _c;};_pListBox._is_selected=function(_a){return this._select_indexOf(_a)!== -1;};_pListBox._initInnerdatasetInfo=function(){this._innerdataset_info={_rowcount:0,_rows:[],_max_width:0,_max_height:0};};_pListBox._getInnerdatasetInfo=function(_a){if(this._innerdataset_info&&this._innerdataset_info[_a]){if(_a=="_rows"){if(arguments.length==2){return this._innerdataset_info["_rows"][arguments[1]];}}else{return this._innerdataset_info[_a];}}return null;};_pListBox._setInnerdatasetInfoRowCount=function(_a){this._innerdataset_info._rowcount=_a;};_pListBox._setInnerdatasetInfoRowData=function(_a){this._innerdataset_info._rows.push(_a);};_pListBox._setInnerdatasetInfoMaxSize=function(_a,_b){this._innerdataset_info._max_width=_a;this._innerdataset_info._max_height=_b;};nexacro._ListBoxItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pListBoxItemControl=nexacro._createPrototype(nexacro.Static,nexacro._ListBoxItemControl);nexacro._ListBoxItemControl.prototype=_pListBoxItemControl;_pListBoxItemControl._type_name="ListBoxItemControl";_pListBoxItemControl.index="";_pListBoxItemControl.value=undefined;_pListBoxItemControl.selected=false;_pListBoxItemControl.wordWrap="none";_pListBoxItemControl._is_subcontrol=true;_pListBoxItemControl._use_selected_status=true;_pListBoxItemControl._use_readonly_status=true;_pListBoxItemControl.accessibilityrole="listboxitem";_pListBoxItemControl._event_list={"onclick":1,"ondblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pListBoxItemControl.on_getIDCSSSelector=function(){return "listboxitem";};_pListBoxItemControl._apply_setfocus=function(_a){if(!this.parent._is_subcontrol&&this.parent._status=="focused"){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pListBoxItemControl.on_get_accessibility_label=function(){return this.text?this.text:"";};_pListBoxItemControl._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pListBoxItemControl._getAccessibilityLabel=function(){var _a=this.parent._is_first_focus;var _b="";if(_a&&this._isAccessibilityEnable()){var _c=this.parent;var _d=_c.accessibility;_b=_c._getAccessibilityParentValue(_d);}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this);return _b;};_pListBoxItemControl._getAccessibilityRole=function(){var _a="";if(this._isAccessibilityEnable()){var _b=this.parent;if(_b._is_first_focus){return _b._getAccessibilityRole();}else{_a=nexacro.Component.prototype._getAccessibilityRole.call(this);}}return _a;};_pListBoxItemControl._setAccessibilityStatFocus=function(_a){var _b=this.parent;if(!_b._is_subcontrol){if(_b.multiselect&&_b._shift_select_base_index&&_b._shift_select_base_index!=this.index){var _c=_b._getItem(_b._shift_select_base_index);if(_c&&_c._status=="selected"){var _d=_c._getAccessibilityLabel();_d+=" "+this._getAccessibilityLabel();this._setAccessibilityLabel(_d);}}if(!_a){var _e=_b._last_keydown_keycode;switch(_e){case nexacro.Event.KEY_DOWN:_a="downkey";break;case nexacro.Event.KEY_UP:_a="upkey";break;case nexacro.Event.KEY_TAB:_a="tabkey";break;case nexacro.Event.KEY_SHIFT:_a="shiftkey";break;}}return nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);}};_pListBoxItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}var _g=this._getCurrentStyleInheritValue("font");var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j=nexacro._getTextSize(_f?_f:"<가",_g,false,undefined,"none",_h,_i);_b+=Math.ceil(this.textwidth!=null?this.textwidth:_j[0]);_c+=Math.ceil(_j[1]);return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pListBoxItemControl.on_tap_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;var _h=this._getWindow().findComponent(_a);var _i=_g._selectinfo_list;while(_i.length){var _j=_i[0].obj;if(_j){var _k;if(this._contains(_h)){if(_a){var _l=_g._getCurrentStyleBorder();var _m=_l?_l._getBorderLeftWidth():0;var _n=_l?_l._getBorderTopWidth():0;_b=_b-((_a.scroll_left?_a.scroll_left:0)-_m);_c=_c-((_a.scroll_top?_a.scroll_top:0)-_n);if(_b<0){_b=_m;}if(_c<0){_c=_n;}}var _o=_g._getClientXY(_b,_c);_g.on_fire_onitemclick(_g,_h.index,_h.text,_h.value,undefined,_g._altKey,_g._ctrlKey,_g._shiftKey,_d,_e,_b,_c,_o[0],_o[1]);_k=_j;var _p=_k.index;if(_g.multiselect){if(_g._shiftKey===true||_g._ctrlKey===true){_g._select_withmouseevent(_p);}else{_g._do_select(_p,false);}}else{if(_g._changeIndex(_p)){_g.on_apply_index(_p);}else{if(!_j.selected){_j._changeUserStatus("selected",false);}}}}else{if(!_j.selected){_j._changeUserStatus("selected",false);}}}_i.shift();}};_pListBoxItemControl.set_index=function(_a){if(_a!==this.index){this.index=parseInt(_a,10);}};_pListBoxItemControl.set_value=function(_a){if(_a!==this.value){this.value=_a;}};_pListBoxItemControl.set_selected=function(_a){if(_a!=this.selected){this.selected=_a;this.on_apply_selected();}};_pListBoxItemControl.on_apply_selected=function(){var _a=this.parent._statusmap?this.parent._statusmap['focused']:false;if(this.selected){this._changeUserStatus("selected",true);if(_a){this._changeStatus("focused",true);}}else{if(this._status=="focused"){this._changeStatus("focused",false);}this._changeUserStatus("selected",false);}};_pListBoxItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly(_a);}};_pListBoxItemControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);};_pListBoxItemControl.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return false;};delete _pListBoxItemControl;}if(!nexacro.Combo){nexacro.ComboCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.preindex=_c;this.postindex=_f;this.pretext=_d;this.posttext=_g;this.prevalue=_e;this.postvalue=_h;this.isselect=_i;};var _pComboCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ComboCloseUpEventInfo);nexacro.ComboCloseUpEventInfo.prototype=_pComboCloseUpEventInfo;_pComboCloseUpEventInfo._type_name="ComboCloseUpEventInfo";delete _pComboCloseUpEventInfo;nexacro.Combo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;};var _pCombo=nexacro._createPrototype(nexacro.Component,nexacro.Combo);nexacro.Combo.prototype=_pCombo;_pCombo._type_name="Combo";_pCombo.comboedit=null;_pCombo.dropbutton=null;_pCombo.combolist=null;_pCombo._popupcontrol=null;_pCombo.value=undefined;_pCombo.index= -1;_pCombo.text="";_pCombo.codecolumn="";_pCombo.datacolumn="";_pCombo.innerdataset="";_pCombo.autoselect=false;_pCombo.autoskip=false;_pCombo.usesoftkeyboard=true;_pCombo.displaynulltext="";_pCombo.imemode="none";_pCombo.readonly=false;_pCombo.usecontextmenu=true;_pCombo.displayrowcount=undefined;_pCombo.buttonsize=undefined;_pCombo.itemheight=undefined;_pCombo.type="dropdown";_pCombo.popuptype="normal";_pCombo.popupsize=undefined;_pCombo.acceptvaluetype="allowinvalid";_pCombo._is_close_popup_by_select=false;_pCombo._isFiredOnInput=false;_pCombo._innerdataset="";_pCombo._filtereddataset="";_pCombo._default_value=undefined;_pCombo._default_text="";_pCombo._default_index= -1;_pCombo._has_inputElement=true;_pCombo._processing_keyfilter=false;_pCombo._use_readonly_status=true;_pCombo._is_editable_control=true;_pCombo._event_list={"oneditclick":1,"onitemclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"ondropdown":1,"oncloseup":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pCombo.accessibilityrole="combobox";_pCombo.on_create_contents=function(){var _a=this.getElement();if(_a){this.comboedit=new nexacro._ComboEditControl("comboedit",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);this.dropbutton=new nexacro._ComboButtonControl("dropbutton",0,0,0,0,null,null,null,null,null,null,this);this.comboedit.createComponent();this.dropbutton.createComponent();}};_pCombo.on_created_contents=function(_a){if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset(this._innerdataset);}this.on_apply_autoskip(this.autoskip);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_imemode(this.imemode);this.on_apply_autoselect(this.autoselect);this.on_apply_usecontextmenu(this.usecontextmenu);if(!this._onlydisplay){var _b=(this.value==undefined&&this.index== -1);if(_b){this.on_apply_value(this.value);}else{if(this.index> -1){this.on_apply_index(this.index);}else if(this.value!==undefined){this.on_apply_value(this.value);}else if(this.text!==""){this.on_apply_text(this.text);}}}this.redraw();this._recalcLayout();this._setDefaultProps(this.index,this.value,this.text);this._setEventHandlerToComboEdit();this._setEventHandlerToDropButton();this.comboedit.on_created(_a);this.dropbutton.on_created(_a);if(this.type=="dropdown"){this.comboedit._setReadonlyView(true);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatAutoComplete("list");if(!nexacro._isDesktop()){this.comboedit._setAccessibilityStatHidden(true);this.dropbutton._setAccessibilityStatHidden(true);}if(this.type=="dropdown"&&!this.readonly){if(this.comboedit){this.comboedit._setAccessibilityReadOnly(false);}}}if(this.comboedit){this.comboedit.set_usesoftkeyboard(this.usesoftkeyboard,true);}this.on_apply_type(this.type);};_pCombo.on_destroy_contents=function(){if(this.comboedit){this.comboedit.destroy();this.comboedit=null;}if(this.dropbutton){this.dropbutton.destroy();this.dropbutton=null;}if(this.combolist){this.combolist.destroy();this.combolist=null;}if(this._popupcontrol){this._popupcontrol.destroy();this._popupcontrol=null;}this._removeEventHandlerToInnerDataset();};_pCombo._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}if(this._filtereddataset){this._filtereddataset.destroy();this._filtereddataset=null;}};_pCombo.on_create_contents_command=function(){this.on_apply_autoskip(this.autoskip);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_imemode(this.imemode);this.on_apply_autoselect(this.autoselect);this.on_apply_usecontextmenu(this.usecontextmenu);var _a=(this.value==undefined&&this.index== -1);if(_a){this.on_apply_value(this.value);}else{if(this.index> -1){this.on_apply_index(this.index);}else if(this.value!==undefined){this.on_apply_value(this.value);}else if(this.text!==""){this.on_apply_text(this.text);}}this.redraw();this._recalcLayout();this._setEventHandlerToComboEdit();this._setEventHandlerToDropButton();var _b="";if(this.comboedit){_b+=this.comboedit.createCommand();}if(this.dropbutton){_b+=this.dropbutton.createCommand();}return _b;};_pCombo.on_attach_contents_handle=function(_a){if(this.comboedit){this.comboedit.attachHandle(_a);if(nexacro._enableaccessibility&&!nexacro._isDesktop()){this.comboedit._setAccessibilityStatHidden(true);}if(this.type=="dropdown"){this.comboedit._setReadonlyView(true);}}if(this.dropbutton){this.dropbutton.attachHandle(_a);this.dropbutton._setAccessibilityStatHidden(true);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatAutoComplete("list");if(this.type=="dropdown"&&!this.readonly){if(this.comboedit){this.comboedit._setAccessibilityReadOnly(false);}}}this._setDefaultProps(this.index,this.value,this.text);this.on_apply_type(this.type);};_pCombo.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pCombo.on_change_containerPos=function(_a,_b){this._recalcLayout();};_pCombo._apply_setfocus=function(_a){var _b=this.comboedit;if(_b){_b._changeStatus("focused",true);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){if(this.type=="dropdown"){var _c=this.getElement();if(_c){_c.setElementFocus(true);}else{_b._on_focus(true,_a);}}else{_b._on_focus(true,_a);}}else{_b._on_focus(true,_a);}}};_pCombo.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this.comboedit){this.comboedit._setEnable(_a);}if(this.dropbutton&&!this._isReadOnly()){this.dropbutton._setEnable(_a);}if(this.combolist){this.combolist._setEnable(_a);}};_pCombo.on_apply_prop_cssclass=function(){if(this.comboedit){this.comboedit.on_apply_cssclass();}if(this.dropbutton){this.dropbutton.on_apply_cssclass();}if(this.combolist){this.combolist.on_apply_cssclass();}};_pCombo.on_init_bindSource=function(_a,_b,_c){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}this._setValue(undefined);this._setIndex( -1);this._setText("");this.redraw();};_pCombo.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}var _e= -1;var _f="";var _g=_b.getColumn(_c,_d);_g=this._convertValueType(_g,true);if(this.value==_g){return;}this._setValue(_g);_b=this._selectDataset();if(_b){_e=this._getIndexFromValue(_b,_g);if(_e> -1){_f=this._getItemText(_e);}this._setIndex(_e);this._setText(_f);}this.redraw();this._setDefaultProps(this.index,this.value,this.text);}};_pCombo.on_getBindableProperties=function(){return "value";};_pCombo._getDragData=function(){var _a=this.comboedit;if(_a){return _a.getSelectedText();}};_pCombo._getDlgCode=function(_a,_b,_c,_d){if((_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN)&&(_c||_b)){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:true};}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:this._want_arrows};};_pCombo.on_get_accessibility_label=function(){return "";};_pCombo._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this.comboedit._input_element&&this._status!="focus"){if(!this.comboedit._input_element._wantAccessibilityAdditionalLabel||!this.comboedit._input_element._wantAccessibilityAdditionalLabel()){_b=this.text+" "+_b;}}return _b;};_pCombo.set_text=function(_a){_a=nexacro._toString(_a);if(this.text!=_a){this.text=_a;this.on_apply_text(_a);}};_pCombo.on_apply_text=function(_a){var _b=this.getElement();if(_b){var _c=this.value;var _d=this._selectDataset();if(!_d||(!this.datacolumn&&!this.codecolumn)){if(_c){this._setEditValue(_a);}else{if(this.displaynulltext||_a==""){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{var _e=this._getIndexFromText(_d,_a);this._setIndex(_e);if(_e> -1){this._setValue(this._getItemValue(_e));}else{this._setValue(undefined);this._setText("");}this.redraw();}this._setDefaultProps(this.index,this.value,this.text);}};_pCombo.set_value=function(_a){if(!this._is_created&&(_a===undefined||_a===null||_a==="")){return;}_a=this._convertValueType(_a);if(this.value!==_a){if(this.acceptvaluetype=="ignoreinvalid"){var _b= -1;var _c=this._selectDataset();if(_c){_b=this._getIndexFromValue(_c,_a);if(_b<0){return;}}}if(this.applyto_bindSource("value",_a)){this.value=_a;this.on_apply_value(_a);this.redraw();}}};_pCombo.on_apply_value=function(_a){var _b=this.getElement();if(_b){var _c= -1;var _d="";var _e=this._selectDataset();if(_e){_c=this._getIndexFromValue(_e,_a);if(_c> -1){_d=this._getItemText(_c);}this._setIndex(_c);this._setText(_d);if(nexacro._enableaccessibility){this._updateAccessibilityLabel();}}this._setDefaultProps(this.index,this.value,this.text);}};_pCombo.set_index=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}if(this.index!=_a){this.index=_a;this.on_apply_index(_a);this.redraw();}};_pCombo.on_apply_index=function(_a){var _b=this.getElement();if(_b){var _c;var _d="";var _e=this._innerdataset;if(_e){if(_a!==null&&_a>=0&&_a<_e.getRowCount()){_c=this._getItemValue(_a);_d=this._getItemText(_a);}else{_a= -1;}if(this.applyto_bindSource("value",_c)){this._setValue(_c);this._setText(_d);if(this.index!=_a){this._setIndex( -1);}}else{var _f="restore";var _g=this._getForm();var _h=_g._bind_manager._findBindItem(this,"value");if(_h){var _i=_h._dataset;if(_i.rowcount>0){if(_c==this.value){if(_d==this.text){_f="change";}}}}if(_f=="restore"){this._setIndex(this._default_index);this._setValue(this._default_value);this._setText(this._default_text);}else if(_f=="change"){this._setIndex(_a);this._setValue(_c);this._setText(_d);}}}else{this._setIndex( -1);this._setValue(undefined);this._setText("");}this._setDefaultProps(this.index,this.value,this.text);}};_pCombo.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pCombo.on_apply_displaynulltext=function(_a){var _b=this.comboedit;if(_b){_b.set_displaynulltext(_a);}};_pCombo.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly();}};_pCombo._isReadOnly=function(){return this.readonly;};_pCombo.on_apply_readonly=function(){var _a=this._isReadOnly();this._changeStatus("readonly",_a);var _b=this.comboedit;if(_b){if(!this._onlydisplay){_b.set_readonly(_a);}else{_b._changeStatus("readonly",_a);}if(this.type=="dropdown"){_b._setReadonlyView(true);if(nexacro._enableaccessibility){_b._setAccessibilityReadOnly(_a);}}else{if(_a==true){_b._setReadonlyView(true);}else{_b._setReadonlyView(false);}}}var _c=this.dropbutton;if(_c){_c._setEnable(this._isEnable()&&!_a);}var _d=this.combolist;if(_d){_d.set_readonly(_a);}};_pCombo.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this.autoselect!=_a){this.autoselect=_a;this.on_apply_autoselect(_a);}};_pCombo.on_apply_autoselect=function(_a){var _b=this.comboedit;if(_b){if(this.type!="dropdown"){_b.set_autoselect(_a);}else{_b.set_autoselect(false);}}};_pCombo.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this.autoskip!=_a){this.autoskip=_a;this.on_apply_autoskip(_a);}};_pCombo.on_apply_autoskip=function(_a){var _b=this.comboedit;if(_b){_b.set_autoskip(_a);}};_pCombo.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pCombo.on_apply_usesoftkeyboard=function(_a){if(this.comboedit){this.comboedit.set_usesoftkeyboard(this.usesoftkeyboard,_a);}};_pCombo.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)== -1){return;}if(this.imemode!=_a){this.imemode=_a;this.on_apply_imemode(_a);}};_pCombo.on_apply_imemode=function(_a){var _b=this.comboedit;if(_b){_b.set_imemode(_a);}};_pCombo.set_type=function(_a){var _b=["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"];if(_b.indexOf(_a)== -1){return;}if(this.type!=_a){this.type=_a;this.on_apply_type(_a);}};_pCombo.on_apply_type=function(_a){if(this._filtereddataset){this._filtereddataset.filter("");}this.on_apply_readonly();this.on_apply_autoselect(this.autoselect);};_pCombo.set_popuptype=function(_a){var _b=["normal","center","system","none"];if(_b.indexOf(_a)== -1){return;}if(this.popuptype!=_a){this.popuptype=_a;this.on_apply_popuptype(_a);}};_pCombo.on_apply_popuptype=function(_a){var _b=this._popupcontrol;if(_b){_b._setType(_a);}};_pCombo.set_popupsize=function(_a){if(this.popupsize!=_a){this.popupsize=_a;}};_pCombo.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pCombo.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)== -1){return;}this.acceptvaluetype=_a;};_pCombo.on_apply_usecontextmenu=function(_a){var _b=this.comboedit;if(_b){_b.set_usecontextmenu(_a);}};_pCombo.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this.innerdataset!=_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this.innerdataset=_a;}this.on_apply_innerdataset(this._innerdataset);}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset(this._innerdataset);}};_pCombo.on_apply_innerdataset=function(_a){if(this.combolist){this.combolist.setInnerDataset(_a);}if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}if(this.index> -1){this._recheckIndex();}else if(this.value!==undefined){this._recheckValue();}else if(this.text!==""){this._recheckText();}this.redraw();}};_pCombo.set_codecolumn=function(_a){if(this.codecolumn!=_a){this.codecolumn=_a;this.on_apply_codecolumn(_a);}};_pCombo.on_apply_codecolumn=function(_a){if(this.combolist){this.combolist.set_codecolumn(_a);}if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this.index> -1){this._recheckIndex();}else if(this.value!==undefined){this._recheckValue();}else if(this.text!==""){this._recheckText();}this._setDefaultProps(this.index,this.value,this.text);this.redraw();}};_pCombo.set_datacolumn=function(_a){if(this.datacolumn!=_a){this.datacolumn=_a;this.on_apply_datacolumn(_a);}};_pCombo.on_apply_datacolumn=function(_a){var _b=this.combolist;if(_b){_b.set_datacolumn(this.datacolumn);}if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this.index> -1){this._recheckIndex();}else if(this.value!==undefined){this._recheckValue();}else if(this.text!==""){this._recheckText();}this._setDefaultProps(this.index,this.value,this.text);this.redraw();}};_pCombo.set_buttonsize=function(_a){if(this.buttonsize!=_a){this.buttonsize=_a;this.on_apply_buttonsize(_a);}};_pCombo.on_apply_buttonsize=function(_a){this._recalcLayout();};_pCombo.set_displayrowcount=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this.displayrowcount!=_a){this.displayrowcount=_a;}};_pCombo.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.itemheight!=_a){this.itemheight=_a;this.on_apply_itemheight(_a);}};_pCombo.on_apply_itemheight=function(_a){var _b=this.combolist;if(_b){_b.set_itemheight(_a);}};_pCombo.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this.visible&&this._isPopupVisible()){this._closePopup();}};_pCombo.set_scrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbarbarminsize!=_a){this.scrollbarbarminsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbarbarminsize(_a);}}};_pCombo.set_scrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbardecbuttonsize!=_a){this.scrollbardecbuttonsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbardecbuttonsize(_a);}}};_pCombo.set_scrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbarbaroutsize!=_a){this.scrollbarbaroutsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbarbaroutsize(_a);}}};_pCombo.set_scrollbarincbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbarincbuttonsize!=_a){this.scrollbarincbuttonsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbarincbuttonsize(_a);}}};_pCombo.set_scrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbarsize!=_a){this.scrollbarsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbarsize(_a);}}};_pCombo.set_scrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.scrollbartrackbarsize!=_a){this.scrollbartrackbarsize=_a;var _b=this.combolist;if(_b){_b.set_scrollbartrackbarsize(_a);}}};_pCombo.dropdown=function(){var _a;if(!this.enable||this.readonly||!this.visible){return false;}var _b=this.comboedit;var _c=_b?_b._input_element:null;if(_c&&_c._is_accept_touch&&!_c._is_accept_touch()){return false;}if(!this.isDropdown()){_a=this._selectDataset(true);if((this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike")&&_a.rowcount==0){_a=this._innerdataset;}}else{return false;}var _d=this._find_lastFocused();if(_d instanceof nexacro.Div){_d=_d._getLastFocused();}if(_d!=this){this.setFocus(false);}this._showPopup(_a,this.index,1);};_pCombo.isDropdown=function(){return this._isPopupVisible();};_pCombo.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this.comboedit;if(_a){return _a.getCaretPos();}return  -1;};_pCombo.getSelect=function(){if(this.getElement()&&this.comboedit){return this.comboedit.getSelect();}return [this.getCaretPos(),this.getCaretPos()];};_pCombo.setSelect=function(_a,_b){var _c=this.comboedit;if(_c){return this.comboedit.setSelect(_a,_b);}return false;};_pCombo.getSelectedText=function(){if(this.getElement()&&this.comboedit){return this.comboedit.getSelectedText();}return "";};_pCombo.setSelectedText=function(_a){if(this.getElement()&&this.comboedit&&this.type!="dropdown"){return this.comboedit.setSelectedText(_a);}};_pCombo.getInnerDataset=function(){return this._innerdataset;};_pCombo.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset(null);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset(_a);if(this._is_created){this._recheckIndex();this.redraw();}}};_pCombo.getCount=function(){if(this.getElement()){if(this.combolist){return this.combolist.getCount();}else if(this._innerdataset){return this._innerdataset.getRowCount();}}return 0;};_pCombo.redraw=function(){if(this.text||!nexacro._isNull(this.value)){if(this._onlydisplay){if(this.index<0&&this.text==""){this._setEditValue(undefined);}else{this._setEditValue(this.text);}}else{this._setEditValue(this.text);}}else{this._setEditValue(undefined);}this._setDefaultCaret();};_pCombo.updateToDataset=function(){return this.applyto_bindSource("value",this.value);};_pCombo._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);var _a=this.comboedit;if(_a){nexacro.Edit.prototype._on_activate.call(_a);}};_pCombo._on_dropdown=function(){if(this.readonly){return;}var _a=this.comboedit;var _b=_a?_a._input_element:null;if(_b&&_b._is_accept_touch&&!_b._is_accept_touch()){return false;}var _c=this._selectDataset(true);var _d=this.index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this.index));}else{var _a=this.comboedit;if(_a){_a.setSelect(0,0);}if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._clearFilteredDataset();}this._showPopup(_c,_d,1);}};_pCombo._on_value_change=function(_a,_b,_c,_d,_e,_f){if(!this.on_fire_canitemchange(this,_a,_b,_c,_d,_e,_f)){return false;}var _g=this._selectDataset();var _h=_g?this._getIndexFromValue(_g,_f):this.index;var _i=this.applyto_bindSource("value",_f);if(_i){var _j=_g?this._getIndexFromValue(_g,_f):this.index;if(_h==_j){this.value=_f;this.text=_e;this.index=_d;}}else{if(_c==_f){if(_a!=_d){this.value=_f;this.text=_e;this.index=_d;}}else{return false;}}if(nexacro._enableaccessibility){this._updateAccessibilityLabel();}this.on_fire_onitemchanged(this,_a,_b,_c,_d,_e,_f);return true;};_pCombo._on_dataset_onvaluechanged=function(_a,_b){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();this.redraw();if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pCombo._on_dataset_onrowsetchanged=function(_a,_b){if(_b.reason==nexacro.NormalDataset.REASON_FILTER){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();this.redraw();return;}else if(_b.reason==nexacro.NormalDataset.REASON_ASSIGN){this.set_index( -1);this._recheckIndex();this.redraw();}else if(_b.reason==nexacro.NormalDataset.REASON_COPY||_b.reason==nexacro.NormalDataset.REASON_ENABLEEVENT){if(this.index> -1){this._recheckIndex();}else if(this.value!==undefined){this._recheckValue();}else if(this.text!==""){this._recheckText();}this.redraw();this._setDefaultProps(this.index,this.value,this.text);}};_pCombo._on_edit_onlbuttondown=function(_a,_b){if(this.readonly||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){return;}var _c=this.comboedit;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){return false;}var _e=this._selectDataset(true);var _f=this.index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this.index));}else{if(this.type=="dropdown"){this._showPopup(_e,_f,1);}}};_pCombo._on_edit_onkeydown=function(_a,_b){var _c=this.combolist;if(this.readonly){return false;}var _d=this._selectDataset();var _e=this.datacolumn;var _f=this.codecolumn;if(!_d||(!_e&&!_f)){return;}var _g=_b.keycode;var _h=this._default_value;var _i=this._default_text;var _j=this._default_index;var _k=this.value;var _l=this.text;var _m=this.index;var _n;var _o;var _p=null;var _q="";var _r=_d.getRowCount();var _s=nexacro._enableaccessibility;if(this._isPopupVisible()){_p=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus");if(_p){_m=_p.index;}}if(_g==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){_q=this._getItemText(this.index);this._closePopup();this._setEditValue(_q);}}else if(_g==nexacro.Event.KEY_UP){_n=_m-1;if(this._isPopupVisible()){if(!_b.altkey){if(_n<0){_n=0;}_q=_d.getColumn(_n,_e||_f);this._setEditValue(_q);_c._refreshScroll(_n,1);_c._change_status_item_from_key(_m,_n);}}else{if(!_s||_b.ctrlkey){if(_n<0){_n=0;}if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_o=this._getRawIndex(_d,_n);_o=(_o== -1)?_n:_o;this._clearFilteredDataset();_n=_o;}if(this.index!=_n){_k=this._getItemValue(_n);_l=this._getItemText(_n);_m=_n;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){_k=_h;_l=_i;_m=_j;}this._setDefaultProps(_m,_k,_l);this.redraw();}}}}else if(_g==nexacro.Event.KEY_DOWN){_n=_m+1;if(this._isPopupVisible()){if(!_b.altkey){if(_n<_r){_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(_n,0);_c._change_status_item_from_key(_m,_n);}}}else{var _t=this.comboedit;var _u=_t?_t._input_element:null;if(_b.altkey&&(!_u||(_u&&(!_u._is_accept_touch||(_u._is_accept_touch&&_u._is_accept_touch()))))){this._showPopup(_d,_m,1);}else if(!_b.altkey){if(!_s||_b.ctrlkey){if(_n>=_r){_n=_r-1;}if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_o=this._getRawIndex(_d,_n);_o=(_o== -1)?_n:_o;this._clearFilteredDataset();_n=_o;}if(this.index!=_n){_k=this._getItemValue(_n);_l=this._getItemText(_n);_m=_n;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){_k=_h;_l=_i;_m=_j;}this._setDefaultProps(_m,_k,_l);this.redraw();}}}}}else if(_g==nexacro.Event.KEY_ENTER){if(_m>=0){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_o=this._getRawIndex(_d,_m);_o=(_o== -1)?_m:_o;_d.set_filterstr("");}else{_o=_m;}}else{_o=_m;}if(this.index!=_o){_k=this._getItemValue(_o);_l=this._getItemText(_o);_m=_o;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){this._setEditValue(this.text);_k=_h;_l=_i;_m=_j;}}this.redraw();if(this._isPopupVisible()){this._is_close_popup_by_select=true;this._closePopup();this._is_close_popup_by_select=false;if(this.autoskip){this._setFocusToNextComponent();}}this._setDefaultProps(_m,_k,_l);}};_pCombo._on_edit_oninput=function(_a,_b){if(this.readonly||!this._isEnable()){return false;}this._isFiredOnInput=true;this.on_fire_oninput();var _c=this.comboedit;var _d=_c?_c._input_element:null;if(_d&&(_d._is_accept_touch&&!_d._is_accept_touch())){if(this._isPopupVisible()){this._closePopup();}return false;}var _e=this._selectDataset();if(_e&&_c._processing_keyfilter){var _f=this.datacolumn||this.codecolumn;var _g=_c.text;var _h=this.type;if(_h!="dropdown"){if(!this.combolist){this._createPopupListBoxControl(_e);}}switch(_h){case "search":case "caseisearch":var _i;if(this.type=="caseisearch"){_g=new nexacro.ExprParser()._transferWhitespace(_g);_i=_e.findRowExpr(_f+".match(/^"+_g+"/i)");}else{_i=_e.findRowAs(_f,_g);}if(_i>=0){this._showPopup(_e,_i);}else{if(this._isPopupVisible()){this._closePopup();}}break;case "filter":case "filterlike":case "caseifilter":case "caseifilterlike":var _j;var _k="";var _l="";var _m=_g.length;for(var _p=0;_p<_m;_p++ ){_j=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;var _n=_g.charAt(_p);if(_j.test(_n)){_k+="\\";}_k+=_n;}_l=new nexacro.ExprParser()._transferWhitespace(_k);if(this.type=="filter"){_e.set_filterstr(_f+".match(/^("+_l+")/)");}else if(this.type=="filterlike"){_e.set_filterstr(_f+".indexOf('"+_k+"') > -1");}else if(this.type=="caseifilter"){_e.set_filterstr(_f+".match(/^("+_l+")/i)");}else{_e.set_filterstr(_f+".match(/("+_l+")/i)");}if(_g&&_e.getRowCount()>0){this._showPopup(_e,0);var _o=this._getWindow();if(_o){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){nexacro._flushCommand(_o);}}}else{if(this._isPopupVisible()){this._closePopup();}}break;default:break;}}};_pCombo._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pCombo._on_edit_mobile_oneditclick=function(_a,_b){if(!this.readonly){var _c=this.comboedit;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){}else{var _e=this._selectDataset(true);var _f=this.index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this.index));}else{if(this.type=="dropdown"){this._showPopup(_e,_f,1);}}}}this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pCombo._on_drop_onlbuttondown=function(_a,_b){if(_b.button=="lbutton"){this._on_dropdown();}};_pCombo._on_drop_mobile_onclick=function(_a,_b){this._on_dropdown();};_pCombo._on_drop_onclick=function(_a,_b){if(_b.button=="touch"){this._on_dropdown();}};_pCombo._on_list_onitemclick=function(_a,_b){if(!this.combolist||!this.comboedit){return false;}var _c=this.value;var _d=this.text;var _e=this.index;var _f=_b.index;var _g=_b.itemtext;var _h=_b.itemvalue;this.on_fire_onitemclick(_a,_f,_g,_h,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){var _i=this._selectDataset();_f=this._getRawIndex(_i,_b.index);if(_f!=this.index){_g=this._getItemText(_f);_h=this._getItemValue(_f);}}this._is_close_popup_by_select=true;if(_f!=this.index){if(!this._on_value_change(_e,_d,_c,_f,_g,_h)){this.value=_h=_c;this.text=_g=_d;this.index=_f=_e;}this.redraw();if(this._isPopupVisible()){this._closePopup();if(this.autoskip){this._setFocusToNextComponent();}}this._setDefaultProps(_f,_h,_g);}else{this.redraw();if(this._isPopupVisible()){this._closePopup();}}this._is_close_popup_by_select=false;};_pCombo._on_list_oncloseup=function(_a,_b){var _c=this._getWindow();if(_c&&this._track_capture){_c._releaseCaptureLock(this);}if(!this._isFiredOnInput){if(this.displaynulltext!=""&&nexacro._isNull(this.value)){this._setEditValue(undefined);}else{this._setEditValue(this.text);}}this._isFiredOnInput=false;this._changeStatus("mouseover",false);this.comboedit._changeStatus("mouseover",false);this.dropbutton._changeStatus("mouseover",false);this.on_fire_oncloseup(this,this._default_index,this._default_text,this._default_value,this.index,this.text,this.value,this._is_close_popup_by_select);};_pCombo.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}this._apply_setfocus(_b);};_pCombo.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this.comboedit;if(_c){_c._changeStatus("focused",false);if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){_c._is_subfocused=false;}}if(this.text!=this.comboedit.text){_c.setCaretPos(0);}}this.redraw();if(this._isPopupVisible()){this._closePopup();}};_pCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.readonly){return false;}var _p=this._selectDataset();if(!_p){return false;}var _q=this._find_lastFocused();if((!this._is_subcontrol&&this!=_q)||(this._is_subcontrol&&this._getRootComponent(this)!=_q)){return false;}var _r=this._popupcontrol;if(!_r||!_r._is_popup()){var _s=this.index;var _t=0;if(_b>0){if(_s>0){_t=_s-1;}}else{_t=_s+1;}if(this.index!=_t&&_t<_p.getRowCount()){var _u=this.index;var _v=this.text;var _w=this.value;var _x=_t;var _y=this._getItemText(_t);var _z=this._getItemValue(_t);var _aa=this.on_fire_canitemchange(this,_u,_v,_w,_x,_y,_z);if(_aa){this.set_index(_t);this.on_fire_onitemchanged(this,_u,_v,_w,_x,_y,_z);this._setDefaultProps(this.index,this.value,this.text);}}}return true;};_pCombo.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;if(this._isPopupVisible()){var _e=this.combolist;var _f=null;var _g=_e._getContentsCount();if(_g){if(_a){_e._overeditemindex++ ;}else{_e._overeditemindex-- ;}if(_e._overeditemindex<0||_e._overeditemindex>_g-1){if(this._isPopupVisible()){this._closePopup();}_e._overeditemindex= -1;}else{_f=_e._getItem(_e._overeditemindex);}}if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pCombo.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCombo.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCombo.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(_a,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}return true;};_pCombo.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.onitemclick._fireEvent(this,_p);}return false;};_pCombo.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);this.onitemchanged._fireEvent(this,_h);}};_pCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i;if(this.oncloseup&&this.oncloseup._has_handlers){var _j=new nexacro.ComboCloseUpEventInfo(this,"oncloseup",_b,_c,_d,_e,_f,_g,_h);_i=this.oncloseup._fireEvent(this,_j);_i=nexacro._toBoolean(_i);}return _i;};_pCombo.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.EventInfo(this,"ondropdown");return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCombo.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pCombo.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pCombo.on_fire_sys_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.isDropdown()){var _o=this.combolist._selectinfo_list;if(this._scroll_proc){if(_o.length){var _p=_o.length-1;var _q=_o[_p];if(_q.index!=this.index){_q.obj._stat_change("notselect","normal");_o.splice(_p,1);}}return;}while(_o.length){var _r=_o[0].obj;if(_r){if(!_r.selected){_r._stat_change("notselect","normal");}}_o.shift();}}return;};_pCombo._createListBoxControl=function(_a){if(!this._isUsableDataset(_a)){return;}var _b=this.datacolumn;var _c=this.codecolumn;var _d=this.combolist;if(!_d){_d=this.combolist=new nexacro._ComboListControl("combolist",0,0,0,0,null,null,null,null,null,null,this);_d.set_scrolltype("vertical");var _e=this._getVScrollBarType()||"auto";_d.set_scrollbartype("none "+_e);_d.setInnerDataset(_a);_d.set_codecolumn(_c);_d.set_datacolumn(_b);_d.set_index(this.index);_d.set_itemheight(this.itemheight);_d.set_cssclass(this.cssclass);_d.set_scrollbarbarminsize(this.scrollbarbarminsize);_d.set_scrollbardecbuttonsize(this.scrollbardecbuttonsize);_d.set_scrollbarbaroutsize(this.scrollbarbaroutsize);_d.set_scrollbarincbuttonsize(this.scrollbarincbuttonsize);_d.set_scrollbarsize(this.scrollbarsize);_d.set_scrollbartrackbarsize(this.scrollbartrackbarsize);_d._setPopupContains(true);_d.createComponent(true);}else{if(_d._is_created){if(_d._innerdataset!=_a){_d.setInnerDataset(_a);}}}};_pCombo._createdListBoxControl=function(_a){var _b=this.combolist;if(_b&&!_b._is_created){_b._setEventHandler("oncloseup",this._on_list_oncloseup,this);_b._setEventHandler("onitemclick",this._on_list_onitemclick,this);_b.on_created();}};_pCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._ComboPopupControl("combopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this.popuptype);_a.createComponent(true);}};_pCombo._createdPopupControl=function(_a){var _b=this._popupcontrol;if(_b&&!_b._is_created){_b._attach(_a);_b.on_created();}};_pCombo._createPopupListBoxControl=function(_a){if(!this._isUsableDataset(_a)){return;}this._createPopupControl();this._createListBoxControl(_a);this._createdPopupControl(this.combolist);this._createdListBoxControl();};_pCombo._createFilteredDataset=function(){var _a=this._innerdataset;var _b=this._filtereddataset;var _c=this.codecolumn;var _d=this.datacolumn;var _e=this.combolist;if(_a&&(!(_c in _a.colinfos)||!(_d in _a.colinfos))){return;}if(!this._isUsableDataset(_a)){return;}if(!_b){_b=this._filtereddataset=new nexacro.Dataset("filter_"+this.id);}_b.set_enableevent(false);_b.clear();_b.addColumn(_c,"string");_b.addColumn(_d,"string");for(var _f=0,_g=_a.getRowCount();_f<_g;_f++ ){_b.insertRow(_f);_b.setColumn(_f,_c,_a.getColumn(_f,_c));_b.setColumn(_f,_d,_a.getColumn(_f,_d));}_b.set_enableevent(true);if(_e){_e._redrawListBoxContents(false);_e._onRecalcScrollSize();}};_pCombo._recalcLayout=function(){if(this._is_created_contents){var _a=this.comboedit;var _b=this.dropbutton;var _c=this._getClientLeft();var _d=this._getClientTop();var _e=this._getClientWidth();var _f=this._getClientHeight();var _g=this.buttonsize;var _h,_i;if(_g==undefined){_h=_f;_i=_f;}else{if(typeof (_g)=="number"){_h=_i=_g;}else{_g=_g.split(" ");_h= +_g[0];_i=(_g[1])? +_g[1]:_f;}}if(_h>_e){_h=_e;}if(_i>_f){_i=_f;}if(_b){var _j=_e-_h;var _k=_d;if(_i<_f){_k=(_f-_i)/2;}_b.move(_j,_k,_h,_i,null,null);}if(_a){var _l=_e-_h;_a.move(_c,_d,_l,_f,null,null);}}};_pCombo._recheckIndex=function(){var _a=this.index;var _b="";var _c;var _d=this._innerdataset;if(_d){var _e=_d.getRowCount();if(_a> -1&&_e>0&&_a<_e){_c=this._getItemValue(_a);_b=this._getItemText(_a);}else{_a= -1;}}else{_a= -1;}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._recheckValue=function(){var _a= -1;var _b="";var _c=this.value;var _d=this.codecolumn||this.datacolumn;var _e=this._innerdataset;if(_e){var _f=_e.getRowCount();if(_f>0&&_e._isValidColumn(_d)){for(var _g=0;_g<_f;_g++ ){if(_c==this._getItemValue(_g)){_a=_g;_b=this._getItemText(_g);break;}}}}else{_c=undefined;}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._recheckText=function(){var _a= -1;var _b=this.text;var _c;var _d=this._innerdataset;if(_d){var _e=_d.getRowCount();if(_e>0){for(var _f=0;_f<_e;_f++ ){if(_b==this._getItemText(_f)){_a=_f;_c=this._getItemValue(_f);break;}}}else{_b="";}}else{_b="";}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._selectDataset=function(_a){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){if(!this._filtereddataset){this._createFilteredDataset();}else{if(_a){this._clearFilteredDataset();}}return this._filtereddataset;}else{return this._innerdataset;}};_pCombo._showPopup=function(_a,_b,_c){if(!nexacro._isDesktop()&&!(nexacro._Browser=="Runtime"&&nexacro._OS=="Android")&&_c){var _d=this;setTimeout(function(){_d._on_showPopup(_a,_b);},200);}else{this._on_showPopup(_a,_b);}};_pCombo._on_showPopup=function(_a,_b){if(!this.visible){return;}if(this._isPopupVisible()){this._closePopup();}var _c=this._getWindow();var _d=this._innerdataset.rowcount;if(this.on_fire_ondropdown(this)){if((this.ondropdown&&this.dropdown.preventable&&this.ondropdown.defaultprevented)||!this._isUsableDataset(_a)||this._getPopupType()=="none"){return;}_b=(_d==this._innerdataset.rowcount)?_b:this.index;this._createPopupListBoxControl(_a);var _e=this.combolist;var _f=this.comboedit;var _g=this._popupcontrol;if(_g){_g._popupAuto();}_e._redrawListBoxContents(false);_e._onRecalcScrollSize();if(_e){_e.set_index(_b);_e._refreshScroll(_b,1);if(_c){_c._setCaptureLock(this,true,false);}if(nexacro._enableaccessibility){this._setAccessibilityStatExpanded(true);if(nexacro._accessibilitytype==4){_e.setFocus(false);}else if(nexacro._accessibilitytype==5){this._want_arrows=true;_e._setAccessibilityNotifyEvent();}if(nexacro._Browser=="Runtime"){if(_f){_f._setAccessibilityLabel(this.text);_f._setAccessibilityDescription("");_f._setAccessibilityAction("");_f.setFocus(true);}}}}}};_pCombo._applyZoomPopup=function(){if(this._popupcontrol&&this._popupcontrol._is_popup()){if(this.enable===false||this.readonly===true||this.visible===false){return;}var _a=this._selectDataset();if(_a){if(_a.getRowCount()<=0){_a=this._innerdataset;}this._showPopup(_a,this.index);}}};_pCombo._closePopup=function(){var _a=this._getWindow();if(_a){_a._releaseCaptureLock(this);}var _b=this._popupcontrol;if(_b){_b._closePopup();nexacro._refreshWindow(_a.handle);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatExpanded(false);var _c=this.combolist;if(_c){_c._overeditemindex= -1;}if(nexacro._Browser=="Runtime"){var _d=this.comboedit;if(_d){_d.on_apply_accessibility();}}}};_pCombo._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pCombo._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pCombo._setValue=function(_a){this.value=_a;};_pCombo._setEditValue=function(_a){var _b=this.comboedit;if(_b){var _c=_b.text;if(_c!=_a){_b._setValue(_a);if(nexacro._enableaccessibility){_b._updateAccessibilityLabel();if(_a){if(nexacro._Browser=="Runtime"&&_b._status=="focused"){_b._setAccessibilityLabel(_a);_b._notifyAccessibility(_a,"notify");}}}}}};_pCombo._setIndex=function(_a){this.index=_a;};_pCombo._setText=function(_a){this.text=_a;};_pCombo._setDefaultProps=function(_a,_b,_c){this._default_value=_b;this._default_text=_c;this._default_index=_a;};_pCombo._setEventHandlerToComboEdit=function(){var _a=this.comboedit;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){_a._setEventHandler("oneditclick",this._on_edit_mobile_oneditclick,this);this._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}else{_a._setEventHandler("onlbuttondown",this._on_edit_onlbuttondown,this);_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pCombo._setEventHandlerToDropButton=function(){var _a=this.dropbutton;if(_a){if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pCombo._setEventHandlerToListBox=function(){var _a=this.combolist;if(_a){_a._setEventHandler("onitemclick",this._on_list_onitemclick,this);_a._setEventHandler("canitemchange",this.on_notify_list_canitemchange,this);_a._setEventHandler("onitemchanged",this.on_notify_list_onitemchanged,this);}};_pCombo._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(_a){_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this.innerdataset=_a;}else{this._innerdataset=null;this.innerdataset="";}};_pCombo._setDefaultCaret=function(){var _a=this.comboedit;if(_a){_a.setCaretPos(0);}};_pCombo._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pCombo._getItemValue=function(_a){var _b=this._innerdataset;var _c=this.codecolumn||this.datacolumn;if(_b&&_c){var _d=_b.getColumn(_a,_c);if(_d==undefined&&(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return this._convertValueType(_d,true);}return null;};_pCombo._getItemText=function(_a){var _b=this._innerdataset;var _c=this.datacolumn||this.codecolumn;if(_b&&_c){var _d=_b.getColumn(_a,_c);if(_d==undefined&&(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return nexacro._toString(_d);}return null;};_pCombo._getIndexFromValue=function(_a,_b){if(_b instanceof nexacro.Decimal){_b=_b.toString();}var _c=this.codecolumn||this.datacolumn;if(!_a._isValidColumn(_c)){return  -1;}var _d=_a.getRowCount();for(var _h=0;_h<_d;_h++ ){var _e=this._getItemValue(_h);if(_e instanceof nexacro.Decimal){_e=_e.toString();}if(_b==_e){var _f=_b;var _g=_e;if(_f===0){_f=_f+"";}if(_g===0){_g=_g+"";}if(_f==_g){return _h;}}}return  -1;};_pCombo._getIndexFromText=function(_a,_b){var _c=_a.getRowCount();for(var _d=0;_d<_c;_d++ ){if(this._getItemText(_d)==this.text){return _d;}}return  -1;};_pCombo._getRawToListindex=function(_a){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){var _b=this._getFilteredDataset();var _c=_b._viewRecords;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){if(_c[_e]._rawidx==_a){return _e;}}}return _a;};_pCombo._getRawIndex=function(_a,_b){var _c=this._innerdataset;if(_b== -1||(_a._viewRecords.length<=_b)){return  -1;}var _d=_a._viewRecords[_b]._rawidx;var _e=_c._rawRecords;var _f=_e.length;for(var _g=0;_g<_f;_g++ ){if(_e[_g]._rawidx==_d){return _d;}}return  -1;};_pCombo._getPopupType=function(){return this.popuptype?this.popuptype:"normal";};_pCombo._isUsableDataset=function(_a){if(!_a){return false;}else{if(_a.getRowCount<=0){return false;}if(!this.datacolumn&&!this.codecolumn){return false;}}return true;};_pCombo._isPopupVisible=function(){var _a=this._popupcontrol;if(_a){return _a._is_popup();}return false;};_pCombo._clearFilteredDataset=function(){if(this._filtereddataset){this._filtereddataset.set_filterstr("");}};_pCombo._setAccessibilityInfoByHover=function(_a){if(this._isPopupVisible()){var _b=this.combolist;return _b._setAccessibilityInfoByHover(_a);}else{return this._setAccessibilityNotifyEvent();}};_pCombo._clearAccessibilityInfoByHover=function(){var _a=this.combolist;if(_a){_a._clearAccessibilityInfoByHover();}};_pCombo._getPopupSizeArr=function(){var _a=this.popupsize;if(!_a){return;}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:undefined;return {width:_b,height:_c};};_pCombo._cancelEvent=function(){this._processing_keyfilter=false;};delete _pCombo;nexacro._ComboEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Edit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};var _pComboEditControl=nexacro._createPrototype(nexacro.Edit,nexacro._ComboEditControl);nexacro._ComboEditControl.prototype=_pComboEditControl;_pComboEditControl._type_name="EditControl";_pComboEditControl._is_subcontrol=true;_pComboEditControl._is_subfocused=false;_pComboEditControl.accessibilityrole="combobox";_pComboEditControl._getFromComponent=function(_a){var _b=_a.parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pComboEditControl.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){this._processing_keyfilter=true;if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){this._is_subfocused=true;}}if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack&&this.parent.type!="dropdown"){this._undostack.undo();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}if(this._undostack){var _h=_g.getElementCaretPos();if(_h&&_h!= -1){this._undostack.update(_h.begin,_h.end);}}}};if(nexacro._Browser=="Runtime"){_pComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=false;};}else{_pComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=true;};}_pComboEditControl.set_value=function(_a){nexacro.Edit.prototype.set_value.call(this,_a);this._setAccessibilityValue(this.text,false);};_pComboEditControl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this.parent,_l,_m);};delete _pComboEditControl;nexacro._ComboButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._ComboButtonControl);nexacro._ComboButtonControl.prototype=_pComboButtonControl;_pComboButtonControl._type_name="ButtonControl";_pComboButtonControl._is_subcontrol=true;_pComboButtonControl._is_focus_accept=false;_pComboButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h){nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);}else{_g._apply_setfocus(_b);}}if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}};_pComboButtonControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this.visible&&this.parent._isEnable()&&this.enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};delete _pComboButtonControl;nexacro._ComboListControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ListBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._overedItem=null;};var _pComboListControl=nexacro._createPrototype(nexacro.ListBox,nexacro._ComboListControl);nexacro._ComboListControl.prototype=_pComboListControl;_pComboListControl._type_name="ListBoxControl";_pComboListControl._is_subcontrol=true;_pComboListControl._overeditemindex= -1;_pComboListControl._event_list={"onitemclick":1,"onitemdblclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oncloseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onvscroll":1,"onhscroll":1,"ondevicebuttonup":1};_pComboListControl.on_notify_item_onlbuttondown=function(_a,_b){this._do_select(_a.index,false);};_pComboListControl.on_notify_item_onlbuttonup=function(_a,_b){var _c=this._upitem;if(_c){var _d;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){var _e=this._getWindow();var _f=_e?_e._gesture_manager:null;if(_f&&_f._is_ondrag){_d=this._get_rowobj_status("selected","userstatus");if(_d){this._do_deselect(_d.index);}return;}}if((_c.index>=0)&&this._contains(_c)){_a=_c;}else{_d=this._get_rowobj_status("selected","userstatus");if(_d){this._do_deselect(_d.index);}return;}this.on_fire_onitemclick(_a,_a.index,_a.text,_a.value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);}};_pComboListControl.on_notify_item_ontouchstart=function(_a,_b){this._do_select(_a.index,false);};_pComboListControl.on_notify_item_ontouchend=function(_a,_b){var _c=(_b.changedtouchinputinfos&&_b.changedtouchinputinfos[0])?_b.changedtouchinputinfos[0]:null;if(_c){_b.button="lbutton";_b.altkey=false;_b.ctrlkey=false;_b.shiftkey=false;_b.metakey=false;_b.screenx=_c.screenx;_b.screeny=_c.screeny;_b.canvasx=_c.canvasx;_b.canvasy=_c.canvasy;_b.clientx=_c.clientx;_b.clienty=_c.clienty;}this.on_notify_item_onlbuttonup(_a,_b);};_pComboListControl.on_notify_listbox_onkeydown=function(_a,_b){};_pComboListControl.on_notify_item_onmouseenter=function(_a,_b){};_pComboListControl.on_notify_item_onmouseleave=function(_a,_b){};_pComboListControl.on_notify_item_onmousemove=function(_a,_b){if(this._overeditemindex> -1){var _c=this._getItem(this._overeditemindex);if(_c){_c._changeStatus("mouseover",false);}}};_pComboListControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;if(_g){if(nexacro._enableaccessibility){_g._setAccessibilityStatFocus(_b);}_g._apply_setfocus(_b);}};_pComboListControl.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pComboListControl.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pComboListControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pComboListControl.on_fire_sys_ontouchstart=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchstart.call(this,_a,_b,_c,_d);};_pComboListControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pComboListControl.on_fire_sys_ontouchcancel=function(_a,_b,_c,_d){};_pComboListControl.on_fire_oncloseup=function(_a){var _b=this._get_rowobj_status("mouseover","status");if(_b){_b._changeStatus("mouseover",false);}if(this.oncloseup&&this.oncloseup._has_handlers){return this.oncloseup._fireEvent(this);}return false;};_pComboListControl._redrawListBoxContentsAfter=nexacro._emptyFn;_pComboListControl._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._ComboListItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pComboListControl._createListItemControl=function(_a){var _b=this._innerdataset;if(!_b){return null;}var _c=this.datacolumn?this.datacolumn:this._datacolumn;var _d=this.codecolumn?this.codecolumn:this._codecolumn;var _e=_b.getColumn(_a,_c);_e=nexacro._toString(_e);var _f=_b.getColumn(_a,_d);_f=this._convertValueType(_f,true);var _g=this._getItemHeight();var _h=this._getClientWidth();var _i=this._createListItem("item_"+_a,0,_a* _g,Math.max(this._contents_maxwidth,_h),_g,null,null,null,null,null,null,this);_i.set_value(_f);_i.set_text(_e);_i.set_index(_a);_i.set_selected(false);_i.set_readonly(this.readonly);if(nexacro._enableaccessibility){this._setItemAccessibility(_i);}_i._setEventHandler("onlbuttondown",this.on_notify_item_onlbuttondown,this);_i._setEventHandler("onlbuttonup",this.on_notify_item_onlbuttonup,this);_i._setEventHandler("ontouchstart",this.on_notify_item_ontouchstart,this);_i._setEventHandler("ontouchend",this.on_notify_item_ontouchend,this);_i._setEventHandler("onmouseenter",this.on_notify_item_onmouseenter,this);_i._setEventHandler("onmouseleave",this.on_notify_item_onmouseleave,this);_i._setEventHandler("onmousemove",this.on_notify_item_onmousemove,this);_i.createComponent(this._is_created?false:true);if(this.index==_a){_i.set_selected(true);}return _i;};_pComboListControl._change_status_item_from_key=function(_a,_b){var _c=this._getItem(_a);var _d=this._getItem(_b);if(_c){_c._changeStatus("mouseover",false);}if(_d){_d._changeStatus("mouseover",true);this._overeditemindex=_d.index;}};_pComboListControl._setAccessibilityNotifyEvent=function(_a){if(this._is_accessibility_changeIdx){this._is_accessibility_changeIdx=false;return this.parent._setAccessibilityNotifyEvent(_a);}else{return nexacro.ListBox.prototype._setAccessibilityNotifyEvent.call(this,_a);}};_pComboListControl._changeIndex=function(_a){if(this.index!=_a){var _b=this._innerdataset;var _c=parseInt(_a,10)|0;if(_b&&(this.codecolumn||this.datacolumn)){var _d=_b.getColumn(_c,this.datacolumn||this.codecolumn);var _e=_b.getColumn(_c,this.codecolumn||this.datacolumn);var _f=_d==undefined?"":nexacro._toString(_d);var _g=_e;this._accessibility_index=this.index=_c;this.text=_f;this.value=_g;this._selectinfo.obj=null;this._selectinfo.index=_c;this._selectinfo.text=_f;this._selectinfo.value=_g;return true;}}return false;};_pComboListControl._get_rowobj_status=function(_a,_b){var _c=this._buffer_pages;if(_c){var _d,_e;for(var _f=0,_g=_c.length;_f<_g;_f++ ){_d=_c[_f];if(_d){for(var _h=0,_i=_d.length;_h<_i;_h++ ){_e=_d[_h];if(_e&&((_b=="status"&&_e._status==_a)||(_b=="userstatus"&&_e._userstatus==_a))){return _e;}}}}}return null;};_pComboListControl._get_all_rowobj_status=function(_a,_b){var _c=[];var _d=this._buffer_pages;if(_d){var _e,_f;for(var _g=0,_h=_d.length;_g<_h;_g++ ){_e=_d[_g];if(_e){for(var _i=0,_j=_e.length;_i<_j;_i++ ){_f=_e[_i];if(_f&&((_b=="status"&&_f._status==_a)||(_b=="userstatus"&&_f._userstatus==_a))){_c.push(_f);}}}}}return _c;};delete _pComboListControl;nexacro._ComboListItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._ListBoxItemControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboListItemControl=nexacro._createPrototype(nexacro._ListBoxItemControl,nexacro._ComboListItemControl);nexacro._ComboListItemControl.prototype=_pComboListItemControl;_pComboListItemControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this.parent;if(_o){var _p=this._getWindow();var _q=_p.findComponent(_m);_o._upitem=_q;}return nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pComboListItemControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){var _e=this.parent;if(_e){var _f;var _g=this._getWindow();var _h=_a?_a[0]:null;if(_h){var _i=_h.target;_f=_g.findComponent(_i);}else{_f=_g.findComponent(_c);}_e._upitem=_f;}return nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pComboListItemControl.on_tap_basic_action=function(_a,_b,_c,_d,_e,_f){return;};delete _pComboListItemControl;nexacro._ComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._ComboPopupControl);nexacro._ComboPopupControl.prototype=_pComboPopupControl;_pComboPopupControl._type_name="popupCombo";_pComboPopupControl._popupAuto=function(){var _a={};if(this._type=="center"){_a=this._getPopupPositionCenter();var _b=this._getRootFrame();if(_b){this._popupBy(_b,_a.left,_a.top,_a.width,_a.height,true);}}else{_a=this._getPopupPosition();this._popupBy(this.parent,_a.left,_a.top,_a.width,_a.height);}};_pComboPopupControl._setType=function(_a){this._type=_a;};_pComboPopupControl._getElementPosition=function(){var _a=this.parent;if(_a){return nexacro._getElementPositionInFrame(_a.getElement());}return {};};_pComboPopupControl._getPopupParentPos=function(){var _a=this.parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_e=_g.y<0?_g.y* ( -1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};_pComboPopupControl._getPopupPosition=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this.parent;var _h=this._attached_comp;var _i=this._getRootFrame();if(_g&&_h&&_i){var _j=this._getWindow();var _k=3;var _l=this._getPopupParentPos();var _m={"x":_l.x,"y":_l.y};var _n=[_l.width,_l.height];_e=_l.xgap;_f=_l.ygap;var _o=_g._getVScrollBarSize();var _p=_g.displayrowcount;var _q=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _r=_g._getPopupSizeArr();var _s=_h._on_getFitSize();var _t=_h._getItemHeight();var _u=_h._getCurrentStyleBorder();_u=_u?_u._getBorderHeight():0;var _v=_h._getCurrentStylePadding();_v=_v?_v.top+_v.bottom:0;var _w=_u+_v;var _x;var _y;var _z=nexacro._getScreenAvailHeight();var _aa=nexacro._getElementPositionInFrame(_i.getElement());var _ab=nexacro._getElementScreenPosition(_i.getElement());var _ac=nexacro._allow_default_pinchzoom?nexacro._getWindowOffsetPosition(_j).left:_aa.x;var _ad=_j?nexacro._getWindowHandleClientWidth(_j.handle):0;var _ae=_j?nexacro._getWindowHandleClientHeight(_j.handle):0;if(nexacro._Browser!="Runtime"){_ad=Math.round(_ad* nexacro._getDevicePixelRatio(_i.getElement()));_ae=Math.round(_ae* nexacro._getDevicePixelRatio(_i.getElement()));}var _af;if((_ae+_ab.y)<=_z){_af=_ae;}else{_af=_z-_ab.y;}_af=Math.round(_af/nexacro._getDevicePixelRatio(_i.getElement()));var _ag=_m.y;var _ah=_af-(_m.y+_n[1]);_b=_n[1];if(_r){_c=_r.width;_d=_r.height?_r.height:_d;}else{_c=Math.max(_n[0],_s[0]);}if(_p==null){_x=(_q<_k?_q:_k)* _t+_w;_y=_d?_d:(_q* _t)+_w;if(_ah>_x){if(_ah>_y){_d=_y;}else{_d=_ah;if(!_r){if(_c==_s[0]){_c+=_o;}}}}else{if(_ag>_x){if(_ag>_y){_b= -_y;_d=_y;}else{_b= -_ag;_d=_ag;}}else{if(_ah>_ag){_d=_ah;}else{_b= -_ag;_d=_ag;}}}}else{if(_q>_p){_q=_p;if(!_r&&_c<=_s[0]+_o){_c=_s[0]+_o;}}_x=_q* _t+_w;if(_ah>_x){if(_d==0){_d=_x;}}else{if(_ag>_x){_b= -_x;_d=_x;}else{if(_ah>_ag){_d=_ah;}else{_b= -_ag;_d=_ag;}}}}var _ai=_j?nexacro._getWindowHandleClientWidth(_j.handle):0;if(_m.x<_ac){_a+=_ac-_m.x;}else if(_m.x+_c>_ac+_ai){_a-=(_m.x+_c)-(_ac+_ai);if(_a<(_ac-_m.x)){_a=_ac-_m.x;}}}return {left:_a+_e,top:_b+_f,width:_c,height:_d};};_pComboPopupControl._getPopupPositionCenter=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this.parent;var _h=this._attached_comp;if(_g&&_h){var _i=0;var _j=this._getWindow();if(_j){if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){_e=_j.handle.innerWidth;_f=_j.handle.innerHeight;var _k=nexacro._getWindowDestinationHandle(_j.handle).scrollTop;if(_k>0){_i+=_k* 2;}}else{_e=nexacro._getWindowHandleClientWidth(_j.handle);_f=nexacro._getWindowHandleClientHeight(_j.handle);}}if(nexacro._Browser=="Runtime"){_e=Math.round(_e/nexacro._getDevicePixelRatio(_g.getElement()));_f=Math.round(_f/nexacro._getDevicePixelRatio(_g.getElement()));}var _l=_g._getVScrollBarSize();var _m=_g.displayrowcount;var _n=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _o=_g._getPopupSizeArr();var _p=_h._on_getFitSize();var _q=_h._getItemHeight();var _r=_h._getCurrentStyleBorder();_r=_r?_r._getBorderHeight():0;var _s=_h._getCurrentStylePadding();_s=_s?_s.top+_s.bottom:0;var _t=_r+_s;_c=_o?_o.width:_p[0];if(_o&&_o.height){_d=_o.height;}else{_d=(_n* _q)+_t;}if(_m==null){if(_d>_f){_d=_f;_c+=_l;}}else{if(_n>_m){_d=(_m* _q)+_t;if(_d>_f){_d=_f;}_c+=_l;}else{if(_d>_f){_d=_f;_c+=_l;}}}_a=((_e/2)-(_c/2));_b=((_f/2)-(_d/2));_b=_b<0?0:_b;_b+=_i;}return {left:_a,top:_b,width:_c,height:_d};};_pComboPopupControl._setZoom=function(_a){var _b=this.getElement();if(_b.setElementZoom){_b.setElementZoom(_a* 100);}else if(nexacro.ScrollableControlElement.prototype.setElementZoom){nexacro.ScrollableControlElement.prototype.setElementZoom.call(_b,_a* 100);}};delete _pComboPopupControl;}if(!nexacro.Div){nexacro.Div=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this.form=new nexacro._InnerForm("form",0,0,_d,_e,null,null,null,null,null,null,this);};var _pDiv=nexacro._createPrototype(nexacro.Component,nexacro.Div);nexacro.Div.prototype=_pDiv;_pDiv._type_name="Div";_pDiv._cell_elem=null;_pDiv.async=true;_pDiv.url="";_pDiv.urlchangeeffect="";_pDiv.text="";_pDiv.textAlign="center";_pDiv.verticalAlign="middle";_pDiv.formscrollbarbarminsize=undefined;_pDiv.formscrollbarbaroutsize=undefined;_pDiv.formscrollbardecbuttonsize=undefined;_pDiv.formscrollbarincbuttonsize=undefined;_pDiv.formscrollbarsize=undefined;_pDiv.formscrollbartrackbarsize=undefined;_pDiv.formscrollbartype=undefined;_pDiv.formscrollindicatorsize=undefined;_pDiv.formscrolltype=undefined;_pDiv._urlchangeeffect=null;_pDiv._is_loadedform=false;_pDiv._apply_client_padding=false;_pDiv._is_simple_control=true;_pDiv._is_container=true;_pDiv.accessibilityrole="form";_pDiv._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pDiv.on_create_contents=function(){if(!this.url){this.form.createComponent(true);}};_pDiv._applyElementVisible=function(_a){this._control_element.setElementDisplay(_a?"":"none");this._applyScrollPos();};_pDiv.on_created_contents=function(_a){var _b=this.form;if(!this.url){_b.on_created(_a);}else{if(!_b._url){if(this.parent&&this.parent instanceof nexacro.Tab&&this.parent.preload==false){}else{_b.loadForm(this.url,this.async,true,this._url);}}if(_b._is_loaded&&!_b._is_created){_b.createComponent();}}this.on_apply_text();this._recalcLayout();};_pDiv.on_destroy_contents=function(){this._destroyTextElement();this._destroyFormControl();this._user_property_list=null;};_pDiv.on_create_contents_command=function(){var _a="";return _a;};_pDiv.on_attach_contents_handle=function(_a){var _b=this.form;if(!this.url){_b.on_created(_a);}else{if(this.url&&_b._is_loaded&&!_b._is_created){_b.createComponent();}}this.on_apply_text();this._recalcLayout();};_pDiv.on_change_containerRect=function(_a,_b){if(this._cell_elem){this._cell_elem.setElementSize(_a,_b);}this._recalcLayout();};_pDiv.on_change_containerPos=function(){};_pDiv.on_apply_prop_enable=function(_a){if(this.form){this.form._setEnable(_a);}};_pDiv.on_apply_text=function(_a){var _b=this.form;if(_b&&((_b._child_list&&_b._child_list.length>0)||this.url)||!this._is_alive){return;}var _c=_b.getElement();if(_c){if(!_a){_a=this._displaytext;}var _d=this._cell_elem;if(!_d&&_a){var _e=this._getWindow();_d=this._cell_elem=new nexacro.TextBoxElement(_c);_d.create(_e);}if(_d){_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementVerticalAlign(this.verticalAlign);_d.setElementTextAlign(this.textAlign);_d.setElementText(_a);}}};_pDiv.set_url=function(_a){if(this.url!=_a){this.url=_a;this.on_apply_url();}};_pDiv.on_apply_url=function(_a){var _b=this.form;if(!_b){return;}var _c=this.url;var _d,_e;if(_c&&_c.length>0){nexacro._getLayoutManager().clearLayout(_b);if(this._is_loadedform&&_b._is_loaded&&_a!=true){_d=_b._on_beforeclose();if(_b._checkAndConfirmClose(_d)==false){return;}var _f=_b._async;_b._on_close();_b.set_tooltiptext("");this._destroyFormControl();_e=this._getFormPosition();_b=this.form=new nexacro._InnerForm("form",_e.left,_e.top,_e.width,_e.height,null,null,null,null,null,null,this);_b._async=_f;_b.createComponent();this._is_loadedform=false;}var _g=this.parent;if(_g!=null){while(!_g._url){_g=_g.parent;}_b.loadForm(_c,this.async,true,_g._url);}this._destroyTextElement();}else{if(_b._is_loaded){_d=_b._on_beforeclose();if(_b._checkAndConfirmClose(_d)==false){return;}_b._on_close();_b.set_tooltiptext("");this._is_loadedform=false;}this._destroyFormControl();_e=this._getFormPosition();_b=this.form=new nexacro._InnerForm("form",_e.left,_e.top,_e.width,_e.height,null,null,null,null,null,null,this);_b.createComponent();this._destroyTextElement();this.on_apply_text();}};_pDiv.set_urlchangeeffect=function(_a){this.urlchangeeffect=_a;if(_a){if(this._urlchangeeffect==null||this._urlchangeeffect.value!=_a){var _b=nexacro.TransitionEffectObject(_a);this._urlchangeeffect=_b;}}else{if(this._urlchangeeffect){this._urlchangeeffect=null;}}};_pDiv.set_async=function(_a){_a=nexacro._toBoolean(_a);if(this.async!=_a){this.async=_a;if(this.form){this.form._async=_a;}}};_pDiv._on_apply_formscroll=function(){if(this.formscrollbarbarminsize!==undefined){nexacro.Component.prototype.set_scrollbarbarminsize.call(this.form,this.formscrollbarbarminsize);}if(this.formscrollbarbaroutsize!==undefined){nexacro.Component.prototype.set_scrollbarbaroutsize.call(this.form,this.formscrollbarbaroutsize);}if(this.formscrollbardecbuttonsize!==undefined){nexacro.Component.prototype.set_scrollbardecbuttonsize.call(this.form,this.formscrollbardecbuttonsize);}if(this.formscrollbarincbuttonsize!==undefined){nexacro.Component.prototype.set_scrollbarincbuttonsize.call(this.form,this.formscrollbarincbuttonsize);}if(this.formscrollbarsize!==undefined){nexacro.Component.prototype.set_scrollbarsize.call(this.form,this.formscrollbarsize);}if(this.formscrollbartrackbarsize!==undefined){nexacro.Component.prototype.set_scrollbartrackbarsize.call(this.form,this.formscrollbartrackbarsize);}if(this.formscrollbartype!==undefined){nexacro.Component.prototype.set_scrollbartype.call(this.form,this.formscrollbartype);}if(this.formscrollindicatorsize!==undefined){nexacro.Component.prototype.set_scrollindicatorsize.call(this.form,this.formscrollindicatorsize);}if(this.formscrolltype!==undefined){nexacro.Component.prototype.set_scrolltype.call(this.form,this.formscrolltype);}};_pDiv.set_padding=nexacro._emptyFn;_pDiv.reload=function(){this.on_apply_url(true);};_pDiv.getFocus=function(){return this.parent?this.parent.getFocus():null;};_pDiv.getParentContext=function(){return this.parent;};_pDiv.getSetter=function(_a,_b){if(!this._user_property_list){this._user_property_list=[];}this._user_property_list[_a]=1;if(!_b){_b="set_"+_a;}var _c=this[_b];if(_c){return new nexacro.SetterBinder(this,_a,_c);}return new nexacro.PropBinder(this,_a);};_pDiv.addEventHandler=function(_a,_b,_c){var _d=nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);var _e=this.form;switch(_a){case "oncontextmenu":this._context_func=_b;_e._addEventHandler(_a,this.on_fire_innerFormContextmenu,_c);break;}return _d;};_pDiv.on_fire_innerFormContextmenu=function(_a,_b){var _c=this;if(_a instanceof nexacro._InnerForm){_a.parent._context_func.call(_c,_a.parent,_b);}};_pDiv.getOwnerFrame=function(){return this._getOwnerFrame();};_pDiv.addChild=function(_a,_b){var _c=this.form;var _d=_c.addChild(_a,_b);return _d;};_pDiv.insertChild=function(_a,_b,_c){var _d=this.form;var _e=_d.insertChild(_a,_b,_c);return _e;};_pDiv.removeChild=function(_a){var _b=null;if(!this._is_alive&&_a==="form"){_b=this.form;if(_b){var _c=false;var _d=this._getWindow();if(_d){_c=(_d._indexOfCurrentFocusPaths(_b)> -1);}if(_b._control_element){if(_b._control_element){_b._control_element._removeFromContainer();}if(_c){if(_b instanceof nexacro.Form){_b._on_deactivate();}_d._removeFromCurrentFocusPath(_b,true);}}}delete this[_a];}else{var _e=this.form;_b=_e.removeChild(_a);}return _b;};_pDiv.addLayout=function(_a,_b){var _c=this.form;if(_c){_c.addLayout(_a,_b);}};_pDiv.setContents=function(_a){var _b=this._setContents(_a);return _b;};_pDiv.getCurrentLayoutID=nexacro._emptyFn;_pDiv.set_formscrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a<0){return;}}if(this.formscrollbarbarminsize!=_a){this.formscrollbarbarminsize=_a;nexacro.Component.prototype.set_scrollbarbarminsize.call(this.form,_a);}};_pDiv.set_formscrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a<0){return;}}if(this.formscrollbarbaroutsize!=_a){this.formscrollbarbaroutsize=_a;nexacro.Component.prototype.set_scrollbarbaroutsize.call(this.form,_a);}};_pDiv.set_formscrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.formscrollbardecbuttonsize!=_a){this.formscrollbardecbuttonsize=_a;nexacro.Component.prototype.set_scrollbardecbuttonsize.call(this.form,_a);}};_pDiv.set_formscrollbarincbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.formscrollbarincbuttonsize!=_a){this.formscrollbarincbuttonsize=_a;nexacro.Component.prototype.set_scrollbarincbuttonsize.call(this.form,_a);}};_pDiv.set_formscrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.formscrollbarsize!=_a){this.formscrollbarsize=_a;nexacro.Component.prototype.set_scrollbarsize.call(this.form,_a);}};_pDiv.set_formscrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a< -1){return;}}if(this.formscrollbartrackbarsize!=_a){this.formscrollbartrackbarsize=_a;nexacro.Component.prototype.set_scrollbartrackbarsize.call(this.form,_a);}};_pDiv.set_formscrollbartype=function(_a){if(this.formscrollbartype!=_a){this.formscrollbartype=nexacro.Component.prototype.set_scrollbartype.call(this.form,_a);}};_pDiv.set_formscrollindicatorsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this.formscrollindicatorsize!=_a){this.formscrollindicatorsize=_a;nexacro.Component.prototype.set_scrollindicatorsize.call(this.form,_a);}};_pDiv.set_formscrolltype=function(_a){if(this.formscrolltype!=_a){this.formscrolltype=nexacro.Component.prototype.set_scrolltype.call(this.form,_a);}};_pDiv.scrollTo=function(_a,_b){if(this.form){this.form.scrollTo(_a,_b);}};_pDiv._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);if(this.form){this.form._on_activate();}return true;};_pDiv._on_deactivate=function(){nexacro.Component.prototype._on_deactivate.call(this);if(this.form){this.form._on_deactivate();}return true;};_pDiv._on_bubble_beforeclose=function(_a,_b,_c,_d){return this.parent._on_bubble_beforeclose(_a,_b,_c,_d);};_pDiv._on_bubble_close=function(_a,_b,_c){return this.parent._on_bubble_close(_a,_b,_c);};_pDiv._clearUserFunctions=nexacro._emptyFn;_pDiv._loadedForm=function(){if(this._getLastFocused()){this._last_focused=this.form;}this._on_apply_formscroll();this._is_loadedform=true;};_pDiv._destroyTextElement=function(){if(this._cell_elem){this._cell_elem.destroy();this._cell_elem=null;}};_pDiv._destroyFormControl=function(){if(this.form){this.form._destroy();this.form=null;}};_pDiv._loadInclude=function(_a,_b,_c,_d){var _e=this.async;var _f=this.getParentContext();var _g;if(_e){while(_f&&_f._is_form){_g=_f._getAsync();if(!_f._is_fired_onload&&_g===false){_e=false;break;}_f=_f.getParentContext();}}if(!this._is_created){}this._loadIncludeJS.call(this,_a,_b,_e,_d);};_pDiv._loadIncludeJS=function(_a,_b,_c,_d){var _e;if(_d&&_d.length>0){_e=nexacro._getServiceObject(_d);}else{_e=nexacro._getServiceObject(_b);}this._load_manager.loadIncludeModule(_b,null,_c,_e);};_pDiv._closeForm=function(){this._destroyFormControl();};_pDiv._recalcLayout=function(){var _a=this.form;if(_a){var _b=this._getFormPosition();_a._setPos(_b.left,_b.top);_a._setSize(_b.width,_b.height);}};_pDiv._on_orientationchange=function(_a){if(this.form){this.form._on_orientationchange(_a);}};_pDiv._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Layouts")[0];if(!_c){_c=_b;}var _d=_c.getElementsByTagName("Layout")[0];if(!_d){return false;}var _e=true;var _f=_d.firstChild;while(_f){if(_f.nodeType==1){var _g=nexacro._getRegisterClass(_f.tagName);if(!_g){return false;}var _h=nexacro._executeGlobalEvalStr(_g);if(!_h){return false;}if(_h.prototype&&_h.prototype._is_component){var _i={};var _j={};for(var _o=0;_o<_f.attributes.length;_o++ ){var _k=_f.attributes[_o].name;if(/^(id|left|top|width|height|right|bottom|minwidth|maxwidth|minheight|maxheight|)$/.test(_k)){_i[_k]=_f.attributes[_o].value;}else{_j[_k]=_f.attributes[_o].value;}}var _l=new _h(_i["id"],_i["left"],_i["top"],_i["width"],_i["height"],_i["right"],_i["bottom"],_i["minwidth"],_i["maxwidth"],_i["minheight"],_i["maxheight"],this.form);for(var _p in _j){if(_l["set_"+_p]){_l["set_"+_p](_j[_p]);}else{_l[_p]=_j[_p];}}if(_f.firstChild){var _m=_f.firstChild;var _n="";while(_m){if(_f.nodeType==1){_n+=nexacro._documentToXml(_m);}_m=_m.nextSibling;}_e=_l._setContents(_n);}if(!_e){return _e;}this.form.addChild(_l.id,_l);_l.show();}}_f=_f.nextSibling;}return _e;};_pDiv._getFormPosition=function(){var _a=0;var _b=0;var _c=0;var _d=0;_c=this._getClientWidth();_d=this._getClientHeight();this._initCSSSelector();return {left:_a,top:_b,width:_c,height:_d};};_pDiv._getComponentsByTaborder=function(){if(!this.form._isEnable()||!this.form._child_list||this.form._child_list.length==0){return null;}return [this.form];};_pDiv._searchNextTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchNextTabFocus.call(this,_a,_b,_c,_d);if(_b&&_e&&_e[0]===this.form){return this.parent._searchNextTabFocus(this,undefined,undefined,_d);}return _e;};_pDiv._searchPrevTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchPrevTabFocus.call(this,_a,_b,_c,_d);if(_b&&_e&&_e[0]===this.form){return [this];}return _e;};_pDiv._getTabOrderNext=function(_a,_b,_c){return nexacro.FormBase.prototype._getTabOrderNext.call(this,_a,_b,_c);};_pDiv._getTabOrderFirst=function(_a){return nexacro.FormBase.prototype._getTabOrderFirst.call(this,_a);};_pDiv._getTabOrderLast=function(_a){return nexacro.FormBase.prototype._getTabOrderLast.call(this,_a);};delete _pDiv;}if(!nexacro.ProgressBar){nexacro.ProgressBar=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._progressbaritems=new Array();};var _pProgressBar=nexacro._createPrototype(nexacro.Component,nexacro.ProgressBar);nexacro.ProgressBar.prototype=_pProgressBar;_pProgressBar._type_name="ProgressBar";_pProgressBar.progressstartcap=null;_pProgressBar.progressendcap=null;_pProgressBar._progressbartext=null;_pProgressBar.smooth=false;_pProgressBar.direction="forward";_pProgressBar.pos=0;_pProgressBar.step=1;_pProgressBar.max=100;_pProgressBar.min=0;_pProgressBar.blocksize=undefined;_pProgressBar.blockgap=undefined;_pProgressBar._endcap_width=0;_pProgressBar._startcap_width=0;_pProgressBar._item_width=0;_pProgressBar._endcap_iconwidth=undefined;_pProgressBar._startcap_iconwidth=undefined;_pProgressBar._item_iconwidth=undefined;_pProgressBar._item_icon_url="";_pProgressBar._item_edge_url="";_pProgressBar.accessibilityrole="progressbar";_pProgressBar.on_apply_text=function(_a){var _b=this.getElement();if(_b){if(!_a){_a=this.text;}if(_a){var _c=this._progressbartext;var _d,_e;if(!_c){_d=this._getClientWidth();_e=this._getClientHeight();_c=this._progressbartext=new nexacro.Static("progressbartext",0,0,_d,_e,null,null,null,null,null,null,this);_c._setControl();_c.set_text(_a);_c.createComponent();_c._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);}else{_d=this._getClientWidth();_e=this._getClientHeight();_c.set_text(_a);_c.move(0,0,_d,_e,null,null);if(!_c._is_created){_c.on_created();}}}else{if(this._progressbartext){this._progressbartext.destroy();this._progressbartext=null;}}}};_pProgressBar.on_apply_prop_enable=function(_a){if(this.progressstartcap){this.progressstartcap._setEnable(_a);}if(this.progressendcap){this.progressendcap._setEnable(_a);}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pProgressBar.on_create_contents=function(){var _a=this.getElement();if(_a){this._createProgressBarItems(true);}};_pProgressBar.on_created_contents=function(_a){if(this.progressstartcap){this.progressstartcap.on_created(_a);}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created(_a);}if(this.progressendcap){this.progressendcap.on_created(_a);}if(this._progressbartext){this._progressbartext.on_created(_a);}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(this.min);this._setAccessibilityInfoValueMax(this.max);this._setAccessibilityInfoValueCur(this.pos);}};_pProgressBar.on_destroy_contents=function(){if(this.progressstartcap){this.progressstartcap.destroy();this.progressstartcap=null;}if(this.progressendcap){this.progressendcap.destroy();this.progressendcap=null;}if(this._progressbartext){this._progressbartext.destroy();this._progressbartext=null;}this._clearProgressBarItems(true);};_pProgressBar.on_create_contents_command=function(){var _a="";if(this.progressstartcap){_a+=this.progressstartcap.createCommand();}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}if(this.progressendcap){_a+=this.progressendcap.createCommand();}if(this._progressbartext){_a+=this._progressbartext.createCommand();}return _a;};_pProgressBar.on_attach_contents_handle=function(_a){if(this.progressstartcap){this.progressstartcap.attachHandle(_a);}var _b=this._progressbaritems;for(var _c=0;_c<_b.length;_c++ ){_b[_c].attachHandle(_a);}if(this.progressendcap){this.progressendcap.attachHandle(_a);}if(this._progressbartext){this._progressbartext.attachHandle(_a);}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(this.min);this._setAccessibilityInfoValueMax(this.max);this._setAccessibilityInfoValueCur(this.pos);}};_pProgressBar.on_change_containerRect=function(){this._update();};_pProgressBar._on_getAccessibilityAdditionalLabel=function(){var _a="";if(this._isAccessibilityEnable()){_a=(this.expr&&this.expr.length>0)?this._displaytext+" "+this.min+" "+this.max:this.pos+" "+this.min+" "+this.max;}return _a;};_pProgressBar._on_getAccessibilityAdditionalRole=function(){if(this._getAccessibilityRole()=="progressbar"){return " ProgressBar";}return "";};_pProgressBar.set_blockgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.blockgap!=_a){this.blockgap=_a;this._update();}};_pProgressBar.set_blocksize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(_a<1){_a=1;}if(this.blocksize!=_a){this.blocksize=_a;this._update();}};_pProgressBar.set_min=function(_a){if(isNaN(_a= +_a)){return;}_a=(_a<0)?0:_a;if(this.min!=_a){this.min=_a;this.on_apply_min(_a);this._update();}};_pProgressBar.on_apply_min=function(_a){if(_a>this.max){this.max=_a;}if(_a>this.pos){this.pos=_a;}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(_a);}};_pProgressBar.set_max=function(_a){if(isNaN(_a= +_a)){return;}_a=(_a<0)?0:_a;if(this.max!=_a){this.max=_a;this.on_apply_max(_a);this._update();}};_pProgressBar.on_apply_max=function(_a){if(_a<this.min){this.min=_a;}if(_a<this.pos){this.pos=_a;}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMax(_a);}};_pProgressBar.set_pos=function(_a){if(isNaN(_a= +_a)){return;}if(this.pos!=_a){if(_a>this.max){_a=this.max;}else if(_a<this.min){_a=this.min;}this.pos=_a;if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueCur(_a);}}this._update();};_pProgressBar.set_step=function(_a){if(isNaN(_a= +_a)){return;}if(this.step!=_a){this.step=_a;this._update();}};_pProgressBar.set_smooth=function(_a){_a=nexacro._toBoolean(_a);if(this.smooth!=_a){this.smooth=_a;this._update();}};_pProgressBar.set_direction=function(_a){_a=nexacro._toString(_a);if(this.direction!=_a){this.direction=_a;this._update();}};_pProgressBar.stepIt=function(){this.set_pos(this.pos+this.step);};_pProgressBar._on_loadimage_start_icon=function(_a,_b){this._startcap_iconwidth=_b;this._update();};_pProgressBar._on_loadimage_end_icon=function(_a,_b){this._endcap_iconwidth=_b;this._update();};_pProgressBar._on_loadimage_item_icon=function(_a,_b){this._item_iconwidth=_b;this._update();};_pProgressBar.on_notify_progressbar_onclick=function(_a,_b){this.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,this,this,_b.metakey);};_pProgressBar._createProgressStartCap=function(_a){var _b=this.getElement();if(_b){var _c=this.progressstartcap;if(!_c){_c=new nexacro._Icon("progressstartcap",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);this.progressstartcap=_c;}var _d=_c._getCurrentStyleBorder();var _e=_c._getCurrentStylePadding();this._startcap_width=_d?(_d.left._width+_d.right._width):0;this._startcap_width+=_e?(_e.left+_e.right):0;if(this._startcap_iconwidth===undefined){var _f=_c._icon||_c._getCSSStyleValue("icon");if(_f instanceof Object){_f=_f.value;}var _g=nexacro._getImageSize(_f,this._on_loadimage_start_icon,this);if(_g){this._startcap_iconwidth=_g.width;}}}};_pProgressBar._createProgressEndCap=function(_a){var _b=this.getElement();if(_b){var _c=this.progressendcap;if(!_c){_c=new nexacro._Icon("progressendcap",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);this.progressendcap=_c;}var _d=_c._getCurrentStyleBorder();var _e=_c._getCurrentStylePadding();this._endcap_width=_d?(_d.left._width+_d.right._width):0;this._endcap_width+=_e?(_e.left+_e.right):0;if(this._endcap_iconwidth===undefined){var _f=_c._icon||_c._getCSSStyleValue("icon");if(_f instanceof Object){_f=_f.value;}var _g=nexacro._getImageSize(_f,this._on_loadimage_end_icon,this);if(_g){this._endcap_iconwidth=_g.width;}}}};_pProgressBar._createProgressBarItemTemp=function(){var _a=this.getElement();if(_a){var _b=new nexacro._ProgressBarItemControl("progressbaritem",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_b._initCSSSelector();var _c=_b._getCurrentStyleBorder();var _d=_b._getCurrentStylePadding();this._item_width=_c?(_c.left._width+_c.right._width):0;this._item_width+=_d?(_d.left+_d.right):0;if(this._item_iconwidth===undefined){var _e=_b._icon||_b._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._item_icon_url=_e;var _f=nexacro._getImageSize(_e,this._on_loadimage_item_icon,this);if(_f){this._item_iconwidth=_f.width;}}_b.destroy();}};_pProgressBar._createProgressBarItems=function(_a){var _b=this.getElement();if(_b){if(this.pos<=0){if(this.progressendcap){this.progressstartcap.destroy();this.progressstartcap=null;}if(this.progressendcap){this.progressendcap.destroy();this.progressendcap=null;}this._clearProgressBarItems(true);this.on_apply_text();return;}else{this._createProgressStartCap(_a);this._createProgressEndCap(_a);this._createProgressBarItemTemp();}this._setSizeInfo();var _c=this._getBarInfo();var _d=_c[1];var _e=_c[2];var _f=this._getClientWidth();var _g=this._getClientHeight();var _h,_i=this._getClientTop(),_j=0;var _k=this.blockgap;if(_k==null){_k=2;}else if(_k<0){_k=0;}var _l=this.smooth;var _m=this.direction;var _n;var _o=this._progressbaritems;this._clearProgressBarItems(false,_c);if(_m=="backward"){if(this._endcap_width){this.progressendcap.move(_f-this._endcap_width,0,this._endcap_width,_g);}}else{if(this._startcap_width){this.progressstartcap.move(0,0,this._startcap_width,_g);}}if(_l){if(_m=="backward"){_j=_e|0;_h=_f-this._endcap_width-_e;if(this._startcap_width){this.progressstartcap.move(_h-this._startcap_width,_i,this._startcap_width,_g);}}else{_h=this._startcap_width;_j=_e|0;if(this._endcap_width){this.progressendcap.move(_h+_j,_i,this._endcap_width,_g);}}_n=_o[0];if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem",_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[0]=_n;}else{_n.move(_h,_i,_j,_g);}}else{var _p,_q=_e+_k;if(_m=="backward"){_h=_f-this._endcap_width;for(_p=0;_p<_d;_p++ ){_n=_o[_p];_h=_f-this._endcap_width-(_p* _q)-_e;_j=_e;if(_p==(_d-1)&&(_h-_e)<=0){_j=_f-this._startcap_width-this._endcap_width-(_p* _q);_h=this._startcap_width;}if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem_"+_p,_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[_p]=_n;}else{_n.move(_h,_i,_j,_g);}}if(this._startcap_width){this.progressstartcap.move(_h-this._startcap_width,_i,this._startcap_width,_g);}}else{_h=this._startcap_width;var _r=_f-this._startcap_width-this._endcap_width;for(_p=0;_p<_d;_p++ ){_n=_o[_p];_j=_e;_h=(_p* _q)+this._startcap_width;if(_p==(_d-1)&&(_h+_e)>=(_r)){_j=_f-this._endcap_width-_h;}if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem_"+_p,_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[_p]=_n;}else{_n.move(_h,_i,_j,_g);}}if(this._endcap_width){this.progressendcap.move(_h+_j,_i,this._endcap_width,_g);}}}this.on_apply_text(this.text);if(_o.length>0&&this._progressbartext){var _s=this._progressbartext.getElement();_b.moveToPrevElement(_s,_o[_o.length-1].getElement());}}};_pProgressBar._clearProgressBarItems=function(_a,_b){var _c=this._progressbaritems.length;if(_c<=0){return;}var _d=0;if(!_a){var _e=_b[1];if(_c>_e){_d=_c-_e;}}else{_d=_c;}for(var _g=0;_g<_d;_g++ ){var _f=this._progressbaritems.pop();if(_f){_f.destroy();}}};_pProgressBar._update=function(){this._createProgressBarItems(!this._is_created);};_pProgressBar._setSizeInfo=function(){if(this._startcap_iconwidth){this._startcap_width+=this._startcap_iconwidth;}if(this._endcap_iconwidth){this._endcap_width+=this._endcap_iconwidth;}if(this._item_iconwidth){this._item_width+=this._item_iconwidth;}};_pProgressBar._getBarInfo=function(){var _a=null;var _b=0;var _c=0;var _d=0;var _e=this._getClientWidth()-this._startcap_width-this._endcap_width;var _f=this.pos;var _g=this.max;var _h=_f/_g;var _i=this.smooth;var _j=this.blocksize;if(_j==null){_j=this._item_width?this._item_width:15;}var _k=this.blockgap;if(_k==null){_k=2;}else if(_k<0){_k=0;}if(_i){_b=1;_d=parseInt(_e* _h)|0;_c=0;}else{_d=_j;_b=Math.ceil(_e/(_d+_k))|0;_c=Math.floor(_b* _h);}_a=[_b,_c,_d];try{return _a;}finally{_a=null;}};delete _pProgressBar;nexacro._ProgressBarItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._Icon.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pProgressBarItemControl=nexacro._createPrototype(nexacro._Icon,nexacro._ProgressBarItemControl);nexacro._ProgressBarItemControl.prototype=_pProgressBarItemControl;_pProgressBarItemControl._type_name="IconControl";_pProgressBarItemControl._is_subcontrol=true;_pProgressBarItemControl._is_focus_accept=false;_pProgressBarItemControl.on_getIDCSSSelector=function(){return "progressbaritem";};delete _pProgressBarItemControl;}if(!nexacro.PopupDiv){nexacro.PopupDiv=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Div.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._attached_comp=this;};var _pPopupDiv=nexacro._createPrototype(nexacro.Div,nexacro.PopupDiv);nexacro.PopupDiv.prototype=_pPopupDiv;_pPopupDiv._type_name="PopupDiv";_pPopupDiv.returnvalue="";_pPopupDiv.visible=false;_pPopupDiv._callbackfunction=null;_pPopupDiv._callbackcontext=null;_pPopupDiv._eventclear_flag=false;_pPopupDiv._default_zindex=nexacro._zindex_popup;_pPopupDiv._is_window=true;_pPopupDiv._is_popup_control=true;_pPopupDiv._is_selfclose=true;_pPopupDiv._is_trackpopup=false;_pPopupDiv._track_capture=true;_pPopupDiv._is_fired_onsize=false;_pPopupDiv.accessibilityrole="form";_pPopupDiv._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onload":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncloseup":1,"onpopup":1,"onlayoutchanged":1,"canlayoutchange":1,"onmousewheel":1,"onmousedown":1,"onmouseup":1,"onvscroll":1,"onhscroll":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pPopupDiv.on_create_control_element=function(_a){var _b;if(this._is_scrollable){_b=this.on_create_popupscrollable_control_element(_a);}else{_b=this.on_create_popup_control_element(_a);}if(_b&&this._default_zindex>0){_b.setElementZIndex(this._default_zindex);}return _b;};_pPopupDiv.on_created=function(_a){nexacro.Div.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition( -5000,0);}};_pPopupDiv.destroyComponent=function(){nexacro.PopupControl.prototype.destroyComponent.call(this);nexacro.Div.prototype.destroyComponent.call(this);this._callbackfunction=null;this._callbackcontext=null;return true;};_pPopupDiv.on_created_contents=function(_a){nexacro.Div.prototype.on_created_contents.call(this,_a);var _b=this._control_element;if(!this.visible&&_b){_b.setElementPosition( -5000,0);_b.setElementFont(this._getCurrentStyleInheritValue("font"));_b.setElementColor(this._getCurrentStyleInheritValue("color"));_b.setElementWordSpacing(this._getCurrentStyleInheritValue("wordSpacing"));_b.setElementLetterSpacing(this._getCurrentStyleInheritValue("letterSpacing"));}};_pPopupDiv.on_create_contents_command=function(){return "";};_pPopupDiv.on_attach_contents_handle=function(_a){nexacro.Div.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition( -5000,0);}};_pPopupDiv._applyElementVisible=function(_a){nexacro.Component.prototype._applyElementVisible.call(this,_a);};_pPopupDiv.on_update_position=function(_a,_b,_c){if(this.visible||!nexacro._allow_default_pinchzoom){nexacro.Div.prototype.on_update_position.call(this,_a,_b,_c);}else{var _d=this._control_element;if(_d){_d.setElementPosition( -5000,0);if(_b){this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(_a){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}};_pPopupDiv._clearEventListener=function(_a){var _b=nexacro.getApplication();if(this._eventclear_flag&&_b&&_b.getActiveForm()){var _c=_b.getActiveForm()._event_list;if(!_c[_a]){return;}}nexacro._EventSinkObject.prototype._clearEventListener.apply(this,arguments);};_pPopupDiv.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Form.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupDiv.set_visible=function(_a){if(this._is_trackpopup){nexacro.PopupControl.prototype.set_visible.apply(this,arguments);}};_pPopupDiv.trackPopup=function(_a,_b,_c,_d,_e,_f){if(this._is_trackpopup){return;}this.returnvalue="";this._track_capture=_f===false?false:true;_a= +_a;_b= +_b;if(_c==null){_c=this._adjust_width;}else{_c= +_c;}if(_d==null){_d=this._adjust_height;}else{_d= +_d;}var _g=this._getWindow();var _h=0;var _i=0;if(_g){_h=_g.frame._adjust_width;_i=_g.frame._adjust_height;}var _j=_a+_c;if(_j>_h){if(_c<=_h){_a=_h-_c;}else{_a=0;_c=_h;}}var _k=_b+_d;if(_k>_i){if(_d<=_i){_b=_i-_d;}else{_b=0;_d=_i;}}if(this._is_fired_onsize==false&&this.form){this.form.on_fire_onsize(this._adjust_width,this._adjust_height);this._is_fired_onsize=true;}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:null,left:_a,top:_b,width:_c,height:_d};}else{this._popup(_a,_b,_c,_d);}if(_e&&typeof _e=="string"){var _l=this.parent;var _m=_l[_e];while(!_m&&!(_l._is_form&&_l._is_loaded)){_l=_l.parent;_m=_l[_e];}if(_m){this._callbackfunction=_m;this._callbackcontext=_l;}}else{this._callbackfunction=null;this._callbackcontext=null;}this.setFocus();this.on_fire_onpopup(this);return (this.async?true:this.returnvalue);};_pPopupDiv.trackPopupByComponent=function(_a,_b,_c,_d,_e,_f,_g){if(this._is_trackpopup){return;}this.returnvalue="";this._track_capture=_g===false?false:true;if(_d==null&&_e==null){_d=this._adjust_width;_e=this._adjust_height;}_b= +_b;_c= +_c;var _h=nexacro._getElementPositionInFrame(_a.getElement());var _i=_h.x;var _j=_h.y;var _k=this._getWindow();var _l=_k.clientWidth;var _m=_k.clientHeight;if(_i+_b+_d>_l){var _n=_l-_d;if(_n<0){_b= -_i;if(_d>_l){_d=_l;}}else{_b=_n-_i;}}if(_j+_c+_e>_m){var _o=_m-_e;if(_o<0){_c= -_j;_e=_m;}else{_c=_o-_j;}}if(_f&&typeof _f=="string"){var _p=this.parent;var _q=_p[_f];while(!_q&&!(_p._is_form&&_p._is_loaded)){_p=_p.parent;_q=_p[_f];}if(_q){this._callbackfunction=_q;this._callbackcontext=_p;}}else{this._callbackfunction=null;this._callbackcontext=null;}if(this._is_fired_onsize==false&&this.form){this.form.on_fire_onsize(this._adjust_width,this._adjust_height);this._is_fired_onsize=true;}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:_a,left:_b,top:_c,width:_d,height:_e};}else{this._popupBy(_a,_b,_c,_d,_e,true);}this.setFocus();this.on_fire_onpopup(this);return (this.async?true:this.returnvalue);};_pPopupDiv.closePopup=function(_a){this.returnvalue=_a;if(this.visible){this._closePopup(true);return true;}return false;};_pPopupDiv.isPopup=nexacro.PopupControl.prototype._is_popup;_pPopupDiv._on_init=function(){this._eventclear_flag=true;nexacro.FormBase.prototype._on_init.apply(this,arguments);this._eventclear_flag=false;};_pPopupDiv._on_load=function(){var _a=nexacro.Form.prototype._on_load.apply(this,arguments);var _b=this._wait_pop_position;if(_b){if(_b.obj){this._popupBy(_b.obj,_b.left,_b.top,_b.width,_b.height);}else{this._popup(_b.left,_b.top,_b.width,_b.height);}delete this._wait_pop_position;}return _a;};_pPopupDiv._on_bubble_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(!this._is_alive){return;}var _q,_r,_s,_t,_u,_v,_w,_x,_y;if(_l===undefined){if(!_n){_n=this;}if(this.visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);if(_s){return;}if(!_f){if(_c){if(this.vscrollbar&&this.vscrollbar.enable){_t=this.vscrollbar;_u=_t._pos;this._setVScrollDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this.hscrollbar&&this.hscrollbar.enable){_w=this.hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(_l===false){_l=undefined;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){var _z=this._getRecalcCanvasXY(_a,_h,_i);_h=_z[0];_i=_z[1];if(this._is_subcontrol){return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,null,_n,_o,_p);}else{return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,this,_n,_o,_p);}}}}}}else{if(this.visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);if(_s){return;}if(!_f){if(_c){if(this._isWheelScrollable(_c)&&this.vscrollbar&&this.vscrollbar.enable){_t=this.vscrollbar;_u=_t._pos;this._setVScrollbarDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this._isWheelScrollable(_b)&&this.hscrollbar&&this.hscrollbar.enable){_w=this.hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){_h+=this._adjust_left-this._scroll_left||0;_i+=this._adjust_top-this._scroll_top||0;return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,_m,_n,_o,_p);}}}}}};_pPopupDiv.on_fire_onpopup=function(_a){if(this.onpopup&&this.onpopup._has_handlers){var _b=new nexacro.EventInfo(_a,"onpopup");return this.onpopup._fireEvent(this,_b);}return false;};_pPopupDiv.on_fire_onmove=function(_a,_b){if(this.onmove&&this.onmove._has_handlers){var _c=new nexacro.MoveEventInfo(this,"onmove",_a,_b);return this.onmove._fireEvent(this,_c);}return false;};_pPopupDiv.on_fire_oncloseup=function(_a){if(this._callbackfunction){this._callbackfunction.call(this._callbackcontext,this.id,this.returnvalue);}if(this.oncloseup&&this.oncloseup._has_handlers){var _b=new nexacro.EventInfo(_a);_b.eventid="oncloseup";return this.oncloseup._fireEvent(this,_b);}return false;};_pPopupDiv.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv._detach=function(_a){this._attached_comp=null;};_pPopupDiv._popup=nexacro.PopupControl.prototype._popup;_pPopupDiv._popupBy=nexacro.PopupControl.prototype._popupBy;_pPopupDiv._closePopup=function(){nexacro.PopupControl.prototype._closePopup.apply(this,arguments);this._is_trackpopup=false;};_pPopupDiv._getWindow=nexacro.PopupControl.prototype._getWindow;_pPopupDiv._getWindowHandle=nexacro.PopupControl.prototype._getWindowHandle;_pPopupDiv._findOwnerElementHandle=nexacro.PopupControl.prototype._findOwnerElementHandle;_pPopupDiv._isPopupVisible=function(){return this.visible;};delete _pPopupDiv;}if(!nexacro._MenuItemControl){nexacro._MenuItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMenuItemControl=nexacro._createPrototype(nexacro.Static,nexacro._MenuItemControl);nexacro._MenuItemControl.prototype=_pMenuItemControl;_pMenuItemControl._type_name="MenuItemControl";_pMenuItemControl._is_subcontrol=true;_pMenuItemControl._use_selected_status=true;_pMenuItemControl.index=0;_pMenuItemControl.datarow=0;_pMenuItemControl._canExpand=true;_pMenuItemControl._id="";_pMenuItemControl.enable=true;_pMenuItemControl.level="";_pMenuItemControl.userdata=undefined;_pMenuItemControl.accessibilityrole="menuitem";_pMenuItemControl._is_simple_control=false;_pMenuItemControl.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._updateAccessibilityLabel(this);};_pMenuItemControl.on_tap_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;var _h=_g._popupmenu;var _i=this._getRootComponent(this);if(_h){if(_h._is_popup()){if(_g._previtemindex!=this.index){var _j=_g._items[_g._previtemindex];if(_j){_j._changeUserStatus("selected",false);}_g._previtemindex=this.index;}_h.cancelPopup();_g._menuitemindex=this.index;_g._popupitemindex= -1;}}if(this._canExpand&&this._isEnable()){_g._showPopup(this);if(_i instanceof nexacro.Menu){_i._popupitemindex=this.index;}}else{if(this.enable==false||_i.popuptype=="none"){return;}if(_i.onmenuclick&&_i.onmenuclick._has_handlers){_i._popupitemindex= -1;}if(_i._isPopupVisible()){_i._closePopup(true);}}return nexacro.Component.prototype.on_tap_basic_action.call(this,_a,_b,_c,_d,_e,_f);};_pMenuItemControl.on_getIDCSSSelector=function(){return "menuitem";};_pMenuItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._getTextSize(this.text);_b+=Math.ceil(_f[0]);_c+=Math.ceil(_f[1]);return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMenuItemControl._apply_setfocus=function(_a){var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);_b.setElementFocus(_c);}this._on_apply_selected(true);var _d=this.parent;if(_d){_d._menuitemindex=this.index;}};_pMenuItemControl._on_dragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=nexacro.Component.prototype._on_dragleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this._getRootComponent(this);if(_q.ondragleave){_q._last_mouseleave_iteminfo.index=this.index;_q._last_mouseleave_iteminfo.bindindex=this._bindindex;_q._last_mouseleave_iteminfo.level=this.parent.level;}return _p;};_pMenuItemControl._getTextSize=function(_a){var _b=this._getCurrentStyleInheritValue("font");return nexacro._getTextSize(_a,_b,false,undefined,this.wordWrap,this._getCurrentStyleInheritValue("wordSpacing"),this._getCurrentStyleInheritValue("letterSpacing"));};_pMenuItemControl._on_apply_mouseover=function(_a){this._changeStatus("mouseover",_a);};_pMenuItemControl._on_apply_selected=function(_a){this._changeUserStatus("selected",_a);};_pMenuItemControl._getWindowPosition=function(){var _a=this._control_element;if(_a){var _b=nexacro._getElementXYInWindow(_a.handle);var _c=_b[0];var _d=_b[1];return {x:_c,y:_d};}return {x:0,y:0};};_pMenuItemControl._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);if(_b&&_b._innerdataset){var _c=_b._innerdataset.getRowCount();_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a._canExpand?true:false);}};_pMenuItemControl._isSelected=function(){return this._userstatus=="selected"?true:false;};delete _pMenuItemControl;}if(!nexacro.Menu){nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=_a;this.fromreferenceobject=_g?_g:_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.MenuDragEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y){this.eventid=_b||"onmenudrag";this.id=_c;if(!_k){_k=_j;}this.cancelable=true;this.bubbles=true;this.dragdata=_d;this.userdata=_e;this.datatype=_f;this.filelist=_g;this.sourceobject=_h;this.sourcereferenceobject=_i;this.fromobject=_j;this.fromreferenceobject=_k;this.altkey=_m||false;this.ctrlkey=_n||false;this.button=_l||"";this.shiftkey=_o||false;this.metakey=_y||false;this.screenx=_p|| -1;this.screeny=_q|| -1;this.canvasx=_r|| -1;this.canvasy=_s|| -1;this.clientx=_t|| -1;this.clienty=_u|| -1;this.level=_v;this.index=_w;this.bindindex=_x;};var _pEventMenuDragEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuDragEventInfo);nexacro.MenuDragEventInfo.prototype=_pEventMenuDragEventInfo;_pEventMenuDragEventInfo._type_name="MenuDragEventInfo";delete _pEventMenuDragEventInfo;nexacro.MenuMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){this.eventid=_b||"onmenumouse";this.id=_c;this.cancelable=true;this.bubbles=true;this.fromobject=_n;this.fromreferenceobject=_o;this.altkey=_e||false;this.ctrlkey=_f||false;this.button=_d||"";this.shiftkey=_g||false;this.metakey=_s||false;this.screenx=_h|| -1;this.screeny=_i|| -1;this.canvasx=_j|| -1;this.canvasy=_k|| -1;this.clientx=_l|| -1;this.clienty=_m|| -1;this.level=_p;this.index=_q;this.bindindex=_r;};var _pEventMenuMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuMouseEventInfo);nexacro.MenuMouseEventInfo.prototype=_pEventMenuMouseEventInfo;_pEventMenuMouseEventInfo._type_name="MenuMouseEventInfo";delete _pEventMenuMouseEventInfo;nexacro.MenuContextMenuEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){nexacro.ContextMenuEventInfo.call(this,_a,_b,_n,_o,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_s);this.eventid=_b||"oncontextmenu";this.id=_c;this.bubbles=true;this.level=_p;this.index=_q;this.bindindex=_r;};var _pEventMenuContextMenuEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.MenuContextMenuEventInfo);nexacro.MenuContextMenuEventInfo.prototype=_pEventMenuContextMenuEventInfo;_pEventMenuContextMenuEventInfo._type_name="MenuContextMenuEventInfo";delete _pEventMenuContextMenuEventInfo;nexacro.Menu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._items=[];this._hot_key_list=[];this._items_width=[];};var _pMenu=nexacro._createPrototype(nexacro.Component,nexacro.Menu);nexacro.Menu.prototype=_pMenu;_pMenu._type_name="Menu";_pMenu.autohotkey=false;_pMenu.captioncolumn="";_pMenu.checkboxcolumn="";_pMenu.enablecolumn="";_pMenu.hotkeycolumn="";_pMenu.iconcolumn="";_pMenu.idcolumn="";_pMenu.levelcolumn="";_pMenu.userdatacolumn="";_pMenu.level=0;_pMenu.innerdataset=null;_pMenu.popuptype="normal";_pMenu.popupitemheight=undefined;_pMenu.navigationbuttonsize=undefined;_pMenu.popupnavigationbuttonsize=undefined;_pMenu.buttonalign="auto";_pMenu.accessibilityrole="menubar";_pMenu.accessibilityenable=true;_pMenu.accessibilitylabel="";_pMenu.accessibilitydescription="";_pMenu.accessibilityaction="";_pMenu.accessibilitydesclevel="all";_pMenu._menuitemindex= -1;_pMenu._menuitemonmouseenter=null;_pMenu._popupitemLR= -1;_pMenu._popupitemindex= -1;_pMenu._popupitempreviousindex=0;_pMenu._previtemindex=0;_pMenu._clickitemindex=0;_pMenu._hotkeytextgap=20;_pMenu._icontextpadding=5;_pMenu._focus_obj=null;_pMenu._innerdataset="";_pMenu._popupmenu=null;_pMenu._want_tab=nexacro._enableaccessibility;_pMenu._want_arrow=true;_pMenu._items_total_width=0;_pMenu._start_navigation_index=0;_pMenu._end_navigation_index=0;_pMenu._is_navigationbutton_visible=false;_pMenu._last_mouseleave_iteminfo={bindindex: -1,index: -1,level: -1};_pMenu._is_item_selected=false;_pMenu._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onmousedown":1,"onmouseup":1,"oninnerdatachanged":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pMenu.on_create_contents=function(){this._createMenu();};_pMenu.on_created_contents=function(){var _a=this.getElement();if(_a){var _b,_c,_d=this._items;if(_d){_c=this._items.length;for(_b=0;_b<_c;_b++ ){_d[_b].on_created();}}if(nexacro._enableaccessibility){this._setAccessibilityInfoLevel(this.level);}if(this._innerdataset&&this.enablecolumn){this.on_apply_enablecolumn();}var _e=this._hot_key_list;if(_e&&this.autohotkey==true){for(_b=0,_c=_e.length;_b<_c;_b++ ){this._registerItemHotkey(_e[_b].key);}}this._recalcLayout();}};_pMenu.on_create_contents_command=function(){var _a="";var _b=this._items;if(_b){var _c=this._items.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}}return _a;};_pMenu.on_attach_contents_handle=function(_a){var _b,_c,_d=this._items;if(_d){_c=this._items.length;for(_b=0;_b<_c;_b++ ){_d[_b].attachHandle(_a);}}if(this._innerdataset&&this.enablecolumn){this.on_apply_enablecolumn();}var _e=this._hot_key_list;if(this.autohotkey&&_e){for(_b=0,_c=_e.length;_b<_c;_b++ ){this._registerItemHotkey(_e[_b].key);}}this._recalcLayout();};_pMenu.on_destroy_contents=function(){var _a=this._popupmenu;if(_a){_a.destroy();}var _b,_c,_d=this._items;if(_d){_c=_d.length;for(_b=0;_b<_c;_b++ ){_d[_b].destroy();_d[_b]=null;}this._items=[];}var _e=this._hot_key_list;if(_e){for(_b=_e.length-1;_b> -1;_b-- ){var _f=_e[_b];this._unregisterItemHotkey(_f.key);_f.obj=null;}this._hot_key_list=[];}if(this._items_width){this._items_width.length=0;this._items_width=null;}this._removeEventHandlerToInnerDataset();};_pMenu.on_change_containerRect=function(_a,_b){var _c=this._items;var _d=_c.length;var _e=this._getCSSStyleValue("padding",this._status);if(_e){_b=_b-_e.top-_e.bottom;}var _f=this._isNavigationVisible();if(_f){this._showNavigationButton(true);this._rearrangeMenuItems();}else{var _g=this._end_navigation_index|0;this._end_navigation_index=0;this._showNavigationButton(false);var _h=this._items_width;var _i=0;for(var _l=0;_l<_d;_l++ ){var _j=_c[_l];var _k=_h[_l];_b=_b!=undefined?_b:_j.height;_j._applyElementVisible(true);if(_g){_j.move(_i,0,_k,_b);_i+=_k;}else{_j.resize(_k,_b);}}}};_pMenu._apply_setfocus=function(_a){var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);_b.setElementFocus(_c);}var _d=this._items[0];if(_d&&_a!="lbuttondown"){this._select_menuitem(0);}};_pMenu._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._items;var _g=_f.length;if(_g){var _h;var _i=0;var _j=0;var _k=this._items_width=[];var _l=null;for(var _m=0,_n=this._items.length;_m<_n;_m++ ){_h=_f[_m];_l=_h._on_getFitSize();_i=Math.ceil(_l[0]);_k.push(_i);_b+=_i;_j=Math.max(_j,_l[1]);}_c+=_j;}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMenu._on_hotkey=function(_a,_b,_c,_d){var _e=this._hot_key_list;var _f=_e.length;var _g=null;var _h=null;var _i=this._hotkey;if(_i){if(_i._keycode==_a&&(((_i._modifierkey&0x02)==0x02)==_b)&&(((_i._modifierkey&0x01)==0x01)==_c)&&(((_i._modifierkey&0x04)==0x04)==_d)){this.setFocus();return;}}for(var _l=0;_l<_f;_l++ ){var _j=_e[_l];_g=_j.key;var _k=_j.obj;if(_g._keycode==_a){_h=_g._modifierkey;if(_b==((_h&0x02)==0x02)&&_c==((_h&0x01)==0x01)&&_d==((_h&0x04)==0x04)){this.setFocus();this.on_fire_onitemclick(this,_j.id,"",_k.index,_k.parent.level,_k);break;}}}};_pMenu.on_get_accessibility_label=function(){return this.text?this.text:this.id;};_pMenu._unregisterItemHotkey=function(_a){if(!_a||!_a._is_registered){return;}var _b=this._getMainForm();if(this._is_frame||this==_b){var _c=this.getOwnerFrame();if(_c){nexacro._unregisterHotkeyComp(_c,this,_a);}}else{if(_b){nexacro._unregisterHotkeyComp(_b,this,_a);}}};_pMenu._registerItemHotkey=function(_a){if(!_a||_a._is_registered){return;}this._setAccessibilityHotKey(this.hotkey);var _b=this._getMainForm();if(this._is_frame||this==_b){var _c=this.getOwnerFrame();if(_c){nexacro._registerHotkeyComp(_c,this,_a);}}else{if(_b){nexacro._registerHotkeyComp(_b,this,_a);}}};_pMenu._getDlgCode=function(_a){var _b=nexacro.Event;var _c=this._want_tab;var _d=!(nexacro._enableaccessibility&&(_a==_b.KEY_DOWN||_a==_b.KEY_UP));this._want_tab=_c;return {want_tab:_c,want_return:true,want_escape:false,want_chars:false,want_arrows:_d};};_pMenu.set_autohotkey=function(_a){var _b=nexacro._toBoolean(_a);if(_b!=this.autohotkey){this.autohotkey=_b;this.on_apply_autohotkey(_b);}};_pMenu.on_apply_autohotkey=function(_a){var _b=this._popupmenu;var _c,_d;var _e;if(_b){_b.set_autohotkey(_a);}if(_a==true){_c=this._hot_key_list;if(_c&&_c.length> -1){for(_e=_c.length-1;_e> -1;_e-- ){_d=_c[_e];this._registerItemHotkey(_d.key);}}}else{_c=this._hot_key_list;if(_c&&_c.length> -1){for(_e=_c.length-1;_e> -1;_e-- ){_d=_c[_e];this._unregisterItemHotkey(_d.key);}}}};_pMenu.set_popupitemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.popupitemheight!=_a){this.popupitemheight=_a;this.on_apply_popupitemheight(_a);}};_pMenu.on_apply_popupitemheight=function(_a){var _b=this._popupmenu;if(_b){_b.set_itemheight(_a?_a:this.popupitemheight);}};_pMenu.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_b.indexOf(_a)== -1){return;}if(this.popuptype!=_a){this.popuptype=_a;this.on_apply_popuptype(_a);}};_pMenu.on_apply_popuptype=function(_a){var _b=this._popupmenu;if(_b){_b.set_popuptype(_a);}};_pMenu.set_navigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}this.navigationbuttonsize=_a;this.on_apply_navigationbuttonsize(_a);};_pMenu.on_apply_navigationbuttonsize=function(){if(this._is_created_contents){this.on_change_containerRect();}};_pMenu.set_popupnavigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}this.popupnavigationbuttonsize=_a;this.on_apply_popupnavigationbuttonsize(_a);};_pMenu.on_apply_popupnavigationbuttonsize=function(){if(this._is_created_contents){this.on_change_containerRect();}};_pMenu.on_apply_prop_enable=function(_a){var _b=this._popupmenu;if(_b){_b._setEnable(_a);}var _c=this._items;for(var _g=0,_h=_c.length;_g<_h;_g++ ){var _d=_c[_g];_d._setEnable(_a);}var _e=this.nextbutton;if(_e){_e._setEnable(_a);if(_a&&this._end_navigation_index==_h){_e._changeStatus("disabled",true);}}var _f=this.prevbutton;if(_f){_f._setEnable(_a);if(_a&&this._start_navigation_index==0){_f._changeStatus("disabled",true);}}};_pMenu.on_apply_prop_cssclass=function(){var _a=this._popupmenu;if(_a){_a.on_apply_cssclass();}var _b=this._items;for(var _d=0,_e=_b.length;_d<_e;_d++ ){var _c=_b[_d];_c.on_apply_cssclass();}};_pMenu.set_captioncolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_captioncolumn(_b);}if(_b!=this.captioncolumn){this.captioncolumn=_b;this.on_apply_captioncolumn();}};_pMenu.on_apply_captioncolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this.captioncolumn);if(_c){_a[_d].set_text(_c);}else{_a[_d].set_text("");}}}};_pMenu.set_checkboxcolumn=function(_a){var _b=_a;if(this._popupmenu){this._popupmenu.set_checkboxcolumn(_b);}if(_b!=this.checkboxcolumn){this.checkboxcolumn=_b;this._createMenu();}};_pMenu.set_enablecolumn=function(_a){if(_a!=this.enablecolumn){this.enablecolumn=_a;this.on_apply_enablecolumn();}};_pMenu.on_apply_enablecolumn=function(){if(this._innerdataset){this._createMenu();}if(this._popupmenu){this._popupmenu.set_enablecolumn(this.enablecolumn);}};_pMenu.set_hotkeycolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_hotkeycolumn(_a);}if(_a!=this.hotkeycolumn){this.hotkeycolumn=_a;this._createMenu();}};_pMenu.set_iconcolumn=function(_a){if(_a!=this.iconcolumn){this.iconcolumn=_a;this.on_apply_iconcolumn(_a);}};_pMenu.on_apply_iconcolumn=function(_a){var _b=this._items;if(_b){var _c=_b[this._menuitemindex];if(_c){_c._changeUserStatus("selected",true);}}if(this._is_created){this._recalcLayout();}var _d=this._popupmenu;if(_d){_d.set_iconcolumn(_a);}};_pMenu.set_idcolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_idcolumn(_a);}if(_a!=this.idcolumn){this.idcolumn=_a;this.on_apply_idcolumn();}};_pMenu.on_apply_idcolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this.idcolumn);_a[_d]._id=_c?_c:"";}}};_pMenu.set_levelcolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_levelcolumn(_b);}if(_b!=this.levelcolumn){this.levelcolumn=_b;this.on_apply_levelcolumn();}};_pMenu.on_apply_levelcolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this.levelcolumn);_a[_d].level=_c?_c: -1;}}};_pMenu.set_userdatacolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_userdatacolumn(_b);}if(_b!=this.userdatacolumn){this.userdatacolumn=_b;this.on_apply_userdatacolumn();}};_pMenu.on_apply_userdatacolumn=function(){if(this._innerdataset){if(this._is_created){this._recalcLayout();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this.userdatacolumn);if(_c){_a[_d].userdata=_c;}}}};_pMenu.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();}};_pMenu._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pMenu.getInnerDataset=function(){return this._innerdataset;};_pMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}};_pMenu.on_apply_innerdataset=function(){var _a=this._popupmenu;if(_a){_a.set_innerdataset(this.innerdataset);}this._setEventHandlerToInnerDataset();var _b=this.getElement();if(_b&&this.innerdataset){this._createMenu();this._last_focused=null;}};_pMenu.set_icontextpadding=function(_a){this._icontextpadding=_a;this.on_apply_icontextpadding();};_pMenu.on_apply_icontextpadding=function(){if(this._popupmenu){this._popupmenu.set_icontextpadding(this._icontextpadding);}};_pMenu.set_hotkeytextgap=function(_a){this._hotkeytextgap=_a;this.on_apply_hotkeytextgap();};_pMenu.on_apply_wordSpacing=function(_a){nexacro.Component.prototype.on_apply_wordSpacing.call(this,_a);this._createMenu();};_pMenu.on_apply_letterSpacing=function(_a){nexacro.Component.prototype.on_apply_letterSpacing.call(this,_a);this._createMenu();};_pMenu.isPopup=function(){return this._isPopupVisible();};_pMenu.trackPopup=function(_a,_b,_c,_d){_a=parseInt(_a);this._track_capture=_d==undefined?true:nexacro._toBoolean(_d);var _e=this._items;var _f=_e[_a];if(_e&&_f){this._showPopup(_f,_b-_f._adjust_left,_c,this._track_capture);this._menuitemindex=_e[_a].index;return true;}return false;};_pMenu.cancelPopup=function(){var _a=this._popupmenu;if(_a){if(_a.isPopup()){_a.cancelPopup();}}return true;};_pMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pMenu.on_notify_menuitem_onmouseleave=function(_a){this._last_mouseleave_iteminfo={index:_a.index,bindindex:_a._bindindex,level:_a.parent.level};};_pMenu.on_notify_menuitem_onmouseenter=function(_a){var _b=this._popupmenu;var _c;this._menuitemonmouseenter=_a;if(_b){if(_b._is_popup()||this._menuitemindex> -1){if(this._previtemindex!=_a.index){_b.cancelPopup();if(this._is_item_selected){this._showPopup(_a);_a._on_apply_selected(true);this._item_focus(_a,true);this._menuitemindex=_a.index;}_c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);_c._changeStatus("focused",false);}this._previtemindex=_a.index;}}}else{if(this._previtemindex!=_a.index){_c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);_c._changeStatus("focused",false);}}if(this._is_item_selected&&this._menuitemindex> -1&&_a.enable){this._showPopup(_a);this._item_focus(_a,true);_a._on_apply_selected(true);this._previtemindex=this._menuitemindex=_a.index;}else if(this._menuitemindex!=_a.index){this._menuitemindex= -1;}}this._popupitemindex=_a.index;return true;};_pMenu.on_notify_menuitem_onclick=function(_a){if(!_a){return;}var _b=this.popuptype;if(_a.enable==false||_b=="none"){return;}if(nexacro._enableaccessibility){this._want_tab=true;}if(!this._is_alive){return;}if(this._previtemindex!=_a.index){var _c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);}this._previtemindex=_a.index;}if(this._isEnable()&&this.enableevent&&_a._isEnable()){var _d=this._getRootComponent(_a);if(!_a._canExpand){this.on_fire_onitemclick(_d,_a._id,_a.userdata,_a.index,_a.parent.level,_a);}}this._item_focus(_a,false);if(this._isPopupVisible()){_a._on_apply_selected(true);}if(this._menuitemindex> -1){this._is_item_selected=true;}};_pMenu.on_notify_menuitem_onlbuttondown=function(_a){if(this._previtemindex!=_a.index){var _b=this._items[this._previtemindex];if(_b){_b._on_apply_selected(false);}}var _c=this._popupmenu;if(_c){if(_c._is_popup()){_c.cancelPopup();this._popupitemindex=_a.index;this._is_item_selected=false;this._item_focus(_a,false);return;}}else{this._menuitemonmouseenter=_a;}if(_a._canExpand&&_a._isEnable()){this._showPopup(_a);this._menuitemindex=_a.index;}else if(this._menuitemindex> -1){this._item_focus(_a,false);_a._on_apply_selected(false);this._menuitemindex= -1;this._is_item_selected=false;return;}if(this._menuitemindex!=_a.index){this._item_focus(_a,true);_a._on_apply_selected(true);}this._previtemindex=this._menuitemindex=_a.index;};_pMenu.on_notify_navigationnext_onclick=function(){this._closePopup();this._navigationNext();};_pMenu.on_notify_navigationprev_onclick=function(){this._closePopup();this._navigationPrev();};_pMenu.on_notify_onclosepopup=function(_a){var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}var _c=this._items;if(_c){var _d=this._previtemindex;var _e=_c[_d];if(_e){_e._on_apply_selected(false);}this._popupitemindex=this._menuitemindex= -1;}};_pMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onlbuttondown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onlbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pMenu.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onrbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onrbuttondown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onrbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pMenu.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.MenuContextMenuEventInfo(this,"oncontextmenu",_n.id,_c,_h,_i,_j,_k,_l,_d,_e,_f,_g,_a,_n,_n.level,_n.index,_n._bindindex,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseup",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousedown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmouseenter._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex,_m);return this.onmouseleave._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousemove&&this.onmousemove._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousemove",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmousemove._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.ondrag&&this.ondrag._has_handlers){var _o=this._getDragData();var _p=this._getEventInfoComponent(_m);var _q=new nexacro.MenuDragEventInfo(this,"ondrag",_p.id,_o,null,"text",null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_p.level,_p.index,_p._bindindex,_n);return [this.ondrag._fireUserEvent(this,_q),this,_m,_o,_q.userdata];}return [false];};_pMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondrop&&this.ondrop._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondrop",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondrop._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragenter&&this.ondragenter._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragenter",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondragenter._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragleave&&this.ondragleave._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragleave",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex,_s);return this.ondragleave._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragmove&&this.ondragmove._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragmove",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondragmove._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro._enableaccessibility;var _i=this._popupmenu_find(this);var _j;var _k=this._isPopupmenuVisible(this);var _l=this._menuitemindex> -1?this._menuitemindex:this._popupitemindex;var _m=this._items;var _n;if(_m[_l]){_n=this._popupmenuitem_extend(_m[_l]);}var _o=nexacro.Event;var _p;switch(_a){case _o.KEY_UP:if(_h){break;}if(!_k){if(_n){_j=this._items[_l];if(_j){this._showPopup(_j);}}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_DOWN:if(_h){break;}if(!_k){if(_n&&_l> -1){_j=this._items[_l];if(_j){this._showPopup(_j);this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else if(_l== -1){this._select_menuitem(0);}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_LEFT:if(_h&&!_k&&this._menuitemindex<= -1){if(this._isNavigationVisible()){this._start_navigation_index=0;this._rearrangeMenuItems(false,1);}_p=_l;this._select_menuitem(this._getItemIndex( -1),_p,_k,"prev");}else if(!_h){if(_l== -1){this._select_menuitem(0);}else if(_l> -1&&(!_k||(nexacro._isNull(this._popupmenu))||this._popupmenu._popupitemindex<0)){this._select_menuitem(this._getItemIndex( -1),_l,_k,"prev");}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}break;case _o.KEY_RIGHT:if(_h&&!_k&&this._menuitemindex<= -1){if(this._isNavigationVisible()){this._start_navigation_index=0;this.nextbutton._changeStatus("disabled",false);this.prevbutton._changeStatus("disabled",true);this._rearrangeMenuItems(false, -1);}_p=_l;this._select_menuitem(this._getItemIndex(1),_p,_k);}else if(!_h){if(_l== -1){this._select_menuitem(0);}else if(_l> -1&&(!_k||!_n)){this._select_menuitem(this._getItemIndex(1),_l,_k,"next");}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}break;case _o.KEY_ENTER:if(!_k){_j=this._items[this._menuitemindex];if(_n){if(_j&&_j._isEnable()){this._showPopup(_j);}this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{if(_j){var _q=_j._userstatus=="selected"?true:false;this.on_notify_menuitem_onclick(_j);if(_q){_j._changeUserStatus("selected",false);this._is_item_selected=false;}else{_j._changeUserStatus("selected",true);}}}}else if(!_h){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_ESC:if(_k){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{_j=this._items[this._menuitemindex];if(_f.parent==_i){this._item_killfocus(_j);_j._on_apply_selected(false);this._menuitemindex= -1;}else{_j._on_focus(false);}}break;default:break;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pMenu.on_fire_onkillfocus=function(_a,_b){this._closePopup();var _c=this._menuitemindex;if(_c> -1){var _d=this._items[_c];if(_d){_d._on_apply_selected(false);}}var _e=this._last_focused;if(_e&&_e!=_a){this._do_defocus(_e,true);this._popupitemindex= -1;this._menuitemindex= -1;this._last_focused=null;}this._is_item_selected=false;nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);};_pMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){if(this.onmenuclick&&this.onmenuclick._has_handlers){var _g=new nexacro.MenuClickEventInfo(_a,"onmenuclick",_b,_c,_d,_e,_f);this.onmenuclick._fireEvent(this,_g);}};_pMenu._fire_on_Popupmenu=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu;if(_h){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pMenu._createMenu=function(){var _a=this.getElement();if(_a){this._deleteMenu();var _b=this._innerdataset;if(_b&&this.captioncolumn&&this.captioncolumn&&this.idcolumn){var _c=0;var _d=0;var _e=0;var _f=_b.getRowCount();var _g,_h,_i,_j,_k,_l;var _m;var _n=true;var _o=this._getMenuHeight();for(var _r=0;_r<_f;_r++ ){_i=_b.getColumn(_r,this.hotkeycolumn);_j=_b.getColumn(_r,this.idcolumn);_k=_b.getColumn(_r,this.levelcolumn);if(_r==(_f-1)||_k>=_b.getColumn(_r+1,this.levelcolumn)){_n=false;}if(_k==0){_g=_b.getColumn(_r,this.captioncolumn);_h=_b.getColumn(_r,this.enablecolumn);_l=_b.getColumn(_r,this.userdatacolumn);_m=new nexacro._MenuItemControl("item"+_r,0,0,0,0,null,null,null,null,null,null,this);this._items.push(_m);_m.userdata=_l;_m._bindindex=_r;_m.index=_e++ ;_m.datarow=_r;_m._id=_j?_j:"";_m.level=_k;if(_g){_m.set_text(_g);}_m._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);_m._setEventHandler("onclick",this.on_notify_menuitem_onclick,this);if(!(nexacro._isTouchInteraction&&nexacro._SupportTouch)){_m._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);_m._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}if(_r==_b.getRowCount()-1){_m._canExpand=false;}else{_k=_b.getColumn(_r+1,this.levelcolumn);if(_k<=this.level){_m._canExpand=false;}}_m.set_enable(_h==false||_h=="false"||_h==0||_h=="0"?false:true);_m.createComponent();}if(_i&&!_n){this._setHotkey(_j,_i,_m);}}if(this.fittocontents!=="none"){this._update_position();}if(this._items.length){this._items_width=[];var _p;var _q=this._items[0]._getCurrentStyleBorder();for(_r=0;_r<this._items.length;_r++ ){_m=this._items[_r];_p=_m._on_getFitSize();_d=_o-(_q?_q.top._width+_q.bottom._width:0);_m.move(_c,0,_p[0],_d);this._items_width.push(_p[0]);this._items_total_width+=_p[0];_c+=_p[0];}}}}};_pMenu._deleteMenu=function(){var _a=this._hot_key_list;var _b=_a.length;var _c,_d=this._getMainForm();for(_c=0;_c<_b;_c++ ){nexacro._unregisterHotkeyComp(_d,this,_a[_c].key);}this._hot_key_list=[];this._items_width=[];this._items_total_width=0;var _e=this._items;if(_e){_b=_e.length;for(_c=0;_c<_b;_c++ ){_e[_c].destroy();_e[_c]=null;}this._items=[];}};_pMenu._createNavigationButton=function(){var _a=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);_a._setControl("ButtonControl");_a.createComponent();_a.set_visible(true);_a._setEventHandler("onclick",this.on_notify_navigationprev_onclick,this);_a.on_created();_a._changeStatus("disabled",true);this.prevbutton=_a;var _b=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);_b._setControl("ButtonControl");_b.createComponent();_b.set_visible(true);_b._setEventHandler("onclick",this.on_notify_navigationnext_onclick,this);_b.on_created();this.nextbutton=_b;};_pMenu._recalcLayout=function(){if(this._isNavigationVisible()){this._showNavigationButton(true);}else{this._showNavigationButton(false);}this._rearrangeMenuItems();};_pMenu._showNavigationButton=function(_a){this._is_navigation_visible=_a;var _b,_c;if(_a){if(!this.nextbutton||!this.prevbutton){this._createNavigationButton();}if(!this.nextbutton._is_created){this.nextbutton.on_created();}if(!this.prevbutton._is_created){this.prevbutton.on_created();}_c=this.nextbutton;_b=this.prevbutton;var _d=this.navigationbuttonsize;var _e=0;var _f=0;if(!_d){var _g=this._getNavigationbuttonWidth(_b,_c);_e=_g[0];_f=_g[1];}else{_e=_d;_f=_d;}var _h=this._getClientWidth();var _i=this._getClientHeight();_b.set_visible(true);_b.move(0,0,_e,_i);_c.set_visible(true);_c.move(_h-_f,0,_f,_i);}else{_c=this.nextbutton;if(_c){_c.set_visible(false);_c.move(0,0,0,0);}_b=this.prevbutton;if(_b){_b.set_visible(false);_b.move(0,0,0,0);}}};_pMenu._rearrangeMenuItems=function(_a,_b){var _c,_d;var _e=this._items;var _f=this._items_width;var _g=_f.length;var _h=this._start_navigation_index;var _i=this._end_navigation_index;var _j=this._getClientWidth();var _k=this._is_navigation_visible?(this.navigationbuttonsize||this._prev_width||0):0;var _l=this._is_navigation_visible?(this.navigationbuttonsize||this._next_width||0):0;var _m=_k+_l;var _n=0;if(this.fittocontents=="height"||this.fittocontents=="both"){if(_e[0]){_n=_e[0]._on_getFitSize()[1];}}else{_n=this._getMenuHeight();}if(_a){for(_c=_i-1;_c>=0;_c-- ){_m+=_f[_c];_h=_c;if(_c==_i-1||_m>_j){break;}}for(_c=0,_d=_h;_c<_d;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}for(_c=_h;_c<_i;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(true);_e[_c].move(_k,0,_f[_c],_n);}_k+=_f[_c];}if(_i>0&&_i<_g){for(_c=_i+1;_c<_g;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}}}else{for(_c=0,_d=_h;_c<_d;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}for(_c=_h;_c<_g;_c++ ){_m+=_f[_c];if(_c==_h||_m<=_j){if(_e[_c]){_e[_c]._applyElementVisible(true);_e[_c].move(_k,0,_f[_c],_n);}}else{if(_b<0&&_c==_i&&_i==this._end_navigation_index){return true;}break;}_i=_c+1;_k+=_f[_c];}if(_i>0&&_i<_g){for(_c=_i;_c<_g;_c++ ){_e[_c]._applyElementVisible(false);}}}this._start_navigation_index=_h;this._end_navigation_index=_i;};_pMenu._navigationNext=function(_a){var _b=this._items.length;var _c=this._end_navigation_index;var _d=false;if(_c<_b){if(this._start_navigation_index==0){this.prevbutton._changeStatus("disabled",false);}this._start_navigation_index++ ;}if(_a&&_c>=_b){this._start_navigation_index=0;this.nextbutton._changeStatus("disabled",false);this.prevbutton._changeStatus("disabled",true);}var _e=this._rearrangeMenuItems(_d, -1);if(_e){this._navigationNext();}if(this._end_navigation_index==_b){this.nextbutton._changeStatus("disabled",true);}};_pMenu._navigationPrev=function(_a){var _b=this._start_navigation_index;var _c=this._items.length;var _d=false;if(_b>0){_b-- ;if(_b==0){this.prevbutton._changeStatus("disabled",true);}}else if(_a&&_b<=0){this._end_navigation_index=_c;this.nextbutton._changeStatus("disabled",true);this.prevbutton._changeStatus("disabled",false);_d=true;}this._start_navigation_index=_b;var _e=this._rearrangeMenuItems(_d,1);if(_e){this._navigationPrev(true);}if(_c>this._end_navigation_index){this.nextbutton._changeStatus("disabled",false);}};_pMenu._showPopup=function(_a,_b,_c,_d){var _e=this.popuptype;if(_e=="none"){return;}if(this._innerdataset&&this.levelcolumn&&this.captioncolumn&&this.idcolumn&&_a._canExpand===true){var _f=this._popupmenu;if(_f==null){_f=this._popupmenu=new nexacro.PopupMenu("menupopupmenu",0,0,0,0,null,null,null,null,null,null,this);_f._setControl();_f._is_focus_accept=false;this._setPopupContains(true);var _g=this._color?this._color:this._getCurrentStyleInheritValue("color");if(_g){_f.set_color(_g.value);}var _h=this._font?this._font:this._getCurrentStyleInheritValue("font");if(_h){_f.set_font(_h.value);}_f.level=1;_f.index=_a.index;_f.datarow=_a.datarow+1;_f.setInnerDataset(this._innerdataset);_f.set_iconcolumn(this.iconcolumn);_f.set_captioncolumn(this.captioncolumn);_f.set_checkboxcolumn(this.checkboxcolumn);_f.set_hotkeycolumn(this.hotkeycolumn);_f.set_idcolumn(this.idcolumn);_f.set_levelcolumn(this.levelcolumn);_f.set_userdatacolumn(this.userdatacolumn);_f.set_enablecolumn(this.enablecolumn);_f.set_navigationbuttonsize(this.popupnavigationbuttonsize);_f.set_cssclass(this.cssclass);_f.createComponent();_f._setEventHandler("oncloseup",this.on_notify_onclosepopup,this);}else{_f.datarow=_a.datarow+1;_f.set_cssclass(this.cssclass);}if(this._icontextpadding){_f.set_icontextpadding(this._icontextpadding);}if(this.popupitemheight){_f.set_itemheight(this.popupitemheight);}_f.popuptype=this.popuptype;_f._track_capture=_d;_f._trackPopup(_a,"vertical",_b,_c);this._is_item_selected=true;if(_f._is_popup()){var _i=this._getWindow();if(_i){if(this._track_capture){_i._setCaptureLock(this,true,false);}else{_i._releaseCaptureLock();}}}}};_pMenu._closePopup=function(){var _a=this._popupmenu;if(_a){_a.cancelPopup();var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}}var _c=this._menuitemindex;{var _d=this._items[_c];if(_d){_d._on_apply_selected(false);}}this._popupitemindex= -1;this._menuitemindex= -1;};_pMenu._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pMenu._callbackFromDataset=function(_a,_b){var _c=_b.reason;if(_c==91){this._deleteMenu();}else{this._createMenu();if(this._is_created){this._recalcLayout();}}};_pMenu._item_focus=function(_a,_b){var _c=this._last_focused;if(_c&&_c!=_a){this._do_defocus(_c,false);}if(_c!=_a){if(nexacro._enableaccessibility){if(_a instanceof nexacro._PopupMenuItemControl){_a._on_focus(false,"downkey");}else{_a._on_focus(true,"downkey");}}else{_a._on_focus(false,"");}if(!(_a instanceof nexacro._PopupMenuItemControl)){this._last_focused=_a;}}};_pMenu._item_killfocus=function(_a){if(_a){if(nexacro._enableaccessibility){var _b=this._getWindow();if(_b){_b._removeFromCurrentFocusPath(_a,true);}}}};_pMenu._select_menuitem=function(_a,_b,_c,_d){var _e=this._items[_a> -1?_a:this._menuitemindex];var _f=this._items[_b];this._closePopup();if(_f&&_a!=_b){_f._on_apply_selected(false);this._do_defocus(_f,false);}if(this._isNavigationVisible()&&_d){if(_d=="next"){if(_a<this._previtemindex||_a>=this._end_navigation_index){this._navigationNext(true);}}else if(_d=="prev"){if(_a>this._previtemindex||_a<this._start_navigation_index){this._navigationPrev(true);}}}this._previtemindex=this._menuitemindex=_a;if(this._is_item_selected){this._showPopup(_e);_e._on_focus(false);var _g=this._popupmenu;if(_g){_g._select_menuitem(_g._getItemIndex(0));}}this._item_focus(_e,true);_e._on_apply_selected(true);};_pMenu._getItemIndex=function(_a){if(_a===undefined){_a=0;}var _b=this._menuitemindex> -1?this._menuitemindex:this._popupitemindex;_b+=_a;var _c=this._items?this._items.length-1:0;if(_b>_c){_b=0;}else if(_b<0){_b=_c;}var _d=this._items[_b];if(!nexacro._enableaccessibility&&_d&&_d.enable==false&&_a<5&&_a> -5){return this._getItemIndex(_a+_a);}return _b;};_pMenu._getMenuHeight=function(){var _a=0;if(this.fittocontents=="height"||this.fittocontents=="both"){_a=this._on_getFitSize()[1];}else{var _b=0;var _c=this._getCurrentStyleBorder();var _d=this._getCurrentStylePadding();if(_c){_b+=_c._getBorderHeight();}if(_d){_b+=_d.top+_d.bottom;}_a=this._adjust_height-_b;}return _a;};_pMenu._getNavigationbuttonWidth=function(_a,_b){var _c=0;var _d,_e,_f,_g=0;var _h=_a._getCSSStyleValue("icon","enabled");if(_h){_d=nexacro._getImageSize(_h.url,nexacro._emptyFn,this);if(_d){_g=_d.width;_e=_a._getCSSStyleValue("padding",this._status);_f=_a._getCSSStyleValue("border",this._status);if(_e){_g+=_e.left+_e.right;}if(_f){if(_f._single){_g+=_f.top._width+_f.top._width;}else{_g=_f.left._width+_f.right._width;}}this._prev_width=_g;}}var _i=_b._getCSSStyleValue("icon","enabled");if(_i){_d=nexacro._getImageSize(_i.url,nexacro._emptyFn,this);if(_d){_c=_d.width;_e=_b._getCSSStyleValue("padding",this._status);_f=_b._getCSSStyleValue("border",this._status);if(_e){_c+=_e.left+_e.right;}if(_f){if(_f._single){_c+=_f.top._width+_f.top._width;}else{_c=_f.top._width+_f.bottom._width;}}this._next_width=_c;}}return [_g,_c];};_pMenu._getPopupControl=function(){return this._getRootComponent(this)._popupmenu;};_pMenu._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a.parent;}return _a;};_pMenu._setEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._setEventHandler("onload",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);}};_pMenu._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset=null;}};_pMenu._setFocus=function(_a,_b){var _c=this._previtemindex;if(_b> -1||_b<4){this._focus_direction=_b;}else{this._focus_direction= -1;}var _d=this.setFocus(_a);var _e=this._items;var _f=_e.length-1;if(this._isNavigationVisible()){this._previtemindex=0;this._start_navigation_index=0;this._rearrangeMenuItems(false,1);}if(_f>0){if(_b>=2){this._focus_obj=this;this._menuitemindex= -1;}else{if(_b==0){this._menuitemindex=0;}else if(_b==1){this._menuitemindex=_f;}this._focus_obj=_e[this._menuitemindex];this._menuitemonmouseenter=this._focus_obj;this._select_menuitem(0,_c);}}else{if(nexacro._enableaccessibility){this._focus_obj=this;}this._previtemindex=0;this._menuitemindex= -1;var _g=this._last_focused;if(_g){this._do_defocus(_g,true);}this._on_focus(true);}return _d;};_pMenu._setHotkey=function(_a,_b,_c){var _d=new nexacro._HotKey(_b);if(_d._isEmpty()){delete _d;}else{if(this._is_created){this._registerItemHotkey(_d);}}var _e={id:_a,key:_d,obj:_c};this._hot_key_list.push(_e);};_pMenu._loaded_expImage=function(_a,_b,_c){this._expImage_width=_b;this._expImage_height=_c;};_pMenu._loaded_chkImage=function(_a,_b,_c){this._chkImage_width=_b;this._chkImage_height=_c;};_pMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=_a;if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b){_e=nexacro._getImageSize(_d,this._loaded_expImage,this);if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else{_e=nexacro._getImageSize(_d,this._loaded_chkImage,this);if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}}}};_pMenu._isPopupVisible=function(){return this._popupmenu?this._popupmenu._is_popup():false;};_pMenu._isPopupmenuVisible=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return false;}return true;};_pMenu._isNavigationVisible=function(){if(this._items_total_width>this._getClientWidth()){return true;}return false;};_pMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return _a._items;}return _a._popupmenu._items;};_pMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu.visible==false){break;}_b=_b._popupmenu;}return _b;};_pMenu._popupmenuitem_extend=function(_a){return _a._canExpand;};_pMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);_a._changeStatus("focused",false);if(_b){_c._removeFromCurrentFocusPath(this,false);}};delete _pMenu;}if(!nexacro._PopupMenuItemControl){nexacro._PopupMenuItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._MenuItemControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pPopupMenuItemControl=nexacro._createPrototype(nexacro._MenuItemControl,nexacro._PopupMenuItemControl);nexacro._PopupMenuItemControl.prototype=_pPopupMenuItemControl;_pPopupMenuItemControl._type_name="PopupMenuItemControl";_pPopupMenuItemControl._is_subcontrol=true;_pPopupMenuItemControl.expimgelem=null;_pPopupMenuItemControl.chkwidth=0;_pPopupMenuItemControl.textwidth=0;_pPopupMenuItemControl.hotkeywidth=0;_pPopupMenuItemControl.expwidth=0;_pPopupMenuItemControl.expheight=0;_pPopupMenuItemControl.index=0;_pPopupMenuItemControl.datarow=0;_pPopupMenuItemControl.icon="";_pPopupMenuItemControl.userdata=undefined;_pPopupMenuItemControl.buttonalign="";_pPopupMenuItemControl.accessibilityrole="menuitem";_pPopupMenuItemControl._id="";_pPopupMenuItemControl._check=false;_pPopupMenuItemControl._icon=null;_pPopupMenuItemControl._hotkeytext="";_pPopupMenuItemControl._canExpand=true;_pPopupMenuItemControl._hotkey_string="";_pPopupMenuItemControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=new nexacro.Static("popupmenuitemtext",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b._is_eventinfo_control=false;_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b.createComponent();var _c=new nexacro.Static("popupmenuitemhotkeytext",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c._is_eventinfo_control=false;_c._setEventHandler("onclick",this.on_notify_itemclick,this);_c.set_text(this._hotkeytext?this._hotkeytext:"");_c.createComponent();this._textcontrol=_b;this._hotkeytextcontrol=_c;}};_pPopupMenuItemControl.on_created_contents=function(_a){this.on_apply_text();this._on_apply_hotkeytext();if(this._textcontrol){this._textcontrol.on_created(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol.on_created(_a);}if(this._iconcontrol){this._iconcontrol.on_created(_a);}if(this._expiconcontrol){this._expiconcontrol.on_created(_a);}};_pPopupMenuItemControl.on_create_contents_command=function(){var _a="";if(this._textcontrol){_a+=this._textcontrol.createCommand();}if(this._hotkeytextcontrol){_a+=this._hotkeytextcontrol.createCommand();}if(this._iconcontrol){_a+=this._iconcontrol.createCommand();}if(this._expiconcontrol){_a+=this._expiconcontrol.createCommand();}return _a;};_pPopupMenuItemControl.on_attach_contents_handle=function(_a){if(this._textcontrol){this._textcontrol.attachHandle(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol.attachHandle(_a);}if(this._iconcontrol){this._iconcontrol.attachHandle(_a);}if(this._expiconcontrol){this._expiconcontrol.attachHandle(_a);}};_pPopupMenuItemControl.on_destroy_contents=function(){if(this._textcontrol){this._textcontrol.destroy();this._textcontrol=null;}if(this._hotkeytextcontrol){this._hotkeytextcontrol.destroy();this._hotkeytextcontrol=null;}if(this._iconcontrol){this._iconcontrol.destroy();this._iconcontrol=null;}if(this._expiconcontrol){this._expiconcontrol.destroy();this._expiconcontrol=null;}};_pPopupMenuItemControl.on_change_containerRect=function(){this._updateControlPosition();};_pPopupMenuItemControl.on_get_accessibility_label=function(){var _a=this.text;var _b=this._hotkeytext;return _a+" "+_b;};_pPopupMenuItemControl.on_getIDCSSSelector=function(){return "popupmenuitem";};_pPopupMenuItemControl.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._textcontrol){this._textcontrol._setEnable(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol._setEnable(_a);}if(this._iconcontrol){this._iconcontrol._setEnable(_a);}if(this._expiconcontrol){this._expiconcontrol._setEnable(_a);}};_pPopupMenuItemControl.on_apply_text=function(_a){if(this._textcontrol){this._textcontrol.set_text(_a);}};_pPopupMenuItemControl.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._updateAccessibilityLabel(this);};_pPopupMenuItemControl._on_apply_hotkeytext=function(){if(this._hotkeytextcontrol){this._hotkeytextcontrol.set_text(this._hotkeytext);}};_pPopupMenuItemControl.on_notify_itemclick=function(_a,_b){var _c=this.parent;if(_c){_c.on_notify_menuitem_onclick(this,_b);}};_pPopupMenuItemControl._on_apply_mouseover=function(_a){if(this.selected){return;}if(_a){this._changeStatus("mouseover",true);}else{this._changeStatus("mouseover",false);}};_pPopupMenuItemControl._isFocusAcceptable=function(){return false;};_pPopupMenuItemControl._load_image=function(_a){var _b=this._control_element;if(_b){if(_a){var _c=this._expiconcontrol;if(!_c){_c=new nexacro._IconText("popupmenuitemexpandimage",0,0,0,0,null,null,null,null,null,null,this);_c._setEventHandler("onclick",this.on_notify_itemclick,this);_c._setControl();_c.createComponent();this._expiconcontrol=_c;}else{_c.set_text("");}_c.set_icon(_a);}}};_pPopupMenuItemControl._updateControlPosition=function(){if(!this._is_created_contents){return;}var _a=this._getItemControlPosition();if(!_a){return;}var _b=this._getClientHeight();var _c=_a.icon_x;var _d=_a.iconimgwidth;var _e=_a.iconheight;var _f=_a.text_x;var _g=_a.textwidth;var _h=_a.textheight;var _i=_a.hotkey_x;var _j=_a.hotkeywidth;var _k=_a.hotkeyheight;var _l=_a.gap;var _m=_j?_i+_j+_l:_i;var _n=_a.expimgwidth?_a.expimgwidth:10;var _o=_a.expimgheight?_a.expimgheight:this.height;var _p=_o?((_b-_o)/2):0;var _q=this._iconcontrol;if(_q){_q.move(_c,0,_d,_e);}var _r=this._expiconcontrol;var _s=this._hotkeytextcontrol;if(this._canExpand&&_r){_r.move(_m,_p,_n,_o);if(_s){_s.set_visible(false);}}else if(_s){if(_s.text==""){_s.set_visible(false);}else{_s.set_visible(true);_s.move(_i,0,_j,_k);}}var _t=this._textcontrol;if(_t){_t.move(_f,0,_g,_h);}};_pPopupMenuItemControl._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);var _c=_b._innerdataset.getRowCount();if(_a){_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a._canExpand?true:false);}};_pPopupMenuItemControl._getWindowPosition=function(){return nexacro.Component.prototype._getWindowPosition.call(this);};_pPopupMenuItemControl._isChecked=function(){var _a=this._check;if(!!_a||_a.toString().toLowerCase()=="true"){return true;}return false;};_pPopupMenuItemControl._getItemControlPosition=function(){return this.parent._itempos;};_pPopupMenuItemControl._getWidth=function(){var _a=this.chkwidth;var _b=this.textwidth;var _c=this.hotkeywidth;var _d=this.expwidth;var _e=this.gap;if(_b>0){_a+=(_b+_e);}if(_c>0&&_d>0){_a+=Math.max(_c,_d)+_e;}else{if(_c>0){_a+=(_c+_e);}_a+=_d;}return _a;};_pPopupMenuItemControl._setId=function(_a){this._id=_a;};_pPopupMenuItemControl._setCheck=function(_a){this._check=_a;if(this._check){var _b=this._iconcontrol;if(!_b){_b=new nexacro._Icon("popupmenuitemcheckbox",0,0,0,0,null,null,null,null,null,null,this);_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b._setControl();_b.createComponent();this._iconcontrol=_b;if(this._is_created_contents){_b.on_created();}}}};_pPopupMenuItemControl._setIcon=function(_a){this._icon=_a;var _b=this._iconcontrol;if(!_b){_b=new nexacro._Icon("popupmenuitemicon",0,0,0,0,null,null,null,null,null,null,this);_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b._setControl();_b.createComponent();this._iconcontrol=_b;}var _c=this._icon;if(_c){_b.set_icon(_c);}};_pPopupMenuItemControl._setHotkeyText=function(_a){if(this._hotkeytext!=_a){this._hotkeytext=_a;this._on_apply_hotkeytext();}};_pPopupMenuItemControl._setExpandimage=function(){if(this._canExpand){var _a=this._expiconcontrol;if(!_a){_a=new nexacro._IconText("popupmenuitemexpandimage",0,0,0,0,null,null,null,null,null,null,this);_a._setEventHandler("onclick",this.on_notify_itemclick,this);_a._setControl();_a.createComponent();this._expiconcontrol=_a;}var _b=_a._getCSSStyleValue("icon");if(!_b){_a.set_text(">");}}};_pPopupMenuItemControl._setUserdata=function(_a){if(this.userdata!=_a){this.userdata=_a;}};delete _pPopupMenuItemControl;}if(!nexacro.PopupMenu){nexacro.MenuCloseUpEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"oncloseup";this.fromobject=_a;this.fromreferenceobject=_d?_d:_a;this.isselect=_c;};var _pMenuCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuCloseUpEventInfo);nexacro.MenuCloseUpEventInfo.prototype=_pMenuCloseUpEventInfo;_pMenuCloseUpEventInfo._type_name="MenuCloseUpEventInfo";delete _pMenuCloseUpEventInfo;nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=_a;this.fromreferenceobject=_g?_g:_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.PopupMenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._attached_comp=this;this._items=[];this._lineItems=[];this._hot_key_list=[];this._itempos={};this._last_mouseleave_iteminfo={bindindex: -1,index: -1,level: -1};this._iconImage_info={};};var _pPopupMenu=nexacro._createPrototype(nexacro.PopupControl,nexacro.PopupMenu);nexacro.PopupMenu.prototype=_pPopupMenu;_pPopupMenu._type_name="PopupMenu";_pPopupMenu._popupmenu=null;_pPopupMenu._innerdataset="";_pPopupMenu.autohotkey=false;_pPopupMenu.innerdataset="";_pPopupMenu.captioncolumn="";_pPopupMenu.checkboxcolumn="";_pPopupMenu.enablecolumn="";_pPopupMenu.hotkeycolumn="";_pPopupMenu.iconcolumn="";_pPopupMenu.idcolumn="";_pPopupMenu.levelcolumn="";_pPopupMenu.userdatacolumn="";_pPopupMenu.itemheight=undefined;_pPopupMenu.navigationbuttonsize=undefined;_pPopupMenu.accessibilityrole="menu";_pPopupMenu._closeflag=true;_pPopupMenu._is_updatedimages=false;_pPopupMenu._is_navigation_visible=false;_pPopupMenu._is_fire_onpopup=undefined;_pPopupMenu.level=0;_pPopupMenu.datarow=0;_pPopupMenu.beforeindex= -1;_pPopupMenu._start_navigation_index=0;_pPopupMenu._end_navigation_index=0;_pPopupMenu._previtemindex=0;_pPopupMenu._popupitemindex= -1;_pPopupMenu._popupitempreviousindex= -1;_pPopupMenu._selected_itemindex= -1;_pPopupMenu._itemheight=0;_pPopupMenu._items_total_height=0;_pPopupMenu._icontextpadding=5;_pPopupMenu._want_arrow=true;_pPopupMenu._want_tab=true;_pPopupMenu._is_subcontrol=false;_pPopupMenu._is_trackpopup=false;_pPopupMenu._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onpopup":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"oncloseup":1,"oninnerdatachanged":1};_pPopupMenu.on_create_contents=function(){return;};_pPopupMenu.on_created_contents=function(_a){nexacro.PopupControl.prototype.on_created_contents.call(this,_a);var _b=this.getElement();if(_b){if(!this._innerdataset&&this.innerdataset){this._innerdataset=this._findDataset(this.innerdataset);this.on_apply_innerdataset();}this._createPopupMenu();var _c=this._lineItems;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_created();}}if(nexacro._enableaccessibility){this._setAccessibilityInfoLevel(this.level);}}};_pPopupMenu.on_create_contents_command=function(){return "";};_pPopupMenu.on_attach_contents_handle=function(_a){nexacro.PopupControl.prototype.on_created.call(this,_a);};_pPopupMenu.on_destroy_contents=function(){this._deletePopupMenu();if(this._popupmenu){this._popupmenu.destroyComponent();this._popupmenu=null;}this._removeEventHandlerToInnerDataset();};_pPopupMenu.on_change_containerRect=function(){this._reCalcSize();};_pPopupMenu.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(!_a){_a=this.enable;}var _b=this._popupmenu;if(_b){_b._setEnable(_a);}var _c=this._items;for(var _d=0,_e=_c.length;_d<_e;_d++ ){_c[_d]._setEnable(_a);}};_pPopupMenu.on_apply_prop_cssclass=function(){var _a=this._popupmenu;if(_a){_a.on_apply_cssclass(this.cssclass);}};_pPopupMenu._getCSSMapParent=function(){var _a=this.parent;while(_a._is_subcontrol){_a=_a.parent;}return _a;};_pPopupMenu._getDlgCode=function(){var _a=this._want_arrow;var _b=this._want_tab;this._want_tab=true;return {want_tab:_b,want_return:true,want_escape:false,want_chars:false,want_arrows:_a};};_pPopupMenu.on_get_accessibility_label=function(){return this.id;};_pPopupMenu._isPopupContains=function(){var _a=this._getRootComponent(this);return _a._is_popupcontains?true:false;};_pPopupMenu.set_autohotkey=function(_a){var _b=nexacro._toBoolean(_a);if(_b!=this.autohotkey){this.autohotkey=_b;this.on_apply_autohotkey(_b);}};_pPopupMenu.on_apply_autohotkey=function(_a){var _b;var _c=this._hot_key_list;if(_c){if(_a){}else{for(_b=_c.length-1;_b> -1;_b-- ){this._unregisterItemHotkey(_c[_b].key);}}}};_pPopupMenu.set_visible=function(_a){if(this._is_trackpopup){nexacro.PopupControl.prototype.set_visible.apply(this,arguments);}};_pPopupMenu.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(_a!=this.itemheight){this.itemheight=_a;}};_pPopupMenu.set_navigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(_a!=this.navigationbuttonsize){this.navigationbuttonsize=_a;}};_pPopupMenu.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_b.indexOf(_a)== -1){return;}var _c=this.popuptype;if(_a!=_c){this.popuptype=_a;}};_pPopupMenu.set_captioncolumn=function(_a){if(_a!=this.captioncolumn){this.captioncolumn=_a;this.on_apply_captioncolumn();}};_pPopupMenu.on_apply_captioncolumn=function(){var _a=this._popupmenu;if(_a){_a.set_captioncolumn(this.captioncolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].set_text(_b.getColumn(_c[_e].datarow,this.captioncolumn)||"");}}}};_pPopupMenu.set_checkboxcolumn=function(_a){if(_a!=this.checkboxcolumn){this.checkboxcolumn=_a;this.on_apply_checkboxcolumn();}};_pPopupMenu.on_apply_checkboxcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_checkboxcolumn(this.checkboxcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setCheck(nexacro._toBoolean(_b.getColumn(_c[_e].datarow,nexacro._toString(this.checkboxcolumn))));}}if(this.visible){this._reCalcSize();}}};_pPopupMenu.set_enablecolumn=function(_a){if(_a!=this.enablecolumn){this.enablecolumn=_a;this.on_apply_enablecolumn();}};_pPopupMenu.on_apply_enablecolumn=function(){var _a=this._popupmenu;if(_a){_a.set_enablecolumn(this.enablecolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();}};_pPopupMenu.set_hotkeycolumn=function(_a){if(_a!=this.hotkeycolumn){this.hotkeycolumn=_a;this.on_apply_hotkeycolumn();}};_pPopupMenu.on_apply_hotkeycolumn=function(){var _a=this._popupmenu;if(_a){_a.set_hotkeycolumn(this.hotkeycolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setHotkeyText(_b.getColumn(_c[_e].datarow,this.hotkeycolumn)||"");}}}};_pPopupMenu.set_iconcolumn=function(_a){if(_a!=this.iconcolumn){this.iconcolumn=_a;this.on_apply_iconcolumn();}};_pPopupMenu.on_apply_iconcolumn=function(){var _a=this._innerdataset;var _b=null;if(_a){var _c=this._popupitemindex;this._createPopupMenu();var _d=this._items;if(_d){var _e=_d.length;for(var _h=0;_h<_e;_h++ ){var _f=_d[_h];if(!_f._check){_f._setIcon(_a.getColumn(_d[_h].datarow,this.iconcolumn)||"");}if(_c==_h){_f._changeUserStatus("selected",true);_b=_f;}}}if(this.visible){this._reCalcSize();}}var _g=this._popupmenu;if(_g){_g.set_iconcolumn(this.iconcolumn);if(_b){_g._reCalcPopupPosition(_b);}}};_pPopupMenu.set_idcolumn=function(_a){if(_a!=this.idcolumn){this.idcolumn=_a;this.on_apply_idcolumn();}};_pPopupMenu.on_apply_idcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_idcolumn(this.idcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setId(_b.getColumn(_c[_e].datarow,this.idcolumn)||"");}}}};_pPopupMenu.set_levelcolumn=function(_a){if(_a!=this.levelcolumn){this.levelcolumn=_a;this.on_apply_levelcolumn();}};_pPopupMenu.on_apply_levelcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_levelcolumn(this.levelcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].level=_b.getColumn(_c[_e].datarow,this.levelcolumn)|| -1;}}}};_pPopupMenu.set_userdatacolumn=function(_a){if(_a!=this.userdatacolumn){this.userdatacolumn=_a;this.on_apply_userdatacolumn();}};_pPopupMenu.on_apply_userdatacolumn=function(){var _a=this._popupmenu;if(_a){_a.set_userdatacolumn(this.userdatacolumn);}var _b=this._innerdataset;if(_b){if(this._items.length==0){this._createPopupMenu();}var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setUserdata(_b.getColumn(_c[_e].datarow,this.userdatacolumn)||null);}}}};_pPopupMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}};_pPopupMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){_a._setEventHandler("onrowposchanged",this._callbackFromDataset,this);_a._setEventHandler("oncolumnchanged",this._callbackFromDataset,this);_a._setEventHandler("onrowsetchanged",this._callbackFromDataset,this);_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);}if(this._popupmenu){this._popupmenu.set_innerdataset(this.innerdataset);}this._createPopupMenu();this.beforeindex= -1;};_pPopupMenu.set_icontextpadding=function(_a){this._icontextpadding= +_a;};_pPopupMenu._on_hotkey=function(_a,_b,_c,_d){var _e,_f;var _g=this._hot_key_list;var _h=_g.length;for(var _i=0,_j,_k;_i<_h;_i++ ){_e=_g[_i];_f=_e.obj;_j=_e.key;if(_j._keycode==_a){_k=_j._modifierkey;if(_b==((_k&0x02)==0x02)&&_c==((_k&0x01)==0x01)&&_d==((_k&0x04)==0x04)){this.on_fire_onitemclick(this,_e.id,_f.userdata,_f.index,_f.parent.level,_f);break;}}}};_pPopupMenu._on_focus=function(_a,_b,_c,_d,_e,_f){if(_b=="focus"){this._is_fire_onpopup=false;}var _g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){if(nexacro._enableaccessibility){if(!this._isAccessibilityEnable()){this._select_menuitem(0, -1);}}}return _g;};_pPopupMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pPopupMenu._item_focus=function(_a,_b,_c){if(nexacro._enableaccessibility){_c=_c?_c:"downkey";}if(_a){if(nexacro._enableaccessibility){if(_a instanceof nexacro._PopupMenuItemControl){_a._on_focus(false,_c);}else{_a._on_focus(true,_c);}}}};_pPopupMenu._item_killfocus=function(_a){if(_a){if(nexacro._enableaccessibility){var _b=this._getWindow();if(_b){_b._removeFromCurrentFocusPath(_a,true);}}if(_a._on_apply_mouseover){_a._on_apply_mouseover(false);}}};_pPopupMenu._fire_on_Popupmenu=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu;if(_h){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pPopupMenu._callbackFromDataset=function(){this._createPopupMenu();this._closeAllPopup();};_pPopupMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pPopupMenu.on_notify_menuitem_onclick=function(_a,_b){var _c=this._getPopupType();var _d=this._previtemindex;this._previtemindex=_a.index;if(_a.enable==false||!_c||_c=="none"){return;}var _e=this._getRootComponent(_a);var _f=this.parent;if(_d> -1){var _g=this._items[_d];if(_g){_g._changeUserStatus("selected",false);}}if(_a._canExpand){if(_d!=_a.index){var _h=this._popupmenu;if(_h){_h._closePopup();}}this._showPopup(_a);_a._changeUserStatus("selected",true);if(_e instanceof nexacro.Menu){_e._popupitemindex=_a.index;}this._popupitemindex=_a.index;}else if(_a._canExpand===false){if(_f&&_f.enable){if(_f instanceof nexacro.Menu){if(this.parent.onmenuclick&&this.parent.onmenuclick._has_handlers){this.parent.on_notify_menuitem_onclick(_a,_b);}this._closeAllPopup();}else if(!(_f instanceof nexacro.PopupMenu)){this._closeAllPopup();if(this.onmenuclick&&this.onmenuclick._has_handlers){this.on_fire_onitemclick(_e,_a._id,_a.userdata,_a.index,_a.parent.level,_a);}}else{_f.on_notify_menuitem_onclick(_a,_b);this._closeAllPopup();}}}};_pPopupMenu.on_notify_onmouseenter=function(_a){var _b=this.parent._menuitemonmouseenter;if(_b){var _c=_b.parent;if(_c&&_c.level<this.level){_b._changeUserStatus("selected",true);}}};_pPopupMenu.on_notify_menuitem_onmouseenter=function(_a){var _b=_a.index;var _c=this.parent._menuitemonmouseenter;var _d=this._popupitemindex;this._popupitemindex=_a.index;var _e=this._popupmenu;if(_e&&_e._is_popup()){if(this.beforeindex!=_a.index){_e.cancelPopup();this._showPopup(_a);}}else{var _f=this._getPopupType();if(_f&&_f!="none"){this._showPopup(_a);}}if(_d> -1&&_b!=_d){var _g=this._items[_d];if(_g){_g._changeUserStatus("selected",false);}}if(_c){var _h=_a.parent;var _i=_c.parent;if(this.beforeindex> -1&&this.beforeindex!=_b){var _j=this._items[this.beforeindex];if(_j){_j._changeUserStatus("selected",false);}}if(_h&&_h!=_i){if(_i&&_h.level>_i.level&&_c._userstatus!="selected"){_c._changeUserStatus("selected",true);}}}this.beforeindex=this._popupitemindex=_a.index;this._menuitemonmouseenter=_a;if(!nexacro._enableaccessibility){var _k=this._items;_k[_a.index]._on_apply_mouseover(true);if(this._popupitempreviousindex== -1||this._popupitemindex== -1){this._popupitempreviousindex=0;this._popupitemindex=0;}if(_k.length<=this._popupitemindex){this._popupitemindex=_k.length-1;this._popupitempreviousindex=this._popupitemindex;}if(_k[this._previtemindex]){_k[this._previtemindex]._on_apply_mouseover(false);}this._previtemindex=_a.index;}};_pPopupMenu.on_notify_menuitem_onmouseleave=function(_a){var _b=this._getRootComponent(this);_b._last_mouseleave_iteminfo={index:_a.index,bindindex:_a._bindindex,level:_a.parent.level};};_pPopupMenu.on_notify_menuitem_onlbuttondown=function(_a){this._menuitemonmouseenter=_a;var _b=this._popupmenu;if(_b){if(_b._is_popup()){if(this.beforeindex!=_a.index){this.beforeindex=_a.index;}_b.cancelPopup();}}if(_a._canExpand){this._showPopup(_a);var _c=this._getRootComponent(_a);if(_c instanceof nexacro.Menu){_c._popupitemindex=_a.index;}}};_pPopupMenu.on_notify_navigationprev_onclick=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}this._navigationPrev();};_pPopupMenu.on_notify_navigationnext_onclick=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}this._navigationNext();};_pPopupMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onlbuttondown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(_a,"onlbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.parent.level,_o.index,_o._bindindex,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onrbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onrbuttondown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onrbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.MenuContextMenuEventInfo(this,"oncontextmenu",_n.id,_c,_h,_i,_j,_k,_l,_d,_e,_f,_g,_a,_n,_n.level,_n.index,_n._bindindex,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousedown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseup",_l.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmouseenter._fireUserEvent(this,_o);}};_pPopupMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=this._last_mouseleave_iteminfo;var _p=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_o.level,_o.index,_o.bindindex,_m);return this.onmouseleave._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousemove&&this.onmousemove._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousemove",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmousemove._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.ondrag&&this.ondrag._has_handlers){var _o=this._getDragData();var _p=this._getEventInfoComponent(_m);var _q=new nexacro.MenuDragEventInfo(this,"ondrag",_l.id,_o,null,"text",null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_p.parent.level,_p.index,_p._bindindex,_n);return [this.ondrag._fireUserEvent(this,_q),this,_m,_o,_q.userdata];}return [false];};_pPopupMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondrop&&this.ondrop._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondrop",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondrop._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragenter&&this.ondragenter._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragenter",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondragenter._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragleave&&this.ondragleave._has_handlers){var _t=this._last_mouseleave_iteminfo;var _u=this._getEventInfoComponent(_r);var _v=new nexacro.MenuDragEventInfo(this,"ondragleave",_u.id,_c,_d,_e,_f,_a,_b,_q,_u,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t.bindindex,_s);return this.ondragleave._fireUserEvent(this,_v);}return false;};_pPopupMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragmove&&this.ondragmove._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragmove",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondragmove._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._getRootComponent(this);var _i=this._popupmenu_find(this);var _j=this._isPopupmenuVisible(this);var _k=this._item_find(_i);var _l=_k.length-1;if(_a==nexacro.Event.KEY_TAB){if(!_j){if(!_d&&this._popupitemindex==_l||_d&&this._popupitemindex<0){this._want_tab=false;this._closePopup();}else{_i._item_killfocus(_k[_i._popupitemindex]);if(_d==false){this._popupitemindex++ ;}else{this._popupitemindex-- ;}if(_k[this._popupitemindex]){_h._menuitemonmouseenter=_k[this._popupitemindex];this._item_focus(_k[this._popupitemindex],true,"tabkey");}else{this._do_defocus(this._last_focused,true);this._on_focus(true);}}this.parent._getWindow()._keydown_element._event_stop=true;}else{if(!_d&&_i._popupitemindex==_l||_d&&_i._popupitemindex==0){_i._item_killfocus(_k[_i._popupitemindex]);_i._closePopup();_i=this._popupmenu_find(this);_k=this._item_find(_i);_i._item_focus(_k[_i._previtemindex],true,"tabkey");_i._popupitemindex=_i._previtemindex;}else{_i._item_killfocus(_k[_i._popupitemindex]);if(_d){_i._popupitemindex-- ;}else{_i._popupitemindex++ ;}_h._menuitemonmouseenter=_k[_i._popupitemindex];_i._item_focus(_k[_i._popupitemindex],true,"tabkey");}this.parent._getWindow()._keydown_element._event_stop=true;}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu_find(this);var _i=this._item_find(_h);var _j=this._isPopupmenuVisible(this);var _k=this._getPopupType();var _l=this._getRootComponent(this);var _m=nexacro.Event;var _n=nexacro._enableaccessibility;var _o,_p;var _q,_r;var _s=_l._isPopupVisible();switch(_a){case _m.KEY_UP:if(_n){break;}if(_h._popupitemindex> -1){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex( -1);this._select_menuitem(_r,_q);}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else{_h._select_menuitem(this._getItemIndex(0));}break;case _m.KEY_DOWN:if(_n){break;}if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(1);this._select_menuitem(_r,_q);}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _m.KEY_LEFT:if(_k=="none"){break;}if(_n){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex( -1);this._select_menuitem(_r,_q);}else{}}else{if(_h._popupitemindex> -1){if(!_j){var _t=this.parent;if(_t instanceof nexacro.PopupMenu){_t._select_menuitem(_t._popupitemindex);this._closePopup();}else{_l._select_menuitem(_l._getItemIndex( -1),_l._popupitemindex,_s,"prev");}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else if(_j){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{_i=this._items[this._popupitemindex];if(_i){_p=_h._popupmenuitem_extend(_i);}if(_p){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else if(this==_l){_l._select_menuitem(_l._getItemIndex( -1),_l._popupitemindex,_s,"prev");}else{this._closePopup();}}}break;case _m.KEY_RIGHT:if(_k=="none"){break;}if(_n){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(1);this._select_menuitem(_r,_q);}else{}}else{var _u=_h._popupitemindex;if(_u> -1){_i=_i[_u];if(!_i){return;}_p=_h._popupmenuitem_extend(_i);if(_p){_h._showPopup(_i);_o=this._popupmenu;if(_o){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}else{_l._select_menuitem(_l._getItemIndex(1),0,_s);}}else{if(_j){_o=this._popupmenu;if(_o){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}}else if(_l instanceof nexacro.PopupMenu&&this==_l){_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s);}else if(!(_l instanceof nexacro.PopupMenu)){_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s,"next");}}}else{_i=this._items[this._popupitemindex];if(_i){_p=_h._popupmenuitem_extend(_i);if(_p){_h._select_menuitem(this._getItemIndex(0));}else{_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s,"next");}}else{_h._select_menuitem(this._getItemIndex(0));}}}break;case _m.KEY_ENTER:if(_k=="none"){break;}if(!_j){if(_h._popupitemindex> -1){_p=_h._popupmenuitem_extend(_i[_h._popupitemindex]);if(_p){_h._showPopup(_i[_h._popupitemindex]);_o=this._popupmenu;if(_o){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}}else{_i=_h._items[_h._popupitemindex];if(_i){if(!_i._canExpand){_h.on_notify_menuitem_onclick(_i);}else{_h.on_notify_menuitem_onlbuttondown(_i);}}_l._closePopup();}}else{_h._select_menuitem(this._getItemIndex(0));}}else if(!nexacro._enableaccessibility){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _m.KEY_ESC:if(_k=="none"){break;}_o=this._popupmenu;if(_o&&this._isPopupmenuVisible(this)){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}else{if(_f==_e||_f.parent==_e){this._closePopup();}else{_i=this._items[this._popupitemindex];if(_i){_i._on_focus(false);}}}break;default:break;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){var _g=this._getRootComponent(_a);if(_g.onmenuclick&&_g.onmenuclick._has_handlers){var _h=new nexacro.MenuClickEventInfo(_a,"onmenuclick",_b,_c,_d,_e,_f);_g.onmenuclick._fireEvent(_g,_h);}};_pPopupMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pPopupMenu.on_fire_onpopup=function(_a){this._is_fire_onpopup=true;if(this.onpopup&&this.onpopup._has_handlers){var _b=new nexacro.EventInfo(_a,"onpopup");return this.onpopup._fireEvent(this,_b);}return false;};_pPopupMenu.on_fire_oncloseup=function(_a){if(!this._is_fire_onpopup){this.on_fire_onpopup(_a);}if(this.oncloseup&&this.oncloseup._has_handlers){var _b=(this._selected_itemindex>=0);var _c=new nexacro.MenuCloseUpEventInfo(_a,"oncloseup",_b);return this.oncloseup._fireEvent(this,_c);}return false;};_pPopupMenu.cancelPopup=function(){this._closePopup();};_pPopupMenu.closePopup=function(){this._closePopup();};_pPopupMenu.isPopup=function(){return this._is_popup();};_pPopupMenu.trackPopup=function(_a,_b,_c,_d){this._selected_itemindex= -1;this._track_capture=_d==undefined?true:nexacro._toBoolean(_d);if(!this._is_updatedimages){var _e=this._innerdataset;if(_e){var _f=this._items;var _g= +_e.getColumn(this.datarow+1,this.levelcolumn);for(var _i=0,_j=_f.length;_i<_j;_i++ ){if(_g>this.level){_f[_i]._setExpandimage();}}}this._is_updatedimages=true;}if(!this._is_subcontrol&&this.autohotkey){var _h=this._hot_key_list;for(var _i=0;_i<_h.length;_i++ ){this._registerItemHotkey(_h[_i].key);}}this._calcNavigationbutton(_b>0?_b:0);this._reCalcSize();this._setInheritStyleValues(this);this.on_created();this._adjustPopupPosition( +_a, +_b,_c);this.setFocus();if(!this._is_fire_onpopup){this.on_fire_onpopup(this);}};_pPopupMenu.trackPopupByComponent=function(_a,_b,_c,_d,_e){this._selected_itemindex= -1;this._track_capture=_e==undefined?true:nexacro._toBoolean(_e);if(!this._is_subcontrol&&this.autohotkey){var _f=this._hot_key_list;for(var _r=0;_r<_f.length;_r++ ){this._registerItemHotkey(_f[_r].key);}}this._calcNavigationbutton(_c>0?_c:0);this._reCalcSize();this.on_created();var _g=nexacro._getElementPositionInFrame(_a.getElement());var _h=_g.x;var _i=_g.y;var _j=this._getWindow();var _k=_j.clientWidth;var _l=_j.clientHeight;var _m=this._adjust_width;var _n=this._adjust_height;if(!_d){if(_h+_b+_m>_k){var _o=_k-_m;if(_o<0){_b= -_h;}else{_b=_o-_h;}}if(_i+_c+_n>_l){var _p=_l-_n;if(_p<0){_c= -_i;}else{_c=_p-_i;}}}var _q=this._getForm();_b= +_b+_h;_c= +_c+_i;this._adjustPopupPosition(_b,_c,_d,_q._getWindowPosition());this.setFocus();if(!this._is_fire_onpopup){this.on_fire_onpopup(this);}};_pPopupMenu.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();}};_pPopupMenu.getInnerDataset=function(){return this._innerdataset;};_pPopupMenu._createPopupMenu=function(){var _a=this.getElement();if(_a){this._deletePopupMenu();var _b=this._innerdataset;if(_b&&this.levelcolumn&&this.captioncolumn&&this.idcolumn){var _c=0;var _d=this.datarow;var _e=_b.getRowCount();var _f=0;var _g=this.itemheight?this.itemheight:0;var _h=null;for(;_d<_e;_d++ ){var _i=this._getRootComponent(this);var _j=_b.getColumn(_d,this.idcolumn);var _k=_b.getColumn(_d,this.levelcolumn);var _l=_b.getColumn(_d,this.captioncolumn);var _m=_b.getColumn(_d,this.enablecolumn);var _n=_b.getColumn(_d,this.hotkeycolumn);var _o=_b.getColumn(_d,this.userdatacolumn);var _p=_b.getColumn(_d,this.iconcolumn);var _q=_b.getColumn(_d,this.checkboxcolumn);if(_k==this.level){if(_l=="-"){var _r=new nexacro.Static("separator",0,_f,0,1,null,null,null,null,null,null,this);_r._setControl();_r.set_background("black");_r.createComponent();_r._bLine=true;_f+=1;this._lineItems.push(_r);continue;}var _h=new nexacro._PopupMenuItemControl("popupmenuitem"+_d,0,_f,0,_g,null,null,null,null,null,null,this);_h.createComponent();_f+=_g;_h._bindindex=_d;_h.index=_c++ ;_h.datarow=_d;_h.level=_k;_h.set_text(_l||"");_h._setEnable((_m===false||_m==="false"||_m===0||_m==="0")?false:true);_h._setId(_j||"");_h._setHotkeyText(_n||"");_h._setUserdata(_o);_q=nexacro._toBoolean(_q);if(_q){_h._setCheck(_q);}else if(_p){_h._setIcon(_p);}if(_d==_b.getRowCount()-1){_h._canExpand=false;}else{var _s= +_b.getColumn(_d+1,this.levelcolumn);if(_s<=this.level){_h._canExpand=false;}else{_h._setExpandimage();}}_h._setEventHandler("onclick",this.on_notify_menuitem_onclick,this);_h._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);if(!(nexacro._isTouchInteraction&&nexacro._SupportTouch)){_h._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);this._setEventHandler("onmouseenter",this.on_notify_onmouseenter,this);if(_i.onmouseleave){_h._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}}if(nexacro._enableaccessibility){_h.on_apply_accessibility();}this._items.push(_h);this._lineItems.push(_h);_h._real_visible=false;}else if(_k<this.level){break;}if(!this._is_subcontrol){if(_n){this._setHotkey(_j,_n,_h);}}}this._is_updatedimages=true;}}};_pPopupMenu._deletePopupMenu=function(){var _a;if(!this._is_subcontrol){for(_a=0;_a<this._hot_key_list.length;_a++ ){this._unregisterItemHotkey(this._hot_key_list[_a].key);this._hot_key_list[_a].hotkey=null;this._hot_key_list[_a].obj=null;}}for(_a=0;_a<this._items.length;_a++ ){this._items[_a].destroyComponent();this._items[_a]=null;}for(_a=0;_a<this._lineItems.length;_a++ ){this._lineItems[_a].destroyComponent();this._lineItems[_a]=null;}if(this.nextbutton){this.nextbutton.destroyComponent();this.nextbutton=null;}if(this.prevbutton){this.prevbutton.destroyComponent();this.prevbutton=null;}this._items=[];this._lineItems=[];this._hot_key_list=[];this._iconImage_info={};this._start_navigation_index=0;this._end_navigation_index=0;this._is_navigation_visible=false;};_pPopupMenu._showPopup=function(_a){var _b=this._getPopupType();if(_b=="none"){return;}if(this._innerdataset&&this.levelcolumn&&this.captioncolumn&&this.idcolumn&&_a._canExpand===true&&this.visible){var _c=this._popupmenu;if(!_c){_c=this._popupmenu=new nexacro.PopupMenu("menupopupmenu",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c._is_focus_accept=false;var _d=this._color?this._color:this._getCurrentStyleInheritValue("color");if(_d){_c.set_color(_d.value);}var _e=this._font?this._font:this._getCurrentStyleInheritValue("font");if(_e){_c.set_font(_e.value);}_c.level=this.level+1;_c.datarow=_a.datarow+1;this._setPopupContains(true);_c._track_capture=false;_c._is_loading=true;_c.setInnerDataset(this._innerdataset);_c.set_captioncolumn(this.captioncolumn);_c.set_checkboxcolumn(this.checkboxcolumn);_c.set_hotkeycolumn(this.hotkeycolumn);_c.set_idcolumn(this.idcolumn);_c.set_levelcolumn(this.levelcolumn);_c.set_userdatacolumn(this.userdatacolumn);_c.set_enablecolumn(this.enablecolumn);_c.set_iconcolumn(this.iconcolumn);_c.set_popuptype(this._getPopupType());_c.set_cssclass(this.cssclass);_c.createComponent();}else{_c.datarow=_a.datarow+1;}var _f=this.itemheight;if(_f){_c.set_itemheight(_f);}_c._trackPopup(_a,"horizontal");}};_pPopupMenu._trackPopup=function(_a,_b,_c,_d){this._createPopupMenu();if(!this._is_subcontrol&&this.autohotkey){var _e=this._hot_key_list;for(var _ag=0;_ag<_e.length;_ag++ ){this._registerItemHotkey(_e[_ag].key);}}this._reCalcSize();this.on_created();var _f,_g,_h,_i;var _j=this.parent;var _k=this._getRootFrame();var _l=nexacro._getElementPositionInFrame(_k.getElement());var _m=this._getCSSStyleValue("padding",this._status);var _n=0,_o=0,_p=0,_q=0;if(_m){_n=_m.left;_o=_m.right;_p=_m.bottom;_q=_m.top;}var _r,_s,_t;var _u=this._width;var _v=this._height;var _w=_l.x+_k._adjust_width;var _x=_l.y+_k._adjust_height;var _y;var _z;_h=_u+_n+_o;_i=_v+_p+_q;if(_b=="horizontal"){_t=nexacro._getElementPositionInFrame(_j.getElement());_r=_j._getClientWidth();_f=_r;_g=0;if(!_d){_y=_t.y+_a._adjust_top+_v;if(_y>_x){if(_l.y<(_t.y-_v)){_g=_x-_y;}else{_i=this._getRootFrame()._adjust_height-_t.y-_a._adjust_top;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}}else{_g=_d;}if(!_c){_z=_t.x;var _aa=_z+_r;if(_aa+_u>_w){if(_z-_u>0){_f= -_u;}}}else{_f=_c;}}else{_t=nexacro._getElementPositionInFrame(_a.getElement());_s=_a._adjust_height;_f=0;_g=_s;if(!_d){_y=_t.y+_s+_v;if(_y>_x){if(_l.y<(_t.y-_v)){_g= -_v;}else{_i=_x-_t.y-_j._adjust_height;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}}else{_g+=_d;}if(!_c){_z=_t.x;if(_z+_u>_w){_f=_w-_z-_u;}}else{_f+=_c;}}var _ab=this._getPopupType();if(_ab=="center"){var _ac=_k._adjust_width;var _ad=_k._adjust_height;if(nexacro._Browser=="Runtime"){_ac=Math.round(_ac/nexacro._getDevicePixelRatio(this.getElement()));_ad=Math.round(_ad/nexacro._getDevicePixelRatio(this.getElement()));}var _ae=(_ac/2)-(_h/2);var _af=(_ad/2)-(_i/2);this._adjustPopupPosition(_ae,_af);}else{this._is_trackpopup=true;this._popupBy(_a,_f,_g-1,_h,_i);}};_pPopupMenu._adjustPopupPosition=function(_a,_b,_c,_d){var _e=this._getAlignPosition(_a,_b,_c);var _f=_e[0]<0?0:_e[0];var _g=_e[1]<0?0:_e[1];var _h=this._width;var _i=this._height;var _j=_f+_h;var _k=_g+_i;var _l=this._getWindow();var _m=_l.clientWidth;var _n=_l.clientHeight;var _o=_j-_m;if(_j>_m&&_f>_o){_f=_f-_o;}if(_k>_n){_g=_n-_i;}this._is_trackpopup=true;this._popup(_f,_g,_h,_i);};_pPopupMenu._reCalcPopupPosition=function(_a){var _b,_c,_d,_e;var _f=this.parent;var _g=this._getRootFrame();var _h=nexacro._getElementPositionInFrame(_g.getElement());var _i=this._getCSSStyleValue("padding",this._status);var _j=0,_k=0,_l=0,_m=0;if(_i){_j=_i.left;_k=_i.right;_l=_i.bottom;_m=_i.top;}var _n,_o;var _p=this._width;var _q=this._height;var _r=_h.x+_g._adjust_width;var _s=_h.y+_g._adjust_height;var _t;var _u;_d=_p+_j+_k;_e=_q+_l+_m;_o=nexacro._getElementPositionInFrame(_f.getElement());_n=_f._getClientWidth();_b=_n;_c=0;_t=_o.y+_a._adjust_top+_q;if(_t>_s){if(_h.y<(_o.y-_q)){_c=_s-_t;}else{_e=this._getRootFrame()._adjust_height-_o.y-_a._adjust_top;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}_u=_o.x;var _v=_u+_n;if(_v+_p>_r){if(_u-_p>0){_b= -_p;}}var _w=this._getPopupType();if(_w=="center"){var _x=_g._adjust_width;var _y=_g._adjust_height;if(nexacro._Browser=="Runtime"){_x=Math.round(_x/nexacro._getDevicePixelRatio(this.getElement()));_y=Math.round(_y/nexacro._getDevicePixelRatio(this.getElement()));}var _z=(_x/2)-(_d/2);var _aa=(_y/2)-(_e/2);this._adjustPopupPosition(_z,_aa);}else{this._popupBy(_a,_b,_c-1,_d,_e);}};_pPopupMenu._closePopup=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}var _c=this._hot_key_list;for(var _f=0;_f<_c.length;_f++ ){this._unregisterItemHotkey(_c[_f].key);}var _d=this._item_find(this);if(nexacro._enableaccessibility){this._item_killfocus(_d[this._popupitemindex]);}for(_f=0;_f<_d.length;_f++ ){var _e=_d[_f];_e._on_apply_mouseover(false);_e._on_apply_selected(false);}this._popupitemindex= -1;this.set_visible(false);this._is_trackpopup=false;};_pPopupMenu._closeAllPopup=function(){this._closePopup();};_pPopupMenu._reCalcSize=function(){var _a=this._innerdataset;if(_a&&this.captioncolumn){var _b=this._items;if(!_b||_b.length==0){return;}var _c=_b.length;var _d=this._status;var _e=parseInt(nexacro._getTextSize(">",_b[0]._getCurrentStyleInheritValue("font",this._status))[0]);var _f=this._getControlInfo();var _g=_f[0];var _h=_f[1];var _i=_f[2];var _j=_f[3];var _k=_f[4];var _l=_f[5];var _m=0,_n=0;var _o=_f[6];var _p=0,_q=0,_r=0,_s=0;var _t=_f[7];var _u=_f[8];var _v=_f[9];var _w=_f[10];var _x=_f[11];var _y=0;var _z=this._getCSSStyleValue("border",_d);var _aa=this._getCSSStyleValue("padding",_d);if(_o){_p=_o.left;_q=_o.right;_r=_o.top;_s=_o.bottom;}if(_l){if(_l.top){_m=_l.top._width;}if(_l.bottom){_n=_l.bottom._width;}}var _ab=0,_ac=0,_ad=0,_ae=0;if(_z){_ab=_z.left._width;_ac=_z.top._width;_ad=_z.right._width;_ae=_z.bottom._width;}var _af=0,_ag=0,_ah=0,_ai=0;if(_aa){_af=_aa.left;_ah=_aa.right;_ag=_aa.top;_ai=_aa.bottom;}var _aj=this.itemheight;var _ak=0;if(_aj==undefined){_aj=_u+_m+_n+_r+_s;_ak=_u;}else{_ak=_aj-_m-_n-_r-_s;}this._itemheight=_aj;if(_x){_y=_aj;}var _al=0,_am=0;if(!this.checkboxcolumn&&!this.iconcolumn){_t=0;_y=0;_am=0;}var _an=0;if(_t&&_y){if(_t>_y){_an=_t;}else{_an=_y;}}else if(_t){_an=_t;}else{_an=_y;}var _ao=_p+_q+_am+(_an?_an:0)+(_g?_g+_al:0)+(_h?_h+_al:0)+(_k?_v?_v+_al:_al+_e:0);var _ap=_ao+_af+_ah+_ab+_ad;var _aq=this._items_total_height=_aj* _c;var _ar=_aq+_ac+_ae+_ag+_ai;var _as=this.buttonsize|0;var _at=this._isNavigationbuttonVisible();if(_at){this._rearrangePopupMenuItems();}else{this._showNavigationButton(_at);this.resize(_ap,_ar);}var _au=_as;var _av=0;var _aw=_an;var _ax=_av>_p?_aw+_am:_aw;var _ay=_ax+_g+_al;this._setItemControlPosition(_av,_an,_u,_ax,_g,_i,_ay,_h,_j,_al,_y,_v?_v:_e,_w?_w:0,_ak);for(var _ba=0;_ba<this._lineItems.length;_ba++ ){var _az=this._lineItems[_ba];if(_az._bLine){_az.move(0,_au,_ap,1);_au+=1;}else{if(_at==false){_az.move(0,_au,_ap,_aj);}if(nexacro._enableaccessibility){_az._updateAccessibilityLabel(_az);}_au+=_aj;}}}};_pPopupMenu._rearrangePopupMenuItems=function(){var _a=this._start_navigation_index;var _b=this._itemheight;var _c=this._getClientWidth();var _d=this._getClientHeight();var _e=this._items;var _f=this.navigationbuttonsize||this._navigationbuttonsize||0;var _g=_f;var _h=_e.length;var _i=this._end_navigation_index;var _j=_g+_f;this._showNavigationButton(this._isNavigationbuttonVisible());var _k,_l;for(_k=0,_l=_a;_k<_l;_k++ ){_e[_k].move(0,0,0,0);}for(_k=_a;_k<=_h;_k++ ){var _m=_e[_k];_i=_k;_j+=_b;if(_k==_a||_j<_d){if(_m){_m.move(0,_g,_c,_b);}}else{break;}_g+=_b;}if(_i>0&&_i<_h){for(_k=_i;_k<_h;_k++ ){_e[_k].move(0,0,0,0);}}this._end_navigation_index=_i;};_pPopupMenu._select_menuitem=function(_a,_b){var _c=this._items;var _d=_c[_b];this._popupitemindex=_a;var _e=_c[_a];if(_b){this._previtemindex=_b;}if(_d&&_a!=_b){this._do_defocus(_d);_d._changeUserStatus("selected",false);}if(_e){this._item_focus(_e,true);_e._changeUserStatus("selected",true);this._menuitemonmouseenter=_e;}};_pPopupMenu._createNavigationButton=function(){var _a=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);_a._setControl("ButtonControl");_a._is_focus_accept=false;_a.createComponent();_a.set_visible(true);_a._setEventHandler("onclick",this.on_notify_navigationnext_onclick,this);_a.on_created();this.nextbutton=_a;var _b=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);_b._setControl("ButtonControl");_b._is_focus_accept=false;_b.createComponent();_b.set_visible(true);_b._setEventHandler("onclick",this.on_notify_navigationprev_onclick,this);_b.on_created();_b._changeStatus("disabled",true);this.prevbutton=_b;var _c=_b._getCSSStyleValue("icon","enabled");var _d;if(_c){_d=nexacro._getImageSize(_c.url,this._rearrangePopupMenuItems,this);if(_d){this._navigationbuttonsize=_d.height;this._rearrangePopupMenuItems();}}var _e=_a._getCSSStyleValue("icon","enabled");if(_e){_d=nexacro._getImageSize(_e.url,this._rearrangePopupMenuItems,this);if(_d){this._navigationbuttonsize=_d.height;this._rearrangePopupMenuItems();}}};_pPopupMenu._showNavigationButton=function(_a){this._is_navigation_visible=_a;var _b,_c;if(_a){if(!this.prevbutton||!this.nextbutton){this._createNavigationButton();}_b=this.prevbutton;_c=this.nextbutton;var _d=this.navigationbuttonsize;var _e=0;var _f=0;if(!_d){var _g=this._getNavigationbuttonHeight(_c,_b);_f=_g[0];_e=_g[1];}else{_f=_d;_e=_d;}this._navigationbuttonsize=_e;var _h=this._getClientWidth();var _i=this._getClientHeight();_b.set_visible(true);_b.move(0,0,_h,_e);_c.set_visible(true);_c.move(0,_i-_f,_h,_f);}else{_b=this.prevbutton;if(_b){_b.set_visible(false);_b.move(0,0,0,0);}_c=this.nextbutton;if(_c){_c.set_visible(false);_c.move(0,0,0,0);}}};_pPopupMenu._calcNavigationbutton=function(_a){var _b=this._getRootFrame();var _c=nexacro._getElementPositionInFrame(_b.getElement());var _d=_c.y+_b._adjust_height;if(this._items_total_height>_d){this._is_navigation_visible=true;if(this._itemheight<_d-_a){_d-=_a;}this.resize(this._width,_d);}else if(this._is_navigation_visible){this._is_navigation_visible=false;}};_pPopupMenu._navigationPrev=function(){var _a=this._start_navigation_index;if(_a>0){if(this._items.length==this._end_navigation_index){this.nextbutton._changeStatus("disabled",false);}_a-- ;if(_a==0){this.prevbutton._changeStatus("disabled",true);}}this._start_navigation_index=_a;this._rearrangePopupMenuItems();};_pPopupMenu._navigationNext=function(){var _a=this._items.length;if(this._end_navigation_index<_a){if(this._start_navigation_index==0){this.prevbutton._changeStatus("disabled",false);}this._start_navigation_index++ ;}this._rearrangePopupMenuItems();if(this._end_navigation_index==_a){this.nextbutton._changeStatus("disabled",true);}};_pPopupMenu._setHotkey=function(_a,_b,_c){var _d=new nexacro._HotKey(_b);if(_d._isEmpty()){delete _d;}var _e={id:_a,key:_d,obj:_c};this._hot_key_list.push(_e);};_pPopupMenu._registerItemHotkey=function(_a){if(!_a||_a._is_registered){return;}var _b=this._getMainForm();if(_b){nexacro._registerHotkeyComp(_b,this,_a);}this._setAccessibilityHotKey(_a);};_pPopupMenu._unregisterItemHotkey=function(_a){if(!_a||!_a._is_registered){return;}var _b=this._getMainForm();if(_b){nexacro._unregisterHotkeyComp(_b,this,_a);}};_pPopupMenu._loaded_expImage=function(_a,_b,_c){if(this._expImage_width!=_b||this._expImage_height!=_c){this._expImage_width=_b;this._expImage_height=_c;if(this.visible){this._reCalcSize();}}};_pPopupMenu._loaded_chkImage=function(_a,_b,_c){if(this._chkImage_width!=_b||this._chkImage_height!=_c){this._chkImage_width=_b;this._chkImage_height=_c;if(this.visible){this._reCalcSize();}}};_pPopupMenu._loaded_iconImage=function(_a,_b,_c){if(!this._iconImage_info[_a]){this._iconImage_info[_a]={width:0,height:0};}if(this._iconImage_info[_a].width!=_b||this._iconImage_info[_a].height!=_c){this._iconImage_info[_a].width=_b;this._iconImage_info[_a].height=_c;if(this.visible){this._reCalcSize();}}};_pPopupMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=_a;if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b=="exp"){_e=nexacro._getImageSize(_d,this._loaded_expImage,this);if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else if(_b=="chk"){_e=nexacro._getImageSize(_d,this._loaded_chkImage,this);if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}else if(_b=="icon"){_e=nexacro._getImageSize(_d,this._loaded_iconImage,this);if(_e){if(!this._iconImage_info[_d]){this._iconImage_info[_d]={width:0,height:0};}this._iconImage_info[_d].width=_e.width;this._iconImage_info[_d].height=_e.height;}}return _d;}}};_pPopupMenu._getPopupControl=function(){var _a=this._getRootComponent(this);return _a._popupmenu;};_pPopupMenu._getPopupType=function(){var _a=this._getRootComponent(this);var _b=_a.popuptype;return _b?_b:"normal";};_pPopupMenu._isPopupmenuVisible=function(_a){if(!_a||_a._popupmenu==null||_a._popupmenu.visible==false){return false;}return true;};_pPopupMenu._isNavigationbuttonVisible=function(){return this._is_navigation_visible;};_pPopupMenu._getNavigationbuttonHeight=function(_a,_b){var _c=0;var _d,_e,_f,_g=0;var _h=_a._getCSSStyleValue("icon","enabled");if(_h){_d=nexacro._getImageSize(_h.url,nexacro._emptyFn,this);if(_d){_g=_d.height;_e=_a._getCSSStyleValue("padding",this._status);if(_e){_g+=_e.top+_e.bottom;}_f=_a._getCSSStyleValue("border",this._status);if(_f){if(_f._single){_g+=_f.top._width+_f.top._width;}else{_g+=_f.top._width+_f.bottom._width;}}}}var _i=_b._getCSSStyleValue("icon","enabled");if(_i){_d=nexacro._getImageSize(_i.url,nexacro._emptyFn,this);if(_d){_c=_d.height;_e=_b._getCSSStyleValue("padding",this._status);if(_e){_c+=_e.top+_e.bottom;}_f=_b._getCSSStyleValue("border",this._status);if(_f){if(_f._single){_c+=_f.top._width+_f.top._width;}else{_c+=_f.top._width+_f.bottom._width;}}}}return [_g,_c];};_pPopupMenu._getMaxTextSize=function(_a){var _b=this._innerdataset;var _c=[0,0];if(_b){var _d;var _e=this._items;if(_e){var _f=_e.length;if(_f){var _g=_e[0]._getCurrentStyleInheritValue("font",this._status);for(var _i=0;_i<_f;_i++ ){var _h=_b.getColumn(_e[_i].datarow,_a);if(_h===undefined){break;}_d=nexacro._getTextSize(_h,_g);if(_d[0]>_c[0]){_c[0]=_d[0];}if(_d[1]>_c[1]){_c[1]=_d[1];}}}}}return _c;};_pPopupMenu._getMenuObj=function(){var _a=this.parent;while(!(_a instanceof nexacro.Menu)){_a=_a.parent;}return _a;};_pPopupMenu._getControlInfo=function(){var _a=this._items;var _b={};var _c={};var _d=0;var _e=0;var _f=0;var _g=0;var _h=0;var _i,_j;var _k=0;var _l;var _m;var _n=false;var _o;var _p;var _q;var _r;var _s;var _t;var _u=0;var _v=0;var _w=0;var _x=false;for(var _ak=0,_al=_a.length;_ak<_al;_ak++ ){var _y=_a[_ak];var _z=_y._textcontrol;var _aa=_y._hotkeytextcontrol;var _ab=_y._expiconcontrol;var _ac=_y._status;if(_y._check){_x=true;}var _ad=_y._iconcontrol;if(_ad){var _ae=_ad._icon||_ad._getCSSStyleValue("icon",_ac);if(_ae){var _af=nexacro._getImageSize(_ae.value,this._loaded_iconImage,this);if(_af){_u=_af.width;}}_o=_ad._getCSSStyleValue("border",_ac);if(_o){if(_o._single){_u=_u+_o.top._width+_o.top._width;}else{_u=_u+_o.top._width+_o.bottom._width;}}_p=_ad._getCSSStyleValue("padding",_ac);if(_p){_u=_u+_p.left+_p.right;}if(_u>_f){_f=_u;}}if(_z){var _ag=_z.text;if(_ag){if(!_i){_i=_z._getCurrentStyleInheritValue("font",_ac);}_b=nexacro._getTextSize(_ag,_i);if(_b[0]>_d){_d=_b[0];}}if(!_q){_q=_z._getCSSStyleValue("border",_ac);}if(!_s){_s=_z._getCSSStyleValue("padding",_ac);}}if(_aa){var _ah=_aa.text;if(_ah){if(!_j){_j=_aa._getCurrentStyleInheritValue("font",this._status);}_c=nexacro._getTextSize(_ah,_j);if(_c[0]>_e){_e=_c[0];}}if(!_r){_r=_aa._getCSSStyleValue("border",_ac);}if(!_t){_t=_aa._getCSSStyleValue("padding",_ac);}}if(!_n&&_y._canExpand){_n=true;}if(_ab){var _ai=_ab._getCSSStyleValue("icon",_ac);if(_ai){var _aj=nexacro._getImageSize(_ai.value,this._loaded_expImage,this);if(_aj){_v=_aj.width;_w=_aj.height;}}}if(!_m){_m=_y._getCSSStyleValue("padding");}if(!_l){_l=_y._getCSSStyleValue("border");}}if(!_k){_g=_b[1];if(_q){if(_q._single){_g=_g+_q.top._width+_q.top._width;_d=_d+_q.top._width+_q.top._width;}else{_g=_g+_q.top._width+_q.bottom._width;_d=_d+_q.top._width+_q.bottom._width;}}if(_s){_g=_g+_s.top+_s.bottom;}if(_b&&_c.length>1){_h=_c[1];if(_r){if(_r._single){_h=_h+_r.top._width+_r.top._width;_e=_e+_r.top._width+_r.top._width;}else{_h=_h+_r.top._width+_r.bottom._width;_e=_e+_r.top._width+_r.bottom._width;}}if(_t){_h=_h+_t.top+_t.bottom;}_k=_g>_h?_g:_h;}else{_k=_g;}}if(_s){_d=_d+_s.left+_s.right;}if(_t){_e=_e+_t.left+_t.right;}return [Math.ceil(_d),Math.ceil(_e),_g,_h,_n,_l,_m,_f?_f:0,_k,_v,_w,_x];};_pPopupMenu._getAlignPosition=function(_a,_b,_c){if(_c){var _d=this._width;var _e=this._height;var _f=_c.split(/\s+/);var _g=_f.length;var _h=parseInt(_a,10)|0;var _i=parseInt(_b,10)|0;switch(_g){case 0:break;case 1:if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}else if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}break;case 2:if(_f[0]=="left"||_f[0]=="center"||_f[0]=="right"){if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}}else if(_f[0]=="top"||_f[0]=="middle"||_f[0]=="bottom"){if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}}if(_f[1]=="left"||_f[1]=="center"||_f[1]=="right"){if(_f[1]=="left"){_a=_h-_d;}else if(_f[1]=="center"){_a=_h-(_d/2);}}else if(_f[1]=="top"||_f[1]=="middle"||_f[1]=="bottom"){if(_f[1]=="top"){_b=_i-_e;}else if(_f[1]=="middle"){_b=_i-(_e/2);}}break;default:break;}}return [_a,_b];};_pPopupMenu._getItemIndex=function(_a){if(_a===undefined){_a=0;}var _b=_a<0?_a:1;var _c=_a===0?0:this._popupitemindex+_b;var _d=this._items;var _e=_d?_d.length:0;for(var _g=0;_g<_e;_g++ ){var _f=_d[_c];if(nexacro._enableaccessibility){if(_f){return _c;}}else{if(_f&&_f._real_enable){return _c;}}_c+=_b;if(_c>_e){_c=0;}else if(_c<0){_c=_e-1;}}return this._popupitemindex;};_pPopupMenu._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a.parent;}return _a;};_pPopupMenu._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pPopupMenu._setItemControlPosition=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_n?_n:_c;this._itempos={icon_x:_a,iconimgwidth:_b,iconheight:_o,text_x:_d,textheight:_o,textwidth:_e,hotkey_x:_g,hotkeywidth:_h,hotkeyheight:_o,expimgwidth:_l,expimgheight:_m,chkimgwidth:_k,gap:_j};};_pPopupMenu._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pPopupMenu._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset=null;}};_pPopupMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return _a._items;}return _a._popupmenu._items;};_pPopupMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu.visible==false){break;}_b=_b._popupmenu;}return _b;};_pPopupMenu._popupmenuitem_extend=function(_a){return _a._canExpand;};delete _pPopupMenu;}if(!nexacro.Spin){nexacro.SpinEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onspin";this.fromobject=this.fromreferenceobject=_a;this.pretext=_c;this.prevalue=_d;this.posttext=_e;this.postvalue=_f;this.up=_g;};var _pSpinEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SpinEventInfo);nexacro.SpinEventInfo.prototype=_pSpinEventInfo;_pSpinEventInfo._type_name="SpinEventInfo";delete _pSpinEventInfo;_pSpinEventInfo=null;nexacro.Spin=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSpin=nexacro._createPrototype(nexacro.Component,nexacro.Spin);nexacro.Spin.prototype=_pSpin;_pSpin._type_name="Spin";_pSpin.spinedit=null;_pSpin.spinupbutton=null;_pSpin.spindownbutton=null;_pSpin.buttonposition="right";_pSpin.buttonsize=undefined;_pSpin.circulation=false;_pSpin.displaycomma=false;_pSpin.displaynulltext="";_pSpin.displayinvalidtext="invalid value";_pSpin.increment=1;_pSpin.locale="";_pSpin.max=10000;_pSpin.min=0;_pSpin.readonly=false;_pSpin.text="";_pSpin.type="normal";_pSpin.usecontextmenu=true;_pSpin.value=undefined;_pSpin.usesoftkeyboard=true;_pSpin._default_value=undefined;_pSpin._default_text="";_pSpin._default_mask="9.9";_pSpin._default_commamask="9,999.9";_pSpin._want_arrow=true;_pSpin._has_inputElement=true;_pSpin._use_readonly_status=true;_pSpin._is_locale_control=true;_pSpin._is_editable_control=true;_pSpin._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onspin":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pSpin.accessibilityrole="spin";_pSpin._is_compound=true;_pSpin.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this.spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this.spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("none");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pSpin.on_created_contents=function(){this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this.on_apply_displaycomma(this.displaycomma);this.on_apply_type(this.type);this.on_apply_readonly(this.readonly);this.on_apply_value(this.value);this.on_apply_usecontextmenu(this.usecontextmenu);this.spinupbutton.on_created();this.spindownbutton.on_created();this.spinedit.on_created();this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this._recalcLayout();this._updateButton();this._setDefaultProp();if(this.spinedit){this.spinedit.set_usesoftkeyboard(this.usesoftkeyboard,true);}var _a=this._getMaskObj();if(_a){_a._is_intpart_zero=true;}};_pSpin.on_destroy_contents=function(){if(this.spinedit){this.spinedit.destroy();this.spinedit=null;}if(this.spinupbutton){this.spinupbutton.destroy();this.spinupbutton=null;}if(this.spindownbutton){this.spindownbutton.destroy();this.spindownbutton=null;}};_pSpin.on_create_contents_command=function(){this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this.on_apply_displaycomma(this.displaycomma);this.on_apply_type(this.type);this.on_apply_readonly(this.readonly);this.on_apply_value(this.value);this.on_apply_usecontextmenu(this.usecontextmenu);var _a="";if(this.spinedit){_a+=this.spinedit.createCommand();}if(this.spinupbutton){_a+=this.spinupbutton.createCommand();}if(this.spindownbutton){_a+=this.spindownbutton.createCommand();}var _b=this._getMaskObj();if(_b){_b._is_intpart_zero=true;}return _a;};_pSpin.on_attach_contents_handle=function(_a){if(this.spinedit){this.spinedit.attachHandle(_a);}if(this.spinupbutton){this.spinupbutton.attachHandle(_a);}if(this.spindownbutton){this.spindownbutton.attachHandle(_a);}this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this._recalcLayout();this._updateButton();this._setDefaultProp();};_pSpin.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pSpin._apply_setfocus=function(_a){var _b=this.spinedit;if(_b){_b._on_focus(true,_a);}};_pSpin.on_apply_prop_cssclass=function(){var _a=this.spinedit;if(_a){_a.on_apply_cssclass();}var _b=this.spinupbutton;if(_b){_b.on_apply_cssclass();}var _c=this.spindownbutton;if(_c){_c.on_apply_cssclass();}};_pSpin.on_apply_prop_enable=function(_a){if(this.spinedit){this.spinedit._setEnable(_a);}if(this.spinupbutton&&!this.readonly){this.spinupbutton._setEnable(_a);}if(this.spindownbutton&&!this.readonly){this.spindownbutton._setEnable(_a);}};_pSpin.on_getBindableProperties=function(){return "value";};_pSpin.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(undefined);}};_pSpin.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);var _f=this._convertValueType(_e,true);if(isNaN(_f)){this._setValue(_e);}else{this._setValue(_f);}}};_pSpin.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(this.spinedit){this.spinedit.on_apply_accessibility();}};_pSpin._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this.spinedit._input_element&&this._status!="focus"){if(!this.spinedit._input_element._wantAccessibilityAdditionalLabel||!this.spinedit._input_element._wantAccessibilityAdditionalLabel()){_b=this.text+" "+_b;}}return _b;};_pSpin._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrow;if((_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN)&&(_c||_b)){_e=true;}this._want_arrow=false;return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pSpin.set_text=nexacro._emptyFn;_pSpin.set_value=function(_a){_a=this._convertValueType(_a);if(this.value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);}};_pSpin.on_apply_value=function(_a){if(nexacro._isNull(_a)||(_a.date||_a.time||_a.blob||_a.datetime)){_a=undefined;}var _b=this.spinedit;if(_b){_b.set_value(_a);if(nexacro._isNull(_a)){this.text="";}else{this.text=_b.text;}this._setAccessibilityInfoValueCur(_b.text);this._updateAccessibilityLabel();_b._updateAccessibilityLabel();this._notifyAccessibility(_b.text);}};_pSpin.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pSpin.on_apply_usesoftkeyboard=function(_a){if(this.spinedit){this.spinedit.set_usesoftkeyboard(this.usesoftkeyboard,_a);}};_pSpin.set_displaynulltext=function(_a){var _b=nexacro._isNull(_a);if(_b){_a="";}else{_a=nexacro._toString(_a).replace(/&quot;/g,"\"");}if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pSpin.on_apply_displaynulltext=function(_a){var _b=this.spinedit;if(_b){_b.set_displaynulltext(_a);}};_pSpin.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displayinvalidtext!=_a){this.displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pSpin.on_apply_displayinvalidtext=function(_a){var _b=this.spinedit;if(_b){_b.set_displayinvalidtext(_a);}};_pSpin.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pSpin.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.spinedit;if(_b){if(this.type=="noneditable"){_b.set_readonly(true);}else{_b.set_readonly(_a);}}var _c=this.spinupbutton;if(_c){_c._setEnable(this.enable&&!_a);}var _d=this.spindownbutton;if(_d){_d._setEnable(this.enable&&!_a);}};_pSpin.set_type=function(_a){var _b=["noneditable","normal","spinonly"];if(_b.indexOf(_a)== -1){return;}if(this.type!=_a){this.type=_a;this.on_apply_type(_a);this.on_apply_readonly(this.readonly);this._recalcLayout();}};_pSpin.on_apply_type=function(_a){var _b=this.spinedit;if(_b){switch(_a){case "spinonly":_b.set_visible(false);break;case "noneditable":_b.set_visible(true);break;case "normal":default:_b.set_visible(true);break;}}};_pSpin.set_locale=function(_a){if(this.locale!=_a){this.locale=_a;this._locale=_a;this.on_apply_locale(_a);}};_pSpin.on_apply_locale=function(_a){var _b=this.spinedit;if(_b){_b._setLocale(_a);}};_pSpin.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pSpin.on_apply_usecontextmenu=function(_a){var _b=this.spinedit;if(_b){_b.set_usecontextmenu(_a);}};_pSpin.set_buttonposition=function(_a){var _b=["left","right"];if(_b.indexOf(_a)== -1){return;}if(this.buttonposition!=_a){this.buttonposition=_a;this.on_apply_buttonposition(_a);}};_pSpin.on_apply_buttonposition=function(_a){this._recalcLayout();};_pSpin.set_buttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.buttonsize!=_a){this.buttonsize=_a;this.on_apply_buttonsize(_a);}};_pSpin.on_apply_buttonsize=function(_a){this._recalcLayout();};_pSpin.set_circulation=function(_a){_a=nexacro._toBoolean(_a);if(this.circulation!=_a){this.circulation=_a;this.on_apply_circulation(_a);this._updateButton();}};_pSpin.on_apply_circulation=function(_a){this._updateButton();};_pSpin.set_displaycomma=function(_a){_a=nexacro._toBoolean(_a);if(this.displaycomma!=_a){this.displaycomma=_a;this.on_apply_displaycomma(_a);this.on_apply_value(this.value);this._setDefaultText();}};_pSpin.on_apply_displaycomma=function(_a){var _b=this.spinedit;if(_b){if(!_a){_b.set_format(this._default_mask);}else{_b.set_format(this._default_commamask);}var _c=this._getMaskObj();if(_c){_c._is_intpart_zero=true;}}};_pSpin.set_increment=function(_a){if(isNaN(_a= +_a)){return;}if(this.increment!=_a){this.increment=_a;}};_pSpin.set_max=function(_a){if(isNaN(_a= +_a)){return;}if(this.max!=_a){this.max=_a;this._setAccessibilityInfoValueMax(_a);this.on_apply_max(_a);this.on_apply_value(this.value);this._updateButton();this._setDefaultProp();}};_pSpin.on_apply_max=function(_a){if(this.value>_a){this.value=_a;}if(_a<this.min){this.min=_a;}};_pSpin.set_min=function(_a){if(isNaN(_a= +_a)){return;}if(this.min!=_a){this.min=_a;this._setAccessibilityInfoValueMin(_a);this.on_apply_min(_a);this.on_apply_value(this.value);this._updateButton();this._setDefaultProp();}};_pSpin.on_apply_min=function(_a){if(this.value<_a){this.value=_a;}if(this.max<_a){this.max=_a;}};_pSpin.setRange=function(_a,_b){this.set_min(_a);this.set_max(_b);if(this.min>this.max){var _c=this.min;this.min=this.max;this.max=_c;}};_pSpin.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this.spinedit;if(_a){return _a.getCaretPos();}return  -1;};_pSpin.setCaretPos=function(_a){var _b=this.spinedit;if(_b){return _b.setCaretPos(_a);}return false;};_pSpin.getSelect=function(){var _a=this.spinedit;if(_a){return _a.getSelect();}return [0,0];};_pSpin.setSelect=function(_a,_b){var _c=this.spinedit;if(_c){return _c.setSelect(_a,_b);}return false;};_pSpin.getSelectedText=function(){var _a=this.spinedit;if(_a){return _a.getSelectedText();}return "";};_pSpin.updateToDataset=function(){return this.applyto_bindSource("value",this.value);};_pSpin._on_value_change=function(){var _a=this.spinedit;var _b=this.max;var _c=this.min;var _d=this._default_value;var _e=this._default_text;var _f=_a.value;var _g=_a.text;if(_a&&_a.text){_f=parseFloat(_a.text.replace(/\,/g,''));}if(_f>_b){_f=_b;}else if(_f<_c){_f=_c;}else if(!_f){_f=_c;}if(!this.on_fire_canchange(this,_e,_d,_g,_f)||!this.applyto_bindSource("value",_f)){this._setValue(_d);return false;}this._setValue(_f);this.on_fire_onchanged(this,_e,_d,_g,_f);return true;};_pSpin._on_spin_up=function(){if(this.readonly){return false;}var _a=this._getMaskObj();var _b=this.increment;var _c=this.max;var _d=this.min;var _e=parseFloat(this.spinedit.value);var _f=this.text;if(nexacro._isNull(_e)||isNaN(_e)){_e=0;}var _g=this._calcValue(_e,_b,true);if(this.circulation){if(_b>=0){_g=(_g>_c)?_d:_g;}else{_g=(_g<_d)?_c:_g;}}else{_g=(_g>_c)?_c:(_g<_d)?_d:_g;}var _h=_a.applyMask(_g);if(!this.on_fire_onspin(this,_f,_e,_h,_g,true)){_g=_e;}this.value=_g;this.on_apply_value(_g);this._updateButton();};_pSpin._on_spin_down=function(){if(this.readonly){return false;}var _a=this._getMaskObj();var _b=this.increment;var _c=this.max;var _d=this.min;var _e=parseFloat(this.spinedit.value);var _f=this.text;if(nexacro._isNull(_e)||isNaN(_e)){_e=0;}var _g=this._calcValue(_e,_b,false);if(this.circulation){if(_b>=0){_g=(_g<_d)?_c:_g;}else{_g=(_g>_c)?_d:_g;}}else{_g=(_g<_d)?_d:(_g>_c)?_c:_g;}var _h=_a.applyMask(_g);if(!this.on_fire_onspin(this,_f,_e,_h,_g,false)){_g=_e;}this.value=_g;this.on_apply_value(_g);this._updateButton();};_pSpin._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);};_pSpin._on_edit_onkeydown=function(_a,_b){switch(_b.keycode){case nexacro.Event.KEY_UP:this._on_spin_up();break;case nexacro.Event.KEY_DOWN:this._on_spin_down();break;case nexacro.Event.KEY_ENTER:if(this._default_value!==this.spinedit.value){this._on_value_change();}break;}};_pSpin._on_edit_oninput=function(_a,_b){if(this.readonly||!this._isEnable()){return false;}this.on_fire_oninput();var _c=parseFloat(this.spinedit.value);if(isNaN(_c)){this.value=this.min;}};_pSpin._on_upbutton_onclick=function(_a,_b){this._on_spin_up();};_pSpin._on_downbutton_onclick=function(_a,_b){this._on_spin_down();};_pSpin.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(!(_f instanceof nexacro.MaskEdit)){var _g=this.spinedit;if(_g){_g._on_focus(true,_b);}}};_pSpin.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(this._default_value!=this.spinedit.value){this._on_value_change();}};_pSpin.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}return false;};_pSpin.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(this,"canchange",_b,_c,_d,_e);return this.canchange._fireCheckEvent(this,_f);}return true;};_pSpin.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}return true;};_pSpin.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pSpin.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.SpinEventInfo(_a,"onspin",_b,_c,_d,_e,_f);return this.onspin._fireCheckEvent(this,_g);}return true;};_pSpin._recalcLayout=function(){if(this._is_created_contents){var _a=this.spinedit;var _b=this.spinupbutton;var _c=this.spindownbutton;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this.buttonsize;if(_f==null){_f=_e;}else if(_f>_d){_f=_d;}var _g=Math.floor(_e/2);switch(this.type){case "spinonly":_f=_d;_b.move(0,0,_f,_g,null,null);_c.move(0,_e-_g,_f,_g,null,null);break;case "normal":case "noneditable":default:switch(this.buttonposition){case "left":_a.move(_f,0,_d-_f,_e,null,null);_b.move(0,0,_f,_g,null,null);_c.move(0,_e-_g,_f,_g,null,null);break;case "right":default:var _h=_d-_f;_a.move(0,0,_h,_e,null,null);_b.move(_h,0,_f,_g,null,null);_c.move(_h,_e-_g,_f,_g,null,null);break;}break;}}};_pSpin._updateButton=function(){var _a=this.getElement();if(_a){var _b=this.spinedit;var _c=this.spinupbutton;var _d=this.spindownbutton;var _e=_b.value;var _f=this.max;var _g=this.min;if(!this._isEnable()){_b._setEnable(false);_c._setEnable(false);_d._setEnable(false);}else{_b._setEnable(true);if(!this.circulation){if(nexacro._isNull(_e)||this._isInvalidValue(_e)){_d._setEnable(false);_c._setEnable(!this.readonly);}else{if(this.increment>=0){if(_f>_e){_c._setEnable(!this.readonly);}else{_c._setEnable(false);_c._changeStatus("mouseover",false);}if(_g<_e){_d._setEnable(!this.readonly);}else{_d._setEnable(false);_d._changeStatus("mouseover",false);}}else{if(_f>_e){_d._setEnable(!this.readonly);}else{_d._setEnable(false);_d._changeStatus("mouseover",false);}if(_g<_e){_c._setEnable(!this.readonly);}else{_c._setEnable(false);_c._changeStatus("mouseover",false);}}}}else{_c._setEnable(!this.readonly);_d._setEnable(!this.readonly);}}}};_pSpin._calcValue=function(_a,_b,_c){var _d=1;var _e=_a.toString();var _f=_b.toString();var _g=_e.indexOf(".");var _h=_f.indexOf(".");if(_g> -1||_h> -1){var _i=_g> -1?_e.substring(_g+1,_e.length):"";var _j=_h> -1?_f.substring(_h+1,_f.length):"";var _k=_i.length>=_j.length?_i.length:_j.length;_d=Math.pow(10,_k);_a=Math.round(_a* _d);_b=Math.round(_b* _d);}if(_c){return (_a+_b)/_d;}else{return (_a-_b)/_d;}};_pSpin._convertValueType=function(_a,_b){if(_a===""){return _a;}else{if(_b){return nexacro.Component.prototype._convertValueType.call(this,_a,2);}else{return nexacro._isNull(_a)?_a:parseFloat(_a);}}};_pSpin._setValue=function(_a){this.value=_a;this.on_apply_value(_a);this._updateButton();this._setDefaultProp();};_pSpin._setDefaultProp=function(){this._setDefaultValue();this._setDefaultText();};_pSpin._setDefaultValue=function(){this._default_value=this.value;};_pSpin._setDefaultText=function(){this._default_text=this.text;};_pSpin._setLocale=function(_a){if(!this.locale&&_a!=this._locale){this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this.value);this._setDefaultText();}};_pSpin._setEnableView=function(_a){var _b=this.spinedit;if(_b){_b._setEnableView(_a);}};_pSpin._setEventHandlerToCalendarEdit=function(){var _a=this.spinedit;if(_a){_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pSpin._setEventHandlerToSpinButtons=function(){var _a=this.spinupbutton;if(_a){_a._setEventHandler("onclick",this._on_upbutton_onclick,this);}var _b=this.spindownbutton;if(_b){_b._setEventHandler("onclick",this._on_downbutton_onclick,this);}};_pSpin._getMaskObj=function(){var _a=this.spinedit;if(_a){return _a._getMaskObj();}return null;};_pSpin._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}_a=parseFloat(nexacro._toString(_a).replace(/\,/g,''));if(!isFinite( +_a)||isNaN( +_a)){return true;}return false;};_pSpin._on_getDisplayText=function(){var _a=this.spinedit;if(_a){return _a._on_getDisplayText();}};delete _pSpin;nexacro._SpinEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._setControl();};var _pSpinEditControl=nexacro._createPrototype(nexacro.MaskEdit,nexacro._SpinEditControl);nexacro._SpinEditControl.prototype=_pSpinEditControl;_pSpinEditControl._getFromComponent=function(_a){var _b=_a.parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pSpinEditControl._isInvalidValue=function(_a){return this.parent._isInvalidValue(_a);};_pSpinEditControl._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this.value;var _d="";var _e="";var _f=this._getMaskObj();if(_f){if(!this._onlydisplay){_f.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_f.applyMask("");}else{_d=_f.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this.text){this._default_text=this.text=_d;}}}};delete _pSpinEditControl;nexacro._SpinButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSpinButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._SpinButtonControl);nexacro._SpinButtonControl.prototype=_pSpinButtonControl;_pSpinButtonControl._type_name="ButtonControl";_pSpinButtonControl._is_subcontrol=true;_pSpinButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;if(_g){_g._apply_setfocus(_b);}};delete _pSpinButtonControl;}if(!nexacro.DatePickerControl){nexacro.DatePickerControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDatePickerControl=nexacro._createPrototype(nexacro.Component,nexacro.DatePickerControl);nexacro.DatePickerControl.prototype=_pDatePickerControl;_pDatePickerControl._type_name="DatePickerControl";_pDatePickerControl.accessibilityrole="datepicker";_pDatePickerControl._is_subcontrol=true;_pDatePickerControl.head=null;_pDatePickerControl.body=null;_pDatePickerControl._selected_year="";_pDatePickerControl._selected_month="";_pDatePickerControl._selected_day="";_pDatePickerControl._use_readonly_status=true;_pDatePickerControl._is_locale_control=true;_pDatePickerControl._event_list={"onclick":1,"ondayclick":1,"onspin":1,"oncloseup":1};_pDatePickerControl.accessibilityrole="datepicker";_pDatePickerControl._has_accessibility_value=false;_pDatePickerControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.head=new nexacro._DatePickerHeadControl("head",0,0,0,0,null,null,null,null,null,null,this);var _c=this.body=new nexacro._DatePickerBodyControl("body",0,0,0,0,null,null,null,null,null,null,this);_b.createComponent(true);_c.createComponent(true);}};_pDatePickerControl.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this.head;var _d=this.body;_c._setEventHandler("onclick",this._on_head_onheadclick,this);_c._setEventHandler("onspin",this._on_head_onheadspin,this);_c._setEventHandler("onkeydown",this._on_head_onkeydown,this);_d._setEventHandler("ondayclick",this._on_body_ondayclick,this);_d._setEventHandler("onkeydown",this._on_body_onkeydown,this);_c.on_created(_a);_d.on_created(_a);this._recalcLayout();}};_pDatePickerControl.on_create_contents_command=function(){var _a=this.head;var _b=this.body;var _c="";if(_a){_c+=_a.createCommand();}if(_b){_c+=_b.createCommand();}return _c;};_pDatePickerControl.on_attach_contents_handle=function(_a){var _b=this.head;var _c=this.body;_b._setEventHandler("onclick",this._on_head_onheadclick,this);_b._setEventHandler("onspin",this._on_head_onheadspin,this);_b._setEventHandler("onkeydown",this._on_head_onkeydown,this);_c._setEventHandler("ondayclick",this._on_body_ondayclick,this);_c._setEventHandler("onkeydown",this._on_body_onkeydown,this);_c.attachHandle(_a);_b.attachHandle(_a);this._recalcLayout();};_pDatePickerControl.on_destroy_contents=function(){if(this.head){this.head.destroy();this.head=null;}if(this.body){this.body.destroy();this.body=null;}};_pDatePickerControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerControl.on_apply_prop_enable=function(_a){var _b=this.head;var _c=this.body;if(_b){_b._setEnable(_a);}if(_c){_c._setEnable(_a);}};_pDatePickerControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.head;if(_b){_b.set_readonly(_a);}var _c=this.body;if(_c){_c.set_readonly(_a);}};_pDatePickerControl._on_head_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=nexacro._enableaccessibility;if((_b.fromreferenceobject.id=="spinedit")&&_c!=13){return;}this._changeDate(_a,_b);if(!_d){if(!(_a instanceof nexacro._CalendarEditControl)&&(_c==13||_c==37||_c==38||_c==39||_c==40)){this.on_fire_ondayclick(_a);}}};_pDatePickerControl._on_head_onheadclick=function(_a,_b){var _c=this.parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}if(!this.enable||this.readonly){return false;}var _d=this.head;var _e=this.body;_e._setDate(_d._date.str_year,_d._date.str_month,_e._date.str_day);};_pDatePickerControl._on_head_onheadspin=function(_a,_b){var _c=this.parent;if(_c&&_c._onlydisplay==true){return false;}if(!this.enable||this.readonly==true){return false;}var _d=this.head;var _e=this.body;_e._setDate(_d._date.str_year,_d._date.str_month,_e._date.str_day);};_pDatePickerControl._on_body_ondayclick=function(_a,_b){this.on_fire_ondayclick(_a,_b);};_pDatePickerControl._on_body_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=nexacro._enableaccessibility;this._changeDate(_a,_b);if(!_d){if(!(_a instanceof nexacro._CalendarEditControl||_a instanceof nexacro._CalendarDropButtonControl)&&(_c==37||_c==38||_c==39||_c==40)){this.on_fire_ondayclick(_a);}}};_pDatePickerControl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=_j.name;if(_l=="head"||_l=="prevbutton"||_l=="nextbutton"||_l=="body"||_l=="weekband"||_l.indexOf("weekitem")> -1||_l.indexOf("dayitem")> -1){this._refreshSpindate();}};_pDatePickerControl.on_touchend_basic_action=function(_a,_b,_c,_d){var _e=_d.name;if(_e=="head"||_e=="prevbutton"||_e=="nextbutton"||_e=="body"||_e=="weekband"||_e.indexOf("weekitem")> -1||_e.indexOf("dayitem")> -1){this._refreshSpindate();}};_pDatePickerControl.on_fire_oncloseup=function(_a){if(this.oncloseup&&this.oncloseup._has_handlers){return this.oncloseup._fireEvent(this);}return false;};_pDatePickerControl.on_fire_ondayclick=function(_a,_b){if(this.ondayclick&&this.ondayclick._has_handlers){if(!_b){var _c=this.body._getDayItem(this._selected_day);_b=new nexacro.CalendarDayClickEventInfo(_c,"ondayclick",this._value);}return this.ondayclick._fireEvent(this,_b);}return false;};_pDatePickerControl._on_button_onnextlbuttondown=function(){var _a=this.parent;if(_a&&_a._onlydisplay==true){return false;}var _b=this.head;if(!_b.enable||_b.readonly){return false;}var _c=_b._date.int_year;var _d=_b._date.int_month;if((_d+=1)>12){_d=1;if((_c+=1)>9999){_c=0;}}_b._setDate(_c,_d);_b._refreshSpindate();this._on_head_onheadclick();};_pDatePickerControl._on_button_onprevlbuttondown=function(){var _a=this.parent;if(_a&&_a._onlydisplay==true){return false;}var _b=this.head;if(!_b.enable||_b.readonly){return false;}var _c=_b._date.int_year;var _d=_b._date.int_month;if((_d-=1)<=0){_d=12;if((_c-=1)<0){_c=9999;}}_b._setDate(_c,_d);_b._refreshSpindate();this._on_head_onheadclick();};_pDatePickerControl._setValue=function(_a){this._value=_a;this.on_apply_value(_a);};_pDatePickerControl.on_apply_value=function(_a){var _b=_a.substr(0,4);var _c=_a.substr(4,2);var _d=_a.substr(6,2);this._selected_year=_b;this._selected_month=_c;this._selected_day=_d;var _e=this.head;if(_e){_e._setDate(_b,_c);_e._recalcLayout();}var _f=this.body;if(_f){_f._setDate(_b,_c,_d);}};_pDatePickerControl._setHeadformatText=function(){var _a=this.head;if(_a){_a._setDate(_a._date.str_year,_a._date.str_month);_a._recalcLayout();}};_pDatePickerControl._setWeekformatText=function(){var _a=this.body;if(_a){_a._setWeekformatText();}};_pDatePickerControl._getInnerDataset=function(){var _a=this.parent;if(_a){return _a.getInnerDataset();}return null;};_pDatePickerControl._getBackgroundcolumn=function(){var _a=this.parent;if(_a){return _a.backgroundcolumn;}return null;};_pDatePickerControl._getBordercolumn=function(){var _a=this.parent;if(_a){return _a.bordercolumn;}return null;};_pDatePickerControl._getDatecolumn=function(){var _a=this.parent;if(_a){return _a.datecolumn;}return null;};_pDatePickerControl._getTextcolorcolumn=function(){var _a=this.parent;if(_a){return _a.textcolorcolumn;}return null;};_pDatePickerControl._getHeadheight=function(){var _a=this.parent;if(_a){return _a.headheight;}return null;};_pDatePickerControl._getDaysize=function(){var _a=this.parent;if(_a){return _a.daysize;}return "";};_pDatePickerControl._getHeadformat=function(){var _a=this.parent;if(_a){return _a.headformat;}return null;};_pDatePickerControl._getWeekformat=function(){var _a=this.parent;if(_a){return _a.weekformat;}return null;};_pDatePickerControl._getUsetrailingday=function(){var _a=this.parent;if(_a){return _a.usetrailingday;}return false;};_pDatePickerControl._getShowmonthspin=function(){var _a=this.parent;if(_a){return _a.showmonthspin;}return false;};_pDatePickerControl._getShowyearspin=function(){var _a=this.parent;if(_a){return _a.showyearspin;}return false;};_pDatePickerControl._getCurrentDate=function(){var _a=this.parent;if(_a){return _a._getCurrentDate();}return "";};_pDatePickerControl._getEndDay=function(_a,_b){var _c=this.parent;if(_c){return _c._getEndDay(_a,_b);}return "";};_pDatePickerControl._changeDate=function(_a,_b){var _c=this.body;var _d=_c._date;var _e=_d.int_year;var _f=_d.int_month;var _g=_d.int_day;var _h=this._getEndDay(_e,_f);var _i=false;var _j=false;var _k=false;var _l=false;var _m=false;var _n=nexacro._enableaccessibility;var _o=_b.keycode;if(_o==37||_o==38||_o==39||_o==40||_o==13){switch(_o){case 13:var _p=new nexacro.Date(_e,_f-1,_g);_e=_p.getFullYear();_f=_p.getMonth()+1;_g=_p.getDate();break;case 37:if(_b.ctrlkey){_l=true;}else{_m=true;}if(_m){_g-=1;if(_g<=0){_l=true;}}if(_l){_f-=1;if(_f<=0){if(_e<=0){_e=9999;}else{_e-=1;}_f=12;}if(!_b.ctrlkey){_g+=this._getEndDay(_e,_f);}_i=true;}break;case 38:if(_b.ctrlkey){_e-=1;_i=true;}else if(!_n){_g-=7;if(_g<=0){if(_f<=1){_f=12;if(_e<=0){_e=9999;}else{_e-=1;}}else{_f-=1;}_g+=this._getEndDay(_e,_f);}}break;case 39:if(_b.ctrlkey){_j=true;}else{_k=true;}if(_k){_g+=1;if(_g>_h){_j=true;}}if(_j){_f+=1;if(_f>12){if(_e>=9999){_e=0;}else{_e+=1;}_f=1;}if(_k){_g-=_h;}_i=true;}break;case 40:if(_b.ctrlkey){_e+=1;_i=true;}else if(!_n){_g+=7;if(_g>_h){if(_f>=12){_f=1;if(_e>=9999){_e=0;}else{_e+=1;}}else{_f+=1;}_g-=_h;}}break;}_e=nexacro._toString(_e).padLeft(4,"0");_f=nexacro._toString(_f).padLeft(2,"0");_g=nexacro._toString(_g).padLeft(2,"0");this._setValue(_e+_f+_g);if(nexacro._enableaccessibility){if(_i){var _q=this.body._getDayItem(this._selected_day);_q._setAccessibilityLabel(_e+" "+_f+" "+_g);}var _r=this.parent;if(_r){var _s=_r.calendaredit;if(_s){_s._setAccessibilityLabel(_i?_e+" "+_f+" "+_g:_g);}}}}if(_n){if(_o==13){this.on_fire_ondayclick(_a);}else if(_o==27){this.parent._closePopup();}}};_pDatePickerControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._getHeadheight();var _b=this._getClientWidth();var _c=this._getClientHeight();if(!_a){_a=_c/8;}var _d=0;var _e=0+_a;var _f=_b;var _g=_c-_a;var _h=0;var _i=0;var _j=_b;var _k=_a;this.body.move(_d,_e,_f,_g,null,null);this.head.move(_h,_i,_j,_k,null,null);}};_pDatePickerControl._refreshSpindate=function(){var _a=this.head;if(this._is_created){if(_a){_a._refreshSpindate();}}};_pDatePickerControl._refreshDay=function(){var _a=this.body;if(this._is_created){if(_a){_a._refreshDay();}}};_pDatePickerControl._on_beforerepeat=function(_a){var _b=this.head;if(_b){return _b._on_beforerepeat(_a);}};delete _pDatePickerControl;nexacro._DatePickerHeadControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._date={str_year:"",str_month:"",int_year:0,int_month:0};};var _pDatePickerHeadControl=nexacro._createPrototype(nexacro.Component,nexacro._DatePickerHeadControl);nexacro._DatePickerHeadControl.prototype=_pDatePickerHeadControl;_pDatePickerHeadControl._type_name="DatePickerHeadControl";_pDatePickerHeadControl._is_subcontrol=true;_pDatePickerHeadControl.prevbutton=null;_pDatePickerHeadControl.nextbutton=null;_pDatePickerHeadControl.yearstatic=null;_pDatePickerHeadControl.monthstatic=null;_pDatePickerHeadControl.yearspin=null;_pDatePickerHeadControl.monthspin=null;_pDatePickerHeadControl._use_readonly_status=true;_pDatePickerHeadControl._event_list={"onclick":1,"onspin":1,"onkeydown":1};_pDatePickerHeadControl.on_create_contents=function(){var _a=this.prevbutton=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);var _b=this.nextbutton=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);var _c=this.yearstatic=new nexacro.Static("yearstatic",0,0,0,0,null,null,null,null,null,null,this);var _d=this.monthstatic=new nexacro.Static("monthstatic",0,0,0,0,null,null,null,null,null,null,this);var _e=this.yearspin=new nexacro._YearSpinControl("yearspin",0,0,0,0,null,null,null,null,null,null,this);var _f=this.monthspin=new nexacro._MonthSpinControl("monthspin",0,0,0,0,null,null,null,null,null,null,this);_a._setControl();_b._setControl();_c._setControl();_d._setControl();_e._setControl();_f._setControl();_a.createComponent(true);_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);_e.createComponent(true);_f.createComponent(true);_e.set_visible(false);_e.set_min("0");_e.set_max("9999");_e.set_circulation(true);_e.set_displaycomma(false);_f.set_visible(false);_f.set_min("1");_f.set_max("12");_f.set_circulation(true);_f.set_displaycomma(false);};_pDatePickerHeadControl.on_created_contents=function(_a){this.on_apply_prop_enable(this.enable);var _b=this.prevbutton;var _c=this.nextbutton;var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_d._setEventHandler("onclick",this._on_static_mobile_onclick,this);_e._setEventHandler("onclick",this._on_static_mobile_onclick,this);}_d._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_e._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_b._setEventHandler("onclick",this._on_button_onprevclick,this);_c._setEventHandler("onclick",this._on_button_onnextclick,this);_f._setEventHandler("onspin",this._on_spin_onspin,this);_g._setEventHandler("onspin",this._on_spin_onspin,this);_f._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_g._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_b.on_created(_a);_c.on_created(_a);_d.on_created(_a);_e.on_created(_a);_f.on_created(_a);_g.on_created(_a);_f.set_value(this._date.str_year);_g.set_value(this._date.str_month);if(this.parent._is_popupcontains){_f._setEnableView(false);_g._setEnableView(false);}this._refreshSpindate();};_pDatePickerHeadControl.on_create_contents_command=function(){this._refreshSpindate();var _a="";if(this.prevbutton){_a+=this.prevbutton.createCommand();}if(this.nextbutton){_a+=this.nextbutton.createCommand();}if(this.yearstatic){_a+=this.yearstatic.createCommand();}if(this.monthstatic){_a+=this.monthstatic.createCommand();}if(this.yearspin){_a+=this.yearspin.createCommand();}if(this.monthspin){_a+=this.monthspin.createCommand();}return _a;};_pDatePickerHeadControl.on_attach_contents_handle=function(_a){var _b=this.prevbutton;var _c=this.nextbutton;var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_d._setEventHandler("onclick",this._on_static_mobile_onclick,this);_e._setEventHandler("onclick",this._on_static_mobile_onclick,this);}_d._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_e._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_b._setEventHandler("onclick",this._on_button_onprevclick,this);_c._setEventHandler("onclick",this._on_button_onnextclick,this);_f._setEventHandler("onspin",this._on_spin_onspin,this);_g._setEventHandler("onspin",this._on_spin_onspin,this);_f._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_g._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_b.attachHandle(_a);_c.attachHandle(_a);_d.attachHandle(_a);_e.attachHandle(_a);_f.attachHandle(_a);_g.attachHandle(_a);_f.set_value(this._date.str_year);_g.set_value(this._date.str_month);if(this.parent._is_popupcontains){_f._setEnableView(false);_g._setEnableView(false);}};_pDatePickerHeadControl.on_destroy_contents=function(){this._date=null;if(this.prevbutton){this.prevbutton.destroy();this.prevbutton=null;}if(this.nextbutton){this.nextbutton.destroy();this.nextbutton=null;}if(this.yearstatic){this.yearstatic.destroy();this.yearstatic=null;}if(this.monthstatic){this.monthstatic.destroy();this.monthstatic=null;}if(this.yearspin){this.yearspin.destroy();this.yearspin=null;}if(this.monthspin){this.monthspin.destroy();this.monthspin=null;}};_pDatePickerHeadControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerHeadControl.on_apply_prop_enable=function(_a){if(this.prevbutton){this.prevbutton._setEnable(_a);}if(this.nextbutton){this.nextbutton._setEnable(_a);}if(this.yearstatic){this.yearstatic._setEnable(_a);}if(this.monthstatic){this.monthstatic._setEnable(_a);}if(this.yearspin){this.yearspin._setEnable(_a);}if(this.monthspin){this.monthspin._setEnable(_a);}};_pDatePickerHeadControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerHeadControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.getElement();if(_b){var _c=this.yearspin;if(_c){_c.set_readonly(_a);}var _d=this.monthspin;if(_d){_d.set_readonly(_a);}}};_pDatePickerHeadControl._on_static_mobile_onclick=function(_a,_b){var _c=this.parent.parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;var _h=_a.name;if(_h=="yearstatic"){_d.set_visible(false);_f.set_visible(true);}else if(_h=="monthstatic"){_e.set_visible(false);_g.set_visible(true);}};_pDatePickerHeadControl._on_static_onlbuttondown=function(_a,_b){var _c=this.parent.parent;if(_c&&_c._onlydisplay==true){return false;}var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;var _h=_a.name;if(_h=="yearstatic"){_d.set_visible(false);_f.set_visible(true);}else if(_h=="monthstatic"){_e.set_visible(false);_g.set_visible(true);}};_pDatePickerHeadControl._on_button_onprevclick=function(_a,_b){var _c=this.parent.parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);}if(!this.enable||this.readonly){return false;}var _d=this._date.int_year;var _e=this._date.int_month;if((_e-=1)<=0){_e=12;if((_d-=1)<0){_d=9999;}}this._setDate(_d,_e);this._refreshSpindate();this.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,this,_a,_b.meta_key);};_pDatePickerHeadControl._on_button_onnextclick=function(_a,_b){var _c=this.parent.parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}if(!this.enable||this.readonly){return false;}var _d=this._date.int_year;var _e=this._date.int_month;if((_e+=1)>12){_e=1;if((_d+=1)>9999){_d=0;}}this._setDate(_d,_e);this._refreshSpindate();this.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,this,_a,_b.meta_key);};_pDatePickerHeadControl._on_spin_onspin=function(_a,_b){var _c=nexacro._toString(_b.postvalue);var _d=this._date.str_year;var _e=this._date.str_month;var _f=_a.name;if(_f=="yearspin"){_d=_c;}else if(_f=="monthspin"){_e=_c;}this._setDate(_d,_e);this.on_fire_onspin(_a,_b);};_pDatePickerHeadControl._on_spin_onkeydown=function(_a,_b){if(_b.keycode==nexacro.Event.KEY_ENTER){var _c=this._date.str_year;var _d=this._date.str_month;var _e=_a.name;if(_e=="yearspin"){_c=_a.text;}else if(_e=="monthspin"){_d=_a.text;}this._setDate(_c,_d);this.on_fire_onspin(_a,_b);}};_pDatePickerHeadControl.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.SpinEventInfo(_a,"onspin",_b,_c,_d,_e,_f);return this.onspin._fireEvent(this,_g);}return true;};_pDatePickerHeadControl._refreshSpindate=function(){var _a=this.yearstatic;var _b=this.monthstatic;var _c=this.yearspin;var _d=this.monthspin;if(_a||_b){var _e=this._getShowyearspin();var _f=this._getShowmonthspin();if(_e){if(_f){_a.set_visible(false);_b.set_visible(false);_c.set_visible(true);_d.set_visible(true);}else{_a.set_visible(false);_b.set_visible(true);_c.set_visible(true);_d.set_visible(false);}}else{if(_f){_a.set_visible(true);_b.set_visible(false);_c.set_visible(false);_d.set_visible(true);}else{_a.set_visible(true);_b.set_visible(true);_c.set_visible(false);_d.set_visible(false);}}}};_pDatePickerHeadControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._getHeadformat();var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=0,_e=0,_f=0;var _g=0,_h=0,_i=0;var _j=this.prevbutton;if(_j){_j.move(0,0,_c,_c,null,null);}var _k=this.nextbutton;if(_k){_k.move(_b-_c,0,_c,_c,null,null);}var _l=this.yearstatic;if(_l){_d=_l._on_getFitSize();_f=_d[0];}var _m=this.monthstatic;if(_m){_g=_m._on_getFitSize();_i=_g[0];}var _n=((_b/2)-((_f+_i)/2));if(_a=="MM.yyyy"){_h=_n;_e=_n+_i;}else{_e=_n;_h=_n+_f;}if(_l){_l.move(_e,0,_f,_c,null,null);}if(_m){_m.move(_h,0,_i,_c,null,null);}var _o=this.yearspin;if(_o){_d=this._getSpinControlSize("year");_f=_d+_c;}var _p=this.monthspin;if(_p){_g=this._getSpinControlSize("month");_i=_g+_c;}_n=((_b/2)-((_f+_i)/2));if(_a=="MM.yyyy"){_h=_n;_e=_n+_i;}else{_e=_n;_h=_n+_f;}if(_o){_o.move(_e,0,_f,_c,null,null);}if(_p){_p.move(_h,0,_i,_c,null,null);}}};_pDatePickerHeadControl._on_beforerepeat=function(_a){if(_a==this.prevbutton||_a==this.nextbutton||_a instanceof nexacro._SpinButtonControl){return [true,true];}return [false,true];};_pDatePickerHeadControl._setDate=function(_a,_b){var _c=this._date;if(_c){_c.str_year=nexacro._toString(_a).padLeft(4,"0");_c.str_month=nexacro._toString(_b).padLeft(2,"0");_c.int_year= +_a;_c.int_month= +_b;}var _d=this.yearstatic;var _e=this.yearspin;var _f=this.monthstatic;var _g=this.monthspin;if(this._getHeadformat()=="MM.yyyy"){_d.set_text(_c.str_year);_f.set_text(_c.str_month+".");}else{_d.set_text(_c.str_year+".");_f.set_text(_c.str_month);}_e.set_value(_c.str_year);_g.set_value(_c.str_month);};_pDatePickerHeadControl._getHeadheight=function(){var _a=this.parent;if(_a){return _a._getHeadheight();}return null;};_pDatePickerHeadControl._getHeadformat=function(){var _a=this.parent;if(_a){return _a._getHeadformat();}return null;};_pDatePickerHeadControl._getShowyearspin=function(){var _a=this.parent;if(_a){return _a._getShowyearspin();}return null;};_pDatePickerHeadControl._getShowmonthspin=function(){var _a=this.parent;if(_a){return _a._getShowmonthspin();}return null;};_pDatePickerHeadControl._getSpinControlSize=function(_a){var _b;switch(_a){case "year":_b=this.yearspin;break;case "month":_b=this.monthspin;break;}var _c=0;if(_b){var _d=_b._getCurrentStyleBorder();if(_d){_c+=_d._getBorderWidth();}var _e=_b._getCurrentStylePadding();if(_e){_c+=_e.left+_e.right;}var _f=_b.spinedit;if(_f){var _g=_f.text;if(_g.length==1&&_a=="month"){_f.text+=".0";}else if(_g.length<4&&_a=="year"){_f.text="0000.";}else{_f.text+=".";}_c+=_f._on_getFitSize()[0];_f.text=_g;}}return _c;};nexacro._DatePickerBodyControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._weekitems=[];this._dayitems=[];this._changedDays=[];this._date={str_year:"",str_month:"",str_day:"",int_year:0,int_month:0,int_day:0};};var _pDatePickerBodyControl=nexacro._createPrototype(nexacro.Component,nexacro._DatePickerBodyControl);nexacro._DatePickerBodyControl.prototype=_pDatePickerBodyControl;_pDatePickerBodyControl._type_name="DatePickerBodyControl";_pDatePickerBodyControl.weekband=null;_pDatePickerBodyControl._preday="";_pDatePickerBodyControl._maxWeek=7;_pDatePickerBodyControl._maxDay=42;_pDatePickerBodyControl._is_subcontrol=true;_pDatePickerBodyControl._use_readonly_status=true;_pDatePickerBodyControl._is_locale_control=true;_pDatePickerBodyControl._event_list={"onclick":1,"ondayclick":1,"onkeydown":1};_pDatePickerBodyControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.weekband=new nexacro.Static("weekband",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(true);var _c=this._getWeekformat();var _d=this._weekitems;var _e=this._dayitems;var _f=this._maxWeek;var _g=this._maxDay;var _h,_i;for(var _j=0;_j<_f;_j++ ){_h=_d[_j]=new nexacro._DatePickerWeekItemControl("weekitem"+_j,0,0,0,0,null,null,null,null,null,null,this);_h.set_text(_c[_j]);_h._setDaysOfWeek(_j%7);_h.createComponent(true);}for(_j=0;_j<_g;_j++ ){_i=_e[_j]=new nexacro._DatePickerDayItemControl("dayitem"+_j,0,0,0,0,null,null,null,null,null,null,this);_i._setDaysOfWeek(_j%7);_i.createComponent(true);}}};_pDatePickerBodyControl.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._weekitems;var _d=this._dayitems;var _e=this._maxWeek;var _f=this._maxDay;this.weekband.on_created(_a);for(var _g=0;_g<_e;_g++ ){_c[_g].on_created(_a);}for(_g=0;_g<_f;_g++ ){_d[_g]._setEventHandler("onclick",this._on_dayitem_ondayclick,this);_d[_g].on_created(_a);}}};_pDatePickerBodyControl.on_create_contents_command=function(){var _a=this.weekband;var _b=this._weekitems;var _c=this._dayitems;var _d=this._maxWeek;var _e=this._maxDay;var _f="";_f+=_a.createCommand();for(var _g=0;_g<_d;_g++ ){_f+=_b[_g].createCommand();}for(_g=0;_g<_e;_g++ ){_f+=_c[_g].createCommand();}return _f;};_pDatePickerBodyControl.on_attach_contents_handle=function(_a){var _b=this.weekband;var _c=this._weekitems;var _d=this._dayitems;var _e=this._maxWeek;var _f=this._maxDay;_b.attachHandle(_a);for(var _g=0;_g<_e;_g++ ){_c[_g].attachHandle(_a);}for(_g=0;_g<_f;_g++ ){_d[_g]._setEventHandler("onclick",this._on_dayitem_ondayclick,this);_d[_g].attachHandle(_a);}};_pDatePickerBodyControl.on_destroy_contents=function(){if(this.weekband){this.weekband.destroy();this.weekband=null;}var _a=this._weekitems;var _b=this._dayitems;var _c=this._maxWeek;var _d=this._maxDay;for(var _e=0;_e<_c;_e++ ){_a[_e].destroy();}for(_e=0;_e<_d;_e++ ){_b[_e].destroy();}this._weekitems=null;this._dayitems=null;this._changedDays=null;this._date=null;};_pDatePickerBodyControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerBodyControl.on_apply_prop_enable=function(_a){var _b;var _c=this._weekitems;var _d=this._dayitems;var _e=this._maxWeek;var _f=this._maxDay;if(this.weekband){this.weekband._setEnable(_a);}for(_b=0;_b<_e;_b++ ){_c[_b]._setEnable(_a);}for(_b=0;_b<_f;_b++ ){_d[_b]._setEnable(_a);}};_pDatePickerBodyControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerBodyControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._weekitems;var _c=this._dayitems;var _d=this._maxWeek;var _e=this._maxDay;for(var _f=0;_f<_d;_f++ ){_b[_f].set_readonly(_a);}for(_f=0;_f<_e;_f++ ){_c[_f].set_readonly(_a);}};_pDatePickerBodyControl._on_dayitem_ondayclick=function(_a,_b){var _c=this.parent.parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}this.on_fire_ondayclick(_a,_b);};_pDatePickerBodyControl.on_fire_ondayclick=function(_a,_b){if(this.ondayclick&&this.ondayclick._has_handlers){return this.ondayclick._fireEvent(this,_b);}return false;};_pDatePickerBodyControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._weekitems;var _b=this._dayitems;var _c=this._maxWeek;var _d=this._maxDay;var _e=this._getClientWidth();var _f=this._getClientHeight();var _g=this._getClientLeft();var _h=this._getClientTop();var _i=this._getDaysize();var _j=_i.width;var _k=_i.height;var _l=_j* 7;var _m=_k* 7;var _n=0;var _o=0;if(_l<_e){_n=(_e-_l)/14;}if(_m<_f){_o=(_f-_m)/8;}var _p=_g+_n;var _q=_h+(_o/2);this.weekband.move(_g,_q,_e,_k,null,null);var _r;for(_r=0;_r<_c;_r++ ){_a[_r].move(_p,_q,_j,_k,null,null);_p=_p+_j+(_n* 2);}var _s=_g+_n;var _t=_q+_k+_o;for(_r=0;_r<_d;_r++ ){_b[_r].move(_s,_t,_j,_k,null,null);_s=_s+_j+(_n* 2);if(((_r+1)%7)==0){_s=_g+_n;_t=_t+_k+_o;}}}};_pDatePickerBodyControl._refreshDay=function(){var _a,_b=this.getElement();if(_b){var _c={};var _d={};var _e=this._date;var _f=_e.int_year;var _g=_e.int_month;_a=_e.int_day;var _h=new Date(_f,_g-1,1);if(_f<100){_h.setFullYear(_f);}var _i=nexacro.Calendar.EndDayNormal;var _j=nexacro.Calendar.EndDayLeap;var _k=_h.getDay();var _l=this._getLeapYear(_f)?_j[_g-1]:_i[_g-1];var _m=this._getUsetrailingday();if(_m){_d=this._getUseTrailingDayInfo(_f,_g,_h,_l);}var _n=this._dayitems;var _o=this._maxDay;var _p=1;var _q= -1;for(var _s=0;_s<_o;_s++ ){if(_k<=_s&&_l>=_p){_c=this._getDayInfo(_p,false,true,_f,_g);this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);_q=_s%7;if(_q==0){_n[_s]._changeUserStatus("sunday",true);}else if(_q==6){_n[_s]._changeUserStatus("saturday",true);}else{if(this._isToday(_c.day)){_n[_s]._changeUserStatus("today",true);}else{_n[_s]._changeUserStatus("day",true);}}_p++ ;}else{if(_m){if(_d.idx>=0){_c=this._getDayInfo(_d.pre_endDay-_d.idx,true,true,_d.prev_year,_d.prev_month);_d.idx-- ;}else{_c=this._getDayInfo(_d.next_beginDay,true,true,_d.next_year,_d.next_month);_d.next_beginDay++ ;_d.endWeek++ ;}this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);_n[_s]._changeUserStatus("trailingday",true);}else{_c=this._getDayInfo("",false,false,"","");this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);}}}}this._initChangedDays();var _r=this._getInnerDataset();if(_r){this._setDatasetStyle(_r);}if(this._isSelectedDay(_a)){this._on_apply_day(true);}else{this._on_apply_day(false);}this._setCalendarAccessibility();};_pDatePickerBodyControl._on_apply_day=function(_a){var _b=this._preday;var _c=this._date.str_day;var _d=this._getDayItem(_b);var _e=this._getDayItem(_c);this._preday=_c;if(_d){_d._changeUserStatus("selected",false);if(_d._daysofweek==6){_d._changeUserStatus("saturday",true);}else if(_d._daysofweek==0){_d._changeUserStatus("sunday",true);}else{_d._changeUserStatus("day",true);}}if(_e){if(_a){_e._changeUserStatus("selected",true);}else{_e._changeUserStatus("selected",false);if(_e._daysofweek==6){_e._changeUserStatus("saturday",true);}else if(_e._daysofweek==0){_e._changeUserStatus("sunday",true);}else{_e._changeUserStatus("day",true);}}}var _f=new Date();var _g=_f.getDate();if(this._isToday(_g)){_g=nexacro._toString(_g).padLeft(2,"0");var _h=this._getDayItem(_g);if(_a){if(_h!=_e){_h._changeUserStatus("today",true);}}else{_h._changeUserStatus("today",true);}}};_pDatePickerBodyControl._initChangedDays=function(){var _a=this._changedDays.length;for(var _b=(_a-1);_b>=0;_b-- ){this._changedDays[_b].set_background(null);this._changedDays[_b].set_color(null);this._changedDays[_b].set_border(null);this._changedDays.pop();}};_pDatePickerBodyControl._setDate=function(_a,_b,_c){var _d=this._date;if(_d.str_year!=(_a=_a.padLeft(4,"0"))){_d.str_year=_a;_d.int_year= +_a;}if(_d.str_month!=(_b=_b.padLeft(2,"0"))){_d.str_month=_b;_d.int_month= +_b;}if(_d.str_day!=(_c=_c.padLeft(2,"0"))){this._preday=_d.str_day;_d.str_day=_c;_d.int_day= +_c;}this._refreshDay();};_pDatePickerBodyControl._setDayItemInfo=function(_a,_b,_c,_d,_e,_f){_a.set_text(_b);_a.set_wordWrap("none");_a.set_visible(_c);_a._year=_d;_a._month=_e;_a._trailingday=_f;};_pDatePickerBodyControl._setWeekformatText=function(){var _a=this.getElement();if(_a){var _b=this._getWeekformat();var _c=this._weekitems;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].set_text(_b[_e]);}}};_pDatePickerBodyControl._setDatasetStyle=function(_a){var _b,_c;var _d=this._dayitems;var _e=this._maxDay;var _f=this._getInnerDatasetColumns();var _g,_h,_i;var _j=_a.getRowCount();for(var _l=0;_l<_j;_l++ ){_c=_a.getColumn(_l,_f.datecolumn);for(var _m=0;_m<_e;_m++ ){_b=_d[_m];var _k=_b._year+_b._month+_b.text.padLeft(2,"0");if(_k==_c){_g=_a.getColumn(_l,_f.backgroundcolumn);_h=_a.getColumn(_l,_f.bordercolumn);_i=_a.getColumn(_l,_f.textcolorcolumn);if(_g){_b.set_background(_g);}if(_h){_b.set_border(_h);}if(_i){_b.set_color(_i);}this._changedDays[this._changedDays.length]=_b;}}}};_pDatePickerBodyControl._getLeapYear=function(_a){if((_a%4)==0&&(_a%100)!=0||(_a%400)==0){return true;}return false;};_pDatePickerBodyControl._getCurrentDate=function(){var _a=this.parent;if(_a){return _a._getCurrentDate();}return;};_pDatePickerBodyControl._getWeekformat=function(){var _a=this.parent;if(_a){var _b=_a._getWeekformat();if(_b){if(_b===" "){return [" "," "," "," "," "," "," "];}else{return _b.split(/\s+/);}}else{var _c=this._getLocale();var _d=nexacro.Locale.getLocaleInfo(_c);return _d.weekday_names_short;}}return null;};_pDatePickerBodyControl._getDaysize=function(){var _a=0;var _b=0;var _c=this.parent;if(_c){var _d=_c._getDaysize();if(!_d){_d=(this._getClientWidth()/7)+" "+(this._getClientHeight()/7);}_d=_d.split(/\s+/);_a= +_d[0];_b=_d[1]? +_d[1]:_a;}return {width:_a,height:_b};};_pDatePickerBodyControl._getDayInfo=function(_a,_b,_c,_d,_e){_d=nexacro._toString(_d);_d=_d?_d.padLeft(4,"0"):"";_e=nexacro._toString(_e);_e=_e?_e.padLeft(2,"0"):"";var _f=nexacro._toString(_a);_f=_f?_f.padLeft(2,"0"):"";return {text:_a,trailingday:_b,visible:_c,year:_d,month:_e,day:_f};};_pDatePickerBodyControl._getDayItem=function(_a){if(_a== -1){return null;}var _b=this._dayitems;var _c=this._maxDay;for(var _d=0;_d<_c;_d++ ){if(!_b[_d]._trailingday&&_a==_b[_d].text.padLeft(2,"0")){return _b[_d];}}return null;};_pDatePickerBodyControl._getUsetrailingday=function(){var _a=this.parent;if(_a){return _a._getUsetrailingday();}return null;};_pDatePickerBodyControl._getUseTrailingDayInfo=function(_a,_b,_c,_d){var _e=_a;var _f=_a;var _g=_b;var _h=_b;if(_b==1){_e-=1;_g=12;_h+=1;}else{_g-=1;if(_b==12){_f+=1;_h=1;}else{_h+=1;}}var _i=_c.getDay()-1;_c.setDate(_d);var _j=_c.getDay();var _k=nexacro.Calendar.EndDayNormal;var _l=nexacro.Calendar.EndDayLeap;var _m=this._getLeapYear(_e);var _n=_m?_l[_g-1]:_k[_g-1];var _o=1;return {prev_year:_e,next_year:_f,prev_month:_g,next_month:_h,endWeek:_j,idx:_i,pre_endDay:_n,next_beginDay:_o};};_pDatePickerBodyControl._getInnerDataset=function(){var _a=this.parent;if(_a){return _a._getInnerDataset();}return null;};_pDatePickerBodyControl._getInnerDatasetColumns=function(){var _a=this.parent;if(_a){var _b=_a._getBackgroundcolumn();var _c=_a._getBordercolumn();var _d=_a._getDatecolumn();var _e=_a._getTextcolorcolumn();return {backgroundcolumn:_b,bordercolumn:_c,datecolumn:_d,textcolorcolumn:_e};}return null;};_pDatePickerBodyControl._isToday=function(_a){var _b=this._date.int_year;var _c=this._date.int_month;var _d=parseInt(_a,10);var _e=this._getCurrentDate();if(_b==_e.year&&_c==_e.month&&_d==_e.day){return true;}return false;};_pDatePickerBodyControl._isSelectedDay=function(_a){_a=parseInt(_a,10);var _b=this._date.int_year;var _c=this._date.int_month;if(_b==this.parent._selected_year&&_c==this.parent._selected_month&&_a==this.parent._selected_day){return true;}return false;};_pDatePickerBodyControl._setCalendarAccessibility=function(){if(nexacro._enableaccessibility){var _a=this.parent.parent;var _b=this._date;var _c=_b.str_year+_b.str_month+_b.str_day;var _d=_a._masktypeobj.applyMask(_c);this.parent._setAccessibilityLabel(_d);this._setAccessibilityLabel(_d);nexacro._notifyAccessibilityValue(this._control_element,_d,"daychange");}};_pDatePickerBodyControl.on_get_accessibility_label=function(){var _a=this._date;var _b=_a.str_year+_a.str_month+_a.str_day;return _b;};delete _pDatePickerBodyControl;nexacro._DatePickerDayItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._flag_dataset= -1;this._dataset_background="";this._refObj=_l.parent;};var _pDatePickerDayItemControl=nexacro._createPrototype(nexacro.Button,nexacro._DatePickerDayItemControl);nexacro._DatePickerDayItemControl.prototype=_pDatePickerDayItemControl;_pDatePickerDayItemControl._type_name="DatePickerDayItemControl";_pDatePickerDayItemControl._is_subcontrol=true;_pDatePickerDayItemControl.accessibilityrole="gridcell";_pDatePickerDayItemControl._trailingday=false;_pDatePickerDayItemControl._year="";_pDatePickerDayItemControl._month="";_pDatePickerDayItemControl._daysofweek= -1;_pDatePickerDayItemControl._use_readonly_status=true;_pDatePickerDayItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}};_pDatePickerDayItemControl.on_apply_readonly=function(){var _a=this.readonly;this._changeStatus("readonly",_a);};_pDatePickerDayItemControl._setDaysOfWeek=function(_a){if(this._daysofweek!=_a){this._daysofweek=_a;this._on_apply_daysofweek(_a);}};_pDatePickerDayItemControl._on_apply_daysofweek=function(_a){var _b=_a;if(_b&&_b.length>0){if(this.trailingday){this._changeUserStatus("trailingday",true);}else if(this.parent._isSelectedDay(_b)){this._changeUserStatus("selected",true);}else if(this.parent._isToday(_b)){this._changeUserStatus("today",true);}else if(this._daysofweek==6){this._changeUserStatus("saturday",true);}else if(this._daysofweek==0){this._changeUserStatus("sunday",true);}}};_pDatePickerDayItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){var _f=this.parent.parent.parent;if(_f&&_f._onlydisplay==true){if(_c!="disabled"){return "enabled";}}else{return _c;}};_pDatePickerDayItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pDatePickerDayItemControl.on_getIDCSSSelector=function(){return "dayitem";};_pDatePickerDayItemControl.on_keydown_basic_action=function(){if(nexacro._enableaccessibility){nexacro.Button.prototype.on_apply_accessibility.call(this);}};delete _pDatePickerDayItemControl;nexacro._DatePickerWeekItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._refObj=_l.parent;};var _pDatePickerWeekItemControl=nexacro._createPrototype(nexacro.Static,nexacro._DatePickerWeekItemControl);nexacro._DatePickerWeekItemControl.prototype=_pDatePickerWeekItemControl;_pDatePickerWeekItemControl._type_name="DatePickerWeekItemControl";_pDatePickerWeekItemControl._is_subcontrol=true;_pDatePickerWeekItemControl._daysofweek= -1;_pDatePickerWeekItemControl._use_readonly_status=true;_pDatePickerWeekItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}};_pDatePickerWeekItemControl.on_apply_readonly=function(){var _a=this.readonly;this._changeStatus("readonly",_a);};_pDatePickerWeekItemControl._setDaysOfWeek=function(_a){if(this._daysofweek!=_a){this._daysofweek=_a;this._on_apply_daysofweek(_a);}};_pDatePickerWeekItemControl._on_apply_daysofweek=function(_a){if(_a==0){this._changeUserStatus("sunday",true);}else if(_a==6){this._changeUserStatus("saturday",true);}};_pDatePickerWeekItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _a;};_pDatePickerWeekItemControl.on_getIDCSSSelector=function(){return "weekitem";};delete _pDatePickerWeekItemControl;nexacro._YearSpinControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Spin.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pYearSpinControl=nexacro._createPrototype(nexacro.Spin,nexacro._YearSpinControl);nexacro._YearSpinControl.prototype=_pYearSpinControl;_pYearSpinControl._type_name="Spin";_pYearSpinControl._default_mask="9999";_pYearSpinControl._is_subcontrol=true;_pYearSpinControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this.spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this.spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("both");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pYearSpinControl=null;nexacro._MonthSpinControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Spin.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMonthSpinControl=nexacro._createPrototype(nexacro.Spin,nexacro._MonthSpinControl);nexacro._MonthSpinControl.prototype=_pMonthSpinControl;_pMonthSpinControl._type_name="Spin";_pMonthSpinControl._is_subcontrol=true;_pMonthSpinControl._default_mask="99";_pMonthSpinControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this.spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this.spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("both");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pMonthSpinControl=null;}if(!nexacro.Calendar){nexacro.CalendarCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.pretext=_c;this.posttext=_d;this.prevalue=_e;this.postvalue=_f;};var _pCalendarCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarCloseUpEventInfo);nexacro.CalendarCloseUpEventInfo.prototype=_pCalendarCloseUpEventInfo;_pCalendarCloseUpEventInfo._type_name="CalendarCloseUpEventInfo";delete _pCalendarCloseUpEventInfo;_pCalendarCloseUpEventInfo=null;nexacro.CalendarDayClickEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"ondayclick";this.fromobject=this.fromreferenceobject=_a;this.date=_c;};var _pCalendarDayClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarDayClickEventInfo);nexacro.CalendarDayClickEventInfo.prototype=_pCalendarDayClickEventInfo;_pCalendarDayClickEventInfo._type_name="CalendarDayClickEventInfo";delete _pCalendarDayClickEventInfo;_pCalendarDayClickEventInfo=null;nexacro.CalendarSpinEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Event.call(this,_a,_b||"oncalendarspin");this.id=this.eventid=_b||"oncalendarspin";this.fromobject=_h||_a;this.fromreferenceobject=_i||_a;this.pretext=_c;this.posttext=_d;this.prevalue=_e;this.postvalue=_f;this.up=_g;};var _pCalendarSpinEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarSpinEventInfo);nexacro.CalendarSpinEventInfo.prototype=_pCalendarSpinEventInfo;_pCalendarSpinEventInfo._type_name="CalendarSpinEventInfo";delete _pCalendarSpinEventInfo;_pCalendarSpinEventInfo=null;nexacro.Calendar=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._masktypeobj=new nexacro._EditMaskTypeDate();this._onlydisplay=_m;};var _pCalendar=nexacro._createPrototype(nexacro.Component,nexacro.Calendar);nexacro.Calendar.prototype=_pCalendar;_pCalendar._type_name="Calendar";_pCalendar.calendaredit=null;_pCalendar.dropbutton=null;_pCalendar.datepicker=null;_pCalendar.calendarspinupbutton=null;_pCalendar.calendarspindownbutton=null;_pCalendar._popupcontrol=null;_pCalendar.value=undefined;_pCalendar.displaynulltext="";_pCalendar.displayinvalidtext="invalid value";_pCalendar.readonly=false;_pCalendar.autoselect=false;_pCalendar.autoskip=false;_pCalendar.type="normal";_pCalendar.popuptype=undefined;_pCalendar.text="";_pCalendar.usecontextmenu=true;_pCalendar.usesoftkeyboard=true;_pCalendar.locale="";_pCalendar.innerdataset=null;_pCalendar.backgroundcolumn="";_pCalendar.bordercolumn="";_pCalendar.datecolumn="";_pCalendar.textcolorcolumn="";_pCalendar.buttonsize=undefined;_pCalendar.headheight=undefined;_pCalendar.daysize=undefined;_pCalendar.popupsize=undefined;_pCalendar.dateformat="yyyy-MM-dd ddd";_pCalendar.editformat="yyyy-MM-dd";_pCalendar.headformat="yyyy.MM";_pCalendar.weekformat=undefined;_pCalendar.usetrailingday=false;_pCalendar.showmonthspin=false;_pCalendar.showyearspin=false;_pCalendar._masktypeobj=null;_pCalendar._innerdataset=null;_pCalendar._locale="";_pCalendar._type="normal";_pCalendar._systemformat="yyyy-MM-dd";_pCalendar._default_value=undefined;_pCalendar._default_text="";_pCalendar._default_type="";_pCalendar._want_arrows=false;_pCalendar._has_inputElement=true;_pCalendar._change_caret_from_method=false;_pCalendar._onlydisplay=false;_pCalendar._is_repeat=true;_pCalendar.__value_change=false;_pCalendar.__focus_from_spinbutton=false;_pCalendar._is_locale_control=true;_pCalendar._is_editable_control=true;_pCalendar._use_readonly_status=true;_pCalendar._event_list={"oneditclick":1,"ondayclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"oncontextmenu":1,"ondropdown":1,"oncloseup":1,"onspin":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pCalendar.accessibilityrole="calendar";_pCalendar._is_compound=true;nexacro.Calendar.EndDayNormal=new Array(31,28,31,30,31,30,31,31,30,31,30,31);nexacro.Calendar.EndDayLeap=new Array(31,29,31,30,31,30,31,31,30,31,30,31);_pCalendar.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._masktypeobj;if(_b){var _c="number";var _d=true;var _e=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"));if(_e){this._is_repeat=false;if((!this.popuptype||this.popuptype=="system")&&this._type=="normal"){_c="date";_d=false;this._type="system";}}_b.setInputMode(_c);_b.setUseEditBuffer(_d);}switch(this._type){case "normal":case "system":this._createCalendaredit();this._createDropbutton();break;case "spin":this._createCalendaredit();this._createSpinbutton();break;case "monthonly":this._createDatePicker();break;}}};_pCalendar.on_created_contents=function(_a){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_editformat(this.editformat);this.on_apply_dateformat(this.dateformat);this.on_apply_weekformat(this.weekformat);if(this.expr){this._on_apply_expr(this.expr);}else{this.on_apply_value(this.value);}this._recalcLayout();switch(this._type){case "spin":this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();this.calendaredit._on_apply_inputtype();this.calendaredit.on_created(_a);this.calendarspinupbutton.on_created(_a);this.calendarspindownbutton.on_created(_a);if(nexacro._accessibilitytype==5){this.calendaredit._setAccessibilityStatHidden(true);this.calendarspinupbutton._setAccessibilityStatHidden(true);this.calendarspindownbutton._setAccessibilityStatHidden(true);}break;case "monthonly":this._setEventHandlerToDatePicker();this.datepicker.on_created(_a);break;case "system":if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _b=this.getElement();if(_b){_b.setElementAccessibilityStatHidden(false);}}this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this.calendaredit._on_apply_inputtype();this.calendaredit.on_created(_a);var _c=this.dropbutton;if(_c){_c.on_created(_a);}if(nexacro._accessibilitytype==5){this.calendaredit._setAccessibilityStatHidden(true);}if(this.accessibilitydesclevel!="none"&&this.accessibilitydesclevel!="child"){this._setAccessibilityActiveDescendant(this.calendaredit._input_element);}break;case "normal":default:this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this.calendaredit._on_apply_inputtype();this.calendaredit.on_created(_a);if(nexacro._accessibilitytype==5){this.calendaredit._setAccessibilityStatHidden(true);}this.dropbutton.on_created(_a);break;}if(this.calendaredit){this.calendaredit.set_usesoftkeyboard(this.usesoftkeyboard,true);}this._default_value=this.value;this._default_text=this.text;this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this.on_apply_readonly();};_pCalendar.on_destroy_contents=function(){this._destroyControl();this._removeEventHandlerToInnerDataset();};_pCalendar._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pCalendar.on_create_contents_command=function(){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_editformat(this.editformat);this.on_apply_dateformat(this.dateformat);this.on_apply_weekformat(this.weekformat);if(this.expr){this._on_apply_expr(this.expr);}else{this.on_apply_value(this.value);}this._recalcLayout();switch(this._type){case "system":case "normal":this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();break;case "spin":this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();break;case "monthonly":this._setEventHandlerToDatePicker();break;}var _a="";if(this.calendaredit){this.calendaredit._on_apply_inputtype();_a+=this.calendaredit.createCommand();}if(this.dropbutton){_a+=this.dropbutton.createCommand();}if(this.calendarspindownbutton){_a+=this.calendarspindownbutton.createCommand();}if(this.calendarspinupbutton){_a+=this.calendarspinupbutton.createCommand();}if(this.datepicker){_a+=this.datepicker.createCommand();}return _a;};_pCalendar.on_attach_contents_handle=function(_a){if(this.calendaredit){this.calendaredit.attachHandle(_a);}if(this.dropbutton){this.dropbutton.attachHandle(_a);}if(this.calendarspindownbutton){this.calendarspindownbutton.attachHandle(_a);}if(this.calendarspinupbutton){this.calendarspinupbutton.attachHandle(_a);}if(this.datepicker){this.datepicker.attachHandle(_a);}this._default_value=this.value;this._default_text=this.text;this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this.on_apply_readonly();};_pCalendar.on_change_containerRect=function(){this._recalcLayout();};_pCalendar.on_change_containerPos=function(){};_pCalendar._apply_setfocus=function(_a){var _b=this.calendaredit;if(_b){_b._on_focus(true,nexacro._getBrowserEventName(_a));}};_pCalendar.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this.calendaredit){this.calendaredit._setEnable(_a);}if(this.dropbutton&&!this._isReadOnly()){this.dropbutton._setEnable(_a);}if(this.calendarspinupbutton&&!this._isReadOnly()){this.calendarspinupbutton._setEnable(_a);}if(this.calendarspindownbutton&&!this._isReadOnly()){this.calendarspindownbutton._setEnable(_a);}if(this.datepicker){this.datepicker._setEnable(_a);}};_pCalendar.on_apply_prop_cssclass=function(){if(this.calendaredit){this.calendaredit.on_apply_cssclass();}if(this.dropbutton){this.dropbutton.on_apply_cssclass();}if(this.calendarspinupbutton){this.calendarspinupbutton.on_apply_cssclass();}if(this.calendarspindownbutton){this.calendarspindownbutton.on_apply_cssclass();}if(this.datepicker){this.datepicker.on_apply_cssclass();}};_pCalendar.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(undefined);}};_pCalendar.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);var _f=this._masktypeobj;var _g=this._convertToDateObject(_e);if(_g){if(!this._isInvalidValue(_g)){_e=this._convertValueType(_e,_g,true);if(_e!=this.value){var _h=_f.changeNormalizeValue(_g.toString());if(_f){_f.setDate(_h);}this.value=_e;this.on_apply_value(_h);}}else{this.value=_e;this.on_apply_value(_e);}}else{if(_e!=this.value){this._setValue(_e);}}}};_pCalendar.on_getBindableProperties=function(){return "value";};_pCalendar._getDragData=function(){var _a=this.calendaredit;if(_a){return _a.getSelectedText();}};_pCalendar._getDlgCode=function(_a,_b,_c){var _d=this._want_arrows;this._is_first_focus=false;if(_c==true){_d=true;}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_d};};_pCalendar.on_get_accessibility_label=function(){{}return "";};_pCalendar._on_getAccessibilityAdditionalLabel=function(){var _a="";if(this.type!="monthonly"){_a=this._accessibilityvalue?this._accessibilityvalue:this.text?this.text:this._getCurrentDateStr();}else{_a=this._getCurrentDateStr();}return _a?_a:this.displaynulltext;};_pCalendar._getAccessibilityReadLabel=function(){if(this._accessibilityvalue){return this._accessibilityvalue;}if(this.text){return this.text;}return this._getCurrentDateStr();};_pCalendar.set_text=nexacro._emptyFn;_pCalendar.on_apply_text=function(_a){var _b=this.expr;if(_b){if(_b.substring(0,4)=="Date"){_a=new nexacro.Date(_a).toString();}if(this.value!=_a){this.set_value(_a);}else{this.on_apply_value(_a);}}};_pCalendar.set_value=function(_a){var _b=this._convertToDateObject(_a);var _c=false;if(_b){_c=this._isInvalidValue(_b);if(!_c){_a=this._convertValueType(_a,_b);}}if(this.value!==_a){if(this.applyto_bindSource("value",_a)){this.value=_a;this.on_apply_value(_a,_c);}}};_pCalendar.on_apply_value=function(_a,_b){_a=nexacro._isNull(_a)?_a:nexacro._toString(_a).trim();var _c=this._masktypeobj;if(_c){if(nexacro._isNull(_b)){_b=this._isInvalidValue(_a);}if(_b){this.text=_c.applyMask("");}else{this.text=_c.applyMask(_a);}this._setCalendarEditValue(_a);this._setDatePickerValue(_c.getDatePickerValue());}};_pCalendar.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displaynulltext!=_a){this.displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pCalendar.on_apply_displaynulltext=function(_a){var _b=this.calendaredit;if(_b){_b.set_displaynulltext(_a);}};_pCalendar.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this.displayinvalidtext!=_a){this.displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pCalendar.on_apply_displayinvalidtext=function(_a){var _b=this.calendaredit;if(_b){_b.set_displayinvalidtext(_a);}};_pCalendar.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this.readonly!=_a){this.readonly=_a;this.on_apply_readonly();}};_pCalendar._isReadOnly=function(){return this.readonly;};_pCalendar.on_apply_readonly=function(){var _a=this._isReadOnly();this._changeStatus("readonly",_a);var _b=this.calendaredit;if(_b){if(!this._onlydisplay){_b.set_readonly(_a);}else{_b._changeStatus("readonly",_a);}}var _c=this.dropbutton;if(_c){_c._setEnable(this._isEnable()&&!_a);}var _d=this.calendarspinupbutton;if(_d){_d._setEnable(this._isEnable()&&!_a);}var _e=this.calendarspindownbutton;if(_e){_e._setEnable(this._isEnable()&&!_a);}var _f=this.datepicker;if(_f){_f.set_readonly(_a);}};_pCalendar.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this.autoselect!=_a){this.autoselect=_a;this.on_apply_autoselect(_a);}};_pCalendar.on_apply_autoselect=function(_a){var _b=this.calendaredit;if(_b){_b.set_autoselect(_a);}};_pCalendar.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this.autoskip!=_a){this.autoskip=_a;this.on_apply_autoskip(_a);}};_pCalendar.on_apply_autoskip=function(_a){var _b=this.calendaredit;if(_b){_b.set_autoskip(_a);}};_pCalendar.set_type=function(_a){var _b=["normal","spin","monthonly"];if(_b.indexOf(_a)== -1){return;}if(this.type!=_a){this._default_type=this.type;this.type=_a;this.on_apply_type(_a);}};_pCalendar.on_apply_type=function(_a){var _b=true;var _c=this._getClientWidth();var _d=Math.round(_c/5);if(this._default_type!="monthonly"||_a=="monthonly"){_b=false;}if(_a!="spin"&&_a!="monthonly"&&this._masktypeobj.getInputMode()=="date"){_a="system";}this._type=_a;var _e=this.getElement();if(_e){this._destroyControl();switch(this._type){case "system":case "normal":this._createNormaltypeControl();this.calendaredit._on_apply_inputtype();if(_b){this.resize(_c,_d);}else{this._recalcLayout();}break;case "spin":this._createSpintypeControl();this.calendaredit._on_apply_inputtype();if(_b){this.resize(_c,_d);}else{this._recalcLayout();}break;case "monthonly":this._createMonthlytypeControl();var _f=this._getPopupSizeArr();if(this._adjust_width==_f.width&&this._adjust_height==_f.height){this._recalcLayout();}else{this.resize(_f.width,_f.height);}break;}}};_pCalendar.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_a&&_b.indexOf(_a)== -1){return;}if(this.popuptype!=_a){this.popuptype=_a;this.on_apply_popuptype(_a);}};_pCalendar.on_apply_popuptype=function(_a){var _b=this._type;var _c=this._masktypeobj;if(_c){var _d="number";var _e=true;if((!this.popuptype||this.popuptype=="system")&&(_b=="normal"||_b=="system")){var _f=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"));if(_f&&this._is_created){_d="date";_e=false;}}_c.setInputMode(_d);_c.setUseEditBuffer(_e);this.on_apply_type(this.type);}};_pCalendar.set_locale=function(_a){if(this.locale!=_a){this.locale=_a;this._locale=_a;this.on_apply_locale(_a);this.on_apply_weekformat(this.weekformat);this.on_apply_value(this.value);}};_pCalendar.on_apply_locale=function(_a){var _b=this._masktypeobj;if(_b){_b.setLocale(_a);if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){this._systemformat=nexacro.Locale._makeDateMaskString(_a,"SHORTDATE");}}};_pCalendar.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pCalendar.on_apply_usecontextmenu=function(_a){var _b=this.calendaredit;if(_b){_b.set_usecontextmenu(_a);}};_pCalendar.set_usesoftkeyboard=function(_a,_b){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard||_b){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard(_b);}};_pCalendar.on_apply_usesoftkeyboard=function(_a){if(this.calendaredit){this.calendaredit.set_usesoftkeyboard(this.usesoftkeyboard,_a);}};_pCalendar.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this.innerdataset!=_a||(this.innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pCalendar.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}var _b=this.datepicker;if(_b){_b._refreshDay();}};_pCalendar.set_backgroundcolumn=function(_a){if(this.backgroundcolumn!=_a){this.backgroundcolumn=_a;this.on_apply_backgroundcolumn(_a);}};_pCalendar.on_apply_backgroundcolumn=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_bordercolumn=function(_a){if(this.bordercolumn!=_a){this.bordercolumn=_a;this.on_apply_bordercolumn(_a);}};_pCalendar.on_apply_bordercolumn=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_datecolumn=function(_a){if(this.datecolumn!=_a){this.datecolumn=_a;this.on_apply_datecolumn(_a);}};_pCalendar.on_apply_datecolumn=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_textcolorcolumn=function(_a){if(this.textcolorcolumn!=_a){this.textcolorcolumn=_a;this.on_apply_textcolorcolumn(_a);}};_pCalendar.on_apply_textcolorcolumn=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_buttonsize=function(_a){if(this.buttonsize!=_a){this.buttonsize=_a;this.on_apply_buttonsize(_a);}};_pCalendar.on_apply_buttonsize=function(){this._recalcLayout();};_pCalendar.set_headheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.headheight!=_a){this.headheight=_a;this.on_apply_headheight(_a);}};_pCalendar.on_apply_headheight=function(){var _a=this.datepicker;if(_a){_a._recalcLayout();}};_pCalendar.set_daysize=function(_a){if(this.daysize!=_a){this.daysize=_a;this.on_apply_daysize(_a);}};_pCalendar.on_apply_daysize=function(){var _a=this.datepicker;if(_a){_a._refreshDay();_a.body._recalcLayout();}};_pCalendar.set_popupsize=function(_a){if(this.popupsize!=_a){this.popupsize=_a;}};_pCalendar.on_apply_popupsize=nexacro._emptyFn;_pCalendar.set_dateformat=function(_a){if(this.dateformat!=_a){this.dateformat=_a;this.on_apply_dateformat(_a);this.on_apply_value(this.value);}};_pCalendar.on_apply_dateformat=function(_a){var _b=this._masktypeobj;if(_b){if(this._type=="system"){_a=this._systemformat;}_b.setDateMask(_a);}};_pCalendar.set_editformat=function(_a){if(this.editformat!=_a){this.editformat=_a;this.on_apply_editformat(_a);this._setValue(this.value);}};_pCalendar.on_apply_editformat=function(_a){var _b=this._masktypeobj;if(_b){if(this._type=="system"){_a=this._systemformat;}_b.setEditMask(_a);}};_pCalendar.set_headformat=function(_a){if(this.headformat!=_a){this.headformat=_a;this.on_apply_headformat(_a);}};_pCalendar.on_apply_headformat=function(){var _a=this.datepicker;if(_a){_a._setHeadformatText();}};_pCalendar.set_weekformat=function(_a){if(this.weekformat!=_a){this.weekformat=_a;this.on_apply_weekformat(_a);}};_pCalendar.on_apply_weekformat=function(){var _a=this.datepicker;if(_a){_a._setWeekformatText();}};_pCalendar.set_usetrailingday=function(_a){_a=nexacro._toBoolean(_a);if(this.usetrailingday!=_a){this.usetrailingday=_a;this.on_apply_usetrailingday(_a);}};_pCalendar.on_apply_usetrailingday=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_showmonthspin=function(_a){_a=nexacro._toBoolean(_a);if(this.showmonthspin!=_a){this.showmonthspin=_a;this.on_apply_showmonthspin(_a);}};_pCalendar.on_apply_showmonthspin=function(){var _a=this.datepicker;if(_a){_a._refreshSpindate();}};_pCalendar.set_showyearspin=function(_a){_a=nexacro._toBoolean(_a);if(this.showyearspin!=_a){this.showyearspin=_a;this.on_apply_showyearspin(_a);}};_pCalendar.on_apply_showyearspin=function(){var _a=this.datepicker;if(_a){_a._refreshSpindate();}};_pCalendar.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(this.calendaredit){this.calendaredit.on_apply_accessibility();}};_pCalendar.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this.visible&&this._isPopupVisible()){this._closePopup();}};_pCalendar.on_apply_accessibility=function(_a){nexacro.Component.prototype.on_apply_accessibility.call(this,_a);if(this.calendaredit){this.calendaredit.on_apply_accessibility(_a);}};_pCalendar.dropdown=function(){if(!this.enable||this.readonly||!this.visible||this._type=="system"){return false;}if(this._isPopupVisible()){return false;}this._setFocus(false);this._showPopup();this._setZeroCaret();};_pCalendar.isDropdown=function(){return this._isPopupVisible();};_pCalendar.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this.calendaredit;if(_a){return _a.getCaretPos();}return  -1;};_pCalendar.setCaretPos=function(_a){var _b=this.calendaredit;if(_b){this._change_caret_from_method=true;return _b.setCaretPos(_a);}};_pCalendar.getSelect=function(){var _a=this.calendaredit;if(_a){return _a.getSelect();}return [0,0];};_pCalendar.setSelect=function(_a,_b){var _c=this.calendaredit;if(_c){this._change_caret_from_method=true;return _c.setSelect(_a,_b);}return false;};_pCalendar.getSelectedText=function(){var _a=this.calendaredit;if(_a){return _a.getSelectedText();}return "";};_pCalendar.getInnerDataset=function(){return this._innerdataset;};_pCalendar.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset(this._innerdataset);}};_pCalendar.getYear=function(){var _a=1970;if(this.value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getFullYear();}}return _a;};_pCalendar.getMonth=function(){var _a=1;if(this.value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getMonth()+1;}}return _a;};_pCalendar.getDay=function(){var _a=1;if(this.value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getDate();}}return _a;};_pCalendar.getDayOfWeek=function(){var _a=4;if(this.value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getDay();}}return _a;};_pCalendar.updateToDataset=function(){return this.applyto_bindSource("value",this.value);};_pCalendar._on_value_change=function(_a,_b){if(this._beginValueChange()){return false;}var _c=true;var _d=false;var _e=this._getEventInfoText(_a);var _f=this._getEventInfoText(_b);if(!this.on_fire_canchange(this,_e,_a,_f,_b)){_c=false;}else if(!this.applyto_bindSource("value",_b)){_d=true;_c=false;}if(!_c){this.value=_a;var _g=this._masktypeobj;var _h=_g.changeNormalizeValue(_a);this.on_apply_value(_h);if(_d){if(this._isPopupVisible()){this._closePopup();}}}else{if(this.value!=_a){if(this.value!=_b){if(this._isPopupVisible()){this._closePopup();}_c=false;}}}if(_c){this._setValue(_b);this._default_value=_a;this._default_text=_e;this.on_fire_onchanged(this,_e,_a,_f,_b);if(this._isPopupVisible()){this._closePopup();}}this._finalValueChange();return _c;};_pCalendar._on_dataset_onvaluechanged=function(_a,_b){var _c=this.datepicker;if(_c){_c._refreshDay();}if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pCalendar._on_dataset_onrowsetchanged=function(){var _a=this.datepicker;if(_a){_a._refreshDay();}};_pCalendar._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);var _c=(this._type=="system"&&!this.readonly);var _d=this.getElement()?true:false;if(!_c||!_d){return;}this.calendaredit._prevent_clickevent=false;var _e=this.on_fire_ondropdown(this);if(_e){var _f=false;var _g= -1;if(_a instanceof nexacro.MaskEdit){this.dropbutton._control_element.setElementFocus();if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){if(nexacro._SystemType=="ipad"){if(parseFloat(nexacro._OSVersion)>=13){_f=true;_g=350;}}else if(nexacro._SystemType=="iphone"){if(parseFloat(nexacro._OSVersion)>=14){_f=true;_g=5;}}}}if(_f){var _h=this;setTimeout(function(){nexacro._openSystemCalendar(_h,_h.value,"_on_notify_mobile_valuechanged");},_g);}else{nexacro._openSystemCalendar(this,this.value,"_on_notify_mobile_valuechanged");}}this.calendaredit._prevent_clickevent=true;};_pCalendar._on_edit_onlbuttondown=function(){if(this.readonly){return false;}if(this._isPopupVisible()){this._closePopup();}};_pCalendar._on_edit_onlbuttonup=function(){};_pCalendar._on_edit_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=this.calendaredit;var _e=this.datepicker;switch(this.type){case "normal":if(_c==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){this._closePopup();}this._setZeroCaret();}else if(_c==nexacro.Event.KEY_ENTER){if(this._isPopupVisible()){_e._changeDate(_a,_b);_e.on_fire_ondayclick(_e._value);}else{if(this.value!=_d.value){this._on_value_change(this.value,_d.value);}else if(this.text!=_d.text){this._setValue(this.value);}}this._setZeroCaret();}else if(_b.altkey&&_c==nexacro.Event.KEY_DOWN){if(!this._isPopupVisible()){this._showPopup();this._setZeroCaret();if(_d){var _f=_d.value?_d.value:this.datepicker._value;this._setDatePickerValue(_f);}}}else{if(this._isPopupVisible()){if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){_e._on_body_onkeydown(_a,_b);}}}break;case "spin":if(_c==nexacro.Event.KEY_ENTER){if(this.value!=_d.value){this._on_value_change(this.value,_d.value);}else if(this.text!=_d.text){this._setValue(this.value);}this._setZeroCaret();}else if(_c==nexacro.Event.KEY_UP){if(!nexacro._enableaccessibility||_b.ctrlkey){this._on_spin_onspinup(_a,_b);}}else if(_c==nexacro.Event.KEY_DOWN){if(!nexacro._enableaccessibility||_b.ctrlkey){this._on_spin_onspindown(_a,_b);}}break;case "monthonly":if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){_e.on_keydown_default_action(_c,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.fromreferenceobject,_b.metakey);_e._refreshSpindate();_e.on_fire_ondayclick(_e);}break;default:break;}if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){_d._input_element.stopSysEvent();}else{if(_c==nexacro.Event.KEY_UP||_c==nexacro.Event.KEY_DOWN){if(nexacro._Browser!="Runtime"){_d._input_element.stopSysEvent();}}}}return false;};_pCalendar._on_edit_oninput=function(){var _a;var _b=this._masktypeobj;if(_b._use_edit_buf){_a=_b.changeNormalizeValueFromBuffer();}else{_a=_b.changeNormalizeValue(this.calendaredit.value);}if(this._isPopupVisible()){this._setDatePickerValue(_a);}this.on_fire_oninput();if(this._type=="system"){if(this.value!=_a){this._on_value_change(this.value,_a);}}};_pCalendar._on_notify_mobile_valuechanged=function(_a){if(this._type=="system"){this._setCalendarEditValue(_a);this.on_fire_oninput();var _b;var _c=this._masktypeobj;if(_c){if(_c._use_edit_buf){_b=_c.changeNormalizeValueFromBuffer();}else{_b=_c.changeNormalizeValue(this.calendaredit.value);}if(this.value!=_b){this._on_value_change(this.value,_b);}}}};_pCalendar._on_drop_onlbuttondown=function(_a,_b){if(_b.button!="lbutton"){return;}if(this.readonly||!this.enable){return false;}if(this._isPopupVisible()){this._closePopup();if(!this.autoselect){this._setZeroCaret();}}else{var _c=this.datepicker;var _d=this.calendaredit;if(_c&&_d){var _e=_d.value;if(_e){var _f=_d._isInvalidValue(_e);if(_f){_e=_c._value;}}else{_e=_c._value;}this._setDatePickerValue(_e);}this._showPopup();if(!this.autoselect){this._setZeroCaret();}}return false;};_pCalendar._on_drop_mobile_onclick=function(){if(this.readonly||!this.enable){return false;}if(this._isPopupVisible()){this._closePopup();}else{var _a=this.datepicker;var _b=this.calendaredit;if(_a&&_b){var _c=_b.value?_b.value:_a._value;this._setDatePickerValue(_c);}this._showPopup();}return false;};_pCalendar._on_drop_onclick=function(_a,_b){if(_b.button!="touch"){return;}if(this.readonly||!this.enable){return false;}if(this._isPopupVisible()){this._closePopup();if(!this.autoselect){this._setZeroCaret();}}else{var _c=this.datepicker;var _d=this.calendaredit;if(_c&&_d){var _e=_d.value;if(_e){var _f=_d._isInvalidValue(_e);if(_f){_e=_c._value;}}else{_e=_c._value;}this._setDatePickerValue(_e);}this._showPopup();if(!this.autoselect){this._setZeroCaret();}}return false;};_pCalendar._on_spin_onspinup=function(){if(this.readonly){return false;}var _a=this.calendaredit;if(_a){var _b="";var _c;var _d;var _e=this._default_value;var _f="";var _g=this.getCaretPos();var _h=_g;var _i=this.calendaredit.text.length;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){if(this._rtl){if(_g==0){_g=_i;}else if(_g==_i){_g=0;}}}var _j=this._masktypeobj;if(_j){if(!_j.date){var _k=this._getCurrentDate();var _l=nexacro._toString(_k.year).padLeft(4,"0");var _m=nexacro._toString(_k.month).padLeft(2,"0");var _n=nexacro._toString(_k.day).padLeft(2,"0");var _o=_j.getEditFormatType();switch(_o){case 0:_c=_l+_m+_n;break;case 1:_c="000000000";break;case 2:_c=_l+_m+_n+"000000000";}_b=_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}else{_b=_j.applyMaskSpin(_g,1);_c=_j.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,true)){_b=_e?_d:_j.applyMask(this.value);_c=_e?_e:_j.removeMask(_b);}_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}}}};_pCalendar._on_spin_onspindown=function(){if(this.readonly){return false;}var _a=this.calendaredit;if(_a){var _b="";var _c;var _d;var _e=this._default_value;var _f="";var _g=this.getCaretPos();var _h=_g;var _i=this.calendaredit.text.length;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){if(this._rtl){if(_g==0){_g=_i;}else if(_g==_i){_g=0;}}}var _j=this._masktypeobj;if(_j){if(!_j.date){var _k=this._getCurrentDate();var _l=nexacro._toString(_k.year).padLeft(4,"0");var _m=nexacro._toString(_k.month).padLeft(2,"0");var _n=nexacro._toString(_k.day).padLeft(2,"0");var _o=_j.getEditFormatType();switch(_o){case 0:_c=_l+_m+_n;break;case 1:_c="000000000";break;case 2:_c=_l+_m+_n+"000000000";}_b=_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}else{_b=_j.applyMaskSpin(_g, -1);_c=_j.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,true)){_b=_e?_d:_j.applyMask(this.value);_c=_e?_e:_j.removeMask(_b);}_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}}}};_pCalendar._on_spin_mobile_onspinup=function(){if(this.readonly){return false;}var _a=this.calendaredit;if(_a){var _b="";var _c;var _d;var _e=this._default_value;var _f="";var _g=this.getCaretPos();var _h=this._masktypeobj;if(_h){if(!_h.date){var _i=this._getCurrentDate();var _j=nexacro._toString(_i.year).padLeft(4,"0");var _k=nexacro._toString(_i.month).padLeft(2,"0");var _l=nexacro._toString(_i.day).padLeft(2,"0");var _m=_h.getEditFormatType();switch(_m){case 0:_c=_j+_k+_l;break;case 1:_c="000000000";break;case 2:_c=_j+_k+_l+"000000000";}_b=_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}else{_b=_h.applyMaskSpin(_g,1);_c=_h.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,true)){_b=_e?_d:_h.applyMask(this.value);_c=_e?_e:_h.removeMask(_b);}_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}}}};_pCalendar._on_spin_mobile_onspindown=function(){if(this.readonly){return false;}var _a=this.calendaredit;if(_a){var _b="";var _c;var _d;var _e=this._default_value;var _f="";var _g=this.getCaretPos();var _h=this._masktypeobj;if(_h){if(!_h.date){var _i=this._getCurrentDate();var _j=nexacro._toString(_i.year).padLeft(4,"0");var _k=nexacro._toString(_i.month).padLeft(2,"0");var _l=nexacro._toString(_i.day).padLeft(2,"0");var _m=_h.getEditFormatType();switch(_m){case 0:_c=_j+_k+_l;break;case 1:_c="000000000";break;case 2:_c=_j+_k+_l+"000000000";}_b=_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}else{_b=_h.applyMaskSpin(_g, -1);_c=_h.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,true)){_b=_e?_d:_h.applyMask(this.value);_c=_e?_e:_h.removeMask(_b);}_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}}}};_pCalendar._on_datepicker_ondayclick=function(_a,_b){if(this.readonly){return;}var _c=this._masktypeobj;var _d=_b.fromobject;var _e=_d._year+_d._month+_d.text.padLeft(2,"0");var _f=_c._date[3]?_c._date[3]:"";var _g=_c._date[4]?_c._date[4]:"";var _h=_c._date[5]?_c._date[5]:"";var _i=_c._date[6]?_c._date[6]:"";var _j=_c.getEditFormatType();var _k=this.value;var _l;if(_j==1){if(!nexacro._isNull(_f)){_f=_f.padLeft(2,"0");}if(!nexacro._isNull(_g)){_g=_g.padLeft(2,"0");}if(!nexacro._isNull(_h)){_h=_h.padLeft(2,"0");}if(!nexacro._isNull(_i)){_i=_i.padLeft(3,"0");}_l=_c.changeNormalizeValue(_f+_g+_h+_i);}else{_l=_c.changeNormalizeValue(_e+_f+_g+_h+_i);}this.on_fire_ondayclick(_e);if(_k!=_l){this._on_value_change(_k,_l);if(this._isPopupVisible()){if(this.type=="monthonly"&&_d){_d._changeStatus("focused",false);}}}else{this._setCalendarEditValue(this.value);if(this._isPopupVisible()){this._closePopup();}}if(this.autoskip){this._setFocusToNextComponent();}else{this._setZeroCaret();}};_pCalendar._on_datepicker_oncloseup=function(){var _a=this._getWindow();if(_a&&this._track_capture){_a._releaseCaptureLock(this);}this._changeStatus("mouseover",false);this.calendaredit._changeStatus("mouseover",false);this.dropbutton._changeStatus("mouseover",false);this.on_fire_oncloseup(this,this._default_text,this._default_value,this.text,this.value);};_pCalendar.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(nexacro._enableaccessibility&&this.type=="monthonly"){this.datepicker.body._on_focus(false);}var _g=(nexacro._isTouchInteraction&&nexacro._SupportTouch&&(this._type=="system"));if(!_g&&!(_f instanceof nexacro._CalendarEditControl)){var _h=this.calendaredit;if(_h){_h._on_focus(true,nexacro._getBrowserEventName(_b));}}this._change_caret_from_method=false;};_pCalendar.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _a=this.calendaredit;var _b=this.datepicker;if(this.type!="monthonly"){if(this.value!=_a.value){this._on_value_change(this.value,_a.value);}else if(this.text!=_a.text){this._setValue(this.value);}this.__focus_from_spinbutton=false;}else{if(_b){_b._refreshSpindate();}this.on_apply_value(this.value);}if(this._isPopupVisible()){this._closePopup();}};_pCalendar.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.Component.prototype.on_fire_user_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCalendar.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._updatePopupControlPosition();return _j;};_pCalendar.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._updatePopupControlPosition();return _j;};_pCalendar.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.visible&&this._isEnable()&&this.enableevent){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}}return true;};_pCalendar.on_fire_ondayclick=function(_a){if(this.ondayclick&&this.ondayclick._has_handlers){var _b=new nexacro.CalendarDayClickEventInfo(this,"ondayclick",_a);return this.ondayclick._fireEvent(this,_b);}return true;};_pCalendar.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(this,"canchange",_b,_c,_d,_e);return this.canchange._fireCheckEvent(this,_f);}return true;};_pCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangedEventInfo(this,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pCalendar.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=new nexacro.CalendarCloseUpEventInfo(this,"oncloseup",_b,_d,_c,_e);return this.oncloseup._fireEvent(this,_f);}return false;};_pCalendar.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.Event(this,"ondropdown");_b.fromreferenceobject=this.dropbutton;return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCalendar.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pCalendar.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.CalendarSpinEventInfo(this,"onspin",_b,_d,_c,_e,_f);return this.onspin._fireCheckEvent(this,_g);}return true;};_pCalendar.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pCalendar._createCalendaredit=function(){var _a=this.calendaredit;if(!_a){_a=this.calendaredit=new nexacro._CalendarEditControl("calendaredit",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);_a.set_displaynulltext(this.displaynulltext);_a.set_readonly(this.readonly);_a.set_autoselect(this.autoselect);_a.set_autoskip(this.autoskip);_a.set_usecontextmenu(this.usecontextmenu);_a.createComponent(true);}};_pCalendar._createDropbutton=function(){var _a=this.dropbutton;if(!_a){_a=this.dropbutton=new nexacro._CalendarDropButtonControl("dropbutton",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCalendar._createSpinbutton=function(){var _a=this.calendarspinupbutton;if(!_a){_a=this.calendarspinupbutton=new nexacro._CalendarSpinButtonControl("calendarspinupbutton",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}var _b=this.calendarspindownbutton;if(!_b){_b=this.calendarspindownbutton=new nexacro._CalendarSpinButtonControl("calendarspindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.createComponent(true);}};_pCalendar._createDatePicker=function(){var _a=this.datepicker;if(!_a){_a=this.datepicker=new nexacro.DatePickerControl("datepicker",0,0,0,0,null,null,null,null,null,null,this);if(this.type=="monthonly"){_a._is_focus_accept=true;}else{_a._setPopupContains(true);_a._is_focus_accept=false;}_a.createComponent(true);}};_pCalendar._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CalendarPopupControl("calendarpopup",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCalendar._createNormaltypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._createDropbutton();this._createPopupControl();this._createDatePicker();this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this._setEventHandlerToDatePicker();this._applyAllProps();if(this._is_created){var _b=this.calendaredit;var _c=this.dropbutton;if(_b){_b._on_apply_inputtype();_b.on_created();}if(_c){_c.on_created();}}}};_pCalendar._createSpintypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._createSpinbutton();this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();this._applyAllProps();if(this._is_created){var _b=this.calendaredit;var _c=this.calendarspinupbutton;var _d=this.calendarspindownbutton;if(_b){_b.on_created();}if(_c){_c.on_created();}if(_d){_d.on_created();}}}};_pCalendar._createMonthlytypeControl=function(){var _a=this.getElement();if(_a){this._createDatePicker();this._setEventHandlerToDatePicker();this._applyDatePickerProps();if(this._is_created){var _b=this.datepicker;if(_b){_b.on_created();}}}};_pCalendar._createSystemtypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._setEventHandlerToCalendarEdit();this._applyAllProps();if(this._is_created){var _b=this.calendaredit;if(_b){_b._on_apply_inputtype();_b.on_created();}}}};_pCalendar._createPopupDatePickerControl=function(){this._createPopupControl();this._createDatePicker();var _a=this.datepicker;var _b=this._popupcontrol;if(!_b._is_created){_b._attach(_a);_b.on_created();}if(!_a._is_created){this._setEventHandlerToDatePicker();this._applyDatePickerProps();_a.on_created();}};_pCalendar._destroyControl=function(){if(this.calendaredit){this.calendaredit.destroy();this.calendaredit=null;}if(this.dropbutton){this.dropbutton.destroy();this.dropbutton=null;}if(this.calendarspinupbutton){this.calendarspinupbutton.destroy();this.calendarspinupbutton=null;}if(this.calendarspindownbutton){this.calendarspindownbutton.destroy();this.calendarspindownbutton=null;}if(this.datepicker){this.datepicker.destroy();this.datepicker=null;}if(this._popupcontrol){this._popupcontrol.destroy();this._popupcontrol=null;}};_pCalendar._recalcLayout=function(){if(this._is_created_contents){var _a=this.calendaredit;var _b=this.dropbutton;var _c=this.calendarspinupbutton;var _d=this.calendarspindownbutton;var _e=this.datepicker;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this.buttonsize;var _i,_j;if(_h==undefined){_i=_g;_j=_g;}else{_h=_h.split(" ");_i= +_h[0];_j=(_h[1])? +_h[1]:_g;}if(_i>_f){_i=_f;}if(_j>_g){_j=_g;}switch(this._type){case "system":case "normal":var _k=_f-_i;var _l=0;if(_j<_g){_l=(_g-_j)/2;}_b.move(_k,_l,_i,_j,null,null);_a.move(0,0,_k,_g,null,null);_a.set_visible(true);_b.set_visible(true);break;case "spin":var _m=_f-_i;var _n=0;var _o=Math.floor(_j/2);if(_j<_g){_n=(_g-_j)/2;}var _p=_m;var _q=_j-_o+_n;var _r=Math.floor(_j/2);_c.move(_m,_n,_i,_o,null,null);_d.move(_p,_q,_i,_r,null,null);_a.move(0,0,_m,_g,null,null);_a.set_visible(true);_c.set_visible(true);_d.set_visible(true);break;case "monthonly":this._applyDatePickerProps();_e.move(0,0,_f,_g,null,null);_e.set_visible(true);break;}}};_pCalendar._updatePopupControlPosition=function(){var _a=this._popupcontrol;if(_a){var _b=this.getElement();var _c=_a.getElement();var _d=this._getElementPosition(_b);var _e=_d.x;var _f=_d.y+(this._adjust_height);_c.setElementPosition(_e,_f);}};_pCalendar._showPopup=function(){if(this.type!="normal"){return;}if(nexacro._enableaccessibility){this._want_arrows=true;}var _a=this._getWindow();var _b=this.getElement();if(_b){var _c=this.on_fire_ondropdown(this);if(this.popuptype=="none"||this._type=="system"){return;}if(_c){this._createPopupDatePickerControl();var _d=this._popupcontrol;var _e=this._getPopupSizeArr();var _f=this._getElementPosition();var _g=_f.x;var _h=_f.y;var _i=_d._getPopupParentPos();var _j=_i.height;var _k=0;var _l=_j;var _m=_e.width;var _n=_e.height;var _o=_g+_m;var _p=_h+_j+_n;var _q=_a.clientWidth;var _r=_a.clientHeight;var _s=_o-_q;if(_o>_q&&_g>_s){_k=_k-_s;}if(_g<0){_k= -_g;}if(_h>_n&&_p>_r){_l= -_n;}if(_p>_r){var _t=_r-_n;if(_t<0){_l= -_h;}else{_l=_t-_h;}}if(this.popuptype=="center"){var _u=_a.frame;var _v=nexacro._getElementPositionInFrame(_u.getElement());var _w=_u.width;var _x=_u.height;if(nexacro._Browser=="Runtime"){_w=Math.round(_w/nexacro._getDevicePixelRatio(this.getElement()));_x=Math.round(_x/nexacro._getDevicePixelRatio(this.getElement()));}var _y=((_w/2)-(_m/2));var _z=((_x/2)-(_n/2));_z=_z<0?0:_z;_d._popup((_y+_v.x),(_z+_v.y),_m,_n);}else{_d._popupBy(this,_k+_i.xgap,_l+_i.ygap,_m,_n);}if(_a&&this._track_capture){_a._setCaptureLock(this,true,false);}if(nexacro._OS=="iOS"&&this.calendaredit){this.calendaredit._on_focus(true);}}}};_pCalendar._applyZoomPopup=function(){if(this._isPopupVisible()){this._showPopup();}};_pCalendar._closePopup=function(){if(this._type=="system"){nexacro._closeSystemCalendar();return;}else{var _a=this._popupcontrol;if(_a){_a._closePopup();}}if(nexacro._enableaccessibility){var _b=this.type;this._want_arrows=false;if(_b=="normal"){var _c=this._getWindow();_c._removeFromCurrentFocusPath(this.calendaredit,true);this.calendaredit._on_focus(true);}}};_pCalendar._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pCalendar._on_repeat=function(_a){var _b=this._type;var _c=_a;if(_b=="spin"){var _d=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_d){if(_c.id=="calendarspinupbutton"){this._on_spin_mobile_onspinup();}else if(_c.id=="calendarspindownbutton"){this._on_spin_mobile_onspindown();}}else{if(_c.id=="calendarspinupbutton"){this._on_spin_onspinup();}else if(_c.id=="calendarspindownbutton"){this._on_spin_onspindown();}}}else{var _e=_a.parent;if(_c.id=="spinupbutton"){_e._on_spin_up();}else if(_c.id=="spindownbutton"){_e._on_spin_down();}else if(_c.id=="nextbutton"){this.datepicker._on_button_onnextlbuttondown();}else if(_c.id=="prevbutton"){this.datepicker._on_button_onprevlbuttondown();}}};_pCalendar._on_beforerepeat=function(_a){if(this._type=="spin"){if(_a==this.calendarspindownbutton||_a==this.calendarspinupbutton){return [true,true];}}else{var _b=this.datepicker;if(_b){return _b._on_beforerepeat(_a);}}return [false,true];};_pCalendar._convertValueType=function(_a,_b,_c){var _d,_e;if(_c){_e=nexacro._getDatatypeRule();if(_e=="1.0"){return _a;}}_d=(_b===undefined||_b===null)?_b:nexacro._toString(_b);return _d;};_pCalendar._setValue=function(_a){var _b=this._masktypeobj;if(_b){_a=_b.changeNormalizeValue(_a);this.value=_a;this.on_apply_value(_a);}};_pCalendar._setSpinValue=function(_a,_b,_c){this._default_value=_a;this.text=this._default_text=_b;var _d=this.calendaredit;if(_d){_d._setSpinValue(_b,_c);}};_pCalendar._setCalendarEditValue=function(_a){var _b=this.calendaredit;if(_b){_b._setValue(_a);if(nexacro._enableaccessibility){this._accessibilityvalue=_b.text;this._updateAccessibilityLabel();_b._updateAccessibilityLabel();}}};_pCalendar._setDatePickerValue=function(_a){var _b=this.datepicker;if(_b){_b._setValue(_a);}};_pCalendar._setLocale=function(_a){if(!this.locale&&_a!=this._locale){this._locale=_a;this.on_apply_locale(_a);this.on_apply_weekformat(this.weekformat);this.on_apply_value(this.value);}};_pCalendar._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pCalendar._setDefaultCaret=nexacro._emptyFn;_pCalendar._setZeroCaret=function(){var _a=this.calendaredit;if(_a&&this._type!="system"&&nexacro._checkActiveElement(_a._input_element)){_a.setCaretPos(0);}};_pCalendar._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(!_b.autoselect&&_b._is_editable_control){_b._setDefaultCaret();}}};_pCalendar._setEventHandlerToCalendarEdit=function(){var _a=this.calendaredit;if(_a){_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);_a._setEventHandler("onlbuttondown",this._on_edit_onlbuttondown,this);_a._setEventHandler("onlbuttonup",this._on_edit_onlbuttonup,this);_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pCalendar._setEventHandlerToDropButton=function(){var _a=this.dropbutton;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){if(this._type=="system"){_a._setEventHandler("onclick",this._on_edit_oneditclick,this);}else{_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pCalendar._setEventHandlerToSpinButton=function(){var _a=(nexacro._isTouchInteraction&&nexacro._SupportTouch);var _b=this.calendarspinupbutton;if(_b){if(_a){_b._setEventHandler("onclick",this._on_spin_mobile_onspinup,this);}else{_b._setEventHandler("onclick",this._on_spin_onspinup,this);}}var _c=this.calendarspindownbutton;if(_c){if(_a){_c._setEventHandler("onclick",this._on_spin_mobile_onspindown,this);}else{_c._setEventHandler("onclick",this._on_spin_onspindown,this);}}};_pCalendar._setEventHandlerToDatePicker=function(){var _a=this.datepicker;if(_a){_a._setEventHandler("ondayclick",this._on_datepicker_ondayclick,this);_a._setEventHandler("oncloseup",this._on_datepicker_oncloseup,this);}};_pCalendar._getDateMaskObj=function(){return this._masktypeobj;};_pCalendar._getFormatType=function(){var _a=this._masktypeobj;if(_a){return _a.getEditFormatType();}return;};_pCalendar._getCurrentDate=function(){var _a=this._masktypeobj;if(_a){return _a.getCurrentDate();}return;};_pCalendar._getCurrentDateStr=function(){var _a=this._masktypeobj;if(_a){var _b=_a.getCurrentDate();if(_b){var _c=nexacro._toString(_b.year).padLeft(4,"0");var _d=nexacro._toString(_b.month).padLeft(2,"0");var _e=nexacro._toString(_b.day).padLeft(2,"0");var _f=_a.getEditFormatType();var _g="";switch(_f){case 0:_g=_c+_d+_e;break;case 1:_g="000000000";break;case 2:_g=_c+_d+_e+"000000000";}return _a.applyMask(_g);}}return "";};_pCalendar._getEndDay=function(_a,_b){var _c=this._masktypeobj;if(_c){return _c.getEndDay(_a,_b);}return;};_pCalendar._getPopupSizeArr=function(){var _a=this.popupsize;if(!_a){_a="200 220";}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:_b;return {width:_b,height:_c};};_pCalendar._getElementPosition=function(){return nexacro._getElementPositionInFrame(this.getElement());};_pCalendar._getEventInfoText=function(_a){var _b="";var _c=this._masktypeobj;if(_c){var _d=_c.getEditStatus();_c.setEditStatus(false);var _e=this._isInvalidValue(_a);if(_e){_b=_c.applyMask("");}else{var _f=_c.changeNormalizeValue(_a);_b=_c.applyMask(_f);}_c.setEditStatus(_d);}return _b;};_pCalendar._isPopupVisible=function(){var _a=false;if(this.type!="monthonly"){if(this._popupcontrol){_a=this._popupcontrol.visible;}}return _a;};_pCalendar._applyAllProps=function(){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_weekformat(this.weekformat);this.on_apply_readonly();this.on_apply_editformat(this.editformat);this.on_apply_dateformat(this.dateformat);this.on_apply_value(this.value);};_pCalendar._applyDatePickerProps=function(){var _a=this._masktypeobj;var _b=this.datepicker;if(_b){_b._setEnable(this.enable);_b.set_readonly(this.readonly);_b._setValue(_a.getDatePickerValue());}};_pCalendar._makeCalendarText=function(_a){if(!_a){return "";}var _b=_a.toString();var _c=this._currentformat;this._currentformat="dateformat";var _d=this._makeMaskValue(_b);var _e=this._makeMask("dateformat",this._makeDateObj(_a));var _f=0;var _g="";var _h="yMdHhmsl";this._currentformat=_c;for(var _j=0,_k=_e.length;_j<_k;_j++ ){var _i=_e.charAt(_j);if(_h.indexOf(_i)>=0){_g+=_d.charAt(_f);_f++ ;}else{if(_i==="~"||_i==="^"){_g+=_d.charAt(_f);_f++ ;}else{_g+=_i;}}}return _g;};_pCalendar._isValidDate=function(_a,_b,_c){var _d,_e,_f;var _g,_h,_i,_j;switch(_b){case 0:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);break;case 1:var _k=0;if(_c&&_c[0]<40){_g=_a.substr(_k,2);_k=2;}_h=_a.substr(_k,2);_i=_a.substr(_k+2,2);_j=_a.substr(_k+2,3);break;case 2:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);_g=_a.substr(8,2);_h=_a.substr(10,2);_i=_a.substr(12,2);_j=_a.substr(14,3);break;}if((_d&&isNaN(_d= +_d))||(_e&&isNaN(_e= +_e))||(_f&&isNaN(_f= +_f))||(_g&&isNaN(_g= +_g))||(_h&&isNaN(_h= +_h))||(_i&&isNaN(_i= +_i))||(_j&&isNaN(_j= +_j))){return false;}var _l=this._masktypeobj;var _m=_l.getEndDay(_d,_e);if((_b!=1&&!_m)||(_e&&( +_e>12))||(_f&&( +_f>_m))||(_g&&( +_g>=24))||(_h&&( +_h>=60))||(_i&&( +_i>=60))||(_j&&( +_j>=1000))){return false;}return true;};_pCalendar._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}var _b;if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_b=this._convertToDateObject(_a);}if(_b){if(_b._isInvalidDate?_b._isInvalidDate():isNaN(_b.valueOf())){return true;}var _c=_b.getFullYear();if(_c<0||_c>9999){return true;}}return false;};_pCalendar._beginValueChange=function(){return !(this.__value_change?false:this.__value_change=true);};_pCalendar._finalValueChange=function(){return !(this.__value_change=false);};_pCalendar._convertToDateObject=function(_a){if(nexacro._isNull(_a)||_a===""){return null;}var _b;var _c=this._masktypeobj;var _d=_c.getEditFormatType();if(_d<0){if(this.editformat){this.on_apply_editformat(this.editformat);}_d=_c.getEditFormatType();}if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_a=nexacro._toString(_a);if(/[^0-9]/.test(_a)){_b=new Date(_a);}else{_b=_c.convertToDateObject(_a,_d);}}if(_b){if(isNaN(_b.valueOf())){return _b;}switch(_d){case 0:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate());break;case 1:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());_b._timeonly=true;break;case 2:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());break;default:break;}}return _b;};_pCalendar._on_getDisplayText=function(){var _a=this.calendaredit;if(_a){return _a._on_getDisplayText();}};delete _pCalendar;nexacro._CalendarDropButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarDropButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._CalendarDropButtonControl);nexacro._CalendarDropButtonControl.prototype=_pCalendarDropButtonControl;_pCalendarDropButtonControl._type_name="ButtonControl";_pCalendarDropButtonControl._is_subcontrol=true;_pCalendarDropButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h){nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);}else{_g._apply_setfocus(_b);}}};_pCalendarDropButtonControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this.visible&&this.parent._isEnable()&&this.enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};delete _pCalendarDropButtonControl;nexacro._CalendarSpinButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarSpinButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._CalendarSpinButtonControl);nexacro._CalendarSpinButtonControl.prototype=_pCalendarSpinButtonControl;_pCalendarSpinButtonControl._type_name="ButtonControl";_pCalendarSpinButtonControl._is_subcontrol=true;_pCalendarSpinButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;if(_g){_g.__focus_from_spinbutton=true;_g._apply_setfocus(_b);}};delete _pCalendarSpinButtonControl;nexacro._CalendarEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};var _pCalendarEditControl=nexacro._createPrototype(nexacro.MaskEdit,nexacro._CalendarEditControl);nexacro._CalendarEditControl.prototype=_pCalendarEditControl;_pCalendarEditControl._type_name="MaskEditControl";_pCalendarEditControl._is_subcontrol=true;_pCalendarEditControl._prevent_clickevent=true;_pCalendarEditControl.on_created_contents=function(_a){var _b=this._input_element;if(_b){this.on_apply_value(this.value);_b.create(_a);if(nexacro._isNull(this.value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this.value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);};_pCalendarEditControl.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_value(this.value);return _a.createCommand();}return "";};_pCalendarEditControl._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this.value;var _d="";var _e="";var _f=this.parent;var _g=this._getMaskObj();if(_g){if(!this._onlydisplay){_g.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_g.applyMask("");}else{_d=_g.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this.text){this._default_text=this.text=_d;}if(!_f.__focus_from_spinbutton&&!this.autoselect){if(this._caret_pos== -1){_b.setElementSetSelect(0,0);}else{_b.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}}};_pCalendarEditControl.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){var _h=this._getMaskObj();var _i=_g.value;var _j=_g.getElementCaretPos();var _k,_l;if(_a==nexacro.KeyCode_ImeInput){var _m=_g.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_m.blur();_m.focus();}_g.stopSysEvent();}else if(_a==nexacro.Event.KEY_BACKSPACE){if(_h&&_i){if(_j.end>0&&_j.begin==_j.end){_k=_j.end-1;while((_l=_i.charAt(_k))){if(_h.isDeletableChar(_l,_k)||_k==0){break;}_k-- ;}_h._is_filled=false;if(_k!=(_j.end-1)){_g.setElementSetSelect(_k+1,_k+1);}}}}else if(_a==nexacro.Event.KEY_DEL){if(_h&&_i){var _n=_i.length;if(_j.end<_n&&_j.begin==_j.end){_k=_j.end;while((_l=_i.charAt(_k))){if(_h.isDeletableChar(_l,_k)||_k==_n){break;}_k++ ;}_h._is_filled=false;if(_k!=_j.end){_g.setElementSetSelect(_k,_k);}}}}}};_pCalendarEditControl.on_keypress_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_g){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_g.stopSysEvent();return;}}if(_a!==0&&_b===0){return true;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return true;}}_b=_b||_a;if(!_d&&!_c&&_b){var _h=String.fromCharCode(_b);if(_h.length>0){var _i=this._getMaskObj();var _j=_g.getElementCaretPos();var _k=_i.findNearEditablePos(_j.begin,1);if(_k<0||_i.isFilterChar(_h,_k,_j.end,true)){_g.stopSysEvent();this._on_input_autoskip();return;}_i.keyPressed(_h,_k);}}}};_pCalendarEditControl.on_keyinput_basic_action=function(){if(this.readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){var _b=_a.value;var _c=_b?_b:"";var _d=this._getMaskObj();if(_d){if(_d._editmasked_empty_text==_c){_b="";}else{if(_d._use_edit_buf){_b=_d.changeNormalizeValueFromBuffer();}else{_b=_d.removeMask(_c.split(''));_b=_d.changeNormalizeValue(_b);}}}if(!_b&&!this._default_value){this.value=this._default_value;}else{this.value=_b;}this.text=_c;if(this._undostack){var _e=_a.getElementCaretPos();if(_e&&_e!= -1){this._undostack.push(_c,_e.begin,_e.end);}else{this._undostack.push(_c,0,0);}}}};_pCalendarEditControl._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=this._getMaskObj();var _h=[];if(_g){var _i=_f._getInputValue();var _j,_k,_l,_m,_n;switch(_e){case "deleteContentBackward":if(_c==_d){_j=_i.substring(0,_c-1);_k=_i.substring(_d);_l=_j+_k;_m=_g.arrangeMask(_l,_c-1,_c-1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteContentForward":if(_c==_d){_j=_i.substring(0,_c);_k=_i.substring(_d+1);_l=_j+_k;_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteByCut":if(_c==_d){}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "insertText":case "insertCompositionText":_a=_a?_a:"";_n=_g.findNearEditablePos(_c,1);var _o=_g.isFilterCharEx(_a,_n,_d);if(_n<0||(_o.ret&&!_o.date)){_h.push(_f._BeforeinputState.CANCEL);}else{if(_o.ret){_h.push(_f._BeforeinputState.REPLACE);_f._beforeinput_result_data=_g.applyMaskEx(_o.date);_f._beforeinput_result_pos={begin:_o.pos,end:_o.pos};}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{var _p=_a+"".padLeft(_d-_a.length," ");_l=_i.substring(0,_c)+_p+_i.substring(_c);_d=_p.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_c+_a.length,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}}break;case "insertFromPaste":_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)){_h.push(_f._BeforeinputState.CANCEL);}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{_l=_i.substring(0,_c)+(_a+"".padLeft(" ",_d-_a.length))+_i.substring(_c);_d=_c+_a.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}break;default:_h.push(_f._BeforeinputState.PASS);break;}}return _h;};_pCalendarEditControl._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){var _f=0;var _g=_e._paste_caret_pos?true:false;var _h=_a?_a:"";var _i="";var _j=_e.inputtype;var _k=this._getMaskObj();if(_k){if(_j=="date"){if(_k.getCurrentText()!=_h){_a=_k.removeMask(_h.split(''));_k.applyMask(_a);}}else{var _l=_k.arrangeMask(_h,_c,_d);if(_l==null){_e.replaceElementText("",_c,_d);_e.stopSysEvent();}else{if(_g){_f=_k.findNearEditablePos(_c,1);_i=_h.substring(_c,_d);if(_f<0||_k.isFilterChar(_i,_f)){_e.updateElementText(this.text,_f);}else{_f=_k.findNearEditablePos(_l.pos,1);_e.updateElementText(_l.text,_f);}}else{_f=_k.findNearEditablePos(_c,1);var _m=(_a?_a.substr(_c,1):"");var _n=_k.isFilterCharEx(_m,_f,_d);if(_n.ret){var _o=_k.applyMaskEx(_n.date);var _p=_n.pos;if(!/[0-9]/.test(_m)){_o=_l.text;_p=_l.pos;}_e.updateElementText(_o,_p);}else{if(_c<_d){_i=_h.substring(_c,_d);var _q=_k.removeMask(_l.text.split(''));var _r=this.parent;if(_r){if(!_r._isValidDate(_q,_k.getEditFormatType(),_k._edit_type_buf)){_e.replaceElementText("",_c,_c+_i.length);_e.stopSysEvent();return;}}}_f=_k.findNearEditablePos(_l.pos,1);if(_l.text!=_h||_l.pos!=_f){_e.updateElementText(_l.text,_f);}}}}}}}};_pCalendarEditControl._isInvalidValue=function(_a){return this.parent._isInvalidValue(_a);};_pCalendarEditControl._setSpinValue=function(_a,_b){var _c=this._input_element;if(_c){_c.setCompositionComplete();if(!this._onlydisplay){_c.updateElementText(_a,_b);}if(nexacro._enableaccessibility){this._setAccessibilityLabel(_a);}}};_pCalendarEditControl._getMaskObj=function(){var _a=this.parent;if(_a){return _a._masktypeobj;}return null;};_pCalendarEditControl._getEmptyText=function(){var _a=this._getMaskObj();if(_a){return _a.getEmptyText();}return "";};nexacro._CalendarPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._CalendarPopupControl);nexacro._CalendarPopupControl.prototype=_pCalendarPopupControl;_pCalendarPopupControl._type_name="popupCalendar";_pCalendarPopupControl._getPopupParentPos=function(){var _a=this.parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_e=_g.y<0?_g.y* ( -1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};delete _pCalendarPopupControl;}if(!nexacro.GroupBox){nexacro.GroupBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pGroupBox=nexacro._createPrototype(nexacro.Component,nexacro.GroupBox);nexacro.GroupBox.prototype=_pGroupBox;_pGroupBox._type_name="GroupBox";_pGroupBox._titlecontrol=null;_pGroupBox._boxcontrol=null;_pGroupBox.titlealign="topleft";_pGroupBox.titlegap=undefined;_pGroupBox.tabstop=false;_pGroupBox._title_adjust_width=8;_pGroupBox._is_focus_accept=false;_pGroupBox.accessibilityrole="groupbox";_pGroupBox._event_list={"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onmousedown":1,"onmouseup":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pGroupBox._accessibility_role="groupbox";_pGroupBox.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._boxcontrol=new nexacro.Static("groupboxcontents",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(true);var _c=this._titlecontrol=new nexacro._IconText("groupboxtitle",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c.set_text(this._displaytext);_c.createComponent(true);}};_pGroupBox.on_created_contents=function(_a){this._recalcLayout();var _b=this._boxcontrol;if(_b){_b.on_created(_a);}var _c=this._titlecontrol;if(_c){_c.on_created(_a);}};_pGroupBox.on_destroy_contents=function(){if(this._boxcontrol){this._boxcontrol.destroy();this._boxcontrol=null;}if(this._titlecontrol){this._titlecontrol.destroy();this._titlecontrol=null;}};_pGroupBox.on_create_contents_command=function(){this._recalcLayout();var _a=this._boxcontrol;var _b=this._titlecontrol;var _c="";if(_a){_c+=_a.createCommand();}if(_b){_c+=_b.createCommand();}return _c;};_pGroupBox.on_attach_contents_handle=function(_a){var _b=this._boxcontrol;var _c=this._titlecontrol;if(_b){_b.attachHandle(_a);}if(_c){_c.attachHandle(_a);}};_pGroupBox.on_change_containerRect=function(){if(this._is_created_contents){this._recalcLayout();}};_pGroupBox.on_change_containerPos=function(){};_pGroupBox.on_get_prop_tabstop=function(){if(nexacro._enableaccessibility){var _a=this.accessibility;if(_a&&_a.enable&&_a.role=="link"){return true;}}return false;};_pGroupBox._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pGroupBox.on_apply_prop_enable=function(_a){var _b=this._boxcontrol;if(_b){_b.set_enable(_a);}var _c=this._titlecontrol;if(_c){_c.set_enable(_a);}};_pGroupBox.set_titlealign=function(_a){var _b=["topleft","topcenter","topright","lefttop","leftcenter","leftbottom","righttop","rightcenter","rightbottom","bottomleft","bottomcenter","bottomright"];if(_b.indexOf(_a)== -1){return;}if(this.titlealign!=_a){this.titlealign=_a;this.on_apply_titlealign(_a);}};_pGroupBox.on_apply_titlealign=function(){this._recalcLayout();};_pGroupBox.set_titlegap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this.titlegap!=_a){this.titlegap=_a;this.on_apply_titlegap(_a);}};_pGroupBox.on_apply_titlegap=function(){this._recalcLayout();};_pGroupBox.on_apply_text=function(_a){var _b=this._titlecontrol;if(_b){_b.set_text(_a);this._recalcLayout();}};_pGroupBox.on_apply_font=function(_a){nexacro.Component.prototype.on_apply_font.call(this,_a);this._recalcLayout();};_pGroupBox.on_apply_prop_cssclass=function(){var _a=this._titlecontrol;if(_a){_a.on_apply_cssclass();}var _b=this._boxcontrol;if(_b){_b.on_apply_cssclass();}this._recalcLayout();};_pGroupBox._recalcLayout=function(){var _a=this.getElement();if(_a&&this._is_created_contents){var _b=this._titlecontrol;var _c=this._boxcontrol;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this.titlealign;var _g=this.titlegap;if(!_g){_g=10;}var _h=_b._on_getFitSize();var _i=_h[0]+this._title_adjust_width;var _j=_h[1];var _k,_l;var _m,_n,_o,_p;if(_f.indexOf("top")==0){_m=0;_n=_j/2;_o=_d;_p=_e-(_j/2);_l=0;if(_f=="topleft"){_k=_g;}else if(_f=="topcenter"){_k=(_d/2)-(_i/2);}else if(_f=="topright"){_k=_d-_i-_g;}}else if(_f.indexOf("left")==0){_m=_i/2;_n=0;_o=_d-(_i/2);_p=_e;_k=0;if(_f=="lefttop"){_l=_g;}else if(_f=="leftcenter"){_l=(_e/2)-(_j/2);}else if(_f=="leftbottom"){_l=_e-_j-_g;}}else if(_f.indexOf("right")==0){_m=0;_n=0;_o=_d-(_i/2);_p=_e;_k=_d-_i;if(_f=="righttop"){_l=_g;}else if(_f=="rightcenter"){_l=(_e/2)-(_j/2);}else if(_f=="rightbottom"){_l=_e-_j-_g;}}else if(_f.indexOf("bottom")==0){_m=0;_n=0;_o=_d;_p=_e-(_j/2);_l=_e-_j;if(_f=="bottomleft"){_k=_g;}else if(_f=="bottomcenter"){_k=(_d/2)-(_i/2);}else if(_f=="bottomright"){_k=_d-_i-_g;}}_b.move(_k,_l,_i,_j);_c.move(_m,_n,_o,_p);}};delete _pGroupBox;}nexacro.TabIndexChangeEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"ontabindexchange";this.fromobject=this.fromreferenceobject=_a;this.postindex=_c;this.preindex=_d;};var _pTabIndexChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ChangeEventInfo);nexacro.TabIndexChangeEventInfo.prototype=_pTabIndexChangeEventInfo;_pTabIndexChangeEventInfo._type_name="TabIndexChangeEventInfo";delete _pTabIndexChangeEventInfo;nexacro.TabMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.MouseEventInfo.call(this,_a,_b||"onextrabuttonclick",_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);this.index=_c;};var _pTabMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MouseEventInfo);nexacro.TabMouseEventInfo.prototype=_pTabMouseEventInfo;_pTabMouseEventInfo._type_name="TabMouseEventInfo";delete _pTabMouseEventInfo;if(!nexacro.Tab){nexacro.Tab=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._tabbuttonitems=[];this.tabpages=new nexacro.Collection();};var _pTab=nexacro._createPrototype(nexacro.Component,nexacro.Tab);nexacro.Tab.prototype=_pTab;_pTab._type_name="Tab";_pTab.prevbutton=null;_pTab.nextbutton=null;_pTab.multiline=false;_pTab.tabindex= -1;_pTab.focusacceptable=false;_pTab.usecontrolkey=true;_pTab.rotatetext=false;_pTab.tabjustify=false;_pTab.selectchangetype="down";_pTab.tabposition="top";_pTab.extrabutton=null;_pTab.preload=false;_pTab.tabbuttongap=undefined;_pTab.tabbuttonstartgap=undefined;_pTab.usetabbutton=true;_pTab.accessibilityrole="tab";_pTab._default_spinbutton_size={width:14,height:14};_pTab._extrabutton_size=null;_pTab._prevbutton_size=null;_pTab._nextbutton_size=null;_pTab._is_containerset=true;_pTab._is_changed_focus=false;_pTab._init_tabindex=0;_pTab._next_button_idx=0;_pTab._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onchanged":1,"onspin":1,"canchange":1,"oneditclick":1,"onextrabuttonclick":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pTab.on_create_contents=function(){var _a=this.getElement();if(_a){_a.setElementSize(this._getClientWidth(),this._getClientHeight());this._createSpinButton(true);this._createTabpages(true);this._createTabButtons(true);}};_pTab.on_created_contents=function(_a){var _b=this.tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;for(var _f=0;_f<_c;_f++ ){_b[_f].on_created(_a);if(this.preload){_b[_f]._on_apply_url();}}for(_f=0;_f<_e;_f++ ){_d[_f].on_created(_a);}if(this.nextbutton){this.nextbutton.on_created(_a);}if(this.prevbutton){this.prevbutton.on_created(_a);}this._is_created=true;this.on_apply_tabindex(this._init_tabindex);this._rearrangeContents();};_pTab.on_destroy_contents=function(){var _a=this.tabpages;var _b=_a.length;var _c=this._tabbuttonitems;var _d=_c.length;if(this.nextbutton){this.nextbutton.destroy();this.nextbutton=null;}if(this.prevbutton){this.prevbutton.destroy();this.prevbutton=null;}for(var _e=_d-1;_e>=0;_e-- ){_c[_e].destroy();_c.splice(_e,1);}for(_e=_b-1;_e>=0;_e-- ){_a[_e].destroy();}this.tabpages.clear();this.tabpages=null;this._tabbuttonitems=null;this._prevbutton_size=null;this._nextbutton_size=null;};_pTab.on_create_contents_command=function(){var _a="";var _b=this.tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;for(var _f=0;_f<_c;_f++ ){_a+=_b[_f].createCommand();}for(_f=0;_f<_e;_f++ ){_a+=_d[_f].createCommand();}if(this.nextbutton){_a+=this.nextbutton.createCommand();}if(this.prevbutton){_a+=this.prevbutton.createCommand();}return _a;};_pTab.on_attach_contents_handle=function(_a){var _b=this.tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;if(this.nextbutton){this.nextbutton.attachHandle(_a);}if(this.prevbutton){this.prevbutton.attachHandle(_a);}for(var _f=0;_f<_c;_f++ ){_b[_f].attachHandle(_a);if(this.preload){_b[_f]._on_apply_url();}}for(_f=0;_f<_e;_f++ ){_d[_f].attachHandle(_a);}this._is_created=true;this.on_apply_tabindex(this._init_tabindex);this._rearrangeContents();this._init_tabindex= -1;};_pTab.on_change_containerRect=function(_a,_b){this._rearrangeContents();};_pTab._on_bubble_beforeclose=function(_a,_b,_c,_d){return this.parent._on_bubble_beforeclose(_a,_b,_c,_d);};_pTab._on_bubble_close=function(_a,_b,_c){return this.parent._on_bubble_close(_a,_b,_c);};_pTab._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);var _a=this.tabpages[this.tabindex];if(_a&&_a.form){_a.form._on_activate();}return true;};_pTab._on_deactivate=function(){nexacro.Component.prototype._on_deactivate.call(this);var _a=this.tabpages[this.tabindex];if(_a&&_a.form){_a.form._on_deactivate();}return true;};_pTab.getOwnerFrame=function(){return this._getOwnerFrame();};_pTab.on_apply_prop_enable=function(_a){var _b=this.tabpages;var _c=_b.length;var _d;var _e=this.prevbutton;var _f=this.nextbutton;for(var _g=0;_g<_c;_g++ ){_d=_b[_g];_d._setEnable(_a);}if(_e){_e._setEnable(_a);}if(_f){_f._setEnable(_a);}};_pTab.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=null;var _e=this._getTabIndex();if(_a){if(this._accessibility_tabindex==_e){_d=this._child_list[_e];}else{this._accessibility_tabindex++ ;if(this._accessibility_tabindex<this.tabpages.length){_d=this._tabButtons[this._accessibility_tabindex];}else{this._accessibility_tabindex= -1;this._accessibility_is_next=true;_d=this.parent._searchNextTabFocus(this,undefined,undefined,3)[0];}}}else{if(this._accessibility_tabindex==_e){this._accessibility_tabindex-- ;_d=this._tabButtons[this._accessibility_tabindex];}else{this._accessibility_tabindex-- ;if(this._accessibility_tabindex>=0){if(this._accessibility_tabindex==_e){_d=this._child_list[_e];}else{_d=this._tabButtons[this._accessibility_tabindex];}}}}if(_d){_d._setAccessibilityNotifyEvent(_a);return true;}return false;};_pTab._resetScrollPos=function(_a,_b,_c,_d,_e,_f){if(!this._is_popup_control&&this.parent&&this.parent!=this){var _g=this._adjust_top;var _h=this._adjust_left;_c+=_g;_b+=_h;_e+=_g;_d+=_h;this.parent._resetScrollPos(this,_b,_c,_d,_e,_f);}};_pTab.set_multiline=function(_a){_a=nexacro._toBoolean(_a);if(this.multiline!=_a){this.multiline=_a;this.on_apply_multiline(_a);}};_pTab.on_apply_multiline=function(_a){this._rearrangeContents();};_pTab.set_tabindex=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}var _b=parseInt(_a,10)|0;var _c=this.tabindex;if(_b!=_c){this._oldtabindex=_c;if(!this._is_created){this._init_tabindex=_b;}else{this.on_apply_tabindex(_b);this._rearrangeContents();}}};_pTab.on_apply_tabindex=function(_a){var _b=false;var _c=this._getForm();if(_c._getTabOrderFirst() instanceof nexacro.Tab&&this.parent._last_focused&&this.parent._last_focused.name==this.name){_b=true;}var _d=this._changeTabIndex(_a,_b);if(_d){this._last_focused=null;this._tabbutton_obj=this._tabbuttonitems[_a];if(this.enableevent&&this._is_created&&this._oldtabindex> -1){this.on_fire_onchanged(this,_a,this._oldtabindex);}this._rearrangeContents( -1);}};_pTab.set_focusacceptable=function(_a){var _b=nexacro._toBoolean(_a);if(this.focusacceptable!=_b){this.focusacceptable=_b;}};_pTab.set_usecontrolkey=function(_a){this.usecontrolkey=nexacro._toBoolean(_a);};_pTab.set_rotatetext=function(_a){this.rotatetext=_a;};_pTab.on_apply_rotatetext=function(_a){};_pTab.set_tabjustify=function(_a){_a=nexacro._toBoolean(_a);if(this.tabjustify!=_a){this.tabjustify=_a;this.on_apply_tabjustify(_a);}};_pTab.on_apply_tabjustify=function(_a){this._rearrangeContents();};_pTab.set_selectchangetype=function(_a){switch(_a){case "down":case "up":this.selectchangetype=_a;break;default:break;}};_pTab.set_tabposition=function(_a){var _b=nexacro._toString(this.tabposition);var _c=nexacro._toString(_a);switch(_c){case "left":case "top":case "right":case "bottom":if(_b!=_c){this.tabposition=_c;this.on_apply_tabposition(_c);}break;default:return;}};_pTab.on_apply_tabposition=function(_a){this._rearrangeContents();};_pTab.set_showextrabutton=function(_a){_a=nexacro._toBoolean(_a);if(this.showextrabutton!=_a){this.showextrabutton=_a;this.on_apply_showextrabutton(_a);}};_pTab.on_apply_showextrabutton=function(_a){this._rearrangeContents();};_pTab.set_preload=function(_a){_a=nexacro._toBoolean(_a);if(this.preload!=_a){this.preload=_a;this.on_apply_preload(_a);}};_pTab.on_apply_preload=function(_a){};_pTab._tabbuttongap=0;_pTab.set_tabbuttongap=function(_a){if(this.tabbuttongap!=_a){this.tabbuttongap=_a;this._tabbuttongap=!_a?0:parseInt(_a);if(this._tabbuttongap<0){this._tabbuttongap=0;}this._rearrangeContents();}};_pTab._tabbuttonstartgap=0;_pTab.set_tabbuttonstartgap=function(_a){if(this.tabbuttonstartgap!=_a){this.tabbuttonstartgap=_a;this._tabbuttonstartgap=!_a?0:parseInt(_a);if(this._tabbuttonstartgap<0){this._tabbuttonstartgap=0;}this._rearrangeContents();}};_pTab.set_usetabbutton=function(_a){};_pTab.set_tabbuttonwidth=function(_a){if(this.tabbuttonwidth!=_a){this.tabbuttonwidth=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_tabbuttonheight=function(_a){if(this.tabbuttonheight!=_a){this.tabbuttonheight=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_selectedtabbuttonwidth=function(_a){if(this.selectedtabbuttonwidth!=_a){this.selectedtabbuttonwidth=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_selectedtabbuttonheight=function(_a){if(this.selectedtabbuttonheight!=_a){this.selectedtabbuttonheight=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_extrabuttonsize=function(_a){_a=nexacro._toString(_a).replace(/\s+/," ").trim();if(this.extrabuttonsize==_a){return;}this.extrabuttonsize=_a;this._extrabutton_size=null;this._rearrangeContents();};_pTab.getParentContext=function(){return this.parent;};_pTab.addChild=function(_a,_b){this._addChild(_a,_b,false);};_pTab.insertTabpage=function(_a,_b,_c,_d,_e,_f){var _g=parseInt(_b)|0;var _h=this.tabpages;var _i=_h.length;var _j=this._tabbuttonitems;var _k;var _l;for(var _p=0;_p<_i;_p++ ){_k=this.tabpages[_p];if(_a==_k.text){return  -1;}}_k=new nexacro.Tabpage(_a,this);_k._refobj=this;if(_d){_k.set_text(_d);}else{_k.set_text(_a);}if(_e){_k.set_tabbuttonwidth(_e);}if(_f){_k.set_tabbuttonheight(_f);}_k._preload=this.preload;_k.createComponent(false);if(_g>_i){_g= -1;}this.on_fire_canchange(this,this.tabindex,this.tabpages.length);if(this._is_canchange){_l=this.tabindex;if(this[_a]){if(this[_a].name==_k.name){_k.destroy();return  -1;}}var _m=_l> -1?_h[_l]:undefined;var _n=_l> -1?this._tabbuttonitems[_l]:undefined;if(_m&&_n){if(_m.enable){_n._changeStatus("enabled",true);}else{_n._changeStatus("disabled",true);}_n._changeUserStatus("selected",false);_m.set_visible(false);_n._setAccessibilityStatSelected(false);}}if(_g== -1){this.tabindex=_g=this.tabpages.length;this._addChild(_a,_k);}else{for(_p=_i;_p>_g;_p-- ){_j[_p]=_j[_p-1];_j[_p]._tabindex+=1;}this._addChild(_a,_k,true,_g);if(this._is_canchange){this.tabindex=_g;}else{if(this.tabindex>=_g){this.tabindex=this.tabindex+1;}}}var _o;if(this._is_canchange){_o=this._tabbutton_obj=_j[_g]=this._createTabbutton(_g,_k,false);if(_c&&!this.preload){_k.set_url(_c);}_k.set_visible(true);_o._changeUserStatus("selected",true);_o._setAccessibilityStatSelected(true);this._last_focused=null;}else{_o=_j[_g]=this._createTabbutton(_g,_k,false);_o._changeUserStatus("selected",false);_o._setAccessibilityStatSelected(false);}this._rearrangeContents();if(this.enableevent&&this._is_canchange){this.on_fire_onchanged(this,this.tabindex,this._oldtabindex);}return _g;};_pTab.removeTabpage=function(_a){var _b=parseInt(_a)|0;var _c=this.tabpages;var _d=_c.length;if(_d==0){return  -1;}var _e,_f=0;if(_d>0){var _g=_c[_b];if(!_g){return  -1;}var _h=_g.form._on_beforeclose();if(_g.form._checkAndConfirmClose(_h)==false){return  -1;}if(_g==this._last_focused){this._last_focused=null;}_g.form._on_close();this[_g.id]=null;delete this[_g.id];_c.delete_item(_g.id);_g.destroy();_e=this._tabbuttonitems;var _i=_e[_b];if(_i!=undefined){if(_i==this._tabbutton_obj){this._tabbutton_obj=null;}if(_i==this._last_focused){this._last_focused=null;}_i.destroy();}_e.splice(_b,1);_f=_e.length;for(var _l=0;_l<_f;_l++ ){_e[_l]._tabindex=_l;}}var _j=false;if(this.tabindex==_b){_j=true;}if(_b!=0&&this.tabindex==_b&&this.tabindex==_f){this.tabindex=_b-1;}else if(this.tabindex>_b||_f==0){this.tabindex-=1;}var _k=_c[this.tabindex];if(_k){_k.set_visible(true);if(!this.preload){_k._on_apply_url();}if(_e){_e[this.tabindex]._changeUserStatus("selected",true);}if(this.enableevent&&_j){this.on_fire_onchanged(this,this.tabindex,this._oldtabindex);}}if(_f>0){this._rearrangeContents();}return 0;};_pTab.moveTabpage=function(_a,_b){var _c=this.tabpages;var _d=_c.length;if(_b<0||_d<=_b||_d<=_a||_a<0){return  -1;}if(_a==_b){return  -1;}var _e=this.tabindex;var _f=_c[_e];var _g=_f.id;var _h=_c[_a];var _i=this._tabbuttonitems;var _j=_i[_a];_c.delete_item(_a);_c.insert_item(_b,_h.id,_h);var _k;if(_a<_b){for(_k=_a+1;_k<_d;_k++ ){_i[_k-1]=_i[_k];_i[_k-1]._tabindex=_k-1;if(_k==_b){_i[_k]=_j;_i[_k]._tabindex=_k;break;}}}else{for(_k=_a;_k>_b;_k-- ){_i[_k]=_i[_k-1];_i[_k]._tabindex=_k;}_i[_b]=_j;_i[_b]._tabindex=_b;}for(_k=0;_k<_d;_k++ ){if(_g==_c[_k].id){this.tabindex=_k;}}this._rearrangeContents();return 0;};_pTab.getTabpageCount=function(){return this.tabpages.length;};_pTab.getIndex=function(_a,_b){var _c=this._getTabIndex(parseInt(_a,10),parseInt(_b,10));return _c;};_pTab.setContents=function(_a){var _b=this._setContents(_a);return _b;};_pTab.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmousedown",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pTab.on_fire_sys_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmousedown",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmousedown._fireSysEvent(this,_o);}return false;};_pTab.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmouseup",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_sys_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmouseup",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmouseup._fireSysEvent(this,_o);}return false;};_pTab._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(!this._focusobj){this._setTabFocusObj(this);}};_pTab.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(_a===this){return;}if(_a==null&&_b==null){return;}this._focusobj=null;};_pTab.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=false;if(!this.onkeydown||(this.onkeydown&&!this.onkeydown.defaultprevented)){if(_a==nexacro.Event.KEY_TAB||_a==nexacro.Event.KEY_RIGHT||_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_BACKSPACE){if(this._keydown_filter(null,_a,_b,_c,_d,undefined,_e,_f,_g)){if(this._getWindow()._keydown_element){this._getWindow()._keydown_element._event_stop=true;}return true;}}else if(nexacro._enableaccessibility){if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP){if(this._keydown_filter(null,_a,_b,_c,_d,undefined,_e,_f,_g)){return true;}}}}_h=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);return _h;};_pTab.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeydown&&this.onkeydown._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeydown",_b,_c,_d,_a,_e,_f,_g);return this.onkeydown._fireSysEvent(this,_h);}return false;};_pTab.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeyup&&this.onkeyup._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeyup",_b,_c,_d,_a,_e,_f,_g);return this.onkeyup._fireUserEvent(this,_h);}return false;};_pTab.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeyup&&this.onkeyup._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeyup",_b,_c,_d,_a,_e,_f,_g);return this.onkeyup._fireSysEvent(this,_h);}return false;};_pTab.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(!this.visible||this._isEnable()==false){return _l;}this._is_changed_focus=false;if(_j&&((_j instanceof nexacro._TabButtonItemControl)||_j.parent instanceof nexacro._TabButtonItemControl)){var _m=this._tabbutton_obj;if(_m&&_m.name=="extrabutton"){if(this._tabbuttonitems[_m._tabindex]){this._tabbuttonitems[_m._tabindex]._setFocus();}}if(_m&&this.selectchangetype=="down"){var _n=_m._tabindex;var _o=this.tabindex;var _p=this._focusobj;var _q=this._changeTabIndex(_n,true,true);if(_q){if(this.enableevent&&_o!=this.tabindex){this.on_fire_onchanged(_m,_n,_o);}if(_p!=this._focusobj){this._is_changed_focus=true;}}this._rearrangeContents( -1);}}return _l;};_pTab.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l.name=="extrabutton"){var _n=_l.parent;var _o=_n._tabindex;if(_o>=0){if(this===_k){this.on_fire_onextrabuttonclick(_n,_o,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}}}if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _p=new nexacro.TabMouseEventInfo(this,"onlbuttondown",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onlbuttondown._fireUserEvent(this,_p);}return false;};_pTab.on_lbuttonup_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttonup_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(!this.visible||this._isEnable()==false){return _l;}if(_j&&((_j instanceof nexacro._TabButtonItemControl)||_j.parent instanceof nexacro._TabButtonItemControl)){if(this._tabbutton_obj&&this.selectchangetype=="up"){var _m=this._tabbutton_obj;var _n=_m._tabindex;var _o=this.tabindex;var _p=this._changeTabIndex(_n,true,true);if(_p){if(this.enableevent&&_o!=this.tabindex){this.on_fire_onchanged(_m,_n,_o);}}this._rearrangeContents( -1);}}};_pTab.on_touchend_basic_action=function(_a,_b,_c){var _d=nexacro.Component.prototype.on_touchend_basic_action.call(this,_a,_b,_c);var _e=this._getControlFromElement(_a._start_elem);if(_e){var _f;if(_e instanceof nexacro._TabExtraButtonControl){var _g=_e.parent;_f=_g._tabindex;var _h,_i,_j,_k,_l,_m;if(_b&&_b.length>0){_h=_b[0].screenx;_i=_b[0].screeny;_j=_b[0].canvasx;_k=_b[0].canvasy;_l=_b[0].clientx;_m=_b[0].clienty;}if(_f>=0){this.on_fire_onextrabuttonclick(_g,_f,"touch",null,null,null,_h,_i,_j,_k,_l,_m,this,_e);}var _n=this.tabindex;if(_n==_f){return _d;}else{_e=_e.parent;}}if(_e instanceof nexacro._TabButtonItemControl){this._tabbutton_obj=_e;var _o=this._tabbutton_obj;_f=_o._tabindex;var _p=this.tabindex;var _q=this._changeTabIndex(_f,true,true);if(_q){if(this.enableevent&&_p!=this.tabindex){this.on_fire_onchanged(_o,_f,_p);}}this._rearrangeContents( -1);}}return _d;};_pTab.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=new nexacro.TabMouseEventInfo(this,"onlbuttonup",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onlbuttonup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=new nexacro.TabMouseEventInfo(this,"onrbuttonup",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onrbuttonup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=new nexacro.TabMouseEventInfo(this,"onrbuttondown",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onrbuttondown._fireUserEvent(this,_n);}return false;};_pTab.on_fire_onextrabuttonclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onextrabuttonclick&&this.onextrabuttonclick._has_handlers){var _p=new nexacro.TabMouseEventInfo(this,"onextrabuttonclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,this,_o);return this.onextrabuttonclick._fireEvent(this,_p);}return true;};_pTab.on_notify_prevbutton_onclick=function(_a,_b){this._adjustSpinPosition( -1);};_pTab.on_notify_nextbutton_onclick=function(_a,_b){this._adjustSpinPosition(1);};_pTab.on_fire_canchange=function(_a,_b,_c){this._is_canchange=true;if(this.canchange&&this.canchange._has_handlers){var _d=new nexacro.TabIndexChangeEventInfo(_a,"canchange",_b,_c);this._is_canchange=this.canchange._fireCheckEvent(this,_d);return this._is_canchange;}return true;};_pTab.on_fire_onchanged=function(_a,_b,_c){if(this.onchanged&&this.onchanged._has_handlers){var _d=new nexacro.TabIndexChangeEventInfo(this,"onchanged",_b,_c);return this.onchanged._fireEvent(this,_d);}return true;};_pTab.on_apply_prop_cssclass=function(){var _a=this.nextbutton;if(_a){_a.on_apply_cssclass();}var _b=this.prevbutton;if(_b){_b.on_apply_cssclass();}var _c=this._tabbuttonitems;var _d=_c.length;var _e;for(_e=0;_e<_d;_e++ ){var _f=_c[_e];if(_f){_f.on_apply_cssclass();}}var _g=this.tabpages;var _h=_g.length;var _i;for(_e=0;_e<_h;_e++ ){_i=_g[_e];if(_i){_i.on_apply_cssclass();}}};_pTab._createSpinButton=function(_a){if(!this.nextbutton){this.nextbutton=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);this.nextbutton._setControl();this.nextbutton.createComponent(_a);this.nextbutton.set_visible(false);this.nextbutton._setEventHandler("onclick",this.on_notify_nextbutton_onclick,this);}if(!this.prevbutton){this.prevbutton=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);this.prevbutton._setControl();this.prevbutton.createComponent(_a);this.prevbutton.set_visible(false);this.prevbutton._setEventHandler("onclick",this.on_notify_prevbutton_onclick,this);}};_pTab._createTabpages=function(_a){var _b=this.tabpages;var _c=_b.length;var _d;var _e=this.tabindex;for(var _f=0;_f<_c;_f++ ){_d=_b[_f];_d._refobj=this;_d._preload=this.preload;if(_e!=_f){_d.set_visible(false);}if(!_d._is_created){_d.createComponent(_a);}}};_pTab._createTabButtons=function(_a){var _b=this.tabpages;var _c=_b.length;if(_c<=0){return;}for(var _e=0;_e<_c;_e++ ){var _d=this._createTabbutton(_e,_b[_e],_a);this._tabbuttonitems.push(_d);}};_pTab._createTabbutton=function(_a,_b,_c){if(!_b){return null;}var _d=this._next_button_idx++ ;var _e=_b.text;var _f=_a;var _g=new nexacro._TabButtonItemControl("tabbutton_"+_d,0,0,1,1,null,null,null,null,null,null,this);_g.createComponent(_c);_g.set_text(_e);_g._tabindex=_f;_g._tabpage=_b;_b._tabbuttonitem=_g;return _g;};_pTab._getTabIndex=function(_a,_b){var _c= -1;var _d=this.tabpages.length;if(_d<=0){return _c;}if(_a<0||_b<0){return _c;}var _e=0,_f=0,_g=0,_h=0;var _i,_j;_i=this._tabbuttonitems;for(var _k=0;_k<_d;_k++ ){_j=_i[_k];if(_j.visible){_e=_j._position.left;_f=_j._position.top;_h=_f+_j._position.height;_g=_e+_j._position.width;if(_a>=_e&&_a<=_g&&_b>=_f&&_b<=_h){_c=_k;break;}}}return _c;};_pTab._isSpinButtonVisible=function(){return this.nextbutton.visible||this.prevbutton.visible;};_pTab._getPrevButtonSize=function(){if(!this._prevbutton_size){var _a=0;var _b=0;var _c=this.prevbutton._getCSSStyleValue("border");var _d=this.prevbutton._getCSSStyleValue("padding");if(_c){_a=_c.left._width+_c.right._width;_b=_c.top._width+_c.bottom._width;}if(_d){_a+=_d.left+_d.right;_b+=_d.top+_d.bottom;}var _e=this.prevbutton._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._prevbutton_size={width:_a,height:_b};if(!_e){var _f=this._default_spinbutton_size;this._prevbutton_size.width+=_f.width;this._prevbutton_size.height+=_f.height;}else{var _g=nexacro._getImageSize(_e,this._onload_prevbutton_iconimage,this);if(_g){this._prevbutton_size.width+=_g.width;this._prevbutton_size.height+=_g.height;}else{return null;}}}return this._prevbutton_size;};_pTab._getNextButtonSize=function(){if(!this._nextbutton_size){var _a=0;var _b=0;var _c=this.nextbutton._getCSSStyleValue("border");var _d=this.nextbutton._getCSSStyleValue("padding");if(_c){_a=_c.left._width+_c.right._width;_b=_c.top._width+_c.bottom._width;}if(_d){_a+=_d.left+_d.right;_b+=_d.top+_d.bottom;}var _e=this.nextbutton._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._nextbutton_size={width:_a,height:_b};if(!_e){var _f=this._default_spinbutton_size;this._nextbutton_size.width+=_f.width;this._nextbutton_size.height+=_f.height;}else{var _g=nexacro._getImageSize(_e,this._onload_nextbutton_iconimage,this);if(_g){this._nextbutton_size.width+=_g.width;this._nextbutton_size.height+=_g.height;}else{return null;}}}return this._nextbutton_size;};_pTab._getTabpageBorder=function(){var _a;var _b=this.tabpages.length;var _c;if(_b>0){_c=this.tabpages[0];_a=_c._getCSSStyleValue("border");}return _a;};_pTab._addChild=function(_a,_b,_c,_d){if(_a&&_a.length<=0){return  -1;}if(!_b){return  -1;}if(this[_a]){return  -1;}if(!(_b instanceof nexacro.Tabpage)){return  -1;}_b._refform=this;if(!_b.id){_b.id=_b.name=_a;}else{_b.id=_a;}this[_a]=_b;if(_c&&_d>=0){this.tabpages.insert_item(_d,_a,_b);}else{this.tabpages.add_item(_a,_b);}if(this.preload||(this._init_tabindex>=0&&this.tabpages[this._init_tabindex]==_b)){_b._on_apply_url();}if(!_b._url){var _e=_b.form;if(_e){_e._is_loaded=true;}}};_pTab._getFirstTabbuttonIndex=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c;var _d= -1;for(var _e=0;_e<_b;_e++ ){_c=_a[_e];if(_c.visible){_d=_e;break;}}return _d;};_pTab._adjustSpinPosition=function(_a){var _b=this._tabbuttonitems.length;var _c=parseInt(_a);var _d=this._getFirstTabbuttonIndex();if(_d>=0){_c+=_d;}if(_c<0){_c=0;}if(_c>=_b){_c=_b-1;}this._rearrangeContents(_c);};_pTab._changeTabIndex=function(_a,_b,_c){var _d= +_a;if(!this._is_created||this.tabindex==_a||(_d!=_d)||_a<0||(this.tabpages&&_a>=this.tabpages.length)){return;}var _e=this.tabindex;if(_e> -1&&this.enableevent){var _f=this.on_fire_canchange(this,_a,_e);if(_f==false){this._tabbuttonitems[_a]._changeUserStatus("selected",false);return false;}}var _g=_e> -1?this.tabpages[_e]:undefined;var _h=this.tabpages[_a];var _i=_e> -1?this._tabbuttonitems[_e]:undefined;var _j=this._tabbuttonitems[_a];if(_g&&_i){if(_g.enable){_i._changeStatus("enabled",true);}else{_i._changeStatus("disabled",true);}if(_i.visible){_i._changeUserStatus("selected",false);if(_c){_i._changeStatus("mouseover",false);}}_g.set_visible(false);_i._setAccessibilityStatSelected(false);}this._oldtabindex=_e;this.tabindex=_a;if(_h){if(!_h.visible){_h.set_visible(true);}if(!this.preload){_h._on_apply_url(false);}if(!_j.visible){_j.set_visible(true);}_j._changeUserStatus("selected",true);_j._setAccessibilityStatSelected(true);if(_b){_j._on_focus(true);}if(_h.enable){_h._changeStatus("enabled",true);}else{_h._changeStatus("disabled",true);}}else{if(_g&&_i){if(_i.enable){_i._changeStatus("focused",true);}else{_i._changeStatus("disabled",true);}_i._changeUserStatus("selected",true);_g.set_visible(true);}}return true;};_pTab._rearrangeContents=function(_a){if(!this._is_created){return;}var _b=this.tabposition;var _c=this.multiline;var _d=this.tabjustify;var _e=this.showextrabutton;var _f;var _g=0;var _h=0;if(_e){if(!this._extrabutton_size){_f=this._getExtraButtonSize();if(_f){if(_f.width!=0||_f.height!=0){this._extrabutton_size=_f;}_g=_f.width;_h=_f.height;}}else{_g=this._extrabutton_size.width;_h=this._extrabutton_size.height;}}var _i=this.tabindex;var _j=false;var _k;var _l;var _m;var _n;var _o=false;var _p=false;var _q={left:0,top:0,width:0,height:0};var _r=0;var _s=0;var _t=0;var _u=0;var _v=this._tabbuttonitems;var _w=_v.length;var _x;var _y,_z;var _aa=this._getClientWidth();var _ab=this._getClientHeight();var _ac=this.tabpages;var _ad=_ac.length;var _ae;var _af=this._getTabpageBorder();var _ag=0,_ah=0,_ai=0,_aj=0;if(_af){if(_af.left){_ag=_af.left._width;}if(_af.top){_ah=_af.top._width;}if(_af.right){_ai=_af.right._width;}if(_af.bottom){_aj=_af.bottom._width;}}var _ak=_aa;var _al=_ab;if(_ak<=0||_al<=0){return;}_q.width=_aa;_q.height=_ab;var _am=this.tabbuttonwidth;var _an=this.tabbuttonheight;var _ao=this.selectedtabbuttonwidth;var _ap=this.selectedtabbuttonheight;this._setTabButtonItemsSizeInfo();var _aq=this._getTabbuttonItemsMaxSize();var _ar=_aq[0];var _as=_aq[1];var _at=0;var _au=0;var _av=false;var _aw=false;var _ax=false;var _ay;for(_ay=0;_ay<_w;_ay++ ){_x=_v[_ay];_ae=_x._tabpage;_y=_x._sizeinfo;_z=_x._position;var _az=_y.width;var _ba=_y.height;var _bb=_ae.tabbuttonwidth;var _bc=_ae.tabbuttonheight;var _bd=undefined;var _be=undefined;if(!_c){if(_d){if(_b=="top"||_b=="bottom"){if(_an!==undefined){_be=_an;}if(_bc!==undefined){_be=_bc;}if(_x._tabindex==_i){if(_ap!==undefined){_be=_ap;}}}else{if(_am!==undefined){_bd=_am;}if(_bb!==undefined){_bd=_bb;}if(_x._tabindex==_i){if(_ao!==undefined){_bd=_ao;}}}}else{if(_am!==undefined){_bd=_am;}if(_an!==undefined){_be=_an;}if(_bb!==undefined){_bd=_bb;}if(_bc!==undefined){_be=_bc;}if(_x._tabindex==_i){if(_ao!==undefined){_bd=_ao;}if(_ap!==undefined){_be=_ap;}}}}if(_e){if(!_bd){if(_g){_az+=_g;}else{_az+=_as;}}}if(_bd!==undefined){if(_bd<0){_az=0;}else{_az=_bd;}}if(_be!==undefined){if(_be<0){_ba=0;}else{_ba=_be;}}if(_b=="top"||_b=="bottom"){_z.width=_az;if(_be===undefined){_z.height=_as;}else{_z.height=_be;}}else{if(_bd===undefined){_z.width=_ar;}else{_z.width=_bd;}_z.height=_ba;}_x._line_index=0;_r+=_az;_s+=_ba;_aw=((_ay+1)==_w);if(_b=="top"||_b=="bottom"){_ax=_r>_ak;}else{_ax=_s>_al;}if(_ax||_aw){if(!_c&&_ax&&!_j){_j=true;_m=this._getPrevButtonSize();_n=this._getNextButtonSize();if(!_m||!_n){return;}if(_b=="top"||_b=="bottom"){_ak-=(_m.width+_n.width);if(_m.height>_as||_n.height>_as){_as=(_m.height>_n.height)?_m.height:_n.height;}}else{_al-=(_m.height+_n.height);if(_m.width>_ar||_n.height>_ar){_ar=(_m.width>_n.width)?_m.width:_n.width;}}_ay= -1;_t=0;_r=0;_s=0;continue;}if(_ax){_au=_ay;_r-=_az;_s-=_ba;_av=true;}else{_au=_ay+1;}if(_j&&_d){_d=false;_ay= -1;_t=0;_r=0;_s=0;continue;}if(_d||(_c&&_av)){var _bf=_ak-_r;var _bg=_al-_s;var _bh=0;if(_b=="top"||_b=="bottom"){_bh=_bf;}else{_bh=_bg;}var _bi=1;for(var _bt=_at;_bt<_au;_bt++ ){_x=_v[_bt];if(_c){_x._line_index=_t;}else{_x._line_index=0;}_z=_x._position;if(_b=="top"||_b=="bottom"){_bi=_z.width/_r;if((_bt+1)==_au){_z.width+=_bh;}else{_z.width+=Math.ceil(_bf* _bi);}_bh-=Math.ceil(_bf* _bi);}else{_bi=_z.height/_s;if((_bt+1)==_au){_z.height+=_bh;}else{_z.height+=Math.ceil(_bg* _bi);}_bh-=Math.ceil(_bg* _bi);}}}if(_au==_w||_at==_au){break;}_r=0;_s=0;_at=_ay;_t++ ;_ay-- ;continue;}}_u=_t+1;if(_a<0){_a=this._getFirstTabbuttonIndex();}if(_a==undefined||_a==null){var _bj=0;var _bk=0;for(_ay=_i;_ay>=0;_ay-- ){_x=_v[_ay];_z=_x._position;_bj+=_z.width;_bk+=_z.height;if(_b=="top"||_b=="bottom"){if(_bj<=_ak){_a=_ay;}else{break;}}else{if(_bk<=_al){_a=_ay;}else{break;}}}}var _bl=0;var _bm=0;var _bn;var _bo=0;var _bp=0;if(_i>0){_x=_v[_i];_bp=_x._line_index;}for(_ay=0;_ay<_w;_ay++ ){_x=_v[_ay];_z=_x._position;_t=_x._line_index;if(_c){_t=(_t-_bp);if(_t<0){_t+=_u;}}else{_t=0;}if(_b=="top"||_b=="bottom"){if(_bo!=_t){_bl=0;}if(_b=="top"){if(_c){_bm=_as* (_u-_t-1);}else{_bm=_as-_z.height;}_z.height+=_ah;}else{if(_c){_bm=_al-_as* (_u-_t);}else{_bm=_al-_as;}_bm-=_aj;}if(!_d&&!_c){if(_ay==0){_bl+=this._tabbuttonstartgap;}else if(_ay>0){_bl+=this._tabbuttongap;}}_z.left=_bl;_z.top=_bm;if(_o||(!_c&&(_z.left+_z.width)>_ak)){_x.set_visible(false);_o=true;}else{_x.set_visible(this.usetabbutton);if(_i!=_x._tabindex){_x._changeUserStatus("selected",false);}}if(_x.visible){_bn=_v[_ay-1];if(_bn&&!_bn.visible){_p=true;}if(!_c&&_x._tabindex<_a){_x.set_visible(false);}else{_bl=_z.left+_z.width;}}}else{if(_bo!=_t){_bm=0;}if(_b=="left"){if(_c){_bl=_ar* (_u-(_t+1));}else{_bl=_ar-_z.width;}_z.width+=_ag;}else{if(_c){_bl=_ak-_ar* (_u-_t);}else{_bl=_ak-_ar;}_bl-=_ai;}if(!_d&&!_c){if(_ay==0){_bm+=this._tabbuttonstartgap;}else if(_ay>0){_bm+=this._tabbuttongap;}}_z.left=_bl;_z.top=_bm;if(_o||(!_c&&(_z.top+_z.height)>_al)){_x.set_visible(false);_o=true;}else{_x.set_visible(this.usetabbutton);if(_i!=_x._tabindex){_x._changeUserStatus("selected",false);}}if(_x.visible){_bn=_v[_ay-1];if(_bn&&!_bn.visible){_p=true;}if(!_c&&_x._tabindex<_a){_x.set_visible(false);}else{_bm=_z.top+_z.height;}}}_bo=_t;if(_c){_x.set_visible(this.usetabbutton);if(_i!=_x._tabindex){_x._changeUserStatus("selected",false);}}if(_x.visible){_x.move(_z.left,_z.top,_z.width,_z.height);_x._showExtraButton(_e,_g,(_h>_z.height?_z.height:_h));_x.set_cssclass(_x._tabpage.tabbuttoncssclass);}}var _bq=_u;if(!_c||_u<=1){_bq=1;}if(_b=="top"||_b=="bottom"){_q.height-=_as* _bq;if(_b=="top"){_q.top+=_as* _bq;}}else{_q.width-=_ar* _bq;if(_b=="left"){_q.left+=_ar* _bq;}}for(_ay=0;_ay<_ad;_ay++ ){_ae=_ac[_ay];_ae.move(_q.left,_q.top,_q.width,_q.height);if(_ae.form&&_ae.form._is_loaded==true&&(!_ae.url||_ae.url.length<=0)){_ae.form.resetScroll();}}_k=this.prevbutton;_l=this.nextbutton;if(!_j||!this.usetabbutton){_k.set_visible(false);_l.set_visible(false);}else{var _br={left:0,top:0,width:0,height:0};var _bs={left:0,top:0,width:0,height:0};_br.width=_n.width;_br.height=_n.height;_bs.width=_m.width;_bs.height=_m.height;if(_b=="top"||_b=="bottom"){_bs.left=_ak;_br.left=_bs.left+_bs.width;if(_b=="top"){_bs.top=_q.top-_m.height;_br.top=_q.top-_n.height;}else{_bs.top=_q.height;_br.top=_q.height;}}else{_bs.top=_al;_br.top=_bs.top+_bs.height;if(_b=="left"){_bs.left=_q.left-_m.width;_br.left=_q.left-_n.width;}else{_bs.left=_q.width;_br.left=_q.width;}}_k.move(_bs.left,_bs.top,_bs.width,_bs.height);_l.move(_br.left,_br.top,_br.width,_br.height);if(!_k.visible){_k.set_visible(true);}if(!_l.visible){_l.set_visible(true);}_k._setEnable(_p);_l._setEnable(_o);if(!_p){_k._changeStatus("mouseover",false);}if(!_o){_l._changeStatus("mouseover",false);}}};_pTab._getExtraButtonSize=function(){var _a,_b,_c;if(this.extrabuttonsize){_a=this.extrabuttonsize.split(" ");_b= +_a[0];if(!isNaN(_b)){_c= +_a[1];if(isNaN(_c)){_c=_b;}return {width:_b,height:_c};}}var _d=this._tabbuttonitems?this._tabbuttonitems[0]:null;if(!_d){return null;}return _d._getExtraButtonSize(this.showextrabutton);};_pTab._getTabbuttonItemsMaxSize=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c,_d;var _e=0;var _f=0;var _g=this.showextrabutton;var _h=0,_i=0;var _j=this.tabindex;var _k=this.multiline;var _l=this.tabjustify;var _m=this.tabposition;var _n=this.tabbuttonwidth;var _o=_k?undefined:this.tabbuttonheight;var _p=this.selectedtabbuttonwidth;var _q=this.selectedtabbuttonheight;var _r,_s;var _t,_u;var _v=0;var _w=0;var _x;for(var _z=0;_z<_b;_z++ ){_c=_a[_z];_x=_c._tabpage;_d=_c._sizeinfo;if(_d){_h=_d.width;_i=_d.height;}_r=_x.tabbuttonwidth;_s=_x.tabbuttonheight;_t=0;_u=0;if(!_k){if(_l){if(_m=="top"||_m=="bottom"){if(_o){_u=_o;}if(_s){_u=_s;}if(_c._tabindex==_j){if(_q){_u=_q;}}}else{if(_n){_t=_n;}if(_r){_t=_r;}if(_c._tabindex==_j){if(_p){_t=_p;}}}}else{if(_n){_t=_n;}if(_o){_u=_o;}if(_r){_t=_r;}if(_s){_u=_s;}if(_c._tabindex==_j){if(_p){_t=_p;}if(_q){_u=_q;}}}}if(_u>_w){_w=_u;}if(_t>_v){_v=_t;}if(_n){_h=_n;}if(_o){_i=_o;}if(_i>_f){_f=_i;}if(_h>_e){_e=_h;}}if(_g){var _y=this._extrabutton_size;if(_y){if(!_w&&_y.height>_f){_f=_y.height;}if(!_n){_e+=_y.width;}}else{if(!_n){_e+=_f;}}}if(_v>_e){_e=_v;}if(_w>_f){_f=_w;}return [_e,_f];};_pTab._setTabButtonItemsSizeInfo=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c;var _d;for(var _e=0;_e<_b;_e++ ){_c=_a[_e];_d=_c._getItemSize();if(_d){_c._sizeinfo.width=_d[0];_c._sizeinfo.height=_d[1];}}};_pTab._on_get_extrabutton_iconsize=function(_a,_b){this._extrabutton_size=null;this._rearrangeContents();};_pTab._onload_prevbutton_iconimage=function(_a,_b,_c){if(this._prevbutton_size){if(_b==0||_c==0){var _d=this._default_spinbutton_size;_b=_d.width;_c=_d.height;}this._prevbutton_size.width+=_b;this._prevbutton_size.height+=_b;}this._rearrangeContents();};_pTab._onload_nextbutton_iconimage=function(_a,_b,_c){if(this._nextbutton_size){if(_b==0||_c==0){var _d=this._default_spinbutton_size;_b=_d.width;_c=_d.height;}this._nextbutton_size.width+=_b;this._nextbutton_size.height+=_b;}this._rearrangeContents();};_pTab._keydown_filter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=this.tabpages.length;if(_j<=0){return false;}var _k=this.tabindex;var _l=this.tabindex;var _m= -1;var _n,_o=[],_p;var _q,_r;var _s,_t;var _u;switch(_b){case 9:if(_d==true&&this.usecontrolkey){if(_e!=true){if(_k<_j-1){_m=_k+1;}else{_m=0;}}else{if(_k>0){_m=_k-1;}else{_m=_j-1;}}if(this._focusobj instanceof nexacro._TabButtonItemControl){this._setTabFocusObj(this._tabbuttonitems[_m]);}else if(this._focusobj instanceof nexacro.Tabpage){this._setTabFocusObj(this.tabpages[_m]);}break;}else{var _v;if(this._focusobj instanceof nexacro.Tab){var _w;var _x;var _y;var _z;if(_e==false){if(this.focusacceptable){this._setTabFocusObj(this._tabbuttonitems[_k]);this._tabbuttonitems[_k]._setFocus(false,0);}else{_q=this.tabpages[_k];_s=_q.form._getTabOrderFirst();if(_s){if(_q.form._last_focused){_z=this._getWindow();_z._removeFromCurrentFocusPath(_q.form._last_focused);}_s._setFocus(false,0);this._setTabFocusObj(_q);}else{_v=this.parent._searchNextTabFocus(this,null,null,0);if(_v){if(_v[0]==null){if(_v[2]==1){_w=nexacro.getEnvironment();if(_w){_x=_w.accessibilitylastovertext;_y=this._control_element;_y.notifyAccessibility(_x,"notify",true);}}else if(_v[2]== -1){_w=nexacro.getEnvironment();if(_w){_x=_w.accessibilityfirstovertext;_y=this._control_element;_y.notifyAccessibility(_x,"notify",true);}}}else{if(_v[0] instanceof nexacro.Form&&_v[0]._last_focused){_z=this._getWindow();_z._removeFromCurrentFocusPath(_v[0]._last_focused);}_v[0]._setFocus(true,1,true);}}}}}else{_v=this.parent._searchPrevTabFocus(this);if(_v){if(_v[0]==null){if(_v[2]==1){_w=nexacro.getEnvironment();if(_w){_x=_w.accessibilitylastovertext;_y=this._control_element;_y.notifyAccessibility(_x,"notify",true);}}else if(_v[2]== -1){_w=nexacro.getEnvironment();if(_w){_x=_w.accessibilityfirstovertext;_y=this._control_element;_y.notifyAccessibility(_x,"notify",true);}}}else{if(_v[0] instanceof nexacro.Form&&_v[0]._last_focused){_z=this._getWindow();_z._removeFromCurrentFocusPath(_v[0]._last_focused);}_v[0]._setFocus(true,1,true);}}}}else if(this._focusobj instanceof nexacro._TabButtonItemControl){if(_e==false){_v=this._searchNextTabFocus(this._focusobj,false,false,0);if(_v&&_v[0]){_v[0]._setFocus(true,0,true);}this._setTabFocusObj(_v[0]);}else{_v=this._searchPrevTabFocus(this._focusobj,false,false,0);if(_v&&_v[0]){_v[0]._setFocus(true,0,true);}}}else if(this._focusobj instanceof nexacro.Tabpage){_q=this._focusobj;_t=_q.form._getLastFocused();_s=_q.form._getTabOrderFirst(0);if(_e==false){if(_t){_n=this._focusobj.form._searchNextTabFocus(_t,undefined,undefined,0);if(_n&&_n[0]){_n[0]._setFocus(true,0,true);}}else if(_s){_s._setFocus(true,0,true);}}else{if(!_t||_t==_s){if(this.focusacceptable){_o.push(this._tabbuttonitems[_k]);}else{_o=this.parent._searchPrevTabFocus(this,undefined,undefined,0);}if(_o[0]){_o[0]._setFocus(true,1,true);}}else{_n=this._focusobj.form._searchPrevTabFocus(_t,undefined,undefined,0);if(_n&&_n[0]){_n[0]._setFocus(true,0,true);}}}}return true;}break;case 8:if(_d==true&&this.usecontrolkey){this.on_fire_onextrabuttonclick(this,_k,"",false,false,false, -1, -1, -1, -1, -1, -1,this,this);return true;}break;case 38:{if(nexacro._enableaccessibility){_u=this._focusobj;_p=null;if(_u instanceof nexacro.Tab){_p=this.parent._searchPrevTabFocus(_u,undefined,undefined,7+8);}else if(_u instanceof nexacro._TabButtonItemControl){if(this._isAccessibilityEnable()){_o=this;}else{_p=this.parent._searchPrevTabFocus(this,undefined,undefined,7+8);}}else if(_u instanceof nexacro.Tabpage){_r=_u.form;_t=_r._getLastFocused();if(!_d){if(_t){_n=_r._searchPrevTabFocus(_t,undefined,undefined,7+8);if(_n&&_n[0]){_o=_n[0];}}else{if(this.focusacceptable){_o=this._tabbuttonitems[_u.parent.tabindex];}else{if(!this._isAccessibilityEnable()){_p=this.parent._searchPrevTabFocus(this,undefined,undefined,7+8);if(_p&&_p[0]){_o=_p[0];}}else{_o=this;}}}}}if(_p&&_p[0]){_o=_p[0];_o._setFocus(true,3,true);}else{if(_o&&!(_o instanceof Array)){_o._setFocus(true,3,true);this._setTabFocusObj(_o);}}return true;}}break;case 40:{if(nexacro._enableaccessibility){_u=this._focusobj;_p=null;if(_u instanceof nexacro.Tab){if(this.focusacceptable){_o=this._tabbuttonitems[this.tabindex];}else{_o=this.tabpages[this.tabindex];if(_o._last_focused){_o._last_focused=null;}if(!_o._isAccessibilityEnable()){_p=_o.form._searchNextTabFocus(_u._last_focused,false,false,7+8);}}}else if(_u instanceof nexacro._TabButtonItemControl){_q=this.tabpages[this.tabindex];if(_q._last_focused){_q._last_focused=null;}if(!_q._isAccessibilityEnable()){_p=_q._searchNextTabFocus(null,true,false,7+8);if(!_p){_n=this.parent._searchNextTabFocus(this,undefined,undefined,7+8);if(_n&&_n[0]){_n[0]._setFocus(true,2,true);}}}else{_o=_q;}}else if(_u instanceof nexacro.Tabpage){_q=_u;_r=_q.form;_s=_r._getTabOrderFirst(7+8);_t=_r._getLastFocused();if(!_d&&!_c&&!_e){if(_t){_n=_r._searchNextTabFocus(_t,undefined,undefined,7+8);if(_n&&_n[0]){_n[0]._setFocus(true,2,true);}}else if(_s){_o=_s;}else{_p=this.parent._searchNextTabFocus(this,undefined,undefined,7+8);}}}if(_p&&_p[0]){_o=_p[0];_o._setFocus(true,2,true);}else{if(_o&&!(_o instanceof Array)){_o._setFocus(true,2,true);this._setTabFocusObj(_o);}}return true;}}break;case 39:if(this.focusacceptable&&_d==false){_u=this._focusobj;if(_u instanceof nexacro._TabButtonItemControl){if(_k<_j-1){_m=_k+1;}else{_m=0;}this._setTabFocusObj(this._tabbuttonitems[_m]);}}break;case 37:if(this.focusacceptable&&_d==false){_u=this._focusobj;if(_u instanceof nexacro._TabButtonItemControl){if(_k>0){_m=_k-1;}else{_m=_j-1;}this._setTabFocusObj(this._tabbuttonitems[_m]);}}break;default:break;}if(_m> -1){if(this._changeTabIndex(_m,true)==true){if(this.enableevent){this.on_fire_onchanged(this,_m,_l);}this._rearrangeContents();}}};_pTab._getDlgCode=function(_a,_b,_c,_d){var _e=this._focusobj;if(_e&&!(_e instanceof nexacro.Tab||_e instanceof nexacro._TabButtonItemControl||_e instanceof nexacro.Tabpage)){return _e._getDlgCode(_a,_b,_c,_d);}else{return {want_tab:true,want_return:false,want_escape:false,want_chars:false,want_arrows:this._isEnable()};}};_pTab._setTabFocusObj=function(_a){this._focusobj=_a;};_pTab._getTabFocusObj=function(){return this._focusobj;};_pTab._getComponentsByTaborder=function(_a,_b){if(_b===undefined){_b=4;}if(_a&&_a!==this){return nexacro.FormBase._getComponentsByTaborder.call(this,_a,_b);}if(!this._isEnable()){return null;}var _c=this.tabpages[this.tabindex];var _d=this._tabbuttonitems[this.tabindex];var _e;var _f=(this.focusacceptable&&_d)?[_d]:[];if((_b&4)||(_c&&_c.form._child_list&&_c.form._child_list.length>0)){_f.push(_c);}var _g=_f.length;for(var _h=0,_i=[];_h<_g;_h++ ){_e=_f[_h];if(!_e||!_e._is_created||!_e.visible||((_e._isEnable&&!_e._isEnable()||!_e.enable)&&!(_b&2))||_e._popup){continue;}if(!(_b&1)&&!_e.on_get_prop_tabstop()){continue;}_i[_i.length]=_e;}return _i;};_pTab._searchNextTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchNextTabFocus.call(this,_a,_b,_c,_d);if(_e&&_b&&_e[0] instanceof nexacro.Tabpage){if(_e[0].form._child_list==0&&!(_d&4)){return [this];}}return _e;};_pTab._searchPrevTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchPrevTabFocus.call(this,_a,_b,_c,_d);if(_e&&_b){var _f=_e[0];if(_f instanceof nexacro.Tabpage){if(_f.form._child_list==0&&!(_d&4)){return [this];}}}return _e;};_pTab._getTabOrderNext=function(_a,_b,_c){var _d=this._tabbuttonitems[this.tabindex];var _e=this.tabpages[this.tabindex];if(nexacro._isNull(_c)){_c=4;}if(_b>0){if(_a===_e){return null;}else if(_a===_d){if(_c&4){return _e;}else{return _e.form._getTabOrderFirst(_c);}}}else{if(_a===_e&&this.focusacceptable){return _d;}else if(_a===_d){if(_c&4){return this;}}}return null;};_pTab._getTabOrderFirst=function(_a){return nexacro.FormBase.prototype._getTabOrderFirst.call(this,_a);};_pTab._getTabOrderLast=function(_a){return nexacro.FormBase.prototype._getTabOrderLast.call(this,_a);};_pTab._getControlFromElement=function(_a){var _b=null;var _c=_a;while(_c&&_c!==this){if(_c instanceof nexacro._TabButtonItemControl||_c instanceof nexacro._TabExtraButtonControl){return _c;}_c=_c.parent;}return _b;};_pTab._on_orientationchange=function(_a){var _b=this.tabpages[this.tabindex];if(_b){_b._on_orientationchange(_a);}};_pTab._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Tabpages")[0];if(!_c){return false;}var _d,_e;var _f,_g;var _h,_i;var _j=this.tabindex;for(_d=0,_e=this.tabpages.length;_d<_e;_d++ ){this.removeTabpage(0);}var _k=_c.getElementsByTagName("Tabpage");var _l;var _m;var _n={};var _o={};var _p;var _q;var _r;var _s={};var _t={};var _u,_v;for(_d=0;_d<_k.length;_d++ ){_l=_k[_d];_n={};_o={};for(_f=0,_g=_l.attributes.length;_f<_g;_f++ ){_h=_l.attributes[_f].name;_i=_l.attributes[_f].value;if(/^(id|text|)$/.test(_h)){_n[_h]=_i;}else{_o[_h]=_i;}}_m=new nexacro.Tabpage(_n["id"],this);_m._refobj=this;_m._preload=this.preload;_m.set_text(_n["text"]||_n["id"]);for(_h in _o){if(_m["set_"+_h]){_m["set_"+_h](_o[_h]);}else{_m[_h]=_o[_h];}}_m.createComponent(false);this._addChild(_n["id"],_m);if(!_o["url"]){_p=_l.getElementsByTagName("Layout")[0];if(!_p){continue;}_q=_p.firstChild;while(_q){if(_q.nodeType!=1){_q=_q.nextSibling;continue;}_u=nexacro._getRegisterClass(_q.tagName);if(!_u){return false;}_v=nexacro._executeGlobalEvalStr(_u);if(!_v){return false;}if(_v.prototype&&_v.prototype._is_component){_s={};_t={};for(_f=0;_f<_q.attributes.length;_f++ ){_h=_q.attributes[_f].name;_i=_q.attributes[_f].value;if(/^(id|left|top|width|height|right|bottom|minwidth|maxwidth|minheight|maxheight|)$/.test(_h)){_s[_h]=_i;}else{_t[_h]=_i;}}_r=new _v(_s["id"],_s["left"],_s["top"],_s["width"],_s["height"],_s["right"],_s["bottom"],_s["minwidth"],_s["maxwidth"],_s["minheight"],_s["maxheight"],_m.form);for(_h in _t){if(_r["set_"+_h]){_r["set_"+_h](_t[_h]);}else{_r[_h]=_t[_h];}}if(_q.firstChild){var _w=_q.firstChild;var _x="";while(_w){if(_w.nodeType==1){_x+=nexacro._documentToXml(_w);}_w=_w.nextSibling;}if(!_r._setContents(_x)){return false;}}_m.form.addChild(_r.id,_r);_r.show();}_q=_q.nextSibling;}}}if(this._is_created){this._createSpinButton(false);this._createTabButtons(false);this.on_apply_tabindex(_j);this._rearrangeContents();}return true;};_pTab._applyMultiContainerScrollPos=function(){var _a=this.tabpages;var _b=_a.length;var _c=0;var _d;for(_c=_b-1;_c>=0;_c-- ){_d=_a[_c];if(_d&&_d.form){_d.form._applyScrollPos();}}};delete _pTab;}if(!nexacro.Tabpage){nexacro.Tabpage=function(_a,_b){nexacro.Div.call(this,_a,0,0,0,0,null,null,null,null,null,null,_b);};var _pTabpage=nexacro._createPrototype(nexacro.Div,nexacro.Tabpage);nexacro.Tabpage.prototype=_pTabpage;_pTabpage._type_name="TabpageControl";_pTabpage._is_subcontrol=true;_pTabpage.accessibilityrole="tabpage";_pTabpage.tabbuttonwidth=undefined;_pTabpage.tabbuttonheight=undefined;_pTabpage.tabbuttoncssclass="";_pTabpage._preload=false;_pTabpage._tabbuttonitem=null;_pTabpage.bringToFront=nexacro._emptyFn;_pTabpage.bringToPrev=nexacro._emptyFn;_pTabpage.moveToNext=nexacro._emptyFn;_pTabpage.moveToPrev=nexacro._emptyFn;_pTabpage.sendToBack=nexacro._emptyFn;_pTabpage.sendToNext=nexacro._emptyFn;_pTabpage.on_apply_text=function(_a){var _b=this.parent;if(_b){var _c;if(_b._tabbuttonitems){var _d=_b._tabbuttonitems.length;for(var _e=0;_e<_d;_e++ ){_c=_b._tabbuttonitems[_e];if(_c._tabpage===this){_c.set_text(this.text);}}}_b._rearrangeContents();}};_pTabpage._getForm=function(){var _a=this._refform;if(_a instanceof nexacro.Tab){return _a._refform;}return this._refform;};_pTabpage.on_apply_prop_tooltip=function(){var _a=this.getElement();if(_a){_a.setElementToolTip(this.tooltiptext);}this.on_apply_prop_accessibilitydescription();this._updateAccessibilityLabel();};_pTabpage.set_tabbuttonwidth=function(_a){this.tabbuttonwidth=(_a===null||_a===undefined)?undefined:parseInt(_a)|0;var _b=this.parent;if(_b){_b._rearrangeContents();}};_pTabpage.set_tabbuttonheight=function(_a){this.tabbuttonheight=(_a===null||_a===undefined)?undefined:parseInt(_a)|0;var _b=this.parent;if(_b){_b._rearrangeContents();}};_pTabpage.set_tabbuttoncssclass=function(_a){_a=nexacro._toString(_a);if(this.tabbuttoncssclass!=_a){this.tabbuttoncssclass=_a;}var _b=this._tabbuttonitem;if(_b){_b.set_cssclass(_a);}};_pTabpage.on_created=function(_a){this._registerHotkey();return nexacro.Div.prototype.on_created.call(this,_a);};_pTabpage.createCommand=function(){this._registerHotkey();return nexacro.Div.prototype.createCommand.call(this);};_pTabpage.set_url=function(_a){if(_a&&_a.substring(0,4).toLowerCase()=="url("){_a=_a.substring(4,_a.length-1);}if(_a!=this.url){this.url=_a;if(this.parent._is_created==true){this.url=_a;this.on_apply_url();}}};_pTabpage._on_apply_url=function(){if(!this._is_loadedform&&!this.form._is_loading&&this.url&&this.url.length>0){this.on_apply_url(false);}};_pTabpage._setTabFocusObj=function(_a){this.parent._focusobj=_a;};_pTabpage._getTabFocusObj=function(){return this.parent._getTabFocusObj();};_pTabpage.getParentContext=function(){return this.parent.getParentContext();};_pTabpage.on_getIDCSSSelector=function(){return "tabpage";};_pTabpage.on_apply_prop_enable=function(_a){if(this.form){this.form._setEnable(_a);}var _b=this._tabbuttonitem;if(_b){_b._setEnable(_a);}};_pTabpage._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(nexacro._enableAccessibility&&_e&&this._contains(_e)){this._setTabFocusObj(_e);}else{this._setTabFocusObj(this);}};_pTabpage.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(_a===this){return;}if(_a==null&&_b==null){return;}};_pTabpage.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(!this.enable||_a==nexacro.Event.KEY_TAB){return;}return nexacro.Div.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pTabpage.on_destroy_contents=function(){nexacro.Div.prototype.on_destroy_contents.call(this);this._tabbuttonitem=null;};_pTabpage.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=null;var _e=this.parent;var _f=_e._getTabIndex();var _g=_e._tabButtons.length;var _h=this._getWindow();var _i=_h._accessibility_last_focused_comp;if(_a){_d=this._searchNextTabFocus(_i,undefined,undefined,3)[0];if(_d.parent!=_b){_f++ ;_e._accessibility_tabindex=_f;_d=(_g>_f)?_e._tabButtons[_f]:_d;}}else{_d=this._searchPrevTabFocus(_i,undefined,undefined,true)[0];if(_d==_b){_d=_e._tabButtons[_f];}}if(_d){_d._setAccessibilityNotifyEvent(_a);return true;}return false;};_pTabpage._setAccessibilityNotifyEvent=function(_a){var _b=null;var _c=this._index;var _d=this.parent;var _e=_d._getTabIndex();if(_a){if(_c!=_e){_b=_d._tabButtons[_c];}else{_b=this._getTabOrderFirst(true,false);}}else{if(_c!=_e){_b=_d._tabButtons[_c];}else{_b=this._getTabOrderLast(true,false);}}if(_b){_b._setAccessibilityNotifyEvent(_a);}};delete _pTabpage;}if(!nexacro._TabButtonItemControl){nexacro._TabButtonItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._sizeinfo={width:0,height:0};this._position={left:0,top:0,width:0,height:0};};var _pTabButtonItemControl=nexacro._createPrototype(nexacro.Component,nexacro._TabButtonItemControl);nexacro._TabButtonItemControl.prototype=_pTabButtonItemControl;_pTabButtonItemControl._type_name="TabButtonItemControl";_pTabButtonItemControl._is_subcontrol=true;_pTabButtonItemControl._use_selected_status=true;_pTabButtonItemControl._extrabutton=null;_pTabButtonItemControl._tabindex= -1;_pTabButtonItemControl._tabpage=null;_pTabButtonItemControl._extrabutton_iconsize=null;_pTabButtonItemControl._line_index=0;_pTabButtonItemControl.accessibilityrole="tabitem";_pTabButtonItemControl.on_created_contents=function(_a){if(this._tabbuttonitemtext){this._tabbuttonitemtext.on_created(_a);}if(this._extrabutton){this._extrabutton.on_created(_a);}};_pTabButtonItemControl.on_create_contents_command=function(_a){var _b="";if(this._tabbuttonitemtext){_b+=this._tabbuttonitemtext.createCommand();}if(this._extrabutton){_b+=this._extrabutton.createCommand();}return _b;};_pTabButtonItemControl.on_attach_contents_handle=function(_a){if(this._tabbuttonitemtext){this._tabbuttonitemtext.attachHandle(_a);}if(this._extrabutton){this._extrabutton.attachHandle(_a);}};_pTabButtonItemControl.on_destroy_contents=function(){if(this._tabbuttonitemtext){this._tabbuttonitemtext.destroy();this._tabbuttonitemtext=null;}if(this._extrabutton){this._extrabutton.destroy();this._extrabutton=null;}this._tabpage=null;this._extrabutton_iconsize=null;};_pTabButtonItemControl.on_apply_text=function(_a){var _b=this.getElement();if(_b){var _c=this._tabbuttonitemtext;var _d=0;if(this._extrabutton){_d=this._extrabutton._adjust_width;}var _e=this._getClientWidth()-_d;var _f=this._getClientHeight();if(!_a){_a=this._displaytext;}if(!_c){_c=this._tabbuttonitemtext=new nexacro.Static("tabbuttonitemtext",0,0,_e,_f,null,null,null,null,null,null,this);_c._setControl();_c.set_text(_a);_c.createComponent();}else{_c.set_text(_a);_c.move(0,0,_e,_f,null,null);if(!_c._is_created){_c.on_created();}}}};_pTabButtonItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){return _c;};_pTabButtonItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _c;};_pTabButtonItemControl.on_apply_status=function(_a,_b){};_pTabButtonItemControl.on_change_containerRect=function(_a,_b){var _c=this._tabbuttonitemtext;if(_c){var _d=0;if(this._extrabutton){_d=this._extrabutton._getClientWidth();}var _e=this._getClientWidth()-_d;var _f=this._getClientHeight();_c.move(0,0,_e,_f,null,null);}};_pTabButtonItemControl.on_apply_prop_enable=function(_a){var _b=this._extrabutton;if(_b){_b._setEnable(_a);}var _c=this._tabbuttonitemtext;if(_c){_c._setEnable(_a);}};_pTabButtonItemControl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this.parent._tabbutton_obj=this;var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);return _l;};_pTabButtonItemControl._on_focus=function(_a,_b,_c,_d,_e,_f){if(this.parent.tabindex!=this._tabindex){return;}var _g=this._getWindow();var _h=_g._getLastModalFrame();if(_h&&!_h._contains(this)){var _i=this._getParentForm();if(_i){_i._setLastFocus(this);}}else{if(!this.parent._is_changed_focus){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);this._setTabFocusObj(this);}}this.parent._is_changed_focus=false;};_pTabButtonItemControl._setTabFocusObj=function(_a){if(!this._is_alive){return;}this.parent._setTabFocusObj(_a);};_pTabButtonItemControl._getTabFocusObj=function(){if(!this._is_alive){return;}return this.parent._getTabFocusObj();};_pTabButtonItemControl.on_getIDCSSSelector=function(){return "tabbuttonitem";};_pTabButtonItemControl._onload_extra_iconimage=function(_a,_b,_c){if(!this._extrabutton_iconsize){this._extrabutton_iconsize={imageurl:_a,width:_b,height:_c};}else{var _d=this._extrabutton_iconsize;if(_d.imageurl!=_a||_d.width!=_b||_d.height!=_c){this._extrabutton_iconsize={imageurl:_a,width:_b,height:_c};}else{return;}}this.parent._on_get_extrabutton_iconsize(_b,_c);};_pTabButtonItemControl._showExtraButton=function(_a,_b,_c){_a=nexacro._toBoolean(_a);if(_a){var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=_b||_e;var _g=_c||_e;var _h=_d-_f;var _i=(_e-_g)/2;var _j=_f;var _k=_g;if(!this._extrabutton){this._extrabutton=new nexacro._TabExtraButtonControl("extrabutton",0,0,0,0,null,null,null,null,null,null,this);this._extrabutton.createComponent();}else{if(!this._extrabutton.is_created){this._extrabutton.on_created(this._getWindow());}}this._extrabutton.move(_h,_i,_j,_k);}else{if(this._extrabutton){this._extrabutton.destroy();this._extrabutton=null;}}this.on_apply_text();};_pTabButtonItemControl._getItemSize=function(){var _a=0;var _b=0;var _c=this._getCSSStyleValue("padding");var _d=this._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_a=_e+_f+_i;_b=_g+_h+_j;var _k=this._getItemTextSize();if(_k){_a+=_k[0];_b+=_k[1];}return [_a,_b];};_pTabButtonItemControl._getItemTextSize=function(){var _a=[0,0];if(!this._tabbuttonitemtext){return _a;}var _b=this._tabbuttonitemtext;var _c=_b._getCSSStyleValue("padding");var _d=_b._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_a[0]+=_e+_f+_i;_a[1]+=_g+_h+_j;var _k=this._displaytext;var _l=_b._getCurrentStyleInheritValue("font");var _m=_b._getCurrentStyleInheritValue("wordSpacing");var _n=_b._getCurrentStyleInheritValue("letterSpacing");if(_l){var _o,_p=false;if(_k){_o=_k.search("\n");}_p=(_o== -1)?false:true;var _q=nexacro._getTextSize(_k,_l,_p,null,"none",_m,_n);_a[0]+=(Math.ceil(_q[0])|0);_a[1]+=(Math.ceil(_q[1])|0);}return _a;};_pTabButtonItemControl._getExtraButtonSize=function(_a){if(!this._extrabutton){this._extrabutton=new nexacro._TabExtraButtonControl("extrabutton",0,0,0,0,null,null,null,null,null,null,this);this._extrabutton.createComponent();}var _b={width:0,height:0};var _c=this._extrabutton._getCSSStyleValue("padding");var _d=this._extrabutton._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_b.width+=_e+_f+_i;_b.height+=_g+_h+_j;var _k=this._getExtraButtonIconSize();if(_k){_b.width+=_k.width;_b.height+=_k.height;}if(!_a){this._extrabutton.destroy();this._extrabutton=null;}return _b;};_pTabButtonItemControl._getExtraButtonIconSize=function(){var _a=this._extrabutton._getCSSStyleValue("icon");if(_a instanceof Object){_a=_a.value;}if(_a){var _b=this._extrabutton_iconsize;if(_b){var _c=_a;if(_c.substring(0,4).toLowerCase()=="url("){_c=_c.substring(5,_c.length-2);}_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());if(_b.imageurl==_c){return {width:_b.width,height:_b.height};}}var _d=nexacro._getImageSize(_a,this._onload_extra_iconimage,this);if(_d){return {width:_d.width,height:_d.height};}}return null;};delete _pTabButtonItemControl;}if(!nexacro._TabExtraButtonControl){nexacro._TabExtraButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTabExtraButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._TabExtraButtonControl);nexacro._TabExtraButtonControl.prototype=_pTabExtraButtonControl;_pTabExtraButtonControl._type_name="TabExtraButtonControl";_pTabExtraButtonControl._is_subcontrol=true;_pTabExtraButtonControl.on_getIDCSSSelector=function(){return "extrabutton";};delete _pTabExtraButton;}if(!nexacro.FileDialog){nexacro.FileDialogEventInfo=function(_a,_b,_c,_d){this.eventid=_a;this.reason=_b;this.path=_c;this.virtualfiles=_d;};var _pFileDialogEventInfo=nexacro.FileDialogEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.FileDialogEventInfo);_pFileDialogEventInfo._type_name="FileDialogEventInfo";delete _pFileDialogEventInfo;_pFileDialogEventInfo=null;nexacro.FileDialog=function(_a,_b){nexacro._EventSinkObject.call(this,_a);this.EnvironmentPath=1;this._handle=nexacro._createFileDialogHandle(this);};var _pFileDialog=nexacro.FileDialog.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileDialog);_pFileDialog._type_name="FileDialog";_pFileDialog.accept="";_pFileDialog.defaultextension=true;_pFileDialog.dialogtype=undefined;_pFileDialog.filter="";_pFileDialog.filterindex=0;_pFileDialog._event_list={"onclose":1};nexacro.FileDialog.LOAD=1;nexacro.FileDialog.SAVE=2;nexacro.FileDialog.MULTILOAD=3;nexacro.FileDialog.SELFOLDER=4;_pFileDialog.destroy=function(){nexacro._destroyFileDialogHandle(this);this._handle=null;return true;};_pFileDialog.set_accept=function(_a){_a=nexacro._toString(_a);if(this.accept!=_a){this.accept=_a;this.on_apply_accept();}};_pFileDialog.on_apply_accept=function(){nexacro._setFileDialogHandleAccept(this,this.accept);};_pFileDialog.set_defaultextension=function(_a){_a=nexacro._toBoolean(_a);if(this.defaultextension!=_a){this.defaultextension=_a;this.on_apply_defaultextension();}};_pFileDialog.on_apply_defaultextension=function(){nexacro._setFileDialogHandleDefaultExtension(this,this.defaultextension);};_pFileDialog.set_dialogtype=function(_a){if(this.dialogtype!=_a){this.dialogtype=_a;}};_pFileDialog.set_filter=function(_a){_a=nexacro._toString(_a);if(this.filter!=_a){if(this._isValidPropertyFilter(_a)){this.filter=_a;this.on_apply_filter();}}};_pFileDialog.on_apply_filter=function(){nexacro._setFileDialogHandleFilter(this,this.filter);};_pFileDialog.set_filterindex=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this.filterindex!=_a){this.filterindex=_a;this.on_apply_filterindex();}};_pFileDialog.on_apply_filterindex=function(){nexacro._setFileDialogHandleFilterIndex(this,this.filterindex);};_pFileDialog.open=function(_a,_b,_c,_d,_e,_f){if(isNaN(_b= +_b)||(_b<1||_b>4)){return;}_a=_a?_a:this.id;_c=_c?_c:"%USERAPP%";_d=_d?_d:"";_e=_e?_e: -1;_f=_f?_f: -1;var _g=this.filter?this.filter:"All(*.*)|*.*|";var _h=_g.split("|");if(this.filter==""){nexacro._setFileDialogHandleFilter(this,"All(*.*)|*.*|");}if(this.defaultextension&&this.filterindex>=(_h.length/2)){return false;}nexacro._openFileDialogHandle(this,_a,_b,_c,_d,this.dialogtype,_e,_f);return true;};_pFileDialog.on_close=function(_a,_b,_c){this.on_fire_onclose(_a,_b,_c);};_pFileDialog._onclose=function(_a){var _b=_a.virtualfiles;var _c=new Array(_b.length);for(var _e=0;_e<_b.length;_e++ ){var _d=new nexacro.VirtualFile("VirtualFile","");_d.filename=_b[_e].filename;_d.fullpath=_b[_e].fullpath;_d.path=_b[_e].path;_c[_e]=_d;}this.on_fire_onclose(_a.reason,_a.reason==4?_a.path:undefined,_c);};_pFileDialog.on_fire_onclose=function(_a,_b,_c){if(this.onclose&&this.onclose._has_handlers){var _d=new nexacro.FileDialogEventInfo("onclose",_a,_b,_c);return this.onclose._fireEvent(this,_d);}return true;};_pFileDialog._isValidPropertyFilter=function(_a){if(_a===""){return true;}var _b=_a.split("|");var _c=_b.length;if(_c<2){return false;}if((_c%2==1)&&_b[_c-1]!=""){return false;}var _d=/[\*].[a-zA-Z0-9가-힣\*]/gi;for(var _e=0;_e<_c;_e++ ){if(_e%2==1){if(_d.test(_b[_e])==false){return false;}_d.lastIndex=0;}}return true;};delete _pFileDialog;}if(!nexacro.FileDownload){nexacro.FileDownloadEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.targetfullpath=_d;};var _pFileDownloadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileDownloadEventInfo);nexacro.FileDownloadEventInfo.prototype=_pFileDownloadEventInfo;_pFileDownloadEventInfo._type_name="FileDownloadEventInfo";delete _pFileDownloadEventInfo;nexacro.FileDownloadErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileDownloadErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileDownloadErrorEventInfo);nexacro.FileDownloadErrorEventInfo.prototype=_pFileDownloadErrorEventInfo;_pFileDownloadErrorEventInfo._type_name="FileDownloadErrorEventInfo";delete _pFileDownloadErrorEventInfo;nexacro.FileDownload=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileDownload=nexacro._createPrototype(nexacro._IconText,nexacro.FileDownload);nexacro.FileDownload.prototype=_pFileDownload;_pFileDownload._type_name="FileDownload";_pFileDownload.tabstop=true;_pFileDownload.downloadurl="";_pFileDownload.downloadfilename="";_pFileDownload.filefilter="";_pFileDownload.filefilterindex=0;_pFileDownload._is_simple_control=true;_pFileDownload._is_focus_accept=true;_pFileDownload._use_pushed_status=true;_pFileDownload._event_list={"onclick":1,"ondblclick":1,"ondrag":1,"ondragenter":1,"ondragmove":1,"ondragleave":1,"ondrop":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pFileDownload.accessibilityrole="button";_pFileDownload.on_create_contents=function(){nexacro._IconText.prototype.on_create_contents.call(this);nexacro._create_hidden_frame("",this._on_download_onload,this,"filedownload");};_pFileDownload.on_destroy_contents=function(){nexacro._IconText.prototype.on_destroy_contents.call(this);nexacro._destroy_hidden_frame("",this,"filedownload");};_pFileDownload._getDlgCode=function(){return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};_pFileDownload._isFocusAcceptable=function(){return this._is_focus_accept;};_pFileDownload.set_downloadurl=function(_a){if(_a!=this.downloadurl){this.downloadurl=_a;}};_pFileDownload.set_downloadfilename=function(_a){if(_a!=this.downloadfilename){this.downloadfilename=_a;}};_pFileDownload.set_filefilter=function(_a){this.filefilter=_a;};_pFileDownload.set_filefilterindex=function(_a){this.filefilterindex=_a;};_pFileDownload.download=function(_a,_b){var _c=null;var _d=this.downloadurl;var _e=this.downloadfilename;if(_b!=undefined){_b=nexacro._toString(_b);}var _f=this._getOwnerFrame();var _g=_f?_f._is_popup_frame:false;if(_a!=undefined){_a=nexacro._toString(_a);_a=nexacro._getImageLocation(_a);_c=nexacro._download(_a,_g,this._hidden_frame_handle,_e,_b,this.filefilter,this.filefilterindex);}else if(_d!=undefined&&_d!=""){_d=nexacro._getServiceLocation(_d);_c=nexacro._download(_d,_g,this._hidden_frame_handle,_e,_b,this.filefilter,this.filefilterindex);}return _c===null?false:true;};_pFileDownload._on_download_onload=function(_a,_b,_c,_d,_e,_f,_g){if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null,_g);var _h=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);this.on_fire_onerror(this,"ObjectError",_h.message,this,9901,null,null);}else{this.on_fire_onsuccess(_c,_b);}};_pFileDownload.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);if(_a==13||_a==32){this.on_fire_onclick("none",false,false,false, -1, -1, -1, -1, -1, -1,this,this);}return _h;};_pFileDownload.on_fire_onsuccess=function(_a,_b){var _c=nexacro.getApplication();if(_c){_c._endCommProgress();}if(this.onsuccess&&this.onsuccess._has_handlers&&_a!=""){var _d=new nexacro.FileDownloadEventInfo(this,"onsuccess",_a,_b);return this.onsuccess._fireEvent(this,_d);}};_pFileDownload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.getApplication();if(_h){_h._endCommProgress();}if(this.onerror&&this.onerror._has_handlers){var _i=new nexacro.FileDownloadErrorEventInfo(_a,"onerror",_b,_c,_d,_e,_f,_g);return this.onerror._fireEvent(this,_i);}};_pFileDownload.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=nexacro.Component.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.download();return _n;};delete _pFileDownload;}if(!nexacro.FileDownTransfer){nexacro.FileDownTransferEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.targetfullpath=_d;};var _pFileDownTransferEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileDownTransferEventInfo);nexacro.FileDownTransferEventInfo.prototype=_pFileDownTransferEventInfo;_pFileDownTransferEventInfo._type_name="FileDownTransferEventInfo";delete _pFileDownTransferEventInfo;nexacro.FileDownTransferErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileDownTransferErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileDownTransferErrorEventInfo);nexacro.FileDownTransferErrorEventInfo.prototype=_pFileDownTransferErrorEventInfo;_pFileDownTransferErrorEventInfo._type_name="FileDownTransferErrorEventInfo";delete _pFileDownTransferErrorEventInfo;nexacro.FileDownTransfer=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this.postdatalist=new nexacro.Collection();};var _pFileDownTransfer=nexacro.FileDownTransfer.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileDownTransfer);_pFileDownTransfer._type_name="FileDownTransfer";_pFileDownTransfer.url="";_pFileDownTransfer.downloadfilename="";_pFileDownTransfer._event_list={"onsuccess":1,"onerror":1};_pFileDownTransfer.destroy=function(){this.postdatalist=null;return true;};_pFileDownTransfer.set_postdatalist=nexacro._emptyFn;_pFileDownTransfer.set_url=function(_a){if(this.url!=_a){this.url=_a;}};_pFileDownTransfer.set_downloadfilename=function(_a){if(this.downloadfilename!=_a){this.downloadfilename=_a;}};_pFileDownTransfer.setPostData=function(_a,_b){if(!_a){return;}this.postdatalist.setItem(_a,_b);};_pFileDownTransfer.removePostData=function(_a){this.postdatalist.delete_item(_a);};_pFileDownTransfer.getPostData=function(_a){return this.postdatalist.getItem(_a);};_pFileDownTransfer.clearPostDataList=function(){this.postdatalist.clear();};_pFileDownTransfer.download=function(_a,_b){_a=_a?nexacro._getImageLocation(_a):(this.url?nexacro._getServiceLocation(this.url,null,null,false):"");_b=nexacro._toString(_b);if(!_a){return;}var _c={};for(var _d=0,_e=this.postdatalist.length;_d<_e;_d++ ){_c[this.postdatalist._idArray[_d]]=this.postdatalist[_d];}nexacro._downloadTransfer(_c,_a,_b,this);};_pFileDownTransfer.on_load=function(_a,_b,_c,_d,_e,_f,_g){if(_b){if(!nexacro._isArray(_b)){if(_a<0){return this.on_fire_onerror("ObjectError",_f,this,_e,_c,_c);}else{return this.on_fire_onsuccess(_c,_b);}}else{}}return this.on_fire_onerror("ObjectError","fail to get",this,9901,_c,_c);};_pFileDownTransfer.on_error=function(_a,_b,_c,_d){this.on_fire_onerror("ObjectError",_d,this,_c,_a,_a);};_pFileDownTransfer.on_fire_onsuccess=function(_a,_b){if(this.onsuccess&&this.onsuccess._has_handlers){var _c=new nexacro.FileDownTransferEventInfo(this,"onsuccess",_a,_b);this.onsuccess._fireEvent(this,_c);}};_pFileDownTransfer.on_fire_onerror=function(_a,_b,_c,_d,_e,_f){if(this.onerror&&this.onerror._has_handlers){var _g=new nexacro.FileDownTransferErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f);return this.onerror._fireEvent(this,_g);}return true;};_pFileDownTransfer._getForm=function(){if(this.parent instanceof nexacro.Form){return this.parent;}return null;};delete _pFileDownTransfer;}if(!nexacro.FileUpload){nexacro.FileUploadItemEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onfileuploaditem";this.fromobject=this.fromreferenceobject=_a;this.index=_c;};var _pEventFileUploadItemEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadItemEventInfo);nexacro.FileUploadItemEventInfo.prototype=_pEventFileUploadItemEventInfo;_pEventFileUploadItemEventInfo._type_name="FileUploadItemEventInfo";delete _pEventFileUploadItemEventInfo;nexacro.FileUploadMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){this.id=this.eventid=_b||"onmouse";this.fromobject=_n;this.fromreferenceobject=_o;this.altkey=_d||false;this.ctrlkey=_e||false;this.shiftkey=_f||false;this.metakey=_p||false;this.button=_c||"";this.index=_g;this.screenx=_h|| -1;this.screeny=_i|| -1;this.canvasx=_j|| -1;this.canvasy=_k|| -1;this.clientx=_l|| -1;this.clienty=_m|| -1;};var _pFileUploadMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadMouseEventInfo);nexacro.FileUploadMouseEventInfo.prototype=_pFileUploadMouseEventInfo;_pFileUploadMouseEventInfo._type_name="FileUploadMouseEventInfo";_pFileUploadMouseEventInfo._xposConvertToRtl=function(_a,_b){if(_a&&_a._isRtl&&_a._isRtl()){this._orgcanvasx=this.canvasx;this._orgcliendx=this.clientx;this.canvasx=nexacro._getRTLCanvasXForMouseEvent(_a,_b,this.canvasx);this.clientx=_a._getClientXY(this.canvasx,this.canvasy)[0];return true;}return false;};_pFileUploadMouseEventInfo._xposConvertToLtr=function(_a){if(_a&&_a._isRtl&&_a._isRtl()){this.canvasx=this._orgcanvasx;this.clientx=this._orgclientx;delete this._orgcanvas;delete this._orgclientx;}};delete _pFileUploadMouseEventInfo;nexacro.FileUploadContextMenuEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.ContextMenuEventInfo.call(this,_a,_b,_n,_o,_c,_d,_e,_f,_h,_i,_j,_k,_l,_m,_p);this.index=_g;};var _pFileUploadContextMenuEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.FileUploadContextMenuEventInfo);nexacro.FileUploadContextMenuEventInfo.prototype=_pFileUploadContextMenuEventInfo;_pFileUploadContextMenuEventInfo._type_name="FileUploadContextMenuEventInfo";delete _pFileUploadContextMenuEventInfo;nexacro.FileUploadEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.datasets=_c;this.errorcode=_d;this.errormsg=_e;this.url=_f;};var _pFileUploadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadEventInfo);nexacro.FileUploadEventInfo.prototype=_pFileUploadEventInfo;_pFileUploadEventInfo._type_name="FileUploadEventInfo";delete _pFileUploadEventInfo;nexacro.FileUploadItemChangeEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onitemchanged";this.fromobject=this.fromreferenceobject=_a;this.index=_a.index;this.oldvalue=_d;this.newvalue=_e;};var _pFileUploadItemChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadItemChangeEventInfo);nexacro.FileUploadItemChangeEventInfo.prototype=_pFileUploadItemChangeEventInfo;_pFileUploadItemChangeEventInfo._type_name="FileUploadItemChangeEventInfo";delete _pFileUploadItemChangeEventInfo;nexacro.FileUploadErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this.index=_i;};var _pFileUploadErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUploadErrorEventInfo);nexacro.FileUploadErrorEventInfo.prototype=_pFileUploadErrorEventInfo;_pFileUploadErrorEventInfo._type_name="FileUploadErrorEventInfo";delete _pFileUploadErrorEventInfo;nexacro.FileUpload=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this.filelist=[];this.filepathedits=new nexacro.Collection();this.filefindbuttons=new nexacro.Collection();this._items=[];this.context=this._refform;};var _pFileUpload=nexacro._createPrototype(nexacro.Component,nexacro.FileUpload);nexacro.FileUpload.prototype=_pFileUpload;_pFileUpload._type_name="FileUpload";_pFileUpload.buttonsize=undefined;_pFileUpload.buttontext="find";_pFileUpload.index= -1;_pFileUpload.itemcount=1;_pFileUpload.itemheight=undefined;_pFileUpload.multiselect=false;_pFileUpload.text="";_pFileUpload.uploadurl="";_pFileUpload.value=undefined;_pFileUpload.filefilter="";_pFileUpload.filefilterindex=0;_pFileUpload._hidden_frame_handle=null;_pFileUpload._last_id= -1;_pFileUpload._bresetscroll=0;_pFileUpload._onPopupWin=false;_pFileUpload._is_listtype=true;_pFileUpload._calc_scroll=false;_pFileUpload._cnt_resetscroll=0;_pFileUpload._iscors=false;_pFileUpload._is_scrollable=true;_pFileUpload.accessibilityaction="";_pFileUpload.accessibilityrole="fileupload";_pFileUpload.accessibilitydesclevel="all";_pFileUpload.accessibilitydescription="";_pFileUpload.accessibilityenable=true;_pFileUpload.accessibilitylabel="";_pFileUpload.buttonaccessibilityaction="";_pFileUpload.buttonaccessibilityrole="";_pFileUpload.buttonaccessibilitydesclevel="all";_pFileUpload.buttonaccessibilitydescription="";_pFileUpload.buttonaccessibilityenable=true;_pFileUpload.buttonaccessibilitylabel="";_pFileUpload.editaccessibilityaction="";_pFileUpload.editaccessibilityrole="";_pFileUpload.editaccessibilitydesclevel="all";_pFileUpload.editaccessibilitydescription="";_pFileUpload.editaccessibilityenable=true;_pFileUpload.editaccessibilitylabel="";_pFileUpload._want_tab=true;_pFileUpload._want_arrow=false;_pFileUpload._first_focus=false;_pFileUpload._editFlag=null;_pFileUpload._buttonFlag=false;_pFileUpload._event_list={"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"oncontextmenu":1,"onappenditem":1,"ondeleteitem":1,"onitemclick":1,"onfindclick":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pFileUpload.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;var _c=this._items;var _d=this.itemcount;for(var _e=0;_e<_d;_e++ ){_b=this._createFileItem(_e,0,0,0,0,true);this.filepathedits.add_item(_b.id,_b.fileitemedit);this.filefindbuttons.add_item(_b.id,_b.fileitembutton);_c[_e]=_b;}}};_pFileUpload.on_created_contents=function(){nexacro._create_hidden_frame(this._unique_id,this._on_manager_onload,this,"fileupload");if(!this.context){this.context=this._refform;}this.on_apply_index(this.index);this.on_apply_prop_enable(this._isEnable());this._recalcLayout();var _a;var _b=this._items;var _c=this.itemcount;for(var _d=0;_d<_c;_d++ ){_a=_b[_d];_a.on_created();_a._setEventHandler("onfindclick",this._on_item_onfindclick,this);_a._setEventHandler("onitemclick",this._on_item_onitemclick,this);if(nexacro._enableaccessibility){_a._setAccessibilityInfoIndex(_d+1);_a._setAccessibilityInfoCount(_c);}}this._buttonFlag=true;if(nexacro._enableaccessibility){this.on_apply_editaccessibility();this.on_apply_buttonaccessibility();}this._onRecalcScrollSize();};_pFileUpload.on_destroy_contents=function(){var _a=this._items;var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();}this.filelist=null;this._items=null;this.filepathedits.clear();this.filepathedits=null;this.filefindbuttons.clear();this.filefindbuttons=null;nexacro._destroy_hidden_frame(this._unique_id,this,"fileupload");};_pFileUpload.on_create_contents_command=function(){this.on_apply_index(this.index);this.on_apply_prop_enable(this._isEnable());this._recalcLayout();var _a="";var _b=this._items;var _c=this.itemcount;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}return _a;};_pFileUpload.on_attach_contents_handle=function(_a){nexacro._create_hidden_frame(this._unique_id,this._on_manager_onload,this,"fileupload");var _b;var _c=this._items;var _d=this.itemcount;for(var _e=0;_e<_d;_e++ ){_b=_c[_e];_b.attachHandle(_a);_b._setEventHandler("onfindclick",this._on_item_onfindclick,this);_b._setEventHandler("onitemclick",this._on_item_onitemclick,this);if(nexacro._enableaccessibility){_b._setAccessibilityInfoIndex(_e+1);_b._setAccessibilityInfoCount(_d);}if(this.index==_e){if(this._editFlag){_b.fileitemedit.setFocus(false);}if(this._buttonFlag){_b.fileitembutton.setFocus(false);}this.value=_b.value;}}this._buttonFlag=true;if(nexacro._enableaccessibility){this.on_apply_editaccessibility(this.editaccessibility);this.on_apply_buttonaccessibility(this.buttonaccessibility);}if(this.multiselect){this.on_apply_multiselect(this.multiselect);}this._onRecalcScrollSize();};_pFileUpload.on_change_containerRect=function(_a,_b){if(this._is_created_contents){this._recalcLayout();if(!this._calc_scroll){this._onRecalcScrollSize();}else{this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pFileUpload.on_change_containerPos=function(_a,_b){};_pFileUpload._apply_setfocus=function(_a){var _b=nexacro._enableaccessibility;var _c=((_a=="lbutton")?false:_b);var _d=this._items;if(_d.length< -1||_b){var _e=this._control_element;if(_e){_e.setElementFocus(_c);}}else{var _f=_d[this.index];if(_f){_f.fileitembutton._control_element.setElementFocus(_c);}}};_pFileUpload.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);_b[_d].fileitemedit._setEnable(_a);_b[_d].fileitembutton._setEnable(_a);}};_pFileUpload._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this.itemcount* this._getItemHeight();if(_c>this._getClientHeight()){var _d=this.vscrollbar;if(_d){if(!_d.visible){_b-=_d._getClientWidth();}}else{_b-=this._getVScrollBarSize();}}this._calc_scroll=true;_a.setElementScrollMaxSize(_b,_c);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pFileUpload._on_getAccessibilityAdditionalLabel=function(){if(this._first_focus==false){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this.index)+1+" "+_a;}return "";};_pFileUpload._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_tab;this._want_tab=true;this._want_arrow=this._want_arrow&&this._isEnable();return {want_tab:_e,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pFileUpload._isAccessibilityEnable=function(){return true;};_pFileUpload.set_text=nexacro._emptyFn;_pFileUpload.set_value=nexacro._emptyFn;_pFileUpload.set_buttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.buttonsize!=_a){this.buttonsize=_a;this.on_apply_buttonsize(_a);}};_pFileUpload.on_apply_buttonsize=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]){_b[_d]._recalcLayout();}}};_pFileUpload.set_buttontext=function(_a){if(this.buttontext!=_a){this.buttontext=_a;this.on_apply_buttontext(_a);}};_pFileUpload.on_apply_buttontext=function(_a){var _b;var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_b=_c[_e].fileitembutton;if(_b){_b.set_text(_a);}}};_pFileUpload.set_index=function(_a){if(isNaN(_a= +_a)||_a< -1){return;}if(this.index!=_a){this.index=_a;this.on_apply_index(_a);this._setAccessibilityStatSelected(_a);}};_pFileUpload.on_apply_index=function(_a){var _b=this.getElement();if(_b){var _c=this._items[_a];if(_c){if(this._editFlag){_c.fileitemedit.setFocus(false);}if(this._buttonFlag){_c.fileitembutton.setFocus(false);}this.value=_c.value;}}};_pFileUpload.set_itemcount=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this.itemcount!=_a){var _b=this.itemcount;this.itemcount=_a;this.on_apply_itemcount(_a,_b);}};_pFileUpload.on_apply_itemcount=function(_a,_b){var _c=this.getElement();if(_c){var _d;var _e=this._items;var _f=_e.length;if(_f){while(_b>_a){_b-- ;_e.pop().destroy();}}for(var _g=_f;_g<_a;_g++ ){_d=this._items[_g]=this._createFileItem(_g);this.filepathedits.add_item(_d.id,_d.fileitemedit);this.filefindbuttons.add_item(_d.id,_d.fileitembutton);}this._recalcLayout();this._onRecalcScrollSize();}};_pFileUpload.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this.itemheight!=_a){this.itemheight=_a;this.on_apply_itemheight(_a);}};_pFileUpload.on_apply_itemheight=function(_a){this._recalcLayout();this._onRecalcScrollSize();};_pFileUpload.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(this.multiselect!=_a){this.multiselect=_a;this.on_apply_multiselect(_a);}};_pFileUpload.on_apply_multiselect=function(_a){var _b=this.getElement();if(_b){var _c;var _d=this._items;var _e=_d.length;var _f=this._unique_id;for(var _g=0;_g<_e;_g++ ){_c=_d[_g];nexacro._setMultipleFile(_f,_c.name,_a,_c);}}};_pFileUpload.set_uploadurl=function(_a){if(this.uploadurl!=_a){this.uploadurl=_a;}};_pFileUpload.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this.on_apply_editaccessibility();this.on_apply_buttonaccessibility();};_pFileUpload.on_apply_editaccessibility=function(){var _a=this._items.length;var _b=null;var _c=this.editaccessibilityrole;var _d=this.editaccessibilitylabel;var _e=this.editaccessibilitydesclevel;var _f=this.editaccessibilitydescription;var _g=this.editaccessibilityenable;var _h=this.editaccessibilityaction;for(var _j=0;_j<_a;_j++ ){_b=this._getItem(_j);var _i=_b.fileitemedit;if(_i){if(_c){_i.set_accessibilitydescrole(_c);}if(_d){_i.set_accessibilitydesclabel(_d);}if(_e){_i.set_accessibilitydesclevel(_e);}if(_h){_i.set_accessibilityaction(_h);}if(_f){_i.set_accessibilitydesclevel(_f);}_i.set_accessibilityenable(_g);}}};_pFileUpload.on_apply_buttonaccessibility=function(_a){var _b=this._items.length;var _c=null;var _d=this.editaccessibilityrole;var _e=this.editaccessibilitylabel;var _f=this.editaccessibilitydesclevel;var _g=this.editaccessibilitydescription;var _h=this.editaccessibilityenable;var _i=this.editaccessibilityaction;for(var _k=0;_k<_b;_k++ ){_c=this._getItem(_k);var _j=_c.fileitembutton;if(_j){if(_d){_j.set_accessibilitydescrole(_d);}if(_e){_j.set_accessibilitydesclabel(_e);}if(_f){_j.set_accessibilitydesclevel(_f);}if(_i){_j.set_accessibilityaction(_i);}if(_g){_j.set_accessibilitydesclevel(_g);}_j.set_accessibilityenable(_h);}}};_pFileUpload.set_filefilter=function(_a){this.filefilter=_a;};_pFileUpload.set_filefilterindex=function(_a){this.filefilterindex=_a;};_pFileUpload.appendItem=function(){var _a=this.getElement();if(_a){var _b=this.itemcount;var _c=this._items[_b]=this._createFileItem(_b);this.filepathedits.add_item(_c.id,_c.fileitemedit);this.filefindbuttons.add_item(_c.id,_c.fileitembutton);this.itemcount++ ;if(nexacro._enableaccessibility){_c._setAccessibilityInfoIndex(_b);_c._setAccessibilityInfoCount(_b+1);}this._recalcLayout();this._onRecalcScrollSize();this.on_fire_onappenditem(this,_b);}};_pFileUpload.deleteItem=function(_a){if(_a<0){return;}var _b=this.index;var _c=this.getElement();if(_c){_a=parseInt(_a,10);var _d=this._items;if(this.itemcount<=_a){return;}var _e=this.itemcount;var _f=_e-1;for(var _g=_a+1;_g<_e;_g++ ){if(_b==_g){this.index-- ;}_d[_g].index-- ;if(nexacro._enableaccessibility){_d[_g]._setAccessibilityInfoIndex(_g);_d[_g]._setAccessibilityInfoCount(_f);}}_d[_a].destroy();_d.splice(_a,1);if(_b==_a){this.index= -1;this.value=undefined;this._setText("");}this.itemcount-- ;this._recalcLayout();this._onRecalcScrollSize();this.on_fire_ondeleteitem(this,_a);this._updateFileList();}};_pFileUpload.changeItem=function(_a,_b){if(nexacro._Browser=="Runtime"&&nexacro._OS!="Android"){var _c=this.getElement();if(_c){_a=parseInt(_a,10);if(this.itemcount<=_a){return;}var _d=this._items[_a];var _e;var _f=_b.length;var _g=new Array();if(_f>0){_e="";for(var _l=0;_l<_f;_l++ ){var _h=_b[_l];_h=_h.split("/").join("\\");var _i=_h.lastIndexOf("\\");var _j="";if(_i>0){_j=_h.substring(0,_i+1);}var _k=this._getWindow();if(nexacro._isTrustPath(_k,_j)){_e+=(_g.length>0?", ":"")+_b[_l];_g.push(_b[_l]);}}}if(_e!=_d.value){_d.oldvalue=_d.value;_d.value=_e;_d._changeFiles(_g);if(_d.fileitemedit){_d.fileitemedit.set_value(_e);}if(((this.index== -1)?0:this.index)==_a){_d.parent._setText(_e);_d.parent._setValue(_e);}_d.parent.on_fire_onitemchanged(_d,_a,_d.oldvalue,_d.value,_b);}_g.length=0;}}};_pFileUpload.getItemCount=function(_a){var _b=this.getElement();if(_b){_a=nexacro._toBoolean(_a);var _c=0;var _d=0;var _e=this._items;var _f=_e.length;while(_d<_f){if(_a==true){if(_e[_d].value){_c++ ;}}else{return _f;}++ _d;}return _c;}};_pFileUpload.getItemIndex=function(_a){var _b=this.getElement();if(_b){if(typeof _a=="object"){var _c=0;var _d=this._items;while(_c<_d.length){if(_a==_d[_c].fileitembutton){return _c;}if(_a==_d[_c].fileitemedit){return _c;}++ _c;}return  -1;}}};_pFileUpload.hasValue=function(_a){var _b=this.getElement();if(_b){var _c=0,_d=0;var _e=this._items;if(_a== -1){while(_c<_e.length){if(_e[_c].value){ ++_d;}++ _c;}if(_d==_e.length){return true;}return false;}if(_a<_e.length&&_e[_a].value){return true;}return false;}};_pFileUpload.upload=function(_a){var _b=false;var _c;if(_a==undefined){if(this.uploadurl){_c=nexacro._getServiceLocation(this.uploadurl,null,null,false);}}else{_c=nexacro._getServiceLocation(_a,null,null,false);}if(nexacro._Browser!="Runtime"){if(!nexacro._isSameOrigin(_c,nexacro._project_url)){this._iscors=true;}}if(_c){var _d=this._items;var _e=_d?_d.length:0;var _f;if(nexacro._Browser=="Runtime"&&nexacro._OS!="Android"){var _g=false;var _h=0;var _i=[];var _j=0;for(_f=0;_f<_e;_f++ ){if(_d[_f]._files){var _k=_d[_f]._files.length;while(_k>0){_k-- ;_d[_f]._files[_k].id="upfile"+_h;_h++ ;if(_d[_f]._files[_k] instanceof nexacro.VirtualFile){_g=true;}}_i[_j]=_d[_f]._files;_j++ ;}}for(_f=0;_f<_e;_f++ ){if(_d[_f]&&_d[_f].value){if(_g==true){nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_d[_f].value,_i);}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_d[_f].value);}return true;}}}else if(nexacro._Browser=="Runtime"&&nexacro._OS=="Android"){if(_e>1){var _i=[];var _j=0;for(_f=0;_f<_e;_f++ ){if(_d[_f]._files){_i[_j]=_d[_f]._files;_j++ ;}}nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_d[0].value,_i);_b=true;}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_d[0].value);_b=true;}}else if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){var _l=this;var _m=function(){return function(_o,_p,_q,_r,_s,_t,_u){var _v;var _w= -1;var _x="fail to get";try{if(_o==4){}else{if(_p){_p=_p.trimLeft();var _y=_p.slice(0,5).toUpperCase();if(_y.indexOf("<?XML")==0){_y="XML";}if(_y.indexOf("SSV")==0){_y="SSV";}if(_y.indexOf("{")==0){_y="JSON";}if(_y=="XML"){_p=nexacro._parseXMLDocument(_p);}if(nexacro._Deserializer[_y]){_v=nexacro._Deserializer[_y](_p);}var _z=_v?_v[0]:null;if(_z){_w=_z["ErrorCode"];_x=_z["ErrorMsg"];}else{_x=_p;}if(_w<0){_l.on_fire_onerror(_l,"ObjectError",_x,_l,9901,null,null, -1);}else{_l.on_fire_onsuccess(_v[1],_w,_x,_q,_v);}}}}catch(e){if(e&&e.message){_x=e.message;}_l.on_fire_onerror(_l,"ObjectError",_x,_l,9901,null,null, -1);}};};var _i=[];var _n=0;for(_f=0;_f<_e;_f++ ){if(_d[_f].value&&_d[_f]._files){for(var _o in _d[_f]._files){_i[_n++ ]=_d[_f]._files[_o];}}}if(_i.length>0){nexacro._uploadTransferXHR(_i,"",_c,_m());_b=true;}}else{for(_f=0;_f<_e;_f++ ){if(_d[_f].value){_b=true;if(nexacro._Browser=="MobileSafari"||nexacro._Browser=="Gecko"){nexacro._request_submit(this._unique_id,_c,this);}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_d[_f].value);}break;}}}}return _b;};if(nexacro._Browser=="Runtime"){_pFileUpload._on_manager_onload=function(_a,_b,_c,_d,_e,_f,_g){var _h;var _i= -1;var _j="fail to get";if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null);var _k=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);this.on_fire_onerror(this,"ObjectError",_k.message,this,_e,null,null, -1);}else{try{if(_b){_b=_b.trimLeft();var _l=_b.slice(0,5).toUpperCase();if(_l.indexOf("<?XML")==0){_l="XML";}if(_l.indexOf("SSV")==0){_l="SSV";}if(_l.indexOf("{")==0){_l="JSON";}if(_l=="XML"){_b=nexacro._getXMLDocument(this._unique_id,_b,_c);}if(nexacro._Deserializer[_l]){_h=nexacro._Deserializer[_l](_b);}var _m=_h?_h[0]:null;if(_m){_i=_m["ErrorCode"];_j=_m["ErrorMsg"];}if(_i<0){this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null, -1);}else{this.on_fire_onsuccess(_h[1],_i,_j,_c,_h);}}else if(_a!=4){this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null, -1);}}catch(e){if(e&&e.message){_j=e.message;}this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null, -1);}}};}else{_pFileUpload._bindUploadDataHandler=function(_a){var _b=this._comp;if(this.readyState==4){var _c;var _d= -1;var _e="fail to get";if(this.status==200){var _f=this.responseText.trim();var _g=_f.slice(0,5).toUpperCase();if(_g.indexOf("<?XML")==0){_g="XML";}if(_g.indexOf("SSV")==0){_g="SSV";}if(_g.indexOf("{")==0){_g="JSON";}if(_g=="XML"){_f=this.responseXML;}if(nexacro._Deserializer[_g]){_c=nexacro._Deserializer[_g](_f);}var _h=_c?_c[0]:null;if(_h){_d=_h["ErrorCode"];_e=_h["ErrorMsg"];}if(_d<0){_b.on_fire_onerror(_b,"ObjectError",_e,_b,9901,null,null, -1);}else{_b.on_fire_onsuccess(_c[1],_d,_e,this.responseURL,_c);}}else{_b.on_fire_onerror(_b,"ObjectError",_e,_b,9901,null,null, -1);}}};_pFileUpload._on_manager_onload=function(_a,_b,_c,_d,_e,_f){var _g,_h,_i;var _j= -1;var _k="fail to get";try{if(this._iscors){nexacro._setPostMessage(this._unique_id,this);this._iscors=false;}else{_h=nexacro._getXMLDocument(this._unique_id,_b,_c);if(_h){_c=_h.URL?_h.URL:_c;if(_c=="about:blank"){return;}this.context=this.parent;var _l=nexacro._getContentType(_h);if(_l=="XML"){_b=_h;_i="XML";}else{_b=nexacro._getDataFromDOM(_h,this).trimLeft();_i=_b.substring(0,5).toUpperCase();if(_i.indexOf("<?XML")==0){_i="XML";}if(_i.indexOf("SSV")==0){_i="SSV";}if(_i.indexOf("{")==0){_i="JSON";}}if(nexacro._Deserializer[_i]){_g=nexacro._Deserializer[_i](_b);}var _m=_g?_g[0]:null;if(_m){_j=_m["ErrorCode"];_k=_m["ErrorMsg"];}else{_k=_b;}if(_j<0){this.on_fire_onerror(this,"ObjectError",_k,this,9901,null,null, -1);}else{this.on_fire_onsuccess(_g[1],_j,_k,_c,_g);}}}}catch(e){if(e&&e.message){_k=e.message;}this.on_fire_onerror(this,"ObjectError",_k,this,9901,null,null, -1);}};}_pFileUpload.on_after_load=function(_a){var _b=_a.message;var _c,_d,_e;var _f= -1;var _g="failed to get";var _h="";try{_e=_b.slice(0,5).toUpperCase();if(_e.indexOf("SSV")==0){_h=_b;_e="SSV";}else if(_e.indexOf("{")==0){_h=_b;_e="JSON";}else{var _i=nexacro.trimLeft(decodeURIComponent(_b.replace(/\+/g," ")));var _j=nexacro._parseXMLDocument(_i);_d=_j.URL?_j.URL:_j.url;if(_d=="about:blank"){return;}this.context=this.parent;if(nexacro._getContentType(_j)=="XML"){_h=_j;_e="XML";}else{_h=nexacro._getDataFromDOM(_j,this).trimLeft();_e=_h.substring(0,5).toUpperCase();if(_e.indexOf("SSV")==0){_e="SSV";}else if(_e.indexOf("{")==0){_e="JSON";}}}if(nexacro._Deserializer[_e]){_c=nexacro._Deserializer[_e](_h);}var _k=_c?_c[0]:null;if(_k){_f=(_k["ErrorCode"]!=null)?_k["ErrorCode"]: -1;_g=(_k["ErrorMsg"]!=null)?_k["ErrorMsg"]:"";}else{_g=_h;}if(_f<0){this.on_fire_onerror(this,"ObjectError","failed to get",this,9901,null,null, -1);}else{this.on_fire_onsuccess(_c[1],_f,_g,_d,_c);}delete this.context;}catch(e){this.on_fire_onerror(this,"ObjectError",_g,this,9901,null,null, -1);}};_pFileUpload._setParamter=nexacro._emptyFn;_pFileUpload._on_item_onfindclick=function(_a,_b){this.set_index(_a.index);var _c=false;var _d=nexacro._indexOf(this._items,_a);if(this._isEnable()&&this.enableevent){_c=this.on_fire_onfindclick(_a,_d);if(_c){try{nexacro._findclick(this._unique_id,_a.name,_a,this._hidden_frame_handle,this.filefilter,this.filefilterindex);}catch(_b){var _e=nexacro.MakeError("ObjectError",this,"comp_incorrect_file");this.on_fire_onerror(this,_e.name,_e.message,_a,null,null,null,_d);}}}return _c;};_pFileUpload._on_item_onitemclick=function(_a,_b){this.set_index(_a.index);if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_onitemclick(_a,_a.index);}};_pFileUpload._on_getAccessibilityAdditionalLabel=function(){if(this._first_focus==false){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this.index)+1+" "+_a;}return "";};_pFileUpload._isAccessibilityEnable=function(){return true;};_pFileUpload.on_get_accessibility_label=function(){var _a="";return _a;};_pFileUpload.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=this.index;var _e=this._items;while(true){if(_a){if(!this._buttonFlag&&_e[_d].fileitembutton._isAccessibilityEnable()){this._editFlag=false;this._buttonFlag=true;}else{if(_e[ ++_d]){this._editFlag=true;this._buttonFlag=false;if(!_e[_d].fileitemedit._isAccessibilityEnable()){continue;}}else{this._editFlag=false;this._buttonFlag=false;return this._want_arrow=false;}}}else{if(!this._editFlag&&_e[_d].fileitemedit._isAccessibilityEnable()){this._editFlag=true;this._buttonFlag=false;}else{if(_e[ --_d]){this._editFlag=false;this._buttonFlag=true;if(!_e[_d].fileitembutton._isAccessibilityEnable()){continue;}}else{this._editFlag=false;this._buttonFlag=false;return this._want_arrow=false;}}}break;}if(_e[_d]){if(this._editFlag){_e[_d].fileitemedit._setAccessibilityNotifyEvent();}else if(this._buttonFlag){_e[_d].fileitembutton._setAccessibilityNotifyEvent();}this.index=_d;this.value=_e[_d].value;return this._want_arrow=true;}else{return this._want_arrow=false;}};_pFileUpload._setAccessibilityNotifyEvent=function(_a){this._editFlag=false;this._buttonFlag=false;var _b;var _c=this._items;var _d=_c.length;if(_d){if(_a){_b=0;if(_c[_b]&&_c[_b].fileitemedit._isAccessibilityEnable()){this._editFlag=true;}else if(_c[_b]&&_c[_b].fileitembutton._isAccessibilityEnable()){this._buttonFlag=true;}}else{_b=_d-1;if(_c[_b]&&_c[_b].fileitembutton._isAccessibilityEnable()){this._buttonFlag=true;}else if(_c[_b]&&_c[_b].fileitemedit._isAccessibilityEnable()){this._editFlag=true;}}if(this._buttonFlag||this._editFlag){if(this._editFlag){_c[_b].fileitemedit._setAccessibilityNotifyEvent();}else if(this._buttonFlag){_c[_b].fileitembutton._setAccessibilityNotifyEvent();}this.index=_b;this.value=_c[_b].value;return this._want_arrow=true;}}this._want_arrow=false;return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);};_pFileUpload._setAccessibilityInfoByHover=function(_a){if(_a){this._editFlag=false;this._buttonFlag=false;var _b=_a.parent;if(_a instanceof nexacro.FileItemEditCtrl){this._editFlag=true;}else if(_a instanceof nexacro.FileItemButtonCtrl){this._buttonFlag=true;}this.index=_b.index;this._want_arrow=true;_a._setAccessibilityNotifyEvent();return true;}return false;};_pFileUpload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this.onerror&&this.onerror._has_handlers){var _i=new nexacro.FileUploadErrorEventInfo(_a,"onerror",_b,_c,_d,_e,_f,_g,_h);return this.onerror._fireEvent(this,_i);}return true;};_pFileUpload.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.FileUploadMouseEventInfo(this,"onlbuttondown",_a,_b,_c,_d,_n.index,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onlbuttondown._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.FileUploadMouseEventInfo(this,"onlbuttonup",_a,_b,_c,_d,_o.index,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pFileUpload.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._items;var _i=this.index;var _j=nexacro.Event;if(_a==_j.KEY_TAB){if((_d&&_i==0)||(!_d&&_i==_h.length-1)){this._want_tab=false;this.set_index( -1);}else{if(_d){_i-- ;}else{_i++ ;}this.set_index(_i);}this._getWindow()._keydown_element._event_stop=true;}else{if(nexacro._enableaccessibility){var _k=_a==_j.KEY_UP;var _l=_a==_j.KEY_DOWN;var _m=this.accessibilityenable;var _n=this.buttonaccessibilityenable;var _o=this.editaccessibilityenable;if(_k||_l){var _p=this._getWindow();if((_k&&_i<0)||(_l&&this._buttonFlag&&_i==_h.length-1)){this._want_arrow=false;}else{if(_o||_n){while(true){if(_k){if(!this._editFlag&&_o){this.index= -1;this._editFlag=true;this._buttonFlag=false;}else{_i-- ;if(_n){if(_i<0){if(_m){this._editFlag=false;this._buttonFlag=false;_p._removeFromCurrentFocusPath(this,false);this._setFocus(false);}else{this._want_arrow=false;break;}}else{this.index= -1;this._editFlag=false;this._buttonFlag=true;}}else{if(_i>0){this._buttonFlag=false;continue;}else{this._want_arrow=false;if(_m){this._editFlag=false;this._buttonFlag=false;_p._removeFromCurrentFocusPath(this,false);this._setFocus(false);}}}}}else{if(!this._editFlag&&_o){_i++ ;this._editFlag=true;this._buttonFlag=false;}else{if(_n){this.index= -1;this._editFlag=false;this._buttonFlag=true;}else{if(_i<_h.length-1){this._editFlag=false;continue;}else{this._want_arrow=false;break;}}}}this.set_index(_i);this._want_arrow=true;this._getWindow()._keydown_element._event_stop=true;break;}}}}else{this._want_arrow=false;}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pFileUpload._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);var _g,_h;var _i=this._items;var _j=_i.length;if(_j){this._want_tab=true;_h=_b=="shifttabkey";if(_b=="shifttabkey"||_b=="tabkey"){this._editFlag=false;this._buttonFlag=true;if(_h){_g=this.index<0?_j-1:this.index;}else{_g=this.index<0?0:this.index;this._first_focus=true;}this.index= -1;this.set_index(_g);}else{_h=_b=="upkey";if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._editFlag=false;this._buttonFlag=false;this._want_arrow=true;var _k=nexacro._toBoolean(this.accessibilityenable);var _l=nexacro._toBoolean(this.editaccessibilityenable);var _m=nexacro._toBoolean(this.buttonaccessibilityenable);if(_h){this.index= -1;_g=_j-1;if(_m){this._buttonFlag=true;}else if(_l){this._editFlag=true;}}else{_g= -1;if(_k==false){_g=0;this.index= -1;if(_l){this._editFlag=true;}else if(_m){this._buttonFlag=true;}this._first_focus=(this._editFlag||this._buttonFlag)?true:false;}}this.set_index(_g);}}if(nexacro._enableaccessibility){this._first_focus=false;}}};_pFileUpload._find_item_status=function(_a){this._editFlag=(_a.fileitemedit._status=="focused");this._buttonFlag=(_a.fileitembutton._status=="focused");};_pFileUpload.on_fire_ondeleteitem=function(_a,_b){if(this.ondeleteitem&&this.ondeleteitem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"ondeleteitem",_b);this.ondeleteitem._fireEvent(this,_c);}};_pFileUpload.on_fire_onfindclick=function(_a,_b){if(this.onfindclick&&this.onfindclick._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(this,"onfindclick",_b);return this.onfindclick._fireCheckEvent(this,_c);}return true;};_pFileUpload.on_fire_onitemchanged=function(_a,_b,_c,_d){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _e=new nexacro.FileUploadItemChangeEventInfo(_a,"onitemchanged",_b,_c,_d);this.onitemchanged._fireEvent(this,_e);}};_pFileUpload.on_fire_onitemclick=function(_a,_b){if(this.onitemclick&&this.onitemclick._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(this,"onitemclick",_b);this.onitemclick._fireEvent(this,_c);}};_pFileUpload.on_fire_onappenditem=function(_a,_b){if(this.onappenditem&&this.onappenditem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"onappenditem",_b);this.onappenditem._fireEvent(this,_c);}};_pFileUpload.on_fire_onsuccess=function(_a,_b,_c,_d,_e){var _f=nexacro.getApplication();if(_f){_f._endCommProgress();}if(this.onsuccess&&this.onsuccess._has_handlers){var _g;if(_e&&_e.length>0){_g=new nexacro.FileUploadEventInfo(this,"onsuccess",_a,_b,_c,_d);return this.onsuccess._fireEvent(this,_g);}else{_g=new nexacro.FileUploadEventInfo(this,"onsuccess",_a,undefined,undefined,_d);return this.onsuccess._fireEvent(this,_g);}}};_pFileUpload.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.FileUploadContextMenuEventInfo(this,"oncontextmenu",_c,_h,_i,_j,_n.index,_k,_l,_d,_e,_f,_g,_a,_b,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.FileUploadMouseEventInfo(this,"onrbuttondown",_a,_b,_c,_d,_n.index,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onrbuttondown._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.FileUploadMouseEventInfo(this,"onrbuttonup",_a,_b,_c,_d,_o.index,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pFileUpload._createFileItem=function(_a){var _b=this._is_created?false:true;var _c=this.itemcount<1?this._last_id=0: ++this._last_id;var _d=new nexacro._FileUploadItemControl("upfile"+_c,0,0,0,0,null,null,null,null,null,null,this);_d._setControl();_d._setItemInfo(_a,this.buttontext);_d.createComponent(_b);_d._setEventHandler("onfindclick",this._on_item_onfindclick,this);_d._setEventHandler("onitemclick",this._on_item_onitemclick,this);return _d;};_pFileUpload._recalcLayout=function(){var _a=this._items;var _b=_a.length;if(!_b){return;}var _c=this._getClientLeft();var _d;var _e=this._getClientWidth();var _f=this._getItemHeight();for(var _g=0;_g<_b;_g++ ){_d=_f* _g;_a[_g].move(_c,_d,_e,_f,null,null);}};_pFileUpload._updateFileList=function(){this.filelist=[];for(var _a=0,_b=this._items.length,_c;_a<_b;_a++ ){_c=this._items[_a]._files;if(_c){for(var _d=0,_e=_c.length,_f;_d<_e;_d++ ){_f=new nexacro.VirtualFile("upfile"+_a+"-"+_d,"",_c[_d]);_f._setFullPath(_c[_d].fullpath||"");_f._setPath(_c[_d].path||"");_f._setFileName(_c[_d].name||"");this.filelist.push(_f);}}}};_pFileUpload._setText=function(_a){if(this.text!=_a){this.text=_a;}};_pFileUpload._setValue=function(_a){if(this.value!=_a){this.value=_a;}};_pFileUpload._setControlFlag=function(_a){this._editFlag=(_a.fileitemedit._status=="focused");this._buttonFlag=(_a.fileitembutton._status=="focused");};_pFileUpload._getItem=function(_a){if(_a>=0&&this._items.length>0){return this._items[_a];}return null;};_pFileUpload._getItemHeight=function(){var _a=this._items[0];if(!_a){return 0;}var _b=this.itemheight;if(_b){return _b;}return _a._on_getFitSize()[1];};_pFileUpload._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a.parent;}return _a;};_pFileUpload._isPopupFrame=function(){return this._onPopupWin;};delete _pFileUpload;nexacro._FileUploadItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;var _m='""';var _n='{"id":'+this._id+', "div":"FileUpload", "method":"constructor", "params":'+_m+'}';nexacro.Device.exec(_n);}};var _pFileUploadItemControl=nexacro._createPrototype(nexacro.Component,nexacro._FileUploadItemControl);nexacro._FileUploadItemControl.prototype=_pFileUploadItemControl;_pFileUploadItemControl._type_name="FileUploadItemControl";_pFileUploadItemControl._is_subcontrol=true;_pFileUploadItemControl.fileitemedit=null;_pFileUploadItemControl.fileitembutton=null;_pFileUploadItemControl.buttontext="find";_pFileUploadItemControl.index=0;_pFileUploadItemControl.value=undefined;_pFileUploadItemControl._oldvalue="";_pFileUploadItemControl._newvalue="";_pFileUploadItemControl.index=0;_pFileUploadItemControl.accessibilityrole="none";_pFileUploadItemControl._event_list={"onfindclick":1,"onitemclick":1};_pFileUploadItemControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.fileitemedit=new nexacro._FileUploadItemEditControl("fileuploaditemedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this.fileitembutton=new nexacro._FileUploadItemButtonControl("fileuploaditembutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_readonly("true");_b.createComponent(true);_c.set_text(this.buttontext);_c.createComponent(true);}};_pFileUploadItemControl.on_created_contents=function(){var _a=this.parent;if(_a){nexacro._append_hidden_item(_a._unique_id,this.name,this._on_itemedit_onchange,this,_a._hidden_frame_handle,_a.multiselect);}var _b=this.fileitemedit;var _c=this.fileitembutton;_b.on_created();_b._setEventHandler("oneditclick",this._on_itemedit_oneditclick,this);_b._setEventHandler("onlbuttondown",this._on_itemedit_oneditlbuttondown,this);_c.on_created();_c._setEventHandler("onclick",this._on_itembutton_onfindclick,this);_c._setEventHandler("onlbuttondown",this._on_itembutton_onfindlbuttondown,this);};_pFileUploadItemControl.on_destroy_contents=function(){if(this.fileitemedit){this.parent.filepathedits.delete_item(this.id);this.fileitemedit.destroy();this.fileitemedit=null;}if(this.fileitembutton){this.parent.filefindbuttons.delete_item(this.id);this.fileitembutton.destroy();this.fileitembutton=null;}if(this._files){this._files=null;}var _a=this.parent;nexacro._remove_hidden_item(_a._unique_id,this.name,_a._hidden_frame_handle);if(this._input_node){this._input_node=null;}if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){var _b='""';delete nexacro.Device._userCreatedObj[this._id];var _c='{"id":'+this._id+', "div":"FileUpload", "method":"destroy", "params":'+_b+'}';nexacro.Device.exec(_c);}};_pFileUploadItemControl.on_create_contents_command=function(){var _a="";var _b=this.fileitemedit;if(_b){_a+=_b.createCommand();}var _c=this.fileitembutton;if(_c){_a+=_c.createCommand();}return _a;};_pFileUploadItemControl.on_attach_contents_handle=function(_a){var _b=this.fileitemedit;var _c=this.fileitembutton;_b.attachHandle(_a);_b._setEventHandler("oneditclick",this._on_itemedit_oneditclick,this);_b._setEventHandler("onlbuttondown",this._on_itemedit_oneditlbuttondown,this);_c.attachHandle(_a);_c._setEventHandler("onclick",this._on_itembutton_onfindclick,this);_c._setEventHandler("onlbuttondown",this._on_itembutton_onfindlbuttondown,this);var _d=this.parent;nexacro._append_hidden_item(_d._unique_id,this.name,this._on_itemedit_onchange,this,_d._hidden_frame_handle,_d._multiselect);};_pFileUploadItemControl.on_change_containerRect=function(_a,_b){if(this._is_created_contents){this._recalcLayout();}};_pFileUploadItemControl.on_getIDCSSSelector=function(){return "fileuploaditem";};_pFileUploadItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=[0,0];var _e=[0,0];var _f=this._getCurrentStyleBorder();if(_f){_b+=_f._getBorderWidth();_c+=_f._getBorderHeight();}var _g=this._getCurrentStylePadding();if(_g){_b+=_g.left+_g.right;_c+=_g.top+_g.bottom;}var _h=this.fileitemedit;if(_h){_d=_h._on_getFitSize();}var _i=this.fileitembutton;if(_i){_e=_i._on_getFitSize();}var _j=this._getPropItemHeight();if(_j==null){_j=Math.max(_d[1],_e[1]);}var _k=this._getPropButtonSize();if(_k==null){_k=_e[0];}_b+=_k+_d[1];_c+=_j;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pFileUploadItemControl._on_itemedit_oneditclick=function(_a,_b){if(this.onitemclick&&this.onitemclick._has_handlers){this.onitemclick._fireEvent(this,_b);}return false;};_pFileUploadItemControl._on_itemedit_oneditlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(true,false);this.parent.set_index(this.index);};_pFileUploadItemControl._on_itemedit_onchange=function(_a,_b,_c){if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){var _d=_a;_a="";_c=[];for(var _g=0;_g<_d.virtualfiles.length;_g++ ){_a+=_d.virtualfiles[_g].filename;_a+=", ";_c[_g]=_d.virtualfiles[_g].filename;}if(!!_a){_a=_a.substr(0,_a.length-2);}_b=_d.virtualfiles;}if(this.value!=_a){this.value=_a;this._oldvalue=this._newvalue;this._newvalue=_c;var _e=this.fileitemedit;if(_e){_e.set_value(_a);}var _f=this.parent;if(_f){_f.set_index(this.index);_f._setText(_a);_f._setValue(_a);}if(_b){this._files=_b;if(_f){_f._updateFileList();}}_f.on_fire_onitemchanged(this,this.index,this._oldvalue,this._newvalue);}};_pFileUploadItemControl._on_itembutton_onfindclick=function(_a,_b){if(this.onfindclick&&this.onfindclick._has_handlers){return this.onfindclick._fireCheckEvent(this,_b);}return false;};_pFileUploadItemControl._on_itembutton_onfindlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(false,true);this.parent.set_index(this.index);};_pFileUploadItemControl._recalcLayout=function(){var _a=this.getElement();if(_a){var _b=this.fileitemedit;var _c=this.fileitembutton;var _d=this._getClientWidth();var _e=[0,0];if(_c){_e=_c._on_getFitSize();}var _f=this._getPropItemHeight();if(_f==null){var _g=[0,0];if(_b){_g=_b._on_getFitSize();}_f=Math.max(_g[1],_e[1]);}var _h=this._getPropButtonSize();if(_h==null){_h=_e[0];}if(_d<_h){_h=_d;}var _i=this._getClientLeft();var _j=this._getClientTop();var _k=_d-_h;var _l=_f;var _m=_i+_k;var _n=_j;var _o=_h;var _p=_f;if(_b){_b.move(_i,_j,_k,_l,null,null);}if(_c){_c.move(_m,_n,_o,_p,null,null);}}};_pFileUploadItemControl._setItemInfo=function(_a,_b){this.index=_a;this.buttontext=_b;};_pFileUploadItemControl._getPropButtonSize=function(){var _a=this.parent;if(_a){return _a.buttonsize;}return;};_pFileUploadItemControl._getPropItemHeight=function(){var _a=this.parent;if(_a){return _a.itemheight;}return;};_pFileUploadItemControl._accessibility_find_focus_flag=function(_a,_b){if(nexacro._enableaccessibility){this.parent._editFlag=_a;this.parent._buttonFlag=_b;}};_pFileUploadItemControl._isPopupFrame=function(){return this.parent._onPopupWin;};_pFileUploadItemControl._changeFiles=function(_a){this._files=[];if(_a){var _b=[];this._files.length=_a.length;var _c;for(var _f=0;_f<this._files.length;_f++ ){_c=new nexacro.VirtualFile("upfile"+this.index+"-"+_f);var _d=_a[_f];var _e=_d.lastIndexOf("\\");if(_e>0){_c.fullpath=_d;_c.path=_d.substring(0,_e+1);_c.filename=_d.substring(_e+1);}else{_c.filename=_d;}_b[_f]=_c;}this._files=_b;}else{this._files=[];}};delete _pFileUploadItemControl;nexacro._FileUploadItemEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Edit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileUploadItemEditControl=nexacro._createPrototype(nexacro.Edit,nexacro._FileUploadItemEditControl);nexacro._FileUploadItemEditControl.prototype=_pFileUploadItemEditControl;_pFileUploadItemEditControl._type_name="EditControl";_pFileUploadItemEditControl._is_subcontrol=true;_pFileUploadItemEditControl._is_eventinfo_control=false;_pFileUploadItemEditControl._getAccessibilityLabel=function(_a){var _b="";if(this.parent.parent._first_focus){var _c=this.parent.parent;_b=_c._control_element._makeAccessibilityLabelbyReadtype();}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _b;};_pFileUploadItemEditControl.on_focus_basic_action=function(_a,_b){if(this._isAccessibilityEnable()){this.on_apply_accessibility();}return nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b);};delete _pFileUploadItemEditControl;nexacro._FileUploadItemButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileUploadItemButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._FileUploadItemButtonControl);nexacro._FileUploadItemButtonControl.prototype=_pFileUploadItemButtonControl;_pFileUploadItemButtonControl._type_name="ButtonControl";_pFileUploadItemButtonControl._is_subcontrol=true;_pFileUploadItemButtonControl._is_eventinfo_control=false;_pFileUploadItemButtonControl._getAccessibilityLabel=function(_a){var _b="";if(this.parent.parent._first_focus){var _c=this.parent.parent;_b=_c._control_element._makeAccessibilityLabelbyReadtype();}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _b;};_pFileUploadItemButtonControl.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();var _j=_i._cur_ldown_elem||_i._keydown_element;if(_j==this._cur_ldown_elem){if(_a==13||_a==32){this._click(_a);}}this._cur_ldown_elem=null;return _h;};delete _pFileUploadItemButtonControl;}if(!nexacro.FileUpTransfer){nexacro.FileUpTransferEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.datasets=_c;this.code=_d;this.message=_e;this.url=_f;};var _pFileUpTransferEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUpTransferEventInfo);nexacro.FileUpTransferEventInfo.prototype=_pFileUpTransferEventInfo;_pFileUpTransferEventInfo._type_name="FileUpTransferEventInfo";delete _pFileUpTransferEventInfo;nexacro.FileUpTransferErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileUpTransferErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUpTransferErrorEventInfo);nexacro.FileUpTransferErrorEventInfo.prototype=_pFileUpTransferErrorEventInfo;_pFileUpTransferErrorEventInfo._type_name="FileUpTransferErrorEventInfo";delete _pFileUpTransferErrorEventInfo;nexacro.FileUpTransferProgressEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onprogress";this.fromobject=this.fromreferenceobject=_a;this.loaded=_c;this.total=_d;};var _pFileUpTransferProgressEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUpTransferProgressEventInfo);nexacro.FileUpTransferProgressEventInfo.prototype=_pFileUpTransferProgressEventInfo;_pFileUpTransferProgressEventInfo._type_name="FileUpTransferProgressEventInfo";delete _pFileUpTransferProgressEventInfo;nexacro.FileUpTransfer=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this.filelist=new nexacro.Collection();this.postdatalist=new nexacro.Collection();};var _pFileUpTransfer=nexacro.FileUpTransfer.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileUpTransfer);_pFileUpTransfer._type_name="FileUpTransfer";_pFileUpTransfer.url="";_pFileUpTransfer._handle=null;_pFileUpTransfer._aborted=false;_pFileUpTransfer._user_aborted=false;_pFileUpTransfer._TransferType={ALL:1,PART:2,PARTALL:3};_pFileUpTransfer._event_list={"onsuccess":1,"onerror":1,"onprogress":1};_pFileUpTransfer.destroy=function(){if(this.filelist){this.filelist.destroy();this.filelist=null;}if(this.postdatalist){this.postdatalist.destroy();this.postdatalist=null;}return true;};_pFileUpTransfer.set_filelist=nexacro._emptyFn;_pFileUpTransfer.set_postdatalist=nexacro._emptyFn;_pFileUpTransfer.set_url=function(_a){if(this.url!=_a){this.url=_a;}};_pFileUpTransfer.setFile=function(_a,_b){if(!_b||!(_b instanceof nexacro.VirtualFile)){return false;}return this.filelist.set_item(_a,_b);};_pFileUpTransfer.addFile=function(_a,_b){if(_a===null||_a===undefined||_a===""||this.filelist[_a]){return  -1;}if(!_b||!(_b instanceof nexacro.VirtualFile)){return  -1;}return this.filelist.add_item(_a,_b);};_pFileUpTransfer.removeFile=function(_a){return this.filelist.delete_item(_a);};_pFileUpTransfer.removeFileByIndex=function(_a){_a=_a|0;if(_a<0||_a>=this.filelist.length){return  -1;}return this.filelist.delete_item(_a);};_pFileUpTransfer.getFileArrayByFileName=function(_a){var _b=null;for(var _c=0,_d,_e=this.filelist,_f=_e.length;_c<_f;_c++ ){_d=_e[_c];if(_a==_d.filename){if(!_b){_b=[];}_b.push(_d);}}return _b;};_pFileUpTransfer.getIndexArrayByFileName=function(_a){var _b=null;for(var _c=0,_d=this.filelist,_e=_d.length;_c<_e;_c++ ){if(_a==_d[_c].filename){if(!_b){_b=[];}_b.push(_c);}}return _b;};_pFileUpTransfer.existFile=function(_a){var _b=false;if(!_a||!(_a instanceof nexacro.VirtualFile)){return _b;}for(var _c=0,_d=this.filelist,_e=_d.length;_c<_e;_c++ ){if(nexacro._isEqualTransferFile(_d[_c],_a)){_b=true;break;}}return _b;};_pFileUpTransfer.setPostData=function(_a,_b){if(!_a){return;}this.postdatalist.setItem(_a,_b);};_pFileUpTransfer.removePostData=function(_a){this.postdatalist.delete_item(_a);};_pFileUpTransfer.getPostData=function(_a){return this.postdatalist.getItem(_a);};_pFileUpTransfer.clearFileList=function(){this.filelist.clear();};_pFileUpTransfer.clearPostDataList=function(){this.postdatalist.clear();};_pFileUpTransfer.upload=function(_a){this._aborted=false;this._user_aborted=false;_a=_a?nexacro._getServiceLocation(_a,null,null,false):(this.url?nexacro._getServiceLocation(this.url,null,null,false):"");if(!_a){return;}nexacro._uploadTransfer(this.filelist,this.postdatalist,_a, -1,this);};_pFileUpTransfer.on_load=function(_a,_b,_c){if(_a){var _d=_a[0];var _e=_a[1];if(_d){var _f=_d["ErrorCode"];var _g=_d["ErrorMsg"];if(_f<0){return this.on_fire_onerror("ObjectError",_g,this,9901,_b,_b,_c);}else{return this.on_fire_onsuccess(_e,_f,_g,_b,_c);}}}return this.on_fire_onerror("ObjectError","fail to get",this,9901,_b,_b,_c);};_pFileUpTransfer.on_message=function(_a){var _b;var _c=_a.data[0];var _d=_a.data[1];var _e=_a.message;if(_e){var _f;var _g=nexacro.trimLeft(decodeURIComponent(_e.replace(/\+/g," ")));var _h=nexacro._parseXMLDocument(_g);if(nexacro._getContentType(_h)=="XML"){_e=_h;_f="XML";}else{_f=_e.substring(0,5).toUpperCase();if(_f.indexOf("<?XML")==0){_f="XML";}if(_f.indexOf("SSV")==0){_f="SSV";}if(_f.indexOf("{")==0){_f="JSON";}}if(nexacro._Deserializer[_f]){_b=nexacro._Deserializer[_f](_e);}}this.on_load(_b,_c,_d);};_pFileUpTransfer.on_error=function(_a,_b,_c,_d,_e){this.on_fire_onerror("ObjectError",_b,this,_c||_a,_d,_d,_e);};_pFileUpTransfer.on_progress=function(_a,_b,_c){this.on_fire_onprogress(_a,_b,_c);};_pFileUpTransfer.on_fire_onsuccess=function(_a,_b,_c,_d,_e){if(this.onsuccess&&this.onsuccess._has_handlers){var _f=new nexacro.FileUpTransferEventInfo(this,"onsuccess",_a,_b,_c,_d,_e);this.onsuccess._fireEvent(this,_f);}};_pFileUpTransfer.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.FileUpTransferErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f,_g);this.onerror._fireEvent(this,_h);}};_pFileUpTransfer.on_fire_onprogress=function(_a,_b,_c){if(this.onprogress&&this.onprogress._has_handlers){var _d=new nexacro.FileUpTransferProgressEventInfo(this,"onprogress",_a,_b,_c);return this.onprogress._fireEvent(this,_d);}return true;};_pFileUpTransfer._getForm=function(){if(this.parent instanceof nexacro.Form){return this.parent;}return null;};_pFileUpTransfer._getTransferType=function(){return this._TransferType[this.type.toUpperCase()]||0;};delete _pFileUpTransfer;}if(!nexacro.VideoPlayer){nexacro.VideoPlayStateChangedEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onplaystatuschanged";this.fromobject=this.fromreferenceobject=_a;this.newstate=_c;};var _pPlayStatusChangedInfo=nexacro._createPrototype(nexacro.Event,nexacro.VideoPlayStateChangedEventInfo);nexacro.VideoPlayStateChangedEventInfo.prototype=_pPlayStatusChangedInfo;_pPlayStatusChangedInfo._type_name="VideoPlayStatusChangedInfo";delete _pPlayStatusChangedInfo;nexacro.VideoCurrentTimeChangedEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"oncurrenttimechanged";this.fromobject=this.fromreferenceobject=_a;this.currenttime=_c;};var _pCurrentTimeChangedInfo=nexacro._createPrototype(nexacro.Event,nexacro.VideoCurrentTimeChangedEventInfo);nexacro.VideoCurrentTimeChangedEventInfo.prototype=_pCurrentTimeChangedInfo;_pCurrentTimeChangedInfo._type_name="VideoCurrentTimeChangedInfo";delete _pCurrentTimeChangedInfo;nexacro.VideoErrorEventInfo=function(_a,_b,_c,_d,_e,_f){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,undefined,undefined);};var _pVideoErrorInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.VideoErrorEventInfo);nexacro.VideoErrorEventInfo.prototype=_pVideoErrorInfo;_pVideoErrorInfo._type_name="VideoErrorInfo";delete _pVideoErrorInfo;nexacro.VideoPlayer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pVideo=nexacro.VideoPlayer.prototype=nexacro._createPrototype(nexacro.Component,nexacro.VideoPlayer);_pVideo._type_name="VideoPlayer";_pVideo.codebase="";_pVideo.mimetype="";_pVideo.url="";_pVideo._url="";_pVideo.adjustalpha=false;_pVideo.aspectratio="";_pVideo.currenttime=0;_pVideo._new_currenttime=0;_pVideo.duration=0;_pVideo.mute=false;_pVideo.repeat=false;_pVideo.showcontrolbar=false;_pVideo.videosize={};_pVideo.autoplay=false;_pVideo.status="stop";_pVideo.volume=50;_pVideo.vr360mode=false;_pVideo._is_simple_control=true;_pVideo._obj_id="";_pVideo._obj_elem=null;_pVideo._params=null;_pVideo._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"onappenditem":1,"ondeleteitem":1,"onitemclick":1,"onfindclick":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncurrenttimechanged":1,"onplaystatuschanged":1};_pVideo.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._obj_elem=new nexacro._VideoPlayerPluginElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pVideo.on_create_contents_command=function(){this.on_apply_mute();this.on_apply_volume();this.on_apply_repeat();this.on_apply_autoplay();this.on_apply_showcontrolbar();this.on_apply_url();this.on_apply_vr360mode();return this._obj_elem.createCommand();};_pVideo.on_attach_contents_handle=function(_a){if(this._obj_elem){this._obj_elem.attachHandle(_a);}};_pVideo.on_created_contents=function(_a){var _b=this._obj_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.on_apply_adjustalpha();this.on_apply_mute();this.on_apply_volume();this.on_apply_repeat();this.on_apply_autoplay();this.on_apply_showcontrolbar();this.on_apply_url();this.on_apply_vr360mode();}};_pVideo.on_destroy_contents=function(){var _a=this._obj_elem;if(_a){_a.destroy();this._obj_elem=null;}};_pVideo.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._obj_elem;if(_d){_d.on_update_position();}};_pVideo.on_change_containerRect=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementSize(_a,_b);}};_pVideo.set_duration=nexacro._emptyFn;_pVideo.set_status=nexacro._emptyFn;_pVideo.set_videosize=nexacro._emptyFn;_pVideo.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._obj_elem;if(_b){if(_b.setElementVisible!=null){_b.setElementVisible(_a);}}};_pVideo.set_codebase=function(_a){this.codebase=_a;this.on_apply_codebase();};_pVideo.on_apply_codebase=function(){var _a=this._obj_elem;if(_a){var _b=this.codebase;if(_b){_a.setElementCodebase(_b);}}};_pVideo.set_url=function(_a){if(this.url!=_a){this.url=_a;_a=nexacro._getURIValue(_a);if(_a==system.convertRealPath(_a)||undefined===system.convertRealPath(_a)){_a=nexacro._getServiceLocation(_a,this._getRefFormBaseUrl());}else{_a=system.convertRealPath(_a);}if(this._url!=_a){this._url=_a;this.on_apply_url();}}};_pVideo.on_apply_url=function(){if(this._url===""){return;}var _a=this._obj_elem;if(_a){_a._setVideoUrl("URL",this._url);}};_pVideo.set_adjustalpha=function(_a){_a=nexacro._toBoolean(_a);if(this.adjustalpha!=_a){this.adjustalpha=_a;this.on_apply_adjustalpha();}};_pVideo.on_apply_adjustalpha=function(){var _a=this._obj_elem;if(_a){_a.setElementAdjustAlpha(this.adjustalpha);}};_pVideo.set_currenttime=function(_a){_a= +_a;if(isNaN(_a)){return;}if(_a<0){_a=0;}else if(_a>this.duration){_a=this.duration;}this._new_currenttime=_a;this.on_apply_currenttime();};_pVideo.on_apply_currenttime=function(){var _a=this._obj_elem;if(_a){var _b=this._new_currenttime;if(_b> -1){_a._setVideoCurrentTime("currentPosition",_b);}}};_pVideo.set_mute=function(_a){_a=nexacro._toBoolean(_a);if(this.mute!=_a){this.mute=_a;this.on_apply_mute();}};_pVideo.on_apply_mute=function(){var _a=this._obj_elem;if(_a){_a._setVideoMute("settings",this.mute);}};_pVideo.set_repeat=function(_a){_a=nexacro._toBoolean(_a);if(this.repeat!=_a){this.repeat=_a;this.on_apply_repeat();}};_pVideo.on_apply_repeat=function(){var _a=this._obj_elem;if(_a){_a._setVideoLoop("AutoRewind",this.repeat);}};_pVideo.set_showcontrolbar=function(_a){_a=nexacro._toBoolean(_a);if(this.showcontrolbar!=_a){this.showcontrolbar=_a;this.on_apply_showcontrolbar();}};_pVideo.on_apply_showcontrolbar=function(){var _a=this._obj_elem;if(_a){_a._setVideoShowControlBar("uiMode",this.showcontrolbar);}};_pVideo.set_autoplay=function(_a){_a=nexacro._toBoolean(_a);if(this.autoplay!=_a){this.autoplay=_a;this.on_apply_autoplay();}};_pVideo.on_apply_autoplay=function(){var _a=this._obj_elem;if(_a){_a._setVideoAutoPlay("AutoStart",this.autoplay);}};_pVideo.set_volume=function(_a){_a= +_a;if(isNaN(_a)){return;}if(_a<0){_a=0;}else if(_a>100){_a=100;}if(this.volume!=_a){this.volume=_a;this.on_apply_volume();}};_pVideo.on_apply_volume=function(){var _a=this._obj_elem;if(_a){_a._setVideoVolume("Volume",this.volume);}};_pVideo.on_apply_prop_enable=function(){var _a=this._obj_elem;if(_a){var _b=this.enable;if(_b!=null){_a._setVideoEnable("Enabled",_b);}}};_pVideo.set_vr360mode=function(_a){_a=nexacro._toBoolean(_a);if(this.vr360mode!=_a){this.vr360mode=_a;this.on_apply_vr360mode();}};_pVideo.on_apply_vr360mode=function(){var _a=this._obj_elem;if(_a){_a._setVideo360VRMode("VRMode",this.vr360mode);}};_pVideo.play=function(){var _a=this._obj_elem;if(_a){_a._play();}};_pVideo.pause=function(){var _a=this._obj_elem;if(_a){_a._pause();}};_pVideo.rewind=function(){var _a=this._obj_elem;if(_a){_a._rewind();}};_pVideo.stop=function(){var _a=this._obj_elem;if(_a){_a._stop();}};_pVideo.on_fire_onerror=function(_a,_b,_c,_d,_e){if(this.onerror&&this.onerror._has_handlers){var _f=new nexacro.VideoErrorEventInfo(_a,"onerror",_b,_c,_d,_e);return this.onerror._fireEvent(this,_f);}};_pVideo.on_fire_oncurrenttimechanged=function(_a,_b){if(this.oncurrenttimechanged&&this.oncurrenttimechanged._has_handlers){var _c=new nexacro.VideoCurrentTimeChangedEventInfo(_a,"oncurrenttimechanged",_b);return this.oncurrenttimechanged._fireEvent(this,_c);}};_pVideo.on_fire_onplaystatuschanged=function(_a,_b){if(this.onplaystatuschanged&&this.onplaystatuschanged._has_handlers){var _c=new nexacro.VideoPlayStateChangedEventInfo(_a,"onplaystatuschanged",_b);return this.onplaystatuschanged._fireEvent(this,_c);}};_pVideo._on_currenttimechanged=function(_a){var _b=this.currenttime;if(_b!=_a){this.on_fire_oncurrenttimechanged(this,_a);}this.currenttime=_a;};_pVideo._on_volumechangechanged=function(_a,_b){this.volume=_a;this.mute=_b;};_pVideo._on_statuschanged=function(_a){var _b=this.status;if(_b!=_a){this.status=_a;this.on_fire_onplaystatuschanged(this,_a);}};_pVideo._on_error=function(_a,_b,_c){this.on_fire_onerror(this,_a,_b,this,_c);};delete _pVideo;}if(!nexacro.WebBrowser){nexacro.WebLoadCompEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onloadcompleted";this.fromobject=this.fromreferenceobject=_a;this.url=_b;};var _pWebLoadCompEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebLoadCompEventInfo);nexacro.WebLoadCompEventInfo.prototype=_pWebLoadCompEventInfo;_pWebLoadCompEventInfo._type_name="WebLoadCompEventInfo";delete _pWebLoadCompEventInfo;nexacro.WebUserNotifyEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onusernotify";this.fromobject=this.fromreferenceobject=_a;this.userdata=_b;};var _pWebUserNotifyEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebUserNotifyEventInfo);nexacro.WebUserNotifyEventInfo.prototype=_pWebUserNotifyEventInfo;_pWebUserNotifyEventInfo._type_name="WebUserNotifyEventInfo";delete _pWebUserNotifyEventInfo;nexacro.WebBrowser=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pWebBrowser=nexacro._createPrototype(nexacro.Component,nexacro.WebBrowser);nexacro.WebBrowser.prototype=_pWebBrowser;_pWebBrowser._type_name="WebBrowser";_pWebBrowser._ifrm_elem=null;_pWebBrowser.window=null;_pWebBrowser.document=null;_pWebBrowser.url="";_pWebBrowser.useurlhistory=true;_pWebBrowser._url="";_pWebBrowser._blockLoadFlag=false;_pWebBrowser._current_url="";_pWebBrowser.accessibilityrole="webbrowser";_pWebBrowser.accessibilityleavemessage="";_pWebBrowser._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onloadcompleted":1,"onusernotify":1,"ondevicebuttonup":1};_pWebBrowser.on_get_accessibility_label=function(){return this.id;};_pWebBrowser.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._WebBrowserPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pWebBrowser.on_create_contents_command=function(){return "";};_pWebBrowser.on_attach_contents_handle=function(_a){this.on_created_contents(_a);return;};_pWebBrowser.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;nexacro._observeSysEvent(_b.handle,"mouseover","onmouseover",this._webbrowser_mouseover);}if(this._url===""){this._url="about:blank";}this.on_apply_url();this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){nexacro._stopSysObserving(_a.handle,"mouseover","onmouseover",this._webbrowser_mouseover);this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}};_pWebBrowser.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pWebBrowser.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pWebBrowser.on_fire_onloadcompleted=function(_a,_b){if(this.onloadcompleted&&this.onloadcompleted._has_handlers){var _c=new nexacro.WebLoadCompEventInfo(_a,_b);_c.eventid="onloadcompleted";return this.onloadcompleted._fireEvent(this,_c);}return true;};_pWebBrowser.on_fire_onusernotify=function(_a,_b){if(this.onusernotify&&this.onusernotify._has_handlers){var _c=new nexacro.WebUserNotifyEventInfo(_a,_b);_c.eventid="onusernotify";return this.onusernotify._fireEvent(this,_c);}return true;};_pWebBrowser.on_ondevicebuttonup_default_action=function(_a){if(_a==2){this.goback();}};_pWebBrowser._getDlgCode=function(_a){var _b=this._ifrm_elem;if(_b){if((!_b._prev_outfocus_message_elem||(_b._prev_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_UP))||(!_b._next_outfocus_message_elem||(_b._next_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_DOWN))){this._want_arrow=false;}else{this._want_arrow=true;}}return {want_tab:true,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pWebBrowser.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Event;if(_a==_h.KEY_TAB){this._getWindow()._keydown_element._event_stop=false;}else if(nexacro._enableaccessibility){var _i=this._ifrm_elem;if(_i){_i._setElementInternalFocus(_a);}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pWebBrowser._apply_setfocus=function(_a){if(nexacro._enableaccessibility){nexacro.Component.prototype._apply_setfocus.call(this,_a);}var _b=this._ifrm_elem;if(_b){_b._setElementFocus();}};_pWebBrowser._webbrowser_mouseover=function(){if(this._linked_element&&!this._linked_element._document){nexacro._initDragInfo();nexacro._cur_track_info=null;}};_pWebBrowser.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this.text){this.text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");this.on_apply_text(_a);}};_pWebBrowser.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this.enable!=_a){this.enable=_a;if(this._is_created){var _b=(this.parent._real_enable&&_a);if(this._real_enable!=_b){this._real_enable=_b;this._changeStatus("disabled",!_b);this.on_apply_prop_enable(this._real_enable);}}}};_pWebBrowser.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){_b.setElementVisible(_a);}};_pWebBrowser.set_cookiesynctype=function(){};_pWebBrowser.set_url=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._url=_b;this.url=_a;this.on_apply_url();};_pWebBrowser.set_useurlhistory=function(_a){this.useurlhistory=nexacro._toBoolean(_a);};_pWebBrowser.set_accessibilityleavemessage=function(_a){this.accessibilityleavemessage=_a;this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_apply_url=function(){if(this._url==="http://"||this._url==="file://"||this._url==="https://"||this._url===""){return;}var _a=this._ifrm_elem;if(_a){this._blockLoadFlag=false;_a._setUrl(this._url,this.useurlhistory);}};_pWebBrowser.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_a);}};_pWebBrowser.stoploading=function(){};_pWebBrowser.reload=function(){var _a=this._ifrm_elem;if(_a){if(this._isCrossDomain(this._current_url)){var _b=this._url;_a._setUrl("");_a._setUrl(_b);}else{_a._setGo();}}};_pWebBrowser.goback=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setBack();}}};_pWebBrowser.goforward=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setForward();}}};_pWebBrowser.on_load_handler=function(_a){if(this._blockLoadFlag){return;}this._current_url=_a;this.document=this._ifrm_elem._getDoc();if(_a!="about:blank"){this._blockLoadFlag=true;this.on_fire_onloadcompleted(this,_a==""?this.url:_a);}};_pWebBrowser.getProperty=function(_a){var _b=this._ifrm_elem;if(_b){return _b.getProperty(_a);}};_pWebBrowser.setProperty=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setProperty(_a,_b);}};_pWebBrowser.callMethod=function(){var _a=this._ifrm_elem;if(_a){return nexacro._WebBrowserPluginElement.prototype.callMethod.apply(_a,arguments);}};_pWebBrowser.addEventHandler=function(_a,_b,_c){if(_a in this._event_list==false){this._event_list[_a]=1;}return nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);};_pWebBrowser.removeEventHandler=function(_a,_b,_c){return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pWebBrowser._isCrossDomain=function(_a){if(_a==""){return true;}var _b=this._getRefFormBaseUrl();if(_b.match(/^(file):\/\//)){return false;}var _c=/^(https?):\/\/([^:\/\s]+)(:([^\/]*))?((\/[^\s/\/]+)*)?\/?([^#\s\?]*)(\?([^#\s]*))?(#(\w*))?$/;var _d=_a.match(_c);var _e=_b.match(_c);if(!_d||!_e){return true;}if(_d[2]!=_e[2]){return true;}return false;};_pWebBrowser._on_apply_accessibilityleavemessage=function(){var _a=this.accessibilityleavemessage;if(_a){var _b=this._ifrm_elem;if(_b){_b._setElementLeaveMessage(_a);}}};_pWebBrowser.updateWindow=function(){var _a=this._ifrm_elem;if(_a){_a.updateWindow();}};delete _pWebBrowser;}if(!nexacro.GoogleMap){nexacro.GoogleMapEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.centerlatitude=_c.latitude;this.centerlongitude=_c.longitude;this.latitude=_d.latitude;this.longitude=_d.longitude;this.viewmode=_e;this.zoomlevel=_f;this.addresses=_g;};var _pGoogleMapEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapEventInfo);nexacro.GoogleMapEventInfo.prototype=_pGoogleMapEventInfo;_pGoogleMapEventInfo._type_name="GoogleMapEventInfo";delete _pGoogleMapEventInfo;nexacro.GoogleMapErrorEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.errortype="ObjectError";this.statuscode=_c;this.errormsg=_d;};var _pGoogleMapErrorEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapErrorEventInfo);nexacro.GoogleMapErrorEventInfo.prototype=_pGoogleMapErrorEventInfo;_pGoogleMapErrorEventInfo._type_name="GoogleMapErrorEventInfo";delete _pGoogleMapErrorEventInfo;nexacro.GoogleMapClickEventInfo=function(_a,_b,_c){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.latitude=_c.latitude;this.longitude=_c.longitude;};var _pGoogleMapClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapClickEventInfo);nexacro.GoogleMapClickEventInfo.prototype=_pGoogleMapClickEventInfo;_pGoogleMapClickEventInfo._type_name="GoogleMapClickEventInfo";delete _pGoogleMapClickEventInfo;nexacro.GoogleMapDragEventInfo=function(_a,_b,_c){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.latitude=_c.latitude;this.longitude=_c.longitude;};var _pGoogleMapDragEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapDragEventInfo);nexacro.GoogleMapDragEventInfo.prototype=_pGoogleMapDragEventInfo;_pGoogleMapDragEventInfo._type_name="GoogleMapDragEventInfo";delete _pGoogleMapDragEventInfo;if(nexacro.Device&&nexacro._OS=="Android"){nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._ifrm_elem=null;this.window=null;this.document=null;this.latitude=0;this.longitude=0;this.centerlocation={latitude:0,longitude:0};this.location={latitude:0,longitude:0};this.showmode=0;this.zoomlevel=15;this.showzoom=false;this.showmode=false;this.shownavigator=false;this.viewmode=0;this.language=undefined;this.region=undefined;this.items=[];this.itemsname=[];this._itemsname=[];this._items=[];this._infowindowname=[];this._infowindow=[];this.bSensor=false;this.bLoaded=false;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onload":1,"onerror":1,"onrecvsuccess":1,"oncenterchanged":1,"onmapdragstart":1,"onmapdrag":1,"onmapdragend":1,"ondevicebuttonup":1};this._location={latitude:0,longitude:0};this._pixel={x:0,y:0};};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_pGoogleMap.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._GoogleMapPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pGoogleMap.on_create_contents_command=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._GoogleMapPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());return this._ifrm_elem.createCommand();}return "";};_pGoogleMap.on_attach_contents_handle=function(_a){if(this._ifrm_elem){this._ifrm_elem.attachHandle(_a);}};_pGoogleMap.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;}};_pGoogleMap.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}this.items=null;this.itemsname=null;this._itemsname=null;this._items=null;this._infowindowname=null;this._infowindow=null;};_pGoogleMap.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pGoogleMap.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pGoogleMap.on_fire_onload=function(_a,_b,_c,_d,_e,_f,_g){if(this.onload&&this.onload._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.onload._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_onerror=function(_a,_b,_c,_d){if(this.onerror&&this.onerror._has_handlers){var _e=new nexacro.GoogleMapErrorEventInfo(_a,_b,_c,_d);return this.onerror._fireEvent(this,_e);}return true;};_pGoogleMap.on_fire_onrecvsuccess=function(_a,_b,_c,_d,_e,_f,_g){if(this.onrecvsuccess&&this.onrecvsuccess._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.onrecvsuccess._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_oncenterchanged=function(_a,_b,_c,_d,_e,_f,_g){this.centerlocation=_c;this.latitude=this.centerlocation.latitude;this.longitude=this.centerlocation.longitude;this.zoomlevel=_f;if(this.oncenterchanged&&this.oncenterchanged._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.oncenterchanged._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_onclick=function(_a,_b,_c){if(this.onclick&&this.onclick._has_handlers){var _d=new nexacro.GoogleMapClickEventInfo(_a,_b,_c);return this.onclick._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_ondrag=function(_a,_b,_c){if(this.ondrag&&this.ondrag._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.ondrag._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdragstart=function(_a,_b,_c){if(this.onmapdragstart&&this.onmapdragstart._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdragstart._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdrag=function(_a,_b,_c){if(this.onmapdrag&&this.onmapdrag._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdrag._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdragend=function(_a,_b,_c){if(this.onmapdragend&&this.onmapdragend._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdragend._fireEvent(this,_d);}return true;};_pGoogleMap._apply_setfocus=function(){var _a=this._ifrm_elem;if(_a){_a.setElementFocus(true);}};_pGoogleMap.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this.text){this.text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");}};_pGoogleMap.set_viewmode=function(_a){if(_a!=null){this.viewmode=_a;var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.viewmode+'"}';_b.setElementParam("viewmode",_c);}}else{return false;}};_pGoogleMap.set_zoomlevel=function(){};_pGoogleMap.set_showzoom=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showzoom=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showzoom=false;}else{return false;}var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.showzoom+'"}';_b.setElementParam("showzoom",_c);}return true;}};_pGoogleMap.set_shownavigator=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.shownavigator=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.shownavigator=false;}else{return false;}var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.shownavigator+'"}';_b.setElementParam("shownavigator",_c);}return true;}};_pGoogleMap.set_showmapscale=function(){};_pGoogleMap.set_showmode=function(){};_pGoogleMap.set_showcompass=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showcompass=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showcompass=false;}else{return false;}if(this.bLoaded){var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.showcompass+'"}';_b.setElementParam("showcompass",_c);}}return true;}};_pGoogleMap.set_apikey=nexacro._emptyFn;_pGoogleMap.set_language=nexacro._emptyFn;_pGoogleMap.set_region=nexacro._emptyFn;_pGoogleMap.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this.enable!=_a){this.enable=_a;if(this._is_created){var _b=(this.parent._real_enable&&_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_b);}}}};_pGoogleMap.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){if(_b.setElementVisible!=null){_b.setElementVisible(_a);}}};_pGoogleMap.load=function(_a,_b,_c,_d,_e){var _f=0;if(_e!=null){try{_f=_e.toString().split(" ").join("");}catch(e){return false;}if(_e.length==0){return false;}var _g=0;try{_g=Number(_e.toString());}catch(e){return false;}if(_g>=0){this.zoomlevel=_g;}else{return false;}}if((_b!=null)&&(_c!=null)){_f=0;try{_f=_b.toString().split(" ").join("");}catch(e){return false;}if(_f.length==0){return false;}try{_f=_c.toString().split(" ").join("");}catch(e){return false;}if(_f.length==0){return false;}var _h=0;var _i=0;try{_h=Number(_b.toString());}catch(e){return false;}if(_h!=_h){return false;}try{_i=Number(_c.toString());}catch(e){return false;}if(_i!=_i){return false;}this.centerlocation.latitude=_h;this.centerlocation.longitude=_i;this.latitude=_h;this.longitude=_i;_pGoogleMap.centerlocation={latitude:_h,longitude:_i};}if(_d!=null){if(_d==0||(typeof (_d)=="string"&&_d=="0")){this.viewmode=0;}else if(_d==1||(typeof (_d)=="string"&&_d=="1")){this.viewmode=1;}else if(_d==2||(typeof (_d)=="string"&&_d=="2")){this.viewmode=2;}else if(_d==3||(typeof (_d)=="string"&&_d=="3")){this.viewmode=3;}else{return false;}}else{this.viewmode=0;}if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.bSensor=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.bSensor=false;}else{return false;}}else if(_a==null){this.bSensor=false;}var _j='{"bUseSensor":"'+this.bSensor+'","nLatitude":"'+this.centerlocation.latitude+'","nLongitude":"'+this.centerlocation.longitude+'","constViewMode":"'+this.viewmode+'","nZoomLevel":"'+this.zoomlevel+'"}';var _k=this._ifrm_elem;if(_k){_k._setLoad(_j);}this.bLoaded=true;return true;};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){this.items[_a].location.latitude=_b;this.items[_a].location.longitude=_c;};_pGoogleMap.getAddress=function(_a,_b,_c,_d){if(_a==null||_b==null||_c<0){return false;}if(_c==null){_c=1;}var _e='{"nLatitude":"'+_a+'","nLongitude":"'+_b+'","nMaxResultCount":"'+_c+'","strLocale":"'+_d+'"}';var _f=this._ifrm_elem;if(_f){_f._getAddress(_e);}return true;};_pGoogleMap.getCoordinates=function(_a){if(_a==null||_a==""){return false;}var _b=this._ifrm_elem;if(_b){_b._getCoordinates(_a);}return true;};var _itemsname=[];var _items=[];var _infowindowname=[];var _infowindow=[];_pGoogleMap.addItem=function(_a,_b){var _c=this._ifrm_elem;if(_a==null||_b==null){return false;}if(_a==""||_b==""||_b=="undefined"||_a.trim()==""){return false;}if(typeof (this.items[_a])!="undefined"){this.on_fire_onerror(this,"onerror","1501","item is already exist.");return false;}if(_b instanceof nexacro.GoogleMapMarker||_b instanceof nexacro.GoogleMapPolyline||_b instanceof nexacro.GoogleMapPolygon||_b instanceof nexacro.GoogleMapCircle){this.items[_a]=_b;this.items.push(_a);if(this.bLoaded){if(_b._type==0||_b._type==1){_pGoogleMap.addMarker(_c,_a,_b);}else if(_b._type==2){_pGoogleMap.addPolyline(_c,_a,_b);}else if(_b._type==3){_pGoogleMap.addPolygon(_c,_a,_b);}else if(_b._type==4){_pGoogleMap.addCircle(_c,_a,_b);}}return true;}else{return false;}};_pGoogleMap.addMarker=function(_a,_b,_c){if(_c.imageurl.length>0){var _d=_c.imageurl.toString().split(" ").join("");if(_d.substring(0,9).toLowerCase()!="%userapp%"&&_d.substring(0,9).toLowerCase()!="%sd_card%"){var _e=nexacro._getFileCache(_d);if(null==_e){return false;}}}_itemsname.push(_b);_items[_b]="marker";_c._map=this;_c._name=_b;var _f='{"itemName":"'+_b+'","nLatitude":"'+_c.latitude+'","nLongitude":"'+_c.longitude+'","text":"'+_c.text+'","visible":"'+_c.visible+'","imageurl":"'+_c.imageurl+'","draggable":"'+_c.draggable+'"}';if(_a){_a._setMarker(_f);}};_pGoogleMap.addPolygon=function(_a,_b,_c){var _d,_e,_f,_g;var _h=[];var _i=[];_d=_c.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_h.push(_e);_i.push(_f);}}_itemsname.push(_b);_items[_b]="polygon";_c._map=this;_c._name=_b;var _j='{"itemName":"'+_b+'","nLatitude":'+JSON.stringify(_h)+',"nLongitude":'+JSON.stringify(_i)+',"visible":"'+_c.visible+'","linecolor":"'+_c.linecolor+'","linewidth":"'+_c.linewidth+'","fillbrushcolor":"'+_c.fillbrushcolor+'"}';if(_a){_a._setPolygon(_j);}};_pGoogleMap.addPolyline=function(_a,_b,_c){var _d,_e,_f,_g;var _h=[];var _i=[];_d=_c.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_h.push(_e);_i.push(_f);}}_itemsname.push(_b);_items[_b]="polyline";_c._map=this;_c._name=_b;var _j='{"itemName":"'+_b+'","nLatitude":'+JSON.stringify(_h)+',"nLongitude":'+JSON.stringify(_i)+',"visible":"'+_c.visible+'","linecolor":"'+_c.linecolor+'","linewidth":"'+_c.linewidth+'"}';if(_a){_a._setPolyline(_j);}};_pGoogleMap.addCircle=function(_a,_b,_c){_itemsname.push(_b);_items[_b]="circle";_c._map=this;_c._name=_b;var _d='{"itemName":"'+_b+'","nLatitude":'+_c.latitude+',"nLongitude":'+_c.longitude+',"radius":'+_c.radius+',"visible":"'+_c.visible+'"}';if(_a){_a._setCircle(_d);}};_pGoogleMap.removeItem=function(_a){var _b=this._ifrm_elem;if(_a==null){return false;}if(_a==""){return false;}if(typeof (this.items[_a])=="undefined"){this.on_fire_onerror(this,"onerror","1502","item is not exist.");return false;}else{delete this.items[_a];for(var _d=0;_d<this.items.length;_d++ ){if(this.items[_d]==_a){var _c=this.items.indexOf(this.items[_d]);this.items.splice(_c,_d+1);}}if(this.bLoaded){_pGoogleMap._removeItem(_b,_a);}return true;}};_pGoogleMap._removeItem=function(_a,_b){var _c='{"item":"'+_items[_b]+'","itemname":"'+_b+'"}';if(_a){_a._setRemove(_c);}delete _items[_b];for(var _d=0;_d<_itemsname.length;_d++ ){if(_itemsname[_d]==_b){_itemsname.splice(_d+1,_d+1);}}return true;};_pGoogleMap.on_load_handler=function(_a,_b,_c,_d,_e,_f){this.on_fire_onload(this,_a,_b,_c,_d,_e,_f);};_pGoogleMap.on_error_handler=function(_a,_b,_c){this.on_fire_onerror(this,_a,_b,_c);};_pGoogleMap.on_recvsuccess_handler=function(_a,_b,_c,_d,_e,_f){this.on_fire_onrecvsuccess(this,_a,_b,_c,_d,_e,_f);};_pGoogleMap.on_centerchanged_handler=function(_a,_b,_c,_d,_e){this.on_fire_oncenterchanged(this,_a,_b,_c,_d,_e);};_pGoogleMap.on_click_handler=function(_a,_b){this.on_fire_onclick(this,_a,_b);};_pGoogleMap.on_drag_handler=function(_a,_b){this.on_fire_ondrag(this,_a,_b);};_pGoogleMap.on_mapdragstart_handler=function(_a,_b){this.on_fire_onmapdragstart(this,_a,_b);};_pGoogleMap.on_mapdrag_handler=function(_a,_b){this.on_fire_onmapdrag(this,_a,_b);};_pGoogleMap.on_mapdragend_handler=function(_a,_b){this.on_fire_onmapdragend(this,_a,_b);};_pGoogleMap.callMethod=function(_a){if(this._ifrm_elem){this._ifrm_elem.callScriptMethod(_a);}};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=0;this.longitude=0;this.latitude=0;this.text="";this.imageurl="";this.visible=true;this.draggable=false;this.style={_GoogleMapMarkerID:0,set_parentID:function(_b){this._GoogleMapMarkerID=_b;},align:{_GoogleMapMarkerID:0,set_parentID:function(_b){this._GoogleMapMarkerID=_b;},halign:"center",valign:"middle",set_halign:function(_b){var _c=_b.toString().split(" ").join("").toLowerCase();if(_c=="left"||_c=="center"||_c=="right"){this.halign=_c;return true;}else{return false;}},set_valign:function(_b){var _c=_b.toString().split(" ").join("").toLowerCase();if(_c=="top"||_c=="middle"||_c=="bottom"){this.valign=_c;return true;}else{return false;}},$s:function(_a,_b,_c){this[_a]=_c;}},set_align:function(_b){var _c=_b.split(" ");var _d=true;if(_c.length!=2){return false;}_d=this.align.set_halign(_c[0]);if(!_d){return _d;}_d=this.align.set_valign(_c[1]);return _d;},$s:function(_a,_b,_c){this[_a]=_c;}};this._name=null;};var _pGoogleMapMarker=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);nexacro.GoogleMapMarker.prototype=_pGoogleMapMarker;_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapMarker.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapMarker.set_text=function(_a){this.text=_a;return true;};_pGoogleMapMarker.set_imageurl=function(_a){if(_a){this._type=1;}else{this._type=0;}this.imageurl=_a;return true;};_pGoogleMapMarker.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMapMarker.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=2;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this._name=null;};var _pGoogleMapPolyline=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);nexacro.GoogleMapPolyline.prototype=_pGoogleMapPolyline;_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){var _b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;return true;};_pGoogleMapPolyline.set_linewidth=function(_a){try{this.linewidth=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapPolyline.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolyline.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=3;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.fillbrushcolor="";this._name=null;};var _pGoogleMapPolygon=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);nexacro.GoogleMapPolygon.prototype=_pGoogleMapPolygon;_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){var _b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;return true;};_pGoogleMapPolygon.set_linewidth=function(_a){try{this.linewidth=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapPolygon.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){this.fillbrushcolor=_a;return true;};_pGoogleMapPolygon.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=4;this.longitude=0;this.latitude=0;this.radius=100;this.visible=true;this._name=null;};var _pGoogleMapCircle=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);nexacro.GoogleMapCircle.prototype=_pGoogleMapCircle;_pGoogleMapCircle._type_name="GoogleMapCircle";_pGoogleMapCircle.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapCircle.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapCircle.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};_pGoogleMapCircle.set_radius=function(_a){this.radius=(_a==null)?100:Number(_a.toString());};}}else if((nexacro.Device&&nexacro._OS!="Windows")||nexacro._Browser!="Runtime"&&!(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8)){nexacro.googlemaps_loaded=false;nexacro.googlemaps_callback=function(){nexacro.googlemaps_loaded=true;};nexacro.load_googlemaps=function(_a,_b,_c){if(nexacro.googlemaps_loaded){return;}var _d=document.createElement("script");var _e="";_d.type="text/javascript";if(_a){_e+="key="+_a+"&";}if(_b){_e+="language="+_b+"&";}if(_c){_e+="region="+_c+"&";}_e+="callback=nexacro.googlemaps_callback";_d.src="https://maps.googleapis.com/maps/api/js?"+_e;document.body.appendChild(_d);};nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this.latitude=0;this.longitude=0;this.centerlocation={latitude:0,longitude:0};this.location={latitude:0,longitude:0};this.coordinates={latitude:0,longitude:0};this._map_elem=null;this._google_map=null;this.maptype=0;this.viewmode=0;this.zoomlevel=15;this.zoomalign_halign="left";this.zoomalign_valign="top";this.showmode=false;this.showzoom=false;this.shownavigator=false;this.showmapscale=false;this.enableevent=true;this.apikey=null;this.language=undefined;this.region=undefined;this.items=[];this.itemsname=[];this._itemsname=[];this._items=[];this._infowindowname=[];this._infowindow=[];this.bSensor=false;this.bLoaded=false;this.enable=true;this.draggable=false;this.googleloaded=null;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondragstart":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondragend":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onload":1,"onrecvsuccess":1,"onoverlayclick":1,"oncenterchanged":1,"onviewmodechanged":1,"onzoomchanged":1,"onmapdragstart":1,"onmapdrag":1,"onmapdragend":1,"onerror":1,"ondevicebuttonup":1};};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_itemsname=[];_items=[];_infowindowname=[];_infowindow=[];_pGoogleMap.on_create_contents=function(){var _a=this.getElement();if(_a){this._map_elem=new nexacro.Element(_a);this._map_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pGoogleMap.on_create_contents_command=function(){var _a=this.getElement();if(_a){this._map_elem=new nexacro.Element(_a);this._map_elem.setElementSize(this._getClientWidth(),this._getClientHeight());this._map_elem.setElementTypeCSSSelector("nexamap");return this._map_elem.createCommand();}return "";};_pGoogleMap.on_attach_contents_handle=function(_a){if(this._map_elem){this._map_elem.attachHandle(_a);}};_pGoogleMap.on_created_contents=function(_a){var _b=this._map_elem;if(_b){_b.setElementTypeCSSSelector("nexamap");_b.create(_a);this.document=_b._document;this.window=_b._winodw;}};_pGoogleMap.on_destroy_contents=function(){var _a=this._map_elem;if(_a){_a.destroy();this._map_elem=null;}};_pGoogleMap.on_change_containerRect=function(_a,_b){var _c=this._map_elem;if(_c){_c.setElementSize(_a,_b);}};_pGoogleMap.on_apply_text=function(){var _a=this._control_element;if(this._control_element){var _b=this._text_elem;if(!_b){_b=new nexacro.TextBoxElement(_a);this._text_elem=_b;_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementAlign(this.currentstyle.align);if(this._is_created){_b.create();}}if(this.text!=""){_b.setElementText(this.text);this._text_width= -1;this._text_height= -1;if(this._img_elem){this._updateElementPositions(this.currentstyle.align,this.currentstyle.imagealign);}}else{_b.setElementText("");this._text_width=0;this._text_height=0;if(this._img_elem){this._updateElementPositions(this.currentstyle.align,this.currentstyle.imagealign);}}}};_pGoogleMap.on_apply_expr=function(){var _a=this.getElement();var _b=this.expr;if(_a&&_b.length>0){_b=_b.trim().split(":");var _c=_b.length;var _d=new nexacro.ExprParser();var _e,_f;var _g;if(_c==1){_g=_b[0];}else{if(_b[0].trim().toUpperCase()!="EXPR"){_g=_b.join(":");}else{_g=_b.slice(1).join(":");}}_e=_d.makeExpr(this,_g);_f=nexacro._createInlineFunc(_e,[]);if(_f){try{this.set_text(_f.call(this));}catch(e){return;}}}};_pGoogleMap.on_apply_prop_taborder=function(){var _a=this._text_elem;if(_a){if(this.tabstop){_a.setElementTabIndex(this.taborder);}else{_a.setElementTabIndex( -1);}}};_pGoogleMap.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMap.set_zoomalign=function(_a,_b){if(_a=="halign"){this.zoomalign_halign=_b;}else if(_a=="valign"){this.zoomalign_valign=_b;}else{return false;}this.zoomalign=this._getalign(this.zoomalign_halign,this.zoomalign_valign);this._google_map_option_test={zoomControlOptions:{position:this.zoomalign,style:google.maps.ZoomControlStyle.DEFAULT}};return true;};_pGoogleMap.set_enableevent=function(_a){this.enableevent=nexacro._toBoolean(_a);return _a;};_pGoogleMap.set_viewmode=function(_a){if(_a!=null){this.viewmode=_a;if(this.bLoaded){this._google_map_option={mapTypeId:this._getMapType(this.viewmode)};this._google_map.setOptions(this._google_map_option);}return true;}else{return false;}};_pGoogleMap.set_showmode=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showmode=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showmode=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={mapTypeControl:this.showmode,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:this.modealign}};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_showmapscale=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showmapscale=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showmapscale=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={mapTypeControl:this.showmapscale};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_showmapscale=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showmapscale=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showmapscale=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={scaleControl:this.showmapscale};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_shownavigator=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.shownavigator=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.shownavigator=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={panControl:this.shownavigator};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_apikey=function(_a){if(_a==null){return false;}this.apikey=_a;};_pGoogleMap.set_language=function(_a){_a=nexacro._toString(_a);this.language=_a;};_pGoogleMap.set_region=function(_a){_a=nexacro._toString(_a);this.region=_a;};_pGoogleMap.set_zoomlevel=function(_a){this.zoomlevel=Number(_a.toString());};_pGoogleMap.set_enable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.enable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.enable=false;}if(this.bLoaded){this._google_map_option={draggable:this.enable};this._google_map.setOptions(this._google_map_option);}return true;}else{return false;}};_pGoogleMap.set_showzoom=function(_a){if(_a==null){return false;}if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showzoom=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showzoom=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={center:new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude),zoomControl:this.showzoom};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.load=function(_a,_b,_c,_d,_e,_f){var _g=this._google_map;if(nexacro.googlemaps_loaded==false){if(!_f){nexacro.load_googlemaps(this.apikey,this.language,this.region);}var _h=this;nexacro._OnceCallbackTimer.callonce(_h,function(){_h.load(_a,_b,_c,_d,_e,true);},500);return;}this._id=nexacro.Device.makeID();var _i=nexacro.Device._userCreatedObj[this._id]=this;var _j=0;var _k;if(_e){try{_j=_e.toString().split(" ").join("");}catch(e){return false;}if(_e.length==0){return false;}var _l=0;try{_l=Number(_e.toString());}catch(e){return false;}if(_l>=0){this.zoomlevel=_l;}else{return false;}}if(_d){if(_d==0||(typeof (_d)=="string"&&_d=="0")){this.viewmode=0;}else if(_d==1||(typeof (_d)=="string"&&_d=="1")){this.viewmode=1;}else if(_d==2||(typeof (_d)=="string"&&_d=="2")){this.viewmode=2;}else if(_d==3||(typeof (_d)=="string"&&_d=="3")){this.viewmode=3;}else{return false;}}else{this.viewmode=0;}if(_b&&_c){_j=0;try{_j=_b.toString().split(" ").join("");}catch(e){return false;}if(_j.length==0){return false;}try{_j=_c.toString().split(" ").join("");}catch(e){return false;}if(_j.length==0){return false;}var _m=0;var _n=0;try{_m=Number(_b.toString());}catch(e){return false;}if(_m!=_m){return false;}try{_n=Number(_c.toString());}catch(e){return false;}if(_n!=_n){return false;}this.centerlocation.latitude=_m;this.centerlocation.longitude=_n;this.latitude=_m;this.longitude=_n;_pGoogleMap.centerlocation={latitude:_m,longitude:_n};}if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.bSensor=true;}else{this.bSensor=false;}if(_d==null){this.viewmode=0;}}else{this.bSensor=false;}var _o=this._map_elem;if(_o){_o.create();}if(this.bSensor){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(_q){var _r=new google.maps.LatLng(_q.coords.latitude,_q.coords.longitude);_g.setCenter(_r);},function(){_i._apply_onerror({errorcode:"1503",errormsg:"Device provider disable"});});}else if(google.gears){var _p=google.gears.factory.create('beta.geolocation');_p.getCurrentPosition(function(_q){var _r=new google.maps.LatLng(_q.latitude,_q.longitude);_k=new google.maps.LatLng(_q.latitude,_q.longitude);_g.setCenter(_r);},function(){_i._apply_onerror({errorcode:"1503",errormsg:"Device provider disable"});});return false;}}else{_k=new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude);}this._google_map_option={center:_k,panControl:this.shownavigator,zoomControl:this.showzoom,mapTypeControl:this.showmode,scaleControl:this.showmapscale,zoom:this.zoomlevel,disableDefaultUI:true,draggable:this.enable,mapTypeId:_pGoogleMap._getMapType(this.viewmode)};_g=new google.maps.Map(_o.handle,this._google_map_option);this._google_map=_g;_pGoogleMap._google_map=this._google_map;for(var _q=0;_q<this.itemsname.length;_q++ ){if(this.items[this.itemsname[_q]]._type==0||this.items[this.itemsname[_q]]._type==1){_pGoogleMap.addMarker(this.itemsname[_q],this.items[this.itemsname[_q]]);}else if(this.items[this.itemsname[_q]]._type==2){_pGoogleMap.addPolyline(this.itemsname[_q],this.items[this.itemsname[_q]]);}else if(this.items[this.itemsname[_q]]._type==3){_pGoogleMap.addPolygon(this.itemsname[_q],this.items[this.itemsname[_q]]);}else if(this.items[this.itemsname[_q]]._type==4){_pGoogleMap.addCircle(this.itemsname[_q],this.items[this.itemsname[_q]]);}}google.maps.event.addListener(_g,'click',function(_r){if(_i.onclick&&_i.onclick._has_handlers&&_i.enableevent){_i.location.latitude=_r.latLng.lat();_i.location.longitude=_r.latLng.lng();var _s=new nexacro.GoogleMapClickEventInfo(_i,"onclick",_i.location);_i.onclick._fireEvent(this,_s);}return true;});google.maps.event.addListenerOnce(_g,'tilesloaded',function(){_i.bLoaded=true;_i._apply_onload();google.maps.event.addListenerOnce(_g,'tilesloaded',function(){});});google.maps.event.addListener(_g,'dragstart',function(_r){});google.maps.event.addListener(_g,'mouseout',function(_r){});google.maps.event.addListener(_g,'dragenter',function(_r){});google.maps.event.addListener(_g,'drag',function(_r){});google.maps.event.addListener(_g,'dragend',function(_r){});google.maps.event.addListener(_g,'center_changed',function(_r){var _s=_g.getCenter().lat();var _t=_g.getCenter().lng();_i.centerlocation.latitude=_s;_i.centerlocation.longitude=_t;_i.latitude=_s;_i.longitude=_t;if(_i.oncenterchanged&&_i.oncenterchanged._has_handlers&&_i.enableevent){var _u=new nexacro.GoogleMapEventInfo(_i,"oncenterchanged",_i.centerlocation,_i.coordinates,_i.viewmode,_i.zoomlevel,_i.addresses);_i.oncenterchanged._fireEvent(this,_u);}return true;});google.maps.event.addListener(_g,'maptypeid_changed',function(_r){if(_i.onviewmodechanged&&_i.onviewmodechanged._has_handlers&&_i.enableevent){var _s=new nexacro.GoogleMapEventInfo(_i,"onviewmodechanged",_i.centerlocation,_i.coordinates,_i.viewmode,_i.zoomlevel,_i.addresses);_i.onviewmodechanged._fireEvent(this,_s);}return true;});google.maps.event.addListener(_g,'zoom_changed',function(_r){if(_i.onzoomchanged&&_i.onzoomchanged._has_handlers&&_i.enableevent){_i.zoomlevel=_g.getZoom();var _s=new nexacro.GoogleMapEventInfo(_i,"onzoomchanged",_i.centerlocation,_i.coordinates,_i.viewmode,_i.zoomlevel,_i.addresses);_i.onzoomchanged._fireEvent(this,_s);}return true;});return true;};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){this.items[_a].location.latitude=_b;this.items[_a].location.longitude=_c;};_pGoogleMap.getAddress=function(_a,_b,_c,_d){if(_a==null||_b==null||_c<0){return false;}if(_c==null){_c=1;}var _e='{"nLatitude":"'+_a+'","nLongitude":"'+_b+'","nMaxResultCount":"'+_c+'","strLocale":"'+_d+'"}';var _f='{"id":'+this._id+', "div":"NexacroMap", "method":"getAddress", "params":'+_e+'}';nexacro.Device.exec(_f);return true;};_pGoogleMap.getCoordinates=function(_a){if(_a==null||_a==""){return false;}var _b='{"straddress":"'+_a+'"}';var _c='{"id":'+this._id+', "div":"NexacroMap", "method":"getCoordinates", "params":'+_b+'}';nexacro.Device.exec(_c);return true;};_pGoogleMap.addItem=function(_a,_b){this._id=nexacro.Device.makeID();var _c=nexacro.Device._userCreatedObj[this._id]=this;if(_a==null||_b==null){return false;}if(_a==""||_b==""||_b=="undefined"||_a.trim()==""){return false;}if(typeof (this.items[_a])!="undefined"){this._apply_onerror({errorcode:"1501",errormsg:"item is already exist."});return false;}if(_b instanceof nexacro.GoogleMapMarker||_b instanceof nexacro.GoogleMapPolyline||_b instanceof nexacro.GoogleMapPolygon||_b instanceof nexacro.GoogleMapCircle){this.items[_a]=_b;this.items.push(_a);if(this.bLoaded){if(_b._type==0||_b._type==1){_pGoogleMap.addMarker(_a,_b,_c,this);}else if(_b._type==2){_pGoogleMap.addPolyline(_a,_b);}else if(_b._type==3){_pGoogleMap.addPolygon(_a,_b);}else if(_b._type==4){_pGoogleMap.addCircle(_a,_b);}}return true;}else{return false;}};_pGoogleMap.setMarkerOptions=function(_a,_b){if(typeof (_infowindow[_a])=="undefined"){var _c=new google.maps.InfoWindow({content:""});_infowindowname.push(_a);_infowindow[_a]=_c;}var _d;if(_b.imageurl.length>0){var _e=_b.imageurl.toString().split(" ").join("");var _f="";if(_e.substring(0,9).toLowerCase()=="%userapp%"){_f="../"+_e.substring(9,_e.length);}else{_f=_e;}_d={position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,icon:_f,draggable:_b.draggable};}else{_d={position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,draggable:_b.draggable};}var _g="<div title=\"\" style='width:100%;height:100%;'><div title=\"\" style='vertical-align:"+_b.style.align.valign+";text-align:"+_b.style.align.halign+";'>"+_b.text+"</div></div>";_infowindow[_a].setContent(_g);google.maps.event.addListener(_items[_a],'click',function(_h){if(_items[_a].title.length>0){_infowindow[_a].open(_pGoogleMap._google_map,_items[_a]);}});google.maps.event.addListener(_items[_a],'drag',function(_h){});google.maps.event.addListener(_pGoogleMap._google_map,'click',function(_h){_infowindow[_a].close();});if(!_d.visible&&_infowindow[_a]!=null){_infowindow[_a].close();}_items[_a].setOptions(_d);};_pGoogleMap.addMarker=function(_a,_b,_c,_d){if(typeof (_infowindow[_a])=="undefined"){var _e=new google.maps.InfoWindow({content:""});_infowindowname.push(_a);_infowindow[_a]=_e;}var _f="<div title=\"\" style='width:100%;height:100%;'><div title=\"\" style='vertical-align:"+_b.style.align.valign+";text-align:"+_b.style.align.halign+";'>"+_b.text+"</div></div>";_infowindow[_a].setContent(_f);var _g;if(_b.imageurl.length>0){var _h=_b.imageurl.toString().split(" ").join("");var _i="";if(_h.substring(0,9).toLowerCase()=="%userapp%"){_i=_h.substring(9,_h.length);if(_i.charAt(0)!="/"){_i="/"+_i;}_i=nexacro.System.userapppath+_i;}else{_i=_h;}_g=new google.maps.Marker({position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,icon:_i,draggable:_b.draggable});}else{_g=new google.maps.Marker({position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,draggable:_b.draggable});}google.maps.event.addListener(_g,'dragstart',function(_j){if(_c.onmapdragstart&&_c.onmapdragstart._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdragstart",_b._location);_c.onmapdragstart._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'drag',function(_j){if(_c.onmapdrag&&_c.onmapdrag._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdrag",_b._location);_c.onmapdrag._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'dragend',function(_j){if(_c.onmapdragend&&_c.onmapdragend._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdragend",_b._location);_c.onmapdragend._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'click',function(_j){if(_g.title.length>0){_infowindow[_a].open(_pGoogleMap._google_map,_g);}_pGoogleMap.gmap_onoverlayclick(_b,_j.latLng.lat(),_j.latLng.lng(),_j.pixel.x,_j.pixel.y);});google.maps.event.addListener(_g,'drag',function(_j){});_g.setMap(_pGoogleMap._google_map);_pGoogleMap._google_map.setCenter(_g.getPosition());_itemsname.push(_a);_items[_a]=_g;_b._map=this;_b._name=_a;};_pGoogleMap.setPolygonOptions=function(_a,_b){var _c=[];var _d,_e,_f,_g;_d=_b.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _h;if(typeof (this.parent.nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_h=this.parent.nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_h=_b.linecolor;}var _i;if(typeof (this.parent.nexacro._xreNamedColorList[_b.fillbrushcolor])!="undefined"){_i=this.parent.nexacro._xreNamedColorList[_b.fillbrushcolor]+"FF";}else{_i=_b.fillbrushcolor;}var _j;var _k=1.0;if(_h.length>7){_j=parseInt(_h.substring(7),16);_k=_j/255.0;}var _l;var _m=1.0;if(_i.length>7){_l=parseInt(_i.substring(7),16);_m=_l/255.0;}var _n={paths:_c,strokeColor:_h.substring(0,7),strokeOpacity:_k,strokeWeight:_b.linewidth,fillColor:_i.substring(0,7),fillOpacity:_m,visible:_b.visible};google.maps.event.addListener(_items[_a],'click',function(_o){_pGoogleMap.gmap_onoverlayclick(_items[_a],_o.latLng.lat(),_o.latLng.lng(),0,0);});_items[_a].setOptions(_n);};_pGoogleMap.addPolygon=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _n=0;_n<(_d.length-1);_n++ ){_e=_d[_n].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_n].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;if(typeof (nexacro._xreNamedColorList[_b.fillbrushcolor])!="undefined"){_h=nexacro._xreNamedColorList[_b.fillbrushcolor]+"FF";}else{_h=_b.fillbrushcolor;}var _i;var _j=1.0;if(_g.length>7){_i=parseInt(_g.substring(7),16);_j=_i/255.0;}var _k;var _l=1.0;if(_h.length>7){_k=parseInt(_h.substring(7),16);_l=_k/255.0;}var _m=new google.maps.Polygon({paths:_c,strokeColor:_g.substring(0,7),strokeOpacity:_j,strokeWeight:_b.linewidth,fillColor:_h.substring(0,7),fillOpacity:_l,visible:_b.visible});_m.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_m;_b._map=this;_b._name=_a;google.maps.event.addListener(_items[_a],'click',function(_o){_pGoogleMap.gmap_onoverlayclick(_b,_o.latLng.lat(),_o.latLng.lng(),0,0);});};_pGoogleMap.setPolylineOptions=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _k=0;_k<(_d.length-1);_k++ ){_e=_d[_k].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_k].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (this.parent.nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=this.parent.nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;var _i=1.0;if(_g.length>7){_h=parseInt(_g.substring(7),16);_i=_h/255.0;}var _j={path:_c,strokeColor:_g.substring(0,7),strokeOpacity:_i,strokeWeight:_b.linewidth,visible:_b.visible};google.maps.event.addListener(_items[_a],'click',function(_l){_pGoogleMap.gmap_onoverlayclick(_items[_a],_l.latLng.lat(),_l.latLng.lng(),0,0);});_items[_a].setOptions(_j);};_pGoogleMap.addPolyline=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _k=0;_k<(_d.length-1);_k++ ){_e=_d[_k].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_k].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;var _i=1.0;if(_g.length>7){_h=parseInt(_g.substring(7),16);_i=_h/255.0;}var _j=new google.maps.Polyline({path:_c,strokeColor:_g.substring(0,7),strokeOpacity:_i,strokeWeight:_b.linewidth,visible:_b.visible});_j.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_j;_b._map=this;_b._name=_a;google.maps.event.addListener(_items[_a],'click',function(_l){_pGoogleMap.gmap_onoverlayclick(_b,_l.latLng.lat(),_l.latLng.lng(),0,0);});};_pGoogleMap.setCircleOptions=function(_a,_b){_items[_a].setOptions(_b);};_pGoogleMap.addCircle=function(_a,_b){var _c=new google.maps.Circle({fillOpacity:0,strokeWeight:1.5,center:new google.maps.LatLng(_b.latitude,_b.longitude),radius:_b.radius,visible:_b.visible});_c.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_c;_b._map=this;_b._name=_a;};_pGoogleMap.removeItem=function(_a){if(_a==null){return false;}if(_a==""){return false;}if(typeof (this.items[_a])=="undefined"){this._apply_onerror({errorcode:"1502",errormsg:"item is not exist."});return false;}else{delete this.items[_a];for(var _c=0;_c<this.items.length;_c++ ){if(this.items[_c]==_a){var _b=this.items.indexOf(this.items[_c]);this.items.splice(_b,_c+1);}}if(this.bLoaded){_pGoogleMap._removeItem(_a);}return true;}};_pGoogleMap.gmap_ondrag=function(_a,_b){this.on_fire_ondragstart(this,new nexacro.GoogleMapDragEventInfo("ondrag"));};_pGoogleMap.gmap_ondragenter=function(_a){this._fire_ondragenter(this,new nexacro.GoogleMapDragEventInfo("ondragenter"));};_pGoogleMap.gmap_ondragmove=function(_a,_b){this._location.latitude=_a;this._location.longitude=_b;this.centerlocation.latitude=this._location.latitude;this.centerlocation.longitude=this._location.longitude;this.latitude=this._location.latitude;this.longitude=this._location.longitude;};_pGoogleMap.gmap_ondragleave=function(_a){this._fire_ondragleave(this,new nexacro.GoogleMapDragEventInfo("ondragleave"));};_pGoogleMap.gmap_dragend=function(_a,_b){this._location.latitude=_a;this._location.longitude=_b;};_pGoogleMap.gmap_onclick=function(_a,_b,_c,_d){this._location.latitude=_a;this._location.longitude=_b;this._pixel.x=_c;this._pixel.y=_d;this.kindClick="normalclick";};_pGoogleMap.gmap_onoverlayclick=function(_a,_b,_c,_d,_e){this._location.latitude=_b;this._location.longitude=_c;this._pixel.x=_d;this._pixel.y=_e;this.overlayfromobj=_a;this.kindClick="overlayclick";};_pGoogleMap._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){};_pGoogleMap._on_sys_click=function(_a,_b,_c){var _d=_b.changedTouches?_b.changedTouches[0]:_b;nexacro.ajaxlog("_on_sys_click"+_d.screenx+","+_d.screeny+":"+_a+":"+_d+":"+_c+"]");if(this.$IsReadyFireEvent()&&this.$isEnable()&&this.enableevent){if(this.kindClick=="normalclick"){this._fire_onclick(_a._comp,_d);}else{if(this.kindClick=="overlayclick"&&typeof (this.overlayfromobj)!="undefined"){this._fire_onoverlayclick(_a._comp,_d);}}}return true;};_pGoogleMap._fire_onclick=function(_a,_b){if(this.onclick._has_handlers&&this.enableevent){this.bClicked=false;var _c=new nexacro.GoogleMapClickEventInfo(this,_a,"onclick",_b,this._location,this._pixel);return this.onclick._fireEvent(this,_c);}else{this.bClicked=true;}return false;};_pGoogleMap._fire_onoverlayclick=function(_a,_b){if(this.onoverlayclick&&this.onoverlayclick._has_handlers&&this.enableevent){var _c=new nexacro.GoogleMapClickEventInfo(this,this.overlayfromobj,"onoverlayclick",_b,this._location,this._pixel);return this.onoverlayclick._fireEvent(this,_c);}};_pGoogleMap._apply_onload=function(){if(this.enable==false){}else if(this.enable==true){}this.on_fire_onload(this);};_pGoogleMap.on_fire_onload=function(_a){if(this.onload&&this.onload._has_handlers&&this.enableevent){var _b=new nexacro.GoogleMapEventInfo(_a,"onload",this.centerlocation,this.coordinates,this.viewmode,this.zoomlevel,this.addresses);return this.onload._fireEvent(this,_b);}};_pGoogleMap._onrecvsuccess=function(_a){if(this.enableevent){if(_a.latitude==undefined||_a.latitude==null||_a.latitude==""||_a.longitude==undefined||_a.longitude==null||_a.longitude==""){this.on_fire_onrecvsuccess(this,_a.eventid,_a.addresses,this.coordinates);}else{this.coordinates.latitude=_a.latitude;this.coordinates.longitude=_a.longitude;this.on_fire_onrecvsuccess(this,_a.eventid,_a.addresses,this.coordinates);}}};_pGoogleMap.on_fire_onrecvsuccess=function(_a,_b,_c,_d){if(this.enableevent){var _e=new nexacro.GoogleMapEventInfo(_a,_b,this.centerlocation,this.coordinates,this.viewmode,this.zoomlevel,_c);return this.onrecvsuccess._fireEvent(this,_e);}};_pGoogleMap._apply_onerror=function(_a){if(this.enableevent){var _b=nexacro._executeGlobalEvalStr(_a);this.on_fire_onerror(this,_b);}};_pGoogleMap.on_fire_onerror=function(_a,_b){if(this.enableevent){var _c=new nexacro.GoogleMapErrorEventInfo(this,"onerror",_b.errorcode,_b.errormsg);return this.onerror._fireEvent(this,_c);}};_pGoogleMap.__onDragEnter=function(_a,_b){console.debug("__ondragEnter");};_pGoogleMap._getalign=function(_a,_b){if(_a=="left"){if(_b=="top"){return google.maps.ControlPosition.TOP_LEFT;}else if(_b=="middle"){return google.maps.ControlPosition.LEFT;}else if(_b=="bottom"){return google.maps.ControlPosition.LEFT_BOTTOM;}}else if(_a=="center"){if(_b=="top"){return google.maps.ControlPosition.TOP;}else if(_b=="bottom"){return google.maps.ControlPosition.BOTTOM;}}else if(_a=="right"){if(_b=="top"){return google.maps.ControlPosition.TOP_LEFT;}else if(_b=="middle"){return google.maps.ControlPosition.RIGHT;}else if(_b=="bottom"){return google.maps.ControlPosition.RIGHT_BOTTOM;}}};_pGoogleMap._getMapType=function(_a){var _b;switch(_a){default:case 0:_b=google.maps.MapTypeId.ROADMAP;break;case 1:_b=google.maps.MapTypeId.SATELLITE;break;case 2:_b=google.maps.MapTypeId.HYBRID;break;case 3:_b=google.maps.MapTypeId.TERRAIN;break;}return _b;};_pGoogleMap.__map=function(){var _a=document.getElementById(this._id);var _b=_a.contentWindow||_a.contentDocument;return _b;};_pGoogleMap._set_option=function(){var _a=this._getMapType();return {center:new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude),mapTypeId:_a,zoom:this.zoomlevel,disableDefaultUI:true,mapTypeControl:this.showmode,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:this.modealign},scaleControl:this.showmapscale,scaleControlOptions:{position:this.mapscalealign},panControl:this.shownavigator,panControlOptions:{position:this.navigatoralign},zoomControl:this.showzoom,zoomControlOptions:{position:this.zoomalign,style:google.maps.ZoomControlStyle.SMALL}};};_pGoogleMap.map_starter=function(_a){this._google_map.setOptions(this.setOptions());};_pGoogleMap.__onTextchanged=function(){};_pGoogleMap._removeItem=function(_a){_items[_a].setMap(null);var _b;if(typeof (_items[_a].title)!="undefined"){delete _infowindow[_a];for(_b=0;_b<_infowindow.length;_b++ ){if(_infowindowname[_b]==_a){_infowindowname.splice(_b+1,_b+1);}}}delete _items[_a];for(_b=0;_b<_itemsname.length;_b++ ){if(_itemsname[_b]==_a){_itemsname.splice(_b+1,_b+1);}}return true;};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=0;this.enableevent=true;this.longitude=0;this.latitude=0;this._location={latitude:0,longitude:0};this.text="";this.visible=true;this.draggable=false;this.imageurl="";this.style={_GoogleMapMarkerID:0,set_parentID:function(_c){this._GoogleMapMarkerID=_c;},align:{_GoogleMapMarkerID:0,set_parentID:function(_c){this._GoogleMapMarkerID=_c;},halign:"center",valign:"middle",set_halign:function(_c){var _d=_c.toString().split(" ").join("").toLowerCase();if(_d=="left"||_d=="center"||_d=="right"){this.halign=_d;var _e=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_e._map!=null){_e._map.setMarkerOptions(_e._name,_e);}return true;}else{return false;}},set_valign:function(_c){var _d=_c.toString().split(" ").join("").toLowerCase();if(_d=="top"||_d=="middle"||_d=="bottom"){this.valign=_d;var _e=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_e._map!=null){_e._map.setMarkerOptions(_e._name,_e);}return true;}else{return false;}},$s:function(_a,_c,_d){var _e=this[_c];if(_e){return _e.call(this,_d);}return (this[_a]=_d);}},image:"",set_align:function(_c){var _d=_c.split(" ");var _e=true;if(_d.length!=2){return false;}_e=this.align.set_halign(_d[0]);if(!_e){return _e;}_e=this.align.set_valign(_d[1]);var _f=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_f._map!=null){_f._map.setMarkerOptions(_f._name,_f);}return _e;},$s:function(_a,_c,_d){var _e=this[_c];if(_e){return _e.call(this,_d);}return (this[_a]=_d);}};this._map=null;this._name=null;this.style.set_parentID(this._id);this.style.align.set_parentID(this._id);};var _pGoogleMapMarker=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);nexacro.GoogleMapMarker.prototype=_pGoogleMapMarker;_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.longitude)){return false;}this._location.longitude=this.longitude;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.latitude)){return false;}this._location.latitude=this.latitude;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_text=function(_a){this.text=_a;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMapMarker.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_imageurl=function(_a){this._type=1;this.imageurl=_a;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_style=function(_a){var _b=_a.split(";");var _c;var _d;var _e=true;for(_c=0;_c<_b.length;_c++ ){_d=_b[_c].split(":");if(_d.length!=2){return false;}else if(_d[0].split(" ").join("").toLowerCase()=="align"){_e=this.style.set_align(_d[1]);}else{_e=false;}if(!_e){return _e;}}if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return _e;};nexacro._addRegisterClass("GoogleMapMarker","nexacro.GoogleMapMarker");}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=2;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.enableevent=true;this._map=null;this._name=null;};var _pGoogleMapPolyline=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);nexacro.GoogleMapPolyline.prototype=_pGoogleMapPolyline;_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){var _b;_b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_linewidth=function(_a){var _b=0;try{_b=Number(_a.toString());}catch(e){return false;}if(_b!=_b){return false;}this.linewidth=_b;if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_linecolor=function(_a){this.linecolor=_a;return true;};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=3;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.fillbrushcolor="";this.enableevent=true;this._map=null;this._name=null;};var _pGoogleMapPolygon=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);nexacro.GoogleMapPolygon.prototype=_pGoogleMapPolygon;_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){var _b;_b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_linewidth=function(_a){var _b=0;try{_b=Number(_a.toString());}catch(e){return false;}if(_b!=_b){return false;}this.linewidth=_b;if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){this.fillbrushcolor=_a;return true;};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=4;this.longitude=0;this.latitude=0;this.enableevent=true;this.visible=true;this._map=null;this._name=null;this.radius=100;};var _pGoogleMapCircle=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);nexacro.GoogleMapCircle.prototype=_pGoogleMapCircle;_pGoogleMapCircle._type_name="GoogleCircle";_pGoogleMapCircle.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.longitude)){return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.latitude)){return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_radius=function(_a){if(_a==null){this.radius=100;}else{this.radius=Number(_a.toString());}};}}else{nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_pGoogleMap.showzoom=false;_pGoogleMap.language=undefined;_pGoogleMap.region=undefined;_pGoogleMap.set_viewmode=function(_a){};_pGoogleMap.set_zoomlevel=function(_a){};_pGoogleMap.set_showzoom=function(_a){_a=nexacro._toBoolean(_a);this.showzoom=_a;};_pGoogleMap.set_shownavigator=function(_a){};_pGoogleMap.set_showcompass=function(_a){};_pGoogleMap.set_showmapscale=function(_a){};_pGoogleMap.set_centerlocation=function(_a){};_pGoogleMap.set_showmode=function(_a){};_pGoogleMap.set_zoomalign=function(_a){};_pGoogleMap.set_navigatoralign=function(_a){};_pGoogleMap.set_mapscalealign=function(_a){};_pGoogleMap.set_draggable=function(_a){};_pGoogleMap.set_apikey=function(_a){this.apikey=_a;};_pGoogleMap.set_language=nexacro._emptyFn;_pGoogleMap.set_region=nexacro._emptyFn;_pGoogleMap.load=function(_a,_b,_c,_d,_e){};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){};_pGoogleMap.getAddress=function(_a,_b,_c,_d){};_pGoogleMap.getCoordinates=function(_a){};_pGoogleMap.addItem=function(_a,_b){};_pGoogleMap.setMarkerOptions=function(_a,_b){};_pGoogleMap.addMarker=function(_a,_b,_c){};_pGoogleMap.addPolyline=function(_a,_b,_c){};_pGoogleMap.removeItem=function(_a){};_pGoogleMap.on_fire_onclick=function(){};_pGoogleMap._removeItem=function(_a,_b){};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a,_b){};var _pGoogleMapMarker=nexacro.GoogleMapMarker.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_latitude=function(_a){};_pGoogleMapMarker.set_longitude=function(_a){};_pGoogleMapMarker.set_text=function(_a){};_pGoogleMapMarker.set_draggable=function(_a){};_pGoogleMapMarker.set_visible=function(_a){};_pGoogleMapMarker.set_style=function(_a){};}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a,_b){};var _pGoogleMapPolyline=nexacro.GoogleMapPolyline.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){};_pGoogleMapPolyline.set_linewidth=function(_a){};_pGoogleMapPolyline.set_linecolor=function(_a){};_pGoogleMapPolyline.set_visible=function(_a){};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a,_b){};var _pGoogleMapPolygon=nexacro.GoogleMapPolygon.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){};_pGoogleMapPolygon.set_linewidth=function(_a){};_pGoogleMapPolygon.set_linecolor=function(_a){};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){};_pGoogleMapPolygon.set_visible=function(_a){};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a,_b){};var _pGoogleMapCircle=nexacro.GoogleMapCircle.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);_pGoogleMapCircle._type_name="GoogleMapCircle";_pGoogleMapCircle.set_latitude=function(_a){};_pGoogleMapCircle.set_longitude=function(_a){};_pGoogleMapCircle.set_radius=function(_a){};_pGoogleMapCircle.set_visible=function(_a){};}}delete _pGoogleMap;delete _pGoogleMapMarker;delete _pGoogleMapPolyline;delete _pGoogleMapPolygon;delete _pGoogleMapCircle;}if(!nexacro.Sketch){nexacro.SketchLoadEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.url=_c;};var _pSketchLoadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SketchLoadEventInfo);nexacro.SketchLoadEventInfo.prototype=_pSketchLoadEventInfo;_pSketchLoadEventInfo._type_name="SketchLoadEventInfo";delete _pSketchLoadEventInfo;_pSketchLoadEventInfo=null;nexacro.SketchErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"onerror";this.errormsg=_d;this.errorobj=_a;this.errortype=_e;this.locationuri=_h;this.requesturi=_g;this.statuscode=_f?_f:0;};var _pSketchErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.SketchErrorEventInfo);nexacro.SketchErrorEventInfo.prototype=_pSketchErrorEventInfo;_pSketchErrorEventInfo._type_name="SketchErrorEventInfo";delete _pSketchErrorEventInfo;_pSketchErrorEventInfo=null;nexacro.SketchEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onsuccess";this.handle=_c;this.fromobject=this.fromreferenceobject=_a;};var _pSketchEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SketchEventInfo);nexacro.SketchEventInfo.prototype=_pSketchEventInfo;_pSketchEventInfo._type_name="SketchEventInfo";delete _pSketchEventInfo;nexacro.Sketch=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._history=[];this._image_format=["bmp","gif","jpeg","jpg","png","tif","tiff","icon"];this._default_stroke_style=nexacro.ColorObject("black");this._currentPath=[];this._path_style={};};var _pSketch=nexacro._createPrototype(nexacro.Component,nexacro.Sketch);nexacro.Sketch.prototype=_pSketch;_pSketch._type_name="Sketch";_pSketch.undoable=false;_pSketch.redoable=false;_pSketch.editmode="stroke";_pSketch.enableredraw=true;_pSketch.imemode="none";_pSketch.usecontextmenu=true;_pSketch.text="";_pSketch.texteditmode="text";_pSketch.readonly=false;_pSketch.undocount=5;_pSketch.undotype="draw";_pSketch.value=null;_pSketch.sketchtextarea=null;_pSketch.accessibilityrole="image";_pSketch._canvas_elem_bg=null;_pSketch._canvas_elem=null;_pSketch._canvas_elem_tmp=null;_pSketch._current_strokes=null;_pSketch._image=null;_pSketch._clr_history=true;_pSketch._current_state= -1;_pSketch._freeze_state= -1;_pSketch._drawpathcount=0;_pSketch._const_stroke="stroke";_pSketch._const_stroke_user="strokeu";_pSketch._const_text="text";_pSketch._const_erase="erase";_pSketch._const_none="none";_pSketch._const_erase_user="eras_handleeu";_pSketch._const_image="image";_pSketch._const_composit_source_over="source-over";_pSketch._const_composit_destination_out="destination-out";_pSketch._const_form="this.parent";_pSketch._const_dot=".";_pSketch._default_line_cap="round";_pSketch._default_line_join="round";_pSketch._default_line_width=1;_pSketch._default_edit_gap=0.5;_pSketch._default_edit_x=0;_pSketch._default_edit_y=0;_pSketch._default_edit_width=100;_pSketch._default_edit_height=50;_pSketch._startDrawStroke=true;_pSketch._startDrawErase=true;_pSketch._pre_draw_status="";_pSketch._butt_count=0;_pSketch._const_code_parameter="0001";_pSketch._const_code_io="1101";_pSketch._const_code_permission="1102";_pSketch._const_code_Irregular="1103";_pSketch._const_code_target="1104";_pSketch._const_code_loadinvalidimage="1105";_pSketch._const_code_incorrectfile="1106";_pSketch._const_code_savefile="1107";_pSketch._const_errortype_obj="ObjectError";_pSketch._const_errortype_type="TypeError";_pSketch._const_code_parameter_msg="comp_fail_parameter";_pSketch._const_code_loadinvalidimage_msg="comm_fail_loadinvalidimage";_pSketch._const_code_incorrectfile_msg="comp_incorrect_file";_pSketch._const_code_savefile_msg="comp_fail_save_file";_pSketch._is_undo=false;_pSketch._apply_client_padding=true;_pSketch._is_touch=false;_pSketch._img_type="url";_pSketch._touch_status=0;_pSketch._font=null;_pSketch._imgurl="";_pSketch._use_readonly_status=true;_pSketch._event_list={"oninit":1,"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"ontouch":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onlbuttondown":1,"onlbuttonup":1,"onmousemove":1,"onload":1,"onerror":1,"onsuccess":1,"onsize":1,"onmove":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousewheel":1,"onkeydown":1,"onkeyup":1,"oninput":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"oncontextmenu":1,"ondragmove":1,"ondevicebuttonup":1};_pSketch.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._color||this._getCurrentStyleInheritValue("color");nexacro.addErrorMessage(nexacro._getLanguage(),this._const_code_parameter_msg,"Parameter Error.");nexacro.addErrorMessage(nexacro._getLanguage(),this._const_code_savefile_msg,"Failed to save file.");this._canvas_elem=new nexacro.CanvasElement(_a);this._canvas_elem_tmp=new nexacro.CanvasElement(_a);var _c=new nexacro.SketchEditControl("sketchtextarea",this._default_edit_x,this._default_edit_y,this._default_edit_width,this._default_edit_height,null,null,null,null,null,null,this);_c._setControl("TextAreaControl");_c.createComponent();_c._setEventHandler("oninput",this.on_notify_oninput,this);_c._setEventHandler("onkillfocus",this.on_notify_edit_onkillfocus,this);this.sketchtextarea=_c;if(!this._font){this._font=this._getCurrentStyleInheritValue("font");}if(this.text){var _d=new nexacro.TextBoxElement(_a);_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementText(this.text);this._text_elem=_d;}this._path_style={tool:_b,globalCompositeOperation:this._const_composit_source_over,strokeColor:_b,lineWidth:this._default_line_width,eraseWidth:this._default_line_width,lineCap:this._default_line_cap,lineJoin:this._default_line_join,font:this._font||_c._getCurrentStyleInheritValue("font"),fontColor:_b,text:""};}};_pSketch.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._canvas_elem_bg;var _d=this._canvas_elem;var _e=this._canvas_elem_tmp;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._default_line_cap;var _i=this._default_line_join;if(_c){_c.create(_a);_c.setElementLineCap(_h);_c.setElementLineJoin(_i);_c.setElementSize(_f,_g);}if(_d){_d.create(_a);_d.setElementLineCap(_h);_d.setElementLineJoin(_i);_d.setElementSize(_f,_g);}if(_e){_e.create(_a);_e.setElementLineCap(_h);_e.setElementLineJoin(_i);}this.on_apply_text(this.text);var _j=this._text_elem;if(_j){_j.create(this._getWindow());_b.bringToFrontElement(this._canvas_elem);}var _k=this.sketchtextarea;_k.on_created();_k.set_width(this._default_edit_width);_k.set_height(this._default_edit_height);_k.set_imemode(this.imemode);_k.set_usecontextmenu(this.usecontextmenu);_k.set_readonly(this.readonly);_k.set_visible(false);}var _l=this._canvas_elem._getElementScreenXY();if(_l){this._screenX=_l.x;this._screenY=_l.y;}};_pSketch.on_create_contents_command=function(){return "";};_pSketch.on_attach_contents_handle=function(_a){var _b=this._canvas_elem_bg;var _c=this._canvas_elem;var _d=this._canvas_elem_tmp;if(_b){_b.create(_a);}if(_c){_c.create(_a);}if(_d){_d.create(_a);}var _e=this.getElement();if(_e){_b=this._canvas_elem_bg;_c=this._canvas_elem;_d=this._canvas_elem_tmp;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._default_line_cap;var _i=this._default_line_join;if(_b){_b.setElementLineCap(_h);_b.setElementLineJoin(_i);_b.setElementSize(_f,_g);}if(_c){_c.setElementLineCap(_h);_c.setElementLineJoin(_i);_c.setElementSize(_f,_g);}if(_d){_d.setElementLineCap(_h);_d.setElementLineJoin(_i);}this.on_apply_text(this.text);var _j=this._text_elem;if(_j){_j.create(this._getWindow());_e.bringToFrontElement(this._canvas_elem);}var _k=this.sketchtextarea;_k.on_created();_k.set_width(this._default_edit_width);_k.set_height(this._default_edit_height);_k.set_imemode(this.imemode);_k.set_usecontextmenu(this.usecontextmenu);_k.set_readonly(this.readonly);_k.set_visible(false);}var _l=this._canvas_elem._getElementScreenXY();if(_l){this._screenX=_l.x;this._screenY=_l.y;}};_pSketch.on_destroy_contents=function(){var _a=this._canvas_elem_bg;var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_a){_a.destroy();}if(_b){_b.destroy();}if(_c){_c.destroy();}};_pSketch.on_change_containerRect=function(_a,_b){if(this._canvas_elem){this._canvas_elem.setElementSize(_a,_b);}if(this._canvas_elem_bg){this._canvas_elem_bg.setElementSize(_a,_b);}var _c=this._text_elem;if(_c){_c.setElementSize(_a,_b);}if(this._adjust_height>0&&this._adjust_width>0){this._restoreSketch();}};_pSketch.on_change_containerPos=function(_a,_b){};_pSketch.set_enableredraw=function(_a){this.enableredraw=nexacro._toBoolean(_a);if(this.enableredraw){this._redrawPath();}return _a;};_pSketch.set_editmode=function(_a){var _b=this._const_stroke;switch(_a){case this._const_text:this.set_cursor("text");_b=_a;break;case this._const_erase:case this._const_none:this.set_cursor("default");_b=_a;break;case this._const_stroke:this.set_cursor("default");break;default:break;}this.editmode=_b;};_pSketch.set_imemode=function(_a){if(_a!=this.imemode){this.imemode=nexacro._toString(_a);this.on_apply_imemode();}};_pSketch.on_apply_imemode=function(){this.sketchtextarea.set_imemode(this.imemode);};_pSketch.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usecontextmenu){this.usecontextmenu=_a;this.on_apply_usecontextmenu();}};_pSketch.on_apply_usecontextmenu=function(){this.sketchtextarea.set_usecontextmenu(this.usecontextmenu);};_pSketch.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly(_a);}};_pSketch.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.sketchtextarea;if(_b){_b.set_readonly(this.readonly);}};_pSketch.set_value=function(_a){return;};_pSketch._set_value=function(_a){this.value=_a;this.on_apply_value();};_pSketch.on_apply_value=function(_a){this.sketchtextarea.set_value(this.value);};_pSketch.on_apply_color=function(_a){nexacro.Component.prototype.on_apply_color.call(this,_a);var _b=this.sketchtextarea;if(_b){_b.set_color(_a);}this._path_style.fontColor=this._color;};_pSketch.on_apply_text=function(_a){if(this._current_state!= -1){return;}var _b=this._control_element;if(_b){var _c=this._text_elem;if(!_c){_c=new nexacro.TextBoxElement(_b);this._text_elem=_c;this.on_apply_wordWrap();_c.setElementSize(this._getClientWidth(),this._getClientHeight());_c.setElementTextAlign("center");_c.setElementVerticalAlign("middle");if(this._is_created){_c.create(this._getRootWindow());_b.sendToBackElement(_c);}}_c.setElementText(_a);}};_pSketch.on_apply_wordWrap=function(){if(this._text_elem){this._text_elem.setElementWordWrap(this.wordWrap);}};_pSketch.loadSketch=function(_a){if(this.readonly){return;}this._imgurl=_a;return this._loadSketch(_a);};_pSketch.saveSketch=function(_a,_b){var _c=this._canvas_elem;if(_c){var _d=nexacro._ImageType.getImageType("base64",_a);var _e;_e=nexacro._ImageType.calcImageQuality(_d.datatype,_b);var _f;_f=_c.toDataURL(_d.datatype,_e);if(_f&&_f.src){_f.setBase64String(_f.src);this._set_value(_f);this.on_fire_onsuccess(_f);return true;}}return false;};_pSketch._restoreSketch=function(){var _a=this._currentStrokes();var _b=this._drawpathcount;this._drawpathcount=0;var _c=this._imgurl;if(_c){var _d="";var _e=this._img_type;if(_e=="url"){_d=nexacro._getURIValue(_c);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());}else{if(_c._base64str){_d=_c._base64str;}}if(!this._image){this._image=new nexacro.ImageSketchBackground(this);}this._image.set_src(_d);}for(var _f=0,_g=_a.length;_f<_g;_f++ ){this._regenStroke(_a[_f],this._canvas_elem);this._regenStroke(_a[_f],this._canvas_elem_tmp);}this._drawpathcount=_b;};_pSketch.saveSketchToFile=function(_a,_b,_c){var _d="";if(!_a){_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}var _e=nexacro._ImageType.getImageType("file",_b);_b=_e.type;if(_b=="JPG"&&!_c){_c=100;}if(_a.lastIndexOf(".")<0){var _f=_e.ext;_a=_a+this._const_dot+_f;}var _g=nexacro._saveToImageFile(this,_a,_b,_c,false,true);if(_g!==undefined){if(_g){if(typeof _g!="string"){_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}else{var _h=new nexacro.Image();_h.set_src(_g);_h.setBase64String(_h.src);this._set_value(_h);this.on_fire_onsuccess(_h);return true;}}else{_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}}return false;};_pSketch.undo=function(){if(this._checkEditmode()==false||this.readonly){return;}this._undo();};_pSketch.redo=function(){if(this._checkEditmode()==false||this.readonly){return;}this._redo();};_pSketch.on_getBindableProperties=function(){return "value";};_pSketch.updateToDataset=function(){var _a=this.applyto_bindSource("value",this.value);return _a;};_pSketch.setBrushType=function(_a){if(this._checkEditmode()==false){return;}switch(_a){case "square":case "butt":this._path_style.lineCap=_a;break;default:this._path_style.lineCap=this._default_line_cap;break;}};_pSketch.setBrushSize=function(_a){if(this._checkEditmode()==false){return;}if(_a>0){this._path_style.lineWidth=_a;}else{this._path_style.lineWidth=this._default_line_width;}};_pSketch.setBrushColor=function(_a){if(this._checkEditmode()==false){return;}if(_a){if(this._color==null||this._color.value!=_a){var _b=nexacro.ColorObject(_a);this._color=_b;this.on_apply_color(_b);}}else{if(this._color){this._color=null;this.on_apply_color(null);}}this._path_style.strokeStyle=this._color;};_pSketch.setTextFont=function(_a){if(this._checkEditmode()==false){return;}this.font=_a;if(_a){if(this._font==null||this._font.value!=_a){var _b=nexacro.FontObject(_a);this._font=_b;this._path_style.font=_b;}}else{if(this._font){this._font=null;this._path_style.font=this._getCurrentStyleInheritValue("font");}}var _c=this.sketchtextarea;if(_c){_c.set_font(_a);}};_pSketch.setEraseSize=function(_a){if(this._checkEditmode()==false){return;}_a= +_a;if(_a!=_a||_a<0){_a=this._default_line_width;}this._path_style.eraseWidth=_a;};_pSketch.drawText=function(_a,_b,_c,_d){if(this._checkEditmode()==false){return;}if(this.readonly){return;}var _e=this._canvas_elem;if(_e){this._initPath(this._path_style,this._const_text,_a,_b,true);var _f=this._currentPath[0];_f.text=_c;_f.globalCompositeOperation=this._const_composit_source_over;this._drawText(_f,_f.x,_f.y,_f.text,_d);}};_pSketch.drawStroke=function(_a,_b,_c){if(this._checkEditmode()==false||this.readonly){return;}if(!_a&&_a==undefined){return;}if(!_b&&_b==undefined){return;}_a=(_a>=0||_a<0)?_a:this._default_edit_x;_b=(_b>=0||_a<0)?_b:this._default_edit_y;_c=(!_c&&_c==undefined)?false:_c;if(this._startDrawStroke){_c=true;this._startDrawStroke=false;}this._drawStroke(this._path_style,this._const_stroke,_a,_b,_c);};_pSketch.drawErase=function(_a,_b,_c){if(this._checkEditmode()==false||this.readonly){return;}if(!_a&&_a==undefined){return;}if(!_b&&_b==undefined){return;}_a=(_a>=0||_a<0)?_a:this._default_edit_x;_b=(_b>=0||_a<0)?_b:this._default_edit_y;_c=(!_c&&_c==undefined)?false:_c;if(this._startDrawErase){_c=true;this._startDrawErase=false;}this._drawStroke(this._path_style,this._const_erase,_a,_b,_c);};_pSketch.drawStamp=function(){};_pSketch.drawTextBox=function(){};_pSketch.setStampImage=function(){};_pSketch.setTextBoxBkColor=function(){};_pSketch.moveTextEditor=function(){};_pSketch.resizeTextEditor=function(){};_pSketch.clear=function(){if(this._checkEditmode()==false){return;}this._clear(this._isEnableRedraw());if(this._current_state== -1){this.on_apply_text(this.getDisplayText());}};_pSketch.showTextEditor=function(_a,_b,_c,_d,_e){if(!(arguments.length>=4&&arguments.length<6)){return;}var _f=false;this._initPath(this._path_style,this._const_text,_a,_b,null,_c,_d,_e);if(_e!==undefined&&_e!=""){_f=true;}return this._showTextEditor(_a,_b,_c,_d,_e,_f);};_pSketch.hideTextEditor=function(_a){_a=(_a==true||_a==false)?_a:true;return this._hideTextEditor(_a);};_pSketch.redraw=function(){var _a=this.enableredraw;this.enableredraw=true;this._redrawPath();this.enableredraw=_a;};_pSketch.on_notify_edit_onkillfocus=function(_a,_b){var _c=_a.text;var _d=(_c.length>0)?true:false;var _e=true;if(_d){var _f=this._canvas_elem;if(_f){this._initPath(this._path_style,this._const_text,_a._left,_a._top,true);var _g=this._currentPath[0];_g.text=_c;_g.globalCompositeOperation=this._const_composit_source_over;this._drawText(_g,_g.x,_g.y,_g.text,_e);}}this._resetTextEdit(_d);};_pSketch._no_bubble_scroll=true;_pSketch.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this._no_bubble_scroll){_j=true;}return _j;};_pSketch.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(this._no_bubble_scroll){_k=true;}return _k;};_pSketch.on_fire_ontouchmove=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onmousemove("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e._canvasx,_e._canvasy,_c,_d);};_pSketch.on_fire_sys_ontouchmove=_pSketch.on_fire_ontouchmove;_pSketch.on_fire_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._getElementPositionInFrame(this.getElement(),true);this._moveAction(_a,_i,_j);return false;};_pSketch.on_fire_sys_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q){var _r=nexacro.Component.prototype.on_fire_sys_ondragmove.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q);this._moveAction(_e,_m,_n);return _r;};_pSketch.on_fire_sys_onmousemove=_pSketch.on_fire_onmousemove;_pSketch._moveAction=function(_a,_b,_c){if(_a=="lbutton"||_a=="touch"){if(this._checkEditmode()==false||this.readonly){return;}_c-=nexacro._getCurrentBodyScrollTop();if(_a=="touch"){if(this._touch_status==3){this._touch_status=0;}else if(this._touch_status==1){this._touch_status=2;}if(this._touch_status!=0){if(this._path_style.lineCap=="butt"){if(this._butt_count==3){this._drawPath(_b,_c);this._butt_count=0;}this._butt_count++ ;}else{this._drawPath(_b,_c);}}}else{if(this._path_style.lineCap=="butt"){if(this._butt_count==3){this._drawPath(_b,_c);this._butt_count=0;}this._butt_count++ ;}else{this._drawPath(_b,_c);}}}};_pSketch.on_fire_ontouchstart=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onlbuttondown("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e._canvasx,_e._canvasy,_c,_d);};_pSketch._on_touch_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._skipDragEventAfterMsgBox=false;var _n;var _o=this._getFromComponent(this);if(!_o.onlbuttondown||(_o.onlbuttondown&&!_o.onlbuttondown.defaultprevented)){this._on_onlbuttondown(_b,_c,_d,_e,_f,_g,_h,_i,_f,_g,_k,_l,false,_m);_n=this._on_bubble_touch_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_m);}return _n;};_pSketch._on_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._checkEditmode()==false){return;}if(this.readonly){if(this.sketchtextarea.visible){this.sketchtextarea.set_visible(false);}return;}this._delete_text();if(_a=="touch"){this._touch_status=1;this._is_touch=true;}_j-=nexacro._getCurrentBodyScrollTop();this.button=_a;this._initPath(this._path_style,this.editmode,(_i-this._default_edit_gap),_j);this._drawPath(_i,_j);};_pSketch.on_fire_sys_ontouchstart=_pSketch.on_fire_ontouchstart;_pSketch.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(nexacro._isTouchInteraction&&nexacro._SupportTouch&&!nexacro._enabletouchevent){return;}return this._on_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pSketch.on_fire_sys_onlbuttondown=_pSketch.on_fire_onlbuttondown;_pSketch.on_fire_ontouchend=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onlbuttonup("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e.clientx-this._screenX,_e.clienty-this._screenY,_c,_d);};_pSketch.on_fire_sys_ontouchend=_pSketch.on_fire_ontouchend;_pSketch.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._checkEditmode()==false||this.readonly){return;}if(_a=="touch"){this._touch_status=3;}this._endPath();if(_a=="touch"){this._delete_text();}};_pSketch.on_fire_sys_onlbuttonup=_pSketch.on_fire_onlbuttonup;_pSketch._endPath=function(){var _a=this._canvas_elem;if(!_a||this._currentPath.length==0){return;}var _b=this._currentPath[0];var _c=this._path_style;if(this.editmode==this._const_text&&!this.sketchtextarea.visible&&_b){var _d=_c.font;var _e=_c.fontColor;if(_d){_b.font=_c.font;}if(_e&&_e.value){_b.fontColor=nexacro.ColorObject(_e.value);}}this._regenStroke(this._currentPath,_a);this._regenStroke(this._currentPath,this._canvas_elem_tmp);};_pSketch.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pSketch.on_notify_oninput=function(){return this.on_fire_oninput();};_pSketch.on_fire_onload=function(_a,_b){var _c=this.onload;if(_c&&_c._has_handlers){var _d=new nexacro.SketchLoadEventInfo(this,"onload",_b);_c._fireEvent(this,_d);}};_pSketch.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){var _h=this.onerror;if(_h&&_h._has_handlers){var _i=new nexacro.SketchErrorEventInfo(this,"onerror",_b,_c,_d,_e,_f,_g);_h._fireEvent(this,_i);}};_pSketch.on_fire_onsuccess=function(_a){var _b=this.onsuccess;if(_b&&_b._has_handlers){var _c=new nexacro.SketchEventInfo(this,"onsuccess",_a);return this.onsuccess._fireEvent(this,_c);}};_pSketch._getDlgCode=function(_a,_b,_c,_d){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false,want_touchstart:true,want_touchmove:true};};_pSketch._refresh_contents=function(){};_pSketch._setImageValue=function(_a){if(_a instanceof nexacro.ImageSketchBackground){var _b=_a.getBase64String();if(!_b){var _c=this._canvas_elem.toDataURL();if(_c&&_c.src){_c.setBase64String(_c.src);this.value=_c;}}}};_pSketch._setImageType=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;this._img_type="base64";}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;this._img_type="base64";}else{this._img_type="url";}}}else{_a="";this._img_type="url";}};_pSketch._loadSketch=function(_a){var _b="";this._clearCanvas(this._isEnableRedraw());if(this._image){}this._setImageType(_a);var _c=this._img_type;if(_a){if(_c=="url"){_a=nexacro._getURIValue(_a);_a=nexacro._getImageLocation(_a,this._getRefFormBaseUrl());if(nexacro._OS=="iOS"&&nexacro._isHybrid()){var _d='{"div":"sketch", "method":"toBase64String", "params":"'+_a+'"}';_a=nexacro.Device.exec(_d,true);if(_a==""){_a=undefined;}else{_c=this._img_type="base64";}}}else{if(_a._base64str){_a=_a._base64str;}}}if(_a==undefined||arguments.length>1){_b=nexacro._GetSystemErrorMsg(this,this._const_code_parameter_msg);this.on_fire_onerror(this,this._const_code_parameter,_b,this._const_errortype_obj,this._const_code_parameter,_a,this._getRefFormBaseUrl());return false;}if(_c=="url"&&_a){var _e=_a.substring(_a.lastIndexOf(".")+1).toLowerCase();if((this._image_format).indexOf(_e)== -1){_b=nexacro._GetSystemErrorMsg(this,this._const_code_incorrectfile_msg);this.on_fire_onerror(this,this._const_code_incorrectfile,_b,this._const_errortype_type,this._const_code_incorrectfile,_a,this._getRefFormBaseUrl());return false;}}nexacro._getImageSize(_a,this._imageload,this,this.parent._getRefFormBaseUrl());if(!this._image||!(this._image instanceof nexacro.ImageSketchBackground)){this._image=null;this._image=new nexacro.ImageSketchBackground(this);}var _f=this._image.set_src(_a);if(_f){if(this._apply_client_padding){this._delete_text();}this._set_value(this._image);if(this._clr_history){this._initHistory();this._setRedoUndo();}return true;}return false;};_pSketch._imageload=function(_a,_b,_c,_d,_e){if(_b<=0){this._image=null;this._set_value(null);this.value=null;delete nexacro._ImgInfoCacheList[_a];nexacro._ImgInfoCacheList[_a]=null;}};_pSketch._drawText=function(_a,_b,_c,_d,_e){if(this.readonly){return;}if(!_d||_d.length==0){return;}var _f=this._canvas_elem;var _g=this._canvas_elem_tmp;if(_f){if(this._apply_client_padding){this._delete_text();}_b=(_b>=0||_b<0)? +_b:this._default_edit_x;_c=(_c>=0||_b<0)? +_c:this._default_edit_y;var _h=this._font;if(_h==null){_h=this.sketchtextarea._getCurrentStyleInheritValue("font");}_f.setElementFont(_h);_f.setElementGlobalCompositeOperation(_a.globalCompositeOperation);_g.setElementFont(_h);_g.setElementGlobalCompositeOperation(_a.globalCompositeOperation);var _i;if(_a.fontColor instanceof nexacro.ColorObject){_i=_a.fontColor;}else{_i=nexacro.ColorObject(_a.fontColor);}_f.setElementFillStyle(_i);_g.setElementFillStyle(_i);var _j=Number(_c);if(_e){if(_d!=""){_d=_d.replace(/&quot;/g,"\"");if(_d.indexOf("\r\n")!= -1||_d.indexOf("\n\r")!= -1){_d=_d.replace(/\r\n/g,"\n").replace(/\n\r/g,"\n");}else{if(_d.indexOf("\r")!= -1){_d=_d.replace(/\r/g,"");}}var _k=(_d.replace(/\\n/g,'\n')).split("\n");var _l=this.linspace?this.linspace:10;var _m="";if(_h){_m=_h._size;}for(var _n=0;_n<_k.length;_n++ ){if(this._isEnableRedraw()){_f.drawFillText(_k[_n],_b,_j);_g.drawFillText(_k[_n],_b,_j);}_j+=Number(_l)+Number(_m);}}}else{if(this._isEnableRedraw()){_f.drawFillText(_d,_b,_j);_g.drawFillText(_d,_b,_j);}}}};_pSketch._drawStroke=function(_a,_b,_c,_d,_e){if(this._checkEditmode()==false||this.readonly){return;}if(this._apply_client_padding){this._delete_text();}var _f=Number(_c);var _g=Number(_d);if(this._currentPath[0]&&this._currentPath[0].tool!=_b){_e=true;}if(_e==true){this._initPath(this._path_style,_b,_f,_g);this._drawPath(_f,_g);}else{this._drawPath(_f,_g);this._endPath();}};_pSketch._showTextEditor=function(_a,_b,_c,_d,_e){if(this._checkEditmode()==false){return;}var _f=0;var _g=null;var _h=this.sketchtextarea;var _i=_h.value;if(_e){_g=_e;_f= -1;}else{_g=_i;}if(_a>=0||_a<0){_h.set_left(_a);}else{_h.set_left(this._default_edit_x);}if(_b>=0||_a<0){_h.set_top(_b);}else{_h.set_top(this._default_edit_y);}if(_c>=0||_a<0){_h.set_width(Number(_c));}else{_h.set_width(Number(this._default_edit_width));}if(_d>=0||_a<0){_h.set_height(Number(_d));}else{_h.set_height(Number(this._default_edit_height));}_h.set_value(_g);if(this._isEnableRedraw()){_h.set_visible(true);_h.setFocus(true);_h.setCaretPos(_f);if(_e!==undefined&&_e!=""){if(_e.length>0){_h.setSelect(0,_e.length);}}}return _i;};_pSketch._hideTextEditor=function(_a){if(this._checkEditmode()==false){return;}var _b=this.sketchtextarea;var _c=_b.value;if(_a){_b.set_value(undefined);}if(this._isEnableRedraw()){_b.set_visible(false);this._control_element.setElementFocus();}return _c;};_pSketch._redrawPathData=function(_a){this._clearCanvas(this._isEnableRedraw());if(this._image){this._loadSketch(this._image.src);}for(var _b=0,_c=_a.length;_b<_c;_b++ ){this._regenStroke(_a[_b],this._canvas_elem);this._regenStroke(_a[_b],this._canvas_elem_tmp);}};_pSketch._undoPathData=function(_a){this._clearPathCanvas(this._isEnableRedraw());var _b=this._imgurl;if(_b){this._loadSketch(_b);}for(var _c=0,_d=_a.length;_c<_d;_c++ ){if(_a[_c][0].strokeStyle==undefined){_a[_c][0].strokeStyle=this._default_stroke_style;}this._regenStroke(_a[_c],this._canvas_elem);this._regenStroke(_a[_c],this._canvas_elem_tmp);}};_pSketch._redoPathData=function(_a){for(var _b=this._current_state,_c=_a.length;_b<_c;_b++ ){this._regenStroke(_a[_b],this._canvas_elem);this._regenStroke(_a[_b],this._canvas_elem_tmp);}};_pSketch._drawBcurve=function(_a,_b){var _c=_a.length-1;if(_c<1){return;}if(this.button=="touch"||this.button=="lbutton"){for(var _g=this._drawpathcount;_g<_c;_g++ ){var _d=_a[_g];var _e=_a[_g+1];if(_g==0){this._setupCanvasElem(_b,_d);}else{_b.moveTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}}else{for(var _g=this._drawpathcount;_g<_c;_g++ ){var _d=_a[_g];var _e=_a[_g+1];if(_g==this._drawpathcount){var _f=this._clone(_a[0]);_f.x=_d.x;_f.y=_d.y;this._setupCanvasElem(_b,_f);}else{_b.moveTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}}_b.stroke();};_pSketch._drawUserStroke=function(_a,_b){var _c=_a.length-1;if(_c<1){return;}for(var _f=0;_f<_c;_f++ ){var _d=_a[_f];var _e=_a[_f+1];if(_f==0){this._setupCanvasElem(_b,_d);_b.lineTo(_e.x,_e.y);_b.lineTo(_d.x,_d.y);}else{_b.moveTo(_d.x,_d.y);_b.lineTo(_e.x,_e.y);_b.lineTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}_b.stroke();};_pSketch._setupCanvasElem=function(_a,_b){_a.beginPath();_a.setElementLineCap(_b.lineCap);_a.setElementGlobalCompositeOperation(_b.globalCompositeOperation);_a.moveTo(_b.x,_b.y);switch(_b.tool){case this._const_erase:case this._const_erase_user:_a.setElementStrokeStyle(this._default_stroke_style);_a.setElementLineWidth(_b.eraseWidth+1.5);break;case this._const_stroke:case this._const_stroke_user:default:_a.setElementStrokeStyle(_b.strokeStyle);if(_b.lineWidth){_a.setElementLineWidth(_b.lineWidth);}}};_pSketch._regenStroke=function(_a,_b){if(this._isEnableRedraw()){var _c=this._clone(_a);var _d=(this._is_undo&&_c[0].tool!=this._const_text)?this._const_stroke_user:_c[0].tool;switch(_d){case this._const_text:{var _e=_c[0];this._drawText(_e,_e.x,_e.y,_e.text,true);}break;case this._const_stroke:case this._const_erase:{this._drawBcurve(_c,_b);}break;case this._const_stroke_user:case this._const_erase_user:{this._drawUserStroke(_c,_b);}break;}}};_pSketch._clone=function(_a){if(!_a||typeof (_a)!=='object'){return _a;}var _b=new _a.constructor();for(var _c in _a){if(!_a[_c]||typeof (_a[_c])!=='object'){_b[_c]=_a[_c];}else{_b[_c]=this._clone(_a[_c]);}}return _b;};_pSketch._undo=function(){if(this._undoable()){this._current_state-- ;this._current_strokes=null;this._is_undo=true;var _a=this._currentStrokes();this._clr_history=false;if(this._isEnableRedraw()){this._undoPathData(_a);this._setRedoUndo();if(this._current_state== -1&&!this._image){this.on_apply_text(this.getDisplayText());}}this._clr_history=true;this._is_undo=false;}};_pSketch._redo=function(){if(this._redoable()){if(this._current_state== -1){this._delete_text();}this._current_state++ ;this._current_strokes=null;this._drawpathcount=0;this._clr_history=false;var _a=this._currentStrokes();this._redoPathData(_a);this._setRedoUndo();this._clr_history=true;if(this._current_state== -1&&!this._image){this.on_apply_text(this.getDisplayText());}}};_pSketch._redrawPath=function(){var _a=this._currentStrokes();this._clr_history=false;this._drawpathcount=0;this._redrawPathData(_a);this._setRedoUndo();this._clr_history=true;if(this._current_state== -1&&!this._image){this.on_apply_text(this.getDisplayText());}else{this._delete_text();}};_pSketch._checkEditmode=function(){if(this.editmode==this._const_none){return false;}return true;};_pSketch._clearCanvasElem=function(_a){if(_a){_a.clearRect(0,0,this._adjust_width,this._adjust_height);}};_pSketch._clearCanvas=function(_a){var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_b){this._clearCanvasElem(_b);}if(_c){this._clearCanvasElem(_c);}};_pSketch._clearPathCanvas=function(_a){var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_b){this._clearCanvasElem(_b);}if(_c){this._clearCanvasElem(_c);}};_pSketch._clear=function(_a){this._hideTextEditor(true);if(_a){this._clearCanvas(_a);}this._image=null;this._imgurl="";this._initHistory();this._setRedoUndo();this._startDrawStroke=true;this._set_value(null);};_pSketch._setRedoUndo=function(){this.redoable=this._redoable();this.undoable=this._undoable();};_pSketch._drawPath=function(_a,_b){var _c={};_c.x=_a;_c.y=_b;var _d=this._canvas_elem;if(!_d||!this._currentPath[0]){return;}var _e=_d;var _f=this._currentPath[0].tool;if(_f!=this._const_text&&!this._is_touch){this._delete_text();}switch(_f){case this._const_text:return;case this._const_erase:case this._const_erase_user:{}break;}this._currentPath.push(_c);this._regenStroke(this._currentPath,_e);this._regenStroke(this._currentPath,this._canvas_elem_tmp);this._drawpathcount=this._currentPath.length-1;};_pSketch._initPath=function(_a,_b,_c,_d,_e,_f,_g,_h){if((this._currentPath[0]&&this._currentPath[0].tool)==this._const_stroke_user){this._endPath();}var _i=this._clone(_a);var _j={};_j.x=_c;_j.y=_d;_j.beginPath=true;_i.tool=_b;this._drawpathcount=0;var _k=this._const_composit_source_over;if(_i.tool!=this._const_text&&this.sketchtextarea.visible){this._resetTextEdit(true);return;}switch(_i.tool){case this._const_erase:case this._const_erase_user:_k=this._const_composit_destination_out;break;case this._const_text:{if(_e==null){if(this.sketchtextarea.visible){this._resetTextEdit(true);return;}else{this._showTextEditor(_j.x,_j.y,_f,_g,_h);}}}break;case this._const_stroke:case this._const_stroke_user:default:break;}_i.globalCompositeOperation=_k;for(var _l in _i){_j[_l]=_i[_l];}this._currentPath=this._add({type:_b,stroke:[_j]});this._setRedoUndo();};_pSketch._resetTextEdit=function(_a){var _b=this.sketchtextarea;if(_b.visible==false){return;}var _c=_b.value;this._hideTextEditor(true);if(_c&&_a){this._currentPath[0].text=_c;}else{this._undo();this._setRedoUndo();}_b.set_left(this._default_edit_x);_b.set_top(this._default_edit_y);};_pSketch._initHistory=function(){this._history=[];this._current_state= -1;this._freeze_state= -1;this._current_strokes=null;};_pSketch._add=function(_a){if(this._current_state+1<this._history.length){this._history.splice(this._current_state+1,this._history.length-(this._current_state+1));}this._history.push(_a);this._current_state=this._history.length-1;this._current_strokes=null;return _a.stroke;};_pSketch._freeze=function(_a){if(_a===undefined){this._freeze_state=this._current_state;}else{this._freeze_state=_a;}};_pSketch._undoable=function(){return (this._current_state> -1&&this._current_state>this._freeze_state);};_pSketch._redoable=function(){return this._current_state<this._history.length-1;};_pSketch._currentStrokes=function(){var _a=this._current_strokes;if(_a==null){var _b=[];for(var _d=0;_d<=this._current_state;_d++ ){var _c=this._history[_d];switch(_c.type){case "init":case "json":case "strokes":case "batch":break;case "clear":_b=[];break;case this._const_stroke:case this._const_stroke_user:case this._const_image:case this._const_erase:case this._const_erase_user:case this._const_text:default:_b.push(_c.stroke);break;}}_a=_b;}this._current_strokes=_a;return _a;};_pSketch._delete_text=function(){if(!this._isEnableRedraw()){return;}this._apply_client_padding=false;if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}};_pSketch._isParentdefaultprevented=function(_a,_b){return true;};_pSketch._getClientXY=function(_a,_b){var _c=0,_d=0;var _e=this._getCurrentStyleBorder();if(_e){_d=_e._getBorderTopWidth();_c=_e._getBorderLeftWidth();}var _f=_a-_c;var _g=_b-_d-nexacro._getCurrentBodyScrollTop();return [_f,_g];};delete _pSketch;_pSketch=null;nexacro.SketchEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextArea.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSketchEditControl=nexacro._createPrototype(nexacro.TextArea,nexacro.SketchEditControl);nexacro.SketchEditControl.prototype=_pSketchEditControl;_pSketchEditControl._type_name="TextAreaControl";_pSketchEditControl.on_fire_sys_onlbuttondown=function(){nexacro.TextArea.prototype.on_fire_sys_onlbuttondown.call(this);return true;};_pSketchEditControl.on_fire_sys_ontouchstart=function(){nexacro.TextArea.prototype.on_fire_sys_ontouchstart.call(this);return true;};_pSketchEditControl.on_fire_onclick=function(){nexacro.TextArea.prototype.on_fire_onclick.call(this);return true;};_pSketchEditControl.on_fire_ontab=function(){nexacro.TextArea.prototype.on_fire_ontab.call(this);return true;};delete _pSketchEditControl;_pSketchEditControl=null;nexacro.ImageSketchBackground=function(_a){nexacro.Image.call(_a);this.parent=_a;};var _pImageSketchBackground=nexacro._createPrototype(nexacro.Image,nexacro.ImageSketchBackground);nexacro.ImageSketchBackground.prototype=_pImageSketchBackground;_pImageSketchBackground.on_load=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){this.width=_b;this.height=_c;var _k=this.parent;if(_e<0){var _l="";if(_g){_l=nexacro._GetSystemErrorMsg(this,_g);}else{_l=nexacro._GetSystemErrorMsg(this,_k._const_code_loadinvalidimage_msg).replace("%0",_k._const_code_loadinvalidimage);}if(!_j){_j=_k._getRefFormBaseUrl();}if(_k._clr_history){_k.on_fire_onerror(this,_g,_l,_k._const_errortype_obj,_k._const_code_loadinvalidimage,_a,_j);}}else{if(_d){this.handle=_d;}var _m=_k._canvas_elem;var _n=_k._image;if(_m&&_n){if(_k._isEnableRedraw()){_m.drawImage(_n,0,0,_b,_c);if(_k._canvas_elem_tmp){_k._canvas_elem_tmp.drawImage(_n,0,0,_b,_c);}_k._setImageValue(_n);}if(_k._clr_history){_k.on_fire_onload(this,_a);}}}};_pImageSketchBackground.set_src=function(_a){if(this.src!=_a){this.src=_a;this.handle=nexacro._getImageObject(_a,this.on_load,this,this.parent._getRefFormBaseUrl());if(this.handle){return true;}}else{var _b=this.width;var _c=this.height;var _d=this.parent;var _e=_d._canvas_elem;var _f=_d._image;if(_e&&_f){if(_d._isEnableRedraw()){_e.drawImage(_f,0,0,_b,_c);if(_d._canvas_elem_tmp){_d._canvas_elem_tmp.drawImage(_f,0,0,_b,_c);}return true;}}}return false;};delete _pImageSketchBackground;}if(!nexacro.ExcelExportObject){nexacro.ExcelExportProgressEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onprogress";this.fromobject=_a;this.fromreferenceobject=_f;this.itemindex=_c;this.itemtype=_d;this.recordindex=_e;};var _pExportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelExportProgressEventInfo);nexacro.ExcelExportProgressEventInfo.prototype=_pExportEventInfo;_pExportEventInfo._type_name="ExcelExportProgressEventInfo";delete _pExportEventInfo;nexacro.ExcelExportEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=_a;this.fromreferenceobject=_d;this.url=_c;};var _pExcelExportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelExportEventInfo);nexacro.ExcelExportEventInfo.prototype=_pExcelExportEventInfo;_pExcelExportEventInfo._type_name="ExcelExportEventInfo";delete _pExcelExportEventInfo;nexacro.ExcelExportErrorEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onerror";this.fromobject=_a;this.fromreferenceobject=_e;this.errortype=_c;this.errormsg=_d;this.statuscode=_f;};var _pExportErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.ExcelExportErrorEventInfo);nexacro.ExcelExportErrorEventInfo.prototype=_pExportErrorEventInfo;_pExportErrorEventInfo._type_name="ExcelExportErrorEventInfo";delete _pExportErrorEventInfo;nexacro.ExcelExportObject=function(_a,_b){this.id=this.name=_a;if(!_b){var _c=nexacro.getApplication();if(_c){_b=_c.getActiveForm();if(!_b){var _d=_c.mainframe._window;var _e=_d.getCurrentFocusPaths();var _f=(_e?_e.length:0);for(var _h=0;_h<_f;_h++ ){var _g=_e[_h];if(!_g){continue;}if(_g._is_form){_b=_g;break;}}}}}this.parent=_b;this._grids=[];this._dataset=[];this._xml=[];this.onsuccess=new nexacro.EventListener("onsuccess");this.onprogress=new nexacro.EventListener("onprogress");this.onerror=new nexacro.EventListener("onerror");this._hidden_frame_handle=null;nexacro._create_hidden_frame("",this.on_complete_download,this,"export");};var _pExcelExport=nexacro.ExcelExportObject.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExcelExportObject);_pExcelExport._type_name="ExcelExportObject";_pExcelExport.activepagename="";_pExcelExport.exportactivemode="noactive";_pExcelExport.exporteventtype="itemrecord";_pExcelExport.exportfilename="";_pExcelExport.exportfilpath="";_pExcelExport.exportmessagealert="";_pExcelExport.exportmessagecomplete="";_pExcelExport.exportmessageprocess="";_pExcelExport.exportmessageready="";_pExcelExport.exportopenmode="noopen";_pExcelExport._exporttype=nexacro.ExportTypes.EXCEL;_pExcelExport.exporttype=nexacro.ExportTypes.EXCEL;_pExcelExport.exportuitype="none";_pExcelExport.templatefilename="";_pExcelExport.commdataformat="";_pExcelExport.commcompress="none";_pExcelExport.exporturl="";_pExcelExport.transferrowcount=500;_pExcelExport.exportfilepasswrod="";_pExcelExport.exportwordwrap=true;_pExcelExport.filefilter="";_pExcelExport.filefilterindex=0;_pExcelExport.separator="";_pExcelExport.quotechar="default";_pExcelExport._defaultseparator="0x2c";_pExcelExport._exportuitype=0;_pExcelExport._exporturl="";_pExcelExport._commcompress=false;_pExcelExport._commdataformat=2;_pExcelExport._allRowCount=0;_pExcelExport._progress_pos=0;_pExcelExport._uniqueIndex=0;_pExcelExport._fileURL="";_pExcelExport._itemsIndex=0;_pExcelExport._argsParam=null;_pExcelExport._argsDsParam=null;_pExcelExport._orgval_type=0;_pExcelExport._file_password=null;_pExcelExport._wrap_text=true;_pExcelExport._filedownload=true;_pExcelExport._righttoleft=true;_pExcelExport._exportBar=null;_pExcelExport._tempSaveMethod=null;_pExcelExport.excelTypeTable={EXCEL:0x0100,EXCEL97:0x0110,EXCEL2007:0x0120,HANCELL2010:0x0400,HANCELL2014:0x0410,CSV:0x0500,TXT:0x0510,256:0x0100,272:0x0110,288:0x0120,1024:0x0400,1040:0x0410,1280:0x0500,1296:0x0510};_pExcelExport._event_list={"onsuccess":1,"onerror":1,"onprogress":1};_pExcelExport.set_templatefilename=function(_a){if(_a!=this.templatefilename){this.templatefilename=_a;}return _a;};_pExcelExport.set_commdataformat=function(_a){if(_a!=this.commdataformat){this.commdataformat=_a;switch(_a.toString().toUpperCase()){case "XML":this._commdataformat=0;break;case "BINARY":this._commdataformat=1;break;case "CSV":this._commdataformat=3;break;default:this._commdataformat=2;break;}}return _a;};_pExcelExport.set_commcompress=function(_a){if(_a!=this.commcompress){this.commcompress=_a;if(_a.toString().toUpperCase()=="COMPRESS"){this._commcompress=true;}else{this._commcompress=false;}}return _a;};_pExcelExport.set_exporturl=function(_a){if(_a!=this.exporturl){this.exporturl=this._exporturl=_a;if(_a){this._exporturl=nexacro._getServiceLocation(_a,this.parent._getFormBaseUrl(),null,false);}}return _a;};_pExcelExport.set_exporttype=function(_a){if(_a!=this.exporttype){this.exporttype=_a;var _b=this.excelTypeTable[(_a+"").toUpperCase()];if(!_b){_b=256;}this._exporttype=_b;}return _a;};_pExcelExport.set_separator=function(_a){var _b=false;if(_a.length==4){if((_a.substr(0,2)=="0x")||(_a.substr(0,2)=="0X")){_a=parseInt(_a,16);}else{_b=true;}}_a=parseInt(_a);var _c=/^(0|3|10|13|29|34|39|40|41|58|61)$/g;if(_b||_c.test(_a)||_a>=0x80||_a<=0x00){this.separator=_a=this._defaultseparator;}if(_a!=this.separator&&nexacro._isInt(_a)){this.separator=_a.toString(16);}return _a;};_pExcelExport.set_quotechar=function(_a){var _b=['"',"'","none","default"];if(_b.indexOf(_a)== -1){this.quotechar=_a="default";}if(_a!=this.quotechar){this.quotechar=_a;}return _a;};_pExcelExport.set_activepagename=function(_a){if(_a!=this.activepagename){this.activepagename=_a;}return _a;};_pExcelExport.set_exportactivemode=function(_a){if(_a!=this.exportactivemode){this.exportactivemode=_a;}return _a;};_pExcelExport.set_exporteventtype=function(_a){if(_a!=this.exporteventtype){this.exporteventtype=_a;}return _a;};_pExcelExport.set_exportopenmode=function(_a){if(_a!=this.exportopenmode){this.exportopenmode=_a;}return _a;};_pExcelExport.set_exportfilename=function(_a){_a=_a+"";if(_a!=this.exportfilename){this.exportfilename=_a;}return _a;};_pExcelExport.set_exportfilepath=function(_a){if(_a!=this.exportfilepath){this.exportfilepath=_a;}return _a;};_pExcelExport.set_exportmessagealert=function(_a){if(_a!=this.exportmessagealert){this.exportmessagealert=_a;}return _a;};_pExcelExport.set_exportuitype=function(_a){if(_a!=this.exportuitype){this.exportuitype=_a;switch(_a){case "exportprogress":this._exportuitype=1;break;case "statusbar":this._exportuitype=2;break;default:this._exportuitype=0;break;}}return _a;};_pExcelExport.set_exportmessageready=function(_a){if(_a!=this.exportmessageready){this.exportmessageready=_a;}return _a;};_pExcelExport.set_exportmessageprocess=function(_a){if(_a!=this.exportmessageprocess){this.exportmessageprocess=_a;}return _a;};_pExcelExport.set_exportmessagecomplete=function(_a){if(_a!=this.exportmessagecomplete){this.exportmessagecomplete=_a;}return _a;};_pExcelExport.set_transferrowcount=function(_a){this.transferrowcount=nexacro._toInt(_a);};_pExcelExport.set_exportfilepassword=function(_a){if(_a!=this.exportfilepassword){this.exportfilepassword=_a;}};_pExcelExport.set_exportwordwrap=function(_a){if(_a!=this.exportwordwrap){this.exportwordwrap=_a;}};_pExcelExport.set_filefilter=function(_a){this.filefilter=_a;};_pExcelExport.set_filefilterindex=function(_a){this.filefilterindex=_a;};_pExcelExport.addExportItem=function(_a,_b){var _c= -1;var _d;var _e=arguments.length;var _f=null;var _g=[];var _h=arguments.length-1;if(nexacro._isArray(arguments[_h])){_e-- ;_f=arguments[_h];}if(_f){for(var _i=0;_i<_f.length;_i++ ){_g[(_f[_i]|0)]=true;}}if(_e==2){if(_a&&_b&&_b instanceof nexacro.ExportItem){_d=_b;_d.parent=this;_d._setEventHandler("onprogress",this.on_notify_onprogress,this);_d._setEventHandler("onsuccess",this.on_notify_onsuccess,this);_d._setEventHandler("onerror",this.on_notify_onerror,this);_d._orgvalue_cells=_g;}else{return  -1;}}else{if(_a&&_b&&_a==this._getItemType(_b)){_d=new nexacro.ExportItem(this.id+"item"+this._uniqueIndex++ ,this);_d._setEventHandler("onprogress",this.on_notify_onprogress,this);_d._setEventHandler("onsuccess",this.on_notify_onsuccess,this);_d._setEventHandler("onerror",this.on_notify_onerror,this);_d._orgvalue_cells=_g;switch(_e){case 11:case 10:arguments[9]&&_d.set_exportsize(arguments[9]);case 9:arguments[8]&&_d.set_exceptstyle(arguments[8]);case 8:arguments[7]&&_d.set_exportimage(arguments[7]);case 7:arguments[6]&&_d.set_exportvalue(arguments[6]);case 6:arguments[5]&&_d.set_exportmerge(arguments[5]);case 5:arguments[4]&&_d.set_exportselect(arguments[4]);case 4:arguments[3]&&_d.set_exporthead(arguments[3]);case 3:arguments[2]&&_d.set_range(arguments[2]);case 2:arguments[1]&&_d.set_source(arguments[1]);break;}}else{return  -1;}}switch(_a){case nexacro.ExportItemTypes.GRID:_d.set_type(_a);_c=this._grids.push(_d)-1;_d._righttoleft=_d.source._isRtl();break;case nexacro.ExportItemTypes.DATA:break;case nexacro.ExportItemTypes.XML:break;}return _c;};_pExcelExport.clear=function(){var _a=0;_a+=this._grids.length;_a+=this._dataset.length;_a+=this._xml.length;for(var _c=0,_d=this._grids.length;_c<_d;_c++ ){var _b=this._grids.pop();if(_b){_b._clear();}}this._grids=[];this._dataset=[];this._xml=[];return _a;};_pExcelExport.clearExportItems=function(_a){var _b;if(_a==nexacro.ExportItemTypes.GRID){_b=this._grids.length;for(var _d=0;_d<_b;_d++ ){var _c=this._grids.pop();if(_c){_c._clear();}}this._grids=[];}if(_b==0){this._uniqueIndex=0;}return _b;};_pExcelExport.count=function(){var _a=0;_a+=this._grids.length;_a+=this._dataset.length;_a+=this._xml.length;return _a;};_pExcelExport.countExportItems=function(_a){var _b=0;if(_a==nexacro.ExportItemTypes.GRID){_b+=this._grids.length;}return _b;};_pExcelExport.delExportItem=function(_a,_b){var _c=false;if(_a==nexacro.ExportItemTypes.GRID){if(this._grids.splice(_b,1).length>0){_c=true;}}return _c;};_pExcelExport.getExportItem=function(_a,_b){var _c=null;if(_a==nexacro.ExportItemTypes.GRID){_c=this._grids[_b];}return _c?_c:null;};_pExcelExport.setExportItem=function(_a,_b,_c){if(!_c||!(_c instanceof nexacro.ExportItem)){return false;}var _d=false;if(_a==nexacro.ExportItemTypes.GRID){if(_b> -1&&_b<this._grids.length){_c.parent=this;this._grids[_b]=_c;_d=true;}}return _d;};_pExcelExport.exportItems=function(_a){var _b= -1;if(!this.exporturl){return _b;}if(_a==nexacro.ExportItemTypes.GRID){var _c=this._grids;_b=this._gCount=_c.length;this._allCount=_b;if(_b>0){if(this.exportmessagealert!=""){nexacro.alert(this.exportmessagealert);}_c[0]._gridItemExport(this);}}return _b;};_pExcelExport.exportDataEx=function(_a,_b,_c){this._is_export_ex=true;var _d=this.exportData(_a,_b,0,_c);this._is_export_ex=false;return _d;};_pExcelExport.exportData=function(_a,_b,_c,_d){this._argsParam=_a;this._argsDsParam=_b;if(typeof _c=="string"){_c=_c.toLowerCase();switch(_c){case "false":case "0":this._orgval_type=0;break;case "true":case "1":this._orgval_type=1;break;case "2":this._orgval_type=2;break;default:this._orgval_type=0;break;}}else if(typeof _c=="number"){_c=nexacro._toInt(_c);if(_c<0||_c>2){this._orgval_type=0;}else{this._orgval_type=_c;}}else{if(_c===true||_c===false){this._orgval_type=_c?1:0;}else{this._orgval_type=0;}}this._filedownload=(_d!==undefined)?!!_d:true;var _e;this._file_password=null;if(this.exportfilepassword){this._file_password=this.exportfilepassword;}if(this.exportwordwrap!==""){var _f=nexacro._toBoolean(this.exportwordwrap);if(_f!=this._wrap_text){this._wrap_text=_f;}}var _g= -1;if(!this.exporturl){return _g;}var _h=this._grids;var _i=this._gCount=_h.length;this._allCount=_i;if(this._allCount>0&&this.exportmessagealert!=""){nexacro.alert(this.exportmessagealert);}for(_e=0;_e<_i;_e++ ){this._allRowCount+=_h[_e].source._getGridRowCount();}if(_i>0){_h[0]._gridItemExport(this);}return this.count();};_pExcelExport.destroy=function(){var _a=this._exportBar;if(_a){_a.destroy();}for(var _c=0,_d=this._grids.length;_c<_d;_c++ ){var _b=this._grids.pop();if(_b){_b._clear();}}this._grids=null;this._dataset=null;this._grids=null;this._dataset=null;this._excel_suppress_info=null;this._merge_datas=null;this._xml.length=0;if(this.parent){this.parent.removeChild(this.id);}nexacro._EventSinkObject.prototype.destroy.call(this);return true;};_pExcelExport.on_fire_onprogress=function(_a,_b){var _c=this.onprogress;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelExport.on_fire_onsuccess=function(_a,_b){var _c=this.onsuccess;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelExport.on_fire_onerror=function(_a,_b){var _c=this.onerror;var _d;if(_c&&_c._has_handlers){_d=_c._fireEvent(this,_b);}return _d;};_pExcelExport.on_notify_onprogress=function(_a,_b){this.on_fire_onprogress(_a,_b);return false;};_pExcelExport.on_notify_onsuccess=function(_a,_b){this.on_fire_onsuccess(_a,_b);return false;};_pExcelExport.on_notify_onerror=function(_a,_b){this.on_fire_onerror(_a,_b);return false;};_pExcelExport.on_complete_download=function(_a,_b,_c,_d,_e,_f){if(_a>=0){if(this.exportactivemode=="active"){nexacro._execShell(_b);}}};_pExcelExport._getItemType=function(_a){var _b;switch(_a&&_a._type_name){case "Grid":_b=nexacro.ExportItemTypes.GRID;break;case "Dataset":break;case "Xml":break;default:if(_a instanceof nexacro.Grid){_b=nexacro.ExportItemTypes.GRID;}break;}return _b;};_pExcelExport._getProcessStr=function(_a,_b,_c){var _d="";_d=this.exportmessageprocess.replace("%d",_a);_d=_d.replace("%d",_b);_d=_d.replace("%d",_c);return _d;};_pExcelExport._getForm=function(){if(this.parent instanceof nexacro.Form){return this.parent;}return null;};_pExcelExport._getExportBar=function(_a){var _b=this._getForm();var _c="_exportBar";var _d=_b[_c];if(_d){_d.destroy();}_d=new nexacro.ExportProgress(_c,0,0,10,10,null,null,null,null,null,null,_b);_b.addChild(_d.name,_d);_d._uitype=_a;if(_d.createComponent(true)){_d.on_created();}return _d;};delete _pExcelExport;nexacro.ExportItem=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._merge_datas=null;this._gridTempInfo=null;this._tmpSuppressInfos=undefined;this._stylecache={};this._excel_suppress_info={};this._style_map1=null;this._style_map2=null;this._ds_style2=null;this._ds_style=null;this._ds_cell=null;this._ds_response=null;this._load_manager=null;this._orgvalue_cells=null;};var _pExportItem=nexacro.ExportItem.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExportItem);_pExportItem._type_name="ExportItem";_pExportItem.exceptstyle="none";_pExportItem.exporthead="allband";_pExportItem._exporthead="";_pExportItem.exportimage="none";_pExportItem.exportmerge="suppress";_pExportItem._exportmerge=1;_pExportItem.exportselect="allrecord";_pExportItem.exportvalue="allstyle";_pExportItem.exportsize="width";_pExportItem.range="";_pExportItem.source="";_pExportItem.type="";_pExportItem._applyA=true;_pExportItem._applyB=true;_pExportItem._applyC=true;_pExportItem._applyF=true;_pExportItem._applyHead=true;_pExportItem._applySumm=true;_pExportItem._applyL=true;_pExportItem._d_BLColor="";_pExportItem._seq=1;_pExportItem._preStartRow=0;_pExportItem._startRow=0;_pExportItem._eof=false;_pExportItem._instanceId="";_pExportItem._a_ct=0;_pExportItem._bg_ct=0;_pExportItem._c_ct=0;_pExportItem._f_ct=0;_pExportItem._l_ct=0;_pExportItem._t_ct=0;_pExportItem._sm_ct=0;_pExportItem._g_ct=0;_pExportItem._s_ct=0;_pExportItem._selectcount=0;_pExportItem._righttoleft=false;_pExportItem._event_list={"onsuccess":1,"onprogress":1,"onerror":1};_pExportItem._suppress_align_table={"first":"top","first,over":"top","middle":"middle","middle,over":"middle","last":"bottom","last,over":"bottom"};_pExportItem._clear=function(){if(this._ds_style2){this._ds_style2.destroy();this._ds_style2=null;delete this._ds_style2;}if(this._ds_style){this._ds_style.destroy();this._ds_style=null;delete this._ds_style;}if(this._style_map1){this._style_map1=null;}if(this._style_map2){this._style_map2=null;}if(this._ds_command){this._ds_command.destroy();this._ds_command=null;delete this._ds_command;}if(this._ds_cell){this._ds_cell.destroy();this._ds_cell=null;delete this._ds_cell;}if(this._ds_response){this._ds_response.destroy();this._ds_response=null;delete this._ds_response;}if(this._load_manager){this._load_manager.destroy();this._load_manager=null;delete this._load_manager;}if(this._merge_datas){this._merge_datas=null;}if(this._stylecache){this._stylecache=null;}if(this.source){this.source=null;}if(this._gridTempInfo){this._gridTempInfo=null;}if(this._excel_suppress_info){this._excel_suppress_info=null;}if(this._tmpSuppressInfos){this._tmpSuppressInfos=null;}this._righttoleft=false;this._orgvalue_cells=null;};_pExportItem.set_exceptstyle=function(_a){if(_a!=this.exceptstyle){var _b=0;var _c=_a.replace(/ /g,"").split(",");var _d=_c.length;for(var _e=0;_e<_d;_e++ ){switch(_c[_e].toLowerCase()){case "align":this._applyA=false;_b+=1;break;case "background":this._applyB=false;_b+=1;break;case "color":this._applyC=false;_b+=1;break;case "font":this._applyF=false;_b+=1;break;case "border":this._applyL=false;_b+=1;break;case "none":this._applyA=true;this._applyB=true;this._applyC=true;this._applyF=true;this._applyL=true;_b+=1;break;}}if(_d===_b){this.exceptstyle=_a;}}return _a;};_pExportItem.set_exporthead=function(_a){if(_a!=this.exporthead){this.exporthead=_a;var _b=_a.replace(/ /g,"").split(",");var _c=_b.length;for(var _d=0;_d<_c;_d++ ){switch(_b[_d].toLowerCase()){case "nohead":this._applyHead=false;break;case "nosumm":this._applySumm=false;break;default:this._applySumm=true;this._applySumm=true;break;}}}if(!this._applyHead||!this._applySumm){if(!this._applyHead&&!this._applySumm){this._exporthead="nohead, nosumm";}else if(!this._applyHead){this._exporthead="nohead";}else{this._exporthead="nosumm";}}else{this._exporthead="allband";}return _a;};_pExportItem.set_exportimage=function(_a){if(_a!=this.exportimage){this.exportimage=_a;}return _a;};_pExportItem.set_exportmerge=function(_a){if(_a!=this.exportmerge){this.exportmerge=_a;switch(_a){case "nosuppress":this._exportmerge=0;break;case "merge":this._exportmerge=2;break;default:this._exportmerge=1;break;}}return _a;};_pExportItem.set_exportselect=function(_a){if(_a!=this.exportselect){this.exportselect=_a;}return _a;};_pExportItem.set_exportvalue=function(_a){if(_a!=this.exportvalue){this.exportvalue=_a;}return _a;};_pExportItem.set_range=function(_a){if(_a!=this.range){this.range=_a;}return _a;};_pExportItem.set_source=function(_a){if(_a!=this.source){this.source=_a;}return _a;};_pExportItem.set_type=function(_a){if(_a!=this.type){this.type=_a;}return _a;};_pExportItem.set_exportsize=function(_a){if(_a!=this.exportsize){this.exportsize=_a;}return _a;};_pExportItem.on_fire_onprogress=function(_a,_b,_c,_d){var _e=this.parent.onprogress;if(_e&&_e._has_handlers){var _f=new nexacro.ExcelExportProgressEventInfo(_a,"onprogress",_b,_c,_d,this);_e._fireEvent(this.parent,_f);}};_pExportItem.on_fire_onsuccess=function(_a,_b,_c){var _d=this.parent.onsuccess;if(_d&&_d._has_handlers){var _e=new nexacro.ExcelExportEventInfo(_a,"onsuccess",_c,this);_d._fireEvent(this.parent,_e);}};_pExportItem.on_fire_onerror=function(_a,_b,_c,_d){var _e=this.parent.onerror;if(_e&&_e._has_handlers){var _f=new nexacro.ExcelExportErrorEventInfo(_a,"onerror",_b,_c,this,_d);_e._fireEvent(this.parent,_f);}};_pExportItem._getWindow=function(){var _a=this.parent;if(_a){var _b=_a.parent;if(_b._is_form){return _b._getWindow();}}return null;};_pExportItem._getWindowHandle=function(){var _a=this.parent;if(_a){var _b=_a.parent;if(_b._is_form){return _b._getWindowHandle();}}return null;};_pExportItem._getCellStyle=function(_a,_b,_c,_d,_e){var _f;var _g=_e==true?"selected":undefined;switch(_d){case "align":_f=_a._query_status_align(_b,_a.displaytype,_g);break;case "background":_f=_a._query_status_background(_b,_g,true);if(_f&&_f.indexOf("linear-gradient")>=0){_f=this._getGradientValue(_f);}break;case "border":_f=_a._query_status_border(_b,_g);break;case "color":_f=_a._query_status_color(_b,_g);break;case "font":_f=_a._query_status_font(_b,_g);break;case "textDecoration":_f=_a._grid._getCellStyleInfo(_a._cellidx,"textDecoration",_b,_g);if(_f){_f=_f.match(/underline|line-through/g);if(_f){_f=_f.join(",");_f=_f.replace("line-through","strikeout");}}break;}return _f;};_pExportItem._getCellText=function(_a,_b,_c,_d){var _e;if(_a&&_a instanceof nexacro.Grid){var _f;var _g=_a._curFormat;var _h;if(_b== -1){_f="head";_h=_g._headcells[_c];}else if(_b== -2){_f="summ";_h=_g._summcells[_c];}else{_f="body";_h=_g._bodycells[_c];}var _i=this.parent;var _j=_h._getDisplaytype(_b);var _k=this._orgvalue_cells;var _l=false;if(_j=="decoratetext"){_l=true;}if(_a.getSubCellCount(_f,_c)){if(_d==undefined){return null;}if(_k[_c]){_e=_a.getSubCellValue(_b,_c,_d);}else if(_i._orgval_type){if(_i._orgval_type!=2||(_i._orgval_type==2&&_j!="date")){_e=_a.getSubCellValue(_b,_c,_d);_l=false;}else{_e=_a.getSubCellText(_b,_c,_d);}}else{_e=_a.getSubCellText(_b,_c,_d);}}else{if(_k[_c]){_e=_a.getCellValue(_b,_c);}else if(_i._orgval_type){if(_i._orgval_type!=2||(_i._orgval_type==2&&_j!="date")){_e=_a.getCellValue(_b,_c);_l=false;}else{_e=_a.getCellText(_b,_c);}}else{_e=_a.getCellText(_b,_c);}}if(_l){_e=nexacro._getDisplayTextfromDecorateText(_e);}}return _e;};_pExportItem._getCellLocale=function(_a,_b){var _c=_a?_a._getLocale(_b):"";if(!_c){_c=nexacro._locale?nexacro._locale:nexacro._getLocale();}_c=_c.replace(/-/g,"_");return _c;};_pExportItem._find_styleName=function(_a,_b,_c,_d,_e){var _f;if(_a.id=="STYLE"){_f=this._style_map1;if(!_f){_f=this._style_map1={};}}else if(_a.id=="STYLE2"){_f=this._style_map2;if(!_f){_f=this._style_map2={};}}var _g;if(_f){_g=_f[_b];}else{_f={};}if(!_g){_g=_f[_b]=[];}var _h=_g.length;var _i,_j;if(_h>0){for(var _o=0;_o<_h;_o++ ){_j=_f[_b][_o].value;if(_c==_j){_i=_f[_b][_o].name;break;}}}if(!_i){_i=_b+( ++_d);_f[_b][_h]={value:_c,name:_i};var _k=_a.getRowCount();_a.addRow();_a.setColumn(_k,"type",_b);_a.setColumn(_k,"name",_i);var _l=String.fromCharCode(29);if(_c){_j=_c.toString();var _m=_j.split(_l);if(_m.length>1){_c=_m[0];var _n=_m[1];_a.setColumn(_k,"locale",_n);}}_a.setColumn(_k,"value",_c);}return [_i,_d];};_pExportItem._getFitValue=function(_a){if(!_a){return;}var _b=this._fontParseInfo(_a._sysvalue);return _b;};_pExportItem._getFitFontValue=function(_a){var _b=this._default_size,_c=this._default_face,_d;var _e;if(_a){var _f=new nexacro._FontObject(_a);_f._parseInfo(_a);_b=_f.size;_d=_f.type;if(_f.face){_f.face=_f.face.replace(/"/gi,"");}_c=_f.face;_e=_f._unit;if(_e=="px"){_b=parseInt(nexacro._convertPxToPt(_b));}}return _d+","+_b+","+_c;};_pExportItem._getColortoRGB=function(_a){var _b="transparent";if(_a){if(typeof _a=="object"){_b=this._getHexColor(_a.value.split(" ")[0]);}else if(typeof (_a)=="string"&&(_a.indexOf("rgb(")>=0)||(_a.indexOf("RGB(")>=0)){_b="rgbstring";}else if(typeof (_a)=="string"&&(_a.indexOf("rgba(")>=0)||(_a.indexOf("RGBA(")>=0)){_b="rgbastring";}else if(typeof (_a)=="string"&&(_a.indexOf("hsl(")>=0)||(_a.indexOf("HSL(")>=0)){_b="hslstring";}else if(typeof (_a)=="string"&&(_a.indexOf("hsla(")>=0)||(_a.indexOf("HSLA(")>=0)){_b="hslastring";}else{_b=this._getHexColor(_a);}var _c=[];if(_b===""){_b=_a._value;if(_b===undefined){_b=_a.value;if(typeof (_b)=="string"&&((_b.indexOf("rgb(")>=0)||(_b.indexOf("RGB(")>=0)||(_b.indexOf("rgba(")>=0)||(_b.indexOf("RGBA(")>=0))){_b=this._getRGBAtoRGB(_b);}else if(typeof (_b)=="string"&&((_b.indexOf("hsl(")>=0)||(_b.indexOf("HSL(")>=0)||(_b.indexOf("hsla(")>=0)||(_b.indexOf("HSLA(")>=0))){_b=this._getHSLAtoRGB(_b);}}}else{if(_b.indexOf("#")> -1){_c.push(parseInt(_b.substring(1,3),16));_c.push(parseInt(_b.substring(3,5),16));_c.push(parseInt(_b.substring(5,7),16));_b=_c.join(",");}else if(_b=="rgbstring"||_b=="rgbastring"){_b=this._getRGBAtoRGB(_a);}else if(_b=="hslstring"||_b=="hslastring"){_b=this._getHSLAtoRGB(_a);}else if(_b=="transparent"){_b="transparent";}else{var _d=_b.indexOf("(");var _e=_b.indexOf(")");_c=_b.substring(_d+1,_e-1).split(",");_c.pop();_b=_c.join(",");}}}return _b;};_pExportItem._getHSLAtoRGB=function(_a){var _b="transparent";var _c=_a.indexOf("(")+1;var _d=_a.indexOf(")");_a=_a.substring(_c,_d);_a=_a.split(",");var _e=_a.length;if(_e==4&&_a[3]==0){_b="transparent";}else{var _f=_a[0].trim();var _g=_a[1].trim();var _h=_a[2].trim();_g=_g.substring(0,_g.indexOf("%"));_g=_g/100;_h=_h.substring(0,_h.indexOf("%"));_h=_h/100;function hueToRgb(_i,_j,_k){if(_k<0){_k+=6;}if(_k>=6){_k-=6;}if(_k<1){return (_j-_i)* _k+_i;}else if(_k<3){return _j;}else if(_k<4){return (_j-_i)* (4-_k)+_i;}else{return _i;}}function hslToRgb(_i,_j,_k){var _l,_m,_n,_o,_p;_i=_i/60;if(_k<=0.5){_m=_k* (_j+1);}else{_m=_k+_j-(_k* _j);}_l=_k* 2-_m;_n=hueToRgb(_l,_m,_i+2)* 255;_o=hueToRgb(_l,_m,_i)* 255;_p=hueToRgb(_l,_m,_i-2)* 255;return parseInt(_n)+","+parseInt(_o)+","+parseInt(_p);}_b=hslToRgb(_f,_g,_h);}return _b;};_pExportItem._getRGBAtoRGB=function(_a){var _b="transparent";var _c=_a.indexOf("(")+1;var _d=_a.indexOf(")");_a=_a.substring(_c,_d);_a=_a.split(",");var _e=_a.length;for(var _f=0;_f<_e;_f++ ){if(_f>2){_a[_f]=parseFloat(_a[_f]);}else{_a[_f]=parseInt(_a[_f]);}}if(_e==4&&_a[3]==0){_b="transparent";}else if(_e==4){_b=_a.join(",");_b=_b.substring(0,_b.lastIndexOf(","));}else{_b=_a.join(",");}return _b;};_pExportItem._makeforDsStyle=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j,_k="";var _l="";if(this._applyA){_j=this._find_styleName(_a,"align",_b,this._a_ct);_k=_j[0];this._a_ct=_j[1];_l+="align:"+_k+",";}if(this._applyB){_j=this._find_styleName(_a,"background",_c,this._bg_ct);_k=_j[0];this._bg_ct=_j[1];_l+="background:"+_k+",";}if(this._applyC){_j=this._find_styleName(_a,"color",_d,this._c_ct);_k=_j[0];this._c_ct=_j[1];_l+="color:"+_k+",";}if(this._applyF){_j=this._find_styleName(_a,"font",_e,this._f_ct);_k=_j[0];this._f_ct=_j[1];_l+="font:"+_k+",";}_f=_f.replace(/transparent,[^:]*/g,"empty");_j=this._find_styleName(_a,"line",_f,this._l_ct);_k=_j[0];this._l_ct=_j[1];_l+="line:"+_k+",";_j=this._find_styleName(_a,"type",_g,this._t_ct);_k=_j[0];this._t_ct=_j[1];_l+="type:"+_k;if(_h>1){_j=this._find_styleName(_a,"rowsuppress",_h,this._sm_ct);_k=_j[0];this._sm_ct=_j[1];_l+=",rowsuppress:"+_k;}if(_i>1){_j=this._find_styleName(_a,"colsuppress",_i,this._sm_ct);_k=_j[0];this._sm_ct=_j[1];_l+=",colsuppress:"+_k;}_j=this._find_styleName(_a,"style",_l,this._s_ct);_k=_j[0];this._s_ct=_j[1];return _k;};_pExportItem._checkExpr=function(_a,_b){if(_b&&_b._bindtype>0){return true;}if(_a&&_a._bindtype>0){return true;}return false;};_pExportItem._checkGradation=function(_a){return false;};_pExportItem._getHexColor=function(_a){_a=_a.toLowerCase();var _b=nexacro._xreNamedColorList[_a];if(_b){return _b;}var _c=_a.length;if(_a.substring(0,1)=='#'){if(_c==7){return _a;}if(_c>7){return _a.substr(0,7);}}if(_a.substring(0,2)=="0x"){if(_c==8){return "#"+_a.substring(2);}if(_c==10){return "#"+_a.substring(2,8);}}return "";};_pExportItem._getGradationColor=function(_a){var _b;var _c;var _d=[];if(_a){_b=_a._value;if(_b!=""){_b=this._getHexColor(_a.start_color);_c=this._getHexColor(_a.end_color);if(_b.indexOf("#")> -1){var _e=_b+_c;if(this._stylecache[_e]){return this._stylecache[_e];}else{_d.push(Math.round((parseInt(_b.substring(1,3),16)+parseInt(_c.substring(1,3),16))/2));_d.push(Math.round((parseInt(_b.substring(3,5),16)+parseInt(_c.substring(3,5),16))/2));_d.push(Math.round((parseInt(_b.substring(5),16)+parseInt(_c.substring(5),16))/2));_b=_d.join(",");this._stylecache[_e]=_b;}}return _b;}}return "";};_pExportItem._getGradationColor=function(_a,_b){var _c=[];if(_a!=""){_a=this._getColortoRGB(_a);_b=this._getColortoRGB(_b);var _d=_a+_b;if(this._stylecache[_d]){return this._stylecache[_d];}else{_a=_a.split(',');_b=_b.split(',');_c.push(Math.round((parseInt(_a[0])+parseInt(_b[0]))/2));_c.push(Math.round((parseInt(_a[1])+parseInt(_b[1]))/2));_c.push(Math.round((parseInt(_a[2])+parseInt(_b[2]))/2));_a=_c.join(",");this._stylecache[_d]="rgb("+_a+")";}return "rgb("+_a+")";}return "";};_pExportItem._getGradientValue=function(_a){var _b=nexacro.BackgroundObject(_a);if(_b){if(_b.gradient){_b.gradient._parseInfo(_b.gradient.value);if(_b.gradient.color_stops){var _c=_b.gradient.color_stops.length;var _d=_b.gradient.color_stops[0];var _e=_b.gradient.color_stops[_c-1];_a=this._getGradationColor(nexacro.ColorObject(_d.color),nexacro.ColorObject(_e.color));return _a;}}}return "transparent";};_pExportItem._getCellBodyStyle=function(_a,_b){var _c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;var _o=this._ds_style;var _p=false;var _q=_a._getDisplaytype(0);var _r="empty:empty:empty:empty";var _s={vertical:"empty",horizon:"empty",vertical1:"empty",horizon1:"empty"};_c=_a._query_status_align(0,_q);if(_c==","){_c="left,";}_d=_a._query_status_background(0,null,true);if(_d&&_d.indexOf("linear-gradient")>=0){_d=this._getGradientValue(_d);}_f=_a._query_status_color(0);_h=_a._query_status_font(0);if(this._applyL){_i=_a._query_status_border(0);}_e=_a._query_status_background(1,null,true);if(_e&&_e.indexOf("linear-gradient")>=0){_e=this._getGradientValue(_e);}_g=_a._query_status_color(1);var _t;var _u=_c;if(this._checkGradation(_d)){}else{_t=this._getColortoRGB(_d);}var _v=this._getColortoRGB(_f);var _w=nexacro._nvl(this._getFitFontValue(_h),"");var _x=this._getCellStyle(_a,0,false,"textDecoration","enabled");if(_x){_w=_x+","+_w;}if(this._applyL&&_i){if(_i.right&&_i.right.style!="none"&&_i.right._width!=0){if(_i.right.color=="transparent"){_s.vertical="empty";}else{_s.vertical=this._getColortoRGB(_i.right.color)+(_i.right.style=="solid"?"":","+_i.right.style);}}if(_i.left&&_i.left.style!="none"&&_i.left._width!=0){if(_i.left.color=="transparent"){_s.vertical1="empty";}else{_s.vertical1=this._getColortoRGB(_i.left.color)+(_i.left.style=="solid"?"":","+_i.left.style);}}if(_i.bottom&&_i.bottom.style!="none"&&_i.bottom._width!=0){if(_i.bottom.color=="transparent"){_s.horizon="empty";}else{_s.horizon=this._getColortoRGB(_i.bottom.color)+(_i.bottom.style=="solid"?"":","+_i.bottom.style);}}if(_i.top&&_i.top.style!="none"&&_i.top._width!=0){if(_i.top.color=="transparent"){_s.horizon1="empty";}else{_s.horizon1=this._getColortoRGB(_i.top.color)+(_i.top.style=="solid"?"":","+_i.top.style);}}if(this._applyHead){_r=(_a._col==0?_s.vertical1:"empty")+":"+"empty"+":";}else{_r=(_a._col==0?_s.vertical1:"empty")+":"+(_a._row==0?_s.horizon1:"empty")+":";}_r+=_s.vertical+":"+_s.horizon;}if(this._checkExpr(_c,_a.cssclass)){_u=undefined;}else{this._stylecache[_b+"align"]=_u;}if(this._checkExpr(_d,_a.cssclass)){_t=undefined;}else{this._stylecache[_b+"background0"]=_t;}if(this._checkExpr(_f,_a.cssclass)){_v=undefined;}else{this._stylecache[_b+"color0"]=_v;}if(this._checkExpr(_h,_a.cssclass)){_w=undefined;}else{this._stylecache[_b+"font"]=_w;}if(this._checkExpr(_i,_a.cssclass)){}else{this._stylecache[_b+"line"]=_r;}if(_e){if(this._checkGradation(_e)){_j=_a._stylecache.gradationtruefalsenormal;if(!_j){_j=_a.style.gradation2;if(!_j){_j=_a._query_pseudo_gradation(0,true,false,"enabled");}}_m=this._getGradationColor(_j);}else{_m=this._getColortoRGB(_e);}if(this._checkExpr(_e,_a.cssclass)){_m=undefined;}else{this._stylecache[_b+"background1"]=_m;}if(_t!=_m){_p=true;}}else{this._stylecache[_b+"background1"]=_m=_t;}if(_g){_n=this._getColortoRGB(_g);if(this._checkExpr(_g,_a.cssclass)){_n=undefined;}else{this._stylecache[_b+"color1"]=_n;}if(_v!=_n){_p=true;}}else{this._stylecache[_b+"color1"]=_n=_v;}var _y=this._getFixedCellType(_a,0);_k=this._makeforDsStyle(_o,_u,_t,_v,_w,_r,_y);if(_p){_l=this._makeforDsStyle(_o,_u,_m,_n,_w,_r,_y);}var _z=_a._subcells;var _aa=_z.length;if(_aa){var _ab="";for(var _ac=0;_ac<_aa;_ac++ ){_ab+=this._modifyFormat(_z[_ac],_k,_l,0,_a);}return _ab;}else{return this._modifyFormat(_a,_k,_l,0);}};_pExportItem._getFixedCellType=function(_a,_b){var _c=_a._getDisplaytype(_b);var _d="";var _e;var _f;var _g=this.parent;if(_g._is_export_ex){if(!this._orgvalue_cells[_a._cellidx]){return "text";}}switch(_c){case "number":break;case "maskeditcontrol":case "mask":_e=_a._getAttrValue(_a.maskeditformat,_b);_f=_a._getAttrValue(_a.maskeditpostfixtext,_b);if(_e!=null&&_e.length!=0){_d=_e;if(_f){_d+=_f;}}var _h=_a._getAttrValue(_a.maskedittype,_b);if(_h=="number"){_c="number";}else{_c="text";}break;case "calendarcontrol":case "date":case "time":case "datetime":_c="date";var _i;_e=_a._getAttrValue(_a.calendardateformat,_b);if(_e==null||_e.length==0||!_e.match(/LONGDATE|SHORTDATE|[yMdHhms]/)){_e="yyyy-MM-dd";}else{_i=_a._getLocale(_b);if(_e=="SHORTDATE"){_e=nexacro.Locale._makeDateMaskString(_i,_e);if(_e==""){_e=nexacro.Locale._default_shortdate_format;}}else if(_e=="LONGDATE"){_e=nexacro.Locale._makeDateMaskString(_i,"SHORTDATE");if(_e==""){_e=nexacro.Locale._default_longdate_format;}}}_d=_e;_i=this._getCellLocale(_a,_b);var _j=String.fromCharCode(29);if(_i){_d+=_j+_i;}break;case "imagecontrol":if(this.exportimage.toLowerCase()=="image"){_d+="image";}_c="text";break;case "text":if(_a._getAttrValue(_a.displaytype,_b)=="normal"){_c="normal";}else{_c="text";}break;default:_c="text";break;}return _c+(_d?":"+_d:"");};_pExportItem._modifyFormat=function(_a,_b,_c,_d,_e,_f){var _g,_h,_i;_h=_i="";var _j=_a._colspan;var _k=_a._rowspan;var _l=_a._row;var _m=_a._col;var _n=_l;var _o=_m;var _p=_a._getDisplaytype(_d);if(_d<0){_g=_a._getDisplayText(_d);if(_p=="decoratetext"){_g=nexacro._getDisplayTextfromDecorateText(_g);}else if(_p=="imagecontrol"){var _q=this.exportimage.toLowerCase();if(_q=="url"||_q=="image"){var _r=this._getCellText(this.source,_d,_a._cellidx);if(_r){var _s=nexacro._getURIValue(_r);_g=nexacro._getImageLocation(_s,this._getForm()._getFormBaseUrl());}else{_g=_r;}}else{_g="";}}}else{_g=_a.text._value;}if(nexacro._isString(_g)){_g=nexacro._encodeXml(_g);}if(_e){_l=_n+_e._row;_m=_o+_e._col;}_i+="<Cell ";_i+="row=\""+_l+"\" col=\""+_m+"\" ";_h+="rowspan=\""+_k+"\" ";_h+="colspan=\""+_j+"\" ";if(this._exportmerge==1){if(_f!=null){_g=_f;}}else if(this._exportmerge==2){if(_f!=null){_h=_f;}}_i+=_h;if(_g){_i+="text=\""+_g+"\" ";}var _t="";_i+="style1=\""+_b+"\" ";if(_c){_i+="style2=\""+_c+"\" ";}var _u=_a.displaytype;if(_u){_t=_p;switch(_t){case "imagecontrol":if(this.exportimage.toLowerCase()=="image"){_i+="displaytype=\"imagecontrol\" ";}case "text":_t="string";break;case "number":_t="int";break;case "calendarcontrol":case "date":case "time":case "datetime":_t="date";var _v=_a._getAttrValue(_a.calendardateformat,_d);if(_v==null||_v.length==0||!_v.match(/[yMdHhms]/)){_v="yyyy-MM-dd";}_i+="displaytype=\""+_v+"\" ";break;default:_t="text";break;}_i+="type=\""+_t+"\" ";}_i+="/>";return _i;};_pExportItem._getSubCellLine=function(_a,_b,_c,_d,_e){var _f,_g,_h,_i;var _j=_a._col;var _k=_a._row;if(_j==_e){_h=_c.vertical;}else{_h="empty";}if(_j==0){_f=_b.vertical;}else{_f="empty";}if(_k==_d){_i=_c.horizon;}else{_i="empty";}if(_k==0){_g=_b.horizon;}else{_g="empty";}return _f+":"+_g+":"+_h+":"+_i;};_pExportItem._makeVirtualLine=function(_a,_b,_c){var _d;switch(_a){case "topvirtual":case "bottomvirtual":_d="empty:empty:"+_b.vertical+":empty";break;case "rightvirtual":if(_c){_d="empty:empty:empty:"+_b.horizon;}else{_d="empty:"+_b.horizon+":empty:empty";}break;case "righttopvirtual":case "rightbottomvirtual":_d="empty:empty:empty:empty";break;default:if(_c){_d="empty:empty:"+_b.vertical+":"+_b.horizon;}else{_d="empty:"+_b.horizon+":"+_b.vertical+":empty";}break;}return _d;};_pExportItem._makeFormat=function(_a){var _b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l;var _m=_a._curFormat;var _n=_m._headcells;var _o=_n?_n.length:0;var _p=_m._bodycells;var _q=_p?_p.length:0;var _r=_m._summcells;var _s=_r?_r.length:0;var _t="";var _u=this._ds_style;var _v;var _w;var _x=0;var _y=_m._cols;var _z=_m._headrows;var _aa=_m._bodyrows;var _ab=_m._summrows;var _ac,_ad,_ae,_af;var _ag;var _ah=false;var _ai=null;var _aj,_ak,_al;_t="<Formats><Format><Columns>";for(_ac=0,_ae=_y.length;_ac<_ae;_ac++ ){_t+='<Column size="'+Math.round(_y[_ac].size)+'" />';}_t+="</Columns><Rows>";for(_ac=0,_af=_z?_z.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_z[_ac].size)+'" band="head" />';}for(_ac=0,_af=_aa?_aa.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_aa[_ac].size)+'" />';}for(_ac=0,_af=_ab?_ab.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_ab[_ac].size)+'" band="summ" />';}_t+="</Rows>";if(_o>0&&this._applyHead){_t+="<Head>";for(_ac=0;_ac<_o;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_n[_ac];_k=this._getCellStyle(_i, -1,false,"background","enabled");if(this._checkGradation(_k)){_l=this._getCellStyle(_i, -1,false,"gradation","enabled");_b=this._getGradationColor(_l);}else{_b=this._getColortoRGB(_k);}_c=this._getCellStyle(_i, -1,false,"align","enabled");_d=this._getFitFontValue(this._getCellStyle(_i, -1,false,"font","enabled"));_e=this._getCellStyle(_i, -1,false,"textDecoration","enabled");if(_e){_d=_e+","+_d;}_f=this._getColortoRGB(this._getCellStyle(_i, -1,false,"color","enabled"));_v={vertical:"empty",horizon:"empty",vertical1:"empty",horizon1:"empty"};if(this._applyL){_g=this._getCellStyle(_i, -1,false,"border","enabled");if(_g){if(_g.right&&_g.right.style!="none"&&_g.right._width!=0){if(_g.right.color=="transparent"){_v.vertical="empty";}else{_v.vertical=this._getColortoRGB(_g.right.color)+(_g.right.style=="solid"?"":","+_g.right.style);}}if(_g.left&&_g.left.style!="none"&&_g.left._width!=0){if(_g.left.color=="transparent"){_v.vertical1="empty";}else{_v.vertical1=this._getColortoRGB(_g.left.color)+(_g.left.style=="solid"?"":","+_g.left.style);}}if(_g.bottom&&_g.bottom.style!="none"&&_g.bottom._width!=0){if(_g.bottom.color=="transparent"){_v.horizon="empty";}else{_v.horizon=this._getColortoRGB(_g.bottom.color)+(_g.bottom.style=="solid"?"":","+_g.bottom.style);}}if(_g.top&&_g.top.style!="none"&&_g.top._width!=0){if(_g.top.color=="transparent"){_v.horizon1="empty";}else{_v.horizon1=this._getColortoRGB(_g.top.color)+(_g.top.style=="solid"?"":","+_g.top.style);}}}}_ag=this._getFixedCellType(_i, -1);_j=_i._subcells;_x=_j.length;if(_x){for(_ad=0;_ad<_x;_ad++ ){_w=this._getSubCellLine(_j[_ad],_v,_v,_i._rowspan-1,_i._colspan-1);_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_j[_ad],_h,null, -1,_i);}}else{_w=(_i._col==0?_v.vertical1:"empty")+":"+(_i._row==0?_v.horizon1:"empty")+":";_w+=_v.vertical+":"+_v.horizon;if(this._exportmerge==1){if(!!_a._checkVirtualMerge(_i, -1)){_w=this._makeVirtualLine(_i._getVirtualMergeInfo(1).remove,_v,true);_ai="";_aj=this._merge_datas&&this._merge_datas[ -1+"_"+_ac];if(_aj){if(_aj.isVirtualStart){_ai=nexacro._encodeXml(_i._getDisplayText( -1));if(_c!="left,top"){_ak=_c.split(",");_al=_aj[_ak[1]]+"_"+_aj[_ak[0]];if(this._merge_datas[_al]){this._merge_datas[_al].disPlayText=_ai;this._merge_datas[_al].showText=true;}else{this._merge_datas[_al]={disPlayText:_ai,showText:true};}}_ai="";}else if(_aj.showText){_ai=_aj.disPlayText;}}}}else if(this._exportmerge==2){_aj=this._merge_datas&&this._merge_datas[ -1+"_"+_ac];if(_aj){if(_aj.isVirtualStart){_ai="rowspan=\""+_aj.rowspan+"\" colspan=\""+_aj.colspan+"\" ";}else{_ah=true;}}}if(!_ah){_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_i,_h,null, -1,false,_ai);}}}_t+="</Head>";}if(_q>0){_t+="<Body>";for(_ac=0;_ac<_q;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_p[_ac];_t+=this._getCellBodyStyle(_i,_ac);}_t+="</Body>";}if(_s>0&&this._applySumm){_t+="<Summary>";for(_ac=0;_ac<_s;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_r[_ac];_k=this._getCellStyle(_i, -2,false,"background","enabled");if(this._checkGradation(_k)){_l=this._getCellStyle(_i, -2,false,"gradation","enabled");_b=this._getGradationColor(_l);}else{_b=this._getColortoRGB(_k);}_c=this._getCellStyle(_i, -2,false,"align","enabled");_d=this._getFitFontValue(this._getCellStyle(_i, -2,false,"font","enabled"));_e=this._getCellStyle(_i, -2,false,"textDecoration","enabled");if(_e){_d=_e+","+_d;}_f=this._getColortoRGB(this._getCellStyle(_i, -2,false,"color","enabled"));_v={vertical:"empty",horizon:"empty"};if(this._applyL){_g=this._getCellStyle(_i, -2,false,"border","enabled");if(_g){if(_g.right&&_g.right.style!="none"&&_g.right._width!=0){_v.vertical=this._getColortoRGB(_g.right.color)+(_g.right.style=="solid"?"":","+_g.right.style);}if(_a.summarytype=="default"){if(_g.top&&_g.top.style!="none"&&_g.top._width!=0){_v.horizon=this._getColortoRGB(_g.top.color)+(_g.top.style=="solid"?"":","+_g.top.style);}}else{if(_g.bottom&&_g.bottom.style!="none"&&_g.bottom.width!=0){_v.horizon=this._getColortoRGB(_g.bottom.color)+(_g.bottom.style=="solid"?"":","+_g.bottom.style);}}}}_ag=this._getFixedCellType(_i, -2);_j=_i._subcells;_x=_j.length;if(_x){for(_ad=0;_ad<_x;_ad++ ){_w=this._getSubCellLine(_j[_ad],_v,_v,_i._rowspan-1,_i._colspan-1);_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_j[_ad],_h,null, -2,_i);}}else{_ah=false;_w=_v.vertical+":"+_v.horizon+":"+_v.vertical+":"+_v.horizon;if(this._exportmerge==1){if(!!_a._checkVirtualMerge(_i, -2)){_w=this._makeVirtualLine(_i._getVirtualMergeInfo(0).remove,_v);_ai="";_aj=this._merge_datas&&this._merge_datas[ -2+"_"+_ac];if(_aj){if(_aj.isVirtualStart){_ai=nexacro._encodeXml(_i._getDisplayText( -2));if(_c!="left,top"){_ak=_c.split(",");_al=_aj[_ak[1]]+"_"+_aj[_ak[0]];if(this._merge_datas[_al]){this._merge_datas[_al].disPlayText=_ai;this._merge_datas[_al].showText=true;}else{this._merge_datas[_al]={disPlayText:_ai,showText:true};}_ai="";}}else if(_aj.showText){_ai=_aj.disPlayText;}}}}else if(this._exportmerge==2){if(!!_a._checkVirtualMerge(_i, -2)){_aj=this._merge_datas&&this._merge_datas[ -2+"_"+_ac];if(_aj){if(_aj.isVirtualStart){_ai="rowspan=\""+_aj.rowspan+"\" colspan=\""+_aj.colspan+"\" ";}else{_ah=true;}}}}if(!_ah){_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_i,_h,null, -2,false,_ai);}}}_t+="</Summary>";}_t+="</Format></Formats>";return _t;};_pExportItem._getForm=function(){return this.parent.parent;};_pExportItem._eventExport=function(_a,_b,_c,_d){var _e=_a.exporteventtype;var _f=_a._itemsIndex;var _g=_a._exportBar;if(_e!="none"){var _h=_c+1;var _i="";var _j=_h==this._bodyRowCnt;var _k=_a._progress_pos+_h;if(_e=="item"&&_j){this.on_fire_onprogress(_a,_f,this.type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_k,_a._allRowCount);_g._set_text(_i);_g._set_pos((_f+1)/_a._allCount* 100);}}else if(_e=="itemrecord"){this.on_fire_onprogress(_a,_f,this.type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_h,this._bodyRowCnt);_g._set_text(_i);_g._set_pos(_h/this._bodyRowCnt* 100);}}else if(_e=="totalrecord"){this.on_fire_onprogress(_a,_f,this.type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_k,_a._allRowCount);_g._set_text(_i);_g._set_pos(_k/_a._allRowCount* 100);}}if(_k==_a._allRowCount&&_a.exportmessagecomplete!=""){if(_g){_g._set_text(_a.exportmessagecomplete);}}if(_j&&_g){if(_e=="itemrecord"){_a._progress_pos=_k;}else{_a._progress_pos+=this._startRow-this._preStartRow;}}}};_pExportItem._updateBarPos=function(_a,_b){if(_b!="none"&&_a._exportuitype){var _c=_a._itemsIndex+1;var _d=_a._exportBar;_a._progress_pos+=this._startRow-this._preStartRow;var _e="";var _f=this._startRow==this._bodyRowCnt;if(_b=="item"&&_f){_e=_a._getProcessStr(_c,_a._progress_pos,_a._allRowCount);_d._set_text(_e);_d._set_pos(_c/_a._allCount* 100);}else if(_b=="itemrecord"){_e=_a._getProcessStr(_c,this._startRow,this._bodyRowCnt);_d._set_text(_e);_d._set_pos(this._startRow/this._bodyRowCnt* 100);}else if(_b=="totalrecord"){_e=_a._getProcessStr(_c,_a._progress_pos,_a._allRowCount);_d._set_text(_e);_d._set_pos(_a._progress_pos/_a._allRowCount* 100);}if(_a._progress_pos==_a._allRowCount&&_a.exportmessagecomplete!=""){_d._set_text(_a.exportmessagecomplete);}}};_pExportItem._rollbackSuppressInfo=function(){var _a=this.source._curFormat._bodycells;var _b=this._tmpSuppressInfos&&this._tmpSuppressInfos.length;for(var _c=0;_c<_b;_c++ ){_a[_c]._suppress_infos=this._tmpSuppressInfos.shift();}};_pExportItem._gridSuppressUpdate=function(_a,_b){var _c=_a._curFormat._bodycells;var _d=_c.length;this._tmpSuppressInfos=[];var _e;for(_e=0;_e<_d;_e++ ){this._tmpSuppressInfos.push(_c[_e]._suppress_infos);}_a._analyzeSuppress(true);for(_e=0;_e<_b;_e++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_a._suppressUpdateRow(_e,0,_b-1,true);}};_pExportItem._gridExportContinue=function(_a){var _b=this.source;var _c=this._ds_command;_c.setColumn(0,"command","export");_c.setColumn(0,"type",_a._exporttype);_c.setColumn(0,"item",_b.id);_c.setColumn(0,"seq",this._seq);_c.setColumn(0,"startrow",this._startRow);_c.setColumn(0,"instanceid",this._instanceId);_c.setColumn(0,"url",_a._fileURL);_c.setColumn(0,"summarytype",_b.summarytype);_c.setColumn(0,"range",this.range);_c.setColumn(0,"exportsize",this.exportsize);_c.setColumn(0,"exporthead",this._exporthead);_c.setColumn(0,"exportimage",this.exportimage);_c.setColumn(0,"exportfilename",_a.exportfilename);_c.setColumn(0,"exportfilepath",_a.exportfilepath);_c.setColumn(0,"format","");_c.setColumn(0,"password",_a._file_password);_c.setColumn(0,"wraptext",_a._wrap_text);_c.setColumn(0,"righttoleft",this._righttoleft);_c.setColumn(0,"separator",_a.separator?_a.separator:_a._defaultseparator);_c.setColumn(0,"quotechar",_a.quotechar);var _d=this._ds_style;var _e=this._ds_style2;if(!_e){_e=this._ds_style2=new nexacro.Dataset("STYLE2");_e.addColumn("type","String",10);_e.addColumn("name","String",32);_e.addColumn("value","String",1024);_e.addColumn("locale","String",32);}else{this._ds_style2.clearData();}delete this._ds_cell;var _f=new nexacro.Dataset("CELL");this._ds_cell=_f;var _g=_b.getCellCount("body");var _h=this._bodyRowCnt;var _i;var _j=false;if(this._exportmerge&&_b._is_use_suppress&&_h>=_b._bodyBand._get_rows().length){this._gridSuppressUpdate(_b,_h);}var _k=null;var _l=null;if(_g>0){for(var _cf=0;_cf<_g;_cf++ ){_f.addColumn("Column"+_cf,"String",256);}var _m=this._partitionRow+this._startRow;if(_m>=_h){_m=_h;this._eof=true;_k=this.parent._argsParam;_l=this.parent._argsDsParam;}var _n=_b._curFormat._bodycells;var _o=false;var _p=0;var _q;var _r,_s,_t,_u;var _v=false;var _w=this._getWindow();for(var _cg=this._startRow;_cg<_m;_cg++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(_w);}_q=0;var _x,_y;var _z=false;for(_y=0;_y<_g;_y++ ){_z=_z||_b.isSelectedCell(_y,"body",_cg, -9);}var _aa=this.exportselect=="selectrecord";var _ab;if(_z||!_aa){_ab=_f.addRow();if(_aa){this._eventExport(_a,this.type,_cg,this._selectcount++ );}else{this._eventExport(_a,this.type,_cg);}}else{continue;}var _ac=_cg%2;var _ad=(this.exportvalue=="selectstyle");for(_y=0;_y<_g;_y++ ){_v=false;_o=_b.isSelectedCell(_y,"body",_cg, -9);if(!_o){if(_aa){_v=true;}}var _ae;var _af;var _ag;var _ah;var _ai;var _aj=_n[_y];var _ak=_aj._rowspan;var _al=_aj._suppress_infos;var _am=_o&&_ad;var _an=this._checkExpr(null,_aj.cssclass);var _ao=_an?_aj._getAttrValue(_aj.cssclass,_cg):"";var _ap=_y+(_ao?_ao:"");var _aq=_am?"-c":"";var _ar=this._stylecache[_ap+"align"+_aq];var _as=this._stylecache[_ap+"line"+_aq];var _at,_au,_av;{if(_v){_at="255,255,255";_au="255,255,255";_r=this._d_BLColor;_as=_r+":"+_r+":"+_r+":"+_r;_j=true;}else{_at=this._stylecache[_ap+"background"+_ac+_aq];_au=this._stylecache[_ap+"color"+_ac+_aq];}_av=this._stylecache[_ap+"font"+_aq];}if(!nexacro._isNull(_ar)){_af=_ar;if(_an){_j=true;}}else{if(this._applyA){_j=true;_af=nexacro._nvl(this._getCellStyle(_aj,_cg,_ac,"align",_am),"");if(_an){this._stylecache[_ap+"align"+_aq]=_af;}}}if(!nexacro._isNull(_at)){_ae=_at;if(_an){_j=true;}}else{if(this._applyB){_j=true;_ae=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_aj,_cg,_ac,"background",_am)),"");if(_an){this._stylecache[_ap+"background"+_ac+_aq]=_ae;}}}if(!nexacro._isNull(_au)){_ah=_au;if(_an){_j=true;}}else{if(this._applyC){_j=true;_ah=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_aj,_cg,_ac,"color",_am)),"");if(_an){this._stylecache[_ap+"color"+_ac+_aq]=_ah;}}}if(!nexacro._isNull(_av)){_ag=_av;if(_an){_j=true;}}else{if(this._applyF){_j=true;_ag=nexacro._nvl(this._getFitFontValue(this._getCellStyle(_aj,_cg,_ac,"font",_am)),"");var _aw=this._getCellStyle(_aj,_cg,_ac,"textDecoration",_am);if(_aw){_ag=_aw+","+_ag;}if(_an){this._stylecache[_ap+"font"+_aq]=_ag;}}}var _ax=false,_ay=null,_az=null,_ba=null,_bb=null,_bc;var _bd=0;var _be=0;var _bf=false;switch(this._exportmerge){case 0:break;case 1:if(_aj.suppress>0){_j=_ax=true;if(_al[_cg]){if(_al[_cg].border_proc){_bb="empty";}if(_al[_cg].text_proc){_v=true;}}}_b._checkVirtualMerge(_aj,_cg);if(_aj._getVirtualMergeInfo(_cg+2)){var _bg=_aj._getVirtualMergeInfo(_cg+2).remove;if(_bg){_j=_ax=true;switch(_bg){case "bottomvirtual":_bb="empty";break;case "rightbottomvirtual":_ba=_bb="empty";break;case "rightvirtual":_ba="empty";break;}}}break;case 2:if(_aj.suppress>0){_j=_ax=true;if(_ak>1){_bf=true;}var _bh=_y+"count";var _bi=this._excel_suppress_info;if(!_bi[_bh]){_bi[_bh]=0;_af=_af.split(",")[0]+", "+this._suppress_align_table[_aj.suppressalign];}if(_al[_cg]&&_al[_cg].border_proc){this._excel_suppress_info[_bh]++ ;}else{_bd= ++_bi[_bh];if(_bf){_bd=_bd* _ak;}if(_bf&&_bd==1){_bf=false;}_bi[_bh]=0;}if(_al[_cg]&&_al[_cg].text_proc){_v=true;}}_s=this._merge_datas&&this._merge_datas[_cg+"_"+_y];if(_s&&_s.isVirtualEnd){_j=_ax=true;_bd=_s.rowspan;_be=_s.colspan;}break;}if(_b._supphorztype>0){if(_aj._area=="left"||_aj._area=="right"){_j=_ax=true;if(_al[_cg]){if(_al[_cg].horz_text_proc){_v=true;}}}}if(!_ax&&!nexacro._isNull(_as)){_ai=_as;if(_an){_j=true;}}else{if(this._applyL){_t=this._getCellStyle(_aj,_cg,_ac,"border",_am);if(!_ay){_ay=this._getColortoRGB(_t.left.color)+(_t.left.style=="solid"?"":","+_t.left.style);}if(!_az){_az=this._getColortoRGB(_t.top.color)+(_t.top.style=="solid"?"":","+_t.top.style);}if(!_ba){_ba=this._getColortoRGB(_t.right.color)+(_t.right.style=="solid"?"":","+_t.right.style);}if(!_bb){_bb=this._getColortoRGB(_t.bottom.color)+(_t.bottom.style=="solid"?"":","+_t.bottom.style);}_ai=_ay+":"+_az+":"+_ba+":"+_bb;if(_an){this._stylecache[_ap+"line"+_aq]=_ai;}}else{_ai="empty:empty:empty:empty:";}}_u=this._getFixedCellType(_aj,_cg);_i=this._makeforDsStyle(_e,_af,_ae,_ah,_ag,_ai,_u,_bd,_be);var _bj=false;if(_u.indexOf("date")> -1&&(this._checkExpr(_aj.locale)||this._checkExpr(_aj.calendardateformat))){_j=true;if(_aj.calendardateformat=="LONGDATE"){_bj=true;}}var _bk=_aj._getDisplaytype(_cg);if(!_j){if(_bk=="mask"||_bk=="maskeditcontrol"){var _bl=_aj._getAttrValue(_aj.maskedittype,_cg);if(_bl=="number"){_j=true;}}}var _bm=this._getCellText(_b,_cg,_y);_x=_v?"":_bm;var _bn=this._orgvalue_cells[_y];if(_bj){_aj.calendardateformat="SHORTDATE";_x=_aj._getDisplayText_date(_cg);_aj.calendardateformat="LONGDATE";}if(_bk=="imagecontrol"){var _bo=this.exportimage.toLowerCase();if(_bo=="url"||_bo=="image"){var _bp=this._getCellText(_b,_cg,_y);if(_bp){var _bq=nexacro._getURIValue(_bp);_x=nexacro._getImageLocation(_bq,this._getForm()._getFormBaseUrl());}else{_x=_bp;}}else{_x="";}}var _br;if(_a._commdataformat==3){_br="_x001D_";}else{_br=String.fromCharCode(29);}if(this._exportmerge==1){if(_aj.suppress>0){if(_al[_cg]&&_al[_cg].text_proc){_x="";}}if(_b._supphorztype>0){if(_aj._area=="left"||_aj._area=="right"){if(_al[_cg]){if(_al[_cg].horz_text_proc){_x="";}}}}if(!!_b._checkVirtualMerge(_aj,_cg)){_x="";_s=this._merge_datas&&this._merge_datas[_cg+"_"+_y];if(_s){if(_s.isVirtualStart){if(_af=="left,top"){_x=_bm;}else{var _bs=_af.split(",");var _bt=_s[_bs[1]]+"_"+_s[_bs[0]];if(this._merge_datas[_bt]){this._merge_datas[_bt].disPlayText=_bm;this._merge_datas[_bt].showText=true;}else{this._merge_datas[_bt]={disPlayText:_bm,showText:true};}}}if(_s.showText){_x=_s.disPlayText;}}}}else if(this._exportmerge==2){if(_b._supphorztype>0){if(_aj._area=="left"||_aj._area=="right"){if(_al[_cg]){if(_al[_cg].horz_text_proc){_x="";}}}}}if(_a._orgval_type||_bn){_x=nexacro._isNumber(_x)?_x:nexacro._isDecimal(_x)?_x.toString():nexacro._nvl(_x,"");}else{_x=nexacro._nvl(_x,"");}if(_bf){_f.setColumn(_ab,"Column"+(_y+_q),_x+_br+(_j||(_o&&_ad)?_i:"")+_br+_bf);_bf=false;}else{_f.setColumn(_ab,"Column"+(_y+_q),_x+_br+(_j||(_o&&_ad)?_i:""));}if(_aj._subcells.length){var _bu=_aj._subcells;var _bv=_bu.length;var _bw=_aj._rowspan-1;var _bx=_aj._colspan-1;var _by="";_r=this._d_BLColor;if(this._applyL){_t=this._getCellStyle(_aj,_cg,_ac,"border",_am);_bc=this._getColortoRGB(_t.right.color)+(_t.right.style=="solid"?"":","+_t.right.style);}else{_bc=_r;}var _bz;var _ca;var _cb;var _cc;for(var _ch=0;_ch<_bv;_ch++ ){var _cd=_bu[_ch]._col;var _ce=_bu[_ch]._row;if(_cd==_bx){_cb=_bc;}else{_cb="empty";}if(_cd==0){_bz=_r;}else{_bz="empty";}if(_ce==_bw){_cc=_bc;}else{_cc="empty";}if(_ce==0){_ca=_r;}else{_ca="empty";}_by=_bz+":"+_ca+":"+_cb+":"+_cc;_u=this._getFixedCellType(_bu[_ch],0);_i=this._makeforDsStyle(_e,_af,_ae,_ah,_ag,_by,_u);if(_ch!=0){_f.addColumn("Column"+(_cf+_q),"String",256);_q++ ;}_bm=this._getCellText(_b,_cg,_y,_ch);_x=_v?"":_bm;if(_a._orgval_type||_bn){_x=nexacro._isNumber(_x)?_x:nexacro._isDecimal(_x)?_x.toString():nexacro._nvl(_x,"");}else{_x=nexacro._nvl(_x,"");}_f.setColumn(_ab,"Column"+(_y+_q),_x+_br+_i);}}}_p++ ;}this._preStartRow=this._startRow;this._startRow=_m;}_c.setColumn(0,"eof",this._eof);if(this._ds_response){delete this._ds_response;}this._ds_response=new nexacro.Dataset("RESPONSE");this._rollbackSuppressInfo();if(_l!=undefined){this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style2 CELL=_ds_cell"+" "+_l,"_ds_response=RESPONSE",_k,"_exportCallback",true,_a._commdataformat,_a._commcompress);}else{this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style2 CELL=_ds_cell","_ds_response=RESPONSE",_k,"_exportCallback",true,_a._commdataformat,_a._commcompress);}this._updateBarPos(_a,_a.exporteventtype);};_pExportItem._onHttpTransactionError=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=false;var _k=nexacro.MakeCommunicationError(this,_d,_e,_f,_g,_h,_i);if(_b){_j=this.on_fire_onerror(_a,_k.name,_k.message,_c,_f,_g,_h);}return _j;};_pExportItem._exportCallback=function(_a,_b,_c){var _d=this.source;var _e=this.parent;var _f=_e._exportBar;if(_b<0){_c=nexacro._decodeXml(_c);this.on_fire_onerror(_e,"ObjectError",_c,_b);nexacro._stopTransaction(this,0);if(_f){_f._hide();_f._set_pos(0);_f._set_text("");}if(_d._hasTree){_d.set_treeinitstatus(this._gridTempInfo.treeinitstatus);nexacro.Grid.prototype._recreate_contents_all=_e._tempSaveMethod;_e._tempSaveMethod=null;_d._treeIndexes=this._gridTempInfo.treeIndexes;_d._treeStates=this._gridTempInfo.treeStates;_d.enableevent=this._gridTempInfo.enableevent;this._gridTempInfo=null;}}else{this._instanceId=this._ds_response.getColumn(0,"instanceid");var _g=this._ds_response.getColumn(0,"url");if(_g!=null&&_g!=""){_e._fileURL=_g;}var _h=_e._itemsIndex;var _i=_h+1==_e._allCount;var _j=this._startRow==this._bodyRowCnt;this._seq++ ;if(_j){if(_d._hasTree){_d.set_treeinitstatus(this._gridTempInfo.treeinitstatus);nexacro.Grid.prototype._recreate_contents_all=_e._tempSaveMethod;_e._tempSaveMethod=null;_d._treeIndexes=this._gridTempInfo.treeIndexes;_d._treeStates=this._gridTempInfo.treeStates;_d.enableevent=this._gridTempInfo.enableevent;this._gridTempInfo=null;}if(_i){var _k=_e.exportmessagecomplete;if(_k){_f._set_text(_k);}if(_f){_f._hide();_f._set_pos(0);_f._set_text("");}this._tmpSuppressInfos=null;_e._fileURL="";_e._allRowCount=0;_e._progress_pos=0;_e._itemsIndex=0;var _l;if(_g!=null&&_g!=""){var _m=_g.lastIndexOf("/");if(_m== -1){_m=_g.lastIndexOf("\\");}if(_m!= -1){_l=_g.substring(_m+1);}}var _n=nexacro.getApplication();if(_n){_n._endCommProgress();}if(_e._filedownload){if(_e.exportfilename==""){var _o=_l.lastIndexOf(".");if(_o!= -1){_l=_l.substring(0,_o);}else{_l="";}}else{_l=_e.exportfilename;}switch(_e.exporttype){case nexacro.ExportTypes.EXCEL:case nexacro.ExportTypes.EXCEL97:_l+=".xls";break;case nexacro.ExportTypes.EXCEL2007:_l+=".xlsx";break;case nexacro.ExportTypes.HANCELL2010:case nexacro.ExportTypes.HANCELL2014:_l+=".cell";break;case nexacro.ExportTypes.CSV:_l+=".csv";break;case nexacro.ExportTypes.TXT:_l+=".txt";break;}var _p;if(_e.exportfilepath!=null&&_e.exportfilepath!=""){_p=_e.exportfilepath;if(_p.charAt(_p.length-1)!='\\'){_p+="\\";}}if(nexacro._Browser=="Runtime"){nexacro._downloadExport(_g,false,_e._hidden_frame_handle,_l,_p,_e.filefilter,_e.filefilterindex,"export");}else{nexacro._downloadExport(_g,false,this);}}this.on_fire_onsuccess(_e,this,_g);}else{_e._itemsIndex++ ;if(_e._itemsIndex==_e._gCount){}else{_e._grids[_e._itemsIndex]._gridItemExport(_e);}}this._instanceId="";this._startRow=0;this._seq=1;this._eof=false;this._selectcount=0;}else{this._gridExportContinue(_e);}}};_pExportItem._makeMergeDatas=function(_a,_b,_c){var _d=_b;var _e=this._merge_datas={};var _f,_g,_h,_i,_j;_i=0;var _k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u;var _v=_a._getGridRowCount()-1;for(var _w=0,_x=_a._virtual_mergecell_arr.length;_w<_x;_w++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_f=_a._virtual_mergecell_arr[_w];if(_f.start_subrow!=null){_i=_f.start_subrow;}if(_f.end_row>_v){_h=_g=_v;}else{_h=_g=_f.end_row;}if(_f.start_row== -1){_d=_a._curFormat._headrows?_a._curFormat._headrows.length:0;_g=_u=0;}else if(_f.start_row== -2){_d=_a._curFormat._summrows?_a._curFormat._summrows.length:0;_g=_u=0;}else{_u=_f.start_row;}_k=(_d* _g+_f.end_subrow)-(_d* _u+_i)+1;_l=_f.end_column-_f.start_column+1;_j=((_d* _u+_i+1)+(_d* _g+_f.end_subrow+1))/2<<0;_m=_f.start_row;_n=(_j-1)/_d<<0;_o=_h;_s=_c* _i+_f.start_column;_t=_c* _f.end_subrow+_f.end_column;_p=((_j-1)%_d* _c+_f.start_column)<<0;_q=((_j-1)%_d* _c+(_f.start_column+_f.end_column)/2)<<0;_r=((_j-1)%_d* _c+_f.end_column)<<0;if(_f.start_row<0){_n=_f.start_row;}_e[_m+"_"+_s]={isVirtualStart:true,left:_p,center:_q,right:_r,top:_m,middle:_n,bottom:_o,rowspan:_k,colspan:_l};_e[_o+"_"+_t]={isVirtualEnd:true,rowspan:_k,colspan:_l};}};_pExportItem._gridItemExport=function(_a){var _b=_a._exportuitype;if(_a.exporteventtype!="none"&&_b){var _c=_a._exportBar;if(!_c||_c._uitype!=_b){_c=_a._exportBar=_a._getExportBar(_b);var _d=_a._getProcessStr(_a.count(),_a._allRowCount,_a._allRowCount);_d=nexacro._getLongerStr(_d,_a.exportmessagecomplete,_a.exportmessageready);var _e=_c._textbox;var _f=_e?_e._getCurrentStyleInheritValue("font"):_c.font||_c._getCurrentStyleInheritValue("font");var _g=nexacro._getTextSize(_d,_f);_c._textWidth=_g[0];_c._textHeight=_g[1];}if(_a._itemsIndex==0&&_a.exportmessageready!=""){_c._set_text(_a.exportmessageready);}_c._show();}var _h=this.source;var _i=_h._curFormat._cols?_h._curFormat._cols.length:0;var _j=_h._curFormat._bodyrows?_h._curFormat._bodyrows.length:0;if(_h._hasTree){this._gridTempInfo={};_a._tempSaveMethod=nexacro.Grid.prototype._recreate_contents_all;nexacro.Grid.prototype._recreate_contents_all=nexacro._emptyFn;this._gridTempInfo.enableevent=_h.enableevent;_h.enableevent=false;this._gridTempInfo.treeIndexes=_h._treeIndexes.slice(0);this._gridTempInfo.treeStates=_h._treeStates.slice(0);this._gridTempInfo.treeinitstatus=_h.treeinitstatus;_h.set_treeinitstatus("expand,all");}if(_h._hasVirtualMergeCell()){this._makeMergeDatas(_h,_j,_i);}this._style_map1=null;this._style_map2=null;var _k=this._ds_style;if(!_k){_k=this._ds_style=new nexacro.Dataset("STYLE");_k.addColumn("type","String",10);_k.addColumn("name","String",32);_k.addColumn("value","String",1024);_k.addColumn("locale","String",32);}else{_k.clearData();}var _l=this._ds_command;if(!_l){_l=new nexacro.Dataset("COMMAND");this._ds_command=_l;_l.addColumn("command","String",32);_l.addColumn("type","int",32);_l.addColumn("item","String",256);_l.addColumn("seq","int");_l.addColumn("startrow","int",32);_l.addColumn("eof","boolean",32);_l.addColumn("instanceid","String",256);_l.addColumn("url","String",256);_l.addColumn("summarytype","String",256);_l.addColumn("range","String",32);_l.addColumn("exportsize","String",32);_l.addColumn("exporthead","String",32);_l.addColumn("exportimage","String",32);_l.addColumn("exportfilename","String",32);_l.addColumn("exportfilepath","String",256);_l.addColumn("format","String",1024* 1024);_l.addColumn("password","String",256);_l.addColumn("wraptext","boolean",32);_l.addColumn("locale","String",32);_l.addColumn("righttoleft","boolean",32);_l.addColumn("separator","String",32);_l.addColumn("quotechar","String",32);}else{_l.clearData();}_l.addRow();_l.setColumn(0,"command","export");_l.setColumn(0,"type",_a._exporttype);_l.setColumn(0,"item",_h.id);_l.setColumn(0,"seq",this._seq);_l.setColumn(0,"startrow",this._startRow);_l.setColumn(0,"instanceid",this._instanceId);_l.setColumn(0,"url",_a._fileURL);_l.setColumn(0,"summarytype",_h.summarytype);_l.setColumn(0,"range",this.range);var _m=this.exportselect=="selectrecord";var _n=((_h.selecttype!="area")&&(_h.selecttype!="multiarea")&&(_h.selecttype!="treecell"))?true:false;if(_n){if(_m){if(this._exporthead==""){this._exporthead="nohead, nosumm";this._applyHead=false;this._applySumm=false;}this._exportmerge=false;}}else{this._exporthead="nohead, nosumm";this._applyHead=false;this._applySumm=false;}_l.setColumn(0,"exportsize",this.exportsize);_l.setColumn(0,"exporthead",this._exporthead);_l.setColumn(0,"exportimage",this.exportimage);_l.setColumn(0,"exportfilename",_a.exportfilename);_l.setColumn(0,"exportfilepath",_a.exportfilepath);if(nexacro._Browser=="Runtime"){nexacro._flushCommand(this._getWindow());}var _o=nexacro._replaceAll(this._makeFormat(_h),"&#13;","");_l.setColumn(0,"format",_o);_l.setColumn(0,"password",_a._file_password);_l.setColumn(0,"wraptext",_a._wrap_text);_l.setColumn(0,"righttoleft",this._righttoleft);_l.setColumn(0,"separator",_a.separator?_a.separator:_a._defaultseparator);_l.setColumn(0,"quotechar",_a.quotechar);var _p=_h._getLocale();if(_p){_p=_p.replace(/-/g,"_");_l.setColumn(0,"locale",_p);}var _q=new nexacro.Dataset("CELL");this._ds_cell=_q;var _r=_h.getCellCount("body");var _s=this._bodyRowCnt=_h._getGridRowCount();var _t="";if(this._exportmerge&&_h._is_use_suppress&&_s>=_h._bodyBand._get_rows().length){this._gridSuppressUpdate(_h,_s);}var _u=null;var _v=null;if(_r>0){for(var _cq=0;_cq<_r;_cq++ ){_q.addColumn("Column"+_cq,"String",256);}var _w=this.parent?(this.parent.transferrowcount||_s):_s;var _x=this._partitionRow=_w;if(_x>=_s){_x=_s;this._eof=true;_u=this.parent._argsParam;_v=this.parent._argsDsParam;}var _y=_h._curFormat._bodycells;var _z=(this.exportvalue=="selectstyle");var _aa;var _ab;var _ac=false;var _ad,_ae,_af,_ag;var _ah,_ai;var _aj=this._getWindow();for(_ah=0;_ah<_x;_ah++ ){_ab=0;if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(_aj);}var _ak;var _al=false;var _am;for(_ai=0;_ai<_r;_ai++ ){_al=_al||_h.isSelectedCell(_ai,"body",_ah, -9);}if(_al||!_m){_am=_q.addRow();if(_m){this._eventExport(_a,this.type,_ah,this._selectcount++ );}else{this._eventExport(_a,this.type,_ah);}}else{continue;}var _an=_ah%2;for(_ai=0;_ai<_r;_ai++ ){_ac=false;_aa=_h.isSelectedCell(_ai,"body",_ah, -9);if(!_aa){if(_m){_ac=true;}}var _ao,_ap,_aq,_ar,_as;var _at=_y[_ai];var _au=_at._suppress_infos;var _av=_aa&&_z;var _aw=false;var _ax=_at._rowspan;var _ay=this._checkExpr(null,_at.cssclass);var _az=_ay?_at._getAttrValue(_at.cssclass,_ah):"";var _ba=_ai+(_az?_az:"");var _bb=_av?"-c":"";var _bc=this._stylecache[_ba+"align"+_bb];var _bd=this._stylecache[_ba+"line"+_bb];var _be,_bf,_bg;{if(_ac){_be="255,255,255";_bf="255,255,255";_ad=this._d_BLColor;_bd=_ad+":"+_ad+":"+_ad+":"+_ad;_aw=true;}else{_be=this._stylecache[_ba+"background"+_an+_bb];_bf=this._stylecache[_ba+"color"+_an+_bb];}_bg=this._stylecache[_ba+"font"+_bb];}if(!nexacro._isNull(_bc)){_ap=_bc;if(_ay){_aw=true;}}else{if(this._applyA){_aw=true;_ap=nexacro._nvl(this._getCellStyle(_at,_ah,_an,"align",_av),"");if(_ay){this._stylecache[_ba+"align"+_bb]=_ap;}}else{_ap=null;}}if(!nexacro._isNull(_be)){_ao=_be;if(_ay){_aw=true;}}else{if(this._applyB){_aw=true;_ao=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_at,_ah,_an,"background",_av)),"");if(_ay){this._stylecache[_ba+"background"+_an+_bb]=_ao;}}else{_ao=null;}}if(!nexacro._isNull(_bf)){_ar=_bf;if(_ay){_aw=true;}}else{if(this._applyC){_aw=true;_ar=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_at,_ah,_an,"color",_av)),"");if(_ay){this._stylecache[_ba+"color"+_an+_bb]=_ar;}}else{_ar=null;}}if(!nexacro._isNull(_bg)){_aq=_bg;if(_ay){_aw=true;}}else{if(this._applyF){_aw=true;_aq=nexacro._nvl(this._getFitFontValue(this._getCellStyle(_at,_ah,_an,"font",_av)),"");var _bh=this._getCellStyle(_at,_ah,_an,"textDecoration",_av);if(_bh){_aq=_bh+","+_aq;}if(_ay){this._stylecache[_ba+"font"+_bb]=_aq;}}else{_aq=null;}}var _bi=false,_bj=null,_bk=null,_bl=null,_bm=null,_bn;var _bo=0;var _bp=0;var _bq=false;switch(this._exportmerge){case 0:break;case 1:if(_at.suppress>0){_aw=_bi=true;if(_au[_ah]){if(_au[_ah].border_proc){_bm="empty";}if(_au[_ah].text_proc){_ac=true;}}}_h._checkVirtualMerge(_at,_ah);if(_at._getVirtualMergeInfo(_ah+2)){var _br=_at._getVirtualMergeInfo(_ah+2).remove;if(_br){_aw=_bi=true;switch(_br){case "bottomvirtual":_bm="empty";break;case "rightbottomvirtual":_bl=_bm="empty";break;case "rightvirtual":_bl="empty";break;}}}break;case 2:if(_at.suppress>0){if(_ax>1){_bq=true;}_aw=_bi=true;var _bs=_ai+"count";var _bt=this._excel_suppress_info;if(!_bt[_bs]){_bt[_bs]=0;_ap=_ap.split(",")[0]+", "+this._suppress_align_table[_at.suppressalign];}if(_au[_ah]&&_au[_ah].border_proc){this._excel_suppress_info[_bs]++ ;}else{_bo= ++_bt[_bs];if(_bq){_bo=_bo* _ax;}if(_bq&&_bo==1){_bq=false;}_bt[_bs]=0;}if(_au[_ah]&&_au[_ah].text_proc){_ac=true;}}_ae=this._merge_datas&&this._merge_datas[_ah+"_"+_ai];if(_ae&&_ae.isVirtualEnd){_aw=_bi=true;_bo=_ae.rowspan;_bp=_ae.colspan;}break;}if(_h._supphorztype>0){if(_at._area=="left"||_at._area=="right"){_aw=_bi=true;if(_au[_ah]){if(_au[_ah].horz_text_proc){_ac=true;}}}}if(!_bi&&!nexacro._isNull(_bd)){_as=_bd;if(_ay){_aw=true;}}else{if(this._applyL){_af=this._getCellStyle(_at,_ah,_an,"border",_av);if(!_bj){if(_af.left){_bj=this._getColortoRGB(_af.left.color)+(_af.left.style=="solid"?"":","+_af.left.style);}else{_bj="transparent,none";}}if(!_bk){if(_af.top){_bk=this._getColortoRGB(_af.top.color)+(_af.top.style=="solid"?"":","+_af.top.style);}else{_bk="transparent,none";}}if(!_bl){if(_af.right){_bl=this._getColortoRGB(_af.right.color)+(_af.right.style=="solid"?"":","+_af.right.style);}else{_bl="transparent,none";}}if(!_bm){if(_af.bottom){_bm=this._getColortoRGB(_af.bottom.color)+(_af.bottom.style=="solid"?"":","+_af.bottom.style);}else{_bm="transparent,none";}}_as=_bj+":"+_bk+":"+_bl+":"+_bm;if(_ay){this._stylecache[_ba+"line"+_bb]=_as;}}else{_as="empty:empty:empty:empty:";}}_ag=this._getFixedCellType(_at,_ah);_t=this._makeforDsStyle(_k,_ap,_ao,_ar,_aq,_as,_ag,_bo,_bp);var _bu=false;if(_ag.indexOf("date")> -1&&(this._checkExpr(_at.locale)||this._checkExpr(_at.calendardateformat))){_aw=true;if(_at.calendardateformat=="LONGDATE"){_bu=true;}}var _bv=_at._getDisplaytype(_ah);if(!_aw){if(_bv=="mask"||_bv=="maskeditcontrol"){var _bw=_at._getAttrValue(_at.maskedittype,_ah);if(_bw=="number"){_aw=true;}}}var _bx=this._getCellText(_h,_ah,_ai);_ak=_ac?"":_bx;var _by=this._orgvalue_cells[_ai];if(_bu){_at.calendardateformat="SHORTDATE";_ak=_at._getDisplayText_date(_ah);_at.calendardateformat="LONGDATE";}if(_bv=="imagecontrol"){var _bz=this.exportimage.toLowerCase();if(_bz=="url"||_bz=="image"){var _ca=this._getCellText(_h,_ah,_ai);if(_ca){var _cb=nexacro._getURIValue(_ca);_ak=nexacro._getImageLocation(_cb,this._getForm()._getFormBaseUrl());}else{_ak=_ca;}}else{_ak="";}}var _cc;if(_a._commdataformat==3){_cc="_x001D_";}else{_cc=String.fromCharCode(29);}if(this._exportmerge==1){if(_at.suppress>0){if(_au[_ah]&&_au[_ah].text_proc){_ak="";}}if(_h._supphorztype>0){if(_at._area=="left"||_at._area=="right"){if(_au[_ah]){if(_au[_ah].horz_text_proc){_ak="";}}}}if(!!_h._checkVirtualMerge(_at,_ah)){_ak="";_ae=this._merge_datas&&this._merge_datas[_ah+"_"+_ai];if(_ae){if(_ae.isVirtualStart){if(_ap=="left,top"){_ak=_bx;}else{var _cd=_ap.split(",");var _ce=_ae[_cd[1]]+"_"+_ae[_cd[0]];if(this._merge_datas[_ce]){this._merge_datas[_ce].disPlayText=_bx;this._merge_datas[_ce].showText=true;}else{this._merge_datas[_ce]={disPlayText:_bx,showText:true};}}}if(_ae.showText){_ak=_ae.disPlayText;}}}}else if(this._exportmerge==2){if(_h._supphorztype>0){if(_at._area=="left"||_at._area=="right"){if(_au[_ah]){if(_au[_ah].horz_text_proc){_ak="";}}}}}if(_a._orgval_type||_by){_ak=nexacro._isNumber(_ak)?_ak:nexacro._isDecimal(_ak)?_ak.toString():nexacro._nvl(_ak,"");}else{_ak=nexacro._nvl(_ak,"");}if(_bq){_q.setColumn(_am,"Column"+(_ai+_ab),_ak+_cc+(_aw||(_aa&&_z)?_t:"")+_cc+_bq);_bq=false;}else{_q.setColumn(_am,"Column"+(_ai+_ab),_ak+_cc+(_aw||(_aa&&_z)?_t:""));}if(_at._subcells.length){var _cf=_at._subcells;var _cg=_cf.length;var _ch=_at._rowspan-1;var _ci=_at._colspan-1;var _cj="";_ad=this._d_BLColor;if(this._applyL){_af=this._getCellStyle(_at,_ah,_an,"border",_av);_bn=this._getColortoRGB(_af.right.color)+(_af.right.style=="solid"?"":","+_af.right.style);}else{_bn=_ad;}var _ck;var _cl;var _cm;var _cn;for(var _cr=0;_cr<_cg;_cr++ ){var _co=_cf[_cr]._col;var _cp=_cf[_cr]._row;if(_co==_ci){_cm=_bn;}else{_cm="empty";}if(_co==0){_ck=_ad;}else{_ck="empty";}if(_cp==_ch){_cn=_bn;}else{_cn="empty";}if(_cp==0){_cl=_ad;}else{_cl="empty";}_cj=_ck+":"+_cl+":"+_cm+":"+_cn;_ag=this._getFixedCellType(_cf[_cr],0);_t=this._makeforDsStyle(_k,_ap,_ao,_ar,_aq,_cj,_ag);if(_cr!=0){_q.addColumn("Column"+(_cq+_ab),"String",256);_ab++ ;}_bx=this._getCellText(_h,_ah,_ai,_cr);_ak=_ac?"":_bx;if(_a._orgval_type||_by){_ak=nexacro._isNumber(_ak)?_ak:nexacro._isDecimal(_ak)?_ak.toString():nexacro._nvl(_ak,"");}else{_ak=nexacro._nvl(_ak,"");}_q.setColumn(_am,"Column"+(_ai+_ab),_ak+_cc+_t);}}}}this._preStartRow=this._startRow;this._startRow=_x;}else{this._eof=true;_u=this.parent._argsParam;_v=this.parent._argsDsParam;}_l.setColumn(0,"eof",this._eof);if(this._ds_response){delete this._ds_response;}this._ds_response=new nexacro.Dataset("RESPONSE");this._rollbackSuppressInfo();if(_v!=undefined){this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style CELL=_ds_cell"+" "+_v,"_ds_response=RESPONSE",_u,"_exportCallback",true,_a._commdataformat,_a._commcompress);}else{this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style CELL=_ds_cell","_ds_response=RESPONSE",_u,"_exportCallback",true,_a._commdataformat,_a._commcompress);}return true;};_pExportItem._transaction=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._load_manager=new nexacro._LoadManager(this);var _j=nexacro._getServiceObject(_b,true);this._load_manager.loadDataModule(_b,_a,_c,_d,_e,_f,_g,_h,_i,_j);};_pExportItem._stopTransaction=function(){nexacro.Form.prototype._stopTransaction.apply(this,arguments);};_pExportItem._getDatasetObject=function(_a){var _b=this[_a];var _c=this.parent.parent;if(_b==null&&_c){_b=_c._getDatasetObject(_a);}if(_b==null){var _d=nexacro.getApplication();_b=_d[_a];}return _b;};_pExportItem._waitCursor=nexacro._emptyFn;_pExportItem._removeUrl=function(_a){if(_a&&_a.length){var _b=_a.indexOf("'");var _c= -1;if(_b> -1){_c=_a.lastIndexOf("'");_a=_a.substring(_b+1,_c);}_b=_a.indexOf("(");if(_b> -1){_c=_a.lastIndexOf(")");_a=_a.substring(_b+1,_c);}}return _a;};delete _pExportItem;nexacro.ExportProgress=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._uitype=0;this.visible=false;this.progressbar=null;this._textWidth=0;this._textHeight=0;};var _pExportProgress=nexacro.ExportProgress.prototype=nexacro._createPrototype(nexacro.PopupControl,nexacro.ExportProgress);_pExportProgress._type_name="ExportProgress";_pExportProgress.on_apply_color=function(_a){var _b=this._textbox;if(_b){if(_a){_b.set_color(_a);}else{_b.set_color("");}}};_pExportProgress.on_apply_font=function(_a){var _b=this._textbox;if(_b){_b.set_font(_a);}};_pExportProgress.on_create_contents=function(){var _a=this.getElement();if(_a){switch(this._uitype){case 1:var _b=new nexacro.ProgressBar("progressbar",0,0,1,1,null,null,null,null,null,null,this);_b._setControl();_b.createComponent();this.progressbar=_b;var _c=new nexacro.Static("progressbar:text",0,0,1,1,null,null,null,null,null,null,this);_c.set_textAlign("center");_c._setControl();_c.createComponent();this._textbox=_c;break;case 2:var _d=nexacro.getApplication();if(_d){this.progressbar=_d.mainframe.statusbar;}break;}}};_pExportProgress.createCommand=function(){return "";};_pExportProgress.on_created_contents=function(_a){nexacro.PopupControl.prototype.on_created_contents.call(this,_a);_a=_a||this._getWindow();switch(this._uitype){case 1:var _b=this._textbox;var _c=this.progressbar;if(_c){_c.on_created();}if(_b){_b.on_created();}break;case 2:break;}};_pExportProgress.on_change_containerRect=function(_a,_b){switch(this._uitype){case 1:var _c=this._textbox;if(_c){_c.move(0,0,_a,_b);}var _d=this.progressbar;if(_d){_d.move(null,null,_a,_b,0,0);}break;case 2:break;}};_pExportProgress.on_destroy_contents=function(){switch(this._uitype){case 1:var _a=this._textbox;if(_a){_a.destroy();}this.progressbar.destroy();this.progressbar=null;break;case 2:this.textbox=null;this.progressbar=null;break;}};_pExportProgress._getWindow=function(){return nexacro.Component.prototype._getWindow.call(this);};_pExportProgress.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return true;};_pExportProgress._on_keydown=function(_a,_b,_c,_d,_e,_f){if(_b==nexacro.Event.KEY_TAB){_a._event_stop=true;}else if(_b==nexacro.Event.KEY_ESC){nexacro._stopTransaction(this,2);}return true;};_pExportProgress._show=function(){if(!this._is_created||!this.parent){return;}var _a=this._getWindow();if(_a){var _b,_c;if(_a.frame){var _d=_a.frame;_b=_d.getOffsetWidth();_c=_d.getOffsetHeight();}else{_b=_a.getClientWidth();_c=_a.getClientHeight();}var _e=_a._isContainsComp(true,true,this);if(!_e){_a._setCaptureLock(this,true,true);}var _f=this._getCurrentStylePadding();var _g=0;var _h=0;var _i=0;var _j=0;var _k=20;var _l=10;if(this._uitype==1){_g=(this._textWidth<80?100:this._textWidth+_k);_h=this._textHeight+_l;if(_f){_g+=_f.left+_f.right;_h+=_f.top+_f.bottom;}_i=Math.round((_b-_g)/2);_j=Math.round((_c-_h)/2);}this.move(_i,_j,_g,_h,null,null);this.set_visible(true);}};_pExportProgress._hide=function(){var _a=this.parent;if(_a){var _b=_a._getWindow();if(_b){_b._releaseCaptureLock(this);if(nexacro._resize_popup_inbound==true){var _c=this._control_element;if(_c){_c.setElementSize(1,1);}}}}if(this._is_created&&this._is_alive){this.set_visible(false);}};_pExportProgress._closePopup=nexacro._emptyFn;nexacro._getLongerStr=function(_a,_b,_c){var _d=arguments.length;if(_d<2){return;}var _e=arguments[0];for(var _f=1;_f<_d;_f++ ){if(_e.length<arguments[_f].length){_e=arguments[_f];}}return _e;};_pExportProgress._set_text=function(_a){switch(this._uitype){case 1:this._textbox.set_text(_a);break;case 2:var _b=this._getForm();_b.set_statustext(_a);break;}};_pExportProgress._set_pos=function(_a){switch(this._uitype){case 1:if(this.progressbar){this.progressbar.set_pos(_a);}break;case 2:var _b=this;while(_b&&!_b._is_top_frame){if(_b._is_frame){_b.statusbar&&_b.statusbar.progressbar.set_pos(_a);}_b=_b.parent;}break;}};delete _pExportProgress;}if(!nexacro.ExcelImportObject){nexacro.ExcelImportEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onsuccess";this.fromobject=_a;this.fromreferenceobject=_d;this.url=_c;this.importid=_e;};var _pExcelImportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelImportEventInfo,nexacro.ExcelImportEventInfo);nexacro.ExcelImportEventInfo.prototype=_pExcelImportEventInfo;_pExcelImportEventInfo._type_name="ExcelImportEventInfo";delete _pExcelImportEventInfo;nexacro.ExcelImportErrorEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onerror";this.fromobject=_a;this.fromreferenceobject=_e;this.errortype=_c;this.errormsg=_d;this.statuscode=_f;};var _pExcelImportErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.ExcelImportErrorEventInfo);nexacro.ExcelImportErrorEventInfo.prototype=_pExcelImportErrorEventInfo;_pExcelImportErrorEventInfo._type_name="ExcelImportErrorEventInfo";delete _pExcelImportErrorEventInfo;nexacro.ImportTypes={EXCEL:0x0100,EXCEL97:0x0110,EXCEL2007:0x0120,HANCELL2014:0x0410,CSV:0x0500,TXT:0x0510};nexacro.ExcelImportObject=function(_a,_b){this.id=this.name=_a;if(!_b){var _c=nexacro.getApplication();if(_c){_b=_c.getActiveForm();if(!_b){_b=_c.mainframe.childframe.form;}}}this.parent=_b;var _d=this._unique_id=this.parent._unique_id+"_"+this.id;if(nexacro._get_hidden_frame(_d,this._hidden_frame_handle)){nexacro._destroy_hidden_frame(_d,this._hidden_frame_handle);}nexacro._create_hidden_frame(_d,this._uploadComplete,this,"import");nexacro._append_hidden_item(_d,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);nexacro._append_hidden_textitem(_d,"ds_command");this.onerror=new nexacro.EventListener("onerror");this.onsuccess=new nexacro.EventListener("onsuccess");};var _pExcelImport=nexacro.ExcelImportObject.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExcelImportObject);_pExcelImport._type_name="ExcelImportObject";_pExcelImport._hidden_frame_handle=null;_pExcelImport.importfilemode="local";_pExcelImport._importfilemode=0;_pExcelImport.commcompress="none";_pExcelImport._commcompress=false;_pExcelImport.importtype=nexacro.ImportTypes.EXCEL;_pExcelImport.importurl="";_pExcelImport._importurl="";_pExcelImport._uploadurl="";_pExcelImport._uploadservlet="";_pExcelImport.separator="";_pExcelImport.quotechar="default";_pExcelImport._defaultseparator="0x2c";_pExcelImport._fileurl="";_pExcelImport._range="";_pExcelImport._applyAllsheet=false;_pExcelImport._responseData="";_pExcelImport._responseRVal=null;_pExcelImport._responseLVal=null;_pExcelImport.userawdatevalue=false;_pExcelImport._userawdatevalue=false;_pExcelImport.userawnumbervalue=true;_pExcelImport._userawnumbervalue=true;_pExcelImport._user_data=null;_pExcelImport._file_password=null;_pExcelImport._usehtmltag=true;_pExcelImport._importSheet="";_pExcelImport._importStartCell=null;_pExcelImport._importEndCell=null;_pExcelImport._tran_item=null;_pExcelImport._file_url_ds=null;_pExcelImport._iscors=false;_pExcelImport._importid="";_pExcelImport._importid_list=[];_pExcelImport.filefilter="";_pExcelImport.filefilterindex=0;_pExcelImport._event_list={"onerror":1,"onsuccess":1};_pExcelImport.set_importtype=function(_a){switch((_a+"").toUpperCase()){case "EXCEL":_a=0x0100;break;case "EXCEL97":_a=0x0110;break;case "EXCEL2007":_a=0x0120;break;case "HANCELL2010":_a=0x0400;break;case "HANCELL2014":_a=0x0410;break;case "CSV":_a=0x0500;break;case "TXT":_a=0x0510;break;}if(_a!=this.importtype){this.importtype=_a;}return _a;};_pExcelImport.set_separator=function(_a){var _b=false;if(_a.length==4){if((_a.substr(0,2)=="0x")||(_a.substr(0,2)=="0X")){_a=parseInt(_a,16);}else{_b=true;}}_a=parseInt(_a);var _c=/^(0|3|10|13|29|34|39|40|41|58|61)$/g;if(_b||_c.test(_a)||_a>=0x80||_a<=0x00){this.separator=_a=this._defaultseparator;}if(_a!=this.separator&&nexacro._isInt(_a)){this.separator=_a.toString(16);}return _a;};_pExcelImport.set_quotechar=function(_a){var _b=['"',"'","none","default"];if(_b.indexOf(_a)== -1){this.quotechar=_a="default";}if(_a!=this.quotechar){this.quotechar=_a;}return _a;};_pExcelImport.set_importurl=function(_a){if(_a!=this.importurl){this.importurl=_a;if(_a==null){this._importurl="";}else{var _b=this._uploadservlet=nexacro._getServiceLocation(_a,this.parent._getFormBaseUrl());var _c=_b.substring(0,_b.lastIndexOf("/")+1);this._importurl=_c+"XExportImport";}}return _a;};_pExcelImport.set_commcompress=function(_a){if(_a!=this.commcompress){this.commcompress=_a;_a=_a.toString().toUpperCase();if(_a=="COMPRESS"){this._commcompress=true;}else{this._commcompress=false;}}return _a;};_pExcelImport.set_importfilemode=function(_a){if(this.importfilemode!=_a){this.importfilemode=_a;this._importfilemode=_a=="server"?1:0;}return _a;};_pExcelImport.set_userawdatevalue=function(_a){if(this.userawdatevalue!=_a){this.userawdatevalue=_a;this._userawdatevalue=nexacro._toBoolean(_a);}return _a;};_pExcelImport.set_userawnumbervalue=function(_a){if(this.userawnumbervalue!=_a){this.userawnumbervalue=_a;this._userawnumbervalue=nexacro._toBoolean(_a);}return _a;};_pExcelImport.set_filefilter=function(_a){this.filefilter=_a;};_pExcelImport.set_filefilterindex=function(_a){this.filefilterindex=_a;};_pExcelImport._setImportRange=function(_a){var _b={};if(_a){if(_a.indexOf("!")>=0){var _c=_a.split("!");_b.sheet=_c[0];var _d=_c[1];var _e;if(_d.indexOf(":")>=0){_d=_d.split(":");_e=this._getExcelRowCol(_d[0]);_b.startRow=_e[1]?_e[1]:"";_b.startCol=_e[0]?_e[0]:"";_e=this._getExcelRowCol(_d[1]);_b.endRow=_e[1]?_e[1]:"";_b.endCol=_e[0]?_e[0]:"";}else{_e=this._getExcelRowCol(_d);_b.startRow=_e[1]?_e[1]:"";_b.startCol=_e[0]?_e[0]:"";_b.endRow="";_b.endCol="";}}}else{_b.sheet="";_b.startRow="";_b.startCol="";_b.endRow="";_b.endCol="";}this._range.push(_b);};_pExcelImport.importData=function(_a,_b,_c,_d){this._file_password=null;this._fileurl="";if(arguments.length<3){return false;}if(!this.importurl){return false;}var _e=this.importfilemode.toLowerCase();if(_e!="server"||!_a){this._importfilemode=0;}else{this._importfilemode=1;}if(_b){this._range=_b;}else{this._range="";}var _f,_g,_h;if(_c){this._responseLVal=[];this._responseRVal=[];var _i="";var _j=_c.split(",");if(_j.length<=1&&_j[0]){_j=_j[0].split(" ");}for(_f=0,_g=_j.length;_f<_g;_f++ ){if(_j[_f].length){var _k=_j[_f].match(/[_A-Za-z0-9]+/g);this._responseLVal.push(_k[0]);if(_k[1]==null){_k[1]="output"+(_f+1);}this._responseRVal.push(_k[1]);_i+=" "+_k[0]+"="+_k[1];}}this._responseData=_i;}if(_d){var _l=nexacro.replaceAll(_d," ","").split(",");for(_f=0,_h=_l.length;_f<_h;_f++ ){var _m=_l[_f].split("=");if(_m[0]=="filepassword"){this._file_password=_m[1];_l.splice(_f,1);_d=_l.join(",");break;}}}this._user_data=_d;if(!this._importfilemode){nexacro._change_inputnode_name(this._input_node,"upfile");nexacro._findclick(this._unique_id,"upfile",this,this._hidden_frame_handle,this.filefilter,this.filefilterindex);}else{nexacro._change_inputnode_name(this._input_node,"");if(this._checkFileName(_a)){this._fileurl=_a;this._requestImport(_a);}else{var _n="the file extension is wrong";var _o=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_n,this, -1);this.on_fire_onerror(this,_o);return false;}}return true;};_pExcelImport.importDataEx=function(_a,_b,_c,_d,_e){this._importid=_a;this.importData(_b,_c,_d,_e);};_pExcelImport._addImportId=function(_a){var _b=this._importid_list;var _c=_b?_b.length:0;var _d;for(var _e=0;_e<_c;_e++ ){_d=_b[_e];if(_d==_a){return false;}}_b.push(_a);return true;};_pExcelImport._removeImportId=function(_a){var _b=this._importid_list;var _c=_b?_b.length:0;var _d;for(var _e=0;_e<_c;_e++ ){_d=_b[_e];if(_d==_a){return _b.splice(_e,1);}}return null;};_pExcelImport.destroy=function(){var _a=this._unique_id;if(this.parent){this.parent.removeChild(this.id);}if(this._hidden_frame_handle){nexacro._remove_hidden_item(_a,"upfile",this._hidden_frame_handle);nexacro._remove_hidden_item(_a,"ds_command",this._hidden_frame_handle);nexacro._destroy_hidden_frame(_a,this,"import");}this._hidden_frame_handle=null;this.parent=null;return true;};_pExcelImport.on_fire_onerror=function(_a,_b){this._setWaitCursor(false);var _c=this.onerror;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelImport.on_fire_onsuccess=function(_a,_b){this._setWaitCursor(false);var _c=this.onsuccess;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelImport._getExcelRowCol=function(_a){var _b=_a.length;var _c=[];for(var _d=0;_d<_b;_d++ ){if(!isNaN(_a[_d])){_c.push(_a.substring(0,_d));_c.push(_a.substring(_d));break;}}return _c;};_pExcelImport._transaction=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._load_manager=new nexacro._LoadManager(this);var _j=nexacro._getServiceObject(_b,true);this._load_manager.loadDataModule(_b,_a,_c,_d,_e,_f,_g,_h,_i,_j);};_pExcelImport._getDataset=function(_a){var _b=this._responseRVal;var _c=this._responseLVal;var _d=_b.length;for(var _e=0;_e<_d;_e++ ){if(_b[_e]==_a){return this._getDatasetObject(_c[_e]);}else if(_a=="IMPORTFILES"){return this._getDatasetObject("_file_url_ds");}}return null;};_pExcelImport._waitCursor=nexacro._emptyFn;_pExcelImport._setParamter=nexacro._emptyFn;_pExcelImport._getDatasetObject=function(_a){var _b=this[_a];var _c=nexacro.getApplication();if(_b==null&&this.parent&&this.parent!=_c){_b=this.parent._getDatasetObject(_a);}if(_b==null){_b=_c[_a];}return _b;};_pExcelImport._getForm=function(){var _a=nexacro.getApplication();var _b;if(_a){_b=_a.getActiveForm();if(!_b){var _c=_a.getActiveFrame();var _d=this;while(_d&&_c!=_d){if(!_d._is_frame){_d=_d.parent;}else if(_d.form){return _d.form;}}}}return _b;};_pExcelImport._isPopupFrame=function(){return false;};_pExcelImport._makeImportFormat=function(){var _a="<Import>";_a+="<Sheets>";var _b=this._range.split("]");var _c=_b.length-1;_c=_c==0?1:_c;var _d,_e;var _f=1;for(var _q=0;_q<_c;_q++ ){_a+="<Sheet ";_d=_b[_q].match(/[_A-Za-z0-9]+=[\(\)_!:A-Za-z0-9가-힣 \.\-\,]+/g);if(_d==null){var _g=_b[_q];if(_g.indexOf("!")>=0){var _h=_g.split("!");if(_h[1].indexOf(":")>=0){var _i=_h[0];var _j=_h[1].split(":");var _k=_j[0].match(/[0-9]+/);var _l=_j[0].match(/[A-Z]+/);var _m=_j[1].match(/[0-9]+/);var _n=_j[1].match(/[A-Z]+/);_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" head=\"'+_i+'!'+_l+_k+':'+_n+_k+'\" body=\"'+_i+'!'+_l+( +_k+1)+':'+_n+_m+'\" />';}else{_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" Body=\"'+_b[_q]+'\" />';}}else{_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" Body=\"'+_b[_q]+'\" />';}}else{var _o=false;for(var _r=0,_s=_d.length;_r<_s;_r++ ){_e=_d[_r].match(/[\(\)_!:A-Za-z0-9가-힣 \.\-\,]+/g);var _p=_e[0].toLowerCase();if(_p!="command"){if(_r==0){_a+='command=\"getsheetdata\" ';}if(_p=="output"){_o=true;}}_a+=_p+"=\""+_e[1]+"\" ";}if(!_o){_a+='output=\"output'+_f+'\" ';_f++ ;}_a+="/>";}}_a+="</Sheets>";_a+="</Import>";return _a;};_pExcelImport._requestImport=function(_a){if(nexacro._Browser!="Runtime"){if(!nexacro._isSameOrigin(this._importurl,nexacro._project_url)){this._iscors=true;}}var _b=this._ds_command=new nexacro.NormalDataset("COMMAND");_b.addColumn("command","String",32);_b.addColumn("type","int",32);_b.addColumn("url","String",256);_b.addColumn("format","String",256);_b.addColumn("filemode","String",256);_b.addColumn("password","String",256);_b.addColumn("rawdatevalue","String",256);_b.addColumn("rawnumbervalue","String",256);_b.addColumn("importid","String",256);_b.addColumn("usehtmltag","String",256);_b.addColumn("separator","String",256);_b.addColumn("quotechar","String",256);_b.addRow();_b.setColumn(0,"command","import");_b.setColumn(0,"type",this._importType);_b.setColumn(0,"url",_a);_b.setColumn(0,"format",this._makeImportFormat());_b.setColumn(0,"filemode",this._importfilemode?"server":"local");_b.setColumn(0,"password",this._file_password);_b.setColumn(0,"rawdatevalue",this._userawdatevalue);_b.setColumn(0,"rawnumbervalue",this._userawnumbervalue);_b.setColumn(0,"importid",this._importid);_b.setColumn(0,"usehtmltag",this._usehtmltag);_b.setColumn(0,"separator",this.separator?this.separator:this._defaultseparator);_b.setColumn(0,"quotechar",this.quotechar);if(this._iscors){_b.addColumn("responsetype","String",256);_b.setColumn(0,"responsetype",1);}if(this._ds_response){delete this._ds_response;}var _c;var _d=this._responseLVal;if(_d){for(var _f=0,_g=_d.length;_f<_g;_f++ ){var _e=this.parent[_d[_f]];if(_e){}else{_c=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","Dataset is null",this, -2011);this.on_fire_onerror(this,_c);return;}}}else{_c=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","Dataset is null",this, -2011);this.on_fire_onerror(this,_c);return;}this._file_url_ds=new nexacro.NormalDataset("_file_url_ds",this);this._tran_item=new nexacro.TransactionItem(this._importurl,this,this.id,"COMMAND=_ds_command",this._responseData+", _file_url_ds=IMPORTFILES",this._user_data,0,true);nexacro._setImportCommand(this._unique_id,"ds_command",this,this._hidden_frame_handle,this._tran_item._sendData);nexacro._submit(this._unique_id,this._uploadservlet,this._hidden_frame_handle,this._tran_item._sendData,_a);};if(nexacro._Browser=="Runtime"){_pExcelImport._uploadComplete=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.getApplication();if(_h){_h._endCommProgress();}var _i,_j,_k,_l=this._unique_id,_m= -1,_n="",_o=null,_p,_q=9901;if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null,_g);var _r=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);_i=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_r.message,this,_q);this.on_fire_onerror(this,_i);}else{if(_b){if(_b.indexOf("<noscript>")>=0){_b=_b.substr(_b.indexOf("<noscript>")+10);_b=_b.substr(0,_b.indexOf("</noscript>"));}this.context=this.parent;_b=_b.trimLeft();var _s=_b.slice(0,5).toUpperCase();if(_s.indexOf("<?XML")==0){_s="XML";}if(_s.indexOf("SSV")==0){_s="SSV";}if(_s.indexOf("{")==0){_s="JSON";}if(_s=="XML"){_b=nexacro._getXMLDocument(this._unique_id,_b,_c);}if(nexacro._Deserializer[_s]){_o=nexacro._Deserializer[_s](_b,this);}_j=_o?_o[0]:null;if(_j){_m=_j["ErrorCode"];_n=_j["ErrorMsg"];}}if(_m<0){if(_m<= -2001&&_m>= -2020){_q=_m;}if(_a!=4){_i=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_n,this,_q);this.on_fire_onerror(this,_i);}}else{_k=this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_p=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_i=new nexacro.ExcelImportEventInfo(this,"onsuccess",_k,this,_p);this.on_fire_onsuccess(this,_i);this._removeImportId(_p);}}nexacro._remove_hidden_item(_l,"upfile",this._hidden_frame_handle);nexacro._append_hidden_item(_l,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);};}else{_pExcelImport._uploadComplete=function(_a,_b,_c){var _d= -1;var _e="";var _f=this._unique_id;var _g,_h,_i,_j=9901;try{if(this._iscors){nexacro._setPostMessage(this._unique_id,this);this._iscors=false;}else{var _k=nexacro._getXMLDocument(_f);_c=_k.URL?_k.URL:_k.url;if(_c=="about:blank"){return;}_b=nexacro._getDataFromDOM(_k);if(!_b||_b.length<=0){var _l=_k.childNodes[0];if(_l){if(nexacro._Browser=="IE"&&nexacro._BrowserVersion<9){_b=_l.innerHTML;}else{_b=_k.head.innerHTML;}_b=nexacro._decodeXml(_b);}}if(_b.indexOf("<noscript>")>=0){_b=_b.substr(_b.indexOf("<noscript>")+10);_b=_b.substr(0,_b.indexOf("</noscript>"));}this.context=this.parent;var _m=_b.slice(0,5).toUpperCase();if(_m.indexOf("<?XML")==0){_m="XML";}if(_m.indexOf("SSV")==0){_m="SSV";}if(_m.indexOf("{")==0){_m="JSON";}if(_m=="XML"){_b=nexacro._getXMLDocument(_f,_b,_c);}if(nexacro._Deserializer[_m]){_h=nexacro._Deserializer[_m](_b,this);}if(_h){_d=_h[0]["ErrorCode"];_e=_h[0]["ErrorMsg"];}if(_d<0){if(_d<= -2001&&_d>= -2020){_j=_d;}_g=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_e,this,_j);this.on_fire_onerror(this,_g);}else{this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_i=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_g=new nexacro.ExcelImportEventInfo(this,"onsuccess",this._fileurl,this,_i);this.on_fire_onsuccess(this,_g);this._removeImportId(_i);}}}catch(e){_g=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","failed to get",this,_j);this.on_fire_onerror(this,_g);}nexacro._remove_hidden_item(_f,"upfile",this._hidden_frame_handle);nexacro._append_hidden_item(_f,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);};}_pExcelImport.on_after_load=function(_a){var _b=_a.message;var _c,_d,_e,_f= -1,_g="",_h="",_i;var _j,_k,_l=9901;try{_i=_b.slice(0,5).toUpperCase();if(_i.indexOf("SSV")==0){_h=_b;_i="SSV";}else if(_i.indexOf("{")==0){_h=_b;_i="JSON";}else{var _m=nexacro.trimLeft(decodeURIComponent(_b.replace(/\+/g," ")));var _n=nexacro._parseXMLDocument(_m);_e=_n.URL?_n.URL:_n.url;if(_e=="about:blank"){return;}if(nexacro._getContentType(_n)=="XML"){_h=_n;_i="XML";}else{_h=nexacro._getDataFromDOM(_n,this).trimLeft();_i=_h.substring(0,5).toUpperCase();if(_i.indexOf("SSV")==0){_i="SSV";}else if(_i.indexOf("{")==0){_i="JSON";}}}if(nexacro._Deserializer[_i]){_c=nexacro._Deserializer[_i](_h,this);}var _o=_c?_c[0]:null;if(_o){_f=(_o["ErrorCode"]!=null)?_o["ErrorCode"]: -1;_g=(_o["ErrorMsg"]!=null)?_o["ErrorMsg"]:"";}else{_g=_h;}if(_f<0){if(_f<= -2001&&_f>= -2020){_l=_f;}_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_g,this,_l);this.on_fire_onerror(this,_d);}else{_j=this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_k=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_d=new nexacro.ExcelImportEventInfo(this,"onsuccess",_j,this,_k);this.on_fire_onsuccess(this,_d);this._removeImportId(_k);}}catch(e){_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","failed to get",this,_l);this.on_fire_onerror(this,_d);}};_pExcelImport._checkFileName=function(_a){if(_a==null){return false;}var _b=false;var _c="";var _d=_a.lastIndexOf("\\");var _e=_a.substring(_d+1);var _f=_e.split(".");var _g=_f.length;if(_g>1){_c=_f[_g-1];_c=_c.toLowerCase();switch(_c){case "xls":_b=true;this._importType=nexacro.ImportTypes.EXCEL97;break;case "xlsx":case "xlsm":_b=true;this._importType=nexacro.ImportTypes.EXCEL2007;break;case "cell":_b=true;this._importType=this.importtype;break;case "csv":_b=true;this._importType=nexacro.ImportTypes.CSV;break;case "txt":_b=true;this._importType=nexacro.ImportTypes.TXT;break;}}return _b;};_pExcelImport._checkUploadFile=function(_a){this._setWaitCursor(true);if(this._checkFileName(_a)){this._requestImport(_a);}else{var _b="the file extension is wrong";var _c=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_b,this, -1);this.on_fire_onerror(this,_c);}};_pExcelImport._setWaitCursor=function(_a){var _b=this._getForm();if(_b){_b.setWaitCursor(_a,true);}};_pExcelImport._getWindow=function(){var _a=this.parent;if(_a._is_form){return _a._getWindow();}return null;};_pExcelImport._getWindowHandle=function(){var _a=this.parent;if(_a._is_form){return _a._getWindowHandle();}return null;};_pExcelImport._changeFiles=nexacro._emptyFn;delete _pExcelImport;}if(!nexacro.Tray){nexacro.TrayBalloonTipHideEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onballoontiphide";this.fromobject=this.fromreferenceobject=_a;this.reason=_c;};var _pTrayBalloonTipHideEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.TrayBalloonTipHideEventInfo);nexacro.TrayBalloonTipHideEventInfo.prototype=_pTrayBalloonTipHideEventInfo;_pTrayBalloonTipHideEventInfo._type_name="TrayBalloonTipHideEventInfo";delete _pTrayBalloonTipHideEventInfo;nexacro.Tray=function(_a,_b){this.id=_a;this.icon="default";this.tooltip="";this.items=new nexacro.Collection();this.name=_a;this._handle=null;this._event_list={"onlbuttonup":1,"onrbuttonup":1,"ondblclick":1,"oninnerdatachanged":1,"onballoontipshow":1,"onballoontiphide":1,"onballoontipclick":1};};var _pTray=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Tray);nexacro.Tray.prototype=_pTray;_pTray._type_name="Tray";_pTray.on_created=function(){this._handle=nexacro._createTrayHandle(this.icon,this.tooltip);var _a=this.items.length;for(var _b=0;_b<_a;_b++ ){this.items[_b].on_created();}};_pTray._destroy=function(){var _a=this.items.length;for(var _c=_a-1;_c>=0;_c-- ){this.items.delete_item(_c);}nexacro._removeTrayHandle(this._handle);this._handle=null;var _b=nexacro.getApplication();if(_b){_b.trays.delete_item(this.id);_b.all.delete_item(this.id);}};_pTray.set_icon=function(_a){if(_a!=this.icon){this.icon=_a;}if(this._handle){nexacro._setTrayIconHandle(this._handle,this.icon);}};_pTray.set_tooltip=function(_a){if(_a!=this.tooltip){this.tooltip=_a;}if(this._handle){nexacro._setTrayTooltipHandle(this._handle,this.tooltip);}};_pTray.show=function(){this.on_created();};_pTray.destroy=function(){this._destroy();};_pTray.init=function(_a,_b,_c){this.set_id(_a);this.set_icon(_b);this.set_tooltip(_c);};_pTray.showBalloonTip=function(_a,_b,_c,_d){var _e= -1;if(!_d){_d=false;}nexacro._showTrayBalloonTipHandle(this._handle,_a,_b,_c,_e,_d);};_pTray.hideBalloonTip=function(){nexacro._hideTrayBalloonTipHandle(this._handle);};_pTray.addItem=function(_a,_b){if(_b._type_name=="TrayPopupMenu"){if(this.items.indexOf(_a)>=0){return  -1;}else{return this.items.add_item(_a,_b);}}};_pTray.insertItem=function(_a,_b,_c){if(_c._type_name=="TrayPopupMenu"){if(this.items.indexOf(_b)>=0){return  -1;}else{return this.items.insert_item(_a,_b,_c);}}};_pTray.deleteItem=function(_a){return this.items.delete_item(_a);};_pTray.findItem=function(_a){var _b=this.items.indexOf(_a);return _b;};_pTray.getItemCount=function(){var _a=this.items.length;return _a;};_pTray.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g){if(this.ondblclick&&this.ondblclick._has_handlers){var _h=new nexacro.ClickEventInfo(this,"ondblclick","lbutton",_b,_c,_d,_e,_f, -1, -1, -1, -1,this,this,_g);return this.ondblclick._fireEvent(this,_h);}return false;};_pTray.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _h=new nexacro.MouseEventInfo(this,"onlbuttonup","lbutton",_b,_c,_d,_e,_f, -1, -1, -1, -1,this,this,_g);return this.onlbuttonup._fireEvent(this,_h);}return false;};_pTray.on_fire_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _h=new nexacro.MouseEventInfo(this,"onrbuttonup","rbutton",_b,_c,_d,_e,_f, -1, -1, -1, -1,this,this,_g);return this.onrbuttonup._fireEvent(this,_h);}return false;};_pTray.on_fire_onballoontipshow=function(){if(this.onballoontipshow&&this.onballoontipshow._has_handlers){var _a=new nexacro.EventInfo(this,"onballoontipshow");return this.onballoontipshow._fireEvent(this,_a);}return false;};_pTray.on_fire_onballoontiphide=function(_a){if(this.onballoontiphide&&this.onballoontiphide._has_handlers){var _b=new nexacro.TrayBalloonTipHideEventInfo(this,"onballoontiphide",_a);return this.onballoontiphide._fireEvent(this,_b);}return false;};_pTray.on_fire_onballoontipclick=function(_a,_b,_c,_d,_e,_f,_g){if(this.onballoontipclick&&this.onballoontipclick._has_handlers){var _h=new nexacro.ClickEventInfo(this,"onballoontipclick","lbutton",_b,_c,_d,_e,_f, -1, -1, -1, -1,this,this,_g);return this.onballoontipclick._fireEvent(this,_h);}return false;};delete _pTray;}if(!nexacro.TrayPopupMenu){nexacro.TrayPopupMenu=function(_a,_b){this.id=this.name=_a;this.parent=_b;this._popupmenu=null;this._handle=null;this._is_created=false;this.innerdataset="";this._innerdataset="";this._level=0;this._rowindex=0;this.captioncolumn="";this.checkboxcolumn="";this.enablecolumn="";this.hotkeycolumn="";this.iconcolumn="";this.idcolumn="";this.levelcolumn="";this.userdatacolumn="";this._event_list={"onmenuclick":1};};var _pTrayPopupMenu=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.TrayPopupMenu);nexacro.TrayPopupMenu.prototype=_pTrayPopupMenu;_pTrayPopupMenu._type_name="TrayPopupMenu";_pTrayPopupMenu.on_created=function(){this._is_created=true;if(this._innerdataset==null&&this.innerdataset!=null){var _a=this.innerdataset;var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);this.on_apply_innerdataset();}}this._handle=nexacro._createTrayPopupMenuHandle(this.parent._handle);this._createPopupMenu(this._handle);};_pTrayPopupMenu._createPopupMenu=function(_a){if(this._handle==null||_a==null||_a==0){return;}var _b=this._innerdataset;if(_b&&this.levelcolumn&&this.captioncolumn&&this.idcolumn){var _c=_b.getRowCount();for(var _m=this._rowindex;_m<_c;_m++ ){var _d=_b.getColumn(_m,this.levelcolumn);if(_d==this._level){var _e="string";var _f=_b.getColumn(_m,this.captioncolumn);if(_f=="-"){_e="separator";}var _g=_b.getColumn(_m,this.iconcolumn);if(_g){_e="bitmap";_g=this._getSysURL(_g);}var _h=_b.getColumn(_m,this.enablecolumn);if(_h){if(!nexacro._toBoolean(_h)){_e="disabled";}}var _i=_b.getColumn(_m,this.idcolumn);if(_i){_i=_m;}var _j=_b.getColumn(_m,this.checkboxcolumn);if(_j){if(nexacro._toBoolean(_j)){_e="checked";}}var _k=_b.getColumn(_m+1,this.levelcolumn);if(_k-_d==1){_e="popup";var _l=nexacro._createTrayPopupMenuHandle(this.parent._handle);this._level++ ;this._rowindex=_m+1;this._createPopupMenu(_l);nexacro._setTrayPopupMenuItemHandle(this.parent._handle,_a,_e,_l,_f,_g);this._level-- ;_k=_b.getColumn(this._rowindex+1,this.levelcolumn);if(_k-_d<0){break;}}else if(_k-_d<0){nexacro._setTrayPopupMenuItemHandle(this.parent._handle,_a,_e,_i,_f,_g);this._rowindex=_m;break;}else{nexacro._setTrayPopupMenuItemHandle(this.parent._handle,_a,_e,_i,_f,_g);}}}}};_pTrayPopupMenu._updatePopupMenu=function(_a){this._level=0;this._rowindex=0;nexacro._destroyTrayPopupMenuHandle(this.parent._handle,_a);this._handle=nexacro._createTrayPopupMenuHandle(this.parent._handle);this._createPopupMenu(this._handle);};_pTrayPopupMenu.trackPopup=function(){if(this._handle){nexacro._current_tray_popup=this;nexacro._displayTrayPopupMenuHandle(this.parent._handle,this._handle);}};_pTrayPopupMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);}this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}};_pTrayPopupMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){var _b=this._callbackFromDataset;_a._setEventHandler("onrowposchanged",_b,this);_a._setEventHandler("oncolumnchanged",_b,this);_a._setEventHandler("onrowsetchanged",_b,this);_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);if(this._handle){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._callbackFromDataset=function(_a,_b){if(this._handle){if(_b.eventid=="onrowsetchanged"){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);}this.innerdataset=_a;}};_pTrayPopupMenu.getInnerDataset=function(){return this._innerdataset;};_pTrayPopupMenu.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();}};_pTrayPopupMenu.set_captioncolumn=function(_a){if(_a!=this.captioncolumn){this.captioncolumn=_a;this.on_apply_captioncolumn();}};_pTrayPopupMenu.on_apply_captioncolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_checkboxcolumn=function(_a){if(_a!=this.checkboxcolumn){this.checkboxcolumn=_a;this.on_apply_checkboxcolumn();}};_pTrayPopupMenu.on_apply_checkboxcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_enablecolumn=function(_a){if(_a!=this.enablecolumn){this.enablecolumn=_a;this.on_apply_enablecolumn();}};_pTrayPopupMenu.on_apply_enablecolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_hotkeycolumn=function(_a){if(_a!=this.hotkeycolumn){this.hotkeycolumn=_a;this.on_apply_hotkeycolumn();}};_pTrayPopupMenu.on_apply_hotkeycolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_iconcolumn=function(_a){if(_a!=this.iconcolumn){this.iconcolumn=_a;this.on_apply_iconcolumn();}};_pTrayPopupMenu.on_apply_iconcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_idcolumn=function(_a){if(_a!=this.idcolumn){this.idcolumn=_a;this.on_apply_idcolumn();}};_pTrayPopupMenu.on_apply_idcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_levelcolumn=function(_a){if(_a!=this.levelcolumn){this.levelcolumn=_a;this.on_apply_levelcolumn();}};_pTrayPopupMenu.on_apply_levelcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_userdatacolumn=function(_a){if(_a!=this.userdatacolumn){this.userdatacolumn=_a;this.on_apply_userdatacolumn();}};_pTrayPopupMenu.on_apply_userdatacolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.on_fire_onmenuclick=function(_a){var _b=this._innerdataset;var _c=_a;var _d=_b.getColumn(_c,this.idcolumn);var _e=_b.getColumn(_c,this.userdatacolumn);var _f=_b.getColumn(_c,this.levelcolumn);if(this.onmenuclick&&this.onmenuclick._has_handlers){var _g=new nexacro.MenuClickEventInfo(this,"onmenuclick",_d,_e,_c,_f);this.onmenuclick._fireEvent(this,_g);}};_pTrayPopupMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pTrayPopupMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);if(this._handle){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._getSysURL=function(_a,_b){var _c=_a;if(_a&&(typeof (_a)=="string")){var _d;var _e=_a.trim();if(_e){if(_e.substring(0,3).toLowerCase()=="url"){var _f;var _g=_e.charAt(4);if(_g=='\''||_g=='\"'){_f=_e.substring(5,_e.lastIndexOf(_g));}else{_f=_e.substring(4,_e.length-1);}_d=_b?_b._getRefFormBaseUrl():nexacro._project_absolutepath;_c=nexacro._getSupportedImageUrl(_f,_d);}else{_d=_b?_b._getRefFormBaseUrl():nexacro._project_absolutepath;_c=nexacro._getSupportedImageUrl(_e,_d);}}}return _c;};delete _pTrayPopupMenu;}if(!nexacro.Plugin){nexacro.Plugin=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var _pPlugin=nexacro._createPrototype(nexacro.Component,nexacro.Plugin);nexacro.Plugin.prototype=_pPlugin;_pPlugin._type_name="Plugin";_pPlugin.classid="";_pPlugin.classid64="";_pPlugin.codebase="";_pPlugin.code="";_pPlugin.archive="";_pPlugin.mimetype="";_pPlugin.pluginsrc="";_pPlugin.pluginpage="";_pPlugin.license="";_pPlugin.lpkpath="";_pPlugin.contents="";_pPlugin.adjustalpha=false;_pPlugin.usepersistdata=false;_pPlugin.windowed=false;_pPlugin.popupstyle=false;_pPlugin._obj_id="";_pPlugin._obj_elem=null;_pPlugin._params=null;_pPlugin._event_params=null;_pPlugin.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._obj_elem;if(_b){_b.setElementVisible(_a);}};_pPlugin.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._obj_elem=new nexacro.PluginElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());var _c=this._params;var _d,_e=_c.length;for(_d=0;_d<_e;_d++ ){_b.setElementParam(_c.get_id(_d),_c.get_item(_d));}var _f=this._events;var _g=_f.length;for(_d=0;_d<_g;_d++ ){_b.addEventHandler(_f.get_id(_d),_f.get_item(_d));}}this.on_apply_classid();this.on_apply_classid64();this.on_apply_codebase();this.on_apply_code();this.on_apply_archive();this.on_apply_mimetype();this.on_apply_pluginsrc();this.on_apply_pluginpage();this.on_apply_plugintype();this.on_apply_license();this.on_apply_lpkpath();this.on_apply_adjustalpha();this.on_apply_usepersistdata();this.on_apply_windowed();this.on_apply_popupstyle();};_pPlugin.on_create_contents_command=function(){if(this._obj_elem){return this._obj_elem.createCommand();}return "";};_pPlugin.on_attach_contents_handle=function(_a){if(this._obj_elem){this._obj_elem.component=this;this._obj_elem.attachHandle(_a);}};_pPlugin.on_created_contents=function(_a){var _b=this._obj_elem;if(_b){_b.component=this;_b.create(_a);_b.setElementVisible(this.visible);}};_pPlugin.on_destroy_contents=function(){var _a=this._obj_elem;if(_a){_a.destroy();this._obj_elem=null;}};_pPlugin.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._obj_elem;if(_d){if(_a||_b){_d.on_update_position(_a,_b,this._adjust_left,this._adjust_top);}}};_pPlugin._apply_setfocus=function(){var _a=this._obj_elem;if(_a){_a.setElementFocus();}};_pPlugin.on_change_containerRect=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementSize(_a,_b);}};_pPlugin._setContents=function(_a){if(_a&&_a.length){if(_a.indexOf("<Contents/>")!=0&&_a.indexOf("<Contents>")!=0){_a="<Contents>"+_a+"</Contents>";}var _b=nexacro._parseXMLDocument(_a);if(_b){this._params.clear();var _c=_b.getElementsByTagName("Param");if(_c){var _d=_c.length;for(var _j=0;_j<_d;_j++ ){var _e=_c[_j];var _f=_e.getAttribute("name");var _g=_e.getAttribute("value");var _h=this._obj_elem;if(_h){_h.setElementParam(_f,_g);}else{this._params.add_item(_f,_g);}}}_c=_b.getElementsByTagName("_persistdata");if(_c){var _d=_c.length;for(var _j=0;_j<_d;_j++ ){var _i=_c[_j];if(_i.childNodes&&_i.childNodes.length>0){var _f="__persistdata";var _g=_i.childNodes[0].source;var _h=this._obj_elem;if(_h){_h.setElementParam(_f,_g);}else{this._params.add_item(_f,_g);}}}}}}};_pPlugin.set_contents=function(_a){this.contents=_a;this._setContents(_a);};_pPlugin.set_classid=function(_a){this.classid=_a;this.on_apply_classid();};_pPlugin.on_apply_classid=function(){var _a=this._obj_elem;if(_a){var _b=this.classid;_a.setElementClassId(_b);}};_pPlugin.set_classid64=function(_a){this.classid64=_a;this.on_apply_classid64();};_pPlugin.on_apply_classid64=function(){var _a=this._obj_elem;if(_a){var _b=this.classid64;_a.setElementClassId64(_b);}};_pPlugin.set_codebase=function(_a){this.codebase=_a;this.on_apply_codebase();};_pPlugin.on_apply_codebase=function(){var _a=this._obj_elem;if(_a){var _b=this.codebase;if(_b){_a.setElementCodebase(_b);}}};_pPlugin.set_code=function(_a){this.code=_a;this.on_apply_code();};_pPlugin.on_apply_code=function(){var _a=this._obj_elem;if(_a){var _b=this.code;if(_b){_a.setElementCode(_b);}}};_pPlugin.set_archive=function(_a){this.archive=_a;this.on_apply_archive();};_pPlugin.on_apply_archive=function(){var _a=this._obj_elem;if(_a){var _b=this.archive;if(_b){_a.setElementArchive(_b);}}};_pPlugin.set_mimetype=function(_a){this.mimetype=_a;this.on_apply_mimetype();};_pPlugin.on_apply_mimetype=function(){var _a=this._obj_elem;if(_a){var _b=this.mimetype;if(_b){_a.setElementMIMEType(_b);}}};_pPlugin.set_pluginsrc=function(_a){this.pluginsrc=_a;this.on_apply_pluginsrc();};_pPlugin.on_apply_pluginsrc=function(){var _a=this._obj_elem;if(_a){var _b=this.pluginsrc;if(_b){_a.setElementPluginSrc(_b);}}};_pPlugin.set_plugintype=function(_a){this.plugintype=_a;this.on_apply_plugintype();};_pPlugin.on_apply_plugintype=function(){var _a=this._obj_elem;if(_a){var _b=this.plugintype;if(_b){_a.setElementPluginMIMEType(_b);}}};_pPlugin.set_pluginpage=function(_a){this.pluginpage=_a;this.on_apply_pluginpage();};_pPlugin.on_apply_pluginpage=function(){var _a=this._obj_elem;if(_a){var _b=this.pluginpage;if(_b){_a.setElementPluginPage(_b);}}};_pPlugin.set_license=function(_a){this.license=_a;this.on_apply_license();};_pPlugin.on_apply_license=function(){var _a=this._obj_elem;if(_a){var _b=this.license;if(_b){_a.setElementLicense(_b);}}};_pPlugin.set_lpkpath=function(_a){this.lpkpath=_a;this.on_apply_lpkpath();};_pPlugin.on_apply_lpkpath=function(){var _a=this._obj_elem;if(_a){var _b=this.lpkpath;if(_b){_a.setElementLicenseFile(_b);}}};_pPlugin.set_adjustalpha=function(_a){this.adjustalpha=nexacro._toBoolean(_a);this.on_apply_adjustalpha();};_pPlugin.on_apply_adjustalpha=function(){var _a=this._obj_elem;if(_a){var _b=this.adjustalpha;if(_b){_a.setElementAdjustAlpha(_b);}}};_pPlugin.set_usepersistdata=function(_a){this.usepersistdata=_a;this.on_apply_usepersistdata();};_pPlugin.get_usepersistdata=function(_a){var _b=this._obj_elem;if(_b){return _b.getElementUsePersistData();}};_pPlugin.on_apply_usepersistdata=function(){var _a=this._obj_elem;if(_a){var _b=this.usepersistdata;if(_b){_a.setElementUsePersistData(_b);}}};_pPlugin.set_windowed=function(_a){this.windowed=nexacro._toBoolean(_a);};_pPlugin.on_apply_windowed=function(){var _a=this._obj_elem;if(_a){var _b=this.windowed;if(_b){_a.setElementWindowed(_b);}}};_pPlugin.set_popupstyle=function(_a){this.popupstyle=nexacro._toBoolean(_a);this.on_apply_popupstyle();};_pPlugin.on_apply_popupstyle=function(){var _a=this._obj_elem;if(_a){var _b=this.popupstyle;if(_b){_a.setElementPopupStyle(_b);}}};_pPlugin.install=function(){var _a=this._obj_elem;if(_a){_a.install();}};_pPlugin.isInstalled=function(){var _a=this._obj_elem;if(_a){return _a.isInstalled();}return false;};_pPlugin.isLoaded=function(){var _a=this._obj_elem;if(_a){return _a.isLoaded();}return false;};_pPlugin.setProperty=function(_a,_b){var _c="set_"+_a;var _d=this[_c];if(_d){_d.call(this,_b);}else{var _e=this._obj_elem;if(_e){if(_a.toLowerCase()=="movie"){_e.setElementPluginSrc(_b);_e.setElementPluginMIMEType("application/x-shockwave-flash");}}this._setParam(_a,_b);}};_pPlugin.getProperty=function(_a){var _b=this._getParam(_a);if(_b==null){_b=this[_a];}return _b;};_pPlugin.callMethod=function(){var _a=this._obj_elem;if(_a){var _b=Array.prototype.slice.call(arguments);for(var _d=0;_d<_b.length;_d++ ){if(_b[_d] instanceof nexacro.Plugin){var _c=_b[_d]._obj_elem;if(_c){_b[_d]=_c.getPluginObject();}}}return this._callMethod.apply(this,_b);}};_pPlugin._fireEvent=function(){var _a,_b;var _c=this._user_handlers;var _d=_c.length;for(_a=0;_a<_d;_a++ ){var _e=_c[_a];if(_e){_b=_e.handler.apply(_e.target,arguments);}}return _b;};_pPlugin.addEventHandler=function(_a,_b,_c){if(!_b){return;}var _d=false;var _e=this._obj_elem;if(_e){_d=_e.addEventHandler(_a,_b);}if(_d==false){this._events.add_item(_a,_b);}if(_a in this._event_list==false){this._event_list[_a]=1;}_d=nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);if(this[_a]){this[_a]._firePluginEvent=_pPlugin._fireEvent;}return _d;};_pPlugin.removeEventHandler=function(_a,_b,_c){var _d=this._obj_elem;if(_d){_d.removeEventHandler(_a,_b);}else{this._events.delete_item(_a);}return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pPlugin._getParam=function(_a){var _b;var _c=this._obj_elem;if(_c){_b=_c.getElementParam(_a);}else{_b=this._params.get_item(_a);}return _b;};_pPlugin._setParam=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementParam(_a,_b);}else{this._params.add_item(_a,_b);}};_pPlugin._callMethod=function(){var _a=this._obj_elem;if(_a){return _a.callMethod.apply(_a,arguments);}};delete _pPlugin;}if(!nexacro.VirtualFile){nexacro.VirtualFileEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_a;this.reason=_b;this.textdata=_c;this.binarydata=_d;this.fileattributelist=nexacro._getFileAttributeList(_e);this.filesize=_f;this.fileisexist=_g;};var _pVirtualFileEventInfo=nexacro.VirtualFileEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.VirtualFileEventInfo);_pVirtualFileEventInfo._type_name="VirtualFileEventInfo";delete _pVirtualFileEventInfo;nexacro.VirtualFileErrorEventInfo=function(_a,_b,_c){this.id=this.eventid=_a;this.errortype="ObjectError";this.statuscode=_b;this.errormsg=_c;};var _pVirtualFileErrorEventInfo=nexacro.VirtualFileErrorEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.VirtualFileErrorEventInfo);_pVirtualFileErrorEventInfo._type_name="VirtualFileErrorEventInfo";delete _pVirtualFileErrorEventInfo;nexacro._FileAttribute=function(_a){this.accesstime=_a.accesstime;this.createtime=_a.createtime;this.filename=_a.filename;this.groupid=_a.groupid;this.modifytime=_a.modifytime;this.size=_a.size;this.userid=_a.userid;this.isdirectory=_a.isdirectory;this.isreadonly=_a.isreadonly;};var _pFileAttribute=nexacro._FileAttribute.prototype=nexacro._createPrototype(nexacro.Object,nexacro._FileAttribute);_pFileAttribute._type_name="_FileAttribute";_pFileAttribute.isDirectory=function(){return this.isdirectory;};_pFileAttribute.isHidden=function(){};_pFileAttribute.isLink=function(){};_pFileAttribute.isReadOnly=function(){return this.isreadonly;};delete _pFileAttribute;nexacro.VirtualFile=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);if(arguments.length==3){this._handle=nexacro._createVirtualFileHandle(this,arguments[2]);}else{this._handle=nexacro._createVirtualFileHandle(this);}};var _pVirtualFile=nexacro.VirtualFile.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.VirtualFile);_pVirtualFile._type_name="VirtualFile";_pVirtualFile.filename="";_pVirtualFile.fullpath="";_pVirtualFile.path="";_pVirtualFile.async="true";_pVirtualFile._file=null;_pVirtualFile._event_list={"onsuccess":1,"onerror":1};nexacro.VirtualFile.openRead=0x0001;nexacro.VirtualFile.openWrite=0x0002;nexacro.VirtualFile.openAppend=0x0010;nexacro.VirtualFile.openCreate=0x1000;nexacro.VirtualFile.openText=0x0100;nexacro.VirtualFile.openBinary=0x0200;nexacro.VirtualFile.seekBegin=0x0000;nexacro.VirtualFile.seekCurrent=0x0001;nexacro.VirtualFile.seekEnd=0x0002;nexacro.VirtualFile.findAll=0x0001;nexacro.VirtualFile.findFileOnly=0x0002;nexacro.VirtualFile.findDirectoryOnly=0x0004;nexacro.VirtualFile.findRecursive=0x0008;nexacro.VirtualFile.findCaseless=0x0010;_pVirtualFile.destroy=function(){nexacro._destroyVirtualFileHandle(this);if(this._handle){this._handle=null;}return true;};_pVirtualFile.set_filename=nexacro._emptyFn;_pVirtualFile.set_fullpath=nexacro._emptyFn;_pVirtualFile.set_path=nexacro._emptyFn;_pVirtualFile.set_async=function(_a){_a=nexacro._toBoolean(_a);if(this.async!=_a){this.async=_a;this.on_apply_async();}};_pVirtualFile.on_apply_async=function(){nexacro._setVirtualFileHandleAsync(this,this.async);};_pVirtualFile.open=function(_a,_b){if(arguments.length<2){return false;}var _c=this._IsValidConstOptions(_b);if(!_c){return false;}if(!_a){if(this.fullpath||this.path||this.filename){return nexacro._openVirtualFileHandle(this,this.fullpath,_b);}}else{var _d=_a.split("\\").join("/");this._setFullPath(_d);this._setPath(this._getPath(_d));this._setFileName(this._getFileName(_d));return nexacro._openVirtualFileHandle(this,_a,_b);}return false;};_pVirtualFile.close=function(){nexacro._closeVirtualFileHandle(this);};_pVirtualFile.read=function(_a,_b){_a=_a|| -1;_b=_b||"utf-8";if(isNaN(_a)==false){_a=nexacro._toInt(_a);}if(typeof _a!="number"||typeof _b!="string"){return false;}return nexacro._readVirtualFileHandle(this,_a,_b);};_pVirtualFile.readLine=function(_a,_b){_a=_a||"\n";_b=_b||"utf-8";return nexacro._readlineVirtualFileHandle(this,_a,_b);};_pVirtualFile.seek=function(_a,_b){if(isNaN(_a= +_a)){return false;}if(arguments.length==1){_b=nexacro.VirtualFile.seekCurrent;}if(isNaN(_b= +_b)){return false;}return nexacro._seekVirtualFileHandle(this,_a,_b);};_pVirtualFile.write=function(_a,_b){var _c=_a;var _d="utf-8";if(typeof (_c)=="undefined"||_c.length==0){return false;}if(arguments.length==2){_d=_b;}return nexacro._writeVirtualFileHandle(this,_c,_d);};_pVirtualFile.remove=function(_a){if(!_a){return false;}if(_a instanceof nexacro.VirtualFile){_a=_a.fullpath;}return nexacro._removeVirtualFileHandle(this,_a);};_pVirtualFile.copy=function(_a,_b){if(!_a||!_b){return false;}return nexacro._copyVirtualFileHandle(this,_a,_b);};_pVirtualFile.rename=function(_a,_b){if(!_a||!_b){return false;}if(typeof _a!='string'){return false;}if(typeof _b!='string'){return false;}return nexacro._renameVirtualFileHandle(this,_a,_b);};_pVirtualFile.getFileList=function(_a,_b,_c){if(!_a||!_b){return false;}if(arguments.length<=2){_c=nexacro.VirtualFile.findAll;}if(!(_c&nexacro.VirtualFile.findAll)&&!(_c&nexacro.VirtualFile.findFileOnly)&&!(_c&nexacro.VirtualFile.findDirectoryOnly)&&!(_c&nexacro.VirtualFile.findRecursive)&&!(_c&nexacro.VirtualFile.findCaseless)){return false;}return nexacro._getFileListVirtualFileHandle(this,_a,_b,_c);};_pVirtualFile.getFileSize=function(){return nexacro._getFileSizeVirtualFileHandle(this,this.fullpath);};_pVirtualFile.isExist=function(_a){if(!_a){return false;}return nexacro._isExistVirtualFileHandle(this,_a);};_pVirtualFile.createDirectory=function(_a,_b){if(!_a){return false;}if(arguments.length==1){_b=false;}else if(arguments.length==2){if(typeof _b!='boolean'){if(typeof _b=='number'){if(_b>=1){_b=true;}}else{_b=false;}}}return nexacro._createDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.deleteDirectory=function(_a,_b){if(!_a){return false;}if(arguments.length==1){_b=false;}else if(arguments.length==2){if(typeof _b!='boolean'){if(typeof _b=='number'){if(_b>=1){_b=true;}else{_b=false;}}else if(typeof _b=='string'){if(_b=="true"){_b=true;}else{_b=false;}}else{_b=false;}}}return nexacro._deleteDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.renameDirectory=function(_a,_b){if(!_a||!_b){return false;}if(_b.match(/[\"\/:*?<>|]/)){return false;}return nexacro._renameDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.on_success=function(_a,_b,_c,_d,_e,_f){_b=this._replaceEntity(_b,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";_c=this._replaceEntity(_c,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";return this.on_fire_onsuccess(_a,_b,_c,_d,_e,_f);};_pVirtualFile._onsuccess=function(_a){var _b=nexacro.base64Decode(_a.textdata);var _c=this._replaceEntity(_a.binarydata,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";this.on_fire_onsuccess(_a.reason,_b,_c,_a.fileattributelist,_a.filesize,_a.fileisexist);};_pVirtualFile.on_fire_onsuccess=function(_a,_b,_c,_d,_e,_f){if(this.onsuccess&&this.onsuccess._has_handlers){var _g=new nexacro.VirtualFileEventInfo("onsuccess",_a,_b,_c,_d,_e,_f);this.onsuccess._fireEvent(this,_g);}return true;};_pVirtualFile.on_error=function(_a,_b){this.on_fire_onerror(_a,_b);};_pVirtualFile._onerror=function(_a){this.on_fire_onerror(_a.errorcode,_a.errormsg);};_pVirtualFile.on_fire_onerror=function(_a,_b){if(this.onerror&&this.onerror._has_handlers){var _c=new nexacro.VirtualFileErrorEventInfo("onerror",_a,_b);this.onerror._fireEvent(this,_c);}return true;};_pVirtualFile._createVirtualFileHandle=function(_a){this._handle=nexacro._createVirtualFileHandle(_a);};_pVirtualFile._setPath=function(_a){this.path=_a;};_pVirtualFile._setFullPath=function(_a){this.fullpath=_a;};_pVirtualFile._setFileName=function(_a){this.filename=_a;};_pVirtualFile._getPath=function(_a){if(!_a){return _a;}_a=_a.split("\\").join("/");var _b=_a.lastIndexOf("/");if(_b== -1){_b=_a.lastIndexOf("%");}return _a.substring(0,_b+1);};_pVirtualFile._getFileName=function(_a){if(!_a){return _a;}_a=_a.split("\\").join("/");var _b=_a.lastIndexOf("/");if(_b== -1){_b=_a.lastIndexOf("%");}return _a.substring(_b+1,_a.length);};_pVirtualFile._replaceEntity=function(_a,_b){if(!_a){return _a;}var _c={"\&amp\;":"\&","\&lt\;":"\<","\&gt\;":"\>","\&quot\;":"\"","\&apos\;":"\'","\&\#32\;":"\ ","\&\#13\;":"\\r","\&\#10\;":"\\n","\&\#9\;":"\\t"};if(_b.length){var _d=_b.pop();return this._replaceEntity(_a.replace(new RegExp(_d,"g"),_c[_d]),_b);}return _a;};_pVirtualFile._IsValidConstOptions=function(_a){if(_a==1||_a==2||_a==16||_a==4096||_a==256||_a==512||_a==3||_a==17||_a==4097||_a==257||_a==513||_a==18||_a==4098||_a==258||_a==514||_a==4112||_a==528||_a==4352||_a==4608||_a==768||_a==19||_a==4099||_a==259||_a==515||_a==4114||_a==274||_a==530||_a==4368||_a==4624||_a==4864||_a==4115||_a==275||_a==531||_a==4370||_a==4626||_a==4880||_a==4371||_a==4627||_a==4882||_a==4883){return true;}return false;};delete _pVirtualFile;}if(!nexacro.CellInfo){nexacro.CellInfo=function(_a,_b,_c,_d,_e){this.parent=_b;this.id=this.name=_a;this._type=_d;this._view=_c;this._cellidx=_e;this._col=0;this._colspan=0;this._row=0;this._rowspan=0;this._area="";this._endcol=false;this._subcells=[];this._isSubCell=false;this._maskstringtypeobj=new nexacro._EditMaskTypeString();this._masknumbertypeobj=new nexacro._GridMaskTypeNumber();this._key_direction=null;this._blinked_status=[];this._allocatePropertys(this._property_map);};var _pCellInfo=nexacro._createPrototype(nexacro.Object,nexacro.CellInfo);nexacro.CellInfo.prototype=_pCellInfo;_pCellInfo._type_name="CellInfo";nexacro._CELLINFO_PMAP_PROPNAME=0;nexacro._CELLINFO_PMAP_CTRLPROPNAME=1;nexacro._CELLINFO_PMAP_EXPRBIND=2;nexacro._CELLINFO_PMAP_DEFTVALUE=3;nexacro._CELLINFO_PMAP_STYLE=4;nexacro._CELLINFO_PMAP_VALTYPE=5;nexacro._CELLINFO_PMAP_ENUMVAL=6;_pCellInfo._property_map=[];_pCellInfo._property_map_cell=[["cssclass",null,true,"",true],["displaytype",null,true,"normal",false],["edittype",null,true,"none",false],["tooltiptype",null,false,"default",false],["tooltiptext",null,true,undefined,false],["autosizecol",null,false,"default",false,2,["none","limitmin","limitmax","default"]],["autosizerow",null,false,"default",false,2,["none","limitmin","limitmax","default"]],["displayexpdec",null,true, -1,false,0],["locale",null,true,"",false],["text",null,true,null,false],["expr",null,true,null,false],["subsumtext",null,true,null,false],["controlautosizingtype",null,true,"both",false,2,["none","width","height","both"]],["checkboxsize",null,true, -1,false,0],["rtl","rtl",true,undefined,false],["accessibilityaction","accessibilityaction",false,null,false],["accessibilitydesclevel","accessibilitydesclevel",false,"all",false],["accessibilitydescription","accessibilitydescription",false,null,false],["accessibilityenable","accessibilityenable",true,true,false,1],["accessibilitylabel","accessibilitylabel",true,null,false],["accessibilityrole","accessibilityrole",false,"gridcell",false],["color","color",false,null,true],["font","font",false,null,true],["wordSpacing","wordSpacing",false,null,true],["letterSpacing","letterSpacing",false,null,true],["textDecoration","textDecoration",false,null,true],["wordWrap",null,true,null,true],["borderRadius","borderRadius",false,null,true],["border","border",false,null,true],["background","background",false,null,true],["edge","edge",false,null,true],["cursor","cursor",false,null,true],["opacity","opacity",false,null,true],["boxShadow","boxShadow",false,null,true],["padding","padding",false,null,true],["textAlign","textAlign",false,null,true],["verticalAlign","verticalAlign",false,null,true]];_pCellInfo._property_map_checkbox=[["checkboxtruevalue","truevalue",true,null,false],["checkboxfalsevalue","falsevalue",true,null,false]];_pCellInfo._property_map_edit=[["editmaxlength",null,true, -1,false,0],["editautoselect","autoselect",true,false,false],["editautoskip","autoskip",true,false,false],["editimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["edituseime","useime",true,"global",false,2,["global","local","local,keep","none"]],["editinputfilter","inputfilter",true,"none",false],["editinputmode","inputmode",true,"normal",false],["editinputtype","inputtype",true,"normal",false],["editimeaction","imeaction",true,"none",false,2,["none","done","go","search","send","next","previous"]]];_pCellInfo._property_map_maskedit=[["maskeditautoselect","autoselect",true,false,false],["maskeditlimitbymask","limitbymask",true,"decimal",false,2,["none","integer","decimal","both"]],["maskeditformat","format",true,"",false],["maskeditmaskchar","maskchar",false,"_",false],["maskeditclipmode","clipmode",true,"includespace",false,2,["includespace","excludespace"]],["maskeditautoskip","autoskip",true,false,false],["maskedittrimtype","trimtype",true,"none",false,2,["none","left","right","both"]],["maskeditpostfixtext","postfixtext",true,"",false],["maskedittype","type",true,"number",false,2,["number","string"]],["maskeditimeaction","imeaction",true,"none",false,2,["none","done","go","search","send","next","previous"]]];_pCellInfo._property_map_textarea=[["textareaacceptsenter",null,true,false,false],["textareaacceptstab",null,true,false,false],["textareamaxlength",null,true, -1,false,0],["textareaautoselect","autoselect",true,false,false],["textareaimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["textareainputfilter","inputfilter",true,"none",false],["textareainputmode","inputmode",true,"normal",false],["textareainputtype","inputtype",true,"normal",false],["textareascrollbarsize",null,true,undefined,false,0],["textareascrollbartype",null,true,"auto",false],["textareascrolltype",null,true,"both",false,2,["none","both","horizontal","vertical"]],["textareaautoskip","autoskip",true,false,false],["textareauseime","useime",true,"global",false,2,["global","local","local,keep","none"]]];_pCellInfo._property_map_combo=[["combocodecol","codecolumn",true,"",false],["combodatacol","datacolumn",true,"",false],["combodataset","innerdataset",true,"",false],["combodisplaynulltext",null,true,"",false],["combodisplaynulltype",null,true,"none",false,2,["none","nulltext"]],["combodisplayrowcount","displayrowcount",true,undefined,false,0],["combotype","type",true,"dropdown",false,2,["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"]],["comboitemheight","itemheight",true,undefined,false,0],["combopopuptype",null,true,"",false,2,["normal","center","system","none"]],["comboscrollbarsize",null,true,undefined,false,0],["combobuttonsize",null,true,undefined,false],["comboautoselect","autoselect",true,false,false],["comboimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["combopopupsize",null,true,undefined,false]];_pCellInfo._property_map_calendar=[["calendardataset","innerdataset",true,"",false],["calendardisplaynulltext",null,true,"",false],["calendardisplaynulltype",null,true,"default",false,2,["default","none","nulltext","nullmask"]],["calendardisplayinvalidtext",null,true,"invalid value",false],["calendardisplayinvalidtype",null,true,"default",false,2,["default","none","invalidtext"]],["calendarbackgroundcol","backgroundcolumn",true,"",false],["calendarbordercol","bordercolumn",true,"",false],["calendardatecol","datecolumn",true,"",false],["calendartextcolorcol","textcolorcolumn",true,"",false],["calendardaysize","daysize",true,undefined,false],["calendarheadformat","headformat",true,"yyyy.MM",false],["calendardateformat",null,true,"yyyy-MM-dd ddd",false],["calendareditformat",null,true,"yyyy-MM-dd",false],["calendarweekformat","weekformat",true,undefined,false],["calendarpopupsize",null,true,undefined,false],["calendarpopuptype",null,true,undefined,false,2,["normal","center","system","none"]],["calendarbuttonsize",null,true,undefined,false],["calendarheadheight","headheight",true,undefined,false,0],["calendarshowmonthspin","showmonthspin",true,false,false,1],["calendarshowyearspin","showyearspin",true,false,false,1],["calendartype","type",true,"normal",false],["calendarusetrailingday","usetrailingday",true,false,false],["calendarautoselect","autoselect",true,false,false]];_pCellInfo._property_map_progressbar=[["progressbarblockgap","blockgap",true,undefined,false],["progressbarblocksize","blocksize",true,undefined,false],["progressbardirection","direction",true,"forward",false],["progressbarsmooth","smooth",true,false,false]];_pCellInfo._property_map_image=[["imagestretch","stretch",true,"none",false,2,["none","fit","fixaspectratio"]]];_pCellInfo._property_map_tree=[["treecheck",null,true,"",false],["treecollapseimage",null,true,"",false],["treeexpandimage",null,true,"",false],["treeitemimage",null,true,"",false],["treelevel",null,true,"",false],["treestartlevel",null,true,0,false,0],["treestate",null,true,"",false]];_pCellInfo._property_map_expand=[["expandchar",null,true,"",false],["expandimage",null,true,"",false],["expandshow",null,true,"hide",false,2,["hide","show"]],["expandsize",null,true,16,false,0]];_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_cell);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_checkbox);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_edit);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_maskedit);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_textarea);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_combo);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_calendar);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_progressbar);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_image);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_tree);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_expand);_pCellInfo._setCellChildControlProperty=function(_a,_b,_c){var _d=this["_property_map_"+_a];var _e,_f,_g;for(var _h=0,_i=_d.length;_h<_i;_h++ ){_g=_d[_h][nexacro._CELLINFO_PMAP_CTRLPROPNAME];if(_g!=null){_f=_d[_h][nexacro._CELLINFO_PMAP_PROPNAME];_e=this._getAttrValue(this[_f],_c);_b["set_"+_g](_e);}}};_pCellInfo._setCellControlProperty=function(_a,_b){var _c=this._property_map_cell;var _d,_e,_f;for(var _g=0,_h=_c.length;_g<_h;_g++ ){_f=_c[_g][nexacro._CELLINFO_PMAP_CTRLPROPNAME];if(_f!=null){_e=_c[_g][nexacro._CELLINFO_PMAP_PROPNAME];_d=this._getAttrValue(this[_e],_b);_a["set_"+_f](_d);}}};_pCellInfo._setCellControlPropertyForAutosize=function(_a,_b,_c){var _d,_e;if(nexacro._isArray(_c)){for(var _f=0;_f<_c.length;_f++ ){_e=_c[_f];switch(_e){case "font":case "wordSpacing":case "letterSpacing":case "border":case "padding":case "wordWrap":break;default:continue;}_d=this._getAttrValue(this[_e],_b);_a["set_"+_e](_d);}}else{switch(_c){case "font":case "wordSpacing":case "letterSpacing":case "border":case "padding":case "wordWrap":break;default:return;}_d=this._getAttrValue(this[_c],_b);_a["set_"+_c](_d);}};_pCellInfo._use_displaytype_controls=["buttoncontrol","checkboxcontrol","imagecontrol","treeitemcontrol","combocontrol","calendarcontrol","editcontrol","maskeditcontrol","textareacontrol","progressbarcontrol"];_pCellInfo._chkExistSubControl=function(_a){var _b=this._use_displaytype_controls;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c]==_a){return _a;}}return "";};_pCellInfo._getDefaultPropVal=function(_a){var _b=this._property_map;var _c,_d;for(var _e=0,_f=_b.length;_e<_f;_e++ ){_c=_b[_e][nexacro._CELLINFO_PMAP_PROPNAME];_d=_b[_e][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_c==_a){return _d;}}return undefined;};_pCellInfo._allocatePropertys=function(_a){var _b,_c,_d;for(var _e=0;_e<_a.length;_e++ ){_b=_a[_e][nexacro._CELLINFO_PMAP_PROPNAME];_c=_a[_e][nexacro._CELLINFO_PMAP_EXPRBIND];_d=_a[_e][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_c){this[_b]=new nexacro.BindableValue(_d);}else{this[_b]=_d;}}};nexacro._makeCellInfoPropertySetter=function(ptype_val,_property_map){var prop,bind,str,type,styl,eval_str="";function enumjoin(_a){var _b="\""+_a[0]+"\"";for(var _c=1;_c<_a.length;_c++ ){_b+=",\""+_a[_c]+"\"";}return _b;}for(var _a=0;_a<_property_map.length;_a++ ){prop=_property_map[_a][nexacro._CELLINFO_PMAP_PROPNAME];bind=_property_map[_a][nexacro._CELLINFO_PMAP_EXPRBIND];type=_property_map[_a][nexacro._CELLINFO_PMAP_VALTYPE];styl=_property_map[_a][nexacro._CELLINFO_PMAP_STYLE];if(bind){str="$PTYPE$.set_$ATTR$ = function (v)\n";str+="{\n";str+="    if (v != this.$ATTR$._value)\n";str+="    {\n";if(type==0){str+="        this.$ATTR$._set_intval(v);\n";}else if(type==2){str+="        this.$ATTR$._set_enumval(v, ["+enumjoin(_property_map[_a][nexacro._CELLINFO_PMAP_ENUMVAL])+"]);\n";}else{str+="        this.$ATTR$._set(v);\n";}str+="        this._afterProcBindTypeProp();\n";if(styl){str+="        this._changedStyle(\""+prop+"\");\n";}str+="    }\n";str+="};\n\n";}else{str="$PTYPE$.set_$ATTR$ = function (v)\n";str+="{\n";if(type==2){str+="    var val = this.$ATTR$;\n";str+="    switch (v)\n";str+="    {\n";var _b=_property_map[_a][nexacro._CELLINFO_PMAP_ENUMVAL];for(var _c=0;_c<_b.length;_c++ ){str+="        case \""+_b[_c]+"\":\n";}str+="            val = v;\n";str+="    }\n";str+="    if (val != this.$ATTR$)\n";}else{str+="    if (v != this.$ATTR$)\n";}str+="    {\n";str+="        this.$ATTR$ = v;\n";if(styl){str+="        this._changedStyle(\""+prop+"\");\n";}str+="    }\n";str+="};\n\n";}if(typeof (ptype_val)=="object"){str=str.replace(/\$PTYPE\$/g,"arguments[0]").replace(/\$ATTR\$/g,prop);}else{str=str.replace(/\$PTYPE\$/g,ptype_val).replace(/\$ATTR\$/g,prop);}eval_str+=str;}eval(eval_str);};nexacro._makeCellInfoPropertySetter("_pCellInfo",_pCellInfo._property_map);nexacro._makePropertyDesignSetter=function(ptype_val,_property_map){var prop;var str="";for(var i=0;i<_property_map.length;i++ ){prop=_property_map[i][nexacro._CELLINFO_PMAP_PROPNAME];str+="$PTYPE$.design_set_"+prop+" = function (v)\n";str+="{\n";str+="        try\n";str+="        {\n";str+="            this._refinfo.set_"+prop+"(v);\n";str+="            this._updateAll();\n";str+="            this._apply_normalproperty(\""+prop+"\", v);\n";str+="        }\n";str+="        catch(e)\n";str+="        {\n";str+="           if (e.obj)\n";str+="           {\n";str+="               trace(e.message);\n";str+="           }\n";str+="           else\n";str+="           {\n";str+="               var msg = nexacro._getExceptionMessage(e);\n";str+="               trace(msg);\n";str+="           }\n";str+="        }\n";str+="};\n\n";str+="$PTYPE$.design_get_"+prop+" = function ()\n";str+="{\n";str+="        var prop = this._refinfo."+prop+";\n";str+="        if (prop)\n";str+="        {\n";str+="            if (nexacro._isNumber(prop) || prop._bindtype == undefined)\n";str+="                return prop;\n";str+="            else\n";str+="                return prop._value;\n";str+="        }\n";str+="        return prop;\n";str+="};\n\n";}if(typeof (ptype_val)=="object"){str=str.replace(/\$PTYPE\$/g,"arguments[0]");}else{str=str.replace(/\$PTYPE\$/g,ptype_val);}eval(str);};_pCellInfo._addPropertyMap=function(_a,_b,_c){this._property_map=this._property_map.concat(_b);nexacro._makeCellInfoPropertySetter(_a,_b);if(_c){nexacro._makePropertyDesignSetter(_a,_b);}};_pCellInfo.set_id=function(_a){this.id=this.name=_a;};_pCellInfo.set_name=function(_a){};_pCellInfo.set_displaytype=function(_a){if(_a!=this.displaytype){var _b=this.displaytype._value;this.displaytype._set(_a);this._afterProcBindTypeProp();if(this._view){if(_b=="treeitemcontrol"){this._view._removeTreeCellinfo(this);}if(_a=="treeitemcontrol"){this._view._setTreeCellinfo(this);}}}};_pCellInfo.set_maskeditmaskchar=function(_a){if(!_a){_a="_";}var _b=_a.toString().charAt(0);if(_b!=this.maskeditmaskchar){this.maskeditmaskchar=_b;this._afterProcBindTypeProp();}};_pCellInfo.set_cssclass=function(_a){if(_a!=this.cssclass._value){this.cssclass._set(_a);this._afterProcBindTypeProp();}};_pCellInfo.set_expr=function(_a){if(_a!=this.expr._value){var _b;if(typeof _a!=='string'){_b=_a.toString();}else{_b=_a;}var _c=_b.substr(0,4).toUpperCase();if(_c!=""&&_c!="EXPR"){_a="EXPR:"+_a;}this.expr._set(_a);this._afterProcBindTypeProp();}};_pCellInfo.destroy=function(){this.parent=null;var _a;var _b=this._subcells.length;for(_a=0;_a<_b;_a++ ){this._subcells[_a].destroy();}this._subcells=null;this._maskstringtypeobj=null;this._masknumbertypeobj=null;var _c=this._property_map;var _d;for(_a=0;_a<_c.length;_a++ ){_d=_c[_a][nexacro._CELLINFO_PMAP_PROPNAME];this[_d]=null;}this._property_map=null;this._key_direction=null;this._blinked_status=null;};_pCellInfo._getBindDataset=function(){if(this._view){return this._view._getBindDataSet?this._view._getBindDataSet():this._view._binddataset;}return null;};_pCellInfo._getExprCacheFn=function(_a){if(this._view){return this._view._getExprFuncByCtx?this._view._getExprFuncByCtx(_a):this._view._exprcache[_a];}};_pCellInfo._setExprCacheFn=function(_a,_b){if(this._view){return this._view._setExprFuncByCtx?this._view._setExprFuncByCtx(_a,_b):this._view._exprcache[_a]=_b;}};_pCellInfo._getValue=function(_a,_b){if(_b){if(this.expr._value!=""&&this.expr._value!=null){return this._getAttrValue(this.expr,_a);}}return this._getAttrValue(this.text,_a);};_pCellInfo._setValue=function(_a,_b){this._setAttrValue(this.text,_a,_b);};_pCellInfo._getDisplaytype=function(_a){var _b=this.displaytype;var _c=this._getAttrValue(_b,_a);if(_c===undefined){_c="normal";}if(_c=="normal"){var _d=this.text;if(_d._bindtype==1){var _e=this._getBindDataset();if(!_e){return "text";}var _f=_d._bindexpr;var _g=_e._getColumnType(_f);switch(_g){case 1:case 9:return "text";case 2:case 3:case 4:return "number";case 5:return "date";case 6:return "time";case 7:return "datetime";default:return "none";}}else{return "text";}}return _c;};_pCellInfo._getEdittype=function(_a){var _b=this.edittype;var _c=this._getAttrValue(_b,_a);if(_c=="normal"){var _d=this.text;if(_d._bindtype==1){var _e=this._getBindDataset();if(!_e){return "text";}var _f=_d._bindexpr;var _g=_e._getColumnType(_f);if(!_g){return "text";}var _h=_g;switch(_h){case 1:case 2:case 3:case 4:case 9:return "text";case 5:case 6:case 7:return "date";case 8:return "none";}}else{return "text";}}return _c;};_pCellInfo._getWordwrap=function(_a){var _b=this._getAttrValue(this.wordWrap,_a);return _b;};_pCellInfo._getAttrValue=function(_a,_b){if(_a==undefined){return undefined;}if(_a._bindtype==undefined){return _a;}else if(_a._bindtype==0){return _a._value;}else{var _c=this._getBindDataset();if(_c==null){return undefined;}if(_a._bindtype==1){return _c.getColumn(_b,_a._bindexpr);}else{var _d=_a._bindexpr;var _e=_a._value;var _f=/BIND\s*:/i;var _g=_f.exec(_e);var _h= -1;if(_g&&_g.index>=0){_h=_g.index;}if(_h>=0){_d=_d.substring(_h,_d.length);_d=_c.getColumn(_b,_d);}var _i=this._getExprCacheFn(_d);if(_i==null){_i=_c._createExprFunc(_d);this._setExprCacheFn(_d,_i);}if((typeof _i)=="function"){_c.__getParsedRow(_c._viewRecords[_b]);this.col=this._col;this.row=this._row;return _i.call(this,_b,_b,this._view,_c,_c._viewRecords,_c._viewRecords[_b],[]);}}}return undefined;};_pCellInfo._setAttrValue=function(_a,_b,_c){if(_a._bindtype==1){var _d=this._getBindDataset();if(_d){_d.setColumn(_b,_a._bindexpr,_c);}}};_pCellInfo._getDefaultTextAlign=function(_a,_b){var _c;switch(_a){case "normal":_a=this._getDisplaytype(_b);if(_a=="number"){_c="right";}else if(_a=="date"||_a=="time"||_a=="datetime"){_c="center";}else{_c="left";}break;case "mask":var _d=this._getAttrValue(this.maskedittype,_b);if(_d=="number"){_c="right";}else{_c="left";}break;case "number":case "exponent":case "currency":_c="right";break;default:_c="center";break;}return _c;};_pCellInfo._getCheckboxsize=function(_a){var _b=this._getAttrValue(this.checkboxsize,_a);if((_b===""||_b<0)&&this._view){_b=this._view.cellcheckboxsize;}return _b;};_pCellInfo._getControlButtonsize=function(_a,_b){var _c=this._getAttrValue(this[_b+"buttonsize"],_a);if(_c==null&&this._view){_c=this._view["cell"+_b+"buttonsize"];}return _c;};_pCellInfo._getControlScrollbarsize=function(_a,_b){var _c=this._getAttrValue(this[_b+"scrollbarsize"],_a);if(_c==null||_c<0){if(this._view){_c=this._view["cell"+_b+"scrollbarsize"];}}else{_c=parseInt(_c,10);}if(_c==null||_c<0){_c=undefined;}return _c;};_pCellInfo._getControlPopuptype=function(_a,_b){var _c=this._getAttrValue(this[_b+"popuptype"],_a);if(!_c&&this._view){_c=this._view["cell"+_b+"popuptype"];}return _c;};_pCellInfo._getControlPopupsize=function(_a,_b){var _c=this._getAttrValue(this[_b+"popupsize"],_a);if(!_c&&this._view){_c=this._view["cell"+_b+"popupsize"];}return _c;};_pCellInfo._afterProcBindTypeProp=function(){};_pCellInfo._changedStyle=function(_a){};_pCellInfo._getTooltipText=function(_a){var _b=this._getAttrValue(this.tooltiptext,_a);return _b;};_pCellInfo._getTreeCheck=function(_a){return this._getAttrValue(this.treecheck,_a);};_pCellInfo._getTreeCollapseImage=function(_a){return this._getAttrValue(this.treecollapseimage,_a);};_pCellInfo._getTreeExpandImage=function(_a){return this._getAttrValue(this.treeexpandimage,_a);};_pCellInfo._getTreeItemImage=function(_a){return this._getAttrValue(this.treeitemimage,_a);};_pCellInfo._getTreeLevel=function(_a){var _b=this._getAttrValue(this.treelevel,_a);_b=parseInt(_b)|0;return _b;};_pCellInfo._getTreeStartLevel=function(_a){var _b=this._getAttrValue(this.treestartlevel,_a);_b=parseInt(_b)|0;return _b;};_pCellInfo._getTreeState=function(_a){return this._getAttrValue(this.treestate,_a);};_pCellInfo._setTreeCheck=function(_a,_b){return this._setTreeBindValue(this.treecheck,_a,_b);};_pCellInfo._setTreeCollapseImage=function(_a,_b){return this._setTreeBindValue(this.treecollapseimage,_a,_b);};_pCellInfo._setTreeExpandImage=function(_a,_b){return this._setTreeBindValue(this.treeexpandimage,_a,_b);};_pCellInfo._setTreeItemImage=function(_a,_b){return this._setTreeBindValue(this.treeitemimage,_a,_b);};_pCellInfo._setTreeLevel=function(_a,_b){return this._setTreeBindValue(this.treelevel,_a,_b);};_pCellInfo._setTreeStartLevel=function(_a,_b){return this._setTreeBindValue(this.treestartlevel,_a,_b);};_pCellInfo._setTreeState=function(_a,_b){return this._setTreeBindValue(this.treestate,_a,_b);};_pCellInfo._setTreeBindValue=function(_a,_b,_c){if(_a._bindtype==1){var _d=this._getBindDataset();if(_d){_d._treeBindChanged=true;_d.setColumn(_b,_c);}}};_pCellInfo._getLocale=function(_a){var _b=this._getAttrValue(this.locale,_a);if(!_b&&this._view){_b=this._view._getLocale();}return _b;};_pCellInfo._getDisplayTypeValue=function(_a){var _b=this.displaytype;var _c=this._getAttrValue(_b,_a);if(_c===undefined){_c="normal";}return _c;};_pCellInfo._getDisplayText=function(_a){var _b=this._getBindDataset();if(_b&&this.subsumtext._value!==null&&this.subsumtext._value!==undefined&&_b.getRowType(_a)==16){var _c=this._getAttrValue(this.subsumtext,_a);return nexacro._toString(_c);}var _d=this._getDisplayTypeValue(_a);if(_d=="normal"){var _e=this.text;if(_e._bindtype==1){if(!_b){return "";}var _f=_e._bindexpr;var _g=_b._getColumnType(_f);switch(_g){case 1:case 9:return this._getDisplayText_text(_a);case 2:case 3:case 4:return this._getDisplayText_number(_a);case 5:return this._getDisplayText_date(_a,0);case 6:return this._getDisplayText_date(_a,1);case 7:return this._getDisplayText_date(_a,2);default:return "";}}}else{if(_d=="mask"||_d=="maskeditcontrol"){var _h=this._getAttrValue(this.maskedittype,_a);if(_h=="number"){return this._getDisplayText_masknumber(_a);}else{return this._getDisplayText_maskstring(_a);}}else if(_d=="number"){return this._getDisplayText_number(_a);}else if(_d=="currency"){return this._getDisplayText_currency(_a);}else if(_d=="date"){return this._getDisplayText_date(_a);}else if(_d=="calendarcontrol"){return this._getDisplayText_date(_a,null,true);}else if(_d=="combotext"){return this._getDisplayText_combo(_a);}else if(_d=="combocontrol"){return this._getDisplayText_combo(_a,true);}else if(_d=="none"){return "";}}return this._getDisplayText_text(_a);};_pCellInfo._getTextValueForDisp=function(_a){if(this.expr._value!=""&&this.expr._value!=null){return this._getAttrValue(this.expr,_a);}return this._getAttrValue(this.text,_a);};_pCellInfo._getDisplayText_text=function(_a){var _b=this._getTextValueForDisp(_a);if(_b!=null){if(typeof _b!=='string'){_b=_b.toString();}}return _b;};_pCellInfo._getDisplayText_maskstring=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this.maskeditformat,_a);if(_b!=null){if(typeof _b!=='string'){_b=_b.toString();}}if(_c&&_c.length){var _d=this._maskstringtypeobj;var _e=this._getAttrValue(this.maskeditmaskchar,_a);var _f=this._getLocale(_a);var _g=this._getAttrValue(this.maskeditpostfixtext,_a);_d.setLocale(_f);_d.setMask(_c);_d.setMaskChar(_e);_d.setPostfixtext(_g);_b=_d.applyMask(_b);}return _b;};_pCellInfo._getDisplayText_masknumber=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this.maskeditformat,_a);if(_c&&_c.length){var _d=this._getLocale(_a);var _e=this._masknumbertypeobj;var _f=this._getAttrValue(this.maskeditlimitbymask,_a);var _g=this._getAttrValue(this.maskeditpostfixtext,_a);if(_c==="."){_e.setUseGrouping(true);}_e.setLimitType(_f);_e.setLocale(_d);_e.setMask(_c);_e.setPostfixtext(_g);_b=_e.applyMask(_b);}else{_b=nexacro._toString(_b);}return _b;};_pCellInfo._getDisplayText_number=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this.maskeditlimitbymask,_a);var _d=this._getLocale(_a);var _e=this._masknumbertypeobj;_e.setUseGrouping(true);_e.setLimitType(_c);_e.setLocale(_d);_e.setMask("");_b=_e.applyMask(_b);return _b;};_pCellInfo._getDisplayText_currency=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getLocale(_a);if(!isNaN(_b)){var _d=new nexacro.Number(_b);_b=_d.toLocaleCurrencyString(_c);}return _b;};_pCellInfo._getDisplayText_date=function(_a,_b,_c){var _d=this._getTextValueForDisp(_a);var _e=undefined;var _f=false;var _g=false;var _h;switch(_b){case 0:_h="yyyy-MM-dd";break;case 1:_h="hh:mm:ss";break;case 2:_h="yyyy-MM-dd hh:mm:ss";break;default:_h=this._getAttrValue(this.calendardateformat,_a);break;}_d=(_d)?_d:"";if(_d.constructor==Date){_e=_d;}else{var _i;var _j;var _k;if(typeof _d!=='string'){_i=_d.toString();}else{_i=_d;}if(_i.search(/\S/)> -1){if(_b==undefined){var _l=this._getAttrValue(this.calendareditformat,_a);if(_l&&_l.length){if(_l=="LONGDATE"||_l=="SHORTDATE"){_b=2;}else{var _m=new nexacro._EditMaskTypeDate();_m.setDateMask(_l);_m.setEditMask(_l);_b=_m.getEditFormatType();}}else{if(_i.length==8){_b=0;}else if(_i.length==6||_i.length==9){_b=1;}else{_b=2;}}}_e=this.__parseDate(_i,_b);if(_e&&(_e._isInvalidDate?_e._isInvalidDate():isNaN(_e.valueOf()))){_j=this._getAttrValue(this.calendardisplayinvalidtype,_a);if((_j=="invalidtext"||_j=="default")&&!_c){return this._getAttrValue(this.calendardisplayinvalidtext,_a);}return _i;}}else{_k=this._getAttrValue(this.calendardisplaynulltype,_a);if(_k=="nulltext"&&!_c){return this._getAttrValue(this.calendardisplaynulltext,_a);}else if(_k=="nullmask"&&!_c){_f=true;}else if(_k=="default"){}else{return "";}}}if(_e==null){_g=true;_e=new nexacro.Date();_e.setFullYear(0);_e.setMonth(0);_e.setDate(1);}var _n;var _o=this._getLocale(_a);var _p=nexacro.Locale.getLocaleInfo(_o);var _q;if(_h=="SHORTDATE"||_h=="LONGDATE"){if(_h=="SHORTDATE"){_q=_p.shortdate_format;}else{_q=_p.longdate_format;}if(_q==""){_q=nexacro.Locale._default_shortdate_format;}var _r=((this._view&&!this._view._isRtl())&&_p.direction=="rtl")?true:false;_n=_e.getLocaleFormatString(_o,_q,_r);}else{var _s=_e.getFullYear();if(_s==0){_s="0000";}else{_s=_s.toString().padLeft(4,"0");}var _t=_e.getMonth()+1;var _u=_p.month_names_long[_e.getMonth()];_t=(_t<10?"0":"")+_t;var _v=_p.weekday_names_long[_e.getDay()];var _w=_p.weekday_names_short[_e.getDay()];var _x=_e.getDate();_x=(_x<10?"0":"")+_x;var _y=_e.getYear()%100;_y=(_y<10?"0":"")+_y;var _z= +_t;var _aa= +_x;var _ab=_e.getHours();_ab=(_ab<10?"0":"")+_ab;var _ac= +_ab;var _ad=_e.getMinutes();_ad=(_ad<10?"0":"")+_ad;var _ae= +_ad;var _af=_e.getSeconds();_af=(_af<10?"0":"")+_af;var _ag= +_af;var _ah=_e.getMilliseconds();_ah=(_ah<10?"00":_ah<100?"0":"")+_ah;if(_g){_ab=_ac="00";_ad=_ae="00";_af=_ag="00";_ah="000";}_q=_h;if(_q==null||_q.length==0||!_q.match(/[yMdHhms]/)){_q="yyyy-MM-dd ddd";}if(_f){var _ai="_";var _aj=_ai+_ai;var _ak=_aj+_ai;var _al=_ak+_ai;_n=_q.replace("yyyy",_al);_n=_n.replace("MMMM","lunari");_n=_n.replace("MM",_aj);_n=_n.replace("ddd","week");_n=_n.replace("dd",_aj);_n=_n.replace("yy",_aj);_n=_n.replace("M",_ai);_n=_n.replace("d",_ai);_n=_n.replace("tt",_aj);_n=_n.replace("HH",_aj);_n=_n.replace("hh",_aj);_n=_n.replace("H",_ai);_n=_n.replace("h",_ai);_n=_n.replace("mm",_aj);_n=_n.replace("m",_ai);_n=_n.replace("sss",_ak);_n=_n.replace("ss",_aj);_n=_n.replace("s",_ai);_n=_n.replace("lunari",_al);_n=_n.replace("week",_ak);}else{var _am=_ab;var _an="오전";if(_ab>12&&_ab<25){_am=_ab<22?"0"+(_ab-12):_ab-12;_an="오후";}_n=_q.replace("tt",_an);_n=_n.replace("HH",_ab);_n=_n.replace("hh",_am);_n=_n.replace("H",_ac);_n=_n.replace("h",_ac);_n=_n.replace("mm",_ad);_n=_n.replace("m",_ae);_n=_n.replace("sss",_ah);_n=_n.replace("ss",_af);_n=_n.replace("s",_ag);_n=_n.replace("dddd","weekL");_n=_n.replace("ddd","week");_n=_n.replace("yyyy",_s);_n=_n.replace("MMMM","lunari");_n=_n.replace("MM",_t);_n=_n.replace("dd",_x);_n=_n.replace("yy",_y);_n=_n.replace("M",_z);_n=_n.replace("d",_aa);_n=_n.replace("lunari",_u);_n=_n.replace("weekL",_v);_n=_n.replace("week",_w);}}return _n;};_pCellInfo.__parseDate=function(_a,_b){var _c;var _d=new nexacro._EditMaskTypeDate();if(/[^0-9]/.test(_a)){_c=new Date(_a);}else{_c=_d.convertToDateObject(_a,_b);}if(_c){if(isNaN(_c.valueOf())){return _c;}switch(_b){case 0:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate());break;case 1:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate(),_c.getHours(),_c.getMinutes(),_c.getSeconds(),_c.getMilliseconds());_c._timeonly=true;break;case 2:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate(),_c.getHours(),_c.getMinutes(),_c.getSeconds(),_c.getMilliseconds());break;default:break;}}return _c;};_pCellInfo._getDisplayText_combo=function(_a,_b){var _c=this._getAttrValue(this.combodataset,_a);var _d=this._getAttrValue(this.combocodecol,_a);var _e=this._getAttrValue(this.combodatacol,_a);if(_c&&_c.length&&_d&&_d.length&&_e&&_e.length){var _f=this._findDataset(_c);if(_f){var _g=this._getTextValueForDisp(_a);var _h=_f.lookupNF(_d,_g,_e);if(_h){if(typeof _h!=='string'){return _h.toString();}else{return _h;}}}}if(this.combodisplaynulltype._value=="nulltext"&&!_b){return this._getAttrValue(this.combodisplaynulltext,_a);}return "";};_pCellInfo._findDataset=function(_a){var _b=this._view;if(_b){return _b._findDataset(_a);}return null;};_pCellInfo._loadXmlElement=function(_a,_b,_c){var _d=_a.getAttribute("col"),_e=_a.getAttribute("row"),_f=_a.getAttribute("colspan"),_g=_a.getAttribute("rowspan");this._col=(_d==null?0:parseInt(_d));this._row=(_e==null?0:parseInt(_e));this._colspan=(_f==null?1:parseInt(_f));this._rowspan=(_g==null?1:parseInt(_g));var _h,_i;var _j;var _k=_a.attributes;var _l=_k.length;for(_j=0;_j<_l;_j++ ){_h=_k[_j].name;_i=_a.getAttribute(_h);this._loadingxml=true;if(this["set_"+_h]){if(_i!==null&&_i!==undefined){this["set_"+_h](_i);}}else if(this.hasOwnProperty(_h)==false){switch(_h){case "col":case "row":case "colspan":case "rowspan":break;default:this[_h]=new nexacro.BindableValue(undefined);this._addPropertyMap(this,[[_h,null,true,undefined,false]],true);if(_i!==null&&_i!==undefined){this["set_"+_h](_i);}break;}}this._loadingxml=false;}if(!_c){var _m=_a.getElementsByTagName("Cell"),_n,_o;if(!_b){_b=nexacro.CellInfo;}for(_j=0,_l=_m.length;_j<_l;_j++ ){_o=_m[_j];_n=new _b((this._type+this._cellidx+"_sub"+_j),this.parent,this._view,this._type,_j);_n._loadXmlElement(_o,true);_n._isSubCell=true;this._subcells[_j]=_n;}}};_pCellInfo._getXmlString=function(){var _a="";if(this._isSubCell){_a+="    ";}_a+="<Cell col=\""+this._col;_a+="\" row=\""+this._row;if(this._colspan>1){_a+="\" colspan=\""+this._colspan;}if(this._rowspan>1){_a+="\" rowspan=\""+this._rowspan;}var _b=this._property_map;var _c,_d,_e;var _f;var _g=_b.length;for(_f=0;_f<_g;_f++ ){_c=_b[_f][nexacro._CELLINFO_PMAP_PROPNAME];_d=_b[_f][nexacro._CELLINFO_PMAP_EXPRBIND];_e=_b[_f][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_d){if(this[_c]._value!=_e){_a+="\" "+_c+"=\""+(typeof (this[_c]._value)=="string"?nexacro._encodeXml(this[_c]._value):this[_c]._value);}}else{if(this[_c]!=_e){_a+="\" "+_c+"=\""+(typeof (this[_c])=="string"?nexacro._encodeXml(this[_c]):this[_c]);}}}var _h=this._subcells;if(_h.length>0){_a+="\">\n";for(_f=0,_g=_h.length;_f<_g;_f++ ){_a+=_h[_f]._getXmlString(true);}_a+="</Cell>\n";}else{_a+="\"/>\n";}return _a;};_pCellInfo._hasEditor=function(_a){var _b=this._getEdittype(_a);switch(_b){case "none":return false;case "normal":case "text":case "combo":case "date":case "mask":case "textarea":case "button":case "readonly":return true;}return false;};delete _pCellInfo;}if(!nexacro._CellControl){nexacro._CellControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);var _m=["onexpandup","onexpanddown","oninput","ondropdown","oncloseup"];this._view=_k;this._rowidx=(_l!=undefined)?_l: -9;this.tabstop=false;this._cellidx=_j;this._refinfo=_i?_i:this._makeCellInfo(_a,null,_k,_a,_j);this.subcells=[];this.parentcell=(_h instanceof nexacro._CellControl)?_h:null;this.selected=false;this.accessibilityrole="gridcell";this._subComp=null;this._text_elem=null;this._curDisplayType="";this._expand_width=0;this._expandCtrl=null;this._isSubCell=(this.parentcell)?true:false;this._fakecell=false;this._hideInner=false;this._is_real_upelem=null;this._editor=null;this._client_mode="";this._disp_show=true;this._writable=false;this._cellExpandObj="_CellExpandControl";this._cellButtonObj="_CellButtonControl";this._cellCheckBoxObj="_CellCheckboxControl";this._cellImageObj="_CellImageControl";this._cellComboObj="_CellComboControl";this._cellCalendarObj="_CellCalendarControl";this._cellEditObj="_CellEditControl";this._cellTextAreaObj="_CellTextAreaControl";this._cellProgressBarObj="_CellProgressBarControl";this._cellMaskEditObj="_CellMaskEditControl";this._cellTreeObj="_CellTreeControl";for(var _n=0,_o=_m.length;_n<_o;_n++ ){this._event_list[_m[_n]]=1;}};var _pCellControl=nexacro._createPrototype(nexacro.Component,nexacro._CellControl);nexacro._CellControl.prototype=_pCellControl;_pCellControl._type_name="CellControl";_pCellControl._is_subcontrol=true;_pCellControl._is_tablecell=true;_pCellControl._is_simple_control=true;_pCellControl._use_selected_status=true;_pCellControl._use_readonly_status=true;_pCellControl._is_use_auto_selected_status=true;_pCellControl._avail_left=0;_pCellControl._avail_top=0;_pCellControl._avail_width=0;_pCellControl._avail_height=0;_pCellControl.init=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.init.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null);var _l=this._refinfo;_l.id=_h.name=_a;_l._view=_j;_l._type="";_l._cellidx=_i;};_pCellControl._changeCell=function(_a){var _b=this._refinfo;var _c=this._cellidx;this._refinfo=_a._refinfo;this._cellidx=_a._cellidx;_a._refinfo=_b;_a._cellidx=_c;var _d=this._adjust_left;var _e=this._adjust_top;var _f=this._adjust_width;var _g=this._adjust_height;this.move(_a._adjust_left,_a._adjust_top,_a._adjust_width,_a._adjust_height);_a.move(_d,_e,_f,_g);};_pCellControl._makeCellInfo=function(_a,_b,_c,_d,_e){return new nexacro.CellInfo(_a,_b,_c,_d,_e);};_pCellControl._apply_normalproperty=function(_a,_b){};_pCellControl._getDisplaytype=function(){var _a=this._getDataRow();return this._refinfo._getDisplaytype(_a);};_pCellControl._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._text_elem){_b=this._text_elem._getComputedStyleAlign(_a);}return _b;};_pCellControl.on_create_contents=function(){this._disp_show=this._updateDisplayer();};_pCellControl.on_created_contents=function(_a){var _b=this._control_element;if(_b){if(_b.setInnerHTML&&this._view._use_innerhtml&&!this.parent._is_nc_control){this._is_create_commandstr=true;var _c=this.on_create_contents_command();_b.setInnerHTML(_c);this.on_attach_contents_handle(_a);this._is_created=true;}else{var _d=this.subcells;var _e=_d.length;if(_e==0){var _f=this._subComp;if(_f){_f.on_created(_a);}}var _g=this._text_elem;if(_g){_g.create(_a);}var _h=this._expandCtrl;if(_h){_h.on_created();}for(var _j=0;_j<_e;_j++ ){_d[_j].on_created();}}if(nexacro._enableaccessibility&&this._view&&!this._view._accept_focus){var _i=this.accessibility;if(_i){this._view._accept_focus=true;}}if(!this._adjust_width||!this._adjust_height){this._setDisplay(false);}}};_pCellControl._on_changeStatus=function(_a,_b){this._status_changing=true;nexacro.Component.prototype._on_changeStatus.call(this,_a,_b);this._status_changing=false;};_pCellControl.on_changeStatus=function(_a,_b,_c,_d,_e){if(this._isSubCell){return _d;}return nexacro.Component.prototype.on_changeStatus.call(this,_a,_b,_c,_d,_e);};_pCellControl.on_create_contents_command=function(_a){var _b="";var _c=this._control_element;if(_c){var _d=this.subcells;var _e=_d.length;if(_e==0){var _f=this._subComp;if(_f){_b+=_f.createCommand();}}else{for(var _i=0;_i<_e;_i++ ){_b+=_d[_i].createCommand();}}var _g=this._text_elem;if(_g){_b+=_g.createCommand();}var _h=this._expandCtrl;if(_h){_b+=_h.createCommand();}}return _b;};_pCellControl.on_attach_contents_handle=function(_a){var _b=this.subcells;var _c=_b.length;for(var _h=0;_h<_c;_h++ ){_b[_h].attachHandle(_a);}var _d=this._subComp;if(_d){_d.attachHandle(_a);}var _e=this._expandCtrl;if(_e){_e.attachHandle(_a);}var _f=this._text_elem;if(_f){_f.attachHandle(_a);}if(nexacro._enableaccessibility&&this._view&&!this._view._accept_focus){var _g=this.accessibility;if(_g){this._view._accept_focus=true;}}if(!this._adjust_width||!this._adjust_height){this._setDisplay(false);}};_pCellControl.destroyComponent=function(){nexacro.Component.prototype.destroyComponent.call(this);if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}this._refinfo=this._view=this.parentcell=this._band=this._is_real_upelem=null;};_pCellControl.on_destroy_contents=function(){this._destroyDisplayer();if(this._expandCtrl){this._expandCtrl.destroy();this._expandCtrl=null;}var _a=this.subcells;var _b=_a.length;var _c;if(this.id=="tempcell"){for(_c=0;_c<_b;_c++ ){if(_a[_c]){_a[_c].destroy();}}}else{for(_c=0;_c<_b;_c++ ){_a[_c].destroy();}}this.subcells=null;if(this._tempdestroyeditor){this._tempdestroyeditor.destroy();this._tempdestroyeditor=null;}if(this._editor){this._editor.destroy();this._editor=null;}if(this._tempdestroyeditor_list){for(_c=0;_c<this._tempdestroyeditor_list.length;_c++ ){this._tempdestroyeditor_list[_c].destroy();}this._tempdestroyeditor_list=null;}};_pCellControl._makeEventInfoBase=function(_a){var _b=this;var _c=null;if(_b.parentcell){_c=_b;_b=_b.parentcell;}var _d={cell: -1,col: -1,row: -9,subrow: -1,mergecell: -1,mergecol: -1,mergerow: -1,pivotindex: -9,eventid:"",id:""};if(_a){_d.eventid=_d.id=_a;}_d.cell=_b._cellidx;_d.col=_b._refinfo._col;_d.row=_b._getDataRow();_d.subrow=_b._refinfo._row;if(_c){_d.mergecell=_c._cellidx;_d.mergecol=_c._refinfo._col;_d.mergerow=_c._refinfo._row;}return _d;};_pCellControl.on_fire_onexpandup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onexpandup&&this.onexpandup._has_handlers){var _n=this._makeEventInfoBase("onexpandup");_n.button=_a;_n.altkey=_b;_n.ctrlkey=_c;_n.shiftkey=_d;_n.metakey=_m;_n.screenX=_e;_n.screenY=_f;_n.canvasX=_g;_n.canvasY=_h;_n.clientX=_i;_n.clientY=_j;_n.fromobject=_k;_n.fromreferenceobject=_l;return this.onexpandup._fireEvent(this,_n);}return false;};_pCellControl.on_fire_onexpanddown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onexpandup&&this.onexpandup._has_handlers){var _n=this._makeEventInfoBase("onexpanddown");_n.button=_a;_n.altkey=_b;_n.ctrlkey=_c;_n.shiftkey=_d;_n.metakey=_m;_n.screenX=_e;_n.screenY=_f;_n.canvasX=_g;_n.canvasY=_h;_n.clientX=_i;_n.clientY=_j;_n.fromobject=_k;_n.fromreferenceobject=_l;return this.onexpandup._fireEvent(this,_n);}return false;};_pCellControl.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=this._makeEventInfoBase("oninput");return this.oninput._fireEvent(this,_a);}return true;};_pCellControl.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=this._makeEventInfoBase("ondropdown");_b.value=this.__evtvalue(_a);return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCellControl.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=this._makeEventInfoBase("oncloseup");_f.value=this.__evtvalue(_a,_e);return this.oncloseup._fireEvent(this,_f);}return true;};_pCellControl.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onclick&&this.onclick._has_handlers){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro._CellControl){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o.parent;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;var _r=this._makeEventInfoBase("onclick");_r.button=_a;_r.altkey=_b;_r.ctrlkey=_c;_r.shiftkey=_d;_r.metakey=_m;_r.screenx=_e;_r.screeny=_f;_r.canvasx=_g;_r.canvasy=_h;_r.clientx=_i;_r.clienty=_j;_r.fromobject=_k;_r.fromreferenceobject=_l;_r.clickitem=_n||"";return this.onclick._fireEvent(this,_r);}return false;};_pCellControl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro._fireBeforeDblclick(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);if(this.ondblclick&&this.ondblclick._has_handlers){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro._CellControl){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o.parent;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;var _r=this._makeEventInfoBase("ondblclick");_r.button=_a;_r.altkey=_b;_r.ctrlkey=_c;_r.shiftkey=_d;_r.metakey=_m;_r.screenx=_e;_r.screeny=_f;_r.canvasx=_g;_r.canvasy=_h;_r.clientx=_i;_r.clienty=_j;_r.fromobject=_k;_r.fromreferenceobject=_l;_r.clickitem=_n||"";return this.ondblclick._fireEvent(this,_r);}return false;};_pCellControl._common_fire_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){var _q=this._getWindow();var _r=_q._cur_ldown_elem;var _s=_q.findComponent(_r,0,0)[0];var _t=_q.findComponent(_o,0,0)[0];if(_r!=_o){while(_s){if(_s instanceof nexacro._CellControl){break;}_s=_s.parent;}while(_t){if(_t instanceof nexacro._CellControl){break;}_t=_t.parent;}if(_s==_t){var _u="";if(this._editor){_u="control";}this.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p,_u);}}};_pCellControl.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._common_fire_lbuttonup(_a,_b,"",false,false,false, -1, -1, -1, -1, -1, -1,_c,_d,null);return nexacro.Component.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);};_pCellControl.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){this._common_fire_lbuttonup(null,null,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellControl._on_imeaction=function(_a,_b,_c,_d,_e,_f){if(!this._is_alive){return;}if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_onimeaction(_b,_c,_d,_e,this,this,_f);var _g=this._getFromComponent(this);if(_g&&(!_g.oncellimeaction||(_g.oncellimeaction&&!_g.oncellimeaction.defaultprevented))){this.on_imeaction_default_action(_a,_b,_c,_d,_e,_f);}}};_pCellControl.on_imeaction_default_action=function(_a,_b,_c,_d,_e,_f){if(this._subComp){if(this._subComp.imeaction=="next"){var _g=this._getRootComponent(this);var _h=this._getForm().getNextComponent(_g,true);if(_h){_h.setFocus();}}else if(this._subComp.imeaction=="previous"){var _g=this._getRootComponent(this);var _i=this._getForm().getPrevComponent(_g,true);if(_i){if(_i instanceof Array){_i=_i[0];}_i.setFocus();}}}};_pCellControl.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){return this._view.on_fire_onimeaction(this,_a,_b,_c,_d,_e,_f,_g);};_pCellControl.__evtvalue=function(_a,_b){var _c="";if(_a&&_a.value){_c=_a.value;}else if(_b){_c=_b;}return _c;};_pCellControl._destroyDisplayer=function(_a){if(this._subComp){if(_a){var _b=this._subComp;nexacro._OnceCallbackTimer.callonce(this,function(){if(_b){_b.destroy();}});_b.set_visible(false);this._subComp=null;}else{this._subComp.destroy();this._subComp=null;}}};_pCellControl._getBindDataset=function(){return this._view?(this._view._getBindDataSet?this._view._getBindDataSet():this._view._binddataset):null;};_pCellControl._applyEditorDataset=function(_a,_b){if(!this._editor||!this._writable){return;}var _c=this._getBindDataset();if(_c){var _d=this._getDataRow();var _e=this._refinfo.text._bindexpr;var _f=this._editor._getValueData();var _g=this._view;if(this._refinfo.text._bindtype==1){_g._is_async_recreate=_a;_g._dsEventOccured=true;var _h={status:""};_c.setColumn(_d,_e,_f,_h);if(_h.status=="cancolumnchange"){this._editor.set_value(_b);}_g._is_async_recreate=false;_g._dsEventOccured=false;}}};_pCellControl._getDataRow=function(){return this._rowidx;};_pCellControl._isFakeCell=function(){var _a=this._getDataRow();var _b=this._getBindDataset();var _c=(_b)?_b.rowcount:0;if(_c<=_a||_a< -2){return true;}return false;};_pCellControl.on_change_containerRect=function(_a,_b){this._updateAvailableArea();};_pCellControl.on_getIDCSSSelector=function(){if(this._isSubCell){return "subcell";}return "cell";};_pCellControl._getClassCSSSelector=function(){var _a=nexacro.Component.prototype._getClassCSSSelector.call(this);if(this._rowidx>=0&&this._rowidx%2){if(!_a){_a=[];}_a.push("oddcell");}return _a;};_pCellControl._getElementClassCSSSelector=function(){var _a=this._getClassCSSSelector(this);if(_a){_a.push("dummy");_a.push("dummy");_a.push("dummy");}return _a;};_pCellControl._apply_setfocus=function(_a,_b){if(_b||nexacro._enableaccessibility){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pCellControl.on_apply_prop_tooltip=function(){var _a=this._getDataRow();this.tooltiptext=this._refinfo._getTooltipText(_a);this.tooltiptype=this._refinfo.tooltiptype;nexacro.Component.prototype.on_apply_prop_tooltip.call(this);};_pCellControl.on_fire_onsize=function(_a,_b){if(_a&&_b){this._setDisplay(true);}var _c=nexacro.Component.prototype.on_fire_onsize.call(this,_a,_b);if(!_a||!_b){this._setDisplay(false);}return _c;};_pCellControl._setDisplay=function(_a){if(this._control_element){this._control_element.setElementDisplay((_a)?"":"none");}};_pCellControl.on_apply_text=function(){var _a=this._text_elem;if(_a){var _b=this._refinfo;var _c=this._getDataRow();var _d=_b._getDisplayTypeValue(_c);var _e=nexacro._toString(this._displaytext);if(_d=="decoratetext"){_a.setElementDecorateText(_e);}else{if(_a.decoration!=""){_a.decoration="";_a.text=null;}if(!_a.text&&_e){_a.setElementText(_e);if(this._expandCtrl&&this._expandCtrl._is_created){this._control_element.bringToFrontElement(this._expandCtrl._control_element);}}else{_a.setElementText(_e);}}}};_pCellControl.on_apply_wordWrap=function(){var _a=this._text_elem;if(_a){var _b=this._getDataRow();var _c=this._refinfo._getWordwrap(_b);_a.setElementWordWrap(_c);}};_pCellControl.on_apply_textAlign=function(_a){var _b=this._text_elem;if(_b){_b.setElementTextAlign(_a);}if(this._subComp){if(this._subComp._setAlign){this._subComp._setAlign(_a,this.verticalAlign);}else{this._subComp.set_textAlign(_a);}}};_pCellControl.on_apply_verticalAlign=function(_a){var _b=this._text_elem;if(_b){_b.setElementVerticalAlign(_a);}if(this._subComp){if(this._subComp._setAlign){this._subComp._setAlign(this.textAlign,_a);}else{this._subComp.set_verticalAlign(_a);}}};_pCellControl._needToggle=function(){var _a=this._getDataRow();var _b=this._refinfo;var _c=_b._getDisplaytype(_a);var _d=_b._getEdittype(_a);if(_d!="checkbox"){return;}if(_c=="checkboxcontrol"){if(this._subComp){this._subComp._toggleCheck();}}else{var _e=this._view;var _f=_b._getValue(_a);_f=nexacro._toBoolean(_f);_f=(_f)?0:1;if(_b.text._bindtype==1){var _g=this._getBindDataset();_e._dsEventOccured=true;_g.setColumn(_a,_b.text._bindexpr,_f);if(nexacro._enableaccessibility){this._setAccessibilityStatChecked(nexacro._toBoolean(_f));}_e._dsEventOccured=false;}}};_pCellControl.on_apply_checkboxAlign=function(_a,_b){var _c=this._subComp._adjust_width;var _d=this._subComp._adjust_height;var _e=this._getAvailableRect();var _f=_e.left,_g=_e.top;var _h=_e.width,_i=_e.height;switch(_a){case "left":break;case "right":_f+=(_h-_c);break;default:_f+=((_h-_c)/2);break;}switch(_b){case "top":break;case "bottom":_g+=(_i-_d);break;default:_g+=((_i-_d)/2);break;}this._subComp.move(_f,_g,this._subComp._adjust_width,this._subComp._adjust_height);};_pCellControl.on_apply_textDecoration=function(_a){var _b=this._refinfo;if(!_a&&_b.textDecoration){if(this.textDecoration!=_b.textDecoration){this.textDecoration=_b.textDecoration;_a=nexacro.TextDecorationObject(this.textDecoration);this._textdecoration=_a;}else{_a=this._textdecoration;}}if(this._text_elem){this._text_elem.setElementTextDecoration(_a);}else if(this._subComp){this._subComp.set_textDecoration(this.textDecoration);}};_pCellControl._hideInnerElement=function(){var _a=this.subcells;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].set_visible(false);}if(this._subComp){this._subComp.set_visible(false);}else if(this._text_elem){this._text_elem.setElementVisible(false);}this._hideInner=true;this.__showExpand(false);if(this._curDisplayType=="treeitemcontrol"){this._subComp._treeline_visible(false);}};_pCellControl._isShowEditor=function(){if(this._editor){return this._editor.visible;}return false;};_pCellControl._isEnterDownable=function(){var _a=this._refinfo;var _b=this._getDataRow();var _c=_a._getEdittype(_b);if(this._curDisplayType=="checkboxcontrol"&&_c=="checkbox"){return true;}else if(_c=="button"){return false;}else if(this._isShowEditor()){return true;}return false;};_pCellControl._showInnerElement=function(){var _a=this.subcells;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].set_visible(true);}if(this._isShowEditor()==false){if(this._subComp){this._subComp.set_visible(true);}else if(this._text_elem){this._text_elem.setElementVisible(true);}}this._hideInner=false;this.__showExpand(true);if(this._curDisplayType=="treeitemcontrol"){this._subComp._treeline_visible(true);}};_pCellControl.__showExpand=function(_a){if(!this._expandCtrl){return;}if(this._fakecell){this._expandCtrl.set_visible(false);return;}var _b=this._refinfo;var _c=this._getDataRow();var _d=_b._getAttrValue(_b.expandshow,_c);if(_d=="show"){if(_a==false){this._expandCtrl.set_visible(this.selected);}else{this._expandCtrl.set_visible(true);}}else{this._expandCtrl.set_visible(false);}this._updateAvailableArea();};_pCellControl._createDisplayer=function(_a){var _b=this._view;var _c=this._refinfo;switch(_a){case "buttoncontrol":this._createButtonDisplayer();break;case "checkboxcontrol":this._createCheckboxDisplayer();break;case "imagecontrol":this._createImageDisplayer();break;case "treeitemcontrol":this._createTreeDisplayer();if(_b){_b._treeCellinfo=_c;}break;case "combocontrol":this._createComboDisplayer();break;case "calendarcontrol":this._createCalendarDisplayer();break;case "maskeditcontrol":this._createMaskEditDisplayer();break;case "textareacontrol":this._createTextAreaDisplayer();break;case "progressbarcontrol":this._createBarDisplayer();break;case "editcontrol":this._createEditDisplayer();break;default:this._createTextDisplayer();break;}if(this._subComp){this._subComp.on_changeUserStatus=function(_d,_e,_f,_g,_h){if(this._displaymode){if(_d=="nulltext"&&_e){return _d;}else{return _f;}}return _f;};}this._curDisplayType=_a;this.on_apply_textAlign(_c.textAlign);this.on_apply_verticalAlign(_c.verticalAlign);};_pCellControl._isChangeDisplayer=function(_a){var _b=this._view;var _c=this._curDisplayType;if((_a!=_c)||(_b&&_b._changeDisplayer)){return true;}return false;};_pCellControl._updateDisplayer=function(){var _a=true;var _b=this._view;var _c=this._refinfo;var _d=this._getDataRow();var _e=_c._getDisplayTypeValue(_d);if(_e===undefined){_e="normal";}if(_c.displaytype._bindtype>0&&_e==="treeitemcontrol"){if(!_b._hasTree&&_b._setTreeCellinfo){_b._setTreeCellinfo(_c,(this.id=="tempcell"));_b._useexprtree=true;}}var _f=_c._getAttrValue(_c.expandshow,_d);var _g=_c._getAttrValue(_c.expandsize,_d);if(_g!==0&&!_g){_g=16;}if(_f=="show"){if(!this._expandCtrl){this._createExpandDisplayer();}else{if(this._expand_width!=_g){this._expandCtrl.destroy();this._expandCtrl=null;this._createExpandDisplayer();}}this._changeClientmode("expand");}else{if(this._expandCtrl){this._expand_width=0;this._expandCtrl.destroy();this._expandCtrl=null;this._changeClientmode("text");}}if(this._isChangeDisplayer(_e)){if(this._curDisplayType!=""){this._destroyDisplayer(_b?_b._lbuttondown_proc:null);}this._createDisplayer(_e);if(_b._lbuttondown_proc){var _h=this._getWindow();if(_h._cur_ldown_elem&&_h._cur_ldown_elem.parent==null&&this.parent!=null){_h._cur_ldown_elem=this;}}var _i=_c._getDefaultTextAlign(_e,_d);var _j=this._text_elem;if(_j){_j.setElementTextAlignByClassCSSSelector(_i);}if(this._is_created&&this._subComp&&!this._subComp._is_created){this._subComp.on_created();}this._updateEditor();}else{this.on_apply_wordWrap();}var _k=this._isFakeCell();if(_k&&_b){if(_b.fillareatype=="datarow"){if(!this._isDisplayDataType(_e)){if(_e!="date"){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}}}else if(_b.fillareatype=="linerow"){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}else if(_b.fillareatype=="controlrow"){if(this._isDisplayDataType(_e)){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}}}else{if(_k!=this._fakecell){this._showInnerElement();this._fakecell=_k;}}return _a;};_pCellControl._isUpdateArea=function(){return true;};_pCellControl.set_select=function(_a,_b){if(this.selected!=_a){this.selected=_a;if(!_b){this.on_apply_select(_a);}}};_pCellControl.on_apply_select=function(_a){this._updateAll();};_pCellControl._isSelectedColor=function(){var _a=this._view?this._view.useselcolor:false;return (this.selected&&((_a==undefined)?true:_a));};_pCellControl._getRemoveLine=function(){var _a,_b,_c,_d;if(this._isSubCell){_a=true;_b=true;_c=true;_d=true;}else{_a=true;_b=true;_c=false;_d=false;}return [_a,_b,_c,_d];};_pCellControl.__update=function(_a,_b,_c){if(!this._is_alive){return false;}var _d=this._refinfo;if(!_d._property_map){return false;}var _e=this._view;var _f=false;if(this.parent._rowidx>=0){if(this._rowidx!=this.parent._rowidx){var _g=this._rowidx;this._rowidx=this.parent._rowidx;if((this._rowidx%2)!=(_g%2)){_f=true;}this._updateEditor();}}var _h=this._getDataRow();var _i=_d._getAttrValue(_d.cssclass,_h);if(this.cssclass!=_i){this.set_cssclass(_i);}else{if(_f){this.on_apply_cssclass();}}_d._setCellControlProperty(this,_h);var _j=this._control_element;if(_j){if(!_c&&this._isUpdateArea()==false){return false;}var _k=_e?!!_e.readonly:false;if(this._is_use_auto_selected_status){this._changeUserStatus("selected",this._isSelectedColor());}if(_d._blinked_status[_h]){this._changeUserStatus("blinked",true);}else{this._changeUserStatus("blinked",false);}this._changeStatus("readonly",_k);this._disp_show=this._updateDisplayer();if(!_b&&_a){this._changeStatus(_a,true);}this._displaytext=this._getDisplayText();this.on_apply_text();this.on_apply_textDecoration();var _l=this._subComp;if(_l){_l._updateAll(true,_k);}if(this._expandCtrl){this._expandCtrl._updateAll(true,_k);}this.on_apply_prop_tooltip();if(nexacro._enableaccessibility){this.on_apply_accessibility();}}return true;};_pCellControl._updateAll=function(_a,_b,_c){if(this.__update(_a,_b,_c)){var _d=this._control_element;if(_d){var _e=this._getRemoveLine();var _f,_g,_h,_i;_f=_e[0];_g=_e[1];_h=_e[2];_i=_e[3];if(this.subcells.length>0){for(var _j=0,_k=this.subcells.length;_j<_k;_j++ ){this.subcells[_j]._updateAll();}}else{if(this._disp_show&&this._hideInner){this._showInnerElement();}}if(!_b){this._control_element.setElementBorderNone(_f,_g,_h,_i);}if(_d._mode=="text"){this._changeClientmode("text");}}}};_pCellControl.on_apply_border=function(_a){nexacro.Component.prototype.on_apply_border.call(this,_a);var _b=this._control_element;if(_b){_b._refreshBorderNone();}};_pCellControl._updateAllEx=function(_a){if(!this._is_alive){return false;}var _b=this._refinfo;var _c=this._view;var _d=false;if(this.parent._rowidx>=0){if(this._rowidx!=this.parent._rowidx){var _e=this._rowidx;this._rowidx=this.parent._rowidx;if((this._rowidx%2)!=(_e%2)){_d=true;}}}var _f=this._getDataRow();var _g=_b._getAttrValue(_b.cssclass,_f);if(this.cssclass!=_g){this.set_cssclass(_g);}else{if(_d){this.on_apply_cssclass();}}_b._setCellControlPropertyForAutosize(this,_f,_a);var _h=this._control_element;if(_h){var _i=_c?!!_c.readonly:false;if(this._is_use_auto_selected_status){this._changeUserStatus("selected",this._isSelectedColor());}this._changeStatus("readonly",_i);this._disp_show=this._updateDisplayer();this._displaytext=this._getDisplayText();this.on_apply_text();this.on_apply_textDecoration();var _j=this._subComp;if(_j){_j._updateAll(true,_i);}if(this._expandCtrl){this._expandCtrl._updateAll(true,_i);}var _k=this._getRemoveLine();var _l,_m,_n,_o;_l=_k[0];_m=_k[1];_n=_k[2];_o=_k[3];this._control_element.setElementBorderNone(_l,_m,_n,_o);}return true;};_pCellControl.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(this._subComp){this._subComp.on_apply_accessibility();}};_pCellControl.on_apply_prop_cssclass=function(){if(this._editor){this._editor.on_apply_cssclass();}if(this._subComp){this._subComp.on_apply_cssclass();}if(this._expandCtrl){this._expandCtrl.on_apply_cssclass();}};_pCellControl.on_apply_cursor=function(_a){nexacro.Component.prototype.on_apply_cursor.call(this,_a);if(this._subComp){this._subComp.set_cursor(_a);}};_pCellControl._getAvailableRect=function(){var _a={left:0,top:0,right:0,bottom:0,width:0,height:0};_a.left=this._getClientLeft();_a.top=this._getClientTop();_a.right=this._getClientLeft()+this._getClientWidth();_a.bottom=this._getClientTop()+this._getClientHeight();_a.width=this._getClientWidth();_a.height=this._getClientHeight();var _b=this._expandCtrl;if(_b&&_b.visible){_a.width-=_b.width;_a.right-=_b.width;}return _a;};_pCellControl._changeClientmode=function(_a){var _b=this._control_element;if(_b){var _c=this._getCurrentStylePadding();if(this._refinfo._subcells.length){_a="normal";}else if(_a=="expand"){if(this._client_mode!="normal"){_a="expandtext";}else{_a="normal";}}else if(_a=="text"){if(this._expandCtrl){_a="expandtext";}else{if(_c){_a=(_c.right>0||_c.bottom>0)?"expandtext":"text";}}}if(_a=="text"||_a=="expandtext"){if(!this._text_elem){this._text_elem=new nexacro.TextBoxElement(_b,"text");}}else{if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}}this._updateAvailableArea(true);this._client_mode=_a;}};_pCellControl._createExpandDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._refinfo;var _c=this._getDataRow();var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();this._expand_width=_b._getAttrValue(_b.expandsize,_c);var _f=this._adjust_width-this._expand_width-((_d)?_d.right._width:0)-((_e)?_e.right:0);var _g=this._getClientTop();var _h=_f+this._expand_width;var _i=_g+this._getClientHeight();if(_f<0){_f=this._getClientLeft();_h=_f+this._getClientWidth();}var _j=this._expandCtrl=new nexacro[this._cellExpandObj](this,_f,_g,_h,_i);_j.createComponent();}};_pCellControl._createTextDisplayer=function(){var _a=this._control_element;if(_a){this._changeClientmode("text");var _b=this._text_elem;if(_b){if(!this._is_created){this._displaytext=this._getDisplayText();this.on_apply_text();}else{_b.create(this._getWindow());}this.on_apply_textDecoration();this.on_apply_wordWrap();}}};_pCellControl._createButtonDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellButtonObj]("cellbutton",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);var _d=this._getDataRow();var _e=this._refinfo._getWordwrap(_d);_c.set_wordWrap(_e);this._subComp=_c;}};_pCellControl._createCheckboxDisplayer=function(){var _a=this._control_element;if(_a){this._changeClientmode("normal");var _b=new nexacro[this._cellCheckBoxObj]("cellcheckbox",0,0,0,0,this,true);_b.createComponent(true);_b._skip_mobile_tabfocus=true;this._subComp=_b;}};_pCellControl._createImageDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellImageObj]("cellimage",_b.left,_b.top,_b.width,_b.height,this);_c.createComponent(true);this._subComp=_c;}};_pCellControl._createComboDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellComboObj]("cellcombo",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c.comboedit._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createCalendarDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellCalendarObj]("cellcalendar",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c.calendaredit._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createEditDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellEditObj]("celledit",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createMaskEditDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellMaskEditObj]("cellmaskedit",_b.left,_b.top,_b.width,_b.height,this,true,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createTextAreaDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellTextAreaObj]("celltextarea",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;var _d=this._getDataRow();var _e=this._refinfo._getWordwrap(_d);_c.set_wordWrap(_e);this._subComp=_c;}};_pCellControl._createBarDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellProgressBarObj]("cellprogressbar",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);this._subComp=_c;}};_pCellControl._createTreeDisplayer=function(_a,_b){var _c=this._control_element;if(_c){var _d=this._getControlRect();var _e=_d.left;var _f=_d.top;var _g=_d.width;var _h=_d.height;this._changeClientmode("normal");var _i=this._subComp=new nexacro[this._cellTreeObj]("celltreeitem",_e,_f,_g,_h,null,null,this);_i.createComponent(true);this._subComp=_i;}};_pCellControl._updateAvailableArea=function(_a){var _b=this._getAvailableRect();var _c=this._subComp;var _d=_b.left;var _e=_b.top;var _f=_b.width;var _g=_b.height;if(!_a){if(this._avail_left==_d&&this._avail_top==_e&&this._avail_width==_f&&this._avail_height==_g){return false;}}if(_c){if(this._curDisplayType=="checkboxcontrol"){this.on_apply_checkboxAlign("center","middle");}else{var _h=this._getControlRect();_c.move(_h.left,_h.top,_h.width,_h.height);}}if(this._text_elem){this._text_elem.setElementPosition(_d,_e);this._text_elem.setElementSize(_f,_g);}if(this._editor&&this._isConditionEditor()){this._editor.move(_d,_e,_f,_g);}var _i=this._expandCtrl;if(_i){var _j=this._getClientWidth()+this._getClientLeft()-this._expand_width;var _k=_b.top;var _l=this._expand_width;var _m=_b.height;if(_j<0){_j=_b.left;_l=this._getClientWidth();}_i.move(_j,_k,_l,_m);}this._avail_left=_b.left;this._avail_top=_b.top;this._avail_width=_b.width;this._avail_height=_b.height;return true;};_pCellControl._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellControl._getDisplayText=function(){if(this._refinfo){var _a=this._getDataRow();return this._refinfo._getDisplayText(_a);}return "";};_pCellControl._isDisplayDataType=function(_a){if(_a=="number"||_a=="exponent"||_a=="currency"||_a=="normal"||_a=="text"||_a=="decoratetext"||_a=="mask"||_a=="combotext"||_a=="date"){return true;}return false;};_pCellControl._updateEditor=function(){var _a=this._text_elem;var _b=this._editor;if(_b){if(this._isConditionEditor()){if(_a){_a.setElementVisible(false);}if(this._subComp){this._subComp.set_visible(false);}var _c=this._getControlRect();_b.move(_c.left,_c.top,_c.width,_c.height);}else{if(_a){_a.setElementVisible(true);}if(this._subComp){this._subComp.set_visible(true);}_b.move( -10, -10,0,0);}}};_pCellControl._isConditionEditor=function(){return true;};_pCellControl._getAutoEnter=function(){return this._view.autoenter;};_pCellControl._getAutoUpdateType=function(){return this._view.autoupdatetype;};_pCellControl._showEditor=function(){if(this._isShowEditor()){return;}var _a=this._text_elem;var _b;var _c=this._view;if(_a){_a.setElementVisible(false);}if(this._subComp){this._subComp._changeStatus("mouseover",false);if(nexacro._isTouchInteraction){nexacro._OnceCallbackTimer.callonce(this,function(){this._subComp.set_visible(false);});}else{this._subComp.set_visible(false);}}_b=this._createEditor();_b._EditUpdateAll();_b.set_visible(true);_b._setFocus(false);if(_b.setCaretPos&&!_b.autoselect){_b.setCaretPos(0);}else if(_b.comboedit&&_b.comboedit.setCaretPos){_b.comboedit.setCaretPos(0);}if(nexacro._isTouchInteraction||(_c&&_c.selectchangetype=="up")){_b._setFocus(false);}if(_c&&_c.autoenter=="select"&&_c._lbuttondown_proc){_b._user_push=true;_b._changeStatus("focused",true);_b._is_pushed_area=true;_b._is_push=true;}else{_b._changeStatus("focused",true);}this._editor=_b;};_pCellControl._hideEditor=function(){var _a=this._text_elem;if(!this._hideInner){if(_a){_a.setElementVisible(true);}if(this._subComp){this._subComp.set_visible(true);}}var _b;if(this._editor){_b=this._editor._getValueData();this._destroyEditor();}return _b;};_pCellControl._hasEditor=function(){return this._refinfo._hasEditor(this._getDataRow());};_pCellControl._destroyEditor=function(){var _a=false;var _b=this._getWindow();if(_b){_a=!(_b._indexOfCurrentFocusPaths(this)> -1);}if(this._editor){if(this._tempdestroyeditor){if(!this._tempdestroyeditor_list){this._tempdestroyeditor_list=[];}this._tempdestroyeditor_list.push(this._tempdestroyeditor);nexacro._OnceCallbackTimer.callonce(this,function(){var _e=this._tempdestroyeditor_list.pop();_e.destroy();});}var _c=this._tempdestroyeditor=this._editor;_c.set_visible(false);if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){var _d=_c.getElement();if(_d){_d.setElementDisplay("none");}}if(nexacro._Browser=="Safari"){nexacro._OnceCallbackTimer.callonce(_c,function(){_c.set_visible(false);});}else{if(this._control_element&&!_a){this._control_element.setElementFocus();}}this._editor=null;}else if(this._tempdestroyeditor&&nexacro._Browser=="Runtime"&&nexacro._OS=="Windows"){var _c=this._tempdestroyeditor;_c.set_visible(false);this._tempdestroyeditor.destroy();this._tempdestroyeditor=null;}};_pCellControl._getFormatSize=function(){return null;};_pCellControl._getControlRect=function(){var _a=this._getAvailableRect();var _b=this._getFormatSize();var _c=this._refinfo;var _d=_c._getAttrValue(_c.controlautosizingtype,this._getDataRow());if(_b!=null){var _e=_a.left,_f=_a.top;var _g,_h,_i,_j;var _k=this._getCurrentStyleBorder();var _l=this._getCurrentStylePadding();var _m=_b[0]-(_k?_k.left._width+_k.right._width:0)-(_l?_l.left+_l.right:0);var _n=_b[1]-(_k?_k.top._width+_k.bottom._width:0)-(_l?_l.top+_l.bottom:0);if(_d=="none"){_g=_m;if(_g<_a.width){_e+=(_a.width-_g)/2;}_i=_e+_g;_h=_n;if(_h<_a.height){_f+=(_a.height-_h)/2;}_j=_f+_h;_a.left=_e;_a.top=_f;_a.width=_g;_a.height=_h;_a.right=_i;_a.bottom=_j;}else if(_d=="width"){_h=_n;if(_h<_a.height){_f+=(_a.height-_h)/2;}_j=_f+_h;_a.top=_f;_a.height=_h;_a.bottom=_j;}else if(_d=="height"){_g=_m;if(_g<_a.width){_e+=(_a.width-_g)/2;}_i=_e+_g;_a.left=_e;_a.width=_g;_a.right=_i;}}return _a;};_pCellControl._createidx=0;_pCellControl._createEditor=function(){var _a=this._refinfo;var _b=this._getDataRow();var _c=_a._getEdittype(_b);var _d=this["_createEditor_"+_c];if(_d==null){_d=this._createEditor_text;}this._destroyEditor();this._editor=_d.call(this);this._editor._update_datarow=this._getDataRow();this._createidx++ ;return this._editor;};_pCellControl._createEditor_text=function(){var _a=this._getDataRow();var _b=this._getControlRect();var _c=this._refinfo;var _d=new nexacro[this._cellEditObj]("celledit"+this._createidx,_b.left,_b.top,_b.width,_b.height,this);var _e=_c._getValue(_a);var _f=_c._getAttrValue(_c.editmaxlength,_a);var _g=this._getBindDataset();if(_f==0){_f=_g?_g._getColumnSize(_c.text._bindtype==1?_c.text._bindexpr:0):0;}_d.set_maxlength(_f);_d.set_value(_e);_d.createComponent();this._writable=true;return _d;};_pCellControl._createEditor_mask=function(){var _a=this._getControlRect();var _b=this._refinfo;var _c=new nexacro[this._cellMaskEditObj]("cellmaskedit"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);var _d=this._getDataRow();var _e=_b._getValue(_d);var _f=_b._getLocale(_d);var _g=_b._getAttrValue(_b.maskeditformat,_d);var _h=_b._getAttrValue(_b.maskedittype,_d);_c.set_type(_h);if(_g){_c.set_format(_g);}_c.set_locale(_f);_c.set_value(_e);_c.createComponent();this._writable=true;return _c;};_pCellControl._createEditor_combo=function(){var _a=this._getControlRect();var _b=new nexacro[this._cellComboObj]("cellcombo"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);_b.createComponent();_b._child_editor=_b.comboedit;this._writable=true;return _b;};_pCellControl._createEditor_date=function(){var _a=this._getDataRow();var _b=this._getControlRect();var _c=this._refinfo;var _d=new nexacro[this._cellCalendarObj]("cellcalendar"+this._createidx,_b.left,_b.top,_b.width,_b.height,this);var _e=_c._getValue(_a);var _f=_c._getAttrValue(_c.calendarpopuptype,_a);var _g=_c._getAttrValue(_c.calendardateformat,_a);var _h=_c._getAttrValue(_c.calendareditformat,_a);var _i=_c._getLocale(_a);if(this._displaymode==true&&!_e){_e=_c._getDisplayText(_a);}_d.createComponent();_d._child_editor=_d.calendaredit;_d._is_value_changed=false;if(!_g){_g=nexacro.Calendar.prototype.dateformat;}if(!_h){_h=nexacro.Calendar.prototype.editformat;}_d.set_popuptype(_f);_d.set_dateformat(_g);_d.set_editformat(_h);_d.set_locale(_i);_d.set_value(_e);_d._recalcLayout();this._writable=true;return _d;};_pCellControl._createEditor_textarea=function(_a){var _b=this._getDataRow();var _c=this._getControlRect();var _d=this._refinfo;var _e=new nexacro[this._cellTextAreaObj]("celltextarea"+this._createidx,_c.left,_c.top,_c.width,_c.height,this);var _f;if(_e._displaymode==true||_a){_f=_d._getDisplayText(_b);}else{_f=_d._getValue(_b);}var _g=_d._getWordwrap(_b);var _h=_d._getAttrValue(_d.textareamaxlength,_b);var _i=this._getBindDataset();var _j=_d._getAttrValue(_d.textareascrollbartype,_b);var _k=_d._getAttrValue(_d.textareascrolltype,_b);if(_h==0){_h=_i?_i._getColumnSize(_d._col):0;}_e.set_maxlength(_h);_e.set_wordWrap(_g);_e.set_value(_f);_e.set_scrollbartype(_j);_e.set_scrolltype(_k);_e.createComponent();if(_a){_e.set_readonly(true);}this._writable=!_a;return _e;};_pCellControl._createEditor_readonly=function(){return this._createEditor_textarea(true);};_pCellControl._createEditor_button=function(){var _a=this._getControlRect();var _b=new nexacro[this._cellButtonObj]("cellbutton"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);_b.createComponent();if(nexacro._Browser=="IE"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="Edge")){if(!nexacro._enableaccessibility){nexacro._OnceCallbackTimer.callonce(this,function(){_b._control_element.setElementFocus();},0);}}this._writable=false;return _b;};_pCellControl._setSubControlFocus=function(_a){var _b=this;var _c=this._subComp;var _d=this._view;if(_b._refinfo._getEdittype(_b._getDataRow())=="checkbox"&&(_c&&_c._is_alive)){if(_a){if(nexacro._isTouchInteraction||(_d.selectchangetype&&_d.selectchangetype=="up")){_c._apply_setfocus("touch");}_c._changeStatus("focused",true);if(nexacro._enableaccessibility){_c._setFocus(false);}if(_d){_d._FocuedCell=_b;}}else{_c._changeStatus("focused",false);if(_d){_d._FocuedCell=null;}}}};_pCellControl._getAccessibilityLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityLabel.call(this);if(!_b&&this.subcells.length>0){var _c=this.subcells;var _d;for(var _f=0,_g=_c.length;_f<_g;_f++ ){if(_d=_c[_f]._getDisplayText()){if(_b){_b=_b+" "+_d;}else{_b=_d;}}}}if((nexacro._accessibilitytype==4||nexacro._accessibilitytype==5)&&!_a){var _e=this._getAccessibilityMakeAddLabel();_b=_e+" "+_b;}return _b;};_pCellControl._isEditable=function(){if(this._editor){return (this._editor.visible&&this._editor._adjust_width>0);}return false;};_pCellControl._setAccessibilityStatFocus=function(){if(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5){return;}var _a=this._refinfo._getAttrValue(this._refinfo.accessibilitylabel,this._getDataRow());this.set_accessibilitylabel(_a);this.on_apply_accessibility();this.on_apply_prop_accessibilitydescription();this.on_apply_prop_accessibilityaction();var _b="";_b=this._getAccessibilityMakeAddLabel()+" "+this._getCellAccessibilityLabel();this._setAccessibilityStatSelected(this.selected);_b=_b.trim();this._setAccessibilityLabel(_b);if(this._editor&&this._editor.visible&&this._editor._adjust_width>0){this._editor._setAccessibilityStatFocus();}else if(this._subComp&&this._curDisplayType!="treeitemcontrol"){this._subComp._setAccessibilityStatFocus();}else{nexacro.Component.prototype._setAccessibilityStatFocus.call(this);}};_pCellControl._getCellAccessibilityLabel=function(){var _a="";_a=this._getAccessibilityLabel();if(this._subComp){var _b=this._subComp;var _c=this._curDisplayType;if(_c=="checkboxcontrol"){this._setAccessibilityStatChecked(_b.isChecked());}else if(_c=="treeitemcontrol"){var _d=this._getDataRow();var _e=this._refinfo;var _f=this._getTreeStatus();var _g=_e._getTreeLevel(_d);var _h=_e._getTreeStartLevel(_d);switch(_f){case 0:this._setAccessibilityStatExpanded(false);break;case 1:this._setAccessibilityStatExpanded(true);break;default:this._setAccessibilityStatExpanded(undefined);}this._setAccessibilityInfoLevel(_g-_h+1);}}return _a;};_pCellControl._getTreeStatus=function(){};_pCellControl.__getAccessibilityMakeAddLabelMiddleClass=function(){return "";};_pCellControl._getAccessibilityMakeAddLabel=function(){var _a="",_b=this._view;var _c=this._getDescLevel();if(_c=="none"||_c=="child"){return "";}if(_b._is_first_focus&&_b._control_element){_a=_b._getAccessibilityLabel();}_a+=this.__getAccessibilityMakeAddLabelMiddleClass();return _a;};_pCellControl._getAccessibilityRoleParentType=function(){};_pCellControl._getAccessibilityRole=function(){var _a=this.accessibilityrole;if(_a=="gridcell"){var _b=this._getAccessibilityRoleParentType();if(_b){_a=_b;}if(this._curDisplayType=="treeitemcontrol"){_a="treeitem";}else if(this._subComp){_a=this._subComp._getAccessibilityRole();}}return _a;};_pCellControl.on_get_accessibility_label=function(){var _a=false;if(this._refinfo){var _b=this._refinfo.displaytype;if(_b=="checkboxcontrol"){return "";}_a=(_b=="decoratetext"?true:false);}var _c=this._getDisplayText();if(_a){return nexacro._getDisplayTextfromDecorateText(_c);}return _c;};_pCellControl._setAccessibilityNotifyEvent=function(_a){var _b=this._getCellAccessibilityLabel();_b=_b.trim();this._setAccessibilityLabel(_b);return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,(_a&&_a>0)?0:1);};_pCellControl._getComputedStyleWithProp=function(_a){var _b;if(_a=="background"){_b=this._control_element._getComputedStyleBackgroundColor();}else if(_a=="textAlign"||_a=="verticalAlign"){var _c=this._getCurrentStyleAlign();_b=_c[_a];}else if(_a=="font"||_a=="color"||_a=="wordSpacing"||_a=="letterSpacing"){_b=this._getCurrentStyleInheritValue(_a,"enabled");}else if(_a=="border"){_b=this._getCurrentStyleBorder();}else if(_a=="textDecoration"||_a=="borderRadius"||_a=="cursor"||_a=="opacity"){if(_a=="textDecoration"){_a="-nexa-text-decoration";}if(_a=="borderRadius"){_a="border-radius";}_b=nexacro._getStyleProperty(this,_a);}else{_b=this._getCSSStyleValue(_a,"enabled");}return _b;};_pCellControl._getComputedStyle=function(_a){var _b={"styles":{},"subcomp":{"styles":null}};var _c=this._computed_prop_list;var _d;for(var _e=0,_f=_c.length;_e<_f;_e++ ){_d=_c[_e];_b.styles[_d]=this._getComputedStyleWithProp(_d);}if(_a&&this._subComp){_b.subcomp=this._subComp._getComputedStyle();}return _b;};_pCellControl._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this._subComp;for(var _g=0;_g<_b.length;_g++ ){var _d=_b[_g];var _e="set_"+_d;if(_a.styles){var _f=_a.styles[_d];_f=_f&&_f.value?_f.value:_f;if(this[_e]){this[_e].call(this,_f);}}}if(_c){_c._setComputedStyle(_a.subcomp);}};_pCellControl.on_apply_padding=function(_a){var _b=this._control_element;if(_b){this._updateAvailableArea();}};_pCellControl.on_apply_prop_enable=function(_a){if(_a==null){_a=this._isEnable();}nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._subComp){this._subComp._setEnable(_a);}var _b=this.subcells;var _c=_b?_b.length:0;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pCellControl.on_apply_prop_rtl=function(){if(this._is_created){return;}var _a=this.rtl=this._refinfo._getAttrValue(this._refinfo.rtl,this._getDataRow());this._rtl=nexacro._isBoolean(_a)?nexacro._toBoolean(_a):undefined;nexacro.Component.prototype.on_apply_prop_rtl.call(this);if(this._subComp){this._subComp.set_rtl(this.rtl);}};_pCellControl._getPositionInRootComponent=nexacro._emptyFn;nexacro._CellExpandControl=function(_a,_b,_c,_d,_e,_f){nexacro.Button.call(this,"cellexpandbutton",_b,_c,_d-_b,_e-_c,null,null,null,null,null,null,_a);this._controlmode=(_f)?true:false;this._view=_a._view;this._cellobj=_a;this._cellinfo=_a._refinfo;this._setControl();};var _pCellExpand=nexacro._createPrototype(nexacro.Button,nexacro._CellExpandControl);nexacro._CellExpandControl.prototype=_pCellExpand;_pCellExpand._is_subcontrol=true;_pCellExpand.on_destroy_contents=function(){nexacro.Button.prototype.on_destroy_contents.call(this);this._view=null;this._cellobj=null;this._cellinfo=null;};_pCellExpand._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellExpand._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;var _c=this._control_element;if(_c){if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}var _d=this._cellobj._getDataRow();if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._cellinfo){var _e=this._cellinfo._getAttrValue(this._cellinfo.expandimage,_d);if(_e){this.set_icon(_e);}var _f=this._cellinfo._getAttrValue(this._cellinfo.expandchar,_d);this.set_text(_f);}}};_pCellExpand._setAlign=function(_a,_b){var _c=this._text_elem;if(_c){if(_a){this.set_textAlign(_a);}if(_b){this.set_verticalAlign(_b);}}};_pCellExpand.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"expandbutton");};_pCellExpand.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"expandbutton");};_pCellExpand._setAccessibilityStatFocus=function(){var _a=this._cellobj;this._control_element.setElementAccessibilityLabel(_a._getAccessibilityLabel());this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());nexacro.Button.prototype._setAccessibilityStatFocus.call(this);};_pCellExpand.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellExpand.on_get_accessibility_label=function(){return this.text;};nexacro._CellButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Button.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this.tabstop=false;this._clickevt_able=true;this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellButton=nexacro._createPrototype(nexacro.Button,nexacro._CellButtonControl);nexacro._CellButtonControl.prototype=_pCellButton;_pCellButton._is_subcontrol=true;_pCellButton.on_getIDCSSSelector=function(){return "cellbutton";};_pCellButton.on_destroy_contents=function(){nexacro.Button.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellButton._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){nexacro.Button.prototype._apply_setfocus.call(this,_a);}};_pCellButton._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellButton.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Button.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellButton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Button.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellButton._EditUpdateAll=function(){if(this._control_element){this._updateAll();var _a=this._cellobj._getDataRow();var _b=this._cellinfo._getWordwrap(_a);this.set_wordWrap(_b);}};_pCellButton._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(_a){return;}var _e;if(this._displaymode==true){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d,!this._writable);}if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pCellButton._getValueData=function(){};_pCellButton._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellButton._setAccessibilityStatFocus=function(){var _a=this._cellobj;this._control_element.setElementAccessibilityLabel(_a._getAccessibilityLabel());this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellButton.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellButton.on_get_accessibility_label=function(){return this.text;};_pCellButton._getAccessibilityRole=function(){return this._cellobj?this._cellobj.accessibilityrole:this.accessibilityrole?this.accessibilityrole:"none";};_pCellButton._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);return ctrl_cs;};_pCellButton._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellButton._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellProgressBarControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro.ProgressBar.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this.tabstop=false;this.max=100;this.min=0;this.step=1;this._controlmode=(_g)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellBar=nexacro._CellProgressBarControl.prototype=nexacro._createPrototype(nexacro.ProgressBar,nexacro._CellProgressBarControl);_pCellBar._is_subcontrol=true;_pCellBar._apply_dblclick_event=function(){var _a=this._progressbaritems;if(_a){for(var _b=0;_b<_a.length;_b++ ){_a[_b].on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._ProgressBarItemControl.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}}if(this.progressstartcap){this.progressstartcap.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._Icon.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}if(this.progressendcap){this.progressendcap.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._Icon.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}if(this._progressbartext){this._progressbartext.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.Static.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}};_pCellBar.set_pos=function(_a){nexacro.ProgressBar.prototype.set_pos.call(this,_a);this._apply_dblclick_event();};_pCellBar.on_destroy_contents=function(){nexacro.ProgressBar.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellBar.set_text=function(_a){var _b=nexacro.Component.prototype.set_text.call(this,_a);var _c=parseInt(this._displaytext);_c=isNaN(_c)?0:_c;this.set_pos(_c);return _b;};_pCellBar._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellBar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellBar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellBar._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pCellBar._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellBar._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("progressbar",this,_d);if(_a){return;}var _e=_b._getDisplayText(_d);if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pCellBar._setAccessibilityStatFocus=function(){var _a=this._cellobj;this._control_element.setElementAccessibilityLabel(_a._getAccessibilityLabel());this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellBar.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellBar._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null,"progressbaritem":{styles:null},"progressbartext":{styles:null},"progressstartcap":{styles:null},"progressendcap":{styles:null}};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);if(this.progressbaritem){str=nexacro._getComputedStyleProperties(this.progressbaritem._control_element,properties,null,true);eval("ctrl_cs.progressbaritem.styles = "+str);}if(this.progressbartext){str=nexacro._getComputedStyleProperties(this.progressbartext._control_element,properties,null,true);eval("ctrl_cs.progressbartext.styles = "+str);}if(this.progressstartcap){str=nexacro._getComputedStyleProperties(this.progressstartcap._control_element,properties,null,true);eval("ctrl_cs.progressstartcap.styles = "+str);}if(this.progressendcap){str=nexacro._getComputedStyleProperties(this.progressendcap._control_element,properties,null,true);eval("ctrl_cs.progressendcap.styles = "+str);}return ctrl_cs;};_pCellBar._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.progressbaritem;var _d=this.progressbartext;var _e=this.progressstartcap;var _f=this.progressendcap;for(var _i=0;_i<_b.length;_i++ ){var _g=_b[_i];var _h="set_"+_g;if(_a.styles){if(this[_h]){this[_h].call(this,_a.styles[_g]);}}if(_c){if(_a.progressbaritem.styles){if(_c[_h]){_c[_h].call(_c,_a.progressbaritem.styles[_g]);}}}if(_d){if(_a.progressbartext.styles){if(_d[_h]){_d[_h].call(_d,_a.progressbartext.styles[_g]);}}}if(_e){if(_a.progressstartcap.styles){if(_e[_h]){_e[_h].call(_e,_a.progressstartcap.styles[_g]);}}}if(_f){if(_a.progressendcap.styles){if(_f[_h]){_f[_h].call(_f,_a.progressendcap.styles[_g]);}}}}};_pCellBar._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Edit.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this.tabstop=false;if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellEdit=nexacro._createPrototype(nexacro.Edit,nexacro._CellEditControl);nexacro._CellEditControl.prototype=_pCellEdit;_pCellEdit._is_subcontrol=true;_pCellEdit.on_getIDCSSSelector=function(){return "celledit";};_pCellEdit.on_destroy_contents=function(){nexacro.Edit.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellEdit._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _d=this._getWindow();if(!_d||!_d._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}return nexacro.Edit.prototype._apply_setfocus.call(this,_a,_b);};_pCellEdit.setOnlyElementFocus=function(){if(this._input_element){this._input_element._applyElementFocus();}};_pCellEdit.on_fire_oninput=function(){nexacro.Edit.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput();};_pCellEdit.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){nexacro.Edit.prototype.on_fire_onimeaction.call(this,_a,_b,_c,_d,_e,_f,_g);return this._cellobj.on_fire_onimeaction(_a,_b,_c,_d,_e,_f,_g);};_pCellEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Edit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Edit.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellEdit.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellEdit._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellEdit._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellEdit._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("edit",this,_d);if(this._view){this.set_usesoftkeyboard(this._view.usesoftkeyboard);}if(_a){return;}var _e;if(this._displaymode==true){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d);}this.set_value(_e);};_pCellEdit._setEditingValue=function(_a){return this.set_value(_a);};_pCellEdit._EditUpdateAll=function(){this._updateAll();};_pCellEdit._getEditingText=function(){return this.text;};_pCellEdit._getEditingValue=function(){return this.value;};_pCellEdit._getValueData=function(){return this.value;};_pCellEdit._setAccessibilityStatFocus=function(){var _a=this._cellobj;if(_a){var _b="";_b=(_b=_a._getLinkedLabel(_a.accessibilitylabel))?_b:"";this._control_element.setElementAccessibilityLabel(_b);this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());}nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellEdit.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellEdit._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);return ctrl_cs;};_pCellEdit._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellEdit._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellTextAreaControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.TextArea.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this.tabstop=false;if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellTextArea=nexacro._createPrototype(nexacro.TextArea,nexacro._CellTextAreaControl);nexacro._CellTextAreaControl.prototype=_pCellTextArea;_pCellTextArea._is_subcontrol=true;_pCellTextArea.on_getIDCSSSelector=function(){return "celltextarea";};_pCellTextArea.on_destroy_contents=function(){nexacro.TextArea.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellTextArea._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _d=this._getWindow();if(!_d||!_d._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}return nexacro.TextArea.prototype._apply_setfocus.call(this,_a,_b);};_pCellTextArea.setOnlyElementFocus=_pCellEdit.setOnlyElementFocus;_pCellTextArea.on_fire_oninput=function(){nexacro.TextArea.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput();};_pCellTextArea.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.TextArea.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellTextArea.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.TextArea.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellTextArea.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){nexacro.TextArea.prototype.on_keydown_basic_action.call(this,_a,_b,_c,_d,_e,_f);var _g=this._cellinfo;var _h=this._cellobj;var _i=_h._getDataRow();var _j=_g._getAttrValue(_g.textareaacceptsenter,_i);_j=nexacro._toBoolean(_j);if(_a==nexacro.Event.KEY_ENTER){if((_j&&(!_c&&!_b))||(!_j&&(_c||_b))){var _k=this._input_element;var _l=this.getCaretPos();var _m=this.text;var _n=_m.split("");_n.splice(_l,0,"\n");var _o=_n.join("");var _p=_l+"\n".length;if(_k&&(this.maxlength==0||_o.length<=this.maxlength)){nexacro._OnceCallbackTimer.callonce(this,function(){_k.updateElementText(_o,_p);if(this.scrollbartype=="none"&&(this.scrolltype=="both"||this.scrolltype=="vertical")){var _q=nexacro._getTextSize("A",this._getCurrentStyleInheritValue("font"),false,undefined,"none",this._getCurrentStyleInheritValue("wordSpacing"),this._getCurrentStyleInheritValue("letterSpacing"));var _r=this._getCaretLine();var _s=this.getElement();var _t=_s.getClientHeight();var _u=(_q[1]* _r)-_t;if(_u>0){_k.setElementVScrollPos(_u);var _v=_u+(_q[1]-(_u%_q[1]));_k.setElementVScrollPos(_v);}}},0);_k.stopSysEvent();}}}};_pCellTextArea.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellTextArea._isEnable=_pCellEdit._isEnable;_pCellTextArea._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellTextArea._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();var _e;if(!_a){if(this._displaymode==true||this.readonly){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d);}this.set_value(_e);}_b._setCellChildControlProperty("textarea",this,_d);if(this._displaymode==true){this.set_scrollbartype("none");}else{_e=_b._getAttrValue(_b.textareascrollbartype,_d);if(_e!=null){this.set_scrollbartype(_e);}else{this.set_scrollbartype("none");}}_e=_b._getAttrValue(_b.textareascrolltype,_d);if(_e!=null){this.set_scrolltype(_e);}else{this.set_scrolltype("none");}_e=_b._getControlScrollbarsize(_d,"textarea");if(_e!=null){this.set_scrollbarsize(_e);}if(this._view){this.set_usesoftkeyboard(this._view.usesoftkeyboard);}};_pCellTextArea._setEditingValue=function(_a){return this.set_value(_a);};_pCellTextArea._EditUpdateAll=function(){if(this._control_element){var _a=this._cellobj._getDataRow();this._updateAll();var _b=this._cellinfo._getWordwrap(_a);this.set_wordWrap(_b);}};_pCellTextArea._getEditingText=function(){return this.text;};_pCellTextArea._getEditingValue=function(){return this.value;};_pCellTextArea._getValueData=function(){return this.value;};_pCellTextArea._setAccessibilityStatFocus=function(){var _a=this._cellobj;if(_a){var _b="";_b=(_b=_a._getLinkedLabel(_a.accessibilitylabel))?_b:"";this._control_element.setElementAccessibilityLabel(_b);this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());}nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellTextArea.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellTextArea._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null,"hscrollbar":{styles:null,"decbutton":{styles:null},"incbutton":{styles:null},"trackbar":{styles:null}},"vscrollbar":{styles:null,"decbutton":{styles:null},"incbutton":{styles:null},"trackbar":{styles:null}}};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);if(this.hscrollbar){str=nexacro._getComputedStyleProperties(this.hscrollbar._control_element,properties,null,true);eval("ctrl_cs.hscrollbar.styles = "+str);str=nexacro._getComputedStyleProperties(this.hscrollbar.decbutton._control_element,properties,null,true);eval("ctrl_cs.hscrollbar.decbutton.styles = "+str);str=nexacro._getComputedStyleProperties(this.hscrollbar.incbutton._control_element,properties,null,true);eval("ctrl_cs.hscrollbar.incbutton.styles = "+str);str=nexacro._getComputedStyleProperties(this.hscrollbar.trackbar._control_element,properties,null,true);eval("ctrl_cs.hscrollbar.trackbar.styles = "+str);}if(this.vscrollbar){str=nexacro._getComputedStyleProperties(this.vscrollbar._control_element,properties,null,true);eval("ctrl_cs.vscrollbar.styles = "+str);str=nexacro._getComputedStyleProperties(this.vscrollbar.decbutton._control_element,properties,null,true);eval("ctrl_cs.vscrollbar.decbutton.styles = "+str);str=nexacro._getComputedStyleProperties(this.vscrollbar.incbutton._control_element,properties,null,true);eval("ctrl_cs.vscrollbar.incbutton.styles = "+str);str=nexacro._getComputedStyleProperties(this.vscrollbar.trackbar._control_element,properties,null,true);eval("ctrl_cs.vscrollbar.trackbar.styles = "+str);}return ctrl_cs;};_pCellTextArea._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.hscrollbar;var _d=this.vscrollbar;for(var _g=0;_g<_b.length;_g++ ){var _e=_b[_g];var _f="set_"+_e;if(_a.styles){if(this[_f]){this[_f].call(this,_a.styles[_e]);}}if(_c){if(_a.hscrollbar.styles){if(_c[_f]){_c[_f].call(_c,_a.hscrollbar.styles[_e]);}}if(_a.hscrollbar.decbutton.styles){if(_c.decbutton[_f]){_c.decbutton[_f].call(_c.decbutton,_a.hscrollbar.decbutton.styles[_e]);}}if(_a.hscrollbar.incbutton.styles){if(_c.incbutton[_f]){_c.incbutton[_f].call(_c.incbutton,_a.hscrollbar.incbutton.styles[_e]);}}if(_a.hscrollbar.trackbar.styles){if(_c.trackbar[_f]){_c.trackbar[_f].call(_c.trackbar,_a.hscrollbar.trackbar.styles[_e]);}}}if(_d){if(_a.vscrollbar.styles){if(_d[_f]){_d[_f].call(_d,_a.vscrollbar.styles[_e]);}}if(_a.vscrollbar.decbutton.styles){if(_d.decbutton[_f]){_d.decbutton[_f].call(_d.decbutton,_a.vscrollbar.decbutton.styles[_e]);}}if(_a.vscrollbar.incbutton.styles){if(_d.incbutton[_f]){_d.incbutton[_f].call(_d.incbutton,_a.vscrollbar.incbutton.styles[_e]);}}if(_a.vscrollbar.trackbar.styles){if(_d.trackbar[_f]){_d.trackbar[_f].call(_d.trackbar,_a.vscrollbar.trackbar.styles[_e]);}}}}};_pCellTextArea._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellMaskEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._displaymode=(_g)?true:false;this.tabstop=false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellMaskEdit=nexacro._createPrototype(nexacro.MaskEdit,nexacro._CellMaskEditControl);nexacro._CellMaskEditControl.prototype=_pCellMaskEdit;_pCellMaskEdit._is_subcontrol=true;_pCellMaskEdit.on_getIDCSSSelector=function(){return "cellmaskedit";};_pCellMaskEdit.on_destroy_contents=function(){nexacro.MaskEdit.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellMaskEdit._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _d=this._getWindow();if(!_d||!_d._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}return nexacro.MaskEdit.prototype._apply_setfocus.call(this,_a,_b);};_pCellMaskEdit.setOnlyElementFocus=_pCellEdit.setOnlyElementFocus;_pCellMaskEdit.on_fire_oninput=function(){nexacro.MaskEdit.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput();};_pCellMaskEdit.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){nexacro.MaskEdit.prototype.on_fire_onimeaction.call(this,_a,_b,_c,_d,_e,_f,_g);return this._cellobj.on_fire_onimeaction(_a,_b,_c,_d,_e,_f,_g);};_pCellMaskEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.MaskEdit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellMaskEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.MaskEdit.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellMaskEdit._isEnable=_pCellEdit._isEnable;_pCellMaskEdit._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellMaskEdit._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getBindDataset();_b._setCellChildControlProperty("maskedit",this,_d);if(!_a){var _f;if(_e&&_b.subsumtext._value!=""&&_e.getRowType(_d)==16){_f=_b._getAttrValue(_b.subsumtext,_d);}else{_f=_b._getValue(_d,true);}this.set_value(_f);}if(this._view){this.set_usesoftkeyboard(this._view.usesoftkeyboard);}};_pCellMaskEdit._setEditingValue=function(_a){return this.set_value(_a);};_pCellMaskEdit._EditUpdateAll=function(){this._updateAll();};_pCellMaskEdit._getEditingText=function(){return this.text;};_pCellMaskEdit._getEditingValue=function(){return this.value;};_pCellMaskEdit._getValueData=function(){return this.value;};_pCellMaskEdit._setAccessibilityStatFocus=function(){var _a=this._cellobj;if(_a){var _b="";_b=(_b=_a._getLinkedLabel(_a.accessibilitylabel))?_b:"";this._control_element.setElementAccessibilityLabel(_b);this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());}nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellMaskEdit.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellMaskEdit._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);return ctrl_cs;};_pCellMaskEdit._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellMaskEdit._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellCalendarPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._CalendarPopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCellCalendarPopupControl=nexacro._createPrototype(nexacro._CalendarPopupControl,nexacro._CellCalendarPopupControl);nexacro._CellCalendarPopupControl.prototype=_pCellCalendarPopupControl;_pCellCalendarPopupControl._is_subcontrol=true;_pCellCalendarPopupControl._getPopupParentPos=function(){var _a=this.parent;var _b;var _c;if(_a.parent._getPositionInRootComponent){var _d=_a.parent._getPositionInRootComponent(_a);_b=_d[0];_c=_d[1];var _e=[_b.width,_b.height];var _f=nexacro._getElementPositionInFrame(_a.getElement(),true);var _g=0;var _h=0;if(0>_c.orgl){_g=Math.abs(_c.orgl);}if(0>_c.orgt){_h=Math.abs(_c.orgt);}return {"x":_f.x,"y":_f.y,"width":_e[0],"height":_e[1],"xgap":_g,"ygap":_h};}else{return nexacro._CalendarPopupControl.prototype._getPopupParentPos.call(this);}};nexacro._CellCalendarControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Calendar.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this.tabstop=false;this.ondropdown="grid";this.readonly=this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellCalendar=nexacro._createPrototype(nexacro.Calendar,nexacro._CellCalendarControl);nexacro._CellCalendarControl.prototype=_pCellCalendar;_pCellCalendar._is_subcontrol=true;_pCellCalendar.on_getIDCSSSelector=function(){return "cellcalendar";};_pCellCalendar.on_create_contents=function(){nexacro.Calendar.prototype.on_create_contents.call(this);if(this._displaymode){if(this.calendaredit){this.calendaredit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._CalendarEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}if(this.dropbutton){this.dropbutton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._CalendarDropButtonControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}}};_pCellCalendar.on_destroy_contents=function(){nexacro.Calendar.prototype.on_destroy_contents.call(this);this._child_editor=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCalendar._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){return nexacro.Calendar.prototype._apply_setfocus.call(this,_a);}};_pCellCalendar.setOnlyElementFocus=function(){if(this.calendaredit&&this.calendaredit._input_element){this.calendaredit._input_element._applyElementFocus();}};_pCellCalendar._getPopupSizeArr=function(){if(this.type!="monthonly"){return nexacro.Calendar.prototype._getPopupSizeArr.call(this);}var _a=this.popupsize;if(!_a){_a=this.getOffsetWidth()+" "+this.getOffsetHeight();}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:_b;return {width:_b,height:_c};};_pCellCalendar._confirmValue=function(){if(this.readonly){return;}var _a=this.calendaredit;var _b=this.datepicker;switch(this.type){case "normal":if(this._isPopupVisible()){var _c={keycode:13};_b._changeDate(_a,_c);_b.on_fire_ondayclick(_b._value);}else{if(this.value!=_a.value){this._on_value_change(this.value,_a.value);}else if(this.text!=_a.text){this._setValue(this.value);}}this._setZeroCaret();break;case "spin":if(this.value!=_a.value){this._on_value_change(this.value,_a.value);}else if(this.text!=_a.text){this._setValue(this.value);}this._setZeroCaret();break;default:break;}};_pCellCalendar._setValueCtrl=function(_a,_b,_c){this._currentformat="editformat";var _d=this.calendaredit;if(_d&&_d.value!=undefined){var _e=this.value;var _f=this.text;var _g,_h;if(_b!=undefined){_g=_c;_h=_d.text;}else{_g=_d.value;_h=_d.text;}if(_e!=_g.trim()){if(_a){if(!this._on_value_change(_e,_g)){_g=_e;}}this._setValue(_g);_d._setValue(_g);this._default_value=this.value;this._default_text=this.text;}}};_pCellCalendar._on_value_change=function(_a,_b){this._is_value_changed=true;return nexacro.Calendar.prototype._on_value_change.call(this,_a,_b);};_pCellCalendar._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CellCalendarPopupControl("calendarpopup",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCellCalendar.on_fire_oninput=function(){nexacro.Calendar.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput();};_pCellCalendar.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f){this._cellobj.on_fire_oncloseup(_a,_b,_c,_d,_e,_f);};_pCellCalendar.on_fire_ondropdown=function(_a){return this._cellobj.on_fire_ondropdown(_a);};_pCellCalendar.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Calendar.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if(this._view){if(this._isPopupVisible()){this._view._is_editor_keyaction=false;}else{this._view._is_editor_keyaction=true;}}return _h;};_pCellCalendar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Calendar.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCalendar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Calendar.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCalendar._on_edit_oneditclick=function(_a,_b){nexacro.Calendar.prototype._on_edit_oneditclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCalendar._on_edit_onkeydown=function(_a,_b){if(!this._displaymode&&this.visible){return nexacro.Calendar.prototype._on_edit_onkeydown.call(this,_a,_b);}else{return false;}};_pCellCalendar._on_drop_onclick=function(_a,_b){nexacro.Calendar.prototype._on_drop_onclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(!_a._displaymode){var _f=this._cellobj._getAutoUpdateType();if(_f=="dateselect"||_f=="itemselect"){this._cellobj._applyEditorDataset(true,_c);}return (nexacro.Calendar.prototype.on_fire_onchanged.call(this,_a,_b,_c,_d,_e));}};_pCellCalendar.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellCalendar._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellCalendar._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pCellCalendar._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){if(this._is_created){this.on_apply_readonly(_b);}}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellCalendar._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=this._view;var _e=_c._getDataRow();var _f=_b._getBindDataset();var _g=_b._getAttrValue(_b.calendardateformat,_e);if(!_g){_g=nexacro.Calendar.prototype.dateformat;}this.set_dateformat(_g);var _h=_b._getAttrValue(_b.calendareditformat,_e);if(!_h){_h=nexacro.Calendar.prototype.editformat;}this.set_editformat(_h);var _i=_b._getLocale(_e);this.set_locale(_i);if(_d){this.set_usesoftkeyboard(_d.usesoftkeyboard);}var _j;if(_f&&_b.subsumtext._value!=""&&_f.getRowType(_e)==16){_j=_b._getAttrValue(_b.subsumtext,_e);}else{_j=_b._getValue(_e,true);}var _k=_j;if(!_a){if(this._displaymode==true&&!_k){var _l=this._masktypeobj;_k=_b._getDisplayText(_e);_k=_l.removeMask(_k.split(''));_k=_l.changeNormalizeValue(_k);}this.set_value(_k);}var _m=_b._getControlButtonsize(_e,"calendar");this.set_buttonsize(_m);var _n=_b._getControlPopuptype(_e,"calendar");if(_n){this.set_popuptype(_n);}if(this._displaymode==true){if(nexacro._isNull(_j)){var _o=_b._getAttrValue(_b.calendardisplaynulltype,_e);if(_o!="default"){if(!_a){this.set_value(_j);}if(_o=="nulltext"){_k=_b._getAttrValue(_b.calendardisplaynulltext,_e);if(_k!=null){this.set_displaynulltext(_k);}}else if(_o=="nullmask"){this.set_displaynulltext("");}else{this.set_displaynulltext("");this.set_dateformat("");}}}else{if(this._isInvalidValue(_j)){var _p=_b._getAttrValue(_b.calendardisplayinvalidtype,_e);if(!_a){this.set_value(_j);}this.set_dateformat("");this.set_displayinvalidtext("");if(_p=="invalidtext"||_p=="default"){_k=_b._getAttrValue(_b.calendardisplayinvalidtext,_e);if(_k!=null){this.set_displayinvalidtext(_k);}}else{this.set_displayinvalidtext(_j);}}}}var _q=_b._getControlPopupsize(_e,"calendar");if(_q){this.set_popupsize(_q);}_b._setCellChildControlProperty("calendar",this,_e);};_pCellCalendar._setEditingValue=function(_a){return this.calendaredit.set_value(_a);};_pCellCalendar._EditUpdateAll=function(){this._updateAll();};_pCellCalendar._getEditingText=function(){return this.calendaredit.text;};_pCellCalendar._getEditingValue=function(){return this.calendaredit.value;};_pCellCalendar._getValueData=function(){this._setValueCtrl(true);return this.value;};_pCellCalendar._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrows;this._is_first_focus=false;return {want_tab:(this._view?this._view._acceptstab:false),want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pCellCalendar._getChildren=function(){return [this.calendaredit,this.dropbutton];};_pCellCalendar._setAccessibilityStatFocus=function(){var _a="";var _b=this._cellobj;var _c=_b._getAccessibilityMakeAddLabel();var _d=_b._getAccessibilityLabel();_d=(_d!=_b._displaytext)?_d:"";_a=_c+" "+_d;_a=_a.trim();this.calendaredit._control_element.setElementAccessibilityLabel(_a);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellCalendar.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellCalendar._on_dataset_onvaluechanged=function(_a,_b){if(!this._displaymode){nexacro.Calendar.prototype._on_dataset_onvaluechanged.call(this,_a,_b);}};_pCellCalendar._on_dataset_onrowsetchanged=function(_a,_b){if(!this._displaymode){nexacro.Calendar.prototype._on_dataset_onrowsetchanged.call(this,_a,_b);}};_pCellCalendar._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null,"calendaredit":{styles:null},"dropbutton":{styles:null},"calendarspinupbutton":{styles:null},"calendarspindownbutton":{styles:null}};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);if(this.calendaredit){str=nexacro._getComputedStyleProperties(this.calendaredit._control_element,properties,null,true);eval("ctrl_cs.calendaredit.styles = "+str);}if(this.dropbutton){str=nexacro._getComputedStyleProperties(this.dropbutton._control_element,properties,null,true);eval("ctrl_cs.dropbutton.styles = "+str);}if(this.calendarspinupbutton){str=nexacro._getComputedStyleProperties(this.calendarspinupbutton._control_element,properties,null,true);eval("ctrl_cs.calendarspinupbutton.styles = "+str);}if(this.calendarspindownbutton){str=nexacro._getComputedStyleProperties(this.calendarspindownbutton._control_element,properties,null,true);eval("ctrl_cs.calendarspindownbutton.styles = "+str);}return ctrl_cs;};_pCellCalendar._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.calendaredit;var _d=this.dropbutton;var _e=this.calendarspinupbutton;var _f=this.calendarspindownbutton;for(var _i=0;_i<_b.length;_i++ ){var _g=_b[_i];var _h="set_"+_g;if(_a.styles){if(this[_h]){this[_h].call(this,_a.styles[_g]);}}if(_c){if(_a.calendaredit.styles){if(_c[_h]){_c[_h].call(_c,_a.calendaredit.styles[_g]);}}}if(_d){if(_a.dropbutton.styles){if(_d[_h]){_d[_h].call(_d,_a.dropbutton.styles[_g]);}}}if(_e){if(_a.calendarspinupbutton.styles){if(_e[_h]){_e[_h].call(_e,_a.calendarspinupbutton.styles[_g]);}}}if(_f){if(_a.calendarspindownbutton.styles){if(_f[_h]){_f[_h].call(_f,_a.calendarspindownbutton.styles[_g]);}}}}};_pCellCalendar._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};var _c=this.calendaredit;if(_c&&_c._input_element){_b=_c._input_element._getComputedStyleAlign(_a);}return _b;};_pCellCalendar._setAccessibilityInputLabel=nexacro._emptyFn;_pCellCalendar.on_apply_readonly=function(_a){nexacro.Calendar.prototype.on_apply_readonly.call(this,this._view.readonly);};_pCellCalendar._isReadOnly=function(){return this._view.readonly;};nexacro._CellComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._ComboPopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCellComboPopupControl=nexacro._createPrototype(nexacro._ComboPopupControl,nexacro._CellComboPopupControl);nexacro._CellComboPopupControl.prototype=_pCellComboPopupControl;_pCellComboPopupControl._is_subcontrol=true;_pCellComboPopupControl._getPopupParentPos=function(){var _a=this.parent;var _b;var _c;if(_a.parent._getPositionInRootComponent){var _d=_a.parent._getPositionInRootComponent(_a);_b=_d[0];_c=_d[1];var _e=[_b.width,_b.height];var _f=nexacro._getElementPositionInFrame(_a.getElement(),true);var _g=0;var _h=0;if(0>_c.orgl){_g=Math.abs(_c.orgl);}if(0>_c.orgt){_h=Math.abs(_c.orgt);}return {"x":_f.x,"y":_f.y,"width":_e[0],"height":_e[1],"xgap":_g,"ygap":_h};}else{return nexacro._ComboPopupControl.prototype._getPopupParentPos.call(this);}};nexacro._CellComboControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Combo.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this.tabstop=false;if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellCombo=nexacro._createPrototype(nexacro.Combo,nexacro._CellComboControl);nexacro._CellComboControl.prototype=_pCellCombo;_pCellCombo._is_subcontrol=true;_pCellCombo.on_getIDCSSSelector=function(){return "cellcombo";};_pCellCombo.on_create_contents=function(){nexacro.Combo.prototype.on_create_contents.call(this);if(this._displaymode){this.comboedit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._ComboEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};this.dropbutton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._ComboButtonControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}};_pCellCombo.setOnlyElementFocus=function(){if(this.comboedit&&this.comboedit._input_element){this.comboedit._input_element._applyElementFocus();}};_pCellCombo.on_destroy_contents=function(){nexacro.Combo.prototype.on_destroy_contents.call(this);this._child_editor=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCombo._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){return nexacro.Combo.prototype._apply_setfocus.call(this,_a);}};_pCellCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Combo.prototype.on_fire_oncloseup.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._cellobj.on_fire_oncloseup(_a,_c,_f,_d,_g,_h);};_pCellCombo.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._view;if(_h){if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP||(_a==nexacro.Event.KEY_DOWN&&_b)){_h._is_editor_keyaction=false;}}nexacro.Combo.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if(!this._displaymode){return this._cellobj.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pCellCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this._displaymode){return nexacro.Combo.prototype.on_fire_sys_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}};_pCellCombo.on_fire_ondropdown=function(_a){return this._cellobj.on_fire_ondropdown(_a);};_pCellCombo.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Combo.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCombo.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Combo.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCombo._on_edit_oneditclick=function(_a,_b){nexacro.Combo.prototype._on_edit_oneditclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCombo._on_edit_onkeydown=function(_a,_b){if(!this._displaymode&&this.visible){return nexacro.Combo.prototype._on_edit_onkeydown.call(this,_a,_b);}else{return false;}};_pCellCombo._on_drop_onclick=function(_a,_b){nexacro.Combo.prototype._on_drop_onclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCombo.on_fire_oninput=function(){nexacro.Combo.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput();};_pCellCombo.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(this._isPopupVisible()&&this==_j){this._closePopup();}return _l;};_pCellCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!_a._displaymode){var _h=this._cellobj._getAutoUpdateType();if(_h=="comboselect"||_h=="itemselect"){this._cellobj._applyEditorDataset(true,_d);}return (nexacro.Combo.prototype.on_fire_onitemchanged.call(this,_a,_b,_c,_d,_e,_f,_g));}};_pCellCombo.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellCombo._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellCombo._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){if(this._is_created){this.on_apply_readonly(_b);}}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellCombo._confirmValue=function(){if(this.readonly){return;}var _a=this.combolist;var _b=this._selectDataset();var _c=this._default_value;var _d=this._default_text;var _e=this._default_index;var _f=this.value;var _g=this.text;var _h=this.index;var _i,_j;if(this._isPopupVisible()){_j=_a._get_rowobj_status("mouseover","status")||_a._get_rowobj_status("selected","userstatus");if(_j){_h=_j.index;}}if(_h>=0){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_i=this._getRawIndex(_b,_h);_i=(_i== -1)?_h:_i;_b.set_filterstr("");}else{_i=_h;}}else{_i=_h;}if(this.index!=_i){_f=this._getItemValue(_i);_g=this._getItemText(_i);_h=_i;if(!this._on_value_change(_e,_d,_c,_h,_g,_f)){this._setEditValue(this.text);_f=_c;_g=_d;_h=_e;}}this._setDefaultProps(_h,_f,_g);};_pCellCombo._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getControlButtonsize(_d,"combo");this.set_buttonsize(_e);var _f=_b._getControlPopuptype(_d,"combo");if(_f){this.set_popuptype(_f);}var _g=_b._getControlScrollbarsize(_d,"combo");if(_g!=null){this.set_scrollbarsize(_g);}var _h=_b._getControlPopupsize(_d,"combo");if(_h){this.set_popupsize(_h);}var _i;_i=_b._getAttrValue(_b.combodisplaynulltype,_d);if(_i=="nulltext"){_i=_b._getAttrValue(_b.combodisplaynulltext,_d);if(_i!=null){this.set_displaynulltext(_i);}}else{this.set_displaynulltext("");}_b._setCellChildControlProperty("combo",this,_d);if(!_a){_i=_b._getValue(_d);this.set_value(_i);}if(this._view){this.set_usesoftkeyboard(this._view.usesoftkeyboard);}};_pCellCombo._setEditingValue=function(_a){return this.comboedit.set_value(_a);};_pCellCombo.on_apply_text=function(_a){if(this._displaymode==true){if(!nexacro._isNull(this.value)){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getAttrValue(_b.combodisplaynulltype,_d);if(_e=="nulltext"){if(this.index<0){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{if(this.displaynulltext||_a==""){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{return nexacro.Combo.prototype.on_apply_text.call(this,_a);}};_pCellCombo._EditUpdateAll=function(){this._updateAll();};_pCellCombo._getEditingText=function(){return this.comboedit.text;};_pCellCombo._getEditingValue=function(){return this.comboedit.value;};_pCellCombo._getValueData=function(){return this.value;};_pCellCombo._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrows;this._is_first_focus=false;return {want_tab:(this._view?this._view._acceptstab:false),want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pCellCombo._getChildren=function(){return [this.comboedit,this.dropbutton];};_pCellCombo._setAccessibilityStatFocus=function(){var _a="";var _b=this._cellobj;var _c=_b._getAccessibilityMakeAddLabel();var _d=_b._getAccessibilityLabel();_d=(_d!=_b._displaytext)?_d:"";_a=_c+" "+_d;_a=_a.trim();this.comboedit._control_element.setElementAccessibilityLabel(_a);nexacro.Combo.prototype._setAccessibilityStatFocus.call(this);};_pCellCombo.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellCombo._on_dataset_onvaluechanged=function(_a,_b){if(!this._displaymode){nexacro.Combo.prototype._on_dataset_onvaluechanged.call(this,_a,_b);}};_pCellCombo._on_dataset_onrowsetchanged=function(_a,_b){if(!this._displaymode){nexacro.Combo.prototype._on_dataset_onrowsetchanged.call(this,_a,_b);}};_pCellCombo._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var properties=this._computed_prop_list;properties=properties.toString();var ctrl_cs={"styles":null,"comboedit":{styles:null},"dropbutton":{styles:null}};var str=nexacro._getComputedStyleProperties(this._control_element,properties,null,true);eval("ctrl_cs.styles = "+str);if(this.comboedit){str=nexacro._getComputedStyleProperties(this.comboedit._control_element,properties,null,true);eval("ctrl_cs.comboedit.styles = "+str);}if(this.dropbutton){str=nexacro._getComputedStyleProperties(this.dropbutton._control_element,properties,null,true);eval("ctrl_cs.dropbutton.styles = "+str);}return ctrl_cs;};_pCellCombo._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.comboedit;var _d=this.dropbutton;for(var _g=0;_g<_b.length;_g++ ){var _e=_b[_g];var _f="set_"+_e;if(_a.styles){if(this[_f]){this[_f].call(this,_a.styles[_e]);}}if(_c){if(_a.comboedit.styles){if(_c[_f]){_c[_f].call(_c,_a.comboedit.styles[_e]);}}}if(_d){if(_a.dropbutton.styles){if(_d[_f]){_d[_f].call(_d,_a.dropbutton.styles[_e]);}}}}};_pCellCombo._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};var _c=this.comboedit;if(_c&&_c._input_element){_b=this.comboedit._input_element._getComputedStyleAlign(_a);}return _b;};_pCellCombo._setAccessibilityInputLabel=nexacro._emptyFn;_pCellCombo._isReadOnly=function(){return this._view.readonly;};_pCellCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CellComboPopupControl("combopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this.popuptype);_a.createComponent(true);}};nexacro._CellCheckboxControlBase=function(_a,_b,_c,_d,_e,_f){nexacro.CheckBox.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this.tabstop=false;this._is_usetextbox=false;var _g=_f;while(_g){if(_g._refinfo){this._cellobj=_g;this._cellinfo=_g._refinfo;this._view=_g._view;break;}_g=_g.parent;}this.checked=false;this._setControl();};var _pCellCheckboxBase=nexacro._createPrototype(nexacro.CheckBox,nexacro._CellCheckboxControlBase);nexacro._CellCheckboxControlBase.prototype=_pCellCheckboxBase;_pCellCheckboxBase._is_subcontrol=true;_pCellCheckboxBase._apply_setfocus=function(_a,_b){};_pCellCheckboxBase.on_create_contents=function(){this._adjustAlign();nexacro.CheckBox.prototype.on_create_contents.call(this);};_pCellCheckboxBase.on_destroy_contents=function(){nexacro.CheckBox.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCheckboxBase.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckboxBase.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckboxBase._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellCheckboxBase._on_icon_onload=function(_a,_b,_c){nexacro._IconText.prototype._on_icon_onload.call(this,_a,_b,_c);this._adjustAlign(undefined,undefined,_b,_c);};_pCellCheckboxBase._adjustAlign=function(_a,_b,_c,_d){var _e=this._cellobj._getAvailableRect();var _f=_e.left;var _g=_e.top;var _h=_e.right;var _i=_e.bottom;var _j=_e.width;var _k=_e.height;var _l=this._cellobj._getDataRow();var _m=this._cellinfo._getCheckboxsize(_l);if(_m<0||_m==undefined){var _n=this._on_getFitSize(_c,_d);_m=_n[1];}if(!_a){_a="center";}if(!_b){_b="middle";}if(_a=="center"){_f+=((_j-_m)/2);}else if(_a=="right"){_f=_h-_m;}if(_b=="middle"){_g+=((_k-_m)/2);}else if(_b=="bottom"){_g=_i-_m;}this.move(_f,_g,_m,_m);};_pCellCheckboxBase._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._adjustAlign();this._setProperty();};_pCellCheckboxBase._getCheckValue=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=_b._getDataRow();var _d=_a._getTextValueForDisp(_c);return _d;};_pCellCheckboxBase._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("checkbox",this,_d);if(_a){return;}var _e=this._getCheckValue();if(!nexacro._isNull(this.falsevalue)&&!nexacro._isNull(this.truevalue)&&this.truevalue!=_e){_e=this.falsevalue;}this.value=false;this.set_value(_e);this.checked=this._isChecked(_e);this._cellobj._setAccessibilityStatChecked(this.checked);};_pCellCheckboxBase.set_value=function(_a){_a=this._changeValue(_a);this._setValue(_a);this.on_apply_value();};_pCellCheckboxBase._setAccessibilityStatFocus=function(){var _a=this._cellobj;this._control_element.setElementAccessibilityLabel(_a._getAccessibilityLabel());this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());this._setAccessibilityStatChecked(this.isChecked());_a._setAccessibilityStatChecked(this.isChecked());nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellCheckboxBase.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellCheckboxBase.on_get_accessibility_label=function(){return "";};_pCellCheckboxBase._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellCheckboxBase._setComputedStyle=function(_a){};_pCellCheckboxBase._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};_pCellCheckboxBase._on_getFitSize=function(_a,_b){var _c=this.getElement();if(_c){var _d=0;var _e=0;var _f=this._getCurrentStyleBorder();if(_f){_d+=_f._getBorderWidth();_e+=_f._getBorderHeight();}var _g=this._icon||this._getCSSStyleValue("icon");if(_g){var _h=this.iconPosition||this._getCSSStyleValue("iconPosition");var _i;if(_a!==undefined&&_b!==undefined){_i={width:_a,height:_b};}else{_i=nexacro._getImageSize(_g.url,this._on_icon_onload,this,this._view?this._view._getRefFormBaseUrl():undefined,_g.value)||{width:0,height:0};}if(_h=="top"||_h=="bottom"){_e+=_i.height;_d=Math.max(_d,_i.width);}else{_d+=_i.width;_e=Math.max(_e,_i.height);}}return [_d,_e];}return [this._adjust_width,this._adjust_height];};nexacro._CellCheckboxControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._CellCheckboxControlBase.call(this,_a,_b,_c,_d,_e,_f);this._controlmode=(_g)?true:false;};var _pCellCheckbox=nexacro._createPrototype(nexacro._CellCheckboxControlBase,nexacro._CellCheckboxControl);nexacro._CellCheckboxControl.prototype=_pCellCheckbox;_pCellCheckbox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}if(this._cellobj._isFakeCell()){return false;}if(this._view&&this._view.selectchangetype!="down"){if(nexacro._toBoolean(this._view.readonly)==false){this._toggleCheck();}}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckbox.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._cellobj._isFakeCell()){return false;}return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckbox._toggleCheck=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=this._view;var _d=_a._getDataRow();var _e=_b._getEdittype(_d);if(_c&&(_e=="checkboxcontrol"||_e=="checkbox")){var _f=this._isChecked(this.value);if(_f){_f=nexacro._isNull(this.falsevalue)?0:this.falsevalue;}else{_f=nexacro._isNull(this.truevalue)?1:this.truevalue;}if(_b.text._bindtype==1){_c._dsEventOccured=true;var _g=_a._getBindDataset();if(_g&&_g.setColumn(_d,_b.text._bindexpr,_f)){_f=_b._getTextValueForDisp(_d);this.set_value(_f);}_c._dsEventOccured=false;}}};_pCellCheckbox._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pCellCheckbox._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellImageControl=function(_a,_b,_c,_d,_e,_f){nexacro._ImageAreaControl.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this.tabstop=false;this.imagewidth=0;this.imageheight=0;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._img_elem=null;this._img_type="url";this.accessibilityrole="image";};var _pCellImage=nexacro._createPrototype(nexacro._ImageAreaControl,nexacro._CellImageControl);nexacro._CellImageControl.prototype=_pCellImage;_pCellImage.on_destroy_contents=function(){nexacro._ImageAreaControl.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellImage.on_apply_text=function(){this.set_image(this._getDisplayText());};_pCellImage.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"cellimage");};_pCellImage.on_fire_user_ontouchstart=function(_a,_b,_c,_d){return this.parent.on_fire_user_ontouchstart(_a,_b,this,_d);};_pCellImage.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"cellimage");};_pCellImage.on_fire_onsize=function(_a,_b){if(this._complete){this.__apply_text();}return nexacro._ImageAreaControl.prototype.on_fire_onsize.call(this,_a,_b);};_pCellImage._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellImage._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pCellImage._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellImage._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(!_a){this.on_apply_text();}_b._setCellChildControlProperty("image",this,_d);};_pCellImage._adjustAlign=function(_a,_b){if(!_a){_a="center";}if(!_b){_b="middle";}this.set_imagealign(_a+" "+_b);this._updateElementPositions();};_pCellImage._setAccessibilityStatFocus=function(){var _a=this._cellobj;this._control_element.setElementAccessibilityLabel(_a._getAccessibilityLabel());this._control_element.setElementAccessibilityAction(_a.accessibilityaction);this._control_element.setElementAccessibilityDescription(_a.accessibilitydescription);this._control_element.setElementAccessibilityParentLabel(_a._getAccessibilityMakeAddLabel().trim());nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pCellImage.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellImage.on_get_accessibility_label=function(){return this.text;};_pCellImage._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellImage._setComputedStyle=function(_a){};_pCellImage._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellTreeControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this.tabstop=false;this._view=_h._view;this._cellinfo=_h._refinfo;this._cellobj=_h;this._leftline_ctrls=[];this._btnimg_ctrl=null;this._chk_ctrl=null;this._img_ctrl=null;this._text_ctrl=null;this._displaytext="";this._upline_ctrl=null;this._downline_ctrl=null;this._clicktarget=null;this._checkboxObj="_CellCheckboxControlBase";};var _pCellTree=nexacro._createPrototype(nexacro.Component,nexacro._CellTreeControl);nexacro._CellTreeControl.prototype=_pCellTree;_pCellTree._is_subcontrol=true;_pCellTree._type_name="CellTreeItemControl";_pCellTree._apply_setfocus=function(_a){};_pCellTree.on_create_contents=function(){this._createLines(true);this._createCheckbox(true);this._createImage(true);this._createButton(true);this._createText(true);};_pCellTree._createLines=function(_a){if(!this._view||!this._view.treeuseline){return;}if(!this._rightline_ctrl){this._rightline_ctrl=new nexacro._CellTreeLineControl("treerightline",0,0,0,0,null,null,this.parent);this._childctrl_setevent(this._rightline_ctrl);this._rightline_ctrl.createComponent(_a);}if(!this._upline_ctrl){this._upline_ctrl=new nexacro._CellTreeLineControl("treeupline",0,0,0,0,null,null,this.parent);this._childctrl_setevent(this._upline_ctrl);this._upline_ctrl.createComponent(_a);}if(!this._downline_ctrl){this._downline_ctrl=new nexacro._CellTreeLineControl("treedownline",0,0,0,0,null,null,this.parent);this._childctrl_setevent(this._downline_ctrl);this._downline_ctrl.createComponent(_a);}};_pCellTree._createCheckbox=function(_a){if(!this._view&&!this._view.treeusecheckbox){return;}if(!this._chk_ctrl){this._chk_ctrl=new nexacro[this._checkboxObj]("treeitemcheckbox",0,0,0,0,this);this._childctrl_setevent(this._chk_ctrl);this._chk_ctrl._getCheckValue=function(){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(_b.treecheck._bindtype>0){return _b._getAttrValue(_b.treecheck,_d);}else{return this._view._treeChecked[_d];}};if(nexacro._enableaccessibility){this._chk_ctrl.accessibilityenable=false;}this._chk_ctrl.createComponent(_a);}};_pCellTree._createImage=function(_a){if(!this._view||!this._view.treeuseimage){return;}if(!this._img_ctrl){this._img_ctrl=new nexacro._TreeItemIconControl("treeitemimage",0,0,0,0,null,null,this);this._childctrl_setevent(this._img_ctrl);if(nexacro._enableaccessibility){this._img_ctrl.accessibilityenable=false;}this._img_ctrl.createComponent(_a);}};_pCellTree._createButton=function(_a){this._btnimg_ctrl=new nexacro._TreeItemIconControl("treeitembutton",0,0,0,0,null,null,this);this._childctrl_setevent(this._btnimg_ctrl);if(nexacro._enableaccessibility){this._btnimg_ctrl.accessibilityenable=false;}this._btnimg_ctrl.createComponent(_a);};_pCellTree._createText=function(_a){this._text_ctrl=new nexacro._TreeItemTextControl("treeitemtext",0,0,0,0,null,null,null,null,null,null,this);this._text_ctrl._setControl();this._childctrl_setevent(this._text_ctrl);this._text_ctrl.createComponent(_a);};_pCellTree._childctrl_setevent=function(_a){_a.on_fire_onclick=function(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this.id;if(_o=="treeitemtext"||_o=="treeitemimage"){_o="";}return this.parent.on_fire_onclick(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_a.on_fire_ondblclick=function(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this.id;if(_o=="treeitemtext"||_o=="treeitemimage"){_o="";}return this.parent.on_fire_ondblclick(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_a._on_last_lbuttonup=function(){return this.parent._on_last_lbuttonup();};};_pCellTree.on_created_contents=function(_a){var _b=this._leftline_ctrls;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_b[_c].on_created(_a);}if(this._rightline_ctrl){this._rightline_ctrl.on_created(_a);}if(this._upline_ctrl){this._upline_ctrl.on_created(_a);}if(this._downline_ctrl){this._downline_ctrl.on_created(_a);}if(this._btnimg_ctrl){this._btnimg_ctrl.on_created(_a);}if(this._chk_ctrl){this._chk_ctrl.on_created(_a);}if(this._img_ctrl){this._img_ctrl.on_created(_a);}if(this._text_ctrl){this._text_ctrl.on_created(_a);}this._is_created=true;};_pCellTree.on_attach_contents_handle=_pCellTree.on_created_contents;_pCellTree.on_destroy_contents=function(){var _a=this._leftline_ctrls;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].destroy();}this._leftline_ctrls=null;if(this._rightline_ctrl){this._rightline_ctrl.destroy();this._rightline_ctrl=null;}if(this._upline_ctrl){this._upline_ctrl.destroy();this._upline_ctrl=null;}if(this._downline_ctrl){this._downline_ctrl.destroy();this._downline_ctrl=null;}if(this._btnimg_ctrl){this._btnimg_ctrl.destroy();this._btnimg_ctrl=null;}if(this._chk_ctrl){this._chk_ctrl.destroy();this._chk_ctrl=null;}if(this._img_ctrl){this._img_ctrl.destroy();this._img_ctrl=null;}if(this._text_ctrl){this._text_ctrl.destroy();this._text_ctrl=null;}this._clicktarget=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellTree.on_apply_text=function(){var _a=this._text_ctrl;if(_a){_a.set_text(this._displaytext);}};_pCellTree.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellTree.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellTree._isEditTypeTree=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=_a._getDataRow();var _d=_b._getEdittype(_c);return (_d=="tree");};_pCellTree._getLineHeight=function(){var _a=this.parent._adjust_height;var _b=this.parent._getCurrentStyleBorder();var _c=(_b)?_b.bottom._width:0;return _a-_c;};_pCellTree._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellTree._load_image=function(_a,_b){var _c=(_b)?_b.toString():null;if(this._control_element&&_c){if(_c!="none"){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());_a._load_url=_c;var _d=nexacro._getImageSize(_c,this._on_loadImage,this,this._getRefFormBaseUrl(),_b.value);if(_d){this._on_loadImage(_c,_d.width,_d.height);}}}};_pCellTree._on_loadImage=function(_a,_b,_c){var _d=false;var _e,_f;if(this._btnimg_ctrl&&this._btnimg_ctrl._load_url==_a){_e=this._btnimg_ctrl._adjust_width;_f=this._btnimg_ctrl._adjust_height;if(_e!=_b||_f!=_c){_d=true;this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,_b,_c);}}if(this._img_ctrl&&this._img_ctrl._load_url==_a){_e=this._img_ctrl._adjust_width;_f=this._img_ctrl._adjust_height;if(_e!=_b||_f!=_c){_d=true;this._img_ctrl.move(this._img_ctrl._adjust_left,this._img_ctrl._adjust_top,_b,_c);}}if(_d){this._adjustSubCompAlign(this._lvl);}};_pCellTree._changeTreeStatus=function(_a,_b){this._userstatus=_a;if(this._img_ctrl){this._img_ctrl._changeUserStatus(_a,_b);}if(_a!="leaf"&&this._btnimg_ctrl){this._btnimg_ctrl._changeUserStatus(_a,_b);}};_pCellTree._buttonUpdate=function(_a){var _b=this._view;if(_b&&_b.treeusebutton!=this._treeusebutton){if(_b.treeusebutton=="use"){this._btnimg_ctrl.set_visible(true);}else{this._btnimg_ctrl.set_visible(false);}this._treeusebutton=_b.treeusebutton;}var _c;if(_a==2||_a==3||_a== -1){_c=this._btnimg_ctrl._getCSSStyleValue("icon","expand");this._load_image(this._btnimg_ctrl,_c);this._btnimg_ctrl.set_visible(false);this._btnimg_ctrl._tmpw=this._btnimg_ctrl.width;this._btnimg_ctrl._tmph=this._btnimg_ctrl.height;this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,0,0);}else{_c=this._btnimg_ctrl._getCSSStyleValue("icon",this._userstatus);this._load_image(this._btnimg_ctrl,_c);}};_pCellTree._checkUpdate=function(_a){var _b=this._view;if(_b&&_b.treeusecheckbox!=this._treeusecheckbox){if(this._chk_ctrl){this._chk_ctrl.set_visible(_b.treeusecheckbox);}else{this._createCheckbox();}this._treeusecheckbox=_b.treeusecheckbox;}if(_b){this._chk_ctrl._changeStatus("readonly",_b.readonly);}if(this._chk_ctrl){this._chk_ctrl.set_value(_a);this._chk_ctrl._adjustAlign();}};_pCellTree._imageUpdate=function(_a){var _b=this._view;if(_b&&_b.treeuseimage!=this._treeuseimage){if(this._img_ctrl){this._img_ctrl.set_visible(_b.treeuseimage);}else{this._createImage();}this._treeuseimage=_b.treeuseimage;}if(this._img_ctrl){var _c=this._img_ctrl._getCSSStyleValue("icon",this._userstatus);this._load_image(this._img_ctrl,_c);if(_c&&_c!="none"){this._img_ctrl.set_visible(_b?_b.treeuseimage:true);}else{this._img_ctrl.set_visible(false);}}this._adjustSubCompAlign(this._lvl);};_pCellTree._lineUpdate=function(_a,_b){var _c=this._view;if(_c&&_c.treeuseline!=this._treeuseline){this._createLines();if(this._rightline_ctrl){this._rightline_ctrl.set_visible(_c.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(_c.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(_c.treeuseline);}this._treeuseline=_c.treeuseline;}var _d=this._cellinfo._getTreeStartLevel(_a);var _e=(_c&&_c._hasSameNextNode[_a])?_c._hasSameNextNode[_a][1]:false;var _f=(_d>=_b)?true:false;this._createLeftLine(_a);var _g;if(this._rightline_ctrl){_g=this._rightline_ctrl;_g._set_line(false,true);}if(this._upline_ctrl){_g=this._upline_ctrl;_g._set_line(!_f,false);}if(this._downline_ctrl&&!_f&&_e){_g=this._downline_ctrl;_g._set_line(true,false);}else if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}this._treeline_visible(!this._cellobj._hideInner);};_pCellTree._createLeftLine=function(_a){var _b=this._view;var _c;if(!_b||!_b.treeuseline){var _d=this._leftline_ctrls.length;for(_c=0;_c<_d;_c++ ){this._leftline_ctrls[_c].destroy();}this._leftline_ctrls=[];return;}var _e=this._cellinfo._getTreeLevel(_a);var _f=_e-1;var _g;_c=0;var _h=this._leftline_ctrls;while(_b._rootlevel<_f){_g=this.__isNextSameLevelInSameParent(_f,_a);if(_g){var _i=this._getLineHeight();var _j=_h[_c];if(!_j){_j=new nexacro._CellTreeLineControl("treeleftline",0,0,1,_i,null,null,this.parent);_j.createComponent();this._leftline_ctrls[_c]=_j;}else{_j.set_height(_i);}_j._set_line(true,false);_j._depth=_f;_c++ ;}_f-- ;}while(_h.length>_c){_h[_h.length-1].destroy();_h.splice(_h.length-1,1);}};_pCellTree._toggleItem=function(_a,_b){var _c=this._view;if(!_c||_a){if(this._btnimg_ctrl){this._btnimg_ctrl.set_visible(false);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(false);}if(this._upline_ctrl){this._upline_ctrl.set_visible(false);}if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}if(this._chk_ctrl){this._chk_ctrl.set_visible(false);}if(this._img_ctrl){this._img_ctrl.set_visible(false);}if(this._text_ctrl){this._text_ctrl.set_visible(false);}}else{if(_c.treeusebutton=="use"){this._btnimg_ctrl.set_visible(true);}else{this._btnimg_ctrl.set_visible(false);}if(_b==2||_b==3||_b== -1){this._btnimg_ctrl.set_visible(false);this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,0,0);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(_c.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(_c.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(_c.treeuseline);}if(this._chk_ctrl){this._chk_ctrl.set_visible(_c.treeusecheckbox);}if(this._img_ctrl){this._img_ctrl.set_visible(_c.treeuseimage);}if(this._text_ctrl){this._text_ctrl.set_visible(true);}}};_pCellTree.on_apply_prop_tooltip=function(){var _a=this._cellobj._getDataRow();this.tooltiptext=this._cellinfo._getTooltipText(_a);this.tooltiptype=this._cellinfo.tooltiptype;nexacro.Component.prototype.on_apply_prop_tooltip.call(this);};_pCellTree._treeline_visible=function(_a){var _b;var _c=this._leftline_ctrls.length;if(_a){for(_b=0;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(this._leftline_ctrls[_b].visible);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(this._rightline_ctrl.visible);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(this._upline_ctrl.visible);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(this._downline_ctrl.visible);}}else{for(_b=0;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(false);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(false);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(false);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(false);}}};_pCellTree.on_apply_prop_cssclass=function(){if(this._chk_ctrl){this._chk_ctrl.on_apply_cssclass();}if(this._img_ctrl){this._img_ctrl.on_apply_cssclass();}if(this._text_ctrl){this._text_ctrl.on_apply_cssclass();}if(this._btnimg_ctrl){this._btnimg_ctrl.on_apply_cssclass();}};_pCellTree.on_apply_prop_enable=function(_a){if(this._chk_ctrl){this._chk_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._img_ctrl){this._img_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._text_ctrl){this._text_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._btnimg_ctrl){this._btnimg_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pCellTree.on_apply_prop_rtl=function(){nexacro.Component.prototype.on_apply_prop_rtl.call(this);if(this._chk_ctrl){this._chk_ctrl.set_rtl(this.rtl);}if(this._img_ctrl){this._img_ctrl.set_rtl(this.rtl);}if(this._text_ctrl){this._text_ctrl.set_rtl(this.rtl);}if(this._btnimg_ctrl){this._btnimg_ctrl.set_rtl(this.rtl);}};_pCellTree._updateAll=function(_a,_b){this._cellinfo=this.parent._refinfo;if(this._control_element){if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}var _c=this._view;var _d=this._cellobj;var _e=_d._getDataRow();var _f=1;var _g=0;var _h=0;if(_c&&!_d._isFakeCell()){_f=_c._getTreeStats(_e);_g=_c._getTreeCheck(_e);_h=_c._getTreeLevel?_c._getTreeLevel(_e):this._cellinfo._getTreeLevel(_e);}if(_e==null||_e== -9){this._toggleItem(true,_f);return;}else{this._toggleItem(false,_f);}if(!_a){this._apply_status(_d._oldstatus,_d._status,_d._olduserstatus,_d._userstatus);}this._lvl=_h;if(_f==0){this._changeTreeStatus("collapse",true);}else if(_f==1){this._changeTreeStatus("expand",true);}else if(_f>=2){this._changeTreeStatus("leaf",true);}this._buttonUpdate(_f);this._lineUpdate(_e,_h);this._checkUpdate(_g);this._imageUpdate(_f);var _i=this.parent._getDisplayText();if(this._displaytext!=_i){this._text_ctrl.set_text(_i);this._displaytext=_i;}this.on_apply_prop_tooltip();this._adjustSubCompAlign(_h);}};_pCellTree._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._text_ctrl&&this._text_ctrl._cell_elem){_b=this._text_ctrl._cell_elem._getComputedStyleAlign(_a);}return _b;};_pCellTree._adjustSubCompAlign=function(_a){var _b=this.parent;var _c=this._cellinfo;var _d=_b._getControlRect();var _e=_d.width;var _f=_d.height;var _g=_b._getDataRow();var _h=_c._getTreeStartLevel(_g);var _i=9;var _j=16;var _k=_a-1;_a-=_h;if(_a<0){_a=0;}var _l=_b._adjust_top;var _m=_b._getCurrentStylePadding();var _n=((_m)?_m.left:0);var _o=this._getLineHeight();var _p=(_a* _j)+_i;var _q=_p;var _r=_l;var _s=0;var _t=(_o/2);var _u=_t;var _v=this._leftline_ctrls;var _w=_v.length;var _x=0;var _y;for(var _ap=0;_x<_w;_ap++ ){if(_k==_v[_x]._depth){_y=_v[_x++ ]._control_element;_y.setElementPosition(_p-(_j* (_ap+1))+_n,_r);}if(_k-- <0){break;}}var _z=0;var _aa=0;if(this._btnimg_ctrl){var _ab=this._btnimg_ctrl.width;if(_ab<=0&&this._btnimg_ctrl._tmpw){_ab=this._btnimg_ctrl._tmpw;}var _ac=this._btnimg_ctrl.height;if(_ac<=0&&this._btnimg_ctrl._tmph){_ac=this._btnimg_ctrl._tmph;}var _ad=_p-(_ab/2);if(_ad<0){_ad=_p-(_i/2);}if(!this._rightline_ctrl||!this._rightline_ctrl.visible){_ad-=((_ab/2)* _a);}var _ae=((_f-_ac)/2);if(this._btnimg_ctrl.visible){_u=((_o-_ac)/2);_z=_ab;_aa=_ac;_p=_ad+_ab;}else{if(!this._view.treeuseline){_p=_ad+_ab;}}_s=_ab;this._btnimg_ctrl.move(_ad,_ae,_ab,_ac);}else{_s=_i;}if(this._rightline_ctrl&&this._rightline_ctrl.visible){this._rightline_ctrl.move(_p+_n,_r,_s-(_z/2),_t);_p=this._rightline_ctrl.left+this._rightline_ctrl.width-_n;}else{_p+=1;}if(this._upline_ctrl&&this._upline_ctrl.visible){this._upline_ctrl.move(_q+_n,_r,_s,_u);}if(this._downline_ctrl&&this._downline_ctrl.visible){_r=_l+_u+_aa;var _af=_u+_r;var _ag=_o+_l;if(_af>_ag){_u=_ag-_r;}this._downline_ctrl.move(_q+_n,_r,_s,_u);}if(this._chk_ctrl&&this._chk_ctrl.visible){var _ah=this._chk_ctrl.width;var _ai=this._chk_ctrl.height;var _aj=_p;var _ak=((_f-_ai)/2);_p+=_ah;this._chk_ctrl.move(_aj,_ak,_ah,_ai);}if(this._img_ctrl&&this._img_ctrl.visible){_p+=1;var _al=this._img_ctrl._adjust_width;var _am=this._img_ctrl._adjust_height;var _an=null;var _ao=null;if(_al>0&&_am>0){_an=_p;_ao=((_f-_am)/2);_p+=_al;}else{}this._img_ctrl.move(_an,_ao,_al,_am);_p+=5;}else{_p+=4;}if(this._text_ctrl){this._text_ctrl.move(_p,0,_e-_p,_f);}};_pCellTree._setAlign=function(_a,_b){if(_a){this._text_ctrl.set_textAlign(_a);}if(_b){this._text_ctrl.set_verticalAlign(_b);}};if(nexacro._Browser=="Runtime"){_pCellTree.on_change_containerRect=function(_a,_b){if(this._lvl||this._isRtl()){this._adjustSubCompAlign(this._lvl);}};}else{_pCellTree.on_change_containerRect=function(_a,_b){if(this._lvl){this._adjustSubCompAlign(this._lvl);}};}_pCellTree._setAccessibilityStatFocus=function(_a){var _b=this._cellobj;var _c=_b._getCellAccessibilityLabel();_c=_c.trim();this._setAccessibilityLabel(_c);var _d=_b._getDataRow();var _e=this._cellinfo._getTreeLevel(_d);var _f=this._cellinfo._getTreeStartLevel(_d);if(_b._getTreeStatus()==0){if(this._text_ctrl){this._text_ctrl._setAccessibilityStatExpanded(false);}}else{if(this._text_ctrl){this._text_ctrl._setAccessibilityStatExpanded(true);}}this._setAccessibilityInfoLevel(_e-_f+1);nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);};_pCellTree.on_get_accessibility_description=function(){if(this._cellobj){var _a=this._cellobj.tooltiptext;return nexacro._isNull(_a)?"":_a;}return "";};_pCellTree._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellTree._setComputedStyle=function(_a){};nexacro._TreeItemIconControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._Icon.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);};var _pTreeItemIcon=nexacro._createPrototype(nexacro._Icon,nexacro._TreeItemIconControl);nexacro._TreeItemIconControl.prototype=_pTreeItemIcon;_pTreeItemIcon._is_subcontrol=true;_pTreeItemIcon._type_name="TreeItemIconControl";_pTreeItemIcon.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _a;};nexacro._TreeItemTextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_l);};var _pTreeItemTextControl=nexacro._createPrototype(nexacro.Static,nexacro._TreeItemTextControl);nexacro._TreeItemTextControl.prototype=_pTreeItemTextControl;nexacro._CellTreeLineControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this.tabstop=false;this._is_simple_control=true;this._is_nc_control=true;this._view=_h._view;this._depth= -1;this._showleft=false;this._showbottom=false;};var _pCellTreeLine=nexacro._createPrototype(nexacro.Component,nexacro._CellTreeLineControl);nexacro._CellTreeLineControl.prototype=_pCellTreeLine;_pCellTreeLine._is_subcontrol=true;_pCellTreeLine._type_name="CellTreeLineControl";_pCellTreeLine.on_destroy_contents=function(){this._view=null;};_pCellTreeLine._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this.parent&&this.parent._isEnable){return this.parent._isEnable();}return true;};_pCellTreeLine._set_line=function(_a,_b){var _c=this._control_element;if(_c){this._showleft=_a;this._showbottom=_b;this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pCellTreeLine._on_apply_status=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype._on_apply_status.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);var _j=false,_k=false,_l=false,_m=false;if(this.id=="treerightline"){_j=true;_l=true;_k=true;}else if(this.id=="treeleftline"||this.id=="treeupline"||"treedownline"){_l=true;_k=true;_m=true;}if(!this._showbottom){_m=true;}if(!this._showleft){_j=true;}this._control_element.setElementBorderNone(_j,_k,_l,_m);};_pCellTreeLine.on_getIDCSSSelector=function(){return "celltreeline";};delete _pCellControl;delete _pSubCellControl;delete _pCellExpand;delete _pCellButton;delete _pCellBar;delete _pCellEdit;delete _pCellTextArea;delete _pCellMaskEdit;delete _pCellCalendar;delete _pCellCombo;delete _pCellCheckboxBase;delete _pCellCheckbox;delete _pCellImage;delete _pCellTree;delete _pTreeItemIcon;delete _pTreeItemTextControl;delete _pCellTreeLine;}if(!nexacro.View){nexacro.View=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this.form=new nexacro._InnerForm("form",0,0,_d,_e,null,null,null,null,null,null,this);};var _pView=nexacro._createPrototype(nexacro.Div,nexacro.View);nexacro.View.prototype=_pView;_pView._type_name="View";_pView.viewdataset="";_pView.viewtype="";_pView.sourceview="";_pView._viewdataset=null;_pView._ismodeltrigger=false;_pView._is_view=true;_pView._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pView.on_create_contents=function(){this.on_apply_viewdataset(this.viewdataset);this.on_apply_sourceview();this.form.createComponent(true);};_pView.on_created_contents=function(_a){var _b=this.form;_b.on_created(_a);this.on_apply_text();this._recalcLayout();};_pView.on_destroy_contents=function(){this._destroyTextElement();this._destroyFormControl();this._user_property_list=null;this._viewdataset=null;};_pView.on_attach_contents_handle=function(_a){var _b=this.form;_b.on_created(_a);this.on_apply_text();this._recalcLayout();};_pView.set_viewtype=function(_a){if(this._is_created){return;}this.viewtype=_a;};_pView.set_viewdataset=function(_a){if(this._is_created){return;}this.viewdataset=_a;};_pView.on_apply_viewdataset=function(_a){if(typeof _a!="string"){this._viewdataset=_a;}if(this.viewdataset!=_a){if(!_a){this._viewdataset=null;this.viewdataset="";}else{_a=_a.replace("@","");var _b=this._findViewDataset(_a);this._viewdataset=_b?_b:"";this.viewdataset=_a;}}else if(this.viewdataset&&!this._viewdataset){this._setViewDatasetStr(this.viewdataset);}};_pView.on_apply_text=function(_a){var _b=this.form;if(_b&&((_b._child_list&&_b._child_list.length>0))||!this._is_alive){return;}var _c=_b.getElement();if(_c){if(!_a){_a=this._displaytext;}var _d=this._cell_elem;if(!_d&&_a){var _e=this._getWindow();_d=this._cell_elem=new nexacro.TextBoxElement(_c);_d.create(_e);}if(_d){_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementVerticalAlign(this.verticalAlign);_d.setElementTextAlign(this.textAlign);_d.setElementText(_a);}}};_pView.set_sourceview=function(_a){if(this._is_created){return;}this.sourceview=_a;};_pView.on_apply_sourceview=function(){if(this.sourceview&&this.getSourceView()){var _a=this.getSourceView().getViewDataset();if(_a){this._viewdataset=_a;this.form[this.viewdataset]=_a;}}};_pView.set_url=nexacro._emptyFn;_pView.set_urlchangeeffect=nexacro._emptyFn;_pView.set_async=nexacro._emptyFn;_pView.reload=nexacro._emptyFn;_pView.getViewDataset=function(){if(this._viewdataset){return this._viewdataset;}var _a=this.getSourceView();if(this.sourceview&&_a){return _a._findViewDataset(_a.viewdataset);}return this._findViewDataset(this.viewdataset);};_pView.getSourceView=function(){if(this.sourceview){return this._getSourceView(this.sourceview);}else{return;}};_pView._getSourceView=function(_a){if(_a&&this.parent){return this.parent[_a];}else{return;}};_pView.on_notifytrigger=function(_a,_b){var _c=this.parent;if(!_c){return;}if(_b){var _d=this.parent._trigger_manager;var _e=_b.eventid;for(var _h in nexacro._trigger_type_table){if(nexacro._trigger_type_table[_h]==_b.eventid){_e=_h;break;}}var _f=_a;var _g=this;if(_d){_d._notifyTrigger(_e,_f,_g);}}};_pView._loadedForm=function(){this._on_apply_formscroll();};_pView._setScript=function(_a){};_pView._setViewDatasetStr=function(_a){if(_a){_a=_a.replace("@","");this._viewdataset=this._findViewDataset(_a);this.viewdataset=_a;}else{this._viewdataset=null;this.viewdataset="";}};_pView._findViewDataset=function(_a){if(_a&&_a.length>0){var _b=this[_a];if(_b&&(_b._type_name=="Dataset")){return _b;}if(this.form){_b=this.form.lookup(_a);if(_b&&(_b._type_name=="Dataset")){return _b;}}}return undefined;};_pView._setViewDataset=function(_a){this.viewdataset=_a;};delete _pView;}if(!nexacro.Action){"use strict";nexacro.ActionEventInfo=function(_a,_b){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;};var _pActionEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ActionEventInfo);nexacro.ActionEventInfo.prototype=_pActionEventInfo;_pActionEventInfo._type_name="ActionEventInfo";nexacro.Action=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this.name=_a;};var _pAction=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Action);nexacro.Action.prototype=_pAction;_pAction._type_name="Action";_pAction.targetview="";_pAction._targetview=null;_pAction._contents=null;_pAction._event_list={"onsuccess":1,"onerror":1};_pAction.destroy=function(){this._contents=null;this._targetview=null;if(this.parent){this.parent.removeChild(this.id);}this.parent=null;nexacro._EventSinkObject.prototype.destroy.call(this);};_pAction.set_targetview=function(_a){if(this.targetview!==_a){this.targetview=_a;this._targetview=null;}};_pAction.set_name=function(_a){if(this.name!=_a){this.name=_a;}};_pAction.on_fire_onsuccess=function(){var _a=this.onsuccess;if(_a&&_a._has_handlers){var _b=new nexacro.ActionEventInfo(this,"onsuccess");_a._fireEvent(this,_b);}};_pAction.on_fire_onerror=function(){var _a=this.onerror;if(_a&&_a._has_handlers){var _b=new nexacro.ActionEventInfo(this,"onerror");_a._fireEvent(this,_b);}};_pAction._setContents=function(_a){if(nexacro._isObject(_a)){this._contents=_a;}else{this._contents=JSON.parse(_a);}};_pAction.getContents=function(_a){_a=nexacro._toString(_a);return this._contents?(this._contents[_a]||this._contents):null;};_pAction._findViewObject=function(_a){var _b=this.parent;if(!_b){return null;}var _c=_b[_a];if(_c instanceof nexacro.View){return _c;}return null;};_pAction.getTargetView=function(){if(this._targetview){return this._targetview;}return this._targetview=this._findViewObject(this.targetview);};_pAction.run=nexacro._emptyFn;}if(!nexacro.WebView){if(!nexacro.WebLoadCompEventInfo){nexacro.WebLoadCompEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onloadcompleted";this.fromobject=this.fromreferenceobject=_a;this.url=_b;};var _pWebLoadCompEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebLoadCompEventInfo);nexacro.WebLoadCompEventInfo.prototype=_pWebLoadCompEventInfo;_pWebLoadCompEventInfo._type_name="WebLoadCompEventInfo";delete _pWebLoadCompEventInfo;}if(!nexacro.WebUserNotifyEventInfo){nexacro.WebUserNotifyEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onusernotify";this.fromobject=this.fromreferenceobject=_a;this.userdata=_b;};var _pWebUserNotifyEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebUserNotifyEventInfo);nexacro.WebUserNotifyEventInfo.prototype=_pWebUserNotifyEventInfo;_pWebUserNotifyEventInfo._type_name="WebUserNotifyEventInfo";delete _pWebUserNotifyEventInfo;}nexacro.WebView=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pWebView=nexacro._createPrototype(nexacro.Component,nexacro.WebView);nexacro.WebView.prototype=_pWebView;_pWebView._type_name="WebView";_pWebView._ifrm_elem=null;_pWebView.window=null;_pWebView.document=null;_pWebView.url="";_pWebView.setupurl="";_pWebView.useurlhistory=true;_pWebView._url="";_pWebView._setupUrl="";_pWebView._blockLoadFlag=false;_pWebView._current_url="";_pWebView.accessibilityrole="webview";_pWebView.accessibilityleavemessage="";_pWebView._scriptcallbacklist=[];_pWebView._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onloadcompleted":1,"onusernotify":1,"ondevicebuttonup":1};_pWebView.on_get_accessibility_label=function(){return this.id;};_pWebView.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._WebViewPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pWebView.on_create_contents_command=function(){return "";};_pWebView.on_attach_contents_handle=function(_a){this.on_created_contents(_a);return;};_pWebView.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;nexacro._observeSysEvent(_b.handle,"mouseover","onmouseover",this._webview_mouseover);}if(this._url===""){this._url="about:blank";}this.on_apply_url();this.on_apply_setupurl();this._on_apply_accessibilityleavemessage();};_pWebView.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){nexacro._stopSysObserving(_a.handle,"mouseover","onmouseover",this._webview_mouseover);this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}};_pWebView.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pWebView.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pWebView.on_fire_onloadcompleted=function(_a,_b){if(this.onloadcompleted&&this.onloadcompleted._has_handlers){var _c=new nexacro.WebLoadCompEventInfo(_a,_b);_c.eventid="onloadcompleted";return this.onloadcompleted._fireEvent(this,_c);}return true;};_pWebView.fireUserNotify=function(_a){if(_a.target){_a.target.on_fire_onusernotify(_a.target,_a.data);}};_pWebView.on_fire_onusernotify=function(_a,_b){if(this.onusernotify&&this.onusernotify._has_handlers){var _c=new nexacro.WebUserNotifyEventInfo(_a,_b);_c.eventid="onusernotify";return this.onusernotify._fireEvent(this,_c);}return true;};_pWebView.on_ondevicebuttonup_default_action=function(_a){if(_a==2){this.goBack();}};_pWebView._getDlgCode=function(_a){var _b=this._ifrm_elem;if(_b){if((!_b._prev_outfocus_message_elem||(_b._prev_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_UP))||(!_b._next_outfocus_message_elem||(_b._next_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_DOWN))){this._want_arrow=false;}else{this._want_arrow=true;}}return {want_tab:true,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pWebView.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Event;if(_a==_g.KEY_TAB){this._getWindow()._keydown_element._event_stop=false;}else if(nexacro._enableaccessibility){var _h=this._ifrm_elem;if(_h){_h._setElementInternalFocus(_a);}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pWebView._apply_setfocus=function(_a){if(nexacro._enableaccessibility){nexacro.Component.prototype._apply_setfocus.call(this,_a);}var _b=this._ifrm_elem;if(_b){_b._setElementFocus();}};_pWebView._webview_mouseover=function(){if(this._linked_element&&!this._linked_element._document){nexacro._initDragInfo();nexacro._cur_track_info=null;}};_pWebView.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this.text){this.text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");this.on_apply_text(_a);}};_pWebView.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this.enable!=_a){this.enable=_a;if(this._is_created){var _b=(this.parent._real_enable&&_a);if(this._real_enable!=_b){this._real_enable=_b;this._changeStatus("disabled",!_b);this.on_apply_prop_enable(this._real_enable);}}}};_pWebView.callMethod=function(){var _a=this._ifrm_elem;if(_a){return nexacro._WebViewPluginElement.prototype.callMethod.apply(_a,arguments);}};_pWebView.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){_b.setElementVisible(_a);}};_pWebView.set_cookiesynctype=function(){};_pWebView.set_url=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._url=_b;this.url=_a;this.on_apply_url();};_pWebView.set_setupurl=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._setupurl=_b;this.setupurl=_a;this.on_apply_setupurl();};_pWebView.set_useurlhistory=function(_a){this.useurlhistory=nexacro._toBoolean(_a);};_pWebView.set_accessibilityleavemessage=function(_a){this.accessibilityleavemessage=_a;this._on_apply_accessibilityleavemessage();};_pWebView.on_apply_url=function(){if(this._url==="http://"||this._url==="file://"||this._url==="https://"||this._url===""){return;}var _a=this._ifrm_elem;if(_a){this._blockLoadFlag=false;_a._setUrl(this._url,this.useurlhistory);}};_pWebView.on_apply_setupurl=function(){if(this._setupurl==="http://"||this._setupurl==="file://"||this._setupurl==="https://"||this._setupurl===""){return;}var _a=this._ifrm_elem;if(_a){_a._setInstallUrl(this._setupurl);}};_pWebView.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._on_apply_accessibilityleavemessage();};_pWebView.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_a);}};_pWebView.reload=function(){var _a=this._ifrm_elem;if(_a){if(this._isCrossDomain(this._current_url)){var _b=this._url;_a._setUrl("");_a._setUrl(_b);}else{_a._setGo();}}};_pWebView.goBack=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setBack();}}};_pWebView.goForward=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setForward();}}};_pWebView.on_load_handler=function(_a){if(this._blockLoadFlag){return;}this._current_url=_a;this.document=this._ifrm_elem._getDoc();if(_a!="about:blank"){this._blockLoadFlag=true;this.on_fire_onloadcompleted(this,_a==""?this.url:_a);}};_pWebView.callScript=function(_a){var _b=this._ifrm_elem;if(_b){{return nexacro._WebViewPluginElement.prototype.injectScript.apply(_b,arguments);}}};_pWebView.addScriptOnDocumentCreated=function(){};_pWebView.removeScriptOnDocumentCreated=function(){};_pWebView.clearScriptOnDocumentCreated=function(){};_pWebView.addEventHandler=function(_a,_b,_c){if(_a in this._event_list==false){this._event_list[_a]=1;}return nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);};_pWebView.removeEventHandler=function(_a,_b,_c){return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pWebView._isCrossDomain=function(_a){if(_a==""){return true;}var _b=this._getRefFormBaseUrl();if(_b.match(/^(file):\/\//)){return false;}var _c=/^(https?):\/\/([^:\/\s]+)(:([^\/]*))?((\/[^\s/\/]+)*)?\/?([^#\s\?]*)(\?([^#\s]*))?(#(\w*))?$/;var _d=_a.match(_c);var _e=_b.match(_c);if(!_d||!_e){return true;}if(_d[2]!=_e[2]){return true;}return false;};_pWebView._on_apply_accessibilityleavemessage=function(){var _a=this.accessibilityleavemessage;if(_a){var _b=this._ifrm_elem;if(_b){_b._setElementLeaveMessage(_a);}}};_pWebView.updateWindow=function(){var _a=this._ifrm_elem;if(_a){_a.updateWindow();}};delete _pWebView;}